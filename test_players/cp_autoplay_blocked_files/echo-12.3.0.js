(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define([], factory);
	else if(typeof exports === 'object')
		exports["echo_js"] = factory();
	else
		root["echo_js"] = factory();
})(window, function() {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 0);
/******/ })
/************************************************************************/
/******/ ({

/***/ "./lib/ati/amd.smarttag-5.17.1.min.js":
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_RESULT__;/** START BBC ADDITION **/
!(__WEBPACK_AMD_DEFINE_RESULT__ = (function(){
/** END BBC ADDITION **/

;(function(){var dfltPluginCfg={"sourceFile":"download","info":true};var dfltGlobalCfg={"site":596068,"log":"","logSSL":"","domain":"ati-host.net","collectDomain":"logw363.ati-host.net","collectDomainSSL":"logws1363.ati-host.net","secure":true,"pixelPath":"/hit.xiti","disableCookie":false,"disableStorage":false,"cookieSecure":false,"cookieDomain":"","preview":false,"plgs":["Campaigns","Clicks","ClientSideUserId","ContextVariables","Offline","OnSiteAds","Page","RichMedia"],"lazyLoadingPath":"","documentLevel":"document","redirect":false,"activateCallbacks":true,"medium":"","ignoreEmptyChapterValue":true,"base64Storage":false,"sendHitWhenOptOut":true};(function(a){a.Echo1200ATInternet=a.Echo1200ATInternet||{};a.Echo1200ATInternet.Tracker=a.Echo1200ATInternet.Tracker||{};a.Echo1200ATInternet.Tracker.Plugins=a.Echo1200ATInternet.Tracker.Plugins||{}})(window);
var Utils=function(){function a(q){var c=typeof q;if("object"!==c||null===q)return"string"===c&&(q='"'+q+'"'),String(q);var f,b,h=[],s=q&&q.constructor===Array;for(f in q)q.hasOwnProperty(f)&&(b=q[f],c=typeof b,"function"!==c&&"undefined"!==c&&("string"===c?b='"'+b.replace(/[^\\]"/g,'\\"')+'"':"object"===c&&null!==b&&(b=a(b)),h.push((s?"":'"'+f+'":')+String(b))));return(s?"[":"{")+String(h)+(s?"]":"}")}function k(a){return null===a?"":(a+"").replace(n,"")}function l(a){var c,f=null;return(a=k(a+""))&&
!k(a.replace(e,function(a,h,q,r){c&&h&&(f=0);if(0===f)return a;c=q||h;f+=!r-!q;return""}))?Function("return "+a)():null}var d=this,e=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g,n=RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g");d.isLocalStorageAvailable=function(){try{var a=localStorage;a.setItem("__storage_test__","__storage_test__");a.removeItem("__storage_test__");return!0}catch(c){return!1}};
d.Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(a){var c="",f,b,h,s,r,e,g=0;for(a=d.Base64._utf8_encode(a);g<a.length;)f=a.charCodeAt(g++),b=a.charCodeAt(g++),h=a.charCodeAt(g++),s=f>>2,f=(f&3)<<4|b>>4,r=(b&15)<<2|h>>6,e=h&63,isNaN(b)?r=e=64:isNaN(h)&&(e=64),c=c+this._keyStr.charAt(s)+this._keyStr.charAt(f)+this._keyStr.charAt(r)+this._keyStr.charAt(e);return c},decode:function(a){var c="",f,b,h,e,r,g=0;for(a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");g<
a.length;)f=this._keyStr.indexOf(a.charAt(g++)),b=this._keyStr.indexOf(a.charAt(g++)),e=this._keyStr.indexOf(a.charAt(g++)),r=this._keyStr.indexOf(a.charAt(g++)),f=f<<2|b>>4,b=(b&15)<<4|e>>2,h=(e&3)<<6|r,c+=String.fromCharCode(f),64!=e&&(c+=String.fromCharCode(b)),64!=r&&(c+=String.fromCharCode(h));return c=d.Base64._utf8_decode(c)},_utf8_encode:function(a){a=a.replace(/\r\n/g,"\n");for(var c="",f=0;f<a.length;f++){var b=a.charCodeAt(f);128>b?c+=String.fromCharCode(b):(127<b&&2048>b?c+=String.fromCharCode(b>>
6|192):(c+=String.fromCharCode(b>>12|224),c+=String.fromCharCode(b>>6&63|128)),c+=String.fromCharCode(b&63|128))}return c},_utf8_decode:function(a){for(var c="",f=0,b,h,e;f<a.length;)b=a.charCodeAt(f),128>b?(c+=String.fromCharCode(b),f++):191<b&&224>b?(h=a.charCodeAt(f+1),c+=String.fromCharCode((b&31)<<6|h&63),f+=2):(h=a.charCodeAt(f+1),e=a.charCodeAt(f+2),c+=String.fromCharCode((b&15)<<12|(h&63)<<6|e&63),f+=3);return c}};d.loadScript=function(a,c){var f;c=c||function(){};f=document.createElement("script");
f.type="text/javascript";f.src=a.url;f.async=!1;f.defer=!1;f.onload=f.onreadystatechange=function(a){a=a||window.event;if("load"===a.type||/loaded|complete/.test(f.readyState)&&(!document.documentMode||9>document.documentMode))f.onload=f.onreadystatechange=f.onerror=null,c(null,a)};f.onerror=function(a){f.onload=f.onreadystatechange=f.onerror=null;c({msg:"script not loaded",event:a})};var b=document.head||document.getElementsByTagName("head")[0];b.insertBefore(f,b.lastChild)};d.cloneSimpleObject=
function(a,c){if("object"!==typeof a||null===a||a instanceof Date)return a;var f=new a.constructor,b;for(b in a)a.hasOwnProperty(b)&&(void 0===b||c&&void 0===a[b]||(f[b]=d.cloneSimpleObject(a[b])));return f};d.jsonSerialize=function(e){try{return"undefined"!==typeof JSON&&JSON.stringify?JSON.stringify(e):a(e)}catch(c){return null}};d.jsonParse=function(a){try{return"undefined"!==typeof JSON&&JSON.parse?JSON.parse(a+""):l(a)}catch(c){return null}};d.arrayIndexOf=function(a,c){return Array.indexOf?
a.indexOf(c):function(a){if(null==this)throw new TypeError;var b=Object(this),c=b.length>>>0;if(0===c)return-1;var e=0;1<arguments.length&&(e=Number(arguments[1]),e!=e?e=0:0!=e&&Infinity!=e&&-Infinity!=e&&(e=(0<e||-1)*Math.floor(Math.abs(e))));if(e>=c)return-1;for(e=0<=e?e:Math.max(c-Math.abs(e),0);e<c;e++)if(e in b&&b[e]===a)return e;return-1}.apply(a,[c])};d.uuid=function(){return{v4:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var c=16*Math.random()|0;return("x"===
a?c:c&3|8).toString(16)})},num:function(a){var c=new Date,f=function(a){a-=100*Math.floor(a/100);return 10>a?"0"+a:String(a)};return f(c.getHours())+""+f(c.getMinutes())+""+f(c.getSeconds())+""+function(a){return Math.floor((9*Math.random()+1)*Math.pow(10,a-1))}(a-6)}}};d.getObjectKeys=function(a){var c=[],f;for(f in a)a.hasOwnProperty(f)&&c.push(f);return c};d.completeFstLevelObj=function(a,c,f){if(a){if(c)for(var b in c)!c.hasOwnProperty(b)||a[b]&&!f||(a[b]=c[b])}else a=c;return a};d.isPreview=
function(){return window.navigator&&"preview"===window.navigator.loadPurpose};d.isPrerender=function(a){var c,f=!1,b=["webkit","ms"];if("prerender"===document.visibilityState)c="visibilitychange";else for(var h=0;h<b.length;h++)"prerender"===document[b[h]+"VisibilityState"]&&(c=b[h]+"visibilitychange");if("undefined"!==typeof c){var e=function(b){a(b);d.removeEvtListener(document,c,e)};d.addEvtListener(document,c,e);f=!0}return f};var m=d.addEvtListener=function(a,c,f){a.addEventListener?a.addEventListener(c,
f,!1):a.attachEvent&&a.attachEvent("on"+c,f)},g=d.removeEvtListener=function(a,c,f){a.removeEventListener?a.removeEventListener(c,f,!1):a.detachEvent&&a.detachEvent("on"+c,f)};d.hashcode=function(a){var c=0;if(0===a.length)return c;for(var f=0;f<a.length;f++)var b=a.charCodeAt(f),c=(c<<5)-c+b,c=c|0;return c};d.setLocation=function(a){var c=a.location;a=window[a.target]||window;c&&(a.location.href=c)};d.dispatchCallbackEvent=function(a){var c;if("function"===typeof window.Event)c=new Event("ATCallbackEvent");
else try{c=document.createEvent("Event"),c.initEvent&&c.initEvent("ATCallbackEvent",!0,!0)}catch(f){}c&&"function"===typeof document.dispatchEvent&&(c.name=a,document.dispatchEvent(c))};d.addCallbackEvent=function(a){m(document,"ATCallbackEvent",a)};d.removeCallbackEvent=function(a){d.removeEvent("ATCallbackEvent",a)};(function(){function a(c,f){f=f||{bubbles:!1,cancelable:!1,detail:void 0};var b;try{b=document.createEvent("CustomEvent"),b.initCustomEvent(c,f.bubbles,f.cancelable,f.detail)}catch(h){}return b}
"function"===typeof window.CustomEvent?window.ATCustomEvent=window.CustomEvent:("function"===typeof window.Event&&(a.prototype=window.Event.prototype),window.ATCustomEvent=a)})();d.addEvent=function(a,c,f,b){d[a]=new ATCustomEvent(a,{detail:{name:c,id:f}});m(document,a,b)};d.removeEvent=function(a,c){g(document,a,c)};d.dispatchEvent=function(a,c){d[a]=d[a]||new ATCustomEvent(a,{detail:{name:c,id:-1}});try{document.dispatchEvent(d[a])}catch(f){}};d.addOptOutEvent=function(a,c){d.addEvent("ATOptOutEvent",
"clientsideuserid",a,c)};d.removeOptOutEvent=function(a){d.removeEvent("ATOptOutEvent",a)};d.dispatchOptOutEvent=function(a){d.optedOut=a;d.dispatchEvent("ATOptOutEvent","clientsideuserid")};d.userOptedOut=function(){d.dispatchOptOutEvent(!0)};d.userOptedIn=function(){d.dispatchOptOutEvent(!1)};d.isOptedOut=function(){if(null===d.optedOut){var a;a:{a=null;d.isLocalStorageAvailable()&&(a=localStorage.getItem("atoptedout"));if(null===a){var c=/(?:^| )atoptedout=([^;]+)/.exec(document.cookie);null!==
c&&(a=c[1])}if(null!==a)try{a=decodeURIComponent(a)}catch(f){}if(a&&(a=d.jsonParse(a)||d.jsonParse(d.Base64.decode(a)),null!==a)){a=!!a.val;break a}a=!1}d.optedOut=a}return!!d.optedOut};d.optedOut=null;d.consentReceived=function(a){d.consent=!!a};d.consent=!0;d.isTabOpeningAction=function(a){var c=!1;a&&(a.ctrlKey||a.shiftKey||a.metaKey||a.button&&1===a.button)&&(c=!0);return c}};window.Echo1200ATInternet.Utils=new Utils;
var BuildManager=function(a){var k=this,l=1600,d=["dz"],e=function(a,f,b,h,e,r,g){a="&"+a+"=";return{param:a,paramSize:a.length,str:f,strSize:f.length,truncate:b,multihit:h,separator:e||"",encode:r,last:g}},n=function(a,f){var b="",h=0,e=0,r=0,g=null,p=null,d;for(d in a)a.hasOwnProperty(d)&&(g=a[d])&&(h=f-e,g.last&&null!==p?p[d]=g:g.strSize+g.paramSize<=h?(b+=g.param+g.str,e+=g.paramSize+g.strSize):(p=p||{},p[d]=g,g.truncate&&(r=h-g.paramSize,g.separator&&(h=g.str.substring(0,h),r=g.encode?h.lastIndexOf(encodeURIComponent(g.separator))||
r:h.lastIndexOf(g.separator)||r),b+=g.param+g.str.substring(0,r),e+=g.paramSize+g.str.substring(0,r).size,p[d].str=g.str.substring(r,g.strSize),p[d].strSize=p[d].str.length)));return[b,p]},m=function(c,f,b,h){var g="",r=function(b){if(b==={})return[];var c=[],h;h={};var f=!1,r=void 0,p,m,q,k,w,t,v,y,z="",x;for(x in b)if(b.hasOwnProperty(x))if(t=w=k=q=!1,p=b[x].value,m=b[x].options||{},"boolean"===typeof m.encode&&(q=m.encode),"function"===typeof p&&(p=p()),p=p instanceof Array?p.join(m.separator||
","):"object"===typeof p?Echo1200ATInternet.Utils.jsonSerialize(p):"undefined"===typeof p?"undefined":p.toString(),q&&(p=encodeURIComponent(p)),-1<Echo1200ATInternet.Utils.arrayIndexOf(d,x)?k=!0:"boolean"===typeof m.truncate&&(k=m.truncate),"boolean"===typeof m.multihit&&(w=m.multihit),"boolean"===typeof m.last&&(t=m.last),p=e(x,p,k,w,m.separator,q,t),w)l-=p.paramSize+p.strSize,z+=p.param+p.str;else if(t)p.paramSize+p.strSize>l&&(p.str=p.str.substring(0,l-p.paramSize),p.strSize=p.str.length),v=x,y=p;else if(h[x]=
p,h[x].paramSize+h[x].strSize>l&&!h[x].truncate){a.emit("Tracker:Hit:Build:Error",{lvl:"ERROR",msg:'Too long parameter: "'+h[x].param+'"',details:{value:h[x].str}});f=!0;r=x;break}v&&(h[v]=y);h=[h,f,r,z];b=h[0];f=h[1];g=h[3];f&&(h=h[2],b=b[h],b.str=b.str.substring(0,l-b.paramSize),b.strSize=b.str.length,f={},f.mherr=e("mherr","1",!1,!1,"",!1),f[h]=b,b=f);b=n(b,l);if(null===b[1])c=b[0];else for(c.push(b[0]);null!==b[1];)b=n(b[1],l),c.push(b[0]);return c},m="";a.buffer.presentInFilters(b,"hitType")||
(b=a.buffer.addInFilters(b,"hitType",["page"]));b=a.buffer.addInFilters(b,"hitType",["all"]);var p;if("object"===typeof c&&null!==c){b=a.buffer.addInFilters(b,"permanent",!0);b=a.buffer.get(b,!0);var q,k,z,t;for(p in c)if(c.hasOwnProperty(p)){m=c[p];q={};if(f&&"object"===typeof c[p]){z=k=!1;for(t in c[p])c[p].hasOwnProperty(t)&&("value"===t?k=!0:"options"===t&&"object"===typeof c[p].options&&null!==c[p].options&&(z=!0));k&&z&&(m=c[p].value,q=c[p].options)}b[p]={value:m,options:q}}m=r(b)}else for(p in b=
a.buffer.get(b,!0),m=r(b),b)!b.hasOwnProperty(p)||b[p].options&&b[p].options.permanent||a.buffer.del(p);h&&h(m,g)},g=function(c,f){var b=a.getConfig("secure"),h="";if(c)h=c;else var h="https:"===document.location.protocol,e=(h=b||h)?a.getConfig("logSSL"):a.getConfig("log"),r=a.getConfig("domain"),h=e&&r?e+"."+r:h?a.getConfig("collectDomainSSL"):a.getConfig("collectDomain");e=a.getConfig("baseURL");r=(r=a.getConfig("pixelPath"))||"/";"/"!==r.charAt(0)&&(r="/"+r);var g=a.getConfig("site");if((e||h&&
r)&&g){var p="//";b&&(p="https:"+p);f&&f(null,(e?e:p+h+r)+("?s="+g))}else f&&f({message:"Config error"})},q=function(a,f,b,h,e){g(h,function(h,g){h?e&&e(h):(l=1600-(g.length+27),m(a,f,b,function(a,b){var c=[],h=Echo1200ATInternet.Utils.uuid().num(13);if(a instanceof Array)for(var f=1;f<=a.length;f++)c.push(g+b+"&mh="+f+"-"+a.length+"-"+h+a[f-1]);else c.push(g+b+a);e&&e(null,c)}))})};k.send=function(c,f,b,h,e){q(c,e,f,h,function(c,h){if(c)a.emit("Tracker:Hit:Build:Error",{lvl:"ERROR",msg:c.message,details:{}}),
b&&b();else for(var f=0;f<h.length;f++)k.sendUrl(h[f],b)})};k.sendUrl=function(c,f){var b=function(b,c,h){return function(){return function(e){var g="";if("/"===c.charAt(0))var g=a.getConfig("secure"),m="https:"===document.location.protocol,g=g||m?"https:":"http:";a.emit(b,{lvl:h,details:{hit:g+c,event:e}});f&&f()}}()};if(Echo1200ATInternet.Utils.isOptedOut()&&!a.getConfig("sendHitWhenOptOut"))b("Tracker:Hit:Sent:NoTrack",c,"INFO")();else{var h=new Image;h.onload=b("Tracker:Hit:Sent:Ok",c,"INFO");h.onerror=
b("Tracker:Hit:Sent:Error",c,"ERROR");h.src=c}}},TriggersManager=function(){function a(a,d,m){for(var g=[],q=0;q<a.length;q++)a[q].callback(d,m),a[q].singleUse||g.push(a[q]);return g}function k(a,d,m,g){var q=a.shift();if("*"===q)return d["*"]=d["*"]||[],d["*"].push({callback:m,singleUse:g}),d["*"].length-1;if(0===a.length)return k([q,"*"],d,m,g);d["*"]=d["*"]||[];d[q]=d[q]||{};return k(a,d[q],m,g)}function l(e,d,m,g){var q=d.shift();"*"!==q&&(0===d.length?l(e,[q,"*"],m,g):m[q]&&(m[q]["*"]=a(m[q]["*"],
e,g),l(e,d,m[q],g)))}var d={};this.on=function(a,n,m){m=m||!1;return k(a.split(":"),d,n,m)};this.emit=function(e,n){d["*"]&&(d["*"]=a(d["*"],e,n));l(e,e.split(":"),d,n)}},PluginsManager=function(a){var k={},l={},d=0,e={},n=0,m=function(a){var b=!1;k[a]&&(b=!0);return b},g=this.unload=function(b){m(b)?(k[b]=void 0,a.emit("Tracker:Plugin:Unload:"+b+":Ok",{lvl:"INFO"})):a.emit("Tracker:Plugin:Unload:"+b+":Error",{lvl:"ERROR",msg:"not a known plugin"});return a},q=this.load=function(b,c){"function"===
typeof c?"undefined"===typeof a.getConfig.plgAllowed||0===a.getConfig.plgAllowed.length||-1<a.getConfig.plgAllowed.indexOf(b)?(k[b]=new c(a),l[b]&&m(b)&&(l[b]=!1,d--,m(b+"_ll")&&g(b+"_ll"),0===d&&a.emit("Tracker:Plugin:Lazyload:File:Complete",{lvl:"INFO",msg:"LazyLoading triggers are finished"})),a.emit("Tracker:Plugin:Load:"+b+":Ok",{lvl:"INFO"})):a.emit("Tracker:Plugin:Load:"+b+":Error",{lvl:"ERROR",msg:"Plugin not allowed",details:{}}):a.emit("Tracker:Plugin:Load:"+b+":Error",{lvl:"ERROR",msg:"not a function",
details:{obj:c}});return a},c=this.isLazyloading=function(a){return a?!0===l[a]:0!==d},f=function(a){return!m(a)&&!c(a)&&m(a+"_ll")},b=function(b){l[b]=!0;d++;Echo1200ATInternet.Utils.loadScript({url:a.getConfig("lazyLoadingPath")+b+".js"})},h=function(a){return f(a)?(b(a),!0):!1},s=function(a){e[a]?e[a]++:e[a]=1;n++};this.isExecWaitingLazyloading=function(){return 0!==n};a.exec=this.exec=function(h,g,p,d){var q=null,l=function(a,b,c,h){b=b.split(".");m(a)&&k[a][b[0]]&&(q=1<b.length&&k[a][b[0]][b[1]]?k[a][b[0]][b[1]].apply(k[a],
c):k[a][b[0]].apply(k[a],c));h&&h(q)},t=function(b,c,h,f){s(b);a.onTrigger("Tracker:Plugin:Load:"+b+":Ok",function(){l(b,c,h,function(c){e[b]--;n--;0===n&&a.emit("Tracker:Plugin:Lazyload:Exec:Complete",{lvl:"INFO",msg:"All exec waiting for lazyloading are done"});f&&f(c)})},!0)};f(h)?(t(h,g,p,d),b(h)):c(h)?t(h,g,p,d):l(h,g,p,d)};this.waitForDependencies=function(b,c){var f=function(a){for(var b={mcount:0,plugins:{}},c=0;c<a.length;c++)k.hasOwnProperty(a[c])||(b.mcount++,b.plugins[a[c]]=!0);return b}(b);
if(0===f.mcount)a.emit("Tracker:Plugin:Dependencies:Loaded",{lvl:"INFO",details:{dependencies:b}}),c();else for(var e in f.plugins)f.plugins.hasOwnProperty(e)&&(a.emit("Tracker:Plugin:Dependencies:Error",{lvl:"WARNING",msg:"Missing plugin "+e}),a.onTrigger("Tracker:Plugin:Load:"+e,function(a,b){var h=a.split(":"),e=h[3];"Ok"===h[4]&&(f.plugins[e]=!1,f.mcount--,0===f.mcount&&c())},!0),h(e))};this.init=function(){for(var a in Echo1200ATInternet.Tracker.pluginProtos)Echo1200ATInternet.Tracker.pluginProtos.hasOwnProperty(a)&&
q(a,Echo1200ATInternet.Tracker.pluginProtos[a])}},CallbacksManager=function(a){var k=this,l={},d=function(a){if(a.name){var d=!0;"undefined"!==typeof configuration&&(configuration.include instanceof Array&&-1===Echo1200ATInternet.Utils.arrayIndexOf(configuration.include,a.name)&&(d=!1),configuration.exclude instanceof Array&&-1!==Echo1200ATInternet.Utils.arrayIndexOf(configuration.exclude,a.name)&&(d=!1));if(Echo1200ATInternet.Callbacks&&Echo1200ATInternet.Callbacks.hasOwnProperty(a.name)){var m={};m[a.name]={"function":Echo1200ATInternet.Callbacks[a.name]};
d&&k.load(a.name,m[a.name]["function"]);Echo1200ATInternet.Tracker.callbackProtos[a.name]||(Echo1200ATInternet.Tracker.callbackProtos[a.name]=m[a.name])}}};k.load=function(e,d){"function"===typeof d?(new d(a),a.emit("Tracker:Callback:Load:"+e+":Ok",{lvl:"INFO",details:{obj:d}})):a.emit("Tracker:Callback:Load:"+e+":Error",{lvl:"ERROR",msg:"not a function",details:{obj:d}});return a};k.init=function(){if(a.getConfig("activateCallbacks")){var e=a.getConfig("callbacks");if("undefined"!==typeof e&&e.include instanceof
Array)for(var n=0;n<e.include.length;n++)Echo1200ATInternet.Callbacks&&Echo1200ATInternet.Callbacks.hasOwnProperty(e.include[n])&&(l[e.include[n]]={"function":Echo1200ATInternet.Callbacks[e.include[n]]},Echo1200ATInternet.Tracker.callbackProtos[e.include[n]]||(Echo1200ATInternet.Tracker.callbackProtos[e.include[n]]=l[e.include[n]]));else for(n in Echo1200ATInternet.Callbacks)Echo1200ATInternet.Callbacks.hasOwnProperty(n)&&(l[n]={"function":Echo1200ATInternet.Callbacks[n]},Echo1200ATInternet.Tracker.callbackProtos[n]||(Echo1200ATInternet.Tracker.callbackProtos[n]=l[n]));if("undefined"!==
typeof e&&e.exclude instanceof Array)for(n=0;n<e.exclude.length;n++)l[e.exclude[n]]&&(l[e.exclude[n]]=void 0);for(var m in l)l.hasOwnProperty(m)&&l[m]&&k.load(m,l[m]["function"]);Echo1200ATInternet.Utils.addCallbackEvent(d)}};k.removeCallbackEvent=function(){Echo1200ATInternet.Utils.removeCallbackEvent(d)}},BufferManager=function(a){var k={};this.set=function(a,d,m){m=m||{};m.hitType=m.hitType||["page"];k[a]={value:d,options:m}};var l=function(a,d,m){return(a=window.Echo1200ATInternet.Utils.cloneSimpleObject(a[d]))&&!m?
a.value:a},d=function n(a,g){if(!(a&&g instanceof Array&&a instanceof Array))return[];if(0===a.length)return g;var d=a[0],c,f=[],b=window.Echo1200ATInternet.Utils.cloneSimpleObject(a);b.shift();for(var h=0;h<g.length;h++)if("object"!==typeof d[1])k[g[h]]&&k[g[h]].options[d[0]]===d[1]&&f.push(g[h]);else{c=d[1].length;for(var s=0;s<c;s++)if(k[g[h]]&&k[g[h]].options[d[0]]instanceof Array&&0<=window.Echo1200ATInternet.Utils.arrayIndexOf(k[g[h]].options[d[0]],d[1][s])){f.push(g[h]);break}}return n(b,f)};this.get=function(a,
m){var g={};if("string"===typeof a)g=l(k,a,m);else for(var q=d(a,window.Echo1200ATInternet.Utils.getObjectKeys(k)),c=0;c<q.length;c++)g[q[c]]=l(k,q[c],m);return g};this.presentInFilters=function m(a,d){return a&&0!==a.length?a[0][0]===d?!0:m(a.slice(1),d):!1};this.addInFilters=function g(a,c,f,b){if(!a||0===a.length)return b?[]:[[c,f]];var h=a[0][0],d=a[0][1];h===c&&(d instanceof Array&&-1===window.Echo1200ATInternet.Utils.arrayIndexOf(d,f[0])&&d.push(f[0]),b=!0);return[[h,d]].concat(g(a.slice(1),c,f,b))};this.del=
function(a){k[a]=void 0};this.clear=function(){k={}}},Tag=function(a,k,l){k=k||{};var d=this;d.version="5.17.1";var e=window.Echo1200ATInternet.Utils.cloneSimpleObject(k);d.triggers=new TriggersManager(d);d.emit=d.triggers.emit;d.onTrigger=d.triggers.on;var n=window.Echo1200ATInternet.Utils.cloneSimpleObject(dfltGlobalCfg)||{},m;for(m in a)a.hasOwnProperty(m)&&(n[m]=a[m]);d.getConfig=function(a){return n[a]};d.setConfig=function(a,e,c){void 0!==n[a]&&c||(d.emit("Tracker:Config:Set:"+a,{lvl:"INFO",details:{bef:n[a],
aft:e}}),n[a]=e)};d.configPlugin=function(a,e,c){n[a]=n[a]||{};for(var f in e)e.hasOwnProperty(f)&&void 0===n[a][f]&&(n[a][f]=e[f]);c&&(c(n[a]),d.onTrigger("Tracker:Config:Set:"+a,function(a,h){c(h.details.aft)}));return n[a]};d.getContext=function(a){return e[a]};d.setContext=function(a,m){d.emit("Tracker:Context:Set:"+a,{lvl:"INFO",details:{bef:e[a],aft:m}});e[a]=m};d.delContext=function(a,m){d.emit("Tracker:Context:Deleted:"+a+":"+m,{lvl:"INFO",details:{key1:a,key2:m}});if(a)e.hasOwnProperty(a)&&
(m?e[a]&&e[a].hasOwnProperty(m)&&(e[a][m]=void 0):e[a]=void 0);else if(m)for(var c in e)e.hasOwnProperty(c)&&e[c]&&e[c].hasOwnProperty(m)&&(e[c][m]=void 0)};d.plugins=new PluginsManager(d);d.buffer=new BufferManager(d);d.setParam=d.buffer.set;d.getParams=function(a){return d.buffer.get(a,!1)};d.getParam=d.buffer.get;d.delParam=d.buffer.del;d.builder=new BuildManager(d);d.sendHit=d.builder.send;d.sendUrl=d.builder.sendUrl;d.callbacks=new CallbacksManager(d);d.setParam("ts",function(){return(new Date).getTime()},
{permanent:!0,hitType:["all"]});(d.getConfig("disableCookie")||d.getConfig("disableStorage"))&&d.setParam("idclient","Consent-NO",{permanent:!0,hitType:["all"]});d.getConfig("medium")&&d.setParam("medium",d.getConfig("medium"),{permanent:!0,hitType:["all"]});d.plugins.init();d.callbacks.init();Echo1200ATInternet.Tracker.instances.push(d);d.emit("Tracker:Ready",{lvl:"INFO",msg:"Tracker initialized",details:{tracker:d,args:{config:a,context:k,callback:l}}});l&&l(d)};Echo1200ATInternet.Tracker.Tag=Tag;
Echo1200ATInternet.Tracker.instances=[];Echo1200ATInternet.Tracker.pluginProtos={};Echo1200ATInternet.Tracker.addPlugin=function(a,k){k=k||Echo1200ATInternet.Tracker.Plugins[a];if(!Echo1200ATInternet.Tracker.pluginProtos[a]){Echo1200ATInternet.Tracker.pluginProtos[a]=k;for(var l=0;l<Echo1200ATInternet.Tracker.instances.length;l++)Echo1200ATInternet.Tracker.instances[l].plugins.load(a,k)}};Echo1200ATInternet.Tracker.delPlugin=function(a){if(Echo1200ATInternet.Tracker.pluginProtos[a]){Echo1200ATInternet.Tracker.pluginProtos[a]=void 0;for(var k=0;k<Echo1200ATInternet.Tracker.instances.length;k++)Echo1200ATInternet.Tracker.instances[k].plugins.unload(a)}};
Echo1200ATInternet.Tracker.callbackProtos={};
}).call(window);;(function(){var dfltPluginCfg={"lifetime":30,"lastPersistence":true,"listEventsForExec":[],"domainAttribution":true,"info":true};var dfltGlobalCfg={"visitLifetime":30,"redirectionLifetime":30};window.Echo1200ATInternet.Tracker.Plugins.Campaigns=function(a){a.setConfig("visitLifetime",dfltGlobalCfg.visitLifetime,!0);a.setConfig("redirectionLifetime",dfltGlobalCfg.redirectionLifetime,!0);var k={},l,d;a.configPlugin("Campaigns",dfltPluginCfg||{},function(a){k=a});var e,n,m,g,q,c,f,b,h,s,r,w,p,y=function(){var b=function(a){var b="";a&&(b=isNaN(a)&&-1===a.search(/\[(.*?)\]/g)?"["+a+"]":a);return b},c=function(a){for(;"-"===a.charAt(a.length-1);)a=a.substring(0,a.length-1);return a};this.SponsoredLinks=
function(){var h={google:"goo",yahoo:"ysm",miva:"miv",orange:"wan",msn:"msn",mirago:"mir",sklik:"skl",adfox:"adf",etarget:"etg",yandex:"yan",ebay:"eba",searchalliance:"sal",bing:"bin",naver:"nav",baidu:"bdu",qwant:"qwt"},f={search:"s",content:"c"};this.at_medium="sl";this.at_term=this.at_network=this.at_variant=this.at_creation=this.at_platform=this.at_campaign="";this.format=function(){var a="sec",e=b(this.at_campaign),g=h[this.at_platform]||"",d=b(this.at_creation),p=b(this.at_variant),r=f[this.at_network]||
"",m=b(this.at_term);return c(a+("-"+e+"-"+g+"-"+d+"-"+p+"-"+r+"-"+m))};this.setProperties=function(b){this.at_campaign=a.utils.getQueryStringValue("at_campaign",b)||"";this.at_platform=a.utils.getQueryStringValue("at_platform",b)||"";this.at_creation=a.utils.getQueryStringValue("at_creation",b)||"";this.at_variant=a.utils.getQueryStringValue("at_variant",b)||"";this.at_network=a.utils.getQueryStringValue("at_network",b)||"";this.at_term=a.utils.getQueryStringValue("at_term",b)||""}};this.Email=function(){var h=
{acquisition:"erec",retention:"epr",promotion:"es"};this.at_medium="email";this.at_send_time=this.at_recipient_list=this.at_recipient_id=this.at_link=this.at_send_date=this.at_creation=this.at_campaign=this.at_emailtype="";this.format=function(){var a=h[this.at_emailtype]||h.promotion,f=b(this.at_campaign),e=b(this.at_creation),g=this.at_send_date,d=b(this.at_link),a=a+("-"+f+"-"+e+"-"+g+"-"+d+"-"+(this.at_recipient_id+(this.at_recipient_list?"@"+this.at_recipient_list:""))+"-"+this.at_send_time);
return c(a)};this.setProperties=function(b){this.at_emailtype=a.utils.getQueryStringValue("at_emailtype",b)||"";this.at_campaign=a.utils.getQueryStringValue("at_campaign",b)||"";this.at_creation=a.utils.getQueryStringValue("at_creation",b)||"";this.at_send_date=a.utils.getQueryStringValue("at_send_date",b)||"";this.at_link=a.utils.getQueryStringValue("at_link",b)||"";this.at_recipient_id=a.utils.getQueryStringValue("at_recipient_id",b)||"";this.at_recipient_list=a.utils.getQueryStringValue("at_recipient_list",
b)||"";this.at_send_time=a.utils.getQueryStringValue("at_send_time",b)||""}};this.Affiliate=function(){this.at_medium="affiliate";this.at_variant=this.at_creation=this.at_format=this.at_identifier=this.at_type=this.at_campaign="";this.format=function(){var a="al",h=b(this.at_campaign),f=b(this.at_type),e=b(this.at_identifier),g=b(this.at_format),d=b(this.at_creation),p=b(this.at_variant);return c(a+("-"+h+"-"+f+"-"+e+"-"+g+"-"+d+"-"+p))};this.setProperties=function(b){this.at_campaign=a.utils.getQueryStringValue("at_campaign",
b)||"";this.at_type=a.utils.getQueryStringValue("at_type",b)||"";this.at_identifier=a.utils.getQueryStringValue("at_identifier",b)||"";this.at_format=a.utils.getQueryStringValue("at_format",b)||"";this.at_creation=a.utils.getQueryStringValue("at_creation",b)||"";this.at_variant=a.utils.getQueryStringValue("at_variant",b)||""}};this.Display=function(){this.at_medium="display";this.at_detail_placement=this.at_general_placement=this.at_channel=this.at_format=this.at_variant=this.at_creation=this.at_campaign=
"";this.format=function(){var a="ad",h=b(this.at_campaign),f=b(this.at_creation),e=b(this.at_variant),g=b(this.at_format),d=b(this.at_channel),p=b(this.at_general_placement),r=b(this.at_detail_placement);return c(a+("-"+h+"-"+f+"-"+e+"-"+g+"-"+d+"-"+p+"-"+r))};this.setProperties=function(b){this.at_campaign=a.utils.getQueryStringValue("at_campaign",b)||"";this.at_creation=a.utils.getQueryStringValue("at_creation",b)||"";this.at_variant=a.utils.getQueryStringValue("at_variant",b)||"";this.at_format=
a.utils.getQueryStringValue("at_format",b)||"";this.at_channel=a.utils.getQueryStringValue("at_channel",b)||"";this.at_general_placement=a.utils.getQueryStringValue("at_general_placement",b)||"";this.at_detail_placement=a.utils.getQueryStringValue("at_detail_placement",b)||""}};this.Custom=function(){this.at_custom4=this.at_custom3=this.at_custom2=this.at_custom1=this.at_campaign=this.at_medium="";this.format=function(){var a="";/\d+$/.test(this.at_medium)&&(a=/\d+$/.exec(this.at_medium)[0]);var a=
"cs"+a,h=b(this.at_campaign),f=b(this.at_custom1),e=b(this.at_custom2),g=b(this.at_custom3),d=b(this.at_custom4);return c(a+("-"+h+"-"+f+"-"+e+"-"+g+"-"+d))};this.setProperties=function(b){this.at_medium=a.utils.getQueryStringValue("at_medium",b)||"";this.at_campaign=a.utils.getQueryStringValue("at_campaign",b)||"";this.at_custom1=a.utils.getQueryStringValue("at_custom1",b)||"";this.at_custom2=a.utils.getQueryStringValue("at_custom2",b)||"";this.at_custom3=a.utils.getQueryStringValue("at_custom3",
b)||"";this.at_custom4=a.utils.getQueryStringValue("at_custom4",b)||""}};this.medium={sl:this.SponsoredLinks,email:this.Email,affiliate:this.Affiliate,display:this.Display}},v=function(b,c){var h=a.storage[d](b);if(null!==h)return"object"===typeof h&&!(h instanceof Array);a.storage[l](b,{},c);return!0},z=function(b,c){var h=a.getContext("campaigns")||{};h[b]=c;a.setContext("campaigns",h)};(function(){a.plugins.waitForDependencies(["Storage","Utils"],function(){l="set"+(k.domainAttribution?"":"Private");
d="get"+(k.domainAttribution?"":"Private");e=a.storage[d](["atredir","gopc"]);n=a.storage[d](["atredir","gopc_err"]);m=a.storage[d](["atredir","camp"]);a.storage.del(["atredir","gopc"]);a.storage.del(["atredir","gopc_err"]);a.storage.del(["atredir","camp"]);g=a.storage[d](["atsession","histo_camp"]);q=a.storage[d](["atreman","camp"]);c=a.storage[d](["atreman","date"]);var t=a.utils.getLocation(),u=a.utils.getQueryStringValue("at_medium",t);if(u){var B=new y,u="function"===typeof B.medium[u]?new B.medium[u]:
new B.Custom;u.setProperties(t);f=u.format()}else f=a.utils.getQueryStringValue("xtor",t);b=a.utils.getQueryStringValue("xtdt",t);h=a.utils.getQueryStringValue("xts",t);s=a.getContext("forcedCampaign");r=!!a.getConfig("redirect");w=!!(f&&b&&h);p=!1;w&&(t=(new Date).getTime()/6E4,p=!r&&h!==a.getConfig("site")||0>t-b||t-b>=a.getConfig("visitLifetime"));t=s||m||f;r&&t&&v("atredir",{path:"/",end:a.getConfig("redirectionLifetime")})&&(a.storage[l](["atredir","camp"],t),u=t=!1,s||(m?(t=e,u=n):(t=w,u=p)),
a.storage[l](["atredir","gopc"],t),a.storage[l](["atredir","gopc_err"],u));!r&&q&&(z("xtor",q),t=(new Date).getTime()/36E5,t=Math.floor(t-c),z("roinbh",0<=t?t:0));r||(t=null,t=m?e?s||t:s||m:w?s:s||f||t,g&&g instanceof Array&&-1<g.indexOf(t)&&(t=null),t&&z("xto",t));if(!r&&!s){var A;m?n&&(A=m):p&&(A=f);A&&z("pgt",A)}if(!r&&(A=m?s||m:s||f||null)&&!(!s&&!m&&w&&p||!s&&m&&e&&n)){if((!g||g instanceof Array&&0>g.indexOf(A))&&v("atsession",{path:"/",session:60*a.getConfig("visitLifetime")}))a.storage[l](["atsession",
"histo_camp"],g&&g.push(A)?g:[A]);q&&!k.lastPersistence||!v("atreman",{path:"/",session:86400*k.lifetime})||(a.storage[l](["atreman","camp"],A),a.storage[l](["atreman","date"],(new Date).getTime()/36E5))}a.emit("Campaigns:process:done",{lvl:"INFO"})})})()};window.Echo1200ATInternet.Tracker.addPlugin("Campaigns");
}).call(window);;(function(){var dfltPluginCfg={"info":true};var dfltGlobalCfg={};window.Echo1200ATInternet.Tracker.Plugins.Clicks=function(a){var k=function(a){var d="";switch(a){case "exit":d="S";break;case "download":d="T";break;case "action":d="A";break;case "navigation":d="N"}return d},l=function(e){var d=e.name;a.exec("Utils","manageChapters",[e,"chapter",3],function(a){d=a+(d?d:"")});return d},d=function(e){var d={p:l(e),s2:e.level2||"",click:k(e.type)||""},m=["click"],g=a.getContext("page")||{};d.pclick=l(g);d.s2click=g.level2||"";var g=e.customObject,q=!1;g&&(q=!0,g=a.processTagObject("stc",
m,g),d.stc={value:Echo1200ATInternet.Utils.jsonSerialize(g),options:{hitType:m,encode:!0,separator:",",truncate:!0}});a.sendHit(d,[["hitType",m]],e.callback,null,q)};a.click={};a.clickListener=this.clickListener={};a.click.send=this.send=function(e){var k=!0,m=null;e&&e.hasOwnProperty("event")&&(m=e.event||window.event);!Echo1200ATInternet.Utils.isTabOpeningAction(m)&&e.elem&&(k=a.techClicks.manageClick(e.elem,m));d(e);return k};a.clickListener.send=this.clickListener.send=function(e){if(e.elem){var k="click";a.plugins.exec("TechClicks",
"isFormSubmit",[e.elem],function(a){k=a?"submit":"click"});Echo1200ATInternet.Utils.addEvtListener(e.elem,k,function(m){Echo1200ATInternet.Utils.isTabOpeningAction(m)||a.techClicks.manageClick(e.elem,m);d(e)})}};a.click.set=this.set=function(e){a.dispatchSubscribe("click");a.setContext("click",{name:l(e),level2:e.level2||"",customObject:e.customObject});a.setParam("click",k(e.type)||"",{hitType:["click"]})};a.click.onDispatch=this.onDispatch=function(e){var d=["click"],m=a.getContext("click")||{},g=a.getContext("page")||
{};a.setParam("pclick",l(g),{hitType:d});a.setParam("s2click",g.level2||"",{hitType:d});a.setParam("p",m.name,{hitType:d});a.setParam("s2",m.level2,{hitType:d});(m=m.customObject)?a.processContextObjectAndSendHit("stc",{hitType:d,encode:!0,separator:",",truncate:!0},m,e):a.manageSend(function(){a.sendHit(null,[["hitType",d]],e)});a.setContext("click",void 0)}};window.Echo1200ATInternet.Tracker.addPlugin("Clicks");
}).call(window);;(function(){var dfltPluginCfg={"clientSideMode":"always","userIdCookieDuration":397,"userIdExpirationMode":"relative","optOut":"OPT-OUT","userIdStorageName":"atuserid","optOutStorageName":"atoptedout","info":true};var dfltGlobalCfg={};window.Echo1200ATInternet.Tracker.Plugins.ClientSideUserId=function(a){var k={},l=void 0,d=null,e=!1,n=!1,m=!1,g="",q="",c=!1,f=!1,b=-1;a.configPlugin("ClientSideUserId",dfltPluginCfg||{},function(a){k=a});var h=function(){if("relative"===k.userIdExpirationMode||"fixed"===k.userIdExpirationMode&&null===d||c){var b=new Date;b.setTime(b.getTime()+864E5*k.userIdCookieDuration);a.storage.set(q,g,{end:b,path:"/"},f);b=a.storage.get(q,!0);Echo1200ATInternet.Utils.consent&&!c&&g!==b&&a.setParam("idclient",g+"-NO",{multihit:!0,
permanent:!0,hitType:["all"]})}},s=function(){a.setParam("idclient",g,{multihit:!0,permanent:!0,hitType:["all"]});h()},r=function(){l=a.getContext("userIdentifier");d=a.storage.get("atuserid");var b=!1;if("required"===k.clientSideMode){var h="";window.navigator&&(h=window.navigator.userAgent);if(/Safari/.test(h)&&!/Chrome/.test(h)||/iPhone|iPod|iPad/.test(h))b=!0}else"always"===k.clientSideMode&&(b=!0);e=b;b=!1;h=Echo1200ATInternet.Utils.optedOut;!1===h&&(a.storage.del("atoptedout"),a.getParam("idclient")===
k.optOut&&a.delParam("idclient"));var r=a.storage.get("atoptedout",!0);if(!0===h||r===k.optOut)b=!0;b&&(Echo1200ATInternet.Utils.optedOut=!0);n=b;m="undefined"!==typeof l;if(e||n||m)q=k.userIdStorageName,f=c=!1,n?(g=k.optOut,q=k.optOutStorageName,f=c=!0):a.getConfig("disableCookie")||a.getConfig("disableStorage")?(g=a.getParam("idclient"),c=!0):m?(g=l,c=!0):g=null!==d?d:Echo1200ATInternet.Utils.uuid().v4(),s()},w=function(a){a&&(a=a.detail)&&"clientsideuserid"===a.name&&a.id===b&&r()};(function(){a.plugins.waitForDependencies(["Storage"],
function(){var a=Echo1200ATInternet.Utils.uuid();b=parseInt(a.num(8));Echo1200ATInternet.Utils.removeOptOutEvent(w);Echo1200ATInternet.Utils.addOptOutEvent(b,w);r()})})();a.clientSideUserId={};a.clientSideUserId.set=function(a){n||(g=a,c=!0,q=k.userIdStorageName,f=!1,s())};a.clientSideUserId.store=function(){f=c=!0;h()};a.clientSideUserId.get=function(){return g}};window.Echo1200ATInternet.Tracker.addPlugin("ClientSideUserId");
}).call(window);;(function(){var dfltPluginCfg={"domainAttribution":true,"info":true};var dfltGlobalCfg={"redirectionLifetime":30};window.Echo1200ATInternet.Tracker.Plugins.ContextVariables=function(a){var k="",l=null,d,e="",n="",m={};a.configPlugin("ContextVariables",dfltPluginCfg||{},function(a){m=a});a.setConfig("redirectionLifetime",dfltGlobalCfg.redirectionLifetime,!0);var g=function(b,c,f){var e=null;a.plugins.exec(b,c,f,function(a){e=a});return e},q=function(a,b){return g("Utils",a,b)},c=function(b,c){var f=null;a.plugins.exec("Storage",b,c,function(a){f=a});return f},f=function(){a.setParam("hl",function(){var a=new Date;return a.getHours()+
"x"+a.getMinutes()+"x"+a.getSeconds()},{permanent:!0,hitType:["all"]})},b=function(a){(a=d?d:"acc_dir"===k?"":null!==k?k:"acc_dir"===l?"":l?l:a?a.referrer:"")&&(a=a.replace(/[<>]/g,"").substring(0,1600).replace(/&/g,"$"));return a};a.plugins.waitForDependencies(["Storage","Utils"],function(){e="set"+(m.domainAttribution?"":"Private");n="get"+(m.domainAttribution?"":"Private");var h=q("getLocation",[]);k=q("getQueryStringValue",["xtref",h]);void 0===k&&(k="");d=a.getContext("forcedReferer");if(a.getConfig("redirect")){var h=
q("getDocumentLevel",[]),h=d?d:null!==k?k:h?h.referrer:"acc_dir",g;if(g=h){g={path:"/",end:a.getConfig("redirectionLifetime")};var r=c(n,["atredir"]);null!==r?g="object"===typeof r&&!(r instanceof Array):(c(e,["atredir",{},g]),g=!0)}g&&c(e,[["atredir","ref"],h])}else{l=c(n,[["atredir","ref"]]);c("del",[["atredir","ref"]]);a.setParam("vtag",a.version,{permanent:!0,hitType:["all"]});a.setParam("ptag","js",{permanent:!0,hitType:["all"]});h="";try{h+=window.screen.width+"x"+window.screen.height+"x"+window.screen.pixelDepth+
"x"+window.screen.colorDepth}catch(w){}a.setParam("r",h,{permanent:!0,hitType:["all"]});h="";window.innerWidth?h+=window.innerWidth+"x"+window.innerHeight:document.body&&document.body.offsetWidth&&(h+=document.body.offsetWidth+"x"+document.body.offsetHeight);a.setParam("re",h,{permanent:!0,hitType:["all"]});f();window.navigator&&a.setParam("lng",window.navigator.language||window.navigator.userLanguage,{permanent:!0,hitType:["all"]});h=Echo1200ATInternet.Utils.uuid().num(13);a.setParam("idp",h,{permanent:!0,
hitType:["page","clickzone"]});window.navigator&&a.setParam("jv",window.navigator.javaEnabled()?"1":"0",{hitType:["page"]});h=q("getDocumentLevel",[]);a.setParam("ref",b(h),{permanent:!0,last:!0,hitType:["page"]})}a.emit("ContextVariables:Ready",{lvl:"INFO"})})};window.Echo1200ATInternet.Tracker.addPlugin("ContextVariables");
}).call(window);;(function(){var dfltPluginCfg={"storageCapacity":1,"timeout":500,"info":true};var dfltGlobalCfg={};window.Echo1200ATInternet.Tracker.Plugins.Offline=function(a){var k={};a.configPlugin("Offline",dfltPluginCfg||{},function(a){k=a});var l=function(){var a=localStorage.getItem("ATOffline"),f={hits:[],length:0};if(a){var b=Echo1200ATInternet.Utils.jsonParse(a)||{hits:[]};f.hits=b.hits;f.length=a.length}return f},d=function(a){try{localStorage.setItem("ATOffline",Echo1200ATInternet.Utils.jsonSerialize(a))}catch(f){}},e=function(){return l().hits},n=function(a){if(a){a=a.split(/&ref=\.*/i);var f="&cn=offline&olt="+String(Math.floor((new Date).getTime()/
1E3));a=a[0]+f+"&ref="+(a[1]||"")}return a},m=function(a){var f=l(),b=a.length,e=!0;if(4*((f.length||11)+b)>1048576*k.storageCapacity){var e=!1,g=f.hits.shift();if("undefined"!==typeof g)for(var e=!0,r=g.length;r<b;)if(g=f.hits.shift(),"undefined"!==typeof g)r+=g.length;else{e=!1;break}}e&&(f.hits.push(a),d({hits:f.hits}))},g=function(c,f){if(window.navigator&&window.navigator.onLine){var b=e();if(0<b.length){var h=b.shift();d({hits:b});a.onTrigger("Tracker:Hit:Sent:Ok",function(){g(c,f)},!0);a.onTrigger("Tracker:Hit:Sent:Error",
function(){g(c,f)},!0);a.sendUrl(h)}else if(c){var l=null;a.plugins.exec("Utils","getQueryStringValue",["a",c],function(a){l=a});l?setTimeout(function(){a.sendUrl(c,f)},k.timeout):a.sendUrl(c,f)}}else c&&(m(n(c)),f&&f())},q=function(c){a.builder.sendUrl=function(a,b){c||window.navigator&&!window.navigator.onLine?(m(n(a)),b&&b()):g(a,b)}};a.offline={};a.offline.getLength=function(){return 4*l().length};a.offline.remove=function(){d({hits:[]})};a.offline.get=e;a.offline.send=function(){g(null,null)};
a.plugins.waitForDependencies(["Utils"],function(){var c=Echo1200ATInternet.Utils.isLocalStorageAvailable(),f;window.navigator&&(f=window.navigator.onLine);c&&"undefined"!==typeof f&&("required"===k.storageMode?q(!1):"always"===k.storageMode&&q(!0));a.emit("Offline:Ready",{lvl:"INFO",details:{isLocalStorageAvailable:c,storageMode:k.storageMode,isOnline:f}})})};window.Echo1200ATInternet.Tracker.addPlugin("Offline");
}).call(window);;(function(){var dfltPluginCfg={"info":true};var dfltGlobalCfg={};window.Echo1200ATInternet.Tracker.Plugins.OnSiteAds=function(a){var k="",l=function(c){var f=c.name;a.exec("Utils","manageChapters",[c,"chapter",3],function(a){f=a+(f?f:"")});return f},d=function(a,f){return a[f]?a[f]:""},e=function(a,f){var b=d(a,f);if(b){var e=d(a,"prefix");if(b.campaignId){var e=e||"PUB",g=d(b,"campaignId"),k=d(b,"creation"),m=d(b,"variant"),p=d(b,"format"),l=d(b,"generalPlacement"),n=d(b,"detailedPlacement"),q=d(b,"advertiserId"),b=d(b,"url");return e+"-"+g+"-"+k+"-"+m+"-"+p+"-"+l+"-"+
n+"-"+q+"-"+b}if(b.adId)return e=e||"INT",g=d(b,"adId"),k=d(b,"format"),b=d(b,"productId"),e+"-"+g+"-"+k+"||"+b}return""},n=function(c){var f=["onSiteAdsImpression"],b={};b.ati={value:e(c,"impression"),options:{hitType:f,truncate:!0}};b.type="AT";Echo1200ATInternet.Utils.isPreview()&&a.getConfig("preview")&&(b.pvw=1);var d=c.customObject;d&&(d=a.processTagObject("stc",f,d),b.stc={value:Echo1200ATInternet.Utils.jsonSerialize(d),options:{hitType:f,encode:!0,separator:",",truncate:!0}});a.manageSend(function(){a.sendHit(b,
[["hitType",f]],c.callback,null,!0)})},m=function(c,f){var b=a.buffer.get("ati",!0)||{};b.value="string"===typeof b.value?[b.value]:b.value||[];b.options=b.options||{truncate:!0,hitType:[f,"page"]};b.value.push(c);a.buffer.set("ati",b.value,b.options)},g=function(c,f){c.click?a.setParam("atc",e(c,"click"),{truncate:!0,hitType:[f,"page"]}):c.impression&&a.setParam("ati",e(c,"impression"),{truncate:!0,hitType:[f,"page"]});if(c.customObject){a.setContext("onsiteads",{customObject:c.customObject});var b=
a.getContext("page")||{};b.customObject=Echo1200ATInternet.Utils.completeFstLevelObj(b.customObject,c.customObject,!1);a.setContext("page",b)}a.dispatchSubscribe("onSiteAds")};a.selfPromotion=this.selfPromotion={};a.publisher=this.publisher={};a.publisher.set=this.publisher.set=function(a){g(a,"publisher")};a.selfPromotion.set=this.selfPromotion.set=function(a){g(a,"selfPromotion")};a.publisher.add=this.publisher.add=function(c){m(e(c,"impression"),"publisher");a.dispatchSubscribe("onSiteAds")};a.selfPromotion.add=
this.selfPromotion.add=function(c){m(e(c,"impression"),"selfPromotion");a.dispatchSubscribe("onSiteAds")};var q=this.advertEvent=function(c){var f=!0,b=null;c&&c.hasOwnProperty("event")&&(b=c.event||window.event);!Echo1200ATInternet.Utils.isTabOpeningAction(b)&&c.elem&&(f=a.techClicks.manageClick(c.elem,b));if(c.click){var b=["onSiteAdsClick"],d=a.getContext("page")||{},g={};g.atc={value:e(c,"click"),options:{truncate:!0}};g.type="AT";g.patc=l(d);g.s2atc=d.level2||"";if(d=c.customObject)d=a.processTagObject("stc",
b,d),g.stc={value:Echo1200ATInternet.Utils.jsonSerialize(d),options:{hitType:b,encode:!0,separator:",",truncate:!0}};a.sendHit(g,[["hitType",b]],c.callback,null,!0)}else c.impression&&n(c);return f};a.publisher.send=this.publisher.send=function(a){return q(a)};a.selfPromotion.send=this.selfPromotion.send=function(a){return q(a)};a.onSiteAds={};a.onSiteAds.onDispatch=this.onDispatch=function(c){if(!a.dispatchSubscribed("page")){a.setParam("type","AT",{hitType:["publisher","selfPromotion"]});var f=a.getContext("page")||
{};a.getParam("atc")&&(a.setParam("patc",l(f),{hitType:["publisher","selfPromotion"]}),a.setParam("s2atc",f.level2||"",{hitType:["publisher","selfPromotion"]}));Echo1200ATInternet.Utils.isPreview()&&a.getConfig("preview")&&a.setParam("pvw",1);var b=["publisher","selfPromotion"];(f=(a.getContext("onsiteads")||{}).customObject)?a.processContextObjectAndSendHit("stc",{hitType:b,encode:!0,separator:",",truncate:!0},f,c):a.manageSend(function(){a.sendHit(null,[["hitType",b]],c)})}};a.plugins.waitForDependencies(["Utils",
"TechClicks"],function(){k=document.location.href;a.plugins.exec("Utils","getQueryStringValue",["xtatc",k],function(c){c&&a.setParam("atc",c,{hitType:["publisher","selfPromotion","page"]})});a.emit("OnSiteAds:Ready",{lvl:"INFO",details:{href:k}})})};window.Echo1200ATInternet.Tracker.addPlugin("OnSiteAds");
}).call(window);;(function(){var dfltPluginCfg={"info":true};var dfltGlobalCfg={};window.Echo1200ATInternet.Tracker.Plugins.Page=function(a){var k=["pageId","chapterLabel","update"],l=["pid","pchap","pidt"],d=["page","site"],e=["f","x"],n=function(b){var c=b.name;a.exec("Utils","manageChapters",[b,"chapter",3],function(a){c=a+(c?c:"")});return c},m=function(a,b,c){b?a=b:a||"undefined"===typeof c||(a=c);return a},g=function(a,b,c){b.hasOwnProperty(c)&&(a[c]=m(a[c],b[c]))},q=function(b,c,f){if(c)for(var h=0;h<d.length;h++)if(c.hasOwnProperty(d[h])&&c[d[h]])for(var g in c[d[h]])c[d[h]].hasOwnProperty(g)&&
(f?b[e[h]+g]=c[d[h]][g]:a.setParam(e[h]+g,c[d[h]][g]))},c=function(b,c,f){if(c){a.exec("Utils","manageChapters",[c,"chapter",3],function(a){a&&(c.chapterLabel=a.replace(/::$/gi,""))});for(var d=0;d<l.length;d++)c.hasOwnProperty(k[d])&&(f?b[l[d]]=c[k[d]]:a.setParam(l[d],c[k[d]]))}},f=function(b,c,f){if(c&&c.keywords instanceof Array){var d=c.keywords.length;if(0<d){for(var e="",h=0;h<d;h++)e+="["+c.keywords[h]+"]"+(h<d-1?"|":"");f?b.tag=e:a.setParam("tag",e)}}},b=function(b,c,f){if(c){var d,e=function(a){return a?
a:"0"};d=""+(e(c.category1)+"-");d+=e(c.category2)+"-";d+=e(c.category3);f?b.ptype=d:a.setParam("ptype",d)}},h=function(b,c,f){if(c)for(var d in c)c.hasOwnProperty(d)&&"undefined"!==typeof c[d]&&(f?b[d]=c[d]:a.setParam(d,c[d]))};a.customVars=this.customVars={};a.customVars.set=this.customVars.set=function(b){var c=a.getContext("page")||{},f=c.customVars;if(f){if(b)for(var d in b)b.hasOwnProperty(d)&&(f[d]=Echo1200ATInternet.Utils.completeFstLevelObj(f[d],b[d],!0))}else f=b;c.customVars=f;a.setContext("page",
c)};a.dynamicLabel=this.dynamicLabel={};a.dynamicLabel.set=this.dynamicLabel.set=function(b){var c=a.getContext("page")||{};c.dynamicLabel=Echo1200ATInternet.Utils.completeFstLevelObj(c.dynamicLabel,b,!0);a.setContext("page",c)};a.tags=this.tags={};a.tags.set=this.tags.set=function(b){var c=a.getContext("page")||{};c.tags=Echo1200ATInternet.Utils.completeFstLevelObj(c.tags,b,!0);a.setContext("page",c)};a.customTreeStructure=this.customTreeStructure={};a.customTreeStructure.set=this.customTreeStructure.set=function(b){var c=
a.getContext("page")||{};c.customTreeStructure=Echo1200ATInternet.Utils.completeFstLevelObj(c.customTreeStructure,b,!0);a.setContext("page",c)};a.page={};a.page.reset=this.reset=function(){a.setContext("page",void 0)};a.page.set=this.set=function(b){a.dispatchSubscribe("page");var c=a.getContext("page")||{};c.name=m(c.name,b.name,"");c.level2=m(c.level2,b.level2,"");g(c,b,"chapter1");g(c,b,"chapter2");g(c,b,"chapter3");c.customObject=Echo1200ATInternet.Utils.completeFstLevelObj(c.customObject,b.customObject,!0);
a.setContext("page",c)};a.page.send=this.send=function(d){var e=!0,k={p:n(d),s2:d.level2||""},p=d.customObject,l=!1;if(p){var l=!0,v=["page"],p=a.processTagObject("stc",v,p);k.stc={value:Echo1200ATInternet.Utils.jsonSerialize(p),options:{hitType:v,encode:!0,separator:",",truncate:!0}}}p=a.getContext("page")||{};p.vrn&&(k.vrn=p.vrn,p.vrn=void 0,a.setContext("page",p));v=a.getContext("InternalSearch")||{};"undefined"!==typeof v.keyword&&(k.mc=Echo1200ATInternet.Utils.cloneSimpleObject(v.keyword),"undefined"!==typeof v.resultPageNumber&&
(k.np=Echo1200ATInternet.Utils.cloneSimpleObject(v.resultPageNumber)),a.setContext("InternalSearch",void 0));Echo1200ATInternet.Utils.isPreview()&&a.getConfig("preview")&&(k.pvw=1);q(k,d.customVars,!0);c(k,d.dynamicLabel,!0);f(k,d.tags,!0);b(k,d.customTreeStructure,!0);v=a.getContext("campaigns")||{};h(k,v,!0);a.setContext("campaigns",void 0);v=null;d&&d.hasOwnProperty("event")&&(v=d.event||window.event);!Echo1200ATInternet.Utils.isTabOpeningAction(v)&&d.elem&&(e=a.techClicks.manageClick(d.elem,v));a.manageSend(function(){a.sendHit(k,
null,d.callback,null,l)});p.name=m(p.name,d.name,"");p.level2=m(p.level2,d.level2,"");g(p,d,"chapter1");g(p,d,"chapter2");g(p,d,"chapter3");a.setContext("page",p);return e};a.page.onDispatch=this.onDispatch=function(d){var e=a.getContext("page")||{},g=a.getContext("InternalSearch")||{};a.setParam("p",n(e));a.setParam("s2",e.level2||"");e.vrn&&(a.setParam("vrn",e.vrn),e.vrn=void 0,a.setContext("page",e));"undefined"!==typeof g.keyword&&(a.setParam("mc",Echo1200ATInternet.Utils.cloneSimpleObject(g.keyword)),
"undefined"!==typeof g.resultPageNumber&&a.setParam("np",Echo1200ATInternet.Utils.cloneSimpleObject(g.resultPageNumber)),a.setContext("InternalSearch",void 0));Echo1200ATInternet.Utils.isPreview()&&a.getConfig("preview")&&a.setParam("pvw",1);q(null,e.customVars,!1);c(null,e.dynamicLabel,!1);f(null,e.tags,!1);b(null,e.customTreeStructure,!1);g=a.getContext("campaigns")||{};h(null,g,!1);a.setContext("campaigns",void 0);var k=["page"];(e=e.customObject)?a.processContextObjectAndSendHit("stc",{hitType:k,encode:!0,separator:",",
truncate:!0},e,d):a.manageSend(function(){a.sendHit(null,[["hitType",k]],d)})}};window.Echo1200ATInternet.Tracker.addPlugin("Page");
}).call(window);;(function(){var dfltPluginCfg={"info":true};var dfltGlobalCfg={};window.Echo1200ATInternet.Tracker.Plugins.RichMedia=function(a){var k=function(a,f){var b=parseInt(a,10);return b?Math.max(b,f):0},l=new function(){this.media=function(){this.type=void 0;this.plyr=0;this.clnk=this.s2=void 0;this.p="";this.m9=this.m6=this.m5=this.m1=this.rfsh=this.buf=this.a=void 0};this.mediaAll={};this.setMediaValue=function(a,f,b,d){"undefined"!==typeof d&&(this.mediaAll[a]=this.mediaAll[a]||{},this.mediaAll[a][f]=this.mediaAll[a][f]||new this.media,this.mediaAll[a][f][b]=d)};this.getMediaValue=
function(a,d,b){if(this.mediaAll[a]&&this.mediaAll[a][d])return this.mediaAll[a][d][b]};this.removePlayer=function(a){this.mediaAll[a]={}};this.removeAll=function(){this.mediaAll={}}},d=new function(){this.timeout={};this.setTimeout=function(c,d,b){this.timeout[c]=this.timeout[c]||{};this.timeout[c][d]&&window.clearTimeout(this.timeout[c][d]);this.timeout[c][d]=window.setTimeout(function(){a.richMedia.send({action:"refresh",playerId:c,mediaLabel:d})},1E3*b)};this.setTimeoutObject=function(c,d,b){this.timeout[c]=
this.timeout[c]||{};if("undefined"===typeof this.timeout[c][d]){var e=[],g;for(g in b)b.hasOwnProperty(g)&&e.push({delay:k(g,0),refresh:k(b[g],5)});e.sort(function(a,b){return a.delay<b.delay?-1:a.delay>b.delay?1:0});this.timeout[c][d]={refreshTab:e,backupRefreshTab:Echo1200ATInternet.Utils.cloneSimpleObject(e),delayConfiguration:{}}}b=this.timeout[c][d];if(0<b.refreshTab.length&&(e=b.refreshTab[0].delay,g=b.refreshTab[0].refresh,"number"===typeof e&&"number"===typeof g&&0<g)){b.delayConfiguration[e]=b.delayConfiguration[e]||
{};var m=void 0;"undefined"!==typeof b.refreshTab[1]&&(m=b.refreshTab[1].delay);var n=0;"undefined"===typeof m?n=1:"number"===typeof b.delayConfiguration[e].number?n="refresh"===l.getMediaValue(c,d,"a")?Math.max(b.delayConfiguration[e].number-1,0):b.delayConfiguration[e].number:"number"===typeof m&&(n=Math.floor(60*(m-e)/g)-1);b.delayConfiguration[e].number=n;b.delayConfiguration[e].timeout&&window.clearTimeout(b.delayConfiguration[e].timeout);0<n?b.delayConfiguration[e].timeout=window.setTimeout(function(){a.richMedia.send({action:"refresh",
playerId:c,mediaLabel:d})},1E3*g):(b.delayConfiguration[e].number=void 0,b.delayConfiguration[e].timeout=void 0,b.refreshTab.splice(0,1),window.setTimeout(function(){a.richMedia.send({action:"refresh",playerId:c,mediaLabel:d})},1E3*g));this.timeout[c][d]=b}};this.clearTimeout=function(a,d,b){this.timeout[a]=this.timeout[a]||{};var e=this.timeout[a][d];if("object"===typeof e){if("object"===typeof e.delayConfiguration){var g,k;for(k in e.delayConfiguration)e.delayConfiguration.hasOwnProperty(k)&&(g=
e.delayConfiguration[k].number,"undefined"!==typeof g&&0<g&&(e.delayConfiguration[k].timeout&&window.clearTimeout(e.delayConfiguration[k].timeout),e.delayConfiguration[k].timeout=void 0));b&&(e.refreshTab=Echo1200ATInternet.Utils.cloneSimpleObject(e.backupRefreshTab));this.timeout[a][d]=e}}else e&&window.clearTimeout(e)};this.removePlayer=function(c){for(var d in this.timeout[c])if(this.timeout[c].hasOwnProperty(d)){this.clearTimeout(c,d,!1);var b=l.getMediaValue(c,d,"a");"undefined"!==typeof this.timeout[c][d]&&
"stop"!==b&&a.richMedia.send({action:"stop",playerId:c,mediaLabel:d})}this.timeout[c]={}};this.removeAll=function(){for(var a in this.timeout)this.timeout.hasOwnProperty(a)&&this.removePlayer(a);this.timeout={}}},e=function(c,d,b){var e=c[b]||"";a.exec("Utils","manageChapters",[c,d,3],function(a){e=a+e});return e},n=function(a,d,b,e){var g=a[d];"boolean"===typeof a[d]&&(g=a[d]?e:b);return g},m=function(a){var d=0;/^(\-|\+)?([0-9]+)$/.test(a)&&(d=Number(a));return d},g=function(a,d,b,e,g){d=l.getMediaValue(d,
b,e);"undefined"!==typeof d&&(a[e]=g?encodeURIComponent(d):d)},q=function(a,d,b){"undefined"!==typeof b&&(a[d]=b)};a.richMedia={};a.richMedia.add=function(a){a=a||{};var d=m(a.playerId),b=e(a,"mediaTheme","mediaLabel"),g=n(a,"isEmbedded","int","ext");l.setMediaValue(d,b,"plyr",d);l.setMediaValue(d,b,"type",a.mediaType);l.setMediaValue(d,b,"s2",a.mediaLevel2);l.setMediaValue(d,b,"p",b);l.setMediaValue(d,b,"clnk",a.linkedContent||a.previousMedia);l.setMediaValue(d,b,"a",a.action);l.setMediaValue(d,
b,"rfsh",a.refreshDuration);l.setMediaValue(d,b,"m1",a.duration);l.setMediaValue(d,b,"m5",g);l.setMediaValue(d,b,"m6",a.broadcastMode);l.setMediaValue(d,b,"m9",a.webdomain)};a.richMedia.send=function(c){c=c||{};var f=m(c.playerId),b=e(c,"mediaTheme","mediaLabel"),h=c.action;l.setMediaValue(f,b,"a",h);var s={plyr:f,p:b};g(s,f,b,"a",!1);g(s,f,b,"type",!1);g(s,f,b,"s2",!1);g(s,f,b,"m1",!1);g(s,f,b,"m5",!1);g(s,f,b,"m6",!1);if("play"===h||"info"===h){c=n(c,"isBuffering","0","1");var r=a.getContext("page")||
{},w=e(r,"chapter","name")||void 0,r=r.level2||void 0;q(s,"buf",c);q(s,"prich",w);q(s,"s2rich",r);g(s,f,b,"clnk",!1);g(s,f,b,"m9",!0)}a.sendHit(s,[["hitType",["richmedia"]]]);"pause"===h?d.clearTimeout(f,b,!1):"stop"===h&&d.clearTimeout(f,b,!0);if("play"===h||"refresh"===h)h=l.getMediaValue(f,b,"rfsh"),"object"===typeof h&&null!==h?d.setTimeoutObject(f,b,h):(h=k(h,5),0!==h&&d.setTimeout(f,b,h))};a.richMedia.remove=function(a){d.removePlayer(a);l.removePlayer(a)};a.richMedia.removeAll=function(){d.removeAll();
l.removeAll()}};window.Echo1200ATInternet.Tracker.addPlugin("RichMedia");
}).call(window);;(function(){var dfltPluginCfg={"info":false};var dfltGlobalCfg={"storageMode":"cookie"};Echo1200ATInternet.Tracker.Plugins.Cookies=Echo1200ATInternet.Tracker.Plugins.Storage=function(a){var k=this,l={},d=!1,e=null;a.configPlugin("Storage",dfltPluginCfg||{},function(a){l=a;"localStorage"===l.storageMode&&(d=Echo1200ATInternet.Utils.isLocalStorageAvailable())});var n={},m=function(b){return a.getConfig("base64Storage")?Echo1200ATInternet.Utils.Base64.encode(b):encodeURIComponent(b)},g=function(b){return a.getConfig("base64Storage")?Echo1200ATInternet.Utils.Base64.decode(b):decodeURIComponent(b)},q=function(){this.getData=function(a){var b=
null;(a=RegExp("(?:^| )"+a+"=([^;]+)").exec(document.cookie)||null)&&(b=g(a[1]));return b};this.setData=function(b){var c=!1;if(b.name&&"string"===typeof b.name){var d=b.options||{},e=d.end||{},f=d.domain||a.getConfig("cookieDomain"),g=d.secure||a.getConfig("cookieSecure"),h=Echo1200ATInternet.Utils.jsonSerialize(b),h=b.name+"="+m(h),h=h+(d.path&&"string"===typeof d.path?";path="+d.path:""),h=h+(f&&"string"===typeof f?";domain="+f:"")+(g&&"boolean"===typeof g?";secure":"");"function"===typeof e.toUTCString?
h+=";expires="+e.toUTCString():"number"===typeof e&&(h+=";max-age="+e.toString());document.cookie=h;this.getData(b.name)&&(c=!0)}return c}};e=d?new function(){var a=function(a){var b=+new Date,c=!1,d;a.options&&("undefined"!==typeof a.options.expires?d=a.options.expires:(a=a.options.end||{},"function"===typeof a.getTime?d=a.getTime():"number"===typeof a&&(d=b+1E3*a)));"number"===typeof d&&b>=d&&(c=!0);return{itemToDelete:c,timestamp:d}},b=function(a){var b=!1;try{localStorage.removeItem(a),b=!0}catch(c){}return b};
this.getData=function(c){var d=null,e=localStorage.getItem(c);if(e){var e=g(e),f=Echo1200ATInternet.Utils.jsonParse(e);f&&"object"===typeof f?a(f).itemToDelete&&b(c)||(delete f.options.expires,d=Echo1200ATInternet.Utils.jsonSerialize(f)):d=e}return d};this.setData=function(c){var d=!1;if(c.name&&"string"===typeof c.name){var e=a(c);"number"===typeof e.timestamp&&(c.options.expires=e.timestamp);var f=Echo1200ATInternet.Utils.jsonSerialize(c);if(e.itemToDelete)d=b(c.name);else try{localStorage.setItem(c.name,m(f)),d=!0}catch(g){}}return d}}:
new q;var c=function(b,c){var d=!1;!Echo1200ATInternet.Utils.consent&&!c||a.getConfig("disableCookie")||a.getConfig("disableStorage")||!b||"object"!==typeof b||(d=e.setData(b));return d},f=function(a,b,c){a={name:a,val:b};c&&c.session&&"number"===typeof c.session&&(c.end=c.session);a.options=c||{};return a},b=function(b){var c=null,d=null;a.getConfig("disableCookie")||a.getConfig("disableStorage")||!b||"string"!==typeof b||(d=e.getData(b));(b=d)&&(c=Echo1200ATInternet.Utils.jsonParse(b));return c},h=function(a,b){var d=
Echo1200ATInternet.Utils.cloneSimpleObject(a);return c(d,b)?Echo1200ATInternet.Utils.jsonParse(Echo1200ATInternet.Utils.jsonSerialize(a)):null},s=function(a,c,d){if(!d&&n[a])d=n[a];else if(d=b(a))d.options=d.options||{},d.options.session&&"number"===typeof d.options.session&&(d.options.end=d.options.session,h(d,!1)),n[a]=d;return d?c?(a=null,!d||"object"!==typeof d.val||d.val instanceof Array||void 0===d.val[c]||(a=d.val[c]),a):d.val:null},r=function(a,c,d,e,g){if(c){if(g=b(a))!g||"object"!==typeof g.val||g.val instanceof
Array?g=null:"undefined"===typeof d?delete g.val[c]:g.val[c]=d,g&&(g=h(g,e))}else g=g||{},g=f(a,d,g),g=h(g,e);return g?(n[a]=g,g.val):null},w=function(a,b){if(b)r(a,b,void 0,!1,null);else{n[a]=void 0;var d=f(a,"",{end:new Date("Thu, 01 Jan 1970 00:00:00 UTC"),path:"/"});c(d,!1)}};a.storage={};a.storage.get=k.get=function(a,b){b=!!b;return a instanceof Array?s(a[0],a[1],b):s(a,"",b)};a.storage.getPrivate=k.getPrivate=function(b,c){b instanceof Array?b[0]+=a.getConfig("site"):b+=a.getConfig("site");
return k.get(b,c)};a.storage.set=k.set=function(a,b,c,d){return a instanceof Array?r(a[0],a[1],b,d,null):r(a,null,b,d,c)};a.storage.setPrivate=k.setPrivate=function(b,c,d){b instanceof Array?b[0]+=a.getConfig("site"):b+=a.getConfig("site");return k.set(b,c,d)};a.storage.del=k.del=function(a){a instanceof Array?w(a[0],a[1]):w(a,"")};a.storage.delPrivate=k.delPrivate=function(b){b instanceof Array?b[0]+=a.getConfig("site"):b+=a.getConfig("site");k.del(b)};a.storage.cacheInvalidation=k.cacheInvalidation=
function(){n={}}};Echo1200ATInternet.Tracker.addPlugin("Storage");Echo1200ATInternet.Tracker.addPlugin("Cookies");
}).call(window);;(function(){var dfltPluginCfg={"clicksAutoManagementEnabled":true,"clicksAutoManagementTimeout":500,"info":false};var dfltGlobalCfg={};window.Echo1200ATInternet.Tracker.Plugins.TechClicks=function(a){var k=this,l,d;a.configPlugin("TechClicks",dfltPluginCfg||{},function(a){l=a.clicksAutoManagementEnabled;d=a.clicksAutoManagementTimeout});k.deactivateAutoManagement=function(){l=!1};var e=function(a){switch(a.target){case "_top":window.top.location.href=a.url;break;case "_parent":window.parent.location.href=a.url;break;default:window.location.href=a.url}},n=function(a){var b=a.timeout;a.mailto?k.timeout=setTimeout(function(){window.location.href=
a.mailto},b):a.form?k.timeout=setTimeout(function(){a.form.submit()},b):a.url&&(k.timeout=setTimeout(function(){e({url:a.url,target:a.target})},b))},m=function(c){for(var b,g="_self",m=c.timeoutonly;c;){if(c.href&&0===c.href.indexOf("http")){b=c.href.split('"').join('\\"');g=c.target?c.target:g;break}c=c.parentNode}if(b){if(!m)a.onTrigger("Tracker:Hit:Sent:Ok",function(){k.timeout&&clearTimeout(k.timeout);e({url:b,target:g})});n({url:b,target:g,timeout:d})}},g=function(c){var b=c;for(c=b.timeoutonly;b&&
"FORM"!==b.nodeName;)b=b.parentNode;if(b){if(!c)a.onTrigger("Tracker:Hit:Sent:Ok",function(){k.timeout&&clearTimeout(k.timeout);b.submit()});n({form:b,timeout:d})}},q=function(c){var b=c;for(c=b.timeoutonly;b&&!(b.href&&0<=b.href.indexOf("mailto:"));)b=b.parentNode;if(b){if(!c)a.onTrigger("Tracker:Hit:Sent:Ok",function(){k.timeout&&clearTimeout(k.timeout);window.location.href=b.href});n({mailto:b.href,timeout:d})}},c=function(a){for(;a;){if(a.href){if(0<=a.href.indexOf("mailto:"))return"mailto";if(0===
a.href.indexOf("http"))return"redirection"}else if("FORM"===a.nodeName)return"form";a=a.parentNode}return""};a.techClicks={};a.techClicks.manageClick=k.manageClick=function(a,b){var d=!0;if(l&&a){var e;a:{for(e=a;e;){if("function"===typeof e.getAttribute&&("_blank"===e.getAttribute("target")||"no"===e.getAttribute("data-atclickmanagement"))){e=!0;break a}e=e.parentNode}e=a;for(var k=window.location.href,n;e;){if((n=e.href)&&0<=n.indexOf("#")&&k.substring(0,0<=k.indexOf("#")?k.indexOf("#"):k.length)===
n.substring(0,n.indexOf("#"))){e=!0;break a}e=e.parentNode}e=!1}k=c(a);if(!e&&k){switch(k){case "mailto":q(a);d=!1;break;case "form":g(a);d=!1;break;case "redirection":m(a),d=!1}b&&(e=b.defaultPrevented,"function"===typeof b.isDefaultPrevented&&(e=b.isDefaultPrevented()),e||b.preventDefault&&b.preventDefault())}}return d}};window.Echo1200ATInternet.Tracker.addPlugin("TechClicks");
}).call(window);;(function(){var dfltPluginCfg={"info":false};var dfltGlobalCfg={};window.Echo1200ATInternet.Tracker.Plugins.Utils=function(a){var k=this,l={};a.utils={};a.utils.getQueryStringValue=k.getQueryStringValue=function(a,d){var e=Echo1200ATInternet.Utils.hashcode(d).toString();if(!l[e]){l[e]={};var k=RegExp("[&#?]{1}([^&=#?]*)=([^&#]*)?","g"),c=k.exec(d);if(null!==c)for(;null!==c;)l[e][c[1]]=c[2],c=k.exec(d)}return l[e].hasOwnProperty(a)?l[e][a]:null};k.manageChapters=function(d,e,g){var k=a.getConfig("ignoreEmptyChapterValue"),c="";if(d){g=parseInt(g,10);for(var f=1;f<g+1;f++)var b=
d[e+f]||"",c=k?c+(b?b+"::":""):c+(d.hasOwnProperty(e+f)?b+"::":"")}return c};k.getDocumentLevel=function(){var d=a.getConfig("documentLevel");if(0>d.indexOf("."))return window[d]||document;d=d.split(".");return window[d[0]][d[1]]||document};a.utils.getLocation=k.getLocation=function(){return k.getDocumentLevel().location.href};a.dispatchIndex={};a.dispatchStack=[];a.dispatchEventFor={};var d=0;a.dispatchSubscribe=function(d){return a.dispatchIndex[d]?!1:(a.dispatchStack.push(d),a.dispatchIndex[d]=
!0)};a.dispatchSubscribed=function(d){return!0===a.dispatchIndex[d]};a.addSpecificDispatchEventFor=function(e){return a.dispatchEventFor[e]?!1:(a.dispatchEventFor[e]=!0,d++,!0)};a.processSpecificDispatchEventFor=function(e){a.dispatchEventFor[e]&&(a.dispatchEventFor[e]=!1,d--,0===d&&(a.dispatchEventFor={},a.emit("Tracker:Plugin:SpecificEvent:Exec:Complete",{lvl:"INFO"})))};a.dispatch=function(e){var k=function(){for(var d="",c=null;0<a.dispatchStack.length;)d=a.dispatchStack.pop(),0===a.dispatchStack.length&&
(c=e),a[d].onDispatch(c);a.dispatchIndex={};a.delContext(void 0,"customObject")},g=function(){if(a.plugins.isExecWaitingLazyloading())a.onTrigger("Tracker:Plugin:Lazyload:Exec:Complete",function(){k()},!0);else k()};if(0===d)g();else a.onTrigger("Tracker:Plugin:SpecificEvent:Exec:Complete",function(){g()},!0)};a.dispatchRedirect=function(d){var e=!0,g=null;d&&(g=null,d&&d.hasOwnProperty("event")&&(g=d.event||window.event),!Echo1200ATInternet.Utils.isTabOpeningAction(g)&&d.elem&&(d.elem.timeoutonly=!0,a.plugins.exec("TechClicks",
"manageClick",[d.elem,g],function(a){e=a})),g=d.callback);a.dispatch(g);return e};var e=a.manageSend=function(d){if(!Echo1200ATInternet.Utils.isPreview()||a.getConfig("preview"))Echo1200ATInternet.Utils.isPrerender(function(a){d(a)})||d()};a.processTagObject=function(d,e,g){if((d=a.getParam(d,!0))&&d.options.permanent){for(var k=!1,c=d.options.hitType||[],f=0;f<c.length;f++)if(-1!==Echo1200ATInternet.Utils.arrayIndexOf(e.concat("all"),c[f])){k=!0;break}k&&(g=Echo1200ATInternet.Utils.completeFstLevelObj(d.value||{},g,!0))}return g};
a.processContextObjectAndSendHit=function(d,k,g,l){var c=a.getParam(d,!0);if(c){for(var f=!1,b=c.options.hitType||[],h=0;h<b.length;h++)if(-1!==Echo1200ATInternet.Utils.arrayIndexOf(k.hitType.concat("all"),b[h])){f=!0;break}f?(f=Echo1200ATInternet.Utils.cloneSimpleObject(c),f.value=Echo1200ATInternet.Utils.completeFstLevelObj(f.value||{},g,!0),a.setParam(d,f.value,{hitType:k.hitType,encode:k.encode,separator:k.separator,truncate:k.truncate}),e(function(){a.sendHit(null,[["hitType",k.hitType]],l,null,!0)}),c.options.permanent&&
a.setParam(d,c.value,c.options)):(a.setParam(d,g,{hitType:k.hitType,encode:k.encode,separator:k.separator,truncate:k.truncate}),e(function(){a.sendHit(null,[["hitType",k.hitType]],l,null,!0)}),a.setParam(d,c.value,c.options))}else a.setParam(d,g,{hitType:k.hitType,encode:k.encode,separator:k.separator,truncate:k.truncate}),e(function(){a.sendHit(null,[["hitType",k.hitType]],l,null,!0)})}};window.Echo1200ATInternet.Tracker.addPlugin("Utils");
}).call(window);
if(typeof window.Echo1200ATInternet.onTrackerLoad==='function'){window.Echo1200ATInternet.onTrackerLoad();}

/** START BBC ADDITION **/
return Echo1200ATInternet;
}).call(exports, __webpack_require__, exports, module),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
/** END BBC ADDITION **/


/***/ }),

/***/ "./lib/comscore/amd.streamsense-6.2.3.180328.min.js":
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(global, process) {var require;var require;!function(n){if(true)module.exports=n();else {}}(function(){return function o(u,s,a){function f(e,n){if(!s[e]){if(!u[e]){var t="function"==typeof require&&require;if(!n&&t)return require(e,!0);if(c)return c(e,!0);var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}var r=s[e]={exports:{}};u[e][0].call(r.exports,function(n){var t=u[e][1][n];return f(t||n)},r,r.exports,o,u,s,a)}return s[e].exports}for(var c="function"==typeof require&&require,n=0;n<a.length;n++)f(a[n]);return f}({1:[function(n,t,e){var a=n(24),f=n(26),c=n(36);t.exports=function(t){var n=this,e=!1,i=-1,r=null;function o(n){i=n,t.t().set("plannedFlushTime",n+"")}function u(){t.flush(),o(-1),n.i()}function s(){r&&(c.clearTimeout(r),r=null)}a.extend(n,{start:function(){e=!0,!r&&0<t.getCacheFlushingInterval()&&null!=t.getCustomerC2()&&(t.t().has("plannedFlushTime")&&(i=f.o(t.t().get("plannedFlushTime"),-1)),n.i())},stop:function(){e=!1,s()},update:function(){0<t.getCacheFlushingInterval()&&null!=t.getCustomerC2()?!r&&e?(o(-1),n.start()):null!=r&&(o(0<t.getCacheFlushingInterval()?+new Date+1e3*t.getCacheFlushingInterval():-1),r&&(c.clearTimeout(r),n.i())):(o(-1),s())},i:function(){i<0&&o(+new Date+1e3*t.getCacheFlushingInterval()),r=c.setTimeout(u,i-+new Date)}})}},{24:24,26:26,36:36}],2:[function(n,t,e){var i=n(5),r=n(8).TransmissionMode,o=n(8).u,u=new i,s={TransmissionMode:r,getCore:function(){return u},setAppContext:function(n){u.setAppContext(n)},setEnabled:function(n){u.setEnabled(n)},getEnabled:function(){return u.getEnabled()},onUxActive:function(){u.onUxActive()},onUxInactive:function(){u.onUxInactive()},onEnterForeground:function(){u.onEnterForeground()},onExitForeground:function(){u.onExitForeground()},onUserInteraction:function(){u.onUserInteraction()},update:function(){u.update()},enableAutoUpdate:function(n,t){u.enableAutoUpdate(n,void 0===t||t)},disableAutoUpdate:function(){u.disableAutoUpdate()},isAutoUpdateEnabled:function(){return u.isAutoUpdateEnabled()},start:function(n){u.s(o.l,n||{})},view:function(n){u.s(o.v,n||{})},hidden:function(n){u.s(o.HIDDEN,n||{})},close:function(n){u.s(o.h,n)},aggregate:function(n){u.s(o._,n)},getPixelURL:function(){return u.getPixelURL()},setPixelURL:function(n){u.setPixelURL(n)},getCustomerC2:function(){return u.getCustomerC2()},setCustomerC2:function(n){u.setCustomerC2(n)},getAppName:function(){return u.getAppName()},setAppName:function(n){u.setAppName(n)},getAppVersion:function(){return u.getAppVersion()},setAppVersion:function(n){u.setAppVersion(n)},getGenesis:function(){return u.getGenesis()},getVisitorID:function(){return u.getVisitorId()},setVisitorId:function(n,t){u.setVisitorId(n,t)},getCrossPublisherId:function(){return u.getCrossPublisherId()},getOfflineTransmissionMode:function(){return u.getOfflineTransmissionMode()},allowOfflineTransmission:function(n){u.allowOfflineTransmission(n)},getLiveTransmissionMode:function(){return u.getLiveTransmissionMode()},allowLiveTransmission:function(n){u.allowLiveTransmission(n)},getPublisherSecret:function(){return u.g()},setPublisherSecret:function(n){u.m(n)},flushCache:function(){u.flush()},clearOfflineCache:function(){u.I().clear()},setLabel:function(n,t){u.setLabel(n,t)},getLabel:function(n){return u.getLabel(n)},setLabels:function(n){u.setLabels(n)},getLabels:function(){return u.getLabels()},setAutoStartLabels:function(n){u.setAutoStartLabels(n)},getAutoStartLabel:function(n){return u.getAutoStartLabel(n)},getAutoStartLabels:function(){return u.getAutoStartLabels()},setAutoStartLabel:function(n,t){u.setAutoStartLabel(n,t)},isKeepAliveEnabled:function(){return u.S().isEnabled()},setKeepAliveEnabled:function(n){u.setKeepAliveEnabled(!!n)},setCacheMaxMeasurements:function(n){u.setCacheMaxMeasurements(n)},getCacheMaxMeasurements:function(){return u.getCacheMaxMeasurements()},setCacheMaxBatchFiles:function(n){u.setCacheMaxBatchFiles(n)},getCacheMaxBatchFiles:function(){return u.getCacheMaxBatchFiles()},setCacheMaxFlushesInARow:function(n){u.setCacheMaxFlushesInARow(n)},getCacheMaxFlushesInARow:function(){return u.getCacheMaxFlushesInARow()},setCacheMinutesToRetry:function(n){u.setCacheMinutesToRetry(n)},getCacheMinutesToRetry:function(){return u.getCacheMinutesToRetry()},setCacheMeasurementExpiry:function(n){u.setCacheMeasurementExpiry(n)},getCacheMeasurementExpiry:function(){return u.getCacheMeasurementExpiry()},getCacheFlushingInterval:function(){return u.getCacheFlushingInterval()},setCacheFlushingInterval:function(n){u.setCacheFlushingInterval(n)},setSecure:function(n){u.setSecure(n)},isSecure:function(){return u.isSecure()},getMeasurementLabelOrder:function(){return u.getMeasurementLabelOrder()},setMeasurementLabelOrder:function(n){u.setMeasurementLabelOrder(n)},setAutoStartEnabled:function(n){u.setAutoStartEnabled(n)},isAutoStartEnabled:function(){return u.isAutoStartEnabled()},getVersion:function(){return u.getVersion()},getPlatformAPI:function(){return u.getPlatformAPI()},setPlatformAPI:function(n){u.setPlatformAPI(n)},setOfflineURL:function(n){u.setOfflineURL(n)},clearInternalData:function(){u.clearInternalData()},cacheHttpRedirects:function(){u.cacheHttpRedirects()}};t.exports=s},{5:5,8:8}],3:[function(n,t,e){var p=n(24),v=n(36),d=n(8).TransmissionMode,h=30;t.exports=function(t){var e,i=1e3,r=!1,o=null,u=null,s=-1;function a(){t.flush(),s=-1,o=null}function f(){o&&(v.clearTimeout(o),o=null)}function c(n){var t=+new Date;r?(f(),(s<t||s<0||!n)&&(s=t+1e3*h),o=v.setTimeout(a,s-t)):s<0&&(s=t+1e3*h)}function l(){var n=v.isConnectionAvailable();n!=e&&((e=n)?t.getOfflineTransmissionMode()!=d.NEVER&&t.getOfflineTransmissionMode()!=d.DISABLED&&c(!1):(f(),s=-1)),r&&(u=v.setTimeout(l,i))}p.extend(this,{start:function(){r=!0,e&&0<s&&c(!0),u=v.setTimeout(l,i)},stop:function(){v.clearTimeout(u),u=null,r=!1,f()}})}},{24:24,36:36,8:8}],4:[function(n,t,e){t.exports={PAGE_NAME_LABEL:"name",P:2048,A:4096,C:"previousVersion",k:["c1","c2","ca2","cb2","cc2","cd2","ns_site","ca_ns_site","cb_ns_site","cc_ns_site","cd_ns_site","ns_vsite","ca_ns_vsite","cb_ns_vsite","cc_ns_vsite","cd_ns_vsite","ns_alias","ca_ns_alias","cb_ns_alias","cc_ns_alias","cd_ns_alias","ns_ap_an","ca_ns_ap_an","cb_ns_ap_an","cc_ns_ap_an","cd_ns_ap_an","ns_ap_pn","ns_ap_pv","c12","ca12","cb12","cc12","cd12","ns_ak","ns_ap_hw","name","ns_ap_ni","ns_ap_ec","ns_ap_ev","ns_ap_device","ns_ap_id","ns_ap_csf","ns_ap_bi","ns_ap_pfm","ns_ap_pfv","ns_ap_ver","ca_ns_ap_ver","cb_ns_ap_ver","cc_ns_ap_ver","cd_ns_ap_ver","ns_ap_sv","ns_ap_bv","ns_ap_cv","ns_ap_smv","ns_type","ca_ns_type","cb_ns_type","cc_ns_type","cd_ns_type","ns_radio","ns_nc","cs_partner","cs_xcid","cs_impid","ns_ap_ui","ca_ns_ap_ui","cb_ns_ap_ui","cc_ns_ap_ui","cd_ns_ap_ui","ns_ap_gs","ns_ap_ie","ns_st_sv","ns_st_pv","ns_st_smv","ns_st_it","ns_st_id","ns_st_ec","ns_st_sp","ns_st_sc","ns_st_psq","ns_st_asq","ns_st_sq","ns_st_ppc","ns_st_apc","ns_st_spc","ns_st_atpc","ns_st_cn","ns_st_ev","ns_st_po","ns_st_cl","ns_st_el","ns_st_sl","ns_st_pb","ns_st_hc","ns_st_mp","ca_ns_st_mp","cb_ns_st_mp","cc_ns_st_mp","cd_ns_st_mp","ns_st_mv","ca_ns_st_mv","cb_ns_st_mv","cc_ns_st_mv","cd_ns_st_mv","ns_st_pn","ns_st_tp","ns_st_ad","ns_st_li","ns_st_ci","ns_st_si","ns_st_pt","ns_st_dpt","ns_st_ipt","ns_st_ap","ns_st_dap","ns_st_et","ns_st_det","ns_st_upc","ns_st_dupc","ns_st_iupc","ns_st_upa","ns_st_dupa","ns_st_iupa","ns_st_lpc","ns_st_dlpc","ns_st_lpa","ns_st_dlpa","ns_st_pa","ns_st_ldw","ns_st_ldo","ns_st_ie","ns_ap_jb","ns_ap_et","ns_ap_res","ns_ap_sd","ns_ap_po","ns_ap_ot","ns_ap_c12m","cs_c12u","ca_cs_c12u","cb_cs_c12u","cc_cs_c12u","cd_cs_c12u","ns_ap_install","ns_ap_updated","ns_ap_lastrun","ns_ap_cs","ns_ap_runs","ns_ap_usage","ns_ap_fg","ns_ap_ft","ns_ap_dft","ns_ap_bt","ns_ap_dbt","ns_ap_dit","ns_ap_as","ns_ap_das","ns_ap_it","ns_ap_uc","ns_ap_aus","ns_ap_daus","ns_ap_us","ns_ap_dus","ns_ap_ut","ns_ap_oc","ns_ap_uxc","ns_ap_uxs","ns_ap_lang","ns_ap_ar","ns_ap_miss","ns_ts","ns_ap_cfg","ns_ap_env","ns_ap_ais","ns_st_ca","ns_st_cp","ns_st_er","ca_ns_st_er","cb_ns_st_er","cc_ns_st_er","cd_ns_st_er","ns_st_pe","ns_st_ui","ca_ns_st_ui","cb_ns_st_ui","cc_ns_st_ui","cd_ns_st_ui","ns_st_bc","ns_st_dbc","ns_st_bt","ns_st_dbt","ns_st_bp","ns_st_lt","ns_st_skc","ns_st_dskc","ns_st_ska","ns_st_dska","ns_st_skd","ns_st_skt","ns_st_dskt","ns_st_pc","ns_st_dpc","ns_st_pp","ns_st_br","ns_st_pbr","ns_st_rt","ns_st_prt","ns_st_ub","ns_st_vo","ns_st_pvo","ns_st_ws","ns_st_pws","ns_st_ki","ns_st_rp","ns_st_bn","ns_st_tb","ns_st_an","ns_st_ta","ns_st_pl","ns_st_pr","ns_st_tpr","ns_st_sn","ns_st_en","ns_st_ep","ns_st_tep","ns_st_sr","ns_st_ty","ns_st_ct","ns_st_cs","ns_st_ge","ns_st_st","ns_st_stc","ns_st_ce","ns_st_ia","ns_st_dt","ns_st_ddt","ns_st_tdt","ns_st_tm","ns_st_dtm","ns_st_ttm","ns_st_de","ns_st_pu","ns_st_ti","ns_st_cu","ns_st_fee","ns_st_ft","ns_st_at","ns_st_pat","ns_st_vt","ns_st_pvt","ns_st_tt","ns_st_ptt","ns_st_cdn","ns_st_pcdn","ns_st_amg","ns_st_ami","ns_st_amp","ns_st_amt","ns_st_ams","ns_ap_i1","ns_ap_i2","ns_ap_i3","ns_ap_i4","ns_ap_i5","ns_ap_i6","ns_ap_referrer","ns_clid","ns_campaign","ns_source","ns_mchannel","ns_linkname","ns_fee","gclid","utm_campaign","utm_source","utm_medium","utm_term","utm_content","ns_ecommerce","ns_ec_sv","ns_client_id","ns_order_id","ns_ec_cur","ns_orderline_id","ns_orderlines","ns_prod_id","ns_qty","ns_prod_price","ns_prod_grp","ns_brand","ns_shop","ns_category","category","ns_c","ns_search_term","ns_search_result","ns_m_exp","ns_m_chs","c3","ca3","cb3","cc3","cd3","c4","ca4","cb4","cc4","cd4","c5","ca5","cb5","cc5","cd5","c6","ca6","cb6","cc6","cd6","c10","c11","c13","c14","c15","c16","c7","c8","c9","ns_ap_er","ns_st_amc"]}},{}],5:[function(n,t,e){var Pn=n(8).T,An=n(8).N,Cn=n(4),kn=n(26),i=n(17),En=n(8).u,Tn=n(36),Nn=n(21),Ln=n(24),Dn=n(22),Rn=n(25),Mn=n(6),On=n(11),Wn=n(7),Vn=n(9),xn=n(12).L,Un=n(1),Bn=n(3),Fn="undefined",jn=i.D,Gn="6.2.3.180328",Kn="http://b.scorecardresearch.com/p2?",qn="https://sb.scorecardresearch.com/p2?",Hn=18e5,Yn=3e5,Jn=60,zn="exitCode",Qn="lastApplicationAccumulationTimestamp",Xn="lastSessionAccumulationTimestamp",Zn="lastApplicationSessionTimestamp",$n="lastUserSessionTimestamp",nt="lastActiveUserSessionTimestamp",tt="foregroundTransitionsCount",et="accumulatedForegroundTime",it="accumulatedBackgroundTime",rt="accumulatedInactiveTime",ot="totalForegroundTime",ut="totalBackgroundTime",st="totalInactiveTime",at="accumulatedApplicationSessionTime",ft="accumulatedActiveUserSessionTime",ct="accumulatedUserSessionTime",lt="activeUserSessionCount",pt="userSessionCount",vt="lastUserInteractionTimestamp",dt="userInteractionCount",ht="applicationSessionCountKey",_t="genesis",gt="previousGenesis",mt="installId",wt="firstInstallId",yt="currentVersion",bt="runs",It="coldStartCount",St="vid",Pt="crossPublisherIdHashed",At="crossPublisherId";t.exports=function(){var t,r,s,a,f,c,e,i,o,u,l,n,p,v,d,h,_,g,m,w,y,b,I,S,P,A,C,k,E,T,N,L,D,R,M,O,W,V,x,U,B,F,j,G,K,q,H,Y,J,z,Q,X,Z,$,nn=this,tn=!0,en=!1,rn=!0,on=Pn.R,un=An.R,sn=!1,an=!1,fn=!1,cn=!0,ln=!1,pn=0;function vn(){nn.M(),f=new Wn(nn),s=new Vn(nn),nn.O(),nn.W(),nn.V(),o=new On(nn),e=new Mn,function(){T=kn.o(r.get(Qn),-1),F=kn.o(r.get(Xn),-1),W=kn.o(r.get(Zn),-1),V=kn.o(r.get($n),-1),x=kn.o(r.get(nt),-1),y=kn.U(r.get(tt)),A=kn.o(r.get(et)),P=kn.o(r.get(it)),C=kn.o(r.get(rt)),b=kn.o(r.get(ot)),I=kn.o(r.get(ut)),S=kn.o(r.get(st)),N=kn.o(r.get(at)),D=kn.o(r.get(ft)),L=kn.o(r.get(ct)),O=kn.U(r.get(lt),-1),M=kn.U(r.get(pt),-1),B=kn.o(r.get(vt),-1),U=kn.U(r.get(dt),0),R=kn.U(r.get(ht),0),z=r.get(zn)?parseInt(r.get(zn)):0,h=Tn.getAppVersion(),E=kn.o(r.get(gt),0),(k=kn.o(r.get(_t),-1))<0?(k=+new Date,E=0,W=k,R++):(_n()||(N+=+new Date-F,r.set(at,N+"")),W=k),(d=kn.o(r.get(wt),-1))<0?(v=d=k,h&&h!=jn&&r.set(yt,h+""),r.set(wt,d+""),r.set(mt,v+"")):nn.setAppVersion(h),r.set(_t,k+""),r.set(gt,E+""),nn.B(k);var n=+new Date;if(0<=T){var t=n-T;C+=t,r.set(rt,C+""),S+=t,r.set(st,S+"")}F=T=n,r.set(Qn,T+""),r.set(Xn,F+""),r.set(Zn,W+""),r.has(bt)||r.set(bt,"0"),l=kn.U(r.get(bt)),p=kn.U(r.get(It))}()}function dn(n){return r.has(n)?r.get(n)+"":null}function hn(n){if(Z)switch(n){case An.F:e=+new Date,Yn<=e-x&&O++,x=e,nn.j();case An.G:t=+new Date,Yn<=t-V&&M++,V=t;case An.K:_n();break;case An.R:}var t,e}function _n(){var n=+new Date,t=!1;return Hn<n-W&&(E=k,k=n,R++,t=!0),W=n,t}function gn(n){if(Z){n=typeof n===Fn||n;var t=+new Date,e=t-T;switch(on){case Pn.H:A+=e,b+=e;break;case Pn.Y:P+=e,I+=e;break;case Pn.R:C+=e,S+=e}T=t,n&&(r.set(Qn,T+""),r.set(tt,y+""),r.set(et,A+""),r.set(it,P+""),r.set(rt,C+""),r.set(ot,b+""),r.set(ut,I+""),r.set(st,S+""))}}function mn(n){if(Z){n=typeof n===Fn||n;var t=+new Date,e=t-F;switch(un){case An.F:D+=e,x=t;case An.G:L+=e,V=t;case An.K:N+=e,W=t;break;case An.R:}F=t,n&&(r.set(Xn,F+""),r.set(Zn,W+""),r.set($n,V+""),r.set(nt,x+""),r.set(at,N+""),r.set(ft,D+""),r.set(ct,L+""),r.set(lt,O+""),r.set(pt,M+""),r.set(vt,B+""),r.set(dt,U+""),r.set(gt,E+""),r.set(_t,k+""),r.set(ht,R+""))}}function wn(){if(Z){var n,t,e=+new Date;n=0<m?Pn.H:0<w?Pn.Y:Pn.R,t=e-B<Yn?An.F:0<w?An.G:0<m?An.K:An.R;var i,r=on,o=un;if(n!=r||t!=o){var u=!1;r!=n&&(function(n){if(Z)switch(n){case Pn.R:f.J(!1),s.X(),s.Z(),c.start(),a.start();break;case Pn.Y:In();break;case Pn.H:nn.nn(null),In()}}(on),function(n){if(Z)switch(n){case Pn.R:c.stop(),s.pause(),a.stop(),In(),f.J(!0);break;case Pn.Y:tn||bn();break;case Pn.H:bn(),y++}}(n),gn(),on=n,u=!0),o!=t&&(function(n){if(Z){var t=+new Date;switch(n){case An.F:null!=j&&(Tn.clearTimeout(j),j=null),x=t;case An.G:V=t;case An.K:W=t;break;case An.R:_n()||(N+=t-F)}}}(un),hn(t),mn(),un=t),u&&(i=on,Z&&i!=Pn.R&&nn.isAutoStartEnabled()&&!en&&nn.s(En.l,X))}}}function yn(n,t){Z&&(Nn.tn(n)?(t=Nn.tn(t)?"-cs"+t:"",K=n+t):null==K&&ln&&(K=Dn(Tn.getVisitorId()+nn.g()),"function"==typeof Tn.getVisitorIdSuffix&&null!=Tn.getVisitorIdSuffix()&&(K=K+"-cs"+Tn.getVisitorIdSuffix())),r.set(St,K+""))}function bn(){if(Z){In();var n=function(){nn.update(),null!=i&&Tn.setTimeout(n,u)};i=Tn.setTimeout(n,u)}}function In(){Z&&null!=i&&(Tn.clearTimeout(u),i=null)}function Sn(){return!ln||null==Y||0===Y.length||null==G||0===G.length}Ln.extend(nn,{isProperlyInitialized:function(){return!Sn()},reset:function(){Z&&(e.reset(),on=Pn.R,un=An.R,en=!1,_=h=null,z=U=E=L=D=N=C=A=P=S=I=b=w=m=p=l=0,an=sn=!(d=v=x=V=W=F=T=B=M=O=k=v=d=n=-1),nn.disableAutoUpdate(),null!=j&&(Tn.clearTimeout(j),j=null),null!=s&&s.cancel(),null!=a&&a.stop(),null!=f&&(f.en(),f=new Wn(nn)))},M:function(n){r=n||new Tn.Storage},O:function(n){t=n||new xn(nn)},W:function(n){a=n||new Un(nn)},V:function(n){c=new Bn(nn)},in:function(){var n=dn("AppName");null!=n&&nn.setAppName(n);var t=dn("AppVersion");null!=t&&nn.setAppVersion(t)},rn:function(){Z&&r.has(St)&&(K=r.get(St))},un:function(){Z&&(l++,r.set(bt,l+""))},sn:function(){return!en&&(en=!0,p++,r.set(It,p+""),n=+new Date,!0)},j:function(){Z&&(null!=j&&(Tn.clearTimeout(j),j=null),j=Tn.setTimeout(function(){null!=j&&(Tn.clearTimeout(j),j=null),wn()},Yn))},I:function(){return t},an:function(){return c},t:function(){return r},fn:function(){return f},S:function(){return s},cn:function(){return a},ln:function(){return e},onUxActive:function(){Z&&(Sn()||(M<0&&(M=0),w++,wn()))},onUxInactive:function(){Z&&(Sn()||0<w&&(w--,wn()))},onEnterForeground:function(){Z&&(Sn()||(m++,wn()))},onExitForeground:function(){Z&&(Sn()||0<m&&(m--,wn()))},onUserInteraction:function(){Z&&(Sn()||(M<0&&(M=0),O<0&&(O=0),B=+new Date,U++,un!=An.F?wn():nn.j()))},pn:function(){return on},vn:function(){return un},dn:function(){return l},hn:function(){return v},_n:function(){return d},gn:function(){return n},mn:function(){return p},wn:function(){return _},yn:function(n){_=n},bn:function(n){var t=y;return(n=typeof n===Fn||n)&&(y=0,r.set(tt,y+"")),t},In:function(n){var t=b;return(n=typeof n===Fn||n)&&(b=0,r.set(ot,b+"")),t},Sn:function(n){var t=A;return(n=typeof n===Fn||n)&&(A=0,r.set(et,A+"")),t},Pn:function(n){var t=I;return(n=typeof n===Fn||n)&&(I=0,r.set(ut,I+"")),t},An:function(n){var t=P;return(n=typeof n===Fn||n)&&(P=0,r.set(it,P+"")),t},Cn:function(n){var t=S;return(n=typeof n===Fn||n)&&(S=0,r.set(st,S+"")),t},kn:function(n){var t=C;return(n=typeof n===Fn||n)&&(C=0,r.set(rt,C+"")),t},En:function(n){var t=N;return(n=typeof n===Fn||n)&&(N=0,r.set(at,N+"")),t},Tn:function(n){var t=D;return(n=typeof n===Fn||n)&&(D=0,r.set(ft,D+"")),t},Nn:function(n){var t=L;return(n=typeof n===Fn||n)&&(L=0,r.set(ct,L+"")),t},Ln:function(){return u},Dn:function(n){var t=R;return(n=typeof n===Fn||n)&&(R=0,r.set(ht,R+"")),t},Rn:function(n){n=typeof n===Fn||n;var t=-1;return 0<=O&&(t=O,n&&(O=0,r.set(lt,O+""))),t},Mn:function(n){n=typeof n===Fn||n;var t=-1;return 0<=M&&(t=M,n&&(M=0,r.set(pt,M+""))),t},On:function(n){var t=U;return(n=typeof n===Fn||n)&&(U=0,r.set(dt,U+"")),t},setAppContext:function(){ln||(Tn.autoDetect(),vn(),nn.in(),nn.rn(),ln=!0)},setEnabled:function(n){Z&&null!=n&&!n&&(Z=!1,a.stop(),c.stop(),s.pause())},getEnabled:function(){return Z},Wn:function(){return{}},Vn:function(){return g},nn:function(n){g=n},setPixelURL:function(n){if(Z){if(null==n||0===n.length)return null;sn=!0;var t=n.indexOf("?");if(0<=t){if(t<n.length-1){for(var e=n.substring(t+1).split("&"),i=0,r=e.length;i<r;i++){var o=e[i].split("=");2==o.length?nn.setLabel(o[0],o[1]):1==o.length&&nn.setLabel(Cn.PAGE_NAME_LABEL,o[0])}n=n.substring(0,t+1)}}else n+="?";return G=n}},setKeepAliveEnabled:function(n){Z&&s.xn(n)},getPixelURL:function(){return G},getCrossPublisherId:function(){return q},isCrossPublisherIdChanged:function(){return Tn.isCrossPublisherIdChanged()||fn},getVisitorId:function(){return null==K&&yn(),K},setVisitorId:yn,Un:function(){var n=(Tn.getCrossPublisherId()||"null").split(" "),t=n[0]&&"null"!=n[0]?n[0]:null,e="true"==n[1];if(null!=t){q||(H=r.get(Pt),q=r.get(At));var i=null;q?"none"==t&&"none"==q||!cn&&"none"==q||"none"!=t&&(i=Dn(t))==H||(e?"none"==t?(H=null,q="none"):(H=i,q=Rn(t)):(fn=!0,cn&&"none"!=t?(H=Dn(t),q=Rn(t)):(H=null,q="none")),r.set(At,q),null==H?r.remove(Pt):r.set(Pt,H)):("none"==t?(H=null,q="none"):(H=Dn(t),q=Rn(t)),r.set(At,q),null==H?r.remove(Pt):r.set(Pt,H)),cn=!1}else q=H=null},m:function(n){return null==n||0===n.length||(Y=n),nn},g:function(){return null==Y&&(Y=""),Y},setAppName:function(n){Z&&(J=n)},getAppName:function(){return null!=J&&0!==J.length||nn.setAppName(Tn.getAppName()),J},setAppVersion:function(n){var t;r&&(n&&n!=jn?(r.has(Cn.C)&&(_=r.get(Cn.C)+""),r.has(yt)&&(t=r.get(yt)+""),t&&t!==n?(_=t,r.set(Cn.C,_+""),v=k,r.set(mt,v+"")):v=kn.o(r.get(mt),-1),r.set(yt,n+"")):v=kn.o(r.get(mt),-1)),h=n},getAppVersion:function(){return h},getVersion:function(){return Gn},getGenesis:function(){return k},Bn:function(){return E},B:function(n){r.set(zn,n.toString(10))},Fn:function(){return z},getLabels:function(){return Q},setLabels:function(n){if(Z)for(var t in n)n.hasOwnProperty(t)&&nn.setLabel(t,n[t])},getLabel:function(n){return Q[n]},setLabel:function(n,t){Z&&(!n||t?Q[n]=t:delete Q[n])},setAutoStartLabels:function(n){Z&&null!=n&&Ln.extend(X,n)},getAutoStartLabel:function(n){return X[n]},getAutoStartLabels:function(){return X},setAutoStartLabel:function(n,t){Z&&(X[n]=t)},getCustomerC2:function(){return Q.c2},setCustomerC2:function(n){if(Z&&null!=n&&0!==n.length){var t=e.isSecure()?qn:Kn;nn.setPixelURL(t),sn=!1,nn.setLabel("c2",n)}},getLiveTransmissionMode:function(){return e.getLiveTransmissionMode()},allowLiveTransmission:function(n){Z&&e.getLiveTransmissionMode()!=n&&e.allowLiveTransmission(n)},getOfflineTransmissionMode:function(){return e.getOfflineTransmissionMode()},allowOfflineTransmission:function(n){Z&&e.getOfflineTransmissionMode()!=n&&e.allowOfflineTransmission(n)},setSecure:function(n){Z&&(this.getCustomerC2()||(an=!0,e.isSecure()!=n&&e.setSecure(n)))},jn:function(n){if(!an&&(e.setSecure(!!n),null!=f&&f.Gn(Mn.Kn,!!n),nn.getCustomerC2()&&!sn)){var t=e.isSecure()?qn:Kn;nn.setPixelURL(t),sn=!1}},setAutoStartEnabled:function(n){Z&&(rn=n)},isAutoStartEnabled:function(){return rn},isSecure:function(){return e.isSecure()},setCacheMaxMeasurements:function(n){null!=t&&t.setCacheMaxMeasurements(n)},getCacheMaxMeasurements:function(){return null!=t?t.getCacheMaxMeasurements():xn.qn},setCacheMaxBatchFiles:function(n){null!=t&&t.setCacheMaxBatchFiles(n)},getCacheMaxBatchFiles:function(){return null!=t?t.getCacheMaxBatchFiles():xn.Hn},setCacheMaxFlushesInARow:function(n){null!=t&&t.Yn(n)},getCacheMaxFlushesInARow:function(){return null!=t?t.Jn():xn.zn},setCacheMinutesToRetry:function(n){null!=t&&t.Qn(n)},getCacheMinutesToRetry:function(){return null!=t?t.Xn():xn.Zn},setCacheMeasurementExpiry:function(n){null!=t&&t.setCacheMeasurementExpiry(n)},getCacheMeasurementExpiry:function(){return null!=t?t.getCacheMeasurementExpiry():xn.$n},getCacheFlushingInterval:function(){return pn},setCacheFlushingInterval:function(n){Z&&pn!=n&&(pn=n,null!=a&&a.update())},getMeasurementLabelOrder:function(){return e.getMeasurementLabelOrder()},setMeasurementLabelOrder:function(n){Z&&n!=e.getMeasurementLabelOrder()&&e.setMeasurementLabelOrder(n)},flush:function(){t.flush(e,function(){})},update:function(n){Z&&(gn(n=typeof n===Fn||n),mn(n))},enableAutoUpdate:function(n,t){Z&&(n=n||Jn,In(),n<Jn&&(n=Jn),tn=t,u=1e3*n,on==Pn.H?bn():on!=Pn.Y||tn||bn())},disableAutoUpdate:function(){Z&&(In(),tn=!0,u=-1)},isAutoUpdateEnabled:function(){return 0<u},s:function(n,t){Z&&(Sn()||(en||n==En.l||o.send(En.l,{},sn?G:null),n==En.h?(nn.B(0),nn.update(!0)):o.send(n,t,sn?G:null)))},nt:function(n,t){o.send(En.HIDDEN,n,t)},setOfflineURL:function(n){Z&&t.tt(n)},getPlatformAPI:function(){return Tn},setPlatformAPI:function(n){Tn.setPlatformAPI(n)},et:function(){return o},clearInternalData:function(){r&&r.clear()},cacheHttpRedirects:function(n){$=n},it:function(){return $}}),e=new Mn,Q={},X={},$=Z=!0,nn.reset()}},{1:1,11:11,12:12,17:17,21:21,22:22,24:24,25:25,26:26,3:3,36:36,4:4,6:6,7:7,8:8,9:9}],6:[function(n,t,e){var o=n(24),u=n(8).TransmissionMode,s=n(36),a=n(4),f=0,c=1,l=2,p=3;function i(){var t,e,i,r;o.extend(this,{reset:function(){t=u.DEFAULT,e=u.DEFAULT,i=s.isConnectionSecure(),r=a.k},rt:function(n){t=n.getLiveTransmissionMode(),e=n.getOfflineTransmissionMode(),r=n.getMeasurementLabelOrder(),i=n.isSecure()},ot:function(n,t){switch(n){case f:this.allowLiveTransmission(t);break;case c:this.allowOfflineTransmission(t);break;case l:this.setSecure(t);break;case p:this.setMeasurementLabelOrder(t)}},getLiveTransmissionMode:function(){return t},allowLiveTransmission:function(n){null!=n&&(t=n)},getOfflineTransmissionMode:function(){return e},allowOfflineTransmission:function(n){null!=n&&(e=n)},isSecure:function(){return i},setSecure:function(n){i=n},getMeasurementLabelOrder:function(){return r},setMeasurementLabelOrder:function(n){null!=n&&0<n.length&&(r=n)}}),this.reset()}i.ut=f,i.st=c,i.Kn=l,i.at=p,t.exports=i},{24:24,36:36,4:4,8:8}],7:[function(n,t,e){var r=n(24),_=n(13),g=1e3,m=864e5,o="q_dcf",w="q_dcc",y=20,b=6e3;t.exports=function(u){var e,s,i,a,f,n,c=[],l=!1;function p(n){return n-s<g&&y<=e}function v(n){return n-a<m&&b<=i}function d(n){m<n-a&&(i=0,a=n),g<n-s&&(e=0,s=n),i++,e++;var t=u.t();t.set(w,i+""),t.set(o,a+"")}function h(){var n,t=+new Date;if(l)for(;c.length;){var e=c.shift();i=e,u.I().ft(i)}else{for(var i,r,o;c.length&&!p(o=t)&&!v(o);)d(t),e=c.shift(),r=e,new _(u,u.ln(),r).send();n=t,c.length&&(f||(p(n)?f=u.getPlatformAPI().setTimeout(function(){f=null,h()},s+g-n):v(n)&&(f=u.getPlatformAPI().setTimeout(function(){f=null,h()},a+m-n))))}}r.extend(this,{ct:function(n){u.getEnabled()&&(c.push(n),h())},en:function(){u.getPlatformAPI().clearTimeout(f),c.length=0},J:function(n){l=n,u.getPlatformAPI().clearTimeout(f),h()}}),(n=u.t()).has(w)&&n.has(o)?(i=parseInt(n.get(w)),a=parseInt(n.get(o))):(i=0,a=+new Date),e=0,s=+new Date}},{13:13,24:24}],8:[function(n,t,e){var i={DEFAULT:0,NEVER:1,WIFIONLY:2,PIGGYBACK:3,DISABLED:4,valueOf:function(n){return null==n||"DEFAULT"==n?i.DEFAULT:"NEVER"==n?i.NEVER:"WIFIONLY"==n?i.WIFIONLY:"PIGGYBACK"==n?i.PIGGYBACK:"DISABLED"==n?i.DISABLED:void 0}};e.TransmissionMode=i,e.N={R:0,K:1,G:2,F:3},e.T={R:0,Y:1,H:2},e.u={l:"start",v:"view",h:"close",_:"aggregate",HIDDEN:"hidden",KEEPALIVE:"keep-alive"}},{}],9:[function(n,t,e){var a=n(36),f=n(8).u,c=n(24);t.exports=function(n){var t=this,e=null,i=NaN,r=!0,o=864e5;function u(){i=+new Date+o,s()}function s(){n.et().send(f.KEEPALIVE)}c.extend(t,{xn:function(n){(r=n)?(t.X(),t.Z()):t.cancel()},isEnabled:function(){return r},Z:function(){r&&(t.cancel(),i=+new Date+o,e=a.setInterval(u,o))},X:function(){if(r){var n=+new Date;i&&i<=n&&s()}},pause:function(){t.cancel()},cancel:function(){e&&(a.clearInterval(e),e=null)}})}},{24:24,36:36,8:8}],10:[function(n,t,e){var c=n(24),i=n(21),s=n(8).u,r=n(17),a=n(36),u=n(4),y="undefined",o=r.D,l=typeof encodeURIComponent!=y?encodeURIComponent:escape,f=function(n){return i.lt(n)?n:o},p=function(n){return n==s.l||n==s.h||n==s.v?s.v:s.HIDDEN};function v(n){var t,f={};c.extend(this,{pt:function(n){delete f[n]},vt:function(n){if(null!=n)for(var t in n)n.hasOwnProperty(t)&&this.setLabel(t,n[t])},setLabel:function(n,t){f[n]=t},getLabel:function(n){return f[n]},getLabels:function(){return f},dt:function(n){return f.hasOwnProperty(n)},ht:function(n){for(var t=[],e=c.extend({},f),i=0,r=n.length;i<r;i++){var o=n[i],u=e[o];null!=u&&""!==u&&(t.push("&",l(o),"=",l(u)),delete e[o])}for(var s in e)if(e.hasOwnProperty(s)){var a=e[s];null!=a&&""!==a&&t.push("&",l(s),"=",l(e[s]))}return 0<(t=t.join("")).length&&"&"==t.charAt(0)?t.substring(1):t},setPixelURL:function(n){t=n},getPixelURL:function(){return t}}),n&&this.setPixelURL(n.getPixelURL())}function d(n,t,e,i){if(v.call(this,n),n){null!=e&&this.setPixelURL(e),this.setLabel("c1","19"),this.setLabel("ns_ap_an",f(n.getAppName())),this.setLabel("ns_ap_pn",f(a.getPlatformName())),this.setLabel("ns_ap_pv",f(a.getRuntimeVersion())),this.setLabel("c12",n.getVisitorId()),n.Un();var r=n.getCrossPublisherId();r&&(this.setLabel("ns_ak",r),n.isCrossPublisherIdChanged()&&this.setLabel("ns_ap_ni","1")),this.setLabel("ns_ap_device",f(a.getDeviceModel())),this.setLabel("ns_ap_ar",f(a.getDeviceArchitecture())),this.setLabel("ns_radio",f(a.getConnectionType())),this.setLabel("ns_type",p(t)),this.setLabel("ns_nc","1"),this.setLabel("ns_ap_pfv",f(a.getPlatformVersion())),this.setLabel("ns_ap_pfm",f(a.getRuntimeName())),this.setLabel("ns_ap_ev",t),this.setLabel("ns_ap_ver",f(n.getAppVersion())),this.setLabel("ns_ap_sd",a.getDisplayResolution()),this.setLabel("ns_ap_res",a.getApplicationResolution()),this.setLabel("ns_ap_lang",a.getLanguage()),this.setLabel("ns_ap_sv",n.getVersion()),t==s.KEEPALIVE&&this.setLabel("ns_ap_oc",n.I()._t()+"");var o=n.gn(),u=n.mn();this.setLabel("ns_ap_id",o+""),this.setLabel("ns_ap_cs",u+""),this.setLabel("ns_ap_bi",a.getPackageName()),this.setLabel("ns_ap_jb",f(a.getDeviceJailBrokenFlag()))}}function h(n,t,e,i){d.call(this,n,t,e,i),this.setLabel("ns_ap_gs",n._n()+""),this.setLabel("ns_ap_install",n.hn()+""),this.setLabel("ns_ap_runs",n.dn()+""),i&&this.setLabel("ns_ap_csf","1"),this.setLabel("ns_ap_lastrun",n.Bn()+"");var r=n.Fn();0<r&&this.setLabel("ns_ap_miss",r.toString());var o=n.wn();o&&(this.setLabel("ns_ap_updated",o+""),n.t().remove(u.C),n.yn(null)),this.setLabel("ns_ap_jb",f(a.getDeviceJailBrokenFlag()))}d.gt=function(n,t){var e=t.wt,i=t.yt,r=t.bt;if(i=typeof i===y||i,r=typeof r===y||r,n.update(r),r){var o=n.bn(),u=n.In(e),s=n.Sn(i),a=n.Pn(e),f=n.An(i),c=n.Cn(e),l=n.kn(i),p=n.En(i),v=n.Tn(i),d=n.Nn(i),h=n.Ln(),_=n.Dn(i),g=n.Rn(i),m=n.Mn(i),w=n.On(i);t.labels.ns_ap_fg=o+"",t.labels.ns_ap_ft=u+"",t.labels.ns_ap_dft=s+"",t.labels.ns_ap_bt=a+"",t.labels.ns_ap_dbt=f+"",t.labels.ns_ap_it=c+"",t.labels.ns_ap_dit=l+"",t.labels.ns_ap_ut=h+"",t.labels.ns_ap_as=_+"",t.labels.ns_ap_das=p+"",0<=g&&(t.labels.ns_ap_aus=g+"",t.labels.ns_ap_daus=v+"",t.labels.ns_ap_uc=w+""),0<=m&&(t.labels.ns_ap_us=m+"",t.labels.ns_ap_dus=d+""),t.labels.ns_ap_usage=t.It-n.getGenesis()+""}t.labels.ns_ts=t.It+""},d.prototype=new v,d.St=function(n,t,e,i){var r=n.et(),o=r.Pt(t,e,i);return r.At(o)},h.prototype=new d,t.exports.Ct=v,t.exports.kt=d,t.exports.Et=h},{17:17,21:21,24:24,36:36,4:4,8:8}],11:[function(n,t,e){var f=n(10).kt,c=n(10).Et,l=n(36),p=n(8).u,v=n(8).T,d=n(4),h=n(14).Tt,_="start",g="foreground",m="background";t.exports=function(o){var r=this,i=0,u=[],t=!1,s=0,a={};r.Nt=function(){i++;var t=!1;return function(n){t||(t=!0,i--,n&&r.Lt())}},r.Dt=function(){if(!t){var n=r.Nt();t=!0,l.onDataFetch(function(){n(!(t=!1))},function(){n(t=!1)})}},r.Lt=function(){if(!(0<i)){for(var n=0;n<u.length;++n){var t=u[n],e=r.At(t);r.Rt(t,e)}u.length=0}},r.Mt=function(n){u.push(n),r.Dt()},r.Rt=function(n,t){o.fn().ct(t),o.S().Z()},r.send=function(n,t,e){if(n!=p._){var i=r.Pt(n,t,e);r.Mt(i)}else r.Ot(t)},r.Pt=function(n,t,e){var i={It:+new Date,Wt:n,Vt:e,wt:!1,yt:void 0,bt:void 0,labels:{}};return s++,i.labels.ns_ap_ec=s+"",n==p.l?(o.un(),i.wt=o.sn()):(i.yt=!(null!=t&&t.hasOwnProperty("ns_st_ev")&&"hb"==t.ns_st_ev),i.bt=!(null!=t&&t.hasOwnProperty("ns_st_ev"))),i.xt=o.getLabels(),i.Ut=t,null!=o.Vn()?i.Bt=o.Vn():n==p.l?i.Bt=_:o.pn()==v.H?i.Bt=g:i.Bt=m,f.gt(o,i),i},r.At=function(n){var t=null,e=n.Wt,i=n.Vt,r=n.wt;return(t=e===p.l?new c(o,e,i,r):new f(o,e,i,r)).vt(n.labels),t.vt(n.xt),t.vt(n.Ut),t.dt(d.PAGE_NAME_LABEL)||t.setLabel(d.PAGE_NAME_LABEL,n.Bt),l.processMeasurementLabels(t),t.vt(a),a={},t},r.Ot=function(n){h(a,n)}}},{10:10,14:14,36:36,4:4,8:8}],12:[function(n,t,e){var A=n(36),C=n(24),k=n(21),E=n(19),T=n(22),N=n(8).TransmissionMode,L=n(15),D=n(14).Ft,R="cs_cache_",M="CACHE_DROPPED_MEASUREMENTS",O=2e3,W=100,V=10,x=30,U=31,B="http://udm.scorecardresearch.com/offline",F="https://udm.scorecardresearch.com/offline";function i(u,o){var t,e,i,r,s,a,f,c,l,p,n=this,v=0;function d(){if(u.getEnabled()&&A.isConnectionAvailable()&&!n.jt()&&null!=u.getCustomerC2()){if(!(i<=c))return!0;if(1e3*r*60-(+new Date-l)<=0)return!(l=c=0)}return!1}function h(){v=0,null!=f&&(f=null)}function _(){for(var n,t=m(),e=!1,i=t.length;0<i;i--){var r=(n=t[i-1],Number(n.substring(o.length)));e?y(t[i-1],!0):e=S(r)}}function g(n){if(u.getEnabled()){var t=u.t();t.has(M)&&(n+=Number(t.get(M))),t.set(M,n+"")}}function m(){return null==a&&(a=D.Gt()),a}function w(n){var t=o+L.Kt(n,"ns_ts");D.qt(u,t,n),null==a&&(a=[]),a.push(t),h()}function y(n,t){if(null!=n){t&&(i=n,(r=u.t()).has(i)&&g(Number(r.get(i)))),D.deleteFile(u,n);var e=E.indexOf(n,a);0<=e&&a.splice(e,1)}var i,r}function b(){return null!=a&&0<a.length?a[a.length-1]:null}function I(n){var t=u.t(),e=0;return null!=n&&(e=t.has(n)?Number(t.get(n)):D.Ht(u,n).length),e}function S(n){var t=+new Date;return 24*s*60*60*1e3-(t-n)<=0}function P(t,e){var i=u.t();if(d()){var n=null,r=null;if(null==f&&null!=(n=function(n){for(var t=0,e=D.Ht(u,n),i=!1;t<e.length&&!(i=!S(Number(L.Kt(e[t],"ns_ts"))));t++);return i?(g(t),e=e.slice(t,e.length)):(y(n,!0),e=null),e}(r=b()))&&0<n.length){var o=i.has(M)?i.get(M):"0";f=L.Yt(n,o)}if(null!=f&&0<f.length)return void A.httpPost(function(n){var t,e=!0;-1==(t=k.tn(p)&&k.lt(p)?p:n.isSecure()?F:B).indexOf("?")&&(t+="?",e=!1);var i=u.getCustomerC2();k.lt(i)&&(e&&(t+="&"),t+="c2="+i,e=!0);var r="JetportGotAMaskOfThe"+u.g()+"S.D_K-";return r=T(r),k.lt(r)&&(e&&(t+="&"),t+="s="+r),t.toLowerCase()}(t),f,function(n){if(200==n)return c++,y(r,!1),h(),l=+new Date,i.remove(M),void A.setTimeout(function(){P(t,e)},0);e()})}e()}o=o||R,C.extend(this,{flush:function(n,t){u.getEnabled()&&(_(),1e3*r*60-(+new Date-v)<=0?(v=0,P(n,t)):t())},setCacheMaxMeasurements:function(n){t=n},getCacheMaxMeasurements:function(){return t},setCacheMaxBatchFiles:function(n){n<=0||(e=n)},getCacheMaxBatchFiles:function(){return e},Yn:function(n){i=n},Jn:function(){return i},Qn:function(n){r=n},Xn:function(){return r},setCacheMeasurementExpiry:function(n){s=n},getCacheMeasurementExpiry:function(){return s},ft:function(n){if(u.getEnabled()){var t=u.ln();if("string"!=typeof n&&(n=n.ht(t.getMeasurementLabelOrder())),t.getOfflineTransmissionMode()!=N.DISABLED&&null!=u.getCustomerC2()&&k.lt(L.Kt(n,"ns_ts"))){var e=b();if(null!=e)I(e)<this.getCacheMaxBatchFiles()?(n="\n"+n,D.qt(u,e,n),h()):(m().length>=this.getCacheMaxMeasurements()/this.getCacheMaxBatchFiles()&&y(null!=a&&0<a.length?a[0]:null,!0),w(n));else w(n)}}},_t:function(){var n=I(b());return 0<m().length&&(n+=(m().length-1)*this.getCacheMaxBatchFiles()),n},jt:function(){return 0==this._t()},clear:function(){for(var n=m(),t=n.length;0<t;t--)y(n[t-1],!0);u.t().remove(M)},tt:function(n){p=n}}),this.setCacheMaxMeasurements(O),this.setCacheMaxBatchFiles(W),this.Yn(V),this.Qn(x),this.setCacheMeasurementExpiry(U),_()}i.qn=O,i.Hn=W,i.zn=V,i.Zn=x,i.$n=U,e.L=i},{14:14,15:15,19:19,21:21,22:22,24:24,36:36,8:8}],13:[function(n,t,e){var f=n(24),c=n(20),l=n(36),p=n(4),v=n(8).TransmissionMode;t.exports=function(t,n,e,i){var r=this,o=n,u=e;function s(n){200!=n&&(302!=n&&301!=n||t.it())&&t.I().ft(u.ht(o.getMeasurementLabelOrder()),o),i&&i()}function a(){var n=r.process(u.getPixelURL());l.httpGet(n,s)}f.extend(r,{process:function(n){n+=u.ht(o.getMeasurementLabelOrder());var t=c.Jt()?p.A:p.P;if(n.length>t&&0<n.indexOf("&")){var e=n.substring(0,t-8).lastIndexOf("&"),i=encodeURIComponent(n.substring(e+1));n=n.substring(0,e)+"&ns_cut="+i}return n.length>t&&(n=n.substring(0,t)),n},send:function(){var n=o.getLiveTransmissionMode();return n==v.NEVER||n==v.DISABLED?(t.I().ft(u.ht(o.getMeasurementLabelOrder()),o),i&&i()):o.getOfflineTransmissionMode()!=v.NEVER&&0<t.I()._t()?t.I().flush(o,a):a(),!0}})}},{20:20,24:24,36:36,4:4,8:8}],14:[function(n,t,e){var o=n(36),u="cache_dir",i={Gt:function(){return o.IO.dir(u)||[]},qt:function(n,t,e){var i=n.t(),r=Number(i.get(t))||0;o.IO.append(u,t,e),r++,i.set(t,r+"")},deleteFile:function(n,t){o.IO.deleteFile(u,t),n.t().remove(t)},Ht:function(n,t){var e=o.IO.read(u,t);return e?e.split("\n"):[]}};function s(n){return!((n+="").indexOf(",")<0)&&n.indexOf(" ")<0}function a(n){return!isNaN(parseInt(n))&&isFinite(n)}function f(n,t){for(var e=t,i=n.split(","),r=0,o=i.length;r<o;r++){var u=i[r];if(0<u.length)if(e.indexOf(u)<0)0==e.length?e+=u+":1":e+=";"+u+":1";else for(var s=e.split(";"),a=0,f=s.length;a<f;a++)if(0<=s[a].indexOf(u)){var c=s[a].split(":"),l=Number(c[1]);l++;var p=c[0]+":"+l,v=e.indexOf(s[a]);e=e.substring(0,v)+p+e.substring(v+s[a].length)}}return e}e.Tt=function(n,t){for(var e in t)if(t.hasOwnProperty(e)){var i=n[e],r=t[e];null==i?s(r)?n[e]=f(r,""):n[e]=r:a(i)&&a(r)?n[e]=parseInt(i)+parseInt(r)+"":s(r)?n[e]=f(r,i):(o=r,0<=i.indexOf(o)||(n[e]=i+","+r))}var o},e.Ft=i},{36:36}],15:[function(n,t,e){var o=n(22),l=n(21),p=[],v=-1,d=-1,f=["c12","c1","ns_ap_an","ns_ap_pn","ns_ap_pv","ns_ap_device","ns_ak"],h=["c12","c1","ns_ap_an","ns_ap_pn","ns_ap_pv","ns_ap_device","ns_ts","ns_ak"],_=(1<<h.length)-1,c=-1;function g(n,t){v=d=-1;var e=0;do{if(0<=(e=n.indexOf(t,e))){var i=e+t.length;if((0==e||"&"==n.charAt(e-1))&&i<n.length&&"="==n.charAt(i))return v=i+1,void(-1==(d=n.indexOf("&",v))&&(d=n.length));e=i+1}}while(0<=e&&e<n.length)}function u(n,t){var e=0;if(g(n,"ns_ts"),-1!=v&&v<d){t.push('<event t="',n.substring(v,d),'">');for(var i,r,o=0,u=0;o<n.length;){if(-1==(i=n.indexOf("&",o))&&(i=n.length),o<i&&o<(r=n.indexOf("=",o))){var s=!0;if(e!=_)for(var a=0,f=h.length;a<f;a++){var c=1<<a;if(0==(e&c)&&h[a].length==r-o&&l.zt(h[a],0,n,o,h[a].length)){s=!1,e|=c;break}}s&&(0<u&&(p.push("&"),t.push("&")),p.push(n.substring(o,i)),t.push(n.substring(o,i)),u++)}o=i+1}t.push("</event>")}}var i={Yt:function(n,t){var e,i,r=['<?xml version="1.0" encoding="UTF-8" ?>'];return function(n,t,e){var i,r,o,u=+new Date+"";n.push('<events t="',u,'" ');for(var s=0,a=f.length;s<a;s++)i=n,r=t,o=f[s],g(r,o),-1!=v&&v<d&&i.push(o,'="',r.substring(v,d),'" ');n.push('dropped="',e,'" md5="','">'),c=n.length-1}(r,n[0],t),function(n,t){p=[];for(var e=0,i=n.length;e<i;e++)l.lt(n[e])&&u(n[e],t)}(n,r),e=r,i=o(p.join("")).toLowerCase(),e.splice(c,0,i),r.push("</events>"),r.join("")},Kt:function(n,t){return g(n,t),-1!=v&&v<d?n.substring(v,d):null}};t.exports=i},{21:21,22:22}],16:[function(t,r,n){(function(n){var e=t(24),i=r.exports=n.ns_||{};"undefined"!=typeof window&&(window.ns_=i),i.comScore=t(2),i.loadModule=i.loadModule||function(n){for(var t in n)"ns_"!==t&&e.extend(i,n);return n.ns_=i},i.PlatformAPIs=t(32),t(39),i.StreamingAnalytics=t(67),i.ReducedRequirementsStreamingAnalytics=t(64)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2,24:24,32:32,39:39,64:64,67:67}],17:[function(n,t,e){t.exports={D:"unknown",Qt:"0x0",Xt:"-----BEGIN PUBLIC KEY-----\nMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQD0+fCVxGq3Bk24jUKO1PzsiUs3\nvqww6zR4n2e3AweVLUAgsrDRbAWJ/EjZm1WBLBVNMiTLpSAkV6sjOIrUs03xdUEj\nQZJHwOGK+MfzFaZukoo0qAsEMPwQ5posv0JdkBdUGhKchPk6+NYmD6Hb44Lkp7/a\nQnVeWzvfAPQyTJR5wQIDAQAB\n-----END PUBLIC KEY-----"}},{}],18:[function(n,t,e){var a=1e4,f="undefined",c="function";t.exports=function(e,o){var n=this,i="comScore",r=[];function t(n){n=n||[];var t=[i,+new Date];return e&&t.push(e),n=Array.prototype.slice.call(n),t=t.concat(n)}function u(n){var t,e,i;if("boolean"==typeof o||!o)return!!o;if(i=n.join(" "),o instanceof Array&&0<o.length){for(t=0;t<o.length;++t)if((e=o[t])instanceof RegExp&&e.test(i))return!0;return!1}if("object"==typeof o){var r=!1;if(o.hide instanceof Array)for(t=0;t<o.hide.length;++t)if((e=o.hide[t])instanceof RegExp&&e.test(i)){r=!0;break}if(o.show instanceof Array)for(t=0;t<o.show.length;++t)if((e=o.show[t])instanceof RegExp&&e.test(i))return!0;return!r&&!o.show}return!0}function s(n){var t=r.length;if(a<t||"object"==typeof o&&o.max&&t>o.max){var e="object"==typeof o&&o.max||a;r.splice(0,r.length-e+1)}r.push(n)}n.log=function(){var n=t(arguments);s(n),typeof console!=f&&typeof console.log==c&&u(n)&&console.log.apply(console,n)},n.warn=function(){var n=t(arguments);s(n),typeof console!=f&&typeof console.warn==c&&u(n)&&console.warn.apply(console,n)},n.error=function(){var n=t(arguments);s(n),typeof console!=f&&typeof console.error==c&&u(n)&&console.error.apply(console,n)},n.Zt=function(n){for(var t=["API call to:",n],e=1;e<arguments.length;++e)t.push("arg"+e+":",arguments[e]);this.log.apply(this,t)},n.$t=function(){var n=["Trace log:"];n.push.apply(n,Array.prototype.slice.call(arguments)),this.log.apply(this,n)},n.ne=function(n,t){var e=["Deprecated API:",n,"is deprecated and will be eventually removed."];t&&e.push("Use",t,"instead."),this.warn.apply(this,e)},n.te=function(){return r}}},{}],19:[function(n,t,e){var r={},s="undefined";r.indexOf=function(e,n){var i=-1;return r.forEach(n,function(n,t){n==e&&(i=t)}),i},r.forEach=function(n,t,e){try{if("function"==typeof t)if(e=typeof e!=s?e:null,"number"!=typeof n.length||typeof n[0]==s){var i=typeof n.__proto__!=s;for(var r in n)n.hasOwnProperty(r)&&(!i||i&&typeof n.__proto__[r]==s)&&"function"!=typeof n[r]&&t.call(e,n[r],r)}else for(var o=0,u=n.length;o<u;o++)t.call(e,n[o],o)}catch(n){}},e.indexOf=r.indexOf,e.forEach=r.forEach},{}],20:[function(n,t,e){var i={},r="undefined",o=typeof document!=r&&document||void 0;i.ee=function(){if(!o)return!1;var n=!1;return typeof o.hidden!==r?n=!0:typeof o.mozHidden!==r?n=!0:typeof o.msHidden!==r?n=!0:typeof o.webkitHidden!==r&&(n=!0),function(){return n}}(),i.ie=function(){if(!o)return null;var n,t,e;typeof o.hidden!==r?(n="hidden",t="visibilitychange",e="visibilityState"):typeof o.mozHidden!==r?(n="mozHidden",t="mozvisibilitychange",e="mozVisibilityState"):typeof o.msHidden!==r?(n="msHidden",t="msvisibilitychange",e="msVisibilityState"):typeof o.webkitHidden!==r&&(n="webkitHidden",t="webkitvisibilitychange",e="webkitVisibilityState");var i={hidden:n,re:t,state:e};return function(){return i}}(),i.oe=function(){if(!o)return null;var n=i.ie();return function(){return o[n.hidden]}}(),i.ue=function(){if(!navigator)return"";var n,t,e=navigator.userAgent||"",i=navigator.appName||"";return-1!=(t=e.indexOf("Opera"))||-1!=(t=e.indexOf("OPR/"))?i="Opera":-1!=(t=e.indexOf("Android"))?i="Android":-1!=(t=e.indexOf("Chrome"))?i="Chrome":-1!=(t=e.indexOf("Safari"))?i="Safari":-1!=(t=e.indexOf("Firefox"))?i="Firefox":-1!=(t=e.indexOf("IEMobile"))?i="Internet Explorer Mobile":"Microsoft Internet Explorer"==i||"Netscape"==i?i="Internet Explorer":(n=e.lastIndexOf(" ")+1)<(t=e.lastIndexOf("/"))?(i=e.substring(n,t)).toLowerCase()==i.toUpperCase()&&(i=navigator.appName):i="unknown",i},i.se=function(){if(!navigator)return"";var n,t,e,i=navigator.userAgent||"",r=navigator.appName||"",o=navigator.appVersion?""+parseFloat(navigator.appVersion):"";return-1!=(t=i.indexOf("Opera"))?(o=i.substring(t+6),-1!=(t=i.indexOf("Version"))&&(o=i.substring(t+8))):-1!=(t=i.indexOf("OPR/"))?o=i.substring(t+4):-1!=(t=i.indexOf("Android"))?o=i.substring(t+11):-1!=(t=i.indexOf("Chrome"))?o=i.substring(t+7):-1!=(t=i.indexOf("Safari"))?(o=i.substring(t+7),-1!=(t=i.indexOf("Version"))&&(o=i.substring(t+8))):-1!=(t=i.indexOf("Firefox"))?o=i.substring(t+8):"Microsoft Internet Explorer"==r?null!=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(i)&&(o=parseFloat(RegExp.$1)):"Netscape"==r?null!=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(i)&&(o=parseFloat(RegExp.$1)):o=i.lastIndexOf(" ")+1<(t=i.lastIndexOf("/"))?i.substring(t+1):"unknown",-1!=(e=(o=o.toString()).indexOf(";"))&&(o=o.substring(0,e)),-1!=(e=o.indexOf(" "))&&(o=o.substring(0,e)),-1!=(e=o.indexOf(")"))&&(o=o.substring(0,e)),n=parseInt(""+o,10),isNaN(n)&&(o=""+parseFloat(navigator.appVersion)),o},i.Jt=function(){return typeof window!=r&&window.ae,!0},i.fe=function(){return typeof window!=r&&o},i.ce=function(){return!!o&&"s"===o.location.href.charAt(4)},t.exports.ee=i.ee,t.exports.ie=i.ie,t.exports.oe=i.oe,t.exports.ue=i.ue,t.exports.se=i.se,t.exports.Jt=i.Jt,t.exports.fe=i.fe,t.exports.ce=i.ce},{}],21:[function(n,t,e){var i,r=r||{},o="undefined";r.le=(i=1,function(){return+new Date+"_"+i++}),r.jt=function(n){return null==n||""===n||n instanceof Array&&0===n.length},r.lt=function(n){return!this.jt(n)},r.pe=function(n,t){return t=this.tn(t)?t:"",this.tn(n)?n:t},r.ve=function(n){return typeof n!=o&&("string"==typeof n?"true"===(n=n.toLowerCase())||"1"===n||"on"===n:!!n)},r.zt=function(n,t,e,i,r){if(t<0||i<0||t+r>n.length||i+r>e.length)return!1;for(;0<=--r;){if(n.charAt(t++)!=e.charAt(i++))return!1}return!0},r.tn=function(n){return typeof n!=o&&null!=n},t.exports.tn=r.tn,t.exports.zt=r.zt,t.exports.ve=r.ve,t.exports.pe=r.pe,t.exports.lt=r.lt,t.exports.jt=r.jt,t.exports.le=r.le},{}],22:[function(n,t,e){var i={};i.de=function(){function o(n,t){var e=n[0],i=n[1],r=n[2],o=n[3];i=c(i=c(i=c(i=c(i=f(i=f(i=f(i=f(i=a(i=a(i=a(i=a(i=u(i=u(i=u(i=u(i,r=u(r,o=u(o,e=u(e,i,r,o,t[0],7,-680876936),i,r,t[1],12,-389564586),e,i,t[2],17,606105819),o,e,t[3],22,-1044525330),r=u(r,o=u(o,e=u(e,i,r,o,t[4],7,-176418897),i,r,t[5],12,1200080426),e,i,t[6],17,-1473231341),o,e,t[7],22,-45705983),r=u(r,o=u(o,e=u(e,i,r,o,t[8],7,1770035416),i,r,t[9],12,-1958414417),e,i,t[10],17,-42063),o,e,t[11],22,-1990404162),r=u(r,o=u(o,e=u(e,i,r,o,t[12],7,1804603682),i,r,t[13],12,-40341101),e,i,t[14],17,-1502002290),o,e,t[15],22,1236535329),r=a(r,o=a(o,e=a(e,i,r,o,t[1],5,-165796510),i,r,t[6],9,-1069501632),e,i,t[11],14,643717713),o,e,t[0],20,-373897302),r=a(r,o=a(o,e=a(e,i,r,o,t[5],5,-701558691),i,r,t[10],9,38016083),e,i,t[15],14,-660478335),o,e,t[4],20,-405537848),r=a(r,o=a(o,e=a(e,i,r,o,t[9],5,568446438),i,r,t[14],9,-1019803690),e,i,t[3],14,-187363961),o,e,t[8],20,1163531501),r=a(r,o=a(o,e=a(e,i,r,o,t[13],5,-1444681467),i,r,t[2],9,-51403784),e,i,t[7],14,1735328473),o,e,t[12],20,-1926607734),r=f(r,o=f(o,e=f(e,i,r,o,t[5],4,-378558),i,r,t[8],11,-2022574463),e,i,t[11],16,1839030562),o,e,t[14],23,-35309556),r=f(r,o=f(o,e=f(e,i,r,o,t[1],4,-1530992060),i,r,t[4],11,1272893353),e,i,t[7],16,-155497632),o,e,t[10],23,-1094730640),r=f(r,o=f(o,e=f(e,i,r,o,t[13],4,681279174),i,r,t[0],11,-358537222),e,i,t[3],16,-722521979),o,e,t[6],23,76029189),r=f(r,o=f(o,e=f(e,i,r,o,t[9],4,-640364487),i,r,t[12],11,-421815835),e,i,t[15],16,530742520),o,e,t[2],23,-995338651),r=c(r,o=c(o,e=c(e,i,r,o,t[0],6,-198630844),i,r,t[7],10,1126891415),e,i,t[14],15,-1416354905),o,e,t[5],21,-57434055),r=c(r,o=c(o,e=c(e,i,r,o,t[12],6,1700485571),i,r,t[3],10,-1894986606),e,i,t[10],15,-1051523),o,e,t[1],21,-2054922799),r=c(r,o=c(o,e=c(e,i,r,o,t[8],6,1873313359),i,r,t[15],10,-30611744),e,i,t[6],15,-1560198380),o,e,t[13],21,1309151649),r=c(r,o=c(o,e=c(e,i,r,o,t[4],6,-145523070),i,r,t[11],10,-1120210379),e,i,t[2],15,718787259),o,e,t[9],21,-343485551),n[0]=p(e,n[0]),n[1]=p(i,n[1]),n[2]=p(r,n[2]),n[3]=p(o,n[3])}function s(n,t,e,i,r,o){return t=p(p(t,n),p(i,o)),p(t<<r|t>>>32-r,e)}function u(n,t,e,i,r,o,u){return s(t&e|~t&i,n,t,r,o,u)}function a(n,t,e,i,r,o,u){return s(t&i|e&~i,n,t,r,o,u)}function f(n,t,e,i,r,o,u){return s(t^e^i,n,t,r,o,u)}function c(n,t,e,i,r,o,u){return s(e^(t|~i),n,t,r,o,u)}function l(n){var t,e=[];for(t=0;t<64;t+=4)e[t>>2]=n.charCodeAt(t)+(n.charCodeAt(t+1)<<8)+(n.charCodeAt(t+2)<<16)+(n.charCodeAt(t+3)<<24);return e}var i="0123456789abcdef".split("");function e(n){for(var t="",e=0;e<4;e++)t+=i[n>>8*e+4&15]+i[n>>8*e&15];return t}function n(n){return function(n){for(var t=0;t<n.length;t++)n[t]=e(n[t]);return n.join("")}(function(n){var t,e=n.length,i=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=n.length;t+=64)o(i,l(n.substring(t-64,t)));n=n.substring(t-64);var r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<n.length;t++)r[t>>2]|=n.charCodeAt(t)<<(t%4<<3);if(r[t>>2]|=128<<(t%4<<3),55<t)for(o(i,r),t=0;t<16;t++)r[t]=0;return r[14]=8*e,o(i,r),i}(n))}function p(n,t){return n+t&4294967295}if("5d41402abc4b2a76b9719d911017c592"!=n("hello"))function p(n,t){var e=(65535&n)+(65535&t);return(n>>16)+(t>>16)+(e>>16)<<16|65535&e}return n}(),t.exports=i.de},{}],23:[function(n,t,e){var o=function(n){if("object"!=typeof n)return n;var t;if(n instanceof Array){t=[];for(var e=0,i=n.length;e<i;e++)t[e]=o(n[e]);return t}for(var r in t={},n)n.hasOwnProperty(r)&&(t[r]=n[r]);return t};t.exports=o},{}],24:[function(n,t,e){var i=i||{};i.filter=function(n,t){var e={};for(var i in t)t.hasOwnProperty(i)&&n(t[i])&&(e[i]=t[i]);return e},i.extend=function(n){var t,e=arguments.length;n=n||{};for(var i=1;i<e;i++)if(t=arguments[i])for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);return n},t.exports.filter=i.filter,t.exports.extend=i.extend},{}],25:[function(n,t,e){var K=n(17),i={};i.encrypt=function(){var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=function(n,t){var e=i.indexOf(n.charAt(t));if(-1===e)throw new Error;return e},r=function(n){var t,e,i,r=(n=""+n).length;if(0===r)return n;if(r%4!=0)throw new Error;t=0,"="===n.charAt(r-1)&&(t=1,"="===n.charAt(r-2)&&(t=2),r-=4);var o=[];for(e=0;e<r;e+=4)i=u(n,e)<<18|u(n,e+1)<<12|u(n,e+2)<<6|u(n,e+3),o.push(String.fromCharCode(i>>16,i>>8&255,255&i));switch(t){case 1:i=u(n,e)<<18|u(n,e+1)<<12|u(n,e+2)<<6,o.push(String.fromCharCode(i>>16,i>>8&255));break;case 2:i=u(n,e)<<18|u(n,e+1)<<12,o.push(String.fromCharCode(i>>16))}return o.join("")};function w(n,t,e){null!=n&&("number"==typeof n?this.he(n,t,e):null==t&&"string"!=typeof n?this._e(n,256):this._e(n,t))}function y(){return new w(null)}w.prototype.ge=function(n,t,e,i,r,o){for(var u=16383&t,s=t>>14;0<=--o;){var a=16383&this[n],f=this[n++]>>14,c=s*a+f*u;r=((a=u*a+((16383&c)<<14)+e[i]+r)>>28)+(c>>14)+s*f,e[i++]=268435455&a}return r},w.prototype.me=28,w.prototype.we=268435455,w.prototype.ye=1<<28;w.prototype.be=Math.pow(2,52),w.prototype.Ie=24,w.prototype.Se=4;var n,t,e="0123456789abcdefghijklmnopqrstuvwxyz",o=[];for(n="0".charCodeAt(0),t=0;t<=9;++t)o[n++]=t;for(n="a".charCodeAt(0),t=10;t<36;++t)o[n++]=t;for(n="A".charCodeAt(0),t=10;t<36;++t)o[n++]=t;function a(n){return e.charAt(n)}function f(n,t){var e=o[n.charCodeAt(t)];return null==e?-1:e}function _(n){var t=y();return t.Pe(n),t}function b(n){var t,e=1;return 0!=(t=n>>>16)&&(n=t,e+=16),0!=(t=n>>8)&&(n=t,e+=8),0!=(t=n>>4)&&(n=t,e+=4),0!=(t=n>>2)&&(n=t,e+=2),0!=(t=n>>1)&&(n=t,e+=1),e}function g(n){this.Ae=n}function m(n){this.Ae=n,this.Ce=n.ke(),this.Ee=32767&this.Ce,this.Te=this.Ce>>15,this.Ne=(1<<n.me-15)-1,this.Le=2*n.De}function s(n,t){return n&t}function c(n,t){return n|t}function l(n,t){return n^t}function p(n,t){return n&~t}function v(n){if(0==n)return-1;var t=0;return 0==(65535&n)&&(n>>=16,t+=16),0==(255&n)&&(n>>=8,t+=8),0==(15&n)&&(n>>=4,t+=4),0==(3&n)&&(n>>=2,t+=2),0==(1&n)&&++t,t}function d(n){for(var t=0;0!=n;)n&=n-1,++t;return t}function h(){}function I(n){return n}function S(n){this.r2=y(),this.Re=y(),w.ONE.Me(2*n.De,this.r2),this.Oe=this.r2.We(n),this.Ae=n}g.prototype.Ve=function(n){return n.xe<0||0<=n.Ue(this.Ae)?n.Be(this.Ae):n},g.prototype.Fe=function(n){return n},g.prototype.reduce=function(n){n.je(this.Ae,null,n)},g.prototype.Ge=function(n,t,e){n.Ke(t,e),this.reduce(e)},g.prototype.qe=function(n,t){n.He(t),this.reduce(t)},m.prototype.Ve=function(n){var t=y();return n.abs().Me(this.Ae.De,t),t.je(this.Ae,null,t),n.xe<0&&0<t.Ue(w.ZERO)&&this.Ae.Ye(t,t),t},m.prototype.Fe=function(n){var t=y();return n.Je(t),this.reduce(t),t},m.prototype.reduce=function(n){for(;n.De<=this.Le;)n[n.De++]=0;for(var t=0;t<this.Ae.De;++t){var e=32767&n[t],i=e*this.Ee+((e*this.Te+(n[t]>>15)*this.Ee&this.Ne)<<15)&n.we;for(n[e=t+this.Ae.De]+=this.Ae.ge(0,i,n,t,0,this.Ae.De);n[e]>=n.ye;)n[e]-=n.ye,n[++e]++}n.ze(),n.Qe(this.Ae.De,n),0<=n.Ue(this.Ae)&&n.Ye(this.Ae,n)},m.prototype.Ge=function(n,t,e){n.Ke(t,e),this.reduce(e)},m.prototype.qe=function(n,t){n.He(t),this.reduce(t)},w.prototype.Je=function(n){for(var t=this.De-1;0<=t;--t)n[t]=this[t];n.De=this.De,n.xe=this.xe},w.prototype.Pe=function(n){this.De=1,this.xe=n<0?-1:0,0<n?this[0]=n:n<-1?this[0]=n+DV:this.De=0},w.prototype._e=function(n,t){var e;if(16==t)e=4;else if(8==t)e=3;else if(256==t)e=8;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return void this.Xe(n,t);e=2}this.De=0,this.xe=0;for(var i=n.length,r=!1,o=0;0<=--i;){var u=8==e?255&n[i]:f(n,i);u<0?"-"==n.charAt(i)&&(r=!0):(r=!1,0==o?this[this.De++]=u:o+e>this.me?(this[this.De-1]|=(u&(1<<this.me-o)-1)<<o,this[this.De++]=u>>this.me-o):this[this.De-1]|=u<<o,(o+=e)>=this.me&&(o-=this.me))}8==e&&0!=(128&n[0])&&(this.xe=-1,0<o&&(this[this.De-1]|=(1<<this.me-o)-1<<o)),this.ze(),r&&w.ZERO.Ye(this,this)},w.prototype.ze=function(){for(var n=this.xe&this.we;0<this.De&&this[this.De-1]==n;)--this.De},w.prototype.Me=function(n,t){var e;for(e=this.De-1;0<=e;--e)t[e+n]=this[e];for(e=n-1;0<=e;--e)t[e]=0;t.De=this.De+n,t.xe=this.xe},w.prototype.Qe=function(n,t){for(var e=n;e<this.De;++e)t[e-n]=this[e];t.De=Math.max(this.De-n,0),t.xe=this.xe},w.prototype.Ze=function(n,t){var e,i=n%this.me,r=this.me-i,o=(1<<r)-1,u=Math.floor(n/this.me),s=this.xe<<i&this.we;for(e=this.De-1;0<=e;--e)t[e+u+1]=this[e]>>r|s,s=(this[e]&o)<<i;for(e=u-1;0<=e;--e)t[e]=0;t[u]=s,t.De=this.De+u+1,t.xe=this.xe,t.ze()},w.prototype.$e=function(n,t){t.xe=this.xe;var e=Math.floor(n/this.me);if(e>=this.De)t.De=0;else{var i=n%this.me,r=this.me-i,o=(1<<i)-1;t[0]=this[e]>>i;for(var u=e+1;u<this.De;++u)t[u-e-1]|=(this[u]&o)<<r,t[u-e]=this[u]>>i;0<i&&(t[this.De-e-1]|=(this.xe&o)<<r),t.De=this.De-e,t.ze()}},w.prototype.Ye=function(n,t){for(var e=0,i=0,r=Math.min(n.De,this.De);e<r;)i+=this[e]-n[e],t[e++]=i&this.we,i>>=this.me;if(n.De<this.De){for(i-=n.xe;e<this.De;)i+=this[e],t[e++]=i&this.we,i>>=this.me;i+=this.xe}else{for(i+=this.xe;e<n.De;)i-=n[e],t[e++]=i&this.we,i>>=this.me;i-=n.xe}t.xe=i<0?-1:0,i<-1?t[e++]=this.ye+i:0<i&&(t[e++]=i),t.De=e,t.ze()},w.prototype.Ke=function(n,t){var e=this.abs(),i=n.abs(),r=e.De;for(t.De=r+i.De;0<=--r;)t[r]=0;for(r=0;r<i.De;++r)t[r+e.De]=e.ge(0,i[r],t,r,0,e.De);t.xe=0,t.ze(),this.xe!=n.xe&&w.ZERO.Ye(t,t)},w.prototype.He=function(n){for(var t=this.abs(),e=n.De=2*t.De;0<=--e;)n[e]=0;for(e=0;e<t.De-1;++e){var i=t.ge(e,t[e],n,2*e,0,1);(n[e+t.De]+=t.ge(e+1,2*t[e],n,2*e+1,i,t.De-e-1))>=t.ye&&(n[e+t.De]-=t.ye,n[e+t.De+1]=1)}0<n.De&&(n[n.De-1]+=t.ge(e,t[e],n,2*e,0,1)),n.xe=0,n.ze()},w.prototype.je=function(n,t,e){var i=n.abs();if(!(i.De<=0)){var r=this.abs();if(r.De<i.De)return null!=t&&t.Pe(0),void(null!=e&&this.Je(e));null==e&&(e=y());var o=y(),u=this.xe,s=n.xe,a=this.me-b(i[i.De-1]);0<a?(i.Ze(a,o),r.Ze(a,e)):(i.Je(o),r.Je(e));var f=o.De,c=o[f-1];if(0!=c){var l=c*(1<<this.Ie)+(1<f?o[f-2]>>this.Se:0),p=this.be/l,v=(1<<this.Ie)/l,d=1<<this.Se,h=e.De,_=h-f,g=null==t?y():t;for(o.Me(_,g),0<=e.Ue(g)&&(e[e.De++]=1,e.Ye(g,e)),w.ONE.Me(f,g),g.Ye(o,o);o.De<f;)o[o.De++]=0;for(;0<=--_;){var m=e[--h]==c?this.we:Math.floor(e[h]*p+(e[h-1]+d)*v);if((e[h]+=o.ge(0,m,e,_,0,f))<m)for(o.Me(_,g),e.Ye(g,e);e[h]<--m;)e.Ye(g,e)}null!=t&&(e.Qe(f,t),u!=s&&w.ZERO.Ye(t,t)),e.De=f,e.ze(),0<a&&e.$e(a,e),u<0&&w.ZERO.Ye(e,e)}}},w.prototype.ke=function(){if(this.De<1)return 0;var n=this[0];if(0==(1&n))return 0;var t=3&n;return 0<(t=(t=(t=(t=t*(2-(15&n)*t)&15)*(2-(255&n)*t)&255)*(2-((65535&n)*t&65535))&65535)*(2-n*t%this.ye)%this.ye)?this.ye-t:-t},w.prototype.ni=function(){return 0==(0<this.De?1&this[0]:this.xe)},w.prototype.exp=function(n,t){if(4294967295<n||n<1)return w.ONE;var e=y(),i=y(),r=t.Ve(this),o=b(n)-1;for(r.Je(e);0<=--o;)if(t.qe(e,i),0<(n&1<<o))t.Ge(i,r,e);else{var u=e;e=i,i=u}return t.Fe(e)},w.prototype.toString=function(n){if(this.xe<0)return"-"+this.ti().toString(n);var t;if(16==n)t=4;else if(8==n)t=3;else if(2==n)t=1;else if(32==n)t=5;else{if(4!=n)return this.ei(n);t=2}var e,i=(1<<t)-1,r=!1,o="",u=this.De,s=this.me-u*this.me%t;if(0<u--)for(s<this.me&&0<(e=this[u]>>s)&&(r=!0,o=a(e));0<=u;)s<t?(e=(this[u]&(1<<s)-1)<<t-s,e|=this[--u]>>(s+=this.me-t)):(e=this[u]>>(s-=t)&i,s<=0&&(s+=this.me,--u)),0<e&&(r=!0),r&&(o+=a(e));return r?o:"0"},w.prototype.ti=function(){var n=y();return w.ZERO.Ye(this,n),n},w.prototype.abs=function(){return this.xe<0?this.ti():this},w.prototype.Ue=function(n){var t=this.xe-n.xe;if(0!=t)return t;var e=this.De;if(0!=(t=e-n.De))return this.xe<0?-t:t;for(;0<=--e;)if(0!=(t=this[e]-n[e]))return t;return 0},w.prototype.ii=function(){return this.De<=0?0:this.me*(this.De-1)+b(this[this.De-1]^this.xe&this.we)},w.prototype.Be=function(n){var t=y();return this.abs().je(n,null,t),this.xe<0&&0<t.Ue(w.ZERO)&&n.Ye(t,t),t},w.prototype.ri=function(n,t){var e;return e=n<256||t.ni()?new g(t):new m(t),this.exp(n,e)},w.ZERO=_(0),w.ONE=_(1),h.prototype.Ve=I,h.prototype.Fe=I,h.prototype.Ge=function(n,t,e){n.Ke(t,e)},h.prototype.qe=function(n,t){n.He(t)},S.prototype.Ve=function(n){if(n.xe<0||n.De>2*this.Ae.De)return n.Be(this.Ae);if(n.Ue(this.Ae)<0)return n;var t=y();return n.Je(t),this.reduce(t),t},S.prototype.Fe=function(n){return n},S.prototype.reduce=function(n){for(n.Qe(this.Ae.De-1,this.r2),n.De>this.Ae.De+1&&(n.De=this.Ae.De+1,n.ze()),this.Oe.oi(this.r2,this.Ae.De+1,this.Re),this.Ae.ui(this.Re,this.Ae.De+1,this.r2);n.Ue(this.r2)<0;)n.si(1,this.Ae.De+1);for(n.Ye(this.r2,n);0<=n.Ue(this.Ae);)n.Ye(this.Ae,n)},S.prototype.Ge=function(n,t,e){n.Ke(t,e),this.reduce(e)},S.prototype.qe=function(n,t){n.He(t),this.reduce(t)};var P=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],A=(1<<26)/P[P.length-1];function C(){this.ai=0,this.fi=0,this.ci=[]}w.prototype.li=function(n){return Math.floor(Math.LN2*this.me/Math.log(n))},w.prototype.ei=function(n){if(null==n&&(n=10),0==this.pi()||n<2||36<n)return"0";var t=this.li(n),e=Math.pow(n,t),i=_(e),r=y(),o=y(),u="";for(this.je(i,r,o);0<r.pi();)u=(e+o.vi()).toString(n).substr(1)+u,r.je(i,r,o);return o.vi().toString(n)+u},w.prototype.Xe=function(n,t){this.Pe(0),null==t&&(t=10);for(var e=this.li(t),i=Math.pow(t,e),r=!1,o=0,u=0,s=0;s<n.length;++s){var a=f(n,s);a<0?"-"==n.charAt(s)&&0==this.pi()&&(r=!0):(u=t*u+a,++o>=e&&(this.di(i),this.si(u,0),u=o=0))}0<o&&(this.di(Math.pow(t,o)),this.si(u,0)),r&&w.ZERO.Ye(this,this)},w.prototype.he=function(n,t,e){if("number"==typeof t)if(n<2)this.Pe(1);else for(this.he(n,e),this.hi(n-1)||this._i(w.ONE.shiftLeft(n-1),c,this),this.ni()&&this.si(1,0);!this.gi(t);)this.si(2,0),this.ii()>n&&this.Ye(w.ONE.shiftLeft(n-1),this);else{var i=[],r=7&n;i.length=1+(n>>3),t.mi(i),0<r?i[0]&=(1<<r)-1:i[0]=0,this._e(i,256)}},w.prototype._i=function(n,t,e){var i,r,o=Math.min(n.De,this.De);for(i=0;i<o;++i)e[i]=t(this[i],n[i]);if(n.De<this.De){for(r=n.xe&this.we,i=o;i<this.De;++i)e[i]=t(this[i],r);e.De=this.De}else{for(r=this.xe&this.we,i=o;i<n.De;++i)e[i]=t(r,n[i]);e.De=n.De}e.xe=t(this.xe,n.xe),e.ze()},w.prototype.wi=function(n,t){var e=w.ONE.shiftLeft(n);return this._i(e,t,e),e},w.prototype.yi=function(n,t){for(var e=0,i=0,r=Math.min(n.De,this.De);e<r;)i+=this[e]+n[e],t[e++]=i&this.we,i>>=this.me;if(n.De<this.De){for(i+=n.xe;e<this.De;)i+=this[e],t[e++]=i&this.we,i>>=this.me;i+=this.xe}else{for(i+=this.xe;e<n.De;)i+=n[e],t[e++]=i&this.we,i>>=this.me;i+=n.xe}t.xe=i<0?-1:0,0<i?t[e++]=i:i<-1&&(t[e++]=this.ye+i),t.De=e,t.ze()},w.prototype.di=function(n){this[this.De]=this.ge(0,n-1,this,0,0,this.De),++this.De,this.ze()},w.prototype.si=function(n,t){if(0!=n){for(;this.De<=t;)this[this.De++]=0;for(this[t]+=n;this[t]>=this.ye;)this[t]-=this.ye,++t>=this.De&&(this[this.De++]=0),++this[t]}},w.prototype.ui=function(n,t,e){var i,r=Math.min(this.De+n.De,t);for(e.xe=0,e.De=r;0<r;)e[--r]=0;for(i=e.De-this.De;r<i;++r)e[r+this.De]=this.ge(0,n[r],e,r,0,this.De);for(i=Math.min(n.De,t);r<i;++r)this.ge(0,n[r],e,r,0,t-r);e.ze()},w.prototype.oi=function(n,t,e){--t;var i=e.De=this.De+n.De-t;for(e.xe=0;0<=--i;)e[i]=0;for(i=Math.max(t-this.De,0);i<n.De;++i)e[this.De+i-t]=this.ge(t-i,n[i],e,0,0,this.De+i-t);e.ze(),e.Qe(1,e)},w.prototype.bi=function(n){if(n<=0)return 0;var t=this.ye%n,e=this.xe<0?n-1:0;if(0<this.De)if(0==t)e=this[0]%n;else for(var i=this.De-1;0<=i;--i)e=(t*e+this[i])%n;return e},w.prototype.Ii=function(n){var t=this.Si(w.ONE),e=t.Pi();if(e<=0)return!1;var i=t.Ai(e);(n=n+1>>1)>P.length&&(n=P.length);for(var r=y(),o=0;o<n;++o){r.Pe(P[Math.floor(Math.random()*P.length)]);var u=r.Ci(i,this);if(0!=u.Ue(w.ONE)&&0!=u.Ue(t)){for(var s=1;s++<e&&0!=u.Ue(t);)if(0==(u=u.ri(2,this)).Ue(w.ONE))return!1;if(0!=u.Ue(t))return!1}}return!0},w.prototype.clone=function(){var n=y();return this.Je(n),n},w.prototype.vi=function(){if(this.xe<0){if(1==this.De)return this[0]-this.ye;if(0==this.De)return-1}else{if(1==this.De)return this[0];if(0==this.De)return 0}return(this[1]&(1<<32-this.me)-1)<<this.me|this[0]},w.prototype.ki=function(){return 0==this.De?this.xe:this[0]<<24>>24},w.prototype.Ei=function(){return 0==this.De?this.xe:this[0]<<16>>16},w.prototype.pi=function(){return this.xe<0?-1:this.De<=0||1==this.De&&this[0]<=0?0:1},w.prototype.Ti=function(){var n=this.De,t=[];t[0]=this.xe;var e,i=this.me-n*this.me%8,r=0;if(0<n--)for(i<this.me&&(e=this[n]>>i)!=(this.xe&this.we)>>i&&(t[r++]=e|this.xe<<this.me-i);0<=n;)i<8?(e=(this[n]&(1<<i)-1)<<8-i,e|=this[--n]>>(i+=this.me-8)):(e=this[n]>>(i-=8)&255,i<=0&&(i+=this.me,--n)),0!=(128&e)&&(e|=-256),0==r&&(128&this.xe)!=(128&e)&&++r,(0<r||e!=this.xe)&&(t[r++]=e);return t},w.prototype.Ni=function(n){return 0==this.Ue(n)},w.prototype.min=function(n){return this.Ue(n)<0?this:n},w.prototype.max=function(n){return 0<this.Ue(n)?this:n},w.prototype.Li=function(n){var t=y();return this._i(n,s,t),t},w.prototype.Di=function(n){var t=y();return this._i(n,c,t),t},w.prototype.Ri=function(n){var t=y();return this._i(n,l,t),t},w.prototype.Mi=function(n){var t=y();return this._i(n,p,t),t},w.prototype.Oi=function(){for(var n=y(),t=0;t<this.De;++t)n[t]=this.we&~this[t];return n.De=this.De,n.xe=~this.xe,n},w.prototype.shiftLeft=function(n){var t=y();return n<0?this.$e(-n,t):this.Ze(n,t),t},w.prototype.Ai=function(n){var t=y();return n<0?this.Ze(-n,t):this.$e(n,t),t},w.prototype.Pi=function(){for(var n=0;n<this.De;++n)if(0!=this[n])return n*this.me+v(this[n]);return this.xe<0?this.De*this.me:-1},w.prototype.Wi=function(){for(var n=0,t=this.xe&this.we,e=0;e<this.De;++e)n+=d(this[e]^t);return n},w.prototype.hi=function(n){var t=Math.floor(n/this.me);return t>=this.De?0!=this.xe:0!=(this[t]&1<<n%this.me)},w.prototype.Vi=function(n){return this.wi(n,c)},w.prototype.xi=function(n){return this.wi(n,p)},w.prototype.Ui=function(n){return this.wi(n,l)},w.prototype.add=function(n){var t=y();return this.yi(n,t),t},w.prototype.Si=function(n){var t=y();return this.Ye(n,t),t},w.prototype.multiply=function(n){var t=y();return this.Ke(n,t),t},w.prototype.We=function(n){var t=y();return this.je(n,t,null),t},w.prototype.Bi=function(n){var t=y();return this.je(n,null,t),t},w.prototype.Fi=function(n){var t=y(),e=y();return this.je(n,t,e),[t,e]},w.prototype.Ci=function(n,t){var e,i,r=n.ii(),o=_(1);if(r<=0)return o;e=r<18?1:r<48?3:r<144?4:r<768?5:6,i=r<8?new g(t):t.ni()?new S(t):new m(t);var u=[],s=3,a=e-1,f=(1<<e)-1;if(u[1]=i.Ve(this),1<e){var c=y();for(i.qe(u[1],c);s<=f;)u[s]=y(),i.Ge(c,u[s-2],u[s]),s+=2}var l,p,v=n.De-1,d=!0,h=y();for(r=b(n[v])-1;0<=v;){for(a<=r?l=n[v]>>r-a&f:(l=(n[v]&(1<<r+1)-1)<<a-r,0<v&&(l|=n[v-1]>>this.me+r-a)),s=e;0==(1&l);)l>>=1,--s;if((r-=s)<0&&(r+=this.me,--v),d)u[l].Je(o),d=!1;else{for(;1<s;)i.qe(o,h),i.qe(h,o),s-=2;0<s?i.qe(o,h):(p=o,o=h,h=p),i.Ge(h,u[l],o)}for(;0<=v&&0==(n[v]&1<<r);)i.qe(o,h),p=o,o=h,h=p,--r<0&&(r=this.me-1,--v)}return i.Fe(o)},w.prototype.ji=function(n){var t=n.ni();if(this.ni()&&t||0==n.pi())return w.ZERO;for(var e=n.clone(),i=this.clone(),r=_(1),o=_(0),u=_(0),s=_(1);0!=e.pi();){for(;e.ni();)e.$e(1,e),t?(r.ni()&&o.ni()||(r.yi(this,r),o.Ye(n,o)),r.$e(1,r)):o.ni()||o.Ye(n,o),o.$e(1,o);for(;i.ni();)i.$e(1,i),t?(u.ni()&&s.ni()||(u.yi(this,u),s.Ye(n,s)),u.$e(1,u)):s.ni()||s.Ye(n,s),s.$e(1,s);0<=e.Ue(i)?(e.Ye(i,e),t&&r.Ye(u,r),o.Ye(s,o)):(i.Ye(e,i),t&&u.Ye(r,u),s.Ye(o,s))}return 0!=i.Ue(w.ONE)?w.ZERO:0<=s.Ue(n)?s.Si(n):s.pi()<0?(s.yi(n,s),s.pi()<0?s.add(n):s):s},w.prototype.pow=function(n){return this.exp(n,new h)},w.prototype.Gi=function(n){var t=this.xe<0?this.ti():this.clone(),e=n.xe<0?n.ti():n.clone();if(t.Ue(e)<0){var i=t;t=e,e=i}var r=t.Pi(),o=e.Pi();if(o<0)return t;for(r<o&&(o=r),0<o&&(t.$e(o,t),e.$e(o,e));0<t.pi();)0<(r=t.Pi())&&t.$e(r,t),0<(r=e.Pi())&&e.$e(r,e),0<=t.Ue(e)?(t.Ye(e,t),t.$e(1,t)):(e.Ye(t,e),e.$e(1,e));return 0<o&&e.Ze(o,e),e},w.prototype.gi=function(n){var t,e=this.abs();if(1==e.De&&e[0]<=P[P.length-1]){for(t=0;t<P.length;++t)if(e[0]==P[t])return!0;return!1}if(e.ni())return!1;for(t=1;t<P.length;){for(var i=P[t],r=t+1;r<P.length&&i<A;)i*=P[r++];for(i=e.bi(i);t<r;)if(i%P[t++]==0)return!1}return e.Ii(n)},w.prototype.Ki=function(){var n=y();return this.He(n),n},C.prototype.init=function(n){var t,e,i;for(t=0;t<256;++t)this.ci[t]=t;for(t=e=0;t<256;++t)e=e+this.ci[t]+n[t%n.length]&255,i=this.ci[t],this.ci[t]=this.ci[e],this.ci[e]=i;this.ai=0,this.fi=0},C.prototype.next=function(){var n;return this.ai=this.ai+1&255,this.fi=this.fi+this.ci[this.ai]&255,n=this.ci[this.ai],this.ci[this.ai]=this.ci[this.fi],this.ci[this.fi]=n,this.ci[n+this.ci[this.ai]&255]};var k,E,T,N=256;function L(){var n;n=(new Date).getTime(),E[T++]^=255&n,E[T++]^=n>>8&255,E[T++]^=n>>16&255,E[T++]^=n>>24&255,N<=T&&(T-=N)}if(null==E){var D;for(E=[],T=0;T<N;)D=Math.floor(65536*Math.random()),E[T++]=D>>>8,E[T++]=255&D;T=0,L()}function R(){if(null==k){for(L(),(k=new C).init(E),T=0;T<E.length;++T)E[T]=0;T=0}return k.next()}function M(){}function O(n,t){return new w(n,t)}function W(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}M.prototype.mi=function(n){var t;for(t=0;t<n.length;++t)n[t]=R()},W.prototype.qi=function(n){return n.ri(this.e,this.n)},W.prototype.Hi=function(n,t){null!=n&&null!=t&&0<n.length&&0<t.length?(this.n=O(n,16),this.e=parseInt(t,16)):alert("Invalid RSA public key")},W.prototype.encrypt=function(n){var t=function(n,t){if(t<n.length+11)return alert("Message too long for RSA"),null;for(var e=[],i=n.length-1;0<=i&&0<t;){var r=n.charCodeAt(i--);r<128?e[--t]=r:127<r&&r<2048?(e[--t]=63&r|128,e[--t]=r>>6|192):(e[--t]=63&r|128,e[--t]=r>>6&63|128,e[--t]=r>>12|224)}e[--t]=0;for(var o=new M,u=[];2<t;){for(u[0]=0;0==u[0];)o.mi(u);e[--t]=u[0]}return e[--t]=2,e[--t]=0,new w(e)}(n,this.n.ii()+7>>3);if(null==t)return null;var e=this.qi(t);if(null==e)return null;var i=e.toString(16);return 0==(1&i.length)?i:"0"+i},W.prototype.Yi=function(n){if(null==this.p||null==this.q)return n.Ci(this.d,this.n);for(var t=n.Be(this.p).Ci(this.dmp1,this.p),e=n.Be(this.q).Ci(this.dmq1,this.q);t.Ue(e)<0;)t=t.add(this.p);return t.Si(e).multiply(this.coeff).Be(this.p).multiply(this.q).add(e)},W.prototype.Ji=function(n,t,e){null!=n&&null!=t&&0<n.length&&0<t.length?(this.n=O(n,16),this.e=parseInt(t,16),this.d=O(e,16)):alert("Invalid RSA private key")},W.prototype.zi=function(n,t,e,i,r,o,u,s){null!=n&&null!=t&&0<n.length&&0<t.length?(this.n=O(n,16),this.e=parseInt(t,16),this.d=O(e,16),this.p=O(i,16),this.q=O(r,16),this.dmp1=O(o,16),this.dmq1=O(u,16),this.coeff=O(s,16)):alert("Invalid RSA private key")},W.prototype.Qi=function(n,t){var e=new M,i=n>>1;this.e=parseInt(t,16);for(var r=new w(t,16);;){for(;this.p=new w(n-i,1,e),0!=this.p.Si(w.ONE).Gi(r).Ue(w.ONE)||!this.p.gi(10););for(;this.q=new w(i,1,e),0!=this.q.Si(w.ONE).Gi(r).Ue(w.ONE)||!this.q.gi(10););if(this.p.Ue(this.q)<=0){var o=this.p;this.p=this.q,this.q=o}var u=this.p.Si(w.ONE),s=this.q.Si(w.ONE),a=u.multiply(s);if(0==a.Gi(r).Ue(w.ONE)){this.n=this.p.multiply(this.q),this.d=r.ji(a),this.dmp1=this.d.Be(u),this.dmq1=this.d.Be(s),this.coeff=this.q.ji(this.p);break}}},W.prototype.decrypt=function(n){var t=O(n,16),e=this.Yi(t);return null==e?null:function(n,t){for(var e=n.Ti(),i=0;i<e.length&&0==e[i];)++i;if(e.length-i!=t-1||2!=e[i])return null;for(++i;0!=e[i];)if(++i>=e.length)return null;for(var r="";++i<e.length;){var o=255&e[i];o<128?r+=String.fromCharCode(o):191<o&&o<224?(r+=String.fromCharCode((31&o)<<6|63&e[i+1]),++i):(r+=String.fromCharCode((15&o)<<12|(63&e[i+1])<<6|63&e[i+2]),i+=2)}return r}(e,this.n.ii()+7>>3)};var V="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",x="=";function U(n){var t,e,i="";for(t=0;t+3<=n.length;t+=3)e=parseInt(n.substring(t,t+3),16),i+=V.charAt(e>>6)+V.charAt(63&e);for(t+1==n.length?(e=parseInt(n.substring(t,t+1),16),i+=V.charAt(e<<2)):t+2==n.length&&(e=parseInt(n.substring(t,t+2),16),i+=V.charAt(e>>2)+V.charAt((3&e)<<4));0<(3&i.length);)i+=x;return i}function B(n){var t,e,i="",r=0;for(t=0;t<n.length&&n.charAt(t)!=x;++t){var o=V.indexOf(n.charAt(t));o<0||(0==r?(i+=a(o>>2),e=3&o,r=1):1==r?(i+=a(e<<2|o>>4),e=15&o,r=2):2==r?(i+=a(e),i+=a(o>>2),e=3&o,r=3):(i+=a(e<<2|o>>4),i+=a(15&o),r=0))}return 1==r&&(i+=a(e<<2)),i}W.prototype.Xi=function(n){n=this.Zi(n);var t=this.$i(),e=0,i=null,r=null,o=0;for(var u in t)t.hasOwnProperty(u)&&((i=t[u]).hasOwnProperty("offset")&&(e+=2*i.offset),o="string"==typeof i.length?this[i.length]:i.length,o*=2,r=n.substr(e,o),i.hasOwnProperty("type")&&("int"==i.type?r=parseInt(r,16):"bigint"==i.type&&(r=O(r,16))),e+=o,this[u]=r)},W.prototype.nr=function(n){var t="";n=r(n);for(var e=0;e<n.length;++e){var i=n.charCodeAt(e).toString(16);1===i.length&&(i="0"+i),t+=i}return t},W.prototype.Zi=function(n){var t=(n=n.replace(/^\s+|\s+$/g,"")).split(/\r?\n/);return"-----BEGIN"==t[0].substring(0,10)&&(t=t.slice(1,t.length-1)),n=t.join(""),this.nr(n)},W.prototype.tr=function(){var n="",t=this.$i(),e=null,i=null,r=0;for(var o in t)t.hasOwnProperty(o)&&(e=t[o]).er&&((i=this[o].toString(16)).length%2&&(i="0"+i),e.hasOwnProperty("padded")&&e.ir&&(i="00"+i),(r=(r=i.length/2).toString(16)).length%2&&(r="0"+r),e.hasOwnProperty("extraspace")&&(n+=r),n+=r,n+=i,n+="02");return n.slice(0,-2)},W.prototype.rr=function(n,t){if(!n)return n;var e="(.{1,"+(t=t||64)+"})( +|$\n?)|(.{1,"+t+"})";return n.match(new RegExp(e,"g")).join("\n")},W.prototype.or=function(){var n="-----BEGIN RSA PRIVATE KEY-----\n",t="3082025e02010002";return t+=this.tr(),n+=this.rr(U(t))+"\n",n+="-----END RSA PRIVATE KEY-----"},W.prototype.ur=function(){var n="-----BEGIN PUBLIC KEY-----\n",t="30819f300d06092a864886f70d010101050003818d0030818902";return t+=this.tr(),n+=this.rr(U(t))+"\n",n+="-----END PUBLIC KEY-----"};var F=function(n){W.call(this),n&&this.Xi(n)};((F.prototype=new W).constructor=F).prototype.$i=function(){return{header:{length:4},versionlength:{length:1,offset:1,type:"int"},version:{length:"versionlength",type:"int"},n_length:{length:1,offset:2,type:"int"},n:{length:"n_length",type:"bigint",er:!0,ir:!0,sr:!0},e_length:{length:1,offset:1,type:"int"},e:{length:"e_length",type:"int",er:!0},d_length:{length:1,offset:2,type:"int"},d:{length:"d_length",type:"bigint",er:!0,ir:!0,sr:!0},p_length:{length:1,offset:1,type:"int"},p:{length:"p_length",type:"bigint",er:!0,ir:!0},q_length:{length:1,offset:1,type:"int"},q:{length:"q_length",type:"bigint",er:!0,ir:!0},dmp1_length:{length:1,offset:1,type:"int"},dmp1:{length:"dmp1_length",type:"bigint",er:!0},dmq1_length:{length:1,offset:1,type:"int"},dmq1:{length:"dmq1_length",type:"bigint",er:!0,ir:!0},coeff_length:{length:1,offset:1,type:"int"},coeff:{length:"coeff_length",type:"bigint",er:!0,ir:!0}}};var j=function(n){W.call(this),n&&("string"==typeof n?this.Xi(n):n.hasOwnProperty("n")&&n.hasOwnProperty("e")&&(this.n=n.n,this.e=n.e))};((j.prototype=new W).constructor=j).prototype.$i=function(){return{header:{length:25},n_length:{length:1,offset:2,type:"int"},n:{length:"n_length",type:"bigint",er:!0,ir:!0,sr:!0},e_length:{length:1,offset:1,type:"int"},e:{length:"e_length",type:"int",er:!0}}};var G=function(){this.ar=null,this.cr=null};return G.prototype.lr=function(n){this.ar=new F(n),this.cr=new j(this.ar)},G.prototype.pr=function(n){this.cr=new j(n)},G.prototype.decrypt=function(n){return!!this.ar&&this.ar.decrypt(B(n))},G.prototype.encrypt=function(n){var t=this.cr||this.ar;return!!t&&U(t.encrypt(n))},G.prototype.or=function(){return this.ar||(this.ar=new F,this.ar.Qi(1024,"010001"),this.cr=new j(this.ar)),this.ar.or()},G.prototype.ur=function(){return this.cr||(this.cr=new j,this.cr.Qi(1024,"010001")),this.cr.ur()},function(n){var t=new G;return t.pr(K.Xt),t.encrypt(n)}}(),t.exports=i.encrypt},{17:17}],26:[function(n,t,e){var i=i||{},r="undefined";i.vr=function(n,t){return t=t||!1,n?"0"!=n:t},i.U=function(n,t){return null==n||isNaN(n)?t||0:parseInt(n)},i.o=function(n,t){var e=Number(n);return null==n||isNaN(e)?t||0:e},i.toString=function(n){if(typeof n==r)return r;if("string"==typeof n)return n;if(n instanceof Array)return n.join(",");var t="";for(var e in n)n.hasOwnProperty(e)&&(t+=e+":"+n[e]+";");return t||n.toString()},t.exports.vr=i.vr,t.exports.U=i.U,t.exports.o=i.o,t.exports.toString=i.toString},{}],27:[function(n,t,e){var s=n(19),i="undefined",a=typeof encodeURIComponent!==i?encodeURIComponent:escape,u=typeof decodeURIComponent!==i?decodeURIComponent:unescape,f="cs_dir_",c="cs_file_",l=typeof localStorage!==i?localStorage:null,p={},v="|",d=l&&a&&u;var o={dir:function(n){if(!d)return null;var t=f+n,e=p[t];if(e)return e.slice();var i=l.getItem(t);if(i){e=[];for(var r=0,o=(i=i.split(v)).length;r<o;r++)0<i[r].length&&e.push(u(i[r]));return(p[t]=e).slice()}return null},append:function(n,t,e){if(d){var i=o.read(n,t);i?i+=e:i=e,o.write(n,t,i)}},write:function(n,t,e){if(d){var i,r=o.dir(n);r||(i=f+n,"function"==typeof l.setItem?l.setItem(i,""):l[i]="",p[i]=[],r=[]),-1==s.indexOf(t,r)&&function(n,t){var e=f+n;try{"function"==typeof l.setItem?l.setItem(e,l.getItem(e)+v+a(t)):l[e]=l.getItem(e)+v+a(t)}catch(n){}p[e].push(t)}(n,t),function(n,t,e){try{"function"==typeof l.setItem?l.setItem(c+n+t,e):l[c+n+t]=e}catch(n){}}(n,t,e)}},deleteFile:function(n,t){if(!d)return!1;var e=o.dir(n);return!!e&&(-1!=s.indexOf(t,e)&&(function(n,t){var e=f+n,i=p[e];i.splice(s.indexOf(t,i),1);for(var r=[],o=0,u=i.length;o<u;o++)r.push(a(i[o]));try{"function"==typeof l.setItem?l.setItem(e,r.join(v)):l[e]=r.join(v),"function"==typeof l.removeItem?l.removeItem(c+n+t):delete l[c+n+t]}catch(n){}}(n,t),!0))},read:function(n,t){if(!d)return null;var e=o.dir(n);return e?-1==s.indexOf(t,e)?null:function(n,t){try{return"function"==typeof l.getItem?l.getItem(c+n+t):l[c+n+t]}catch(n){}}(n,t):null}};t.exports=o},{19:19}],28:[function(n,t,e){var u,r,o=n(19),i="undefined",s=null,a=null,f="cs_dir_",c="|",l={},p=!1;function v(){s=typeof FileSystem!=i?new FileSystem:null,a=typeof curWidget!=i?curWidget.id:null,typeof sf!==i&&(r=u=function(n,t){sf.core.localData(n,t)}),null==s||typeof s.isValidCommonPath==i||s.isValidCommonPath(a)||s.createCommonDir(a),p=!0}function d(n){return n.replace(/^\s+|\s+$/g,"")}function h(n,t){var e=l[n];e?e.push(t):e=l[n]=[t],r(f+n,e.join(c))}function _(n,t){var e=l[n],i=o.indexOf(t,e);0<=i&&(e.splice(i,1),r(f+n,0===e.length?null:e.join(c)))}var g={dir:function(n){if(p||v(),s.isValidCommonPath(a+"/"+n)){var t=l[n];if(!t){if(!(t=u(f+n)))return null;t=l[n]=t.split(c)}for(var e=t.slice(),i=0,r=e.length;i<r;i++){var o=t[i];s.isValidCommonPath(a+"/"+n+"/"+o)||_(n,o)}return e}return null},append:function(n,t,e){p||v();var i=a+"/"+n;s.isValidCommonPath(i)||s.createCommonDir(i),s.isValidCommonPath(i+"/"+t)||h(n,t);var r=s.openCommonFile(i+"/"+t,"a");r.writeLine(d(e)),s.closeCommonFile(r)},write:function(n,t,e){p||v();var i=a+"/"+n;s.isValidCommonPath(i)||s.createCommonDir(i),s.isValidCommonPath(i+"/"+t)||h(n,t);var r=s.openCommonFile(i+"/"+t,"w");r.writeLine(d(e)),s.closeCommonFile(r)},deleteFile:function(n,t){p||v();var e=a+"/"+n;return!!s.isValidCommonPath(e)&&(_(n,t),s.deleteCommonFile(e+"/"+t))},read:function(n,t){p||v();var e=a+"/"+n;if(!s.isValidCommonPath(e))return null;var i=s.openCommonFile(e+"/"+t,"r");if(i){for(var r,o=[];r=i.readLine();)o.push(r);return s.closeCommonFile(i),o.join("\n")}return _(n,t),""}};t.exports=g},{19:19}],29:[function(n,t,e){t.exports={dir:function(){return null},append:function(n,t,e){},write:function(n,t,e){},deleteFile:function(){return!1},read:function(){return null}}},{}],30:[function(n,t,e){var i=n(21),r=n(17),o=n(49).dr,u=n(49).hr(),s=n(45),a=n(29),f="undefined",c=r.D,l=r.Qt,p=null,v=null,d=null;function h(){null==p&&(typeof atv!=f&&typeof atv.device!=f&&atv.device.idForVendor?(p=i.pe(atv.device.idForVendor,""),v="62"):(p=+new Date+~~(1e3*Math.random()),v="72"),d=null)}var _={PLATFORM:"atv",httpGet:o,httpPost:u,Storage:s,IO:a,getCrossPublisherId:function(){return h(),d},getAppName:function(){return c},getAppVersion:function(){return c},getVisitorId:function(){return h(),p},getVisitorIdSuffix:function(){return v},getDeviceModel:function(){return"Apple TV"},getPlatformVersion:function(){return typeof atv!=f&&typeof atv.device!=f&&i.pe(atv.device.softwareVersion,c)},getPlatformName:function(){return"js"},getRuntimeName:function(){return"atv"},getRuntimeVersion:function(){return typeof atv!=f&&typeof atv.device!=f&&i.pe(atv.device.softwareVersion,c)},getDisplayResolution:function(){return typeof atv.device!=f&&typeof atv.device.screenFrame!=f&&typeof atv.device.screenFrame.height!=f&&typeof atv.device.screenFrame.width!=f?atv.device.screenFrame.height+"x"+atv.device.screenFrame.width:l},getLanguage:function(){return typeof atv!=f&&typeof atv.device!=f&&i.pe(atv.device.language,"")},getPackageName:function(){return""},isConnectionAvailable:function(){return!0},setTimeout:function(n,t){return typeof atv!=f&&typeof atv.setTimeout!=f&&atv.setTimeout(n,t)},setInterval:function(n,t){return typeof atv!=f&&typeof atv.setInterval!=f&&atv.setInterval(n,t)},clearTimeout:function(n){return typeof atv!=f&&typeof atv.clearTimeout!=f&&atv.clearTimeout(n)},clearInterval:function(n){return typeof atv!=f&&typeof atv.clearInterval!=f&&atv.clearInterval(n)},isCompatible:function(){return typeof window==f&&typeof atv!=f},isConnectionSecure:function(){return typeof document!=f&&null!=document&&"s"===document.location.href.charAt(4)}};t.exports=_},{17:17,21:21,29:29,45:45,49:49}],31:[function(n,t,e){var i=n(21),r=n(20),o=n(17),u=n(50),s=n(48)._r,a=n(46),f=n(27),c="undefined",l=o.D,p=o.Qt;var v={PLATFORM:"chromecast",httpGet:u,httpPost:s,Storage:a,IO:f,getCrossPublisherId:function(){return null},getAppName:function(){return typeof ns_.crm===c?l:ns_.crm.getApplicationData().name},getAppVersion:function(){return l},getVisitorId:function(){return+new Date+~~(1e3*Math.random())},getVisitorIdSuffix:function(){return"72"},getDeviceModel:function(){return"chromecast"},getPlatformVersion:function(){return cast.receiver.VERSION+"-"+i.pe(r.ue()+" "+r.se(),l)},getPlatformName:function(){return"js"},getRuntimeName:function(){return"html"},getRuntimeVersion:function(){return"5"},getDisplayResolution:function(){var n=typeof window!=c&&i.tn(window.screen)&&i.tn(window.screen.availWidth)?window.screen.availWidth:0,t=typeof window!=c&&i.tn(window.screen)&&i.tn(window.screen.availHeight)?window.screen.availHeight:0;return 0<n&&0<t?n+"x"+t:p},getLanguage:function(){return typeof window!=c&&i.tn(window.navigator)&&i.pe(window.navigator.language,"")||l},getPackageName:function(){return l},isConnectionAvailable:function(){return!0},isCompatible:function(){return typeof window!==c&&!i.jt(window.cast)&&!i.jt(cast.receiver)},isConnectionSecure:function(){return typeof document!=c&&null!=document&&"s"===document.location.href.charAt(4)}};t.exports=v},{17:17,20:20,21:21,27:27,46:46,48:48,50:50}],32:[function(n,t,e){t.exports={SmartTV:0,Netcast:1,Cordova:2,Trilithium:3,AppleTV:4,Chromecast:5,Xbox:6,webOS:7,tvOS:8,nodejs:9,html5:10,JSMAF:11,Skeleton:12}},{}],33:[function(n,t,e){var i=n(21),r=n(17),o=n(50),u=n(48).gr,s=n(48)._r,a=n(46),f=n(27),c="undefined",l=r.D,p=r.Qt,v=null,d=null,h=null;function _(){return typeof device!=c&&typeof device.available!=c&&device.available&&typeof window!=c&&typeof window.navigator!=c}function g(){if(null==v){var n=_()&&typeof device!=c&&i.tn(device.uuid)&&0<device.uuid.length?device.uuid:null;null!=n?(d="31",h=v=n):(v=+new Date+~~(1e3*Math.random()),d="72",h=null)}}var m={PLATFORM:"cordova",httpGet:function(){return typeof Image!=c?o.apply(this,arguments):u.apply(this,arguments)},httpPost:s,Storage:a,IO:f,getCrossPublisherId:function(){return g(),h},getAppName:function(){return l},getAppVersion:function(){return l},getVisitorId:function(){return g(),v},getVisitorIdSuffix:function(){return d},getDeviceModel:function(){return typeof device!=c&&i.tn(device.model)||l},getPlatformVersion:function(){return typeof device!=c&&i.tn(device.cordova)&&device.cordova||l},getPlatformName:function(){return"js"},getRuntimeName:function(){return typeof device!=c&&i.tn(device.platform)&&"cordova"+device.platform||"cordova"},getRuntimeVersion:function(){return typeof device!=c&&i.tn(device.version)||l},getDisplayResolution:function(){var n=typeof window!=c&&i.tn(window.screen)&&i.tn(window.screen.availWidth)&&window.screen.availWidth||0,t=typeof window!=c&&i.tn(window.screen)&&i.tn(window.screen.availHeight)&&window.screen.availHeight||0;return 0<n&&0<t?n+"x"+t:p},getLanguage:function(){return typeof window!=c&&i.tn(window.navigator)&&i.tn(window.navigator.language)&&window.navigator.language||l},getPackageName:function(){return""},isConnectionAvailable:function(){return typeof window==c||(!i.tn(window.navigator)||!i.tn(window.navigator.onLine)||window.navigator.onLine)},isCompatible:_,isConnectionSecure:function(){return typeof document!=c&&null!=document&&"s"===document.location.href.charAt(4)}};t.exports=m},{17:17,21:21,27:27,46:46,48:48,50:50}],34:[function(n,t,e){var i=n(21),r=n(20),o=n(17),u=n(50),s=n(48).gr,a=n(48)._r,f=n(46),c=n(27),l="undefined",p=typeof document!=l&&document||void 0,v=o.D,d=o.Qt,h={PLATFORM:"html5",httpGet:function(){return typeof Image!=l?u.apply(this,arguments):s.apply(this,arguments)},httpPost:a,Storage:f,IO:c,getCrossPublisherId:function(){return null},getAppName:function(){return p&&i.tn(p.title)&&p.title||v},getAppVersion:function(){return v},getVisitorId:function(){return this.getDeviceModel()+ +new Date+~~(1e3*Math.random())},getVisitorIdSuffix:function(){return"72"},getDeviceModel:function(){return typeof window!=l&&i.tn(window.navigator)&&i.pe(window.navigator.platform,"")||""},getPlatformVersion:function(){return i.pe(r.ue()+" "+r.se(),"")},getPlatformName:function(){return"js"},getRuntimeName:function(){return"html"},getRuntimeVersion:function(){return"5"},getDisplayResolution:function(){var n,t;typeof window!=l&&window.screen&&window.screen.width&&(n=window.screen.width),typeof window!=l&&window.screen&&window.screen.width&&(t=window.screen.height);var e=1;return typeof window!=l&&window.devicePixelRatio&&(e=window.devicePixelRatio),0<n&&0<t?(n*=e)+"x"+(t*=e):d},getApplicationResolution:function(){var n,t;typeof window!=l&&window.innerWidth&&(n=window.innerWidth),typeof window!=l&&window.innerHeight&&(t=window.innerHeight);var e=1;return typeof window!=l&&window.devicePixelRatio&&(e=window.devicePixelRatio),0<n&&0<t?(n*=e)+"x"+(t*=e):d},getLanguage:function(){return typeof window!=l&&i.tn(window.navigator)&&i.pe(window.navigator.language,"")||v},getPackageName:function(){return""},isConnectionAvailable:function(){return typeof window==l||(!i.tn(window.navigator)||!i.tn(window.navigator.onLine)||window.navigator.onLine)},isCompatible:function(){return typeof window!==l&&i.tn(window.navigator)&&i.tn(window.localStorage)&&i.tn(p)&&!!p.createElement("canvas").getContext},isConnectionSecure:function(){return!!p&&"s"===p.location.href.charAt(4)}};t.exports=h},{17:17,20:20,21:21,27:27,46:46,48:48,50:50}],35:[function(n,t,e){var i=n(21),r=n(17),o=n(48).gr,u=n(48)._r,s=n(46),a=n(27),f="undefined",c=r.D,l=r.Qt,p=null,v=null,d=null;function h(){if(null==p)if(typeof jsmaf!=f&&i.tn(jsmaf.hardwareId)){var n=jsmaf.hardwareId;v="31",d=p=n}else p=+new Date+~~(1e3*Math.random()),v="72",d=null}function _(){return typeof jsmaf==f||!i.tn(jsmaf.networkStatus)||"connected"==jsmaf.networkStatus}var g={PLATFORM:"jsmaf",httpGet:o,httpPost:u,Storage:s,IO:a,getCrossPublisherId:function(){return h(),d},getAppName:function(){return c},getAppVersion:function(){return c},getVisitorId:function(){return h(),p},getVisitorIdSuffix:function(){return h(),v},getDeviceModel:function(){return typeof jsmaf!=f&&i.tn(jsmaf.platform)?jsmaf.platform:c},getPlatformName:function(){return"js"},getPlatformVersion:function(){return c},getRuntimeName:function(){return"jsmaf"},getRuntimeVersion:function(){return typeof jsmaf!=f&&i.tn(jsmaf.version)?jsmaf.version:c},getDisplayResolution:function(){return typeof jsmaf!=f&&i.tn(jsmaf.screenWidth)&&i.tn(jsmaf.screenHeight)?jsmaf.screenWidth+"x"+jsmaf.screenHeight:l},getLanguage:function(){return typeof jsmaf!=f&&i.tn(jsmaf.locale)?jsmaf.locale:c},getPackageName:function(){return null},isConnectionAvailable:_,isCompatible:function(){return typeof jsmaf!=f},setTimeout:function(n,t){return jsmaf.setTimeout(n,t)},setInterval:function(n,t){return jsmaf.setInterval(n,t)},clearTimeout:function(n){return jsmaf.clearTimeout(n)},clearInterval:function(n){return jsmaf.clearInterval(n)},getDeviceArchitecture:function(){if(typeof jsmaf==f||!i.tn(jsmaf.platform))var n=c;return"ps3"==jsmaf.platform?n="cell":"ps4"==jsmaf.platform?n="ps4":"vita"==jsmaf.platform&&(n="vita"),n},getConnectionType:function(){return _()&&typeof jsmaf!=f&&i.tn(jsmaf.connectionType)?"wired"==jsmaf.connectionType?"eth":"wireless"==jsmaf.connectionType?"wifi":"phone"==jsmaf.connectionType?"wwan":c:c},getDeviceJailBrokenFlag:function(){return c},isConnectionSecure:function(){return typeof document!=f&&null!=document&&"s"===document.location.href.charAt(4)}};t.exports=g},{17:17,21:21,27:27,46:46,48:48}],36:[function(n,t,e){var i=n(50),r=n(52).mr,o=n(46),u=n(29),s=n(17),a=s.D,f=s.Qt,c={PLATFORM:"generic",httpGet:i,httpPost:r,Storage:o,IO:u,onDataFetch:function(n){n()},getCrossPublisherId:function(){return null},getAppName:function(){return a},getAppVersion:function(){return a},getVisitorId:function(){return+new Date+~~(1e3*Math.random())},getVisitorIdSuffix:function(){return"72"},getDeviceModel:function(){return a},getPlatformVersion:function(){return a},getPlatformName:function(){return"js"},getRuntimeName:function(){return a},getRuntimeVersion:function(){return a},getDisplayResolution:function(){return f},getApplicationResolution:function(){return f},getLanguage:function(){return a},getPackageName:function(){return null},isConnectionAvailable:function(){return!0},isCompatible:function(){return!0},autoSelect:function(){},autoDetect:function(){},setPlatformAPI:function(){},isCrossPublisherIdChanged:function(){return!1},setTimeout:function(n,t){return setTimeout(n,t)},setInterval:function(n,t){return setInterval(n,t)},clearTimeout:function(n){return clearTimeout(n)},clearInterval:function(n){return clearInterval(n)},getDeviceArchitecture:function(){return a},getConnectionType:function(){return a},getDeviceJailBrokenFlag:function(){return a},isConnectionSecure:function(){return!1},processMeasurementLabels:function(){}};t.exports=c},{17:17,29:29,46:46,50:50,52:52}],37:[function(n,t,e){var i=n(21),r=n(17),o=n(50),u=n(48).gr,s=n(52).mr,a=n(46),f=n(29),c="undefined",l=r.D,p=r.Qt,v=null,d=null,h=null;function _(){if(null==v){var n=function(){if(typeof ns_!=c&&i.tn(ns_.netcastDevice)){if(i.tn(ns_.netcastDevice.net_macAddress)&&i.lt(ns_.netcastDevice.net_macAddress))return ns_.netcastDevice.net_macAddress;if(i.tn(ns_.netcastDevice.serialNumber)&&i.lt(ns_.netcastDevice.serialNumber))return ns_.netcastDevice.serialNumber}return null}();null!=n?(d="31",h=v=n):(v=+new Date+~~(1e3*Math.random()),d="72",h=null)}}var g={PLATFORM:"netcast",httpGet:function(){return typeof Image!=c?o.apply(this,arguments):u.apply(this,arguments)},httpPost:s,Storage:a,IO:f,getCrossPublisherId:function(){return _(),h},getAppName:function(){return l},getAppVersion:function(){return l},getVisitorId:function(){return _(),v},getVisitorIdSuffix:function(){return d},getDeviceModel:function(){return typeof ns_!=c&&i.tn(ns_.netcastDevice)&&i.tn(ns_.netcastDevice.modelName)&&ns_.netcastDevice.modelName||l},getPlatformVersion:function(){return typeof ns_!=c&&i.tn(ns_.netcastDevice)&&i.pe(ns_.netcastDevice.version,l)||l},getPlatformName:function(){return"js"},getRuntimeName:function(){return typeof ns_!=c&&i.tn(ns_.netcastDevice)?"lg-ott"+i.pe(ns_.netcastDevice.platform,l):l},getRuntimeVersion:function(){if(typeof ns_!=c&&i.tn(ns_.netcastDevice)){if(i.tn(ns_.netcastDevice.version))return ns_.netcastDevice.version;if(i.tn(ns_.netcastDevice.hwVersion))return ns_.netcastDevice.hwVersion;if(i.tn(ns_.netcastDevice.swVersion))return ns_.netcastDevice.swVersion}return l},getDisplayResolution:function(){if(typeof ns_!=c&&i.tn(ns_.netcastDevice)&&i.tn(ns_.netcastDevice.osdResolution))switch(ns_.netcastDevice.osdResolution){case 0:return"640x480";case 1:return"720x576";case 2:return"1280x720";case 3:return"1920x1080";case 4:return"1366x768"}return p},getLanguage:function(){return typeof ns_!=c&&i.tn(ns_.netcastDevice)&&i.pe(ns_.netcastDevice.tvLanguage2,i.pe(window.navigator.language))||l},getPackageName:function(){return null},isConnectionAvailable:function(){return typeof ns_.netcastDevice===c||!!ns_.netcastDevice.net_isConnected},getConnectionType:function(){if(typeof ns_.netcastDevice!==c){if(0===ns_.netcastDevice.networkType)return"eth";if(1===ns_.netcastDevice.networkType)return"wifi"}return l},isCompatible:function(){return typeof ns_!=c&&typeof ns_.netcastDevice!=c&&typeof ns_.netcastDevice.version!=c&&typeof window!=c&&typeof window.navigator!=c},isConnectionSecure:function(){return typeof document!=c&&null!=document&&"s"===document.location.href.charAt(4)}};t.exports=g},{17:17,21:21,29:29,46:46,48:48,50:50,52:52}],38:[function(d,h,_){(function(n){var t=d(21),e=d(17),i=d(52).mr,r=d(46),o=d(29),u="undefined",s=e.D,a=e.Qt,f=null,c=null,l=null;function p(){null==f&&(f=+new Date+~~(1e3*Math.random()),c="72",l=null)}var v={PLATFORM:"nodejs",httpGet:function(n,t){new function(e){var i=this,r=0;i.send=function(n){d("http").get(n,function(n){var t=n.statusCode;if((302==t||301==t)&&r<20&&n.headers&&n.headers.location)return r++,void i.send(n.headers.location);e(t)}).on("error",function(){e()})}}(t).send(n)},httpPost:i,Storage:r,IO:o,getCrossPublisherId:function(){return p(),l},getVisitorId:function(){return p(),f},getVisitorIdSuffix:function(){return c},getPlatformVersion:function(){var n=d("os");return[n.type(),n.platform(),n.release()].join(";")},getPlatformName:function(){return"js"},getRuntimeName:function(){return"nodejs"},getRuntimeVersion:function(){return typeof process===u||t.jt(process.version)?s:process.version},getDisplayResolution:function(){return a},isCompatible:function(){return typeof window===u&&typeof h!==u&&typeof _!==u&&typeof n!==u&&typeof process!==u&&t.tn(process.version)},isConnectionSecure:function(){return!1}};h.exports=v}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{17:17,21:21,29:29,46:46,52:52,undefined:void 0}],39:[function(n,t,e){var i=n(24),r=n(32),o=n(36),u=n(40),s=n(37),a=n(43),f=n(33),c=n(41),l=n(30),p=n(44),v=n(31),d=n(42),h=n(35),_=n(38),g=n(34),m=!1;o.autoDetect=function(){m||(m=!0,u.isCompatible()?i.extend(o,u):s.isCompatible()?i.extend(o,s):a.isCompatible()?i.extend(o,a):f.isCompatible()?i.extend(o,f):c.isCompatible()?i.extend(o,c):l.isCompatible()?i.extend(o,l):p.isCompatible()?i.extend(o,p):v.isCompatible()?i.extend(o,v):d.isCompatible()?i.extend(o,d):h.isCompatible()?i.extend(o,h):_.isCompatible()?i.extend(o,_):g.isCompatible()&&i.extend(o,g))},o.autoSelect=o.autoDetect,o.setPlatformAPI=function(n){switch(m=!0,n){case r.SmartTV:i.extend(o,u);break;case r.Netcast:i.extend(o,s);break;case r.Cordova:i.extend(o,f);break;case r.Trilithium:i.extend(o,c);break;case r.AppleTV:i.extend(o,l);break;case r.Chromecast:i.extend(o,v);break;case r.Xbox:i.extend(o,p);break;case r.webOS:i.extend(o,a);break;case r.tvOS:i.extend(o,d);break;case r.JSMAF:i.extend(o,h);break;case r.nodejs:i.extend(o,_);break;case r.html5:i.extend(o,g);break;case r.Skeleton:break;default:m=!1}}},{24:24,30:30,31:31,32:32,33:33,34:34,35:35,36:36,37:37,38:38,40:40,41:41,42:42,43:43,44:44}],40:[function(n,t,e){var i=n(21),r=n(17),o=n(48).gr,u=n(52).mr,s=n(47),a=n(28),f="undefined",c=r.D,l=r.Qt,p=null,v=null,d=null;function h(){if(null==p){var n=function(){if("object"!=typeof sf||"object"!=typeof sf.core||"function"!=typeof sf.core.sefplugin)return null;var n=sf.core.sefplugin("NNAVI");if("function"!=typeof n.Open||"function"!=typeof n.Execute)return null;n.Open("Network","1.001","Network");var t=n.Execute("GetMAC","0");if(!i.jt(t))return t;if(t=n.Execute("GetMAC","1"),!i.jt(t))return t;var e=n.Execute("GetDeviceID");return i.jt(e)?null:e}();null!=n?(v="31",d=p=n):(p=+new Date+~~(1e3*Math.random()),v="72",d=null)}}var _={PLATFORM:"smarttv",httpGet:o,httpPost:u,Storage:s,IO:a,getCrossPublisherId:function(){return h(),d},getAppName:function(){return c},getAppVersion:function(){return typeof sf!=f&&i.tn(sf.env)&&i.tn(sf.env.getAppVersion)&&sf.env.getAppVersion()||c},getVisitorId:function(){return h(),p},getVisitorIdSuffix:function(){return v},getDeviceModel:function(){return typeof sf!=f&&i.tn(sf.core)&&i.tn(sf.core.getEnvValue)&&sf.core.getEnvValue("modelid")||c},getPlatformVersion:function(){return"2.0.0"},getPlatformName:function(){return"js"},getRuntimeName:function(){if(typeof sf!==f&&i.tn(sf.env)&&i.tn(sf.env.getProductType)&&i.tn(sf.env.PRODUCTTYPE_TV)&&i.tn(sf.env.PRODUCTTYPE_MONITOR)&&i.tn(sf.env.PRODUCTTYPE_BD)){var n=[];return n[sf.env.PRODUCTTYPE_TV]="samsung-smarttv-tv",n[sf.env.PRODUCTTYPE_MONITOR]="samsung-smarttv-monitor",n[sf.env.PRODUCTTYPE_BD]="samsung-smarttv-bd",n[sf.env.getProductType()]}},getRuntimeVersion:function(){return typeof sf!=f&&i.tn(sf.env)&&i.tn(sf.env.getFirmwareVer)&&sf.env.getFirmwareVer().version},getDisplayResolution:function(){if(typeof sf===f||!i.tn(sf.env)||!i.tn(sf.env.getScreenSize))return l;var n=sf.env.getScreenSize();return n.width+"x"+n.height},getLanguage:function(){if(typeof sf!==f&&i.tn(sf.env)&&i.tn(sf.env.getLanguageCode))return sf.env.getLanguageCode()},getPackageName:function(){return null},isConnectionAvailable:function(){return!0},isCompatible:function(){return typeof window!=f&&typeof window.navigator!=f&&typeof sf!=f&&typeof sf.env!=f},getConnectionType:function(){if("object"!=typeof sf||"object"!=typeof sf.core||"function"!=typeof sf.core.sefplugin)return c;var n=sf.core.sefplugin("NETWORK");if("function"!=typeof n.Open||"function"!=typeof n.Execute)return c;n.Open("Network","1.001","Network");var t=n.Execute("GetActiveType");return 0===t?"wired":1===t?"wireless":c},isConnectionSecure:function(){return typeof document!=f&&null!=document&&"s"===document.location.href.charAt(4)}};t.exports=_},{17:17,21:21,28:28,47:47,48:48,52:52}],41:[function(n,t,e){var i=n(21),r=n(17),o=n(51),u=n(52),s=n(46),a=n(29),f="undefined",c=r.D,l=r.Qt,p=null,v=null,d=null;function h(){if(null==p){var n=i.lt(engine.stats.device.id)?engine.stats.device.id:i.lt(engine.stats.network.mac)?engine.stats.network.mac:null;null!=n?(v="31",d=p=n):(p=+new Date+~~(1e3*Math.random()),v="72",d=null)}}var _={PLATFORM:"trilithium",httpGet:o,httpPost:u,Storage:s,IO:a,getCrossPublisherId:function(){return h(),d},getAppName:function(){return i.lt(engine.stats.application.name)?engine.stats.application.name:c},getAppVersion:function(){return i.lt(engine.stats.application.version)?engine.stats.application.version:c},getVisitorId:function(){return h(),p},getVisitorIdSuffix:function(){return v},getDeviceModel:function(){return i.pe(engine.stats.device.platform,c)},getPlatformVersion:function(){return""},getPlatformName:function(){return"js"},getRuntimeName:function(){return"trilithium"},getRuntimeVersion:function(){return i.pe(engine.stats.device.version,c)},getDisplayResolution:function(){return typeof screen!=f&&typeof screen.height!=f&&typeof screen.width!=f?screen.height+"x"+screen.width:l},getLanguage:function(){return c},getPackageName:function(){return null},isConnectionAvailable:function(){return!0},isCompatible:function(){return typeof engine!=f&&typeof engine.stats!=f},isConnectionSecure:function(){return typeof document!=f&&null!=document&&"s"===document.location.href.charAt(4)}};t.exports=_},{17:17,21:21,29:29,46:46,51:51,52:52}],42:[function(n,t,e){var i=n(21),r=n(17),o=n(48).gr,u=n(48)._r,s=n(46),a=n(27),f="undefined",c=r.D,l=r.Qt,p=null,v=null,d=null;function h(){null==p&&(i.jt(Device.vendorIdentifier)?(p=+new Date+~~(1e3*Math.random()),v="72"):(p=Device.vendorIdentifier,v="62"),d=p)}var _={PLATFORM:"tvos",httpGet:o,httpPost:u,Storage:s,IO:a,getCrossPublisherId:function(){return h(),d},getAppName:function(){return Device.appIdentifier},getAppVersion:function(){return Device.appVersion},getVisitorId:function(){return h(),p},getVisitorIdSuffix:function(){return v},getDeviceModel:function(){return Device.productType},getPlatformVersion:function(){return Device.systemVersion},getPlatformName:function(){return"js"},getRuntimeName:function(){return"tvos"},getRuntimeVersion:function(){return Device.systemVersion},getDisplayResolution:function(){return l},getLanguage:function(){return Settings.language},getPackageName:function(){return c},isConnectionAvailable:function(){return!0},isCompatible:function(){return typeof window===f&&typeof Device!==f&&"Apple TV"===Device.model},isConnectionSecure:function(){return!0}};t.exports=_},{17:17,21:21,27:27,46:46,48:48}],43:[function(n,t,e){var s,a,f,i=n(21),r=n(17),o=n(50),u=n(48)._r,c=n(46),l=n(27),p="undefined",v=r.D,d=r.Qt;var h={PLATFORM:"webos",httpGet:o,httpPost:u,Storage:c,IO:l,onDataFetch:function(n,t){var e,i,r,o=3,u=function(){0==--o&&n()};e=u,webOS.service.request("luna://com.webos.service.tv.systemproperty",{method:"getSystemInfo",parameters:{keys:["modelName","firmwareVersion","UHD","sdkVersion"]},onSuccess:function(n){n.returnValue&&(s=n),e()},onFailure:function(){e()}}),i=u,webOS.service.request("luna://com.webos.settingsservice",{method:"getSystemSettings",parameters:{category:"option"},onSuccess:function(n){n.returnValue&&(a=n),i()},onFailure:function(){i()}}),r=u,webOS.service.request("luna://com.webos.service.connectionmanager",{method:"getStatus",onSuccess:function(n){n.returnValue&&(f=n),r()},onFailure:function(){r()}})},getCrossPublisherId:function(){return typeof webOS!==p&&webOS.device&&webOS.device.serialNumber&&"Unknown"!=webOS.device.serialNumber?webOS.device.serialNumber:null},getAppName:function(){return v},getAppVersion:function(){return v},getVisitorId:function(){return+new Date+~~(1e3*Math.random())},getVisitorIdSuffix:function(){return"72"},getDeviceModel:function(){return s&&s.modelName?s.modelName:v},getPlatformVersion:function(){return s&&s.sdkVersion?s.sdkVersion:v},getPlatformName:function(){return"js"},getRuntimeName:function(){return"webOS"},getRuntimeVersion:function(){return typeof webOS!==p&&webOS.device?webOS.device.platformVersion:v},getDisplayResolution:function(){var n=0;typeof webOS!==p&&webOS.device?n=webOS.device.screenWidth:typeof window!=p&&window.screen&&(n=window.screen.availWidth);var t=0;return typeof webOS!==p&&typeof webOS.device!==p?t=webOS.device.screenHeight:typeof window!=p&&window.screen&&(t=window.screen.availHeight),0<n&&0<t?n+"x"+t:d},getLanguage:function(){return a&&a.locales&&(a.locales.UI||a.locales.TV)||v},getPackageName:function(){return v},isConnectionAvailable:function(){return!f||!f.isInternetConnectionAvailable||f.isInternetConnectionAvailable},isCompatible:function(){return typeof window!==p&&!i.jt(window.webOS)&&!i.jt(webOS.service)&&!i.jt(webOS.service.request)},getConnectionType:function(){if(f&&(f.wired||f.wifi)){if("connected"===f.wired.state&&"yes"===f.wired.onInternet)return"eth";if("connected"===f.wifi.state&&"yes"===f.wifi.onInternet)return"wifi"}return v},isConnectionSecure:function(){return typeof document!=p&&null!=document&&"s"===document.location.href.charAt(4)}};t.exports=h},{17:17,21:21,27:27,46:46,48:48,50:50}],44:[function(n,t,e){var i=n(17),r=n(53).wr,o=n(53).yr,u=n(46),s=n(27),a="undefined",f=i.D,c=i.Qt,l=null,p=null,v=null,d=!1,h=!1,_=!1;function g(){typeof Windows!=a&&Windows&&Windows.Xbox&&Windows.Xbox.ApplicationModel&&Windows.Xbox.ApplicationModel.Core&&Windows.Xbox.ApplicationModel.Core.CoreApplicationContext&&Windows.Xbox.ApplicationModel.Core.CoreApplicationContext.addEventListener("currentuserchanged",function(){h=!0}),m(),_=!0}function m(){var n=null;if(typeof Windows!=a&&Windows&&Windows.Xbox&&Windows.Xbox.ApplicationModel&&Windows.Xbox.ApplicationModel.Core&&Windows.Xbox.ApplicationModel.Core.CoreApplicationContext&&Windows.Xbox.ApplicationModel.Core.CoreApplicationContext.currentUser){var t=Windows.Xbox.ApplicationModel.Core.CoreApplicationContext.currentUser;null!=t&&!t.br&&t.Ir&&(n=Windows.Xbox.ApplicationModel.Core.CoreApplicationContext.currentUser.xboxUserId)}v=n}var w={PLATFORM:"xbox",httpGet:r,httpPost:o,Storage:u,IO:s,getCrossPublisherId:function(){return _||g(),h&&m(),v},getAppName:function(){var n=f;return typeof Windows!=a&&Windows&&Windows.ApplicationModel&&Windows.ApplicationModel.Package&&Windows.ApplicationModel.Package.current&&Windows.ApplicationModel.Package.current.id&&Windows.ApplicationModel.Package.current.id.name&&(n=Windows.ApplicationModel.Package.current.id.name),n},getAppVersion:function(){var n=f;if(typeof Windows!=a&&Windows&&Windows.ApplicationModel&&Windows.ApplicationModel.Package&&Windows.ApplicationModel.Package.current&&Windows.ApplicationModel.Package.current.id&&Windows.ApplicationModel.Package.current.id.version){var t=Windows.ApplicationModel.Package.current.id.version;n=t.major+"."+t.minor+"."+t.build+"."+t.revision}return n},getVisitorId:function(){return d||function(){l=typeof Windows!=a&&Windows&&Windows.Xbox&&Windows.Xbox.System&&Windows.Xbox.System.Console&&Windows.Xbox.System.Console.applicationSpecificDeviceId?Windows.Xbox.System.Console.applicationSpecificDeviceId:this.getDeviceModel()+ +new Date+~~(1e3*Math.random()),p="72",d=!0}(),l},getVisitorIdSuffix:function(){return p},getDeviceModel:function(){return"xbox one"},getPlatformVersion:function(){var t=f;return typeof navigator!=a&&navigator&&navigator.userAgent&&navigator.userAgent.split(";").filter(function(n){return-1!=n.indexOf("Windows NT")}).forEach(function(n){t=n.substr(n.indexOf("Windows NT")+11,n.length-1)}),t},getPlatformName:function(){return"xbox"},getRuntimeName:function(){return"winjs"},getRuntimeVersion:function(){var t=f;return typeof Windows!=a&&Windows&&Windows.ApplicationModel&&Windows.ApplicationModel.Package&&Windows.ApplicationModel.Package.current&&Windows.ApplicationModel.Package.current.dependencies&&Windows.ApplicationModel.Package.current.dependencies.filter(function(n){return n&&n.id&&n.id.name&&-1!=n.id.name.indexOf("WinJS")&&n.id.version}).forEach(function(n){t=n.id.version.major+"."+n.id.version.minor+"."+n.id.version.build+"."+n.id.version.revision}),t},getDisplayResolution:function(){var n=c;if(typeof Windows!=a&&Windows&&Windows.Xbox&&Windows.Xbox.Graphics&&Windows.Xbox.Graphics.Display&&Windows.Xbox.Graphics.Display.DisplayConfiguration&&Windows.Xbox.Graphics.Display.DisplayConfiguration.getForCurrentView&&Windows.Xbox.Graphics.Display.DisplayConfiguration.getForCurrentView()&&Windows.Xbox.Graphics.Display.DisplayConfiguration.getForCurrentView().currentDisplayMode&&Windows.Xbox.Graphics.Display.DisplayConfiguration.getForCurrentView().currentDisplayMode.rawWidth&&Windows.Xbox.Graphics.Display.DisplayConfiguration.getForCurrentView().currentDisplayMode.rawHeight){var t=Windows.Xbox.Graphics.Display.DisplayConfiguration.getForCurrentView().currentDisplayMode;n=t.rawWidth+"x"+t.rawHeight}return n},getApplicationResolution:function(){var n=c;return typeof window!=a&&window.innerWidth&&window.innerHeight&&(n=window.innerWidth+"x"+window.innerHeight),n},getLanguage:function(){var n=f;return typeof Windows!=a&&Windows&&Windows.System&&Windows.System.UserProfile&&Windows.System.UserProfile.GlobalizationPreferences&&Windows.System.UserProfile.GlobalizationPreferences.languages&&(n=Windows.System.UserProfile.GlobalizationPreferences.languages.getAt(0)),n},getPackageName:function(){var n=f;return typeof Windows!=a&&Windows&&Windows.ApplicationModel&&Windows.ApplicationModel.Package&&Windows.ApplicationModel.Package.current&&Windows.ApplicationModel.Package.current.id&&Windows.ApplicationModel.Package.current.id.name&&(n=Windows.ApplicationModel.Package.current.id.name),n},isConnectionAvailable:function(){return!(typeof Windows!=a&&Windows&&Windows.Networking&&Windows.Networking.Connectivity&&Windows.Networking.Connectivity.NetworkInformation&&Windows.Networking.Connectivity.NetworkInformation.getInternetConnectionProfile&&Windows.Networking.Connectivity.NetworkInformation.getInternetConnectionProfile()&&Windows.Networking.Connectivity.NetworkInformation.getInternetConnectionProfile().getNetworkConnectivityLevel&&Windows.Networking.Connectivity.NetworkInformation.getInternetConnectionProfile().getNetworkConnectivityLevel())||4==Windows.Networking.Connectivity.NetworkInformation.getInternetConnectionProfile().getNetworkConnectivityLevel()},isCompatible:function(){return typeof WinJS!=a&&WinJS&&typeof Windows!=a&&Windows&&Windows.Xbox},setPlatformAPI:function(){},isCrossPublisherIdChanged:function(){return _||g(),h},getDeviceArchitecture:function(){var n="unknown";if(typeof Windows!=a&&Windows&&Windows.ApplicationModel&&Windows.ApplicationModel.Package&&Windows.ApplicationModel.Package.current&&Windows.ApplicationModel.Package.current.id&&Windows.ApplicationModel.Package.current.id.architecture)switch(Windows.ApplicationModel.Package.current.id.architecture){case 5:n="arm";break;case 11:n="neutral";break;case 9:n="x64";break;case 0:n="x86"}return n},getConnectionType:function(){var n=f;if(typeof Windows!=a&&Windows&&Windows.Networking&&Windows.Networking.Connectivity&&Windows.Networking.Connectivity.NetworkInformation&&Windows.Networking.Connectivity.NetworkInformation.getInternetConnectionProfile&&Windows.Networking.Connectivity.NetworkInformation.getInternetConnectionProfile()&&Windows.Networking.Connectivity.NetworkInformation.getInternetConnectionProfile().networkAdapter&&Windows.Networking.Connectivity.NetworkInformation.getInternetConnectionProfile().networkAdapter.ianaInterfaceType)switch(Windows.Networking.Connectivity.NetworkInformation.getInternetConnectionProfile().networkAdapter.ianaInterfaceType){case 6:n="eth";break;case 71:n="wifi"}return n},getDeviceJailBrokenFlag:function(){return f},isConnectionSecure:function(){return typeof document!=a&&null!=document&&"s"===document.location.href.charAt(4)}};t.exports=w},{17:17,27:27,46:46,53:53}],45:[function(n,t,e){var i=n(24),r="undefined",o="cs_";t.exports=function(){var e=typeof atv!=r&&typeof atv.localStorage!=r&&atv.localStorage||null;i.extend(this,{get:function(n){return e&&n&&e.getItem(o+n)||null},set:function(n,t){e&&n&&(e[o+n]=t)},has:function(n){return e&&n&&null!=e.getItem(o+n)||!1},remove:function(n){e&&n&&e.removeItem(o+n)},clear:function(){}})}},{24:24}],46:[function(n,t,e){var i=n(24),r="cs_";t.exports=function(){var e="undefined"!=typeof localStorage?localStorage:null;i.extend(this,{get:function(n){try{return e&&"function"==typeof e.getItem?e.getItem(r+n):e?e[r+n]:e}catch(n){}},set:function(n,t){try{e&&"function"==typeof e.setItem?e.setItem(r+n,t):e&&(e[r+n]=t)}catch(n){}},has:function(n){try{return e&&"function"==typeof e.getItem?e.getItem(r+n):e?e[r+n]:e}catch(n){}},remove:function(n){try{e&&"function"==typeof e.removeItem?e.removeItem(r+n):e&&delete e[r+n]}catch(n){}},clear:function(){try{for(var n=0;e&&n<e.length;++n){var t=e.key(n);t.substr(0,r.length)===r&&("function"==typeof e.removeItem?e.removeItem(t):delete e[t])}}catch(n){}}})}},{24:24}],47:[function(n,t,e){var i,r,o=n(24),u="cs_";"undefined"!=typeof sf?r=i=function(n,t){sf.core.localData(n,t)}:(r=function(n,t){$.sf.setData(n,void 0===t?null:t)},i=function(n){return $.sf.getData(n)});t.exports=function(){o.extend(this,{get:function(n){return i(u+n)},set:function(n,t){r(u+n,t)},has:function(n){return void 0!==i(u+n)},remove:function(n){r(u+n,null)}})}},{24:24}],48:[function(n,t,e){var r="undefined";e.gr=function(n,t){if(typeof XMLHttpRequest!=r){var e=new XMLHttpRequest;e.open("GET",n,!0),e.onreadystatechange=function(){4===e.readyState&&(t&&t(e.status),e=null)},e.send()}else"function"==typeof setTimeout?t&&setTimeout(t,0):t&&t()},e._r=function(n,t,e){if(typeof XMLHttpRequest!=r){var i=new XMLHttpRequest;i.open("POST",n,!0),i.onreadystatechange=function(){4===i.readyState&&(e&&e(i.status),i=null)},i.send(t)}else"function"==typeof setTimeout?e&&setTimeout(e,0):e&&e()}},{}],49:[function(n,t,e){var r="undefined";e.dr=function(n,t){if(typeof atv!=r&&typeof XMLHttpRequest!=r){var e=new XMLHttpRequest;e.open("GET",n,!0),e.onreadystatechange=function(){4==e.readyState&&(t&&t(e.status),e=null)},e.send()}else typeof atv!=r&&"function"==typeof atv.setTimeout?t&&atv.setTimeout(t,0):t&&t()},e.hr=function(n,t,e){if(typeof atv!=r&&typeof XMLHttpRequest!=r){var i=new XMLHttpRequest;i.open("POST",n,!0),i.onreadystatechange=function(){4===i.readyState&&(e&&e(i.status),i=null)},i.send(t)}else typeof atv!=r&&"function"==typeof atv.setTimeout?e&&atv.setTimeout(e,0):e&&e()}},{}],50:[function(n,t,e){t.exports=function(n,t){if("undefined"!=typeof Image){var e=new Image;e.onload=function(){t&&t(200),e=null},e.onerror=function(){t&&t(),e=null},e.src=n}else"function"==typeof setTimeout?t&&setTimeout(t,0):t&&t()}},{}],51:[function(n,t,e){t.exports=function(n,t){"undefined"!=typeof engine?(engine.createHttpClient().createRequest("GET",n,null).start(),t&&setTimeout(t,0)):"function"==typeof setTimeout?t&&setTimeout(t,0):t&&t()}},{}],52:[function(n,t,e){t.exports.Sr=function(n,t){"function"==typeof setTimeout?t&&setTimeout(function(){t(200)},0):t&&t(200)},t.exports.mr=function(n,t,e){"function"==typeof setTimeout?e&&setTimeout(function(){e(200)},0):e&&e(200)}},{}],53:[function(n,t,e){var i="undefined";e.wr=function(n,t){typeof WinJS!=i&&typeof WinJS.xhr!=i?WinJS.xhr({url:n}).then(function(n){t&&t(n.status)},function(){t&&t()}):"function"==typeof setTimeout?t&&setTimeout(t,0):t&&t()},e.yr=function(n,t,e){typeof WinJS!=i&&typeof WinJS.xhr!=i?WinJS.xhr({type:"post",url:n,data:t,headers:{"Content-type":"application/xml"}}).then(function(n){e&&e(n.status)},function(){e&&e()}):"function"==typeof setTimeout?e&&setTimeout(e,0):e&&e()}},{}],54:[function(n,t,e){var on=n(24),un=n(17),sn=n(21),an=n(68),fn=n(23),cn=500,ln=100;function i(){var t,e,I,S,i,r,o,u,P,A,C,k,s,a,E,T,f,N,L,c,D,R,M,O,W,V,x,U,B,F,j,l,G,K,n,q,p,v,d,H,h,_,g,Y,m,w,J,y,z,Q,X,Z,$,nn,b,tn,en=this,rn=cn;on.extend(en,{Pr:function(){return t},Ar:function(n){t=n},setPlaybackIntervalMergeTolerance:function(n){rn=n},getPlaybackIntervalMergeTolerance:function(){return rn},Cr:function(n,t){S[n]=t},kr:function(n){return S[n]},Er:function(n){return null!=S[n]},setLabels:function(n){n&&on.extend(i,n)},getLabels:function(){return i},setLabel:function(n,t){i[n]=t},getLabel:function(n){return i[n]},dt:function(n){return n in i},Tr:function(){return parseInt(en.kr("ns_st_cn"))},Nr:function(n){en.Cr("ns_st_cn",n+"")},Lr:function(){return en.dt("ns_st_pn")?parseInt(en.getLabel("ns_st_pn")):parseInt(en.kr("ns_st_pn"))},Dr:function(n,t,e){var i=n,r=parseInt(i.ns_st_po),o=sn.jt(i.ns_st_ap)?D:parseInt(i.ns_st_ap);e&&tn<0&&0<k-r?(i.ns_st_ap=o+k-r,i.ns_st_dap=o+k-r-R):e&&0<tn&&0<r-k?(i.ns_st_ap=o+r-k,i.ns_st_dap=o+r-k-R):(i.ns_st_ap=o,i.ns_st_dap=o-R);var u=sn.jt(i.ns_st_pt)?en.Rr():parseInt(i.ns_st_pt);i.ns_st_pt=u+(isNaN(P)?0:t-P)+"",i.ns_st_dpt=u+(isNaN(P)?0:t-P)-A+"",i.ns_st_ipt=u+(isNaN(P)?0:t-P)-C+"";var s=sn.jt(i.ns_st_et)?en.Mr():parseInt(i.ns_st_et);i.ns_st_et=s+(isNaN(E)?0:t-E)+"",i.ns_st_det=s+(isNaN(E)?0:t-E)-T+"";var a=sn.jt(i.ns_st_bt)?en.Or():parseInt(i.ns_st_bt);i.ns_st_bt=a+"",i.ns_st_dbt=a+(isNaN(G)?0:t-G)-K+"";var f=M,c=O;e&&(f=an.Wr(fn(M),tn<0?r:W,tn<0?W:r,rn),c=an.Wr(fn(O),tn<0?r:W,tn<0?W:r,rn));for(var l,p=0,v=0,d=0;d<f.length;d++)p+=l=Math.abs(f[d].end-f[d].start),v<l&&(v=l);var h=0,_=0;for(d=0;d<c.length;d++)h+=l=Math.abs(c[d].end-c[d].start),_<l&&(_=l);i.ns_st_upc=p+"",i.ns_st_dupc=p-V+"",i.ns_st_iupc=p-x+"",i.ns_st_iupc=x<p?p-x+"":"0",i.ns_st_lpc=v+"",i.ns_st_dlpc=v-U+"",i.ns_st_upa=h+"",i.ns_st_dupa=h-B+"",i.ns_st_iupa=F<h?h-F+"":"0",i.ns_st_lpa=_+"",i.ns_st_dlpa=_-j+"";var g=sn.jt(i.ns_st_pc)?en.Vr():parseInt(i.ns_st_pc);i.ns_st_pc=g+"",i.ns_st_dpc=g-J+"";var m=sn.jt(i.ns_st_skc)?en.xr():parseInt(i.ns_st_skc);i.ns_st_skc=m+"",i.ns_st_dskc=m-z+"";var w=sn.jt(i.ns_st_bc)?en.Ur():parseInt(i.ns_st_bc);i.ns_st_bc=w+"",i.ns_st_dbc=w-q+"";var y=sn.jt(i.ns_st_skt)?en.Br():parseInt(i.ns_st_skt);i.ns_st_skt=y+"",i.ns_st_dskt=y-H+"";var b=sn.jt(i.ns_st_ska)?en.Fr():parseInt(i.ns_st_ska);i.ns_st_ska=b+"",i.ns_st_dska=b-Y+"",I&&(i.ns_st_spc=Q+"",i.ns_st_apc=X+"",i.ns_st_sq=Z+"",i.ns_st_asq=$+""),i.ns_st_sc=I||0!=nn?nn+"":"1",i.ns_st_rt=tn+"",i.ns_st_ldw=N,i.ns_st_ldo=L,on.extend(i,S)},jr:function(n){A=parseInt(n.ns_st_pt),R=parseInt(n.ns_st_ap),T=parseInt(n.ns_st_et),K=parseInt(n.ns_st_bt),V=parseInt(n.ns_st_upc),U=parseInt(n.ns_st_lpc),B=parseInt(n.ns_st_upa),j=parseInt(n.ns_st_lpa),J=parseInt(n.ns_st_pc),z=parseInt(n.ns_st_skc),q=parseInt(n.ns_st_bc),H=parseInt(n.ns_st_skt),Y=parseInt(n.ns_st_ska),en.Gr(0)},Kr:function(n){C=parseInt(n.ns_st_pt),x=parseInt(n.ns_st_upc),F=parseInt(n.ns_st_upa)},qr:function(){return en.kr("ns_st_vt")},Hr:function(n){en.Cr("ns_st_vt",n+"")},Yr:function(){return en.kr("ns_st_at")},Jr:function(n){en.Cr("ns_st_at",n+"")},zr:function(){return en.kr("ns_st_tt")},Qr:function(n){en.Cr("ns_st_tt",n+"")},Xr:function(){return en.kr("ns_st_cdn")},Zr:function(n){en.Cr("ns_st_cdn",n+"")},$r:function(){return M},no:function(n){M=n},to:function(){return O},eo:function(){w++},io:function(){y++},ro:function(){Z++},oo:function(){return Z},Or:function(){return l},uo:function(n){l=n},so:function(n){if(!isNaN(G)){var t=en.Or();t+=n-G,en.uo(t),G=NaN}},ao:function(n){W=parseInt(n)},fo:function(){return W},co:function(n){isNaN(W)||isNaN(n)||(M=an.Wr(M,tn<0?n:W,tn<0?W:n,rn),O=an.Wr(O,tn<0?n:W,tn<0?W:n,rn),W=NaN)},Mr:function(){return a},lo:function(n){a=n},po:function(n){if(!isNaN(E)){var t=en.Mr();t+=n-E,en.lo(t),E=NaN}},vo:function(){return E},do:function(n){E=n},ho:function(n){isNaN(P)||(u+=n-P,P=NaN)},Rr:function(){return u},_o:function(n){var t=k+c-L;return!o&&isNaN(P)||(t+=Math.floor((n-s)*tn/100)),t},mo:function(n,t){return o?k-n+Math.floor((t-s)*tn/100)+c:0},wo:function(n,t){k=n,s=t},yo:function(){return P},bo:function(n){P=n},Io:function(n){A=n},So:function(){return G},Po:function(n){G=n},Vr:function(){return w},Ao:function(n){w=n},xr:function(){return y},Co:function(n){y=n},ko:function(n){p=n},Eo:function(){return p},To:function(n){_=n},No:function(){return _},Lo:function(n){e=n},Do:function(){return e},Ro:function(n){I=n},Mo:function(){return I},Oo:function(n){v=n},Wo:function(){return v},Vo:function(n){if(!isNaN(v)){var t=en.Br();t+=n-v,en.xo(t),v=NaN}},Br:function(){return d},xo:function(n){d=n},Uo:function(n){m=n},Bo:function(){return m},Fo:function(n){h=n},jo:function(){return h},Go:function(n){g=n},Fr:function(){return g},Ko:function(n){var t,e=en.Fr();e+=Math.abs(n-h),en.Go(e),h==n?t=0:n<h?t=-1:h<n&&(t=1),en.Gr(t),h=0},qo:function(){return parseInt(en.kr("ns_st_skd"))},Gr:function(n){en.Cr("ns_st_skd",n+"")},Ho:function(){O=[],z=y=Y=g=H=d=T=a=j=F=B=Z=J=w=q=n=K=l=C=A=u=R=D=0},Yo:function(){Q++},Jo:function(){nn++},zo:function(){X++},Qo:function(){return V},Xo:function(n){V=n},Zo:function(){return x},$o:function(n){x=n},nu:function(n){U=n},tu:function(){return U},eu:function(){O=[],j=F=B=0},iu:function(n){Q=n},ru:function(n){nn=n},ou:function(n){X=n},uu:function(n){f=n},su:function(){return Q},au:function(){return nn},fu:function(){return X},cu:function(){return f},Ur:function(){return n},lu:function(){n++},pu:function(){return K},vu:function(n){$=n},du:function(){$++},hu:function(){return $},_u:function(){return b},gu:function(n){b=n},mu:function(n){r=!!n},wu:function(){return r},yu:function(){return tn},bu:function(n){tn=n},Iu:function(n){tn<0&&0<k-n?D+=k-n:0<tn&&0<n-k&&(D+=n-k)},Su:function(n){N=n},Pu:function(){return N},Au:function(n){L=n},Cu:function(){return L},ku:function(n){c=n},Eu:function(n){o=n}}),(S={}).ns_st_cl="0",S.ns_st_pn="1",S.ns_st_tp="0",S.ns_st_cn="1",S.ns_st_skd="0",S.ns_st_ci="0",S.c3="*null",S.c4="*null",S.c6="*null",S.ns_st_st="*null",S.ns_st_pu="*null",S.ns_st_pr="*null",S.ns_st_ep="*null",S.ns_st_sn="*null",S.ns_st_en="*null",S.ns_st_ct="*null",e=I=!(i={}),t=un.D,o=!(r=!0),M=[],v=G=W=E=P=NaN,nn=$=Z=X=Q=z=y=J=w=Y=g=H=d=m=h=q=n=K=l=j=F=B=U=x=V=R=D=c=L=N=C=T=f=a=A=k=u=0,b=_=p=!(O=[]),tn=ln}i.Tu=function(n,t,e){for(var i=n.getLabels(),r={},o=0;e&&o<e.length;++o)i.hasOwnProperty(e[o])&&(r[e[o]]=i[e[o]]);t.setLabels(r),t.setPlaybackIntervalMergeTolerance(n.getPlaybackIntervalMergeTolerance())},t.exports=i},{17:17,21:21,23:23,24:24,68:68}],55:[function(n,t,e){t.exports={PAGE_NAME_LABEL:"name",HASH_LABELS:["ns_st_st","ns_st_ci","ns_st_pr","ns_st_sn","ns_st_en","ns_st_ep","ns_st_ty","ns_st_ct","ns_st_li","ns_st_ad","ns_st_bn","ns_st_tb","ns_st_an","ns_st_ta","ns_st_pu","c3","c4","c6"]}},{}],56:[function(n,t,e){var f=n(73),p=n(74),v=n(76),d=n(77),h=n(69),g=n(71),m=n(72),w=n(70),y=n(75),Q=n(78),X=n(79),Z=n(80),$=n(81),nn=n(55),tn=n(68),en=n(65),rn=n(20),on=n(24),un=n(19),sn=n(82),an=n(62),fn=n(63),cn=n(58).Nu,ln=n(58).Lu,pn=n(58).Du,vn=n(61),dn=n(60),hn=n(59),_n=n(18),gn=n(66),mn=n(17),wn=n(2),yn="undefined",bn="6.2.3.180328",In="5.10",Sn="STA",Pn="js_api",An=500,Cn=500;t.exports=function(b){var I,S,P,A,C,k,E,T,N,L,D,R,M,O,t,e,W,V,i,r,o,x,U,s,c,B,F,j=this,n={},u=An,a=Cn,_={},l=!1,G=!0,K=!1,q=!1;function H(n){var t=I.Mu().Ru();if(t==cn.IDLE||t==cn.PLAYBACK_NOT_STARTED||t==cn.BUFFERING_BEFORE_PLAYBACK||t==cn.SEEKING_BEFORE_PLAYBACK){if(n==ln.PLAY)return!0}else if(t==cn.PLAYING){if(n==ln.END||n==ln.AD_SKIP||n==ln.SEEK_START||n==ln.PAUSE)return!0}else if(t==cn.PAUSED||t==cn.BUFFERING_DURING_PAUSE||t==cn.SEEKING_DURING_PLAYBACK||t==cn.SEEKING_DURING_BUFFERING||t==cn.SEEKING_DURING_PAUSE){if(n==ln.END||n==ln.AD_SKIP||n==ln.PLAY)return!0}else if(t==cn.BUFFERING_DURING_PLAYBACK){if(n==ln.PAUSE_ON_BUFFERING||n==ln.END||n==ln.AD_SKIP||n==ln.SEEK_START||n==ln.PAUSE||n==ln.PLAY)return!0}else if(t==cn.BUFFERING_DURING_SEEKING){if(n==ln.END||n==ln.AD_SKIP||n==ln.PAUSE||n==ln.PLAY)return!0}else if(t==cn.PAUSED_DURING_BUFFERING&&(n==ln.END||n==ln.AD_SKIP||n==ln.BUFFER_STOP||n==ln.PLAY))return!0;return!1}function Y(){K||(K=!0,sn.Ou(J))}function J(n){F=n,q=!0}function z(){var n={},t=tn.Wu(n);j.Vu(ln.END,t,n)}on.extend(j,{getConfiguration:function(){return b||{}},Dr:function(n,t,e){var i=I.getPlaybackSession(),r=i.getAsset(),o=!1;if(n==ln.HEARTBEAT){var u=isNaN(V)?W:V;((V=e)<u||q)&&(q=!(o=!0),e<u?(i.xu("1"),I.Uu().$t("System clock jump detected","to the far past")):F?(i.xu("3"),I.Uu().$t("System clock jump detected","to the future")):(i.xu("2"),I.Uu().$t("System clock jump detected","to the near past")),e=u)}var s={};if(l&&(s.c2=c),typeof document!=yn){var a=document;s.c7=a.URL,s.c8=a.title,s.c9=a.referrer}s.ns_ts=+new Date+"",s.ns_st_ev=ln.toString(n),s.ns_st_mp=Pn,s.ns_st_mv=bn,s.ns_st_ub="0",s.ns_st_br="0",s.ns_st_pn="1",s.ns_st_tp="0",s.ns_st_it=pn.toString(pn.Bu),s.ns_st_sv=bn,s.ns_st_smv=In,s.ns_type="hidden",s.ns_st_ec=I.ju().Fu()+"",s.ns_st_ki=I.S().Gu()+"",t.ns_st_po?s.ns_st_po=t.ns_st_po+"":r.wu()?s.ns_st_po=r._o(e)+"":s.ns_st_po=B+"",B=parseInt(s.ns_st_po),i.Dr(s,e),i.getAsset().Dr(s,e,n==ln.HEARTBEAT);var f={};return on.extend(f,_),on.extend(f,i.getLabels()),on.extend(f,i.getAsset().getLabels()),on.extend(f,t),o&&(r.wo(B,V),i.bo(V-parseInt(s.ns_st_dpt)),r.bo(V-parseInt(s.ns_st_dpt)),r.do(V-parseInt(s.ns_st_det))),{Wt:n,Ut:s,Ku:f}},Vu:function(n,t,e,i){j.qu();var r=I.Mu().Ru(),o=I.Mu().Hu(n);if(null!=o&&o!=r)if(!j.isThrottlingEnabled()||r!=cn.PLAYING&&r!=cn.PAUSED||o!=cn.PLAYING&&o!=cn.PAUSED||i){var u,s;b.systemClockJumpDetection&&(o==cn.IDLE?(sn.Yu(J),K=!1):r==cn.IDLE&&Y()),G&&tn.Ju(r)&&!tn.Ju(o)?an.zu(z):G&&!tn.Ju(r)&&tn.Ju(o)&&an.Qu(z);var a=I.getPlaybackSession(),f=a.getAsset(),c=isNaN(V)?W:V,l=!1;((V=t)<c||q)&&(q=!(l=!0),t<c?(a.xu("1"),I.Uu().$t("System clock jump detected","to the far past")):F?(a.xu("3"),I.Uu().$t("System clock jump detected","to the future")):(a.xu("2"),I.Uu().$t("System clock jump detected","to the near past")),t=c),e.ns_st_po?I.Mu().Ru()==cn.IDLE?f.Au(f.Pu()-parseInt(e.ns_st_po)):f.Au(f.mo(parseInt(e.ns_st_po),t)):f.wu()?I.Mu().Ru()==cn.IDLE?e.ns_st_po=f.Pu()-f.Cu()+"":e.ns_st_po=f._o(t)+"":e.ns_st_po=B+"";var p,v,d,h,_=parseInt(e.ns_st_po);B=_,p=n,v=t,d=e,h=I.Mu().Ru(),p==ln.AD_SKIP&&!d.hasOwnProperty("ns_st_ui")&&H(p)?d.ns_st_ui="skip":p==ln.SEEK_START&&!d.hasOwnProperty("ns_st_ui")&&H(p)&&(d.ns_st_ui="seek"),h==cn.IDLE?p==ln.BUFFER?S.Xu(v,d):p==ln.SEEK_START?S.Zu(v,d):p==ln.PLAY&&S.$u(v,d):h==cn.PLAYBACK_NOT_STARTED?p==ln.END||p==ln.AD_SKIP?A.ns(v,d):p==ln.SEEK_START?A.Zu(v,d):p==ln.PLAY?A.$u(v,d):p==ln.BUFFER&&A.Xu(v,d):h==cn.PLAYING?p==ln.END||p==ln.AD_SKIP?C.ns(v,d):p==ln.BUFFER?C.Xu(v,d):p==ln.SEEK_START?C.Zu(v,d):p==ln.PAUSE&&C.ts(v,d):h==cn.PAUSED?p==ln.END||p==ln.AD_SKIP?P.ns(v,d):p==ln.PLAY?P.$u(v,d):p==ln.BUFFER?O.es(v,d):p==ln.SEEK_START&&O.rs(v,d):h==cn.BUFFERING_BEFORE_PLAYBACK?p==ln.END||p==ln.AD_SKIP?k.ns(v,d):p==ln.BUFFER_STOP?k.os(v,d):p==ln.SEEK_START?k.Zu(v,d):p==ln.PAUSE?k.ts(v,d):p==ln.PLAY&&k.$u(v,d):h==cn.BUFFERING_DURING_PLAYBACK?p==ln.PAUSE_ON_BUFFERING?E.us(v,d):p==ln.BUFFER_STOP?O.ss(v,d):p==ln.END||p==ln.AD_SKIP?E.ns(v,d):p==ln.SEEK_START?E.Zu(v,d):p==ln.PAUSE?E.ts(v,d):p==ln.PLAY&&O.ss(v,d):h==cn.BUFFERING_DURING_SEEKING?p==ln.END||p==ln.AD_SKIP?T.ns(v,d):p==ln.PAUSE?T.ts(v,d):p==ln.PLAY?T.$u(v,d):p==ln.BUFFER_STOP&&O.as(v,d):h==cn.BUFFERING_DURING_PAUSE?p==ln.END||p==ln.AD_SKIP?N.fs(v,d):p==ln.PAUSE?N.ts(v,d):p==ln.PLAY?N.$u(v,d):p==ln.SEEK_START?O.rs(v,d):p==ln.BUFFER_STOP&&O.as(v,d):h==cn.SEEKING_BEFORE_PLAYBACK?p==ln.END||p==ln.AD_SKIP?D.ns(v,d):p==ln.PAUSE?D.ts(v,d):p==ln.PLAY?D.$u(v,d):p==ln.BUFFER&&O.es(v,d):h==cn.SEEKING_DURING_PLAYBACK?p==ln.END||p==ln.AD_SKIP?M.ns(v,d):p==ln.PLAY?M.$u(v,d):p==ln.BUFFER?O.es(v,d):p==ln.PAUSE&&O.cs(v,d):h==cn.SEEKING_DURING_BUFFERING?p==ln.PAUSE?R.ts(v,d):p==ln.BUFFER?O.es(v,d):p==ln.PLAY?O.ls(v,d):p==ln.END||p==ln.AD_SKIP?O.ps(v,d):p==ln.BUFFER_STOP&&O.vs(v,d):h==cn.PAUSED_DURING_BUFFERING?p==ln.END||p==ln.AD_SKIP?L.ns(v,d):p==ln.BUFFER_STOP?L.ds(v,d):p==ln.SEEK_START?L.Zu(v,d):p==ln.PAUSE?L.ts(v,d):p==ln.PLAY&&L.ds(v,d):h==cn.SEEKING_DURING_PAUSE&&(p==ln.BUFFER?O.es(v,d):p==ln.PLAY?O.ls(v,d):p==ln.PAUSE?O.cs(v,d):p==ln.END||p==ln.AD_SKIP?O.ps(v,d):p==ln.BUFFER_STOP&&O.vs(v,d)),H(p)&&I.getPlaybackSession().hs(!0),f.wo(_,t),f.ku(f.Cu());var g=0;isNaN(I.Mu()._s())||(g=t-I.Mu()._s()),I.Mu().Vu(n,t),l&&(f.wo(_,V),o!=cn.IDLE&&o!=cn.PLAYBACK_NOT_STARTED&&o!=cn.SEEKING_BEFORE_PLAYBACK&&o!=cn.BUFFERING_BEFORE_PLAYBACK&&f.do(V),o!=cn.BUFFERING_BEFORE_PLAYBACK&&o!=cn.BUFFERING_DURING_PAUSE&&o!=cn.BUFFERING_DURING_PLAYBACK&&o!=cn.BUFFERING_DURING_SEEKING&&o!=cn.PAUSED_DURING_BUFFERING||(a.Po(V),f.Po(V)),o==cn.PLAYING&&(a.bo(V),f.bo(V)),o!=cn.SEEKING_BEFORE_PLAYBACK&&o!=cn.SEEKING_DURING_BUFFERING&&o!=cn.SEEKING_DURING_PAUSE&&o!=cn.SEEKING_DURING_PLAYBACK&&o!=cn.BUFFERING_DURING_SEEKING||f.Oo(V)),I.Uu().log("Transition from",tn.gs(r),"to",tn.gs(o),"due to event:",ln.toString(n));for(var m=0,w=U.length;m<w;m++)U[m](r,o,e,g)}else{I.Uu().$t("Throttled event:",ln.toString(n),"during state",tn.gs(r),e,j.getThrottlingDelay(),"ms");var y=(u=n,s=e,function(){j.Vu(u,t,s,!0)});x=j.getPlatformAPI().setTimeout(y,j.getThrottlingDelay())}else I.Uu().$t("Ignored event:",ln.toString(n),"during state",tn.gs(r),e)},ms:function(n,t,e){var i=I.Mu().Ru();if(n!=ln.LOAD&&n!=ln.ENGAGE||i==cn.IDLE){n==ln.ERROR&&null==e.ns_st_er&&(e.ns_st_er=mn.D),n==ln.TRANSFER&&null==e.ns_st_rp&&(e.ns_st_rp=mn.D);var r,o,u,s,a=!0,f=!1;switch(n){case ln.BIT_RATE:r="ns_st_br",o="ns_st_pbr";break;case ln.PLAYBACK_RATE:r="ns_st_rt",o="ns_st_prt";break;case ln.VOLUME:r="ns_st_vo",o="ns_st_pvo";break;case ln.WINDOW_STATE:r="ns_st_ws",o="ns_st_pws";break;case ln.AUDIO:r="ns_st_at",o="ns_st_pat";break;case ln.VIDEO:r="ns_st_vt",o="ns_st_pvt";break;case ln.SUBS:r="ns_st_tt",o="ns_st_ptt";break;case ln.CDN:r="ns_st_cdn",o="ns_st_pcdn";break;default:a=!1}var c=I.getPlaybackSession(),l=c.getAsset();if(a&&r in e)switch(s=e[r],n){case ln.BIT_RATE:case ln.VOLUME:case ln.WINDOW_STATE:r in _&&(u=_[r],f=s==(e[o]=u)+""),_[r]=e[r];break;case ln.AUDIO:case ln.VIDEO:case ln.SUBS:case ln.CDN:l.Er(r)&&(u=l.kr(r),f=s==(e[o]=u)+""),l.Cr(r,e[r]);break;case ln.PLAYBACK_RATE:u=l.yu(),e[o]=u+""}if(a&&i!=cn.PLAYING&&i!=cn.BUFFERING_DURING_PLAYBACK||a&&f)return n==ln.PLAYBACK_RATE&&l.bu(parseInt(e.ns_st_rt)),void I.Uu().$t("No measurement send for the pseudo-event:",ln.toString(n),"during state",tn.gs(i),e);var p=isNaN(V)?W:V,v=!1;((V=t)<p||q)&&(q=!(v=!0),t<p?(c.xu("1"),I.Uu().$t("System clock jump detected","to the far past")):F?(c.xu("3"),I.Uu().$t("System clock jump detected","to the future")):(c.xu("2"),I.Uu().$t("System clock jump detected","to the near past")),t=p),e.ns_st_po?l.Au(l.mo(parseInt(e.ns_st_po),t)):l.wu()?e.ns_st_po=l._o(t)+"":e.ns_st_po=B+"";var d=parseInt(e.ns_st_po);B=d,I.getPlaybackSession().getAsset().wo(d,t),l.ku(l.Cu()),i!=cn.IDLE&&i!=cn.PLAYBACK_NOT_STARTED&&i!=cn.SEEKING_BEFORE_PLAYBACK&&i!=cn.BUFFERING_BEFORE_PLAYBACK&&(l.po(t),l.do(t)),i==cn.PLAYING&&(c.ho(t),c.bo(t),l.ho(t),l.bo(t),l.Iu(d),l.co(parseInt(e.ns_st_po)),l.ao(parseInt(e.ns_st_po))),i!=cn.BUFFERING_BEFORE_PLAYBACK&&i!=cn.BUFFERING_DURING_PAUSE&&i!=cn.BUFFERING_DURING_PLAYBACK&&i!=cn.BUFFERING_DURING_SEEKING||(c.so(t),c.Po(t),l.so(t),l.Po(t));var h=j.Dr(n,e,t);l.jr(h.Ut),l.Kr(h.Ut),I.ju().Vu(h),n==ln.PLAYBACK_RATE&&l.bu(parseInt(e.ns_st_rt)),v&&(l.wo(d,V),i==cn.PLAYING&&(c.bo(V),l.bo(V)),i!=cn.IDLE&&i!=cn.PLAYBACK_NOT_STARTED&&i!=cn.SEEKING_BEFORE_PLAYBACK&&i!=cn.BUFFERING_BEFORE_PLAYBACK&&l.do(V),i!=cn.BUFFERING_BEFORE_PLAYBACK&&i!=cn.BUFFERING_DURING_PAUSE&&i!=cn.BUFFERING_DURING_PLAYBACK&&i!=cn.BUFFERING_DURING_SEEKING&&i!=cn.PAUSED_DURING_BUFFERING||(c.Po(V),l.Po(V)),i!=cn.SEEKING_BEFORE_PLAYBACK&&i!=cn.SEEKING_DURING_BUFFERING&&i!=cn.SEEKING_DURING_PAUSE&&i!=cn.SEEKING_DURING_PLAYBACK&&i!=cn.BUFFERING_DURING_SEEKING||l.Oo(V))}else I.Uu().$t("Ignored pseudo-event:",ln.toString(n),"during state",tn.gs(i),e)},getState:function(){return I.Mu().Ru()},addListener:function(n){U.push(n)},removeListener:function(n){U.splice(un.indexOf(n,U),1)},getLabel:function(n){return _[n]},getLabels:function(){return _},setLabel:function(n,t){null==t?delete _[n]:_[n]=t},setLabels:function(n){for(var t in n)n.hasOwnProperty(t)&&j.setLabel(t,n[t])},getPlatformAPI:function(){return I.ws().getPlatformAPI()},ys:function(){return n},isProperlyInitialized:function(){var n=I.ws().Wn(),t=I.ws().g(),e=I.ws().getPixelURL();return n&&e&&t},setThrottlingDelay:function(n){a=n},getThrottlingDelay:function(){return a},isThrottlingEnabled:function(){return o},setThrottlingEnabled:function(n){o=n},bs:function(){return t},Is:function(n){t=n},getLoadTimeOffset:function(){return e},setLoadTimeOffset:function(n){e=n},Ss:function(){return W},setPauseOnBufferingInterval:function(n){u=n},getPauseOnBufferingInterval:function(){return u},isPauseOnBufferingEnabled:function(){return i},setPauseOnBufferingEnabled:function(n){i=n},setExitEndEventEnabled:function(n){if(G!=n){var t=I.Mu().Ru();n||tn.Ju(t)?n&&!tn.Ju(t)&&an.zu(z):an.Qu(z)}G=n},isExitEndEventEnabled:function(){return G},Ps:function(n,i){j.As(),r=j.getPlatformAPI().setTimeout(function(){var n={},t=tn.Wu(n),e=parseInt(i.ns_st_po);n.ns_st_po=e+"",j.Vu(ln.PAUSE_ON_BUFFERING,t,n)},u)},As:function(){null!=r&&(j.getPlatformAPI().clearTimeout(r),r=null)},qu:function(){x&&(j.getPlatformAPI().clearTimeout(x),x=null)},setLiveEndpointURL:function(n){if(null==n||0==n.length)return null;var t=decodeURIComponent||unescape,e=n.indexOf("?");if(0<=e){if(e<n.length-1){for(var i=n.substring(e+1).split("&"),r=0,o=i.length;r<o;r++){var u=i[r].split("=");2==u.length?j.setLabel(u[0],t(u[1])):1==u.length&&j.setLabel(nn.PAGE_NAME_LABEL,t(u[0]))}n=n.substring(0,e+1)}}else n+="?";return s=n},getLiveEndpointURL:function(){return s||(typeof ns_p!==yn&&"string"==typeof ns_p.src?s=ns_p.src.replace(/&amp;/,"&").replace(/&ns__t=\d+/,""):"string"==typeof ns_pixelUrl?s=ns_pixelUrl.replace(/&amp;/,"&").replace(/&ns__t=\d+/,""):null)},Cs:function(){return I},ks:function(n){var t=I.getPlaybackSession();I.Es(new fn(I)),fn.ks(I,t,n)},Ts:function(){I.Ns().pause();var n=I.Ns().Ls();I.Ds(new dn(I)),I.Ns().Rs(n)},getVersion:function(){return bn}}),function(){if((I=new en(j)).Ms(wn.getCore()),I.Os(new vn(I)),I.Ds(new dn(I)),I.Ws(new hn(I)),I.Vs(new gn),I.xs(new _n(Sn,b.debug)),I.Es(new fn(I)),S=new f(I),P=new p(I),A=new v(I),C=new d(I),k=new h(I),E=new g(I),T=new m(I),N=new w(I),L=new y(I),D=new Q(I),R=new X(I),M=new Z(I),O=new $(I),t=!1,e=0,W=+new Date,o=!(i=!0),U=[],b.publisherId){l=!0,c=b.publisherId+"";var n=(("secure"in b?b.secure:I.ws()&&I.ws().isProperlyInitialized()?I.ws().isSecure():tn.fe()&&rn.ce())?"https://sb":"http://b")+".scorecardresearch.com/p?c1=2";j.setLiveEndpointURL(n)}b.liveEndpointURL&&j.setLiveEndpointURL(b.liveEndpointURL),b.systemClockJumpDetection&&(sn.setPlatformAPI(j.getPlatformAPI()),b.systemClockJumpDetectionInterval?sn.Us(parseInt(b.systemClockJumpDetectionInterval),!0):sn.Us(),b.systemClockJumpDetectionPrecision?sn.Bs(parseInt(b.systemClockJumpDetectionPrecision),!0):sn.Bs(),Y())}()}},{17:17,18:18,19:19,2:2,20:20,24:24,55:55,58:58,59:59,60:60,61:61,62:62,63:63,65:65,66:66,68:68,69:69,70:70,71:71,72:72,73:73,74:74,75:75,76:76,77:77,78:78,79:79,80:80,81:81,82:82}],57:[function(n,t,e){var S,P,A=n(20),C=n(4),k="undefined";A.fe()?(S=window,P=document):(S={},P={location:{href:""},title:"",URL:"",referrer:"",cookie:""}),t.exports=function(n,t){for(var e,i=S.encodeURIComponent||escape,r=[],o=C.k,u=n.split("?"),s=u[0],a=u[1].split("&"),f=0,c=a.length;f<c;f++){var l=a[f].split("="),p=unescape(l[0]),v=unescape(l[1]);p&&(t[p]=v)}for(var d={},h=0,_=o.length;h<_;h++){var g=o[h];if(t.hasOwnProperty(g)){var m=t[g];typeof m!==k&&null!=m&&(d[g]=!0,r.push(i(g)+"="+i(t[g])))}}for(var w in t)if(t.hasOwnProperty(w)){if(d[w])continue;var y=t[w];typeof y!==k&&null!=y&&r.push(i(w)+"="+i(t[w]))}e=(e=s+"?"+r.join("&"))+(e.indexOf("&c8=")<0?"&c8="+i(P.title):"")+(e.indexOf("&c7=")<0?"&c7="+i(P.URL):"")+(e.indexOf("&c9=")<0?"&c9="+i(P.referrer):"");var b=A.Jt()?C.A:C.P;if(e.length>b&&0<e.indexOf("&")){var I=e.substr(0,b-8).lastIndexOf("&");e=(e.substring(0,I)+"&ns_cut="+i(e.substring(I+1))).substr(0,b)}return e}},{20:20,4:4}],58:[function(n,t,e){var i,r,o=(i=["play","pause","pause-on-buffering","end","buffer","buffer-stop","keep-alive","hb","custom","load","start","skstart","adskip","cta","error","trans","drmfa","drmap","drmde","bitrt","playrt","volume","window","audio","video","subs","cdn"],{PLAY:0,PAUSE:1,PAUSE_ON_BUFFERING:2,END:3,BUFFER:4,BUFFER_STOP:5,KEEPALIVE:6,HEARTBEAT:7,CUSTOM:8,LOAD:9,ENGAGE:10,SEEK_START:11,AD_SKIP:12,CTA:13,ERROR:14,TRANSFER:15,DRM_FAILED:16,DRM_APPROVED:17,DRM_DENIED:18,BIT_RATE:19,PLAYBACK_RATE:20,VOLUME:21,WINDOW_STATE:22,AUDIO:23,VIDEO:24,SUBS:25,CDN:26,toString:function(n){return i[n]}}),u=(r=["c","s","r"],{Bu:0,Fs:1,js:2,toString:function(n){return r[n]}});t.exports.Lu=o,t.exports.Nu={IDLE:0,PLAYBACK_NOT_STARTED:1,PLAYING:2,PAUSED:3,BUFFERING_BEFORE_PLAYBACK:4,BUFFERING_DURING_PLAYBACK:5,BUFFERING_DURING_SEEKING:6,BUFFERING_DURING_PAUSE:7,SEEKING_BEFORE_PLAYBACK:8,SEEKING_DURING_PLAYBACK:9,SEEKING_DURING_BUFFERING:10,SEEKING_DURING_PAUSE:11,PAUSED_DURING_BUFFERING:12},t.exports.Du=u},{}],59:[function(n,t,e){var s=n(24),a=n(57),f=n(58).Lu;t.exports=function(i){var t,r,o=this,u=[];s.extend(this,{Vu:function(n){for(var t=s.extend({},n.Ut,n.Ku),e=0;e<u.length;++e)u[e](t);!function(n){r=s.extend({},n);var t=i.Gs().getLiveEndpointURL();i.Gs().isProperlyInitialized()?i.ws().nt(n,t):t&&i.Gs().getPlatformAPI().httpGet(a(t,n))}(t),n.Wt!=f.HEARTBEAT&&o.Ks()},addMeasurementListener:function(n){"function"==typeof n&&u.push(n)},removeMeasurementListener:function(n){for(var t=NaN,e=0;e<u.length;++e)if(u[e]==n){t=e;break}isNaN(t)||u.splice(t,1)},Fu:function(){return t},Ks:function(){t++},qs:function(n){t=n},Hs:function(){return r}}),t=1}},{24:24,57:57,58:58}],60:[function(n,t,e){var c=n(58).Lu,l=n(68),p=n(24),v=[{Ys:6e4,interval:1e4},{Ys:null,interval:6e4}];t.exports=function(i){var e,r,o,u=this,s=v;function a(){o++;var n={},t=l.Wu(n);n.ns_st_hc=i.Ns().Js()+"";var e=i.Gs().Dr(c.HEARTBEAT,n,t);i.getPlaybackSession().getAsset().Kr(e.Ut),i.ju().Vu(e),r=0,u.resume()}function f(){null!=e&&(i.Gs().getPlatformAPI().clearTimeout(e),e=null)}p.extend(this,{Js:function(){return o},Rs:function(n){s=n},Gu:function(n){var t=0;if(null!=s)for(var e=0;e<s.length;e++){var i=s[e],r=i.Ys;if(!r||n<r){t=i.interval;break}}return t},Ls:function(){return s},resume:function(){f();var n=u.Gu(i.getPlaybackSession().getAsset().Rr()+(+new Date-i.getPlaybackSession().getAsset().yo()));if(0<n){var t=0<r?r:n;e=i.Gs().getPlatformAPI().setTimeout(a,t)}r=0},pause:function(){f();var n=u.Gu(i.getPlaybackSession().getAsset().Rr()+(+new Date-i.getPlaybackSession().getAsset().yo()));r=n-(i.getPlaybackSession().getAsset().Rr()+(+new Date-i.getPlaybackSession().getAsset().yo()))%n}}),o=r=0}},{24:24,58:58,68:68}],61:[function(n,t,e){var u=n(58).Lu,s=n(24),a=n(68),f=12e5;t.exports=function(e){var n,i=this,t=f;function r(){var n={},t=a.Wu(n);e.Gs().ms(u.KEEPALIVE,t,n),i.start()}function o(){null!=n&&(e.Gs().getPlatformAPI().clearTimeout(n),n=null)}s.extend(i,{start:function(){o(),n=e.Gs().getPlatformAPI().setTimeout(r,t)},stop:o,setInterval:function(n){t=n},Gu:function(){return t}})}},{24:24,58:58,68:68}],62:[function(n,t,e){var i=n(20),r=[],o=!1;function u(){for(var n=0;n<r.length;++n)r[n]()}t.exports={zu:function(n){r.push(n),o||i.fe()&&(window.addEventListener?(window.addEventListener("unload",u,!1),o=!0):window.attachEvent&&(window.attachEvent("onunload",u),o=!0))},Qu:function(n){for(var t=0;t<r.length;++t)if(r[t]==n){r.splice(t,1);break}0==r.length&&i.fe()&&(window.removeEventListener?(window.removeEventListener("unload",u,!1),o=!1):window.detachEvent&&(window.detachEvent("onunload",u),o=!1))}}},{20:20}],63:[function(n,t,e){var w=n(24),y=n(54),b=n(68),I=n(21),S=n(55).HASH_LABELS,P=n(58).Nu,A=n(58).Lu;function i(c){var r,e,t,o,u,i,s,a,f,l,p,v,d,h,_,g,m=this;w.extend(this,{Tu:function(){var n=r;r=new y,y.Tu(n,r)},zs:function(n){return null!=a[n]},Qs:function(n){a[n]={}},Xs:function(n){delete a[n]},Zs:function(){for(var n in a)if(a.hasOwnProperty(n)&&a[n].$s===r.Tr()){w.extend(a[n],{na:r.su(),ta:r.au(),ea:r.fu(),ia:r.cu(),seeking:r.Eo(),ra:r.Bo(),oa:r.jo(),ua:r.$r(),sa:r.qr(),aa:r.Yr(),fa:r.zr(),ca:r.Xr(),la:r.hu(),pa:r.Qo(),va:r.Zo(),da:r.tu()});break}},ha:function(n){return a[n]},Tr:function(n){return a[n].$s},_a:function(){return f},ga:function(n,t){a[n].$s=t,f<t&&(f=t)},setLabels:function(n){null!=n&&w.extend(i,n)},getLabels:function(){return i},setLabel:function(n,t){var e={};e[n]=t,m.setLabels(e)},getLabel:function(n){return i[n]},getAsset:function(){return r},xu:function(n){for(var t=0;t<g.length;++t)if(g[t]==n)return;g.push(n)},Dr:function(n,t){var e=n,i=I.jt(e.ns_st_pa)?m.Rr():parseInt(e.ns_st_pa);e.ns_st_pa=i+(isNaN(o)?0:t-o)+"",e.ns_st_pp=d+"",e.ns_st_sp=h+"",e.ns_st_bp=_+"",l||(e.ns_st_pb=null!=e.ns_st_pb?e.ns_st_pb:"1"),r.Mo()&&(e.ns_st_ppc=p+"",e.ns_st_psq=v+""),0<g.length&&(e.ns_st_ie=(e.ns_st_ie?e.ns_st_ie+";":"")+g.join(";")),w.extend(e,u)},ro:function(){h++},eo:function(){d++},ho:function(n){if(!isNaN(o)){var t=m.Rr();t+=n-o,m.ma(t),o=NaN}},so:function(n){if(!isNaN(e)){var t=m.Or();t+=n-e,m.uo(t),e=NaN}},Or:function(){return _},uo:function(n){_=n},Rr:function(){return t},Po:function(n){e=n},So:function(){return e},ma:function(n){t=n},bo:function(n){o=n},yo:function(){return o},Vr:function(){return d},Ao:function(n){d=n},wa:function(){return s},ya:function(n){s=n},ba:function(){return p},Ia:function(){p++},hs:function(n){l=n},vu:function(n){v=n},du:function(){v++},Sa:function(){return u.ns_st_id},setAsset:function(n,t){c.Uu().Zt("setAsset",n,t),n=b.Pa(n);var e=c.Mu().Ru();if(e!=P.IDLE){c.Uu().$t("Ending the current Clip. It was in state:",b.gs(e));var i={};c.Gs().Vu(A.END,b.Wu(i),i)}var r="",o=0;if(null!=n.ns_st_cn)r=n.ns_st_cn;else for(var u=0;u<S.length;u++)n[S[u]]&&(r+=S[u]+":"+n[S[u]]+";");var s=m,a=s.getAsset();a.Do()?(s.zs(a.Pr())||(s.Qs(a.Pr()),s.ga(a.Pr(),a.Tr())),s.Zs(),o=s.zs(r)?s.Tr(r):I.tn(n.ns_st_cn)?parseInt(n.ns_st_cn):s._a()+1):o=s.zs(r)?s.Tr(r):a.Tr(),s.Tu(),(a=s.getAsset()).Ar(r),a.Nr(o),a.setLabels(n);var f=s.ha(r);f&&(a.Lo(!0),a.iu(f.na),a.ru(f.ta),a.ou(f.ea),a.uu(f.ia),a.ko(f.seeking),a.Uo(f.ra),a.Fo(f.oa),a.no(f.ua),f.sa&&a.Hr(f.sa),f.aa&&a.Jr(f.aa),f.fa&&a.Qr(f.fa),f.ca&&a.Zr(f.ca),a.vu(f.la),a.Xo(f.pa),a.$o(f.va),a.nu(f.da)),a.Jo(),a.Do()&&t&&s.ro(),t&&(s.vu(0),a.gu(!0)),!I.tn(n.ns_st_tp)&&I.tn(n.ns_st_ad)&&I.lt(n.ns_st_ad)&&"0"!==n.ns_st_ad&&a.Cr("ns_st_tp","1")}}),r=new y,(u={}).ns_st_id=+new Date+"",i={},o=e=NaN,l=s=!(a={}),h=1,_=v=d=p=f=t=0,g=[]}i.ks=function(n,t,e){for(var i=t.getAsset(),r=t.getLabels(),o={},u=0;e&&u<e.length;u++)r.hasOwnProperty(e[u])&&(o[e[u]]=r[e[u]]);n.getPlaybackSession().setLabels(o),y.Tu(i,n.getPlaybackSession().getAsset(),e)},t.exports=i},{21:21,24:24,54:54,55:55,58:58,68:68}],64:[function(n,t,e){var p={LongFormOnDemand:"12",ShortFormOnDemand:"11",Live:"13",UserGeneratedLongFormOnDemand:"22",UserGeneratedShortFormOnDemand:"21",UserGeneratedLive:"23",Bumper:"99",Other:"00"},v={LinearOnDemandPreRoll:"11",LinearOnDemandMidRoll:"12",LinearOnDemandPostRoll:"13",LinearLive:"21",BrandedOnDemandPreRoll:"31",BrandedOnDemandMidRoll:"32",BrandedOnDemandPostRoll:"33",BrandedOnDemandContent:"34",BrandedOnDemandLive:"35",Other:"00"},d=n(67),h=n(58).Nu,_=n(58).Du,g=n(55).HASH_LABELS,m=n(21),w=n(24),y=n(18),i=function(n){var o=null,e=0,i=!1,r=null,u={Aa:0,Ca:1,ka:2},s=u.Aa,a=new y("TTSTA",(n||{}).debug);function f(n){r.getPlaybackSession().setAsset(n),o=n,r.notifyPlay()}function c(n){var t=n||{};t.ns_st_ad="1",t.ns_st_an=++e+"",r.getPlaybackSession().setAsset(t),r.notifyPlay(),i=!1}function l(n,t){s==u.Aa&&(s=t),i&&s==t?!function(n){for(var t in g)if(g.hasOwnProperty(t)&&(e=g[t],i=o,r=n,!(m.tn(e)&&m.tn(i)&&m.tn(r)&&(i.hasOwnProperty(e)&&r.hasOwnProperty(e)&&i[e]===r[e]||!i.hasOwnProperty(e)&&!r.hasOwnProperty(e)))))return!1;var e,i,r;return!0}(n)?f(n):(r.getPlaybackSession().getAsset().setLabels(n),r.getState()!=h.PLAYING&&r.notifyPlay()):f(n),i=!0,s=t}w.extend(this,{playVideoAdvertisement:function(n,t){a.Zt("playVideoAdvertisement",n,t);var e={ns_st_ct:"va"};t?e.ns_st_ct="va"+t:a.warn("Calling 'playVideoAdvertisement' without specifying the media type as a second parameter."),t!=v.LinearLive&&t!=v.BrandedOnDemandLive||(e.ns_st_li="1"),n&&w.extend(e,n),c(e)},playAudioAdvertisement:function(n,t){a.Zt("playAudioAdvertisement",n,t);var e={ns_st_ct:"aa"};t?e.ns_st_ct="aa"+t:a.warn("Calling 'playAudioAdvertisement' without specifying the media type as a second parameter."),t!=v.LinearLive&&t!=v.BrandedOnDemandLive||(e.ns_st_li="1"),n&&w.extend(e,n),c(e)},playVideoContentPart:function(n,t){a.Zt("playVideoContentPart",n,t);var e={ns_st_ct:"vc"};t?e.ns_st_ct="vc"+t:a.warn("Calling 'playVideoContentPart' without specifying the media type as a second parameter."),t!=p.Live&&t!=p.UserGeneratedLive||(e.ns_st_li="1"),n&&w.extend(e,n),l(e,u.ka)},playAudioContentPart:function(n,t){a.Zt("playAudioContentPart",n,t);var e={ns_st_ct:"ac"};t?e.ns_st_ct="ac"+t:a.warn("Calling 'playAudioContentPart' without specifying the media type as a second parameter."),t!=p.Live&&t!=p.UserGeneratedLive||(e.ns_st_li="1"),n&&w.extend(e,n),l(e,u.Ca)},stop:function(){a.Zt("stop"),r.notifyPause()}}),(r=new d(n)).setLabel("ns_st_it",_.toString(_.js))};i.ContentType=p,i.AdType=v,t.exports=i},{18:18,21:21,24:24,55:55,58:58,67:67}],65:[function(n,t,e){var a=n(24);t.exports=function(n){var t,e,i,r,o,u,s;a.extend(this,{ws:function(){return t},Gs:function(){return n},ju:function(){return e},Mu:function(){return i},Ns:function(){return r},S:function(){return o},getPlaybackSession:function(){return u},Uu:function(){return s},Ms:function(n){t=n},Os:function(n){o=n},Ds:function(n){r=n},Ws:function(n){e=n},Vs:function(n){i=n},Es:function(n){u=n},xs:function(n){s=n}})}},{24:24}],66:[function(n,t,e){var s=n(58).Nu,a=n(24),f=n(58).Lu;t.exports=function(n){var i,r,o,u=this;a.extend(u,{Hu:function(n){if(o==s.IDLE){if(n==f.PLAY)return s.PLAYING;if(n==f.SEEK_START)return s.SEEKING_BEFORE_PLAYBACK;if(n==f.BUFFER)return s.BUFFERING_BEFORE_PLAYBACK}else if(o==s.PLAYBACK_NOT_STARTED){if(n==f.PLAY)return s.PLAYING;if(n==f.SEEK_START)return s.SEEKING_BEFORE_PLAYBACK;if(n==f.BUFFER)return s.BUFFERING_BEFORE_PLAYBACK;if(n==f.END||n==f.AD_SKIP)return s.IDLE}else if(o==s.PLAYING){if(n==f.END||n==f.AD_SKIP)return s.IDLE;if(n==f.BUFFER)return s.BUFFERING_DURING_PLAYBACK;if(n==f.PAUSE)return s.PAUSED;if(n==f.SEEK_START)return s.SEEKING_DURING_PLAYBACK}else if(o==s.PAUSED){if(n==f.END||n==f.AD_SKIP)return s.IDLE;if(n==f.BUFFER)return s.BUFFERING_DURING_PAUSE;if(n==f.PLAY)return s.PLAYING;if(n==f.SEEK_START)return s.SEEKING_DURING_PAUSE}else if(o==s.BUFFERING_BEFORE_PLAYBACK){if(n==f.END||n==f.AD_SKIP)return s.IDLE;if(n==f.PAUSE||n==f.BUFFER_STOP)return s.PLAYBACK_NOT_STARTED;if(n==f.PLAY)return s.PLAYING;if(n==f.SEEK_START)return s.SEEKING_BEFORE_PLAYBACK}else if(o==s.BUFFERING_DURING_PLAYBACK){if(n==f.END||n==f.AD_SKIP)return s.IDLE;if(n==f.PLAY||n==f.BUFFER_STOP)return s.PLAYING;if(n==f.PAUSE_ON_BUFFERING)return s.PAUSED_DURING_BUFFERING;if(n==f.SEEK_START)return s.SEEKING_DURING_BUFFERING;if(n==f.PAUSE)return s.PAUSED}else if(o==s.BUFFERING_DURING_SEEKING){if(n==f.END||n==f.AD_SKIP)return s.IDLE;if(n==f.PLAY)return s.PLAYING;if(n==f.BUFFER_STOP)return s.SEEKING_DURING_PLAYBACK;if(n==f.PAUSE)return s.PAUSED}else if(o==s.BUFFERING_DURING_PAUSE){if(n==f.END||n==f.AD_SKIP)return s.IDLE;if(n==f.PLAY)return s.PLAYING;if(n==f.SEEK_START)return s.SEEKING_DURING_PAUSE;if(n==f.BUFFER_STOP||n==f.PAUSE)return s.PAUSED}else if(o==s.SEEKING_BEFORE_PLAYBACK){if(n==f.END||n==f.AD_SKIP)return s.IDLE;if(n==f.PAUSE)return s.PLAYBACK_NOT_STARTED;if(n==f.PLAY)return s.PLAYING;if(n==f.BUFFER)return s.BUFFERING_BEFORE_PLAYBACK}else if(o==s.SEEKING_DURING_PLAYBACK){if(n==f.END||n==f.AD_SKIP)return s.IDLE;if(n==f.PLAY)return s.PLAYING;if(n==f.PAUSE)return s.PAUSED;if(n==f.BUFFER)return s.BUFFERING_DURING_SEEKING}else if(o==s.SEEKING_DURING_BUFFERING){if(n==f.END||n==f.AD_SKIP)return s.IDLE;if(n==f.PLAY)return s.PLAYING;if(n==f.PAUSE||n==f.BUFFER_STOP)return s.PAUSED;if(n==f.BUFFER)return s.BUFFERING_DURING_SEEKING}else if(o==s.SEEKING_DURING_PAUSE){if(n==f.END||n==f.AD_SKIP)return s.IDLE;if(n==f.PLAY)return s.PLAYING;if(n==f.PAUSE||n==f.BUFFER_STOP)return s.PAUSED;if(n==f.BUFFER)return s.BUFFERING_DURING_PAUSE}else if(o==s.PAUSED_DURING_BUFFERING){if(n==f.END||n==f.AD_SKIP)return s.IDLE;if(n==f.SEEK_START)return s.SEEKING_DURING_BUFFERING;if(n==f.PAUSE)return s.PAUSED;if(n==f.PLAY||n==f.BUFFER_STOP)return s.PLAYING}return null},Ru:function(){return o},Vu:function(n,t){var e=u.Hu(n);o!=e&&(r=o,o=e,i=t)},Ea:function(){return r},_s:function(){return i}}),o=s.IDLE,r=null,i=NaN}},{24:24,58:58}],67:[function(n,t,e){var r=n(24),o=n(68),u=n(56),s=n(58).Lu,c=n(58).Nu,l=n(63),i=n(55),p={notifyPlay:s.PLAY,notifyPause:s.PAUSE,notifyEnd:s.END,notifyBufferStart:s.BUFFER,notifyBufferStop:s.BUFFER_STOP,notifyLoad:s.LOAD,notifyEngage:s.ENGAGE,notifySeekStart:s.SEEK_START,notifySkipAd:s.AD_SKIP,notifyCallToAction:s.CTA,notifyError:s.ERROR,notifyTransferPlayback:s.TRANSFER,notifyDrmFail:s.DRM_FAILED,notifyDrmApprove:s.DRM_APPROVED,notifyDrmDeny:s.DRM_DENIED,notifyCustomEvent:s.CUSTOM},v={notifyChangeBitrate:[s.BIT_RATE,"ns_st_br"],notifyChangePlaybackRate:[s.PLAYBACK_RATE,"ns_st_rt"],notifyChangeVolume:[s.VOLUME,"ns_st_vo"],notifyChangeWindowState:[s.WINDOW_STATE,"ns_st_ws"],notifyChangeAudioTrack:[s.AUDIO,"ns_st_at"],notifyChangeVideoTrack:[s.VIDEO,"ns_st_vt"],notifyChangeSubtitleTrack:[s.SUBS,"ns_st_tt"],notifyChangeCdn:[s.CDN,"ns_st_cdn"]};function a(n){var a,e=this;function f(n,t,e){if(s.toString(n)){e=o.Pa(e);var i=o.Wu(e);e.ns_st_po||isNaN(t)||(e.ns_st_po=parseInt(t)+""),n==s.PLAY||n==s.PAUSE||n==s.BUFFER||n==s.END||n==s.SEEK_START||n==s.AD_SKIP||n==s.BUFFER_STOP?a.Vu(n,i,e):a.ms(n,i,e)}}for(var t in r.extend(e,{isProperlyInitialized:function(){return a.isProperlyInitialized()},reset:function(n){f(s.END);var t=a;t.Cs().S().stop(),t.Cs().Ns().pause(),a=new u(t.getConfiguration()),l.ks(a.Cs(),t.Cs().getPlaybackSession(),n)},setPauseOnBufferingInterval:function(n){a.setPauseOnBufferingInterval(n)},getPauseOnBufferingInterval:function(){return a.getPauseOnBufferingInterval()},setKeepAliveInterval:function(n){a.Cs().S().setInterval(n)},getKeepAliveInterval:function(){return a.Cs().S().Gu()},setHeartbeatIntervals:function(n){a.Cs().Ns().Rs(n)},getLabels:function(){return a.getLabels()},getState:function(){return a.Cs().Mu().Ru()},setLabels:function(n){a.setLabels(n)},getLabel:function(n){return a.getLabel(n)},setLabel:function(n,t){a.setLabel(n,t)},getLoadTimeOffset:function(){return a.getLoadTimeOffset()},setLoadTimeOffset:function(n){a.setLoadTimeOffset(n)},setLiveEndpointURL:function(n){return a.setLiveEndpointURL(n)},getLiveEndpointURL:function(){return a.getLiveEndpointURL()},isPauseOnBufferingEnabled:function(){return a.isPauseOnBufferingEnabled()},setPauseOnBufferingEnabled:function(n){a.setPauseOnBufferingEnabled(n)},isThrottlingEnabled:function(){return a.isThrottlingEnabled()},setThrottlingEnabled:function(n){a.setThrottlingEnabled(n)},setThrottlingDelay:function(n){a.setThrottlingDelay(n)},getThrottlingDelay:function(){return a.getThrottlingDelay()},setPlaybackIntervalMergeTolerance:function(n){a.Cs().getPlaybackSession().getAsset().setPlaybackIntervalMergeTolerance(n)},getPlaybackIntervalMergeTolerance:function(){return a.Cs().getPlaybackSession().getAsset().getPlaybackIntervalMergeTolerance()},createPlaybackSession:function(n){a.Cs().Uu().Zt("createPlaybackSession",n),n=o.Pa(n);var t=a.Cs().Mu().Ru();t!=c.IDLE&&(a.Cs().Uu().$t("Ending the current Clip. It was in state:",o.gs(t)),e.notifyEnd()),a.Cs().getPlaybackSession().wa()&&a.ks(),a.Cs().getPlaybackSession().setLabels(n)},getVersion:function(){return a.getVersion()},addListener:function(n){a.addListener(n)},removeListener:function(n){a.removeListener(n)},addMeasurementListener:function(n){a.Cs().ju().addMeasurementListener(n)},removeMeasurementListener:function(n){a.Cs().ju().removeMeasurementListener(n)},getPlaybackSession:function(){return a.Cs().getPlaybackSession()},setExitEndEventEnabled:function(n){a.setExitEndEventEnabled(!!n)},isExitEndEventEnabled:function(){return a.isExitEndEventEnabled()},setDvrWindowLength:function(n){a.Cs().getPlaybackSession().getAsset().Su(n),a.Cs().getPlaybackSession().getAsset().Eu(!0)},setDvrWindowOffset:function(n){a.Cs().getPlaybackSession().getAsset().Au(n),a.Cs().getPlaybackSession().getAsset().Eu(!0)},getPlatformAPI:function(){return a.getPlatformAPI()},_getLogHistory:function(){return a.Cs().Uu().te()}}),p)!function(r,o){e[r]=function(n,t){a.Cs().Uu().Zt(r,n,t);var e={},i=NaN;"object"==typeof n?e=n:"object"==typeof t&&(e=t),"number"==typeof n?i=n:"number"==typeof t&&(i=t),f(o,i,e)}}(t,p[t]);for(var i in v)!function(o,u,s){e[o]=function(n,t,e){if(a.Cs().Uu().Zt(o,n,t,e),null!=n){var i={},r=NaN;"object"==typeof t?i=t:"object"==typeof e&&(i=e),"number"==typeof t?r=t:"number"==typeof e&&(r=e),i[s]=n+"",f(u,r,i)}}}(i,v[i][0],v[i][1]);n=r.extend({},n),(a=new u(n)).Cs().Uu().log("New StreamingAnalytics instance with configuration",n)}a.PlayerEvents=s,a.InternalStates=c,a.Constants=i,t.exports=a},{24:24,55:55,56:56,58:58,63:63,68:68}],68:[function(n,t,e){var f=n(23),i=n(58).Nu,r="undefined";e.Pa=function(n){var t={};for(var e in n){var i=n[e];t[e]=null==i?i:n[e]+""}return t},e.Ta=function(n,t){var e,i=[];for(e in n)t&&!t.test(e)||!n.hasOwnProperty(e)||(i[i.length]=e);return i},e.Wu=function(n){if(n.ns_ts)return parseInt(n.ns_ts);var t=+new Date;return n.ns_ts=t+"",t},e.fe=function(){return typeof window!=r&&typeof document!=r},e.Wr=function(n,t,e,i){var r,o,u={};if(!(t<=e))return f(n);if(u.start=t,u.end=e,0==n.length)return n.push(u),f(n);for(r=0;r<n.length;r++)if(u.start>=n[r].start&&u.end<=n[r].end)return f(n);var s=!1;for(o=0;o<n.length;o++)if(o+1===n.length&&u.start>=n[o].start||u.start>=n[o].start&&u.start<n[o+1].start){n.splice(o+1,0,u),s=!0;break}s||n.splice(0,0,u);var a=[n[0]];for(r=1;r<n.length;r++)a[a.length-1].end+i<n[r].start?a.push(n[r]):a[a.length-1].end<n[r].end&&(a[a.length-1].end=n[r].end);return f(a)},e.gs=function(n){for(var t in i)if(i.hasOwnProperty(t)&&i[t]==n)return t},e.Ju=function(n){return n==i.IDLE||n==i.BUFFERING_BEFORE_PLAYBACK||n==i.SEEKING_BEFORE_PLAYBACK||n==i.PLAYBACK_NOT_STARTED}},{23:23,58:58}],69:[function(n,t,e){var i=n(24),r=n(26),s=n(58).Lu;t.exports=function(u){i.extend(this,{ns:function(n,t){var e=u.getPlaybackSession(),i=e.getAsset();e.so(n),i.so(n),i.Eo()&&i.No()&&i.Uo(n-i.Wo()),i.Ho(),i.Ro(!1),t.hasOwnProperty("ns_st_pe")&&r.vr(t.ns_st_pe,!1)&&u.Gs().ks()},os:function(n,t){var e=u.getPlaybackSession(),i=e.getAsset();e.so(n),i.so(n),i.Eo()&&i.No()&&(i.Vo(n),i.To(!1))},Zu:function(n,t){var e=u.getPlaybackSession(),i=e.getAsset(),r=parseInt(t.ns_st_po);e.so(n),i.so(n),i.Eo()?i.No()||(i.Oo(n),i.To(!0)):i.io(),i.Eo()||(i.ko(!0),i.To(!0),i.Fo(r),i.Oo(n))},ts:function(n,t){var e=u.getPlaybackSession(),i=e.getAsset();e.so(n),i.so(n),i.Eo()&&i.No()&&(i.Vo(n),i.To(!1))},$u:function(n,t){var e=u.getPlaybackSession(),i=e.getAsset(),r=parseInt(t.ns_st_po);e.so(n),i.so(n),i.Eo()&&(i.No()&&(i.Vo(n),i.To(!1)),i.Ko(r),i.ko(!1)),i.Ro(!0),(i._u()||0==e.ba())&&(e.Ia(),i.gu(!1)),e.du(),i.Ro(!0),i.Yo(),i.ro(),e.bo(n),i.bo(n),i.do(n),i.ao(r),(0==i.cu()||i.Lr()<=i.cu())&&(i.uu(i.Lr()),i.zo(),i.vu(0),i.eu()),i.du(),u.Gs().bs()||(t.ns_st_lt=u.Gs().getLoadTimeOffset()+n-u.Gs().Ss()+"",u.Gs().Is(!0)),u.Ns().resume(),u.S().start();var o=u.Gs().Dr(s.PLAY,t,n);i.jr(o.Ut),i.Kr(o.Ut),u.ju().Vu(o)}})}},{24:24,26:26,58:58}],70:[function(n,t,e){var i=n(24),o=n(26),s=n(58).Lu;t.exports=function(u){i.extend(this,{fs:function(n,t){var e=u.getPlaybackSession(),i=e.getAsset();u.Gs().Ts(),u.S().stop(),e.so(n),i.so(n),i.po(n);var r=u.Gs().Dr(s.END,t,n);i.jr(r.Ut),i.Kr(r.Ut),u.ju().Vu(r),i.Eo()&&i.No()&&(i.Uo(n-i.Wo()),i.To(!1)),e.Zs(),i.Ho(),i.Ro(!1),t.hasOwnProperty("ns_st_pe")&&o.vr(t.ns_st_pe,!1)&&u.Gs().ks()},ts:function(n,t){var e=u.getPlaybackSession(),i=e.getAsset();e.so(n),i.so(n),i.po(n),i.do(n)},$u:function(n,t){var e=u.getPlaybackSession(),i=e.getAsset(),r=parseInt(t.ns_st_po);e.du(),i.du(),i.ro(),e.so(n),i.so(n),i.Eo()&&(i.No()&&(i.Vo(n),i.To(!1)),i.Ko(r),i.ko(!1)),i.po(n),i.do(n),e.bo(n),i.bo(n),i.ao(r),u.Ns().resume(),u.S().start();var o=u.Gs().Dr(s.PLAY,t,n);i.jr(o.Ut),i.Kr(o.Ut),u.ju().Vu(o)}})}},{24:24,26:26,58:58}],71:[function(n,t,e){var i=n(24),o=n(26),s=n(58).Lu;t.exports=function(u){i.extend(this,{us:function(n,t){var e=u.getPlaybackSession(),i=e.getAsset();u.Gs().As(),i.po(n),i.do(n),e.so(n),i.so(n),e.eo(),i.eo();var r=u.Gs().Dr(s.PAUSE,t,n);i.jr(r.Ut),i.Kr(r.Ut),u.ju().Vu(r),e.Po(n),i.Po(n)},ns:function(n,t){var e=u.getPlaybackSession(),i=e.getAsset();u.Gs().As(),u.Gs().Ts(),u.S().stop(),e.so(n),i.so(n),i.po(n);var r=u.Gs().Dr(s.END,t,n);i.jr(r.Ut),i.Kr(r.Ut),u.ju().Vu(r),i.Ho(),i.Ro(!1),t.hasOwnProperty("ns_st_pe")&&o.vr(t.ns_st_pe,!1)&&u.Gs().ks()},Zu:function(n,t){var e=u.getPlaybackSession(),i=e.getAsset(),r=parseInt(t.ns_st_po);u.Gs().As(),u.Ns().pause(),u.S().stop(),i.po(n),i.do(n),e.so(n),i.so(n),i.io(),i.ko(!0),i.To(!0),i.Fo(r),i.Oo(n),e.eo(),i.eo();var o=u.Gs().Dr(s.PAUSE,t,n);i.jr(o.Ut),i.Kr(o.Ut),u.ju().Vu(o)},ts:function(n,t){var e=u.getPlaybackSession(),i=e.getAsset();u.Gs().As(),i.po(n),i.do(n),e.so(n),i.so(n),e.eo(),i.eo();var r=u.Gs().Dr(s.PAUSE,t,n);i.jr(r.Ut),i.Kr(r.Ut),u.ju().Vu(r)}})}},{24:24,26:26,58:58}],72:[function(n,t,e){var i=n(24),o=n(26),s=n(58).Lu;t.exports=function(u){i.extend(this,{ns:function(n,t){var e=u.getPlaybackSession(),i=e.getAsset();u.Gs().Ts(),u.S().stop(),u.Gs().As(),e.so(n),i.so(n),i.po(n);var r=u.Gs().Dr(s.END,t,n);i.jr(r.Ut),i.Kr(r.Ut),u.ju().Vu(r),i.Eo()&&i.No()&&(i.Uo(n-i.Wo()),i.To(!1)),e.Zs(),i.Ho(),i.Ro(!1),t.hasOwnProperty("ns_st_pe")&&o.vr(t.ns_st_pe,!1)&&u.Gs().ks()},ts:function(n,t){var e=u.getPlaybackSession(),i=e.getAsset();e.so(n),i.so(n),e.eo(),i.eo(),i.Eo()&&i.No()&&(i.Vo(n),i.To(!1)),i.po(n),i.do(n)},$u:function(n,t){var e=u.getPlaybackSession(),i=e.getAsset(),r=parseInt(t.ns_st_po);e.du(),i.du(),i.ro(),e.so(n),i.so(n),i.Eo()&&(i.No()&&(i.Vo(n),i.To(!1)),i.Ko(r),i.ko(!1)),i.po(n),i.do(n),e.bo(n),i.bo(n),i.ao(r),u.Ns().resume(),u.S().start();var o=u.Gs().Dr(s.PLAY,t,n);i.jr(o.Ut),i.Kr(o.Ut),u.ju().Vu(o)}})}},{24:24,26:26,58:58}],73:[function(n,t,e){var i=n(24),s=n(58).Lu;t.exports=function(u){i.extend(this,{Xu:function(n,t){var e=u.getPlaybackSession(),i=e.getAsset();e.ya(!0),i.Lo(!0),i.Eo()&&i.xo(i.Bo()),e.Po(n),i.Po(n)},Zu:function(n,t){var e=u.getPlaybackSession(),i=e.getAsset(),r=parseInt(t.ns_st_po);e.ya(!0),i.Lo(!0),i.Eo()&&i.xo(i.Bo()),i.io(),i.ko(!0),i.To(!0),i.Fo(r),i.Oo(n)},$u:function(n,t){var e=u.getPlaybackSession(),i=e.getAsset(),r=parseInt(t.ns_st_po);e.ya(!0),i.Lo(!0),(i._u()||0==e.ba())&&(e.Ia(),i.gu(!1)),i.Eo()&&(i.xo(i.Bo()),i.Ko(r),i.ko(!1)),e.du(),i.Ro(!0),i.Yo(),(0==i.cu()||i.Lr()<=i.cu())&&(i.uu(i.Lr()),i.zo(),i.vu(0),i.eu()),i.du(),i.ro(),e.bo(n),i.bo(n),i.do(n),i.ao(r),u.Gs().bs()||(t.ns_st_lt=u.Gs().getLoadTimeOffset()+n-u.Gs().Ss()+"",u.Gs().Is(!0)),u.Ns().resume(),u.S().start();var o=u.Gs().Dr(s.PLAY,t,n);i.jr(o.Ut),i.Kr(o.Ut),u.ju().Vu(o)}})}},{24:24,58:58}],74:[function(n,t,e){var i=n(24),o=n(26),s=n(58).Lu;t.exports=function(u){i.extend(this,{ns:function(n,t){var e=u.getPlaybackSession(),i=e.getAsset();u.Gs().Ts(),u.S().stop(),i.po(n);var r=u.Gs().Dr(s.END,t,n);i.jr(r.Ut),i.Kr(r.Ut),u.ju().Vu(r),i.Eo()&&i.No()&&(i.Uo(n-i.Wo()),i.ko(!1)),e.Zs(),i.Ho(),i.Ro(!1),t.hasOwnProperty("ns_st_pe")&&o.vr(t.ns_st_pe,!1)&&u.Gs().ks()},$u:function(n,t){var e=u.getPlaybackSession(),i=e.getAsset(),r=parseInt(t.ns_st_po);e.du(),i.Eo()&&(i.No()&&(i.Vo(n),i.To(!1)),i.Ko(r),i.ko(!1)),i.ro(),i.du(),e.bo(n),i.bo(n),i.po(n),i.do(n),i.ao(r),u.Ns().resume(),u.S().start();var o=u.Gs().Dr(s.PLAY,t,n);i.jr(o.Ut),i.Kr(o.Ut),u.ju().Vu(o)}})}},{24:24,26:26,58:58}],75:[function(n,t,e){var i=n(24),o=n(26),s=n(58).Lu;t.exports=function(u){i.extend(this,{ns:function(n,t){var e=u.getPlaybackSession(),i=e.getAsset();u.Gs().Ts(),u.S().stop(),e.so(n),i.so(n),i.po(n),i.Eo()&&i.No()&&(i.Uo(n-i.Wo()),i.To(!1));var r=u.Gs().Dr(s.END,t,n);i.jr(r.Ut),i.Kr(r.Ut),u.ju().Vu(r),i.Ho(),i.Ro(!1),t.hasOwnProperty("ns_st_pe")&&o.vr(t.ns_st_pe,!1)&&u.Gs().ks()},Zu:function(n,t){var e=u.getPlaybackSession(),i=e.getAsset(),r=parseInt(t.ns_st_po);e.so(n),i.so(n),i.Eo()?i.No()||(i.Oo(n),i.To(!0)):i.io(),i.Eo()||(i.ko(!0),i.To(!0),i.Fo(r),i.Oo(n)),i.po(n),i.do(n)},ts:function(n,t){var e=u.getPlaybackSession(),i=e.getAsset();e.so(n),i.so(n),i.po(n),i.do(n)},ds:function(n,t){var e=u.getPlaybackSession(),i=e.getAsset(),r=parseInt(t.ns_st_po);e.du(),i.du(),e.so(n),i.so(n),i.ro(),e.bo(n),i.bo(n),i.po(n),i.do(n),i.ao(r),u.Ns().resume(),u.S().start();var o=u.Gs().Dr(s.PLAY,t,n);i.jr(o.Ut),i.Kr(o.Ut),u.ju().Vu(o)}})}},{24:24,26:26,58:58}],76:[function(n,t,e){var i=n(24),r=n(26),s=n(58).Lu;t.exports=function(u){i.extend(this,{ns:function(n,t){var e=u.getPlaybackSession(),i=e.getAsset();i.Eo()&&i.No()&&(i.Uo(n-i.Wo()),i.To(!1)),e.Zs(),i.Ho(),i.Ro(!1),t.hasOwnProperty("ns_st_pe")&&r.vr(t.ns_st_pe,!1)&&u.Gs().ks()},Zu:function(n,t){var e=u.getPlaybackSession().getAsset(),i=parseInt(t.ns_st_po);e.Eo()?e.Oo(n):e.io(),e.Eo()||(e.ko(!0),e.To(!0),e.Fo(i),e.Oo(n))},$u:function(n,t){var e=u.getPlaybackSession(),i=e.getAsset(),r=parseInt(t.ns_st_po);i.Eo()&&(i.Ko(r),i.ko(!1)),e.ya(!0),(i._u()||0==e.ba())&&(e.Ia(),i.gu(!1)),e.du(),i.Ro(!0),i.Yo(),(0==i.cu()||i.Lr()<=i.cu())&&(i.uu(i.Lr()),i.zo(),i.vu(0),i.eu()),i.du(),i.ro(),e.bo(n),i.bo(n),i.do(n),i.ao(r),u.Gs().bs()||(t.ns_st_lt=u.Gs().getLoadTimeOffset()+n-u.Gs().Ss()+"",u.Gs().Is(!0)),u.Ns().resume(),u.S().start();var o=u.Gs().Dr(s.PLAY,t,n);i.jr(o.Ut),i.Kr(o.Ut),u.ju().Vu(o)},Xu:function(n,t){var e=u.getPlaybackSession(),i=e.getAsset();e.Po(n),i.Po(n)}})}},{24:24,26:26,58:58}],77:[function(n,t,e){var i=n(24),s=n(26),a=n(58).Lu;t.exports=function(u){i.extend(this,{ns:function(n,t){var e=u.getPlaybackSession(),i=e.getAsset(),r=parseInt(t.ns_st_po);u.Gs().Ts(),u.S().stop(),e.ho(n),i.ho(n),i.Iu(r),i.po(n),i.co(r);var o=u.Gs().Dr(a.END,t,n);i.jr(o.Ut),i.Kr(o.Ut),u.ju().Vu(o),i.Ho(),i.Ro(!1),t.hasOwnProperty("ns_st_pe")&&s.vr(t.ns_st_pe,!1)&&u.Gs().ks()},Xu:function(n,t){var e=u.getPlaybackSession(),i=e.getAsset(),r=parseInt(t.ns_st_po);u.Ns().pause(),u.S().stop(),e.ho(n),i.ho(n),i.Iu(r),i.co(r),u.Gs().isPauseOnBufferingEnabled()&&u.Gs().Ps(n,t),i.lu(),e.Po(n),i.Po(n),i.po(n),i.do(n)},Zu:function(n,t){var e=u.getPlaybackSession(),i=e.getAsset(),r=parseInt(t.ns_st_po);u.Ns().pause(),u.S().stop(),e.ho(n),i.ho(n),i.Iu(r),i.co(r),i.io(),i.ko(!0),i.To(!0),i.Fo(r),i.Oo(n),i.po(n),i.do(n),e.eo(),i.eo();var o=u.Gs().Dr(a.PAUSE,t,n);i.jr(o.Ut),i.Kr(o.Ut),u.ju().Vu(o)},ts:function(n,t){var e=u.getPlaybackSession(),i=e.getAsset(),r=parseInt(t.ns_st_po);u.Ns().pause(),u.S().stop(),e.ho(n),i.ho(n),i.Iu(r),i.co(r),i.po(n),i.do(n),e.eo(),i.eo();var o=u.Gs().Dr(a.PAUSE,t,n);i.jr(o.Ut),i.Kr(o.Ut),u.ju().Vu(o)}})}},{24:24,26:26,58:58}],78:[function(n,t,e){var i=n(24),r=n(26),s=n(58).Lu;t.exports=function(u){i.extend(this,{ns:function(n,t){var e=u.getPlaybackSession(),i=e.getAsset();i.Eo()&&i.No()&&(i.Uo(n-i.Wo()),i.To(!1)),e.Zs(),i.Ho(),i.Ro(!1),t.hasOwnProperty("ns_st_pe")&&r.vr(t.ns_st_pe,!1)&&u.Gs().ks()},ts:function(n,t){var e=u.getPlaybackSession().getAsset();e.Eo()&&e.No()&&(e.Vo(n),e.To(!1))},$u:function(n,t){var e=u.getPlaybackSession(),i=e.getAsset(),r=parseInt(t.ns_st_po);i.Eo()&&(i.No()&&(i.Vo(n),i.To(!1)),i.Ko(r),i.ko(!1)),(i._u()||0==e.ba())&&(e.Ia(),i.gu(!1)),e.du(),i.du(),i.ro(),i.Ro(!0),i.Yo(),(0==i.cu()||i.Lr()<=i.cu())&&(i.uu(i.Lr()),i.zo(),i.vu(0),i.eu()),e.bo(n),i.bo(n),i.do(n),i.ao(r),u.Gs().bs()||(t.ns_st_lt=u.Gs().getLoadTimeOffset()+n-u.Gs().Ss()+"",u.Gs().Is(!0)),u.Ns().resume(),u.S().start();var o=u.Gs().Dr(s.PLAY,t,n);i.jr(o.Ut),i.Kr(o.Ut),u.ju().Vu(o)}})}},{24:24,26:26,58:58}],79:[function(n,t,e){var i=n(24);t.exports=function(r){i.extend(this,{ts:function(n,t){var e=r.getPlaybackSession(),i=e.getAsset();e.eo(),i.eo(),i.Eo()&&i.No()&&(i.Vo(n),i.To(!1)),i.po(n),i.do(n)}})}},{24:24}],80:[function(n,t,e){var i=n(24),o=n(26),s=n(58).Lu;t.exports=function(u){i.extend(this,{ns:function(n,t){var e=u.getPlaybackSession(),i=e.getAsset();u.Gs().Ts(),u.S().stop(),i.po(n);var r=u.Gs().Dr(s.END,t,n);i.jr(r.Ut),i.Kr(r.Ut),u.ju().Vu(r),i.Eo()&&i.No()&&(i.Uo(n-i.Wo()),i.To(!1)),e.Zs(),i.Ho(),i.Ro(!1),t.hasOwnProperty("ns_st_pe")&&o.vr(t.ns_st_pe,!1)&&u.Gs().ks()},$u:function(n,t){var e=u.getPlaybackSession(),i=e.getAsset(),r=parseInt(t.ns_st_po);e.du(),i.du(),i.ro(),i.Eo()&&(i.No()&&(i.Vo(n),i.To(!1)),i.Ko(r),i.ko(!1)),i.po(n),i.do(n),e.bo(n),i.bo(n),i.ao(r),u.Gs().bs()||(t.ns_st_lt=u.Gs().getLoadTimeOffset()+n-u.Gs().Ss()+"",u.Gs().Is(!0)),u.Ns().resume(),u.S().start();var o=u.Gs().Dr(s.PLAY,t,n);i.jr(o.Ut),i.Kr(o.Ut),u.ju().Vu(o)}})}},{24:24,26:26,58:58}],81:[function(n,t,e){var i=n(24),o=n(26),s=n(58).Lu;t.exports=function(u){i.extend(this,{rs:function(n,t){var e=u.getPlaybackSession().getAsset(),i=parseInt(t.ns_st_po);e.Eo()?e.No()||(e.Oo(n),e.To(!0)):e.io(),e.Eo()||(e.ko(!0),e.To(!0),e.Fo(i),e.Oo(n)),e.po(n),e.do(n)},es:function(n,t){var e=u.getPlaybackSession(),i=e.getAsset();e.Po(n),i.Po(n),i.po(n),i.do(n)},ls:function(n,t){var e=u.getPlaybackSession(),i=e.getAsset(),r=parseInt(t.ns_st_po);e.du(),i.du(),i.Eo()&&(i.No()&&(i.Vo(n),i.To(!1)),i.Ko(r),i.ko(!1)),i.ro(),e.bo(n),i.bo(n),i.po(n),i.do(n),i.ao(r),u.Ns().resume(),u.S().start();var o=u.Gs().Dr(s.PLAY,t,n);i.jr(o.Ut),i.Kr(o.Ut),u.ju().Vu(o)},as:function(n,t){var e=u.getPlaybackSession(),i=e.getAsset();e.so(n),i.so(n),i.po(n),i.do(n)},cs:function(n,t){var e=u.getPlaybackSession().getAsset();e.Eo()&&e.No()&&(e.Vo(n),e.To(!1)),e.po(n),e.do(n)},ps:function(n,t){var e=u.getPlaybackSession(),i=e.getAsset();u.Gs().Ts(),u.S().stop(),i.po(n);var r=u.Gs().Dr(s.END,t,n);i.jr(r.Ut),i.Kr(r.Ut),u.ju().Vu(r),i.Eo()&&i.No()&&(i.Uo(n-i.Wo()),i.To(!1)),e.Zs(),i.Ho(),i.Ro(!1),t.hasOwnProperty("ns_st_pe")&&o.vr(t.ns_st_pe,!1)&&u.Gs().ks()},vs:function(n,t){var e=u.getPlaybackSession().getAsset();e.Eo()&&e.No()&&(e.Vo(n),e.To(!1)),e.po(n),e.do(n)},ss:function(n,t){var e=u.getPlaybackSession(),i=e.getAsset(),r=parseInt(t.ns_st_po);u.Gs().As(),e.so(n),i.so(n),e.bo(n),i.bo(n),i.ao(r),i.po(n),i.do(n),u.Ns().resume(),u.S().start()}})}},{24:24,26:26,58:58}],82:[function(n,t,e){var u,s,i,r=null,a=[],o=1e3,f=1e3;function c(){var o=+new Date;r=i.setInterval(function(){var n=o+u,t=+new Date,e=t-n;if(o=t,Math.abs(e)>s)for(var i=0<e,r=0;r<a.length;++r)a[r](i)},u)}function l(){clearInterval(r),r=null}t.exports={Ou:function(n){a.push(n),r||c()},Yu:function(n){for(var t=0;t<a.length;++t)if(a[t]==n){a.splice(t,1);break}a.length||l()},setPlatformAPI:function(n){i=n},Us:function(n,t){!t&&u||(u=n||o),(r&&t||!r)&&(l(),c())},Bs:function(n,t){s=n||f}}},{}]},{},[16])(16)});

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__("./node_modules/webpack/buildin/global.js"), __webpack_require__("./node_modules/process/browser.js")))

/***/ }),

/***/ "./lib/spring/amd.springstreams-2.0.0.beauty.js":
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_RESULT__;/** START BBC ADDITION **/
!(__WEBPACK_AMD_DEFINE_RESULT__ = (function(){
/** END BBC ADDITION **/

function SpringStreams(f) {
    this.version = "2.0.0";
    var p = "2cnt.net";
    var e = 200;
    var m = 2000;
    var P = "default";
    var G = new Array();
    this.namespace = "com.kma.springstreams";
    this.syncrate = 20;
    this.pausesync = 6;
    this.maxstates = 50;
    var a = this;
    this.pageContext;
    var N;
    A(n());
    if (f) {
        P = f
    }
    x();

    function n() {
        var Q = {
            "2cnt.net": {
                syncrates: [3, 7, 10, 10, 10, 10, 10, 60]
            }
        };
        return Q
    }

    function A(R) {
        var S;
        if (R) {
            for (var Q in R) {
                if (Q == p) {
                    S = R[Q]
                }
            }
            if (S) {
                C(S.syncrates)
            }
        }
    }

    function C(Q) {
        if (Q) {
            N = Q
        }
    }

    function H() {
        return N
    }
    this.getSyncRates = H;

    function t(T, R, Q) {
        if (a.pageContext === undefined) {
            a.pageContext = a.defaultPageContext
        }
        if (!T) {
            return
        }
        var S = new w(this, T, R, Q);
        G.push(S);
        return S
    }
    this.track = t;

    function x() {
        setInterval(k, e);
        setInterval(r, m)
    }

    function b() {
        for (var Q = 0; Q < G.length; ++Q) {
            try {
                G[Q].stop()
            } catch (R) {
                D(R)
            }
        }
    }
    this.unload = b;

    function k(S) {
        for (var Q = 0; Q < G.length; ++Q) {
            try {
                G[Q].update(S)
            } catch (R) {
                D(R)
            }
        }
    }
    this.doUpdate = k;

    function r(S) {
        for (var Q = 0; Q < G.length; ++Q) {
            try {
                G[Q].sync(S)
            } catch (R) {
                D(R)
            }
        }
    }
    this.doSync = r;

    function D(Q) {
        E("", Q)
    }
    this.error = D;

    function u(R, Q) {
        return v([
            [R, Q]
        ])
    }

    function F(Q) {
        if (Q && Q.site != undefined) {
            return Q.site
        }
        return P
    }

    function y(Q) {}
    this.debug = y;

    function l() {
        if (a.pageContext.getWindowLocationURL() === undefined) {
            return "http://"
        }
        if ("https" == a.pageContext.getWindowLocationURL().slice(0, 5)) {
            return "https://ssl-"
        } else {
            return "http://"
        }
    }

    function J() {
        if (!this.nlso) {
            try {
                var Q = "";
                Q = a.pageContext.getLocalStorageItem("i00");
                if (Q) {
                    return "&c=" + Q
                } else {
                    var R = "0000",
                        T = R + Math.ceil((new Date()).getTime() / 1000).toString(16) + (32768 | Math.random() * 65535).toString(16) + R;
                    a.pageContext.setLocalStorageItem("i00", T)
                }
            } catch (S) {
                console.log("error" + S)
            }
        }
        return ""
    }

    function E(S, R) {
        var Q = l() + F(R) + "." + p + "/j0=" + u(S, R) + "?lt=" + (new Date()).getTime().toString(36) + J();
        a.pageContext.preloadImage(Q);
        this.debug(Q)
    }
    this.send = E;

    function v(U) {
        var S;
        var V;
        var T;
        var R;
        var W = /[+&,;=~]/g;
        var X;
        var Q;
        switch (typeof U) {
            case "string":
                return W.test(U) ? escape(U).replace(W, function(Y) {
                    var Z = Q[Y];
                    if (Z) {
                        return Z
                    }
                    return Y
                }) : escape(U);
            case "number":
                return isFinite(U) ? U.toString() : "null";
            case "boolean":
            case "null":
                return U.toString();
            case "object":
                if (!U) {
                    return "null"
                }
                S = [];
                if (typeof U.length == "number" && !(U.propertyIsEnumerable("length"))) {
                    R = U.length;
                    for (V = 0; V < R; V += 1) {
                        S.push(v(U[V]) || "null")
                    }
                    return "," + S.join("+") + ";"
                }
                for (T in U) {
                    if (typeof T == "string") {
                        if (T != "site") {
                            X = v(U[T]);
                            if (X) {
                                S.push(v(T) + "=" + X)
                            }
                        }
                    }
                }
                return "," + S.join("+") + ";"
        }
        return ""
    }

    function w(am, aj, an, ai) {
        var ag = Math.round((Math.random() * 10000000000)).toString(36);
        var V = Math.round(new Date().getTime() / 1000);
        var ac;
        var ao;
        var ae;
        var aa;
        var W = [0, 0, V.toString(36)];
        var X = 0;
        var ap = 0;
        var Y = true;
        var S = false;
        var af;
        var U;
        var R;
        var Q;
        ac = am;
        ao = aj;
        if (ai) {
            af = ai
        } else {
            af = ac.HTML5Adapter
        }
        aa = ah(an);
        ae = new Array();
        ae.push(W);
        Q = 0;
        U = am.syncrate;
        R = am.getSyncRates();
        ad();

        function ah(at) {
            var aq = new Object();
            for (var ar in at) {
                aq[ar] = at[ar]
            }
            return aq
        }

        function al(aq) {
            if (ae.length < ac.maxstates) {
                ae.push(aq)
            }
        }

        function T(aq) {
            W = [aq, aq, Math.round(new Date().getTime() / 1000).toString(36)];
            al(W);
            Y = true;
            X = 0
        }

        function ad() {
            if (R != null) {
                if (Q < R.length) {
                    U = R[Q++];
                    ac.debug("switch syncrate to " + U)
                }
            }
        }

        function Z(au) {
            if (S) {
                return
            }
            var aq = W[1];
            var ar = aq;
            try {
                ar = Math.round(af.getPosition(ao))
            } catch (av) {}
            try {
                if (aq == ar) {
                    if (X >= 0) {
                        X++;
                        if (X == ac.pausesync) {
                            Y = true
                        }
                    }
                    return
                }
                if (X >= ac.pausesync) {
                    T(ar)
                } else {
                    if (aq < ar - 1) {
                        T(ar)
                    } else {
                        if (aq > ar) {
                            T(ar)
                        } else {
                            W[1] = ar;
                            if (W[1] - W[0] >= U) {
                                if (ar - ap >= U) {
                                    Y = true;
                                    ad()
                                }
                            }
                            X = 0
                        }
                    }
                }
            } catch (at) {
                D = true;
                ac.error(at)
            }
        }
        this.update = Z;

        function ak() {
            if (S) {
                return
            }
            Y = true;
            S = true;
            ab(null)
        }
        this.stop = ak;

        function ab(at) {
            if (Y) {
                try {
                    if (ao.width) {
                        aa.sx = ao.width
                    }
                    if (ao.videoWidth) {
                        aa.sx = ao.videoWidth
                    }
                    if (ao.height) {
                        aa.sy = ao.height
                    }
                    if (ao.videoHeight) {
                        aa.sy = ao.videoHeight
                    }
                } catch (ar) {}
                if (a.pageContext.getDeviceID !== undefined && a.pageContext.getDeviceID() !== undefined) {
                    aa[a.pageContext.getDeviceID()["id_name"]] = a.pageContext.getDeviceID()["id_value"]
                }
                aa.uid = ag;
                aa.pst = ae;
                var aq;
                try {
                    if (!aa.dur || aa.dur == 0) {
                        aa.dur = af.getDuration(ao)
                    }
                } catch (ar) {}
                try {
                    aq = af.getMeta(ao)
                } catch (ar) {}
                aa.vt = (Math.round(new Date().getTime() / 1000)) - V;
                ac.send(aq, aa);
                ap = W[1]
            }
            Y = false
        }
        this.sync = ab
    }
    this.defaultPageContext = {
        getLocalStorageItem: h,
        setLocalStorageItem: c,
        preloadImage: z,
        getWindowLocationURL: d,
    };
    this.HTML5Adapter = {
        getMeta: B,
        getPosition: q,
        getDuration: o
    };
    this.DefaultAdapter = {
        getMeta: j,
        getPosition: L,
        getDuration: M
    };
    this.WMStreamAdapter = {
        getMeta: s,
        getPosition: i,
        getDuration: g
    };
    this.RVStreamAdapter = {
        getMeta: O,
        getPosition: K,
        getDuration: I
    };

    function B(Q) {
        return {
            pl: "HTML 5 Video",
            pv: "HTML 5",
            sx: screen.width,
            sy: screen.height
        }
    }

    function o(Q) {
        return Math.round(Q.duration)
    }

    function q(Q) {
        return Q.currentTime
    }

    function j(Q) {
        return {
            pl: "DEF",
            pv: version,
            sx: screen.width,
            sy: screen.height
        }
    }

    function L(Q) {
        return new Date().getTime() / 1000
    }

    function M(Q) {
        return 0
    }

    function s(Q) {
        return {
            pl: "MSWM",
            plv: Q.versionInfo,
            sx: screen.width,
            sy: screen.height
        }
    }

    function i(Q) {
        if (Q.CurrentPosition) {
            return Q.CurrentPosition
        }
        if (Q.currentPosition) {
            return Q.currentPosition
        }
        if (Q.controls) {
            if (Q.controls.currentPosition) {
                return Q.controls.currentPosition
            }
        }
        if (Q.Controls) {
            if (Q.Controls.currentPosition) {
                return Q.Controls.currentPosition
            }
        }
        return 0
    }

    function g(Q) {
        if (Q.currentMedia) {
            if (Q.currentMedia.Duration) {
                return Q.currentMedia.Duration
            }
            if (Q.currentMedia.duration) {
                return Q.currentMedia.duration
            }
        } else {
            if (Q.CurrentMedia) {
                if (Q.CurrentMedia.duration) {
                    return Q.CurrentMedia.duration
                }
                if (Q.CurrentMedia.Duration) {
                    return Q.CurrentMedia.Duration
                }
            }
        }
    }

    function O(Q) {
        return {
            pl: "RV",
            plv: Q.GetVersionInfo(),
            sx: screen.width,
            sy: screen.height
        }
    }

    function K(Q) {
        return (Q.GetPosition() / 1000)
    }

    function I(Q) {
        return (Q.GetLength() / 1000)
    }

    function c(Q, R) {
        localStorage.setItem(Q, R)
    }

    function h(Q) {
        return localStorage.getItem(Q)
    }

    function z(Q) {
        (new Image()).src = Q
    }

    function d() {
        return document.location.href
    }
}
SpringStreams.prototype.setPageContext = function(a) {
    this.pageContext = a
};

/** START BBC ADDITION **/
return SpringStreams;
}).call(exports, __webpack_require__, exports, module),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
/** END BBC ADDITION **/

/***/ }),

/***/ "./node_modules/es6-promise/dist/es6-promise.js":
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(process, global) {/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.5+7f2b526d
 */

(function (global, factory) {
	 true ? module.exports = factory() :
	undefined;
}(this, (function () { 'use strict';

function objectOrFunction(x) {
  var type = typeof x;
  return x !== null && (type === 'object' || type === 'function');
}

function isFunction(x) {
  return typeof x === 'function';
}



var _isArray = void 0;
if (Array.isArray) {
  _isArray = Array.isArray;
} else {
  _isArray = function (x) {
    return Object.prototype.toString.call(x) === '[object Array]';
  };
}

var isArray = _isArray;

var len = 0;
var vertxNext = void 0;
var customSchedulerFn = void 0;

var asap = function asap(callback, arg) {
  queue[len] = callback;
  queue[len + 1] = arg;
  len += 2;
  if (len === 2) {
    // If len is 2, that means that we need to schedule an async flush.
    // If additional callbacks are queued before the queue is flushed, they
    // will be processed by this flush that we are scheduling.
    if (customSchedulerFn) {
      customSchedulerFn(flush);
    } else {
      scheduleFlush();
    }
  }
};

function setScheduler(scheduleFn) {
  customSchedulerFn = scheduleFn;
}

function setAsap(asapFn) {
  asap = asapFn;
}

var browserWindow = typeof window !== 'undefined' ? window : undefined;
var browserGlobal = browserWindow || {};
var BrowserMutationObserver = browserGlobal.MutationObserver || browserGlobal.WebKitMutationObserver;
var isNode = typeof self === 'undefined' && typeof process !== 'undefined' && {}.toString.call(process) === '[object process]';

// test for web worker but not in IE10
var isWorker = typeof Uint8ClampedArray !== 'undefined' && typeof importScripts !== 'undefined' && typeof MessageChannel !== 'undefined';

// node
function useNextTick() {
  // node version 0.10.x displays a deprecation warning when nextTick is used recursively
  // see https://github.com/cujojs/when/issues/410 for details
  return function () {
    return process.nextTick(flush);
  };
}

// vertx
function useVertxTimer() {
  if (typeof vertxNext !== 'undefined') {
    return function () {
      vertxNext(flush);
    };
  }

  return useSetTimeout();
}

function useMutationObserver() {
  var iterations = 0;
  var observer = new BrowserMutationObserver(flush);
  var node = document.createTextNode('');
  observer.observe(node, { characterData: true });

  return function () {
    node.data = iterations = ++iterations % 2;
  };
}

// web worker
function useMessageChannel() {
  var channel = new MessageChannel();
  channel.port1.onmessage = flush;
  return function () {
    return channel.port2.postMessage(0);
  };
}

function useSetTimeout() {
  // Store setTimeout reference so es6-promise will be unaffected by
  // other code modifying setTimeout (like sinon.useFakeTimers())
  var globalSetTimeout = setTimeout;
  return function () {
    return globalSetTimeout(flush, 1);
  };
}

var queue = new Array(1000);
function flush() {
  for (var i = 0; i < len; i += 2) {
    var callback = queue[i];
    var arg = queue[i + 1];

    callback(arg);

    queue[i] = undefined;
    queue[i + 1] = undefined;
  }

  len = 0;
}

function attemptVertx() {
  try {
    var vertx = Function('return this')().require('vertx');
    vertxNext = vertx.runOnLoop || vertx.runOnContext;
    return useVertxTimer();
  } catch (e) {
    return useSetTimeout();
  }
}

var scheduleFlush = void 0;
// Decide what async method to use to triggering processing of queued callbacks:
if (isNode) {
  scheduleFlush = useNextTick();
} else if (BrowserMutationObserver) {
  scheduleFlush = useMutationObserver();
} else if (isWorker) {
  scheduleFlush = useMessageChannel();
} else if (browserWindow === undefined && "function" === 'function') {
  scheduleFlush = attemptVertx();
} else {
  scheduleFlush = useSetTimeout();
}

function then(onFulfillment, onRejection) {
  var parent = this;

  var child = new this.constructor(noop);

  if (child[PROMISE_ID] === undefined) {
    makePromise(child);
  }

  var _state = parent._state;


  if (_state) {
    var callback = arguments[_state - 1];
    asap(function () {
      return invokeCallback(_state, child, callback, parent._result);
    });
  } else {
    subscribe(parent, child, onFulfillment, onRejection);
  }

  return child;
}

/**
  `Promise.resolve` returns a promise that will become resolved with the
  passed `value`. It is shorthand for the following:

  ```javascript
  let promise = new Promise(function(resolve, reject){
    resolve(1);
  });

  promise.then(function(value){
    // value === 1
  });
  ```

  Instead of writing the above, your code now simply becomes the following:

  ```javascript
  let promise = Promise.resolve(1);

  promise.then(function(value){
    // value === 1
  });
  ```

  @method resolve
  @static
  @param {Any} value value that the returned promise will be resolved with
  Useful for tooling.
  @return {Promise} a promise that will become fulfilled with the given
  `value`
*/
function resolve$1(object) {
  /*jshint validthis:true */
  var Constructor = this;

  if (object && typeof object === 'object' && object.constructor === Constructor) {
    return object;
  }

  var promise = new Constructor(noop);
  resolve(promise, object);
  return promise;
}

var PROMISE_ID = Math.random().toString(36).substring(2);

function noop() {}

var PENDING = void 0;
var FULFILLED = 1;
var REJECTED = 2;

var TRY_CATCH_ERROR = { error: null };

function selfFulfillment() {
  return new TypeError("You cannot resolve a promise with itself");
}

function cannotReturnOwn() {
  return new TypeError('A promises callback cannot return that same promise.');
}

function getThen(promise) {
  try {
    return promise.then;
  } catch (error) {
    TRY_CATCH_ERROR.error = error;
    return TRY_CATCH_ERROR;
  }
}

function tryThen(then$$1, value, fulfillmentHandler, rejectionHandler) {
  try {
    then$$1.call(value, fulfillmentHandler, rejectionHandler);
  } catch (e) {
    return e;
  }
}

function handleForeignThenable(promise, thenable, then$$1) {
  asap(function (promise) {
    var sealed = false;
    var error = tryThen(then$$1, thenable, function (value) {
      if (sealed) {
        return;
      }
      sealed = true;
      if (thenable !== value) {
        resolve(promise, value);
      } else {
        fulfill(promise, value);
      }
    }, function (reason) {
      if (sealed) {
        return;
      }
      sealed = true;

      reject(promise, reason);
    }, 'Settle: ' + (promise._label || ' unknown promise'));

    if (!sealed && error) {
      sealed = true;
      reject(promise, error);
    }
  }, promise);
}

function handleOwnThenable(promise, thenable) {
  if (thenable._state === FULFILLED) {
    fulfill(promise, thenable._result);
  } else if (thenable._state === REJECTED) {
    reject(promise, thenable._result);
  } else {
    subscribe(thenable, undefined, function (value) {
      return resolve(promise, value);
    }, function (reason) {
      return reject(promise, reason);
    });
  }
}

function handleMaybeThenable(promise, maybeThenable, then$$1) {
  if (maybeThenable.constructor === promise.constructor && then$$1 === then && maybeThenable.constructor.resolve === resolve$1) {
    handleOwnThenable(promise, maybeThenable);
  } else {
    if (then$$1 === TRY_CATCH_ERROR) {
      reject(promise, TRY_CATCH_ERROR.error);
      TRY_CATCH_ERROR.error = null;
    } else if (then$$1 === undefined) {
      fulfill(promise, maybeThenable);
    } else if (isFunction(then$$1)) {
      handleForeignThenable(promise, maybeThenable, then$$1);
    } else {
      fulfill(promise, maybeThenable);
    }
  }
}

function resolve(promise, value) {
  if (promise === value) {
    reject(promise, selfFulfillment());
  } else if (objectOrFunction(value)) {
    handleMaybeThenable(promise, value, getThen(value));
  } else {
    fulfill(promise, value);
  }
}

function publishRejection(promise) {
  if (promise._onerror) {
    promise._onerror(promise._result);
  }

  publish(promise);
}

function fulfill(promise, value) {
  if (promise._state !== PENDING) {
    return;
  }

  promise._result = value;
  promise._state = FULFILLED;

  if (promise._subscribers.length !== 0) {
    asap(publish, promise);
  }
}

function reject(promise, reason) {
  if (promise._state !== PENDING) {
    return;
  }
  promise._state = REJECTED;
  promise._result = reason;

  asap(publishRejection, promise);
}

function subscribe(parent, child, onFulfillment, onRejection) {
  var _subscribers = parent._subscribers;
  var length = _subscribers.length;


  parent._onerror = null;

  _subscribers[length] = child;
  _subscribers[length + FULFILLED] = onFulfillment;
  _subscribers[length + REJECTED] = onRejection;

  if (length === 0 && parent._state) {
    asap(publish, parent);
  }
}

function publish(promise) {
  var subscribers = promise._subscribers;
  var settled = promise._state;

  if (subscribers.length === 0) {
    return;
  }

  var child = void 0,
      callback = void 0,
      detail = promise._result;

  for (var i = 0; i < subscribers.length; i += 3) {
    child = subscribers[i];
    callback = subscribers[i + settled];

    if (child) {
      invokeCallback(settled, child, callback, detail);
    } else {
      callback(detail);
    }
  }

  promise._subscribers.length = 0;
}

function tryCatch(callback, detail) {
  try {
    return callback(detail);
  } catch (e) {
    TRY_CATCH_ERROR.error = e;
    return TRY_CATCH_ERROR;
  }
}

function invokeCallback(settled, promise, callback, detail) {
  var hasCallback = isFunction(callback),
      value = void 0,
      error = void 0,
      succeeded = void 0,
      failed = void 0;

  if (hasCallback) {
    value = tryCatch(callback, detail);

    if (value === TRY_CATCH_ERROR) {
      failed = true;
      error = value.error;
      value.error = null;
    } else {
      succeeded = true;
    }

    if (promise === value) {
      reject(promise, cannotReturnOwn());
      return;
    }
  } else {
    value = detail;
    succeeded = true;
  }

  if (promise._state !== PENDING) {
    // noop
  } else if (hasCallback && succeeded) {
    resolve(promise, value);
  } else if (failed) {
    reject(promise, error);
  } else if (settled === FULFILLED) {
    fulfill(promise, value);
  } else if (settled === REJECTED) {
    reject(promise, value);
  }
}

function initializePromise(promise, resolver) {
  try {
    resolver(function resolvePromise(value) {
      resolve(promise, value);
    }, function rejectPromise(reason) {
      reject(promise, reason);
    });
  } catch (e) {
    reject(promise, e);
  }
}

var id = 0;
function nextId() {
  return id++;
}

function makePromise(promise) {
  promise[PROMISE_ID] = id++;
  promise._state = undefined;
  promise._result = undefined;
  promise._subscribers = [];
}

function validationError() {
  return new Error('Array Methods must be provided an Array');
}

var Enumerator = function () {
  function Enumerator(Constructor, input) {
    this._instanceConstructor = Constructor;
    this.promise = new Constructor(noop);

    if (!this.promise[PROMISE_ID]) {
      makePromise(this.promise);
    }

    if (isArray(input)) {
      this.length = input.length;
      this._remaining = input.length;

      this._result = new Array(this.length);

      if (this.length === 0) {
        fulfill(this.promise, this._result);
      } else {
        this.length = this.length || 0;
        this._enumerate(input);
        if (this._remaining === 0) {
          fulfill(this.promise, this._result);
        }
      }
    } else {
      reject(this.promise, validationError());
    }
  }

  Enumerator.prototype._enumerate = function _enumerate(input) {
    for (var i = 0; this._state === PENDING && i < input.length; i++) {
      this._eachEntry(input[i], i);
    }
  };

  Enumerator.prototype._eachEntry = function _eachEntry(entry, i) {
    var c = this._instanceConstructor;
    var resolve$$1 = c.resolve;


    if (resolve$$1 === resolve$1) {
      var _then = getThen(entry);

      if (_then === then && entry._state !== PENDING) {
        this._settledAt(entry._state, i, entry._result);
      } else if (typeof _then !== 'function') {
        this._remaining--;
        this._result[i] = entry;
      } else if (c === Promise$1) {
        var promise = new c(noop);
        handleMaybeThenable(promise, entry, _then);
        this._willSettleAt(promise, i);
      } else {
        this._willSettleAt(new c(function (resolve$$1) {
          return resolve$$1(entry);
        }), i);
      }
    } else {
      this._willSettleAt(resolve$$1(entry), i);
    }
  };

  Enumerator.prototype._settledAt = function _settledAt(state, i, value) {
    var promise = this.promise;


    if (promise._state === PENDING) {
      this._remaining--;

      if (state === REJECTED) {
        reject(promise, value);
      } else {
        this._result[i] = value;
      }
    }

    if (this._remaining === 0) {
      fulfill(promise, this._result);
    }
  };

  Enumerator.prototype._willSettleAt = function _willSettleAt(promise, i) {
    var enumerator = this;

    subscribe(promise, undefined, function (value) {
      return enumerator._settledAt(FULFILLED, i, value);
    }, function (reason) {
      return enumerator._settledAt(REJECTED, i, reason);
    });
  };

  return Enumerator;
}();

/**
  `Promise.all` accepts an array of promises, and returns a new promise which
  is fulfilled with an array of fulfillment values for the passed promises, or
  rejected with the reason of the first passed promise to be rejected. It casts all
  elements of the passed iterable to promises as it runs this algorithm.

  Example:

  ```javascript
  let promise1 = resolve(1);
  let promise2 = resolve(2);
  let promise3 = resolve(3);
  let promises = [ promise1, promise2, promise3 ];

  Promise.all(promises).then(function(array){
    // The array here would be [ 1, 2, 3 ];
  });
  ```

  If any of the `promises` given to `all` are rejected, the first promise
  that is rejected will be given as an argument to the returned promises's
  rejection handler. For example:

  Example:

  ```javascript
  let promise1 = resolve(1);
  let promise2 = reject(new Error("2"));
  let promise3 = reject(new Error("3"));
  let promises = [ promise1, promise2, promise3 ];

  Promise.all(promises).then(function(array){
    // Code here never runs because there are rejected promises!
  }, function(error) {
    // error.message === "2"
  });
  ```

  @method all
  @static
  @param {Array} entries array of promises
  @param {String} label optional string for labeling the promise.
  Useful for tooling.
  @return {Promise} promise that is fulfilled when all `promises` have been
  fulfilled, or rejected if any of them become rejected.
  @static
*/
function all(entries) {
  return new Enumerator(this, entries).promise;
}

/**
  `Promise.race` returns a new promise which is settled in the same way as the
  first passed promise to settle.

  Example:

  ```javascript
  let promise1 = new Promise(function(resolve, reject){
    setTimeout(function(){
      resolve('promise 1');
    }, 200);
  });

  let promise2 = new Promise(function(resolve, reject){
    setTimeout(function(){
      resolve('promise 2');
    }, 100);
  });

  Promise.race([promise1, promise2]).then(function(result){
    // result === 'promise 2' because it was resolved before promise1
    // was resolved.
  });
  ```

  `Promise.race` is deterministic in that only the state of the first
  settled promise matters. For example, even if other promises given to the
  `promises` array argument are resolved, but the first settled promise has
  become rejected before the other promises became fulfilled, the returned
  promise will become rejected:

  ```javascript
  let promise1 = new Promise(function(resolve, reject){
    setTimeout(function(){
      resolve('promise 1');
    }, 200);
  });

  let promise2 = new Promise(function(resolve, reject){
    setTimeout(function(){
      reject(new Error('promise 2'));
    }, 100);
  });

  Promise.race([promise1, promise2]).then(function(result){
    // Code here never runs
  }, function(reason){
    // reason.message === 'promise 2' because promise 2 became rejected before
    // promise 1 became fulfilled
  });
  ```

  An example real-world use case is implementing timeouts:

  ```javascript
  Promise.race([ajax('foo.json'), timeout(5000)])
  ```

  @method race
  @static
  @param {Array} promises array of promises to observe
  Useful for tooling.
  @return {Promise} a promise which settles in the same way as the first passed
  promise to settle.
*/
function race(entries) {
  /*jshint validthis:true */
  var Constructor = this;

  if (!isArray(entries)) {
    return new Constructor(function (_, reject) {
      return reject(new TypeError('You must pass an array to race.'));
    });
  } else {
    return new Constructor(function (resolve, reject) {
      var length = entries.length;
      for (var i = 0; i < length; i++) {
        Constructor.resolve(entries[i]).then(resolve, reject);
      }
    });
  }
}

/**
  `Promise.reject` returns a promise rejected with the passed `reason`.
  It is shorthand for the following:

  ```javascript
  let promise = new Promise(function(resolve, reject){
    reject(new Error('WHOOPS'));
  });

  promise.then(function(value){
    // Code here doesn't run because the promise is rejected!
  }, function(reason){
    // reason.message === 'WHOOPS'
  });
  ```

  Instead of writing the above, your code now simply becomes the following:

  ```javascript
  let promise = Promise.reject(new Error('WHOOPS'));

  promise.then(function(value){
    // Code here doesn't run because the promise is rejected!
  }, function(reason){
    // reason.message === 'WHOOPS'
  });
  ```

  @method reject
  @static
  @param {Any} reason value that the returned promise will be rejected with.
  Useful for tooling.
  @return {Promise} a promise rejected with the given `reason`.
*/
function reject$1(reason) {
  /*jshint validthis:true */
  var Constructor = this;
  var promise = new Constructor(noop);
  reject(promise, reason);
  return promise;
}

function needsResolver() {
  throw new TypeError('You must pass a resolver function as the first argument to the promise constructor');
}

function needsNew() {
  throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");
}

/**
  Promise objects represent the eventual result of an asynchronous operation. The
  primary way of interacting with a promise is through its `then` method, which
  registers callbacks to receive either a promise's eventual value or the reason
  why the promise cannot be fulfilled.

  Terminology
  -----------

  - `promise` is an object or function with a `then` method whose behavior conforms to this specification.
  - `thenable` is an object or function that defines a `then` method.
  - `value` is any legal JavaScript value (including undefined, a thenable, or a promise).
  - `exception` is a value that is thrown using the throw statement.
  - `reason` is a value that indicates why a promise was rejected.
  - `settled` the final resting state of a promise, fulfilled or rejected.

  A promise can be in one of three states: pending, fulfilled, or rejected.

  Promises that are fulfilled have a fulfillment value and are in the fulfilled
  state.  Promises that are rejected have a rejection reason and are in the
  rejected state.  A fulfillment value is never a thenable.

  Promises can also be said to *resolve* a value.  If this value is also a
  promise, then the original promise's settled state will match the value's
  settled state.  So a promise that *resolves* a promise that rejects will
  itself reject, and a promise that *resolves* a promise that fulfills will
  itself fulfill.


  Basic Usage:
  ------------

  ```js
  let promise = new Promise(function(resolve, reject) {
    // on success
    resolve(value);

    // on failure
    reject(reason);
  });

  promise.then(function(value) {
    // on fulfillment
  }, function(reason) {
    // on rejection
  });
  ```

  Advanced Usage:
  ---------------

  Promises shine when abstracting away asynchronous interactions such as
  `XMLHttpRequest`s.

  ```js
  function getJSON(url) {
    return new Promise(function(resolve, reject){
      let xhr = new XMLHttpRequest();

      xhr.open('GET', url);
      xhr.onreadystatechange = handler;
      xhr.responseType = 'json';
      xhr.setRequestHeader('Accept', 'application/json');
      xhr.send();

      function handler() {
        if (this.readyState === this.DONE) {
          if (this.status === 200) {
            resolve(this.response);
          } else {
            reject(new Error('getJSON: `' + url + '` failed with status: [' + this.status + ']'));
          }
        }
      };
    });
  }

  getJSON('/posts.json').then(function(json) {
    // on fulfillment
  }, function(reason) {
    // on rejection
  });
  ```

  Unlike callbacks, promises are great composable primitives.

  ```js
  Promise.all([
    getJSON('/posts'),
    getJSON('/comments')
  ]).then(function(values){
    values[0] // => postsJSON
    values[1] // => commentsJSON

    return values;
  });
  ```

  @class Promise
  @param {Function} resolver
  Useful for tooling.
  @constructor
*/

var Promise$1 = function () {
  function Promise(resolver) {
    this[PROMISE_ID] = nextId();
    this._result = this._state = undefined;
    this._subscribers = [];

    if (noop !== resolver) {
      typeof resolver !== 'function' && needsResolver();
      this instanceof Promise ? initializePromise(this, resolver) : needsNew();
    }
  }

  /**
  The primary way of interacting with a promise is through its `then` method,
  which registers callbacks to receive either a promise's eventual value or the
  reason why the promise cannot be fulfilled.
   ```js
  findUser().then(function(user){
    // user is available
  }, function(reason){
    // user is unavailable, and you are given the reason why
  });
  ```
   Chaining
  --------
   The return value of `then` is itself a promise.  This second, 'downstream'
  promise is resolved with the return value of the first promise's fulfillment
  or rejection handler, or rejected if the handler throws an exception.
   ```js
  findUser().then(function (user) {
    return user.name;
  }, function (reason) {
    return 'default name';
  }).then(function (userName) {
    // If `findUser` fulfilled, `userName` will be the user's name, otherwise it
    // will be `'default name'`
  });
   findUser().then(function (user) {
    throw new Error('Found user, but still unhappy');
  }, function (reason) {
    throw new Error('`findUser` rejected and we're unhappy');
  }).then(function (value) {
    // never reached
  }, function (reason) {
    // if `findUser` fulfilled, `reason` will be 'Found user, but still unhappy'.
    // If `findUser` rejected, `reason` will be '`findUser` rejected and we're unhappy'.
  });
  ```
  If the downstream promise does not specify a rejection handler, rejection reasons will be propagated further downstream.
   ```js
  findUser().then(function (user) {
    throw new PedagogicalException('Upstream error');
  }).then(function (value) {
    // never reached
  }).then(function (value) {
    // never reached
  }, function (reason) {
    // The `PedgagocialException` is propagated all the way down to here
  });
  ```
   Assimilation
  ------------
   Sometimes the value you want to propagate to a downstream promise can only be
  retrieved asynchronously. This can be achieved by returning a promise in the
  fulfillment or rejection handler. The downstream promise will then be pending
  until the returned promise is settled. This is called *assimilation*.
   ```js
  findUser().then(function (user) {
    return findCommentsByAuthor(user);
  }).then(function (comments) {
    // The user's comments are now available
  });
  ```
   If the assimliated promise rejects, then the downstream promise will also reject.
   ```js
  findUser().then(function (user) {
    return findCommentsByAuthor(user);
  }).then(function (comments) {
    // If `findCommentsByAuthor` fulfills, we'll have the value here
  }, function (reason) {
    // If `findCommentsByAuthor` rejects, we'll have the reason here
  });
  ```
   Simple Example
  --------------
   Synchronous Example
   ```javascript
  let result;
   try {
    result = findResult();
    // success
  } catch(reason) {
    // failure
  }
  ```
   Errback Example
   ```js
  findResult(function(result, err){
    if (err) {
      // failure
    } else {
      // success
    }
  });
  ```
   Promise Example;
   ```javascript
  findResult().then(function(result){
    // success
  }, function(reason){
    // failure
  });
  ```
   Advanced Example
  --------------
   Synchronous Example
   ```javascript
  let author, books;
   try {
    author = findAuthor();
    books  = findBooksByAuthor(author);
    // success
  } catch(reason) {
    // failure
  }
  ```
   Errback Example
   ```js
   function foundBooks(books) {
   }
   function failure(reason) {
   }
   findAuthor(function(author, err){
    if (err) {
      failure(err);
      // failure
    } else {
      try {
        findBoooksByAuthor(author, function(books, err) {
          if (err) {
            failure(err);
          } else {
            try {
              foundBooks(books);
            } catch(reason) {
              failure(reason);
            }
          }
        });
      } catch(error) {
        failure(err);
      }
      // success
    }
  });
  ```
   Promise Example;
   ```javascript
  findAuthor().
    then(findBooksByAuthor).
    then(function(books){
      // found books
  }).catch(function(reason){
    // something went wrong
  });
  ```
   @method then
  @param {Function} onFulfilled
  @param {Function} onRejected
  Useful for tooling.
  @return {Promise}
  */

  /**
  `catch` is simply sugar for `then(undefined, onRejection)` which makes it the same
  as the catch block of a try/catch statement.
  ```js
  function findAuthor(){
  throw new Error('couldn't find that author');
  }
  // synchronous
  try {
  findAuthor();
  } catch(reason) {
  // something went wrong
  }
  // async with promises
  findAuthor().catch(function(reason){
  // something went wrong
  });
  ```
  @method catch
  @param {Function} onRejection
  Useful for tooling.
  @return {Promise}
  */


  Promise.prototype.catch = function _catch(onRejection) {
    return this.then(null, onRejection);
  };

  /**
    `finally` will be invoked regardless of the promise's fate just as native
    try/catch/finally behaves
  
    Synchronous example:
  
    ```js
    findAuthor() {
      if (Math.random() > 0.5) {
        throw new Error();
      }
      return new Author();
    }
  
    try {
      return findAuthor(); // succeed or fail
    } catch(error) {
      return findOtherAuther();
    } finally {
      // always runs
      // doesn't affect the return value
    }
    ```
  
    Asynchronous example:
  
    ```js
    findAuthor().catch(function(reason){
      return findOtherAuther();
    }).finally(function(){
      // author was either found, or not
    });
    ```
  
    @method finally
    @param {Function} callback
    @return {Promise}
  */


  Promise.prototype.finally = function _finally(callback) {
    var promise = this;
    var constructor = promise.constructor;

    if (isFunction(callback)) {
      return promise.then(function (value) {
        return constructor.resolve(callback()).then(function () {
          return value;
        });
      }, function (reason) {
        return constructor.resolve(callback()).then(function () {
          throw reason;
        });
      });
    }

    return promise.then(callback, callback);
  };

  return Promise;
}();

Promise$1.prototype.then = then;
Promise$1.all = all;
Promise$1.race = race;
Promise$1.resolve = resolve$1;
Promise$1.reject = reject$1;
Promise$1._setScheduler = setScheduler;
Promise$1._setAsap = setAsap;
Promise$1._asap = asap;

/*global self*/
function polyfill() {
  var local = void 0;

  if (typeof global !== 'undefined') {
    local = global;
  } else if (typeof self !== 'undefined') {
    local = self;
  } else {
    try {
      local = Function('return this')();
    } catch (e) {
      throw new Error('polyfill failed because global object is unavailable in this environment');
    }
  }

  var P = local.Promise;

  if (P) {
    var promiseToString = null;
    try {
      promiseToString = Object.prototype.toString.call(P.resolve());
    } catch (e) {
      // silently ignored
    }

    if (promiseToString === '[object Promise]' && !P.cast) {
      return;
    }
  }

  local.Promise = Promise$1;
}

// Strange compat..
Promise$1.polyfill = polyfill;
Promise$1.Promise = Promise$1;

return Promise$1;

})));



//# sourceMappingURL=es6-promise.map

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__("./node_modules/process/browser.js"), __webpack_require__("./node_modules/webpack/buildin/global.js")))

/***/ }),

/***/ "./node_modules/process/browser.js":
/***/ (function(module, exports) {

// shim for using process in browser
var process = module.exports = {};

// cached from whatever global is present so that test runners that stub it
// don't break things.  But we need to wrap it in a try catch in case it is
// wrapped in strict mode code which doesn't define any globals.  It's inside a
// function because try/catches deoptimize in certain engines.

var cachedSetTimeout;
var cachedClearTimeout;

function defaultSetTimout() {
    throw new Error('setTimeout has not been defined');
}
function defaultClearTimeout () {
    throw new Error('clearTimeout has not been defined');
}
(function () {
    try {
        if (typeof setTimeout === 'function') {
            cachedSetTimeout = setTimeout;
        } else {
            cachedSetTimeout = defaultSetTimout;
        }
    } catch (e) {
        cachedSetTimeout = defaultSetTimout;
    }
    try {
        if (typeof clearTimeout === 'function') {
            cachedClearTimeout = clearTimeout;
        } else {
            cachedClearTimeout = defaultClearTimeout;
        }
    } catch (e) {
        cachedClearTimeout = defaultClearTimeout;
    }
} ())
function runTimeout(fun) {
    if (cachedSetTimeout === setTimeout) {
        //normal enviroments in sane situations
        return setTimeout(fun, 0);
    }
    // if setTimeout wasn't available but was latter defined
    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {
        cachedSetTimeout = setTimeout;
        return setTimeout(fun, 0);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedSetTimeout(fun, 0);
    } catch(e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally
            return cachedSetTimeout.call(null, fun, 0);
        } catch(e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error
            return cachedSetTimeout.call(this, fun, 0);
        }
    }


}
function runClearTimeout(marker) {
    if (cachedClearTimeout === clearTimeout) {
        //normal enviroments in sane situations
        return clearTimeout(marker);
    }
    // if clearTimeout wasn't available but was latter defined
    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {
        cachedClearTimeout = clearTimeout;
        return clearTimeout(marker);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedClearTimeout(marker);
    } catch (e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally
            return cachedClearTimeout.call(null, marker);
        } catch (e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.
            // Some versions of I.E. have different rules for clearTimeout vs setTimeout
            return cachedClearTimeout.call(this, marker);
        }
    }



}
var queue = [];
var draining = false;
var currentQueue;
var queueIndex = -1;

function cleanUpNextTick() {
    if (!draining || !currentQueue) {
        return;
    }
    draining = false;
    if (currentQueue.length) {
        queue = currentQueue.concat(queue);
    } else {
        queueIndex = -1;
    }
    if (queue.length) {
        drainQueue();
    }
}

function drainQueue() {
    if (draining) {
        return;
    }
    var timeout = runTimeout(cleanUpNextTick);
    draining = true;

    var len = queue.length;
    while(len) {
        currentQueue = queue;
        queue = [];
        while (++queueIndex < len) {
            if (currentQueue) {
                currentQueue[queueIndex].run();
            }
        }
        queueIndex = -1;
        len = queue.length;
    }
    currentQueue = null;
    draining = false;
    runClearTimeout(timeout);
}

process.nextTick = function (fun) {
    var args = new Array(arguments.length - 1);
    if (arguments.length > 1) {
        for (var i = 1; i < arguments.length; i++) {
            args[i - 1] = arguments[i];
        }
    }
    queue.push(new Item(fun, args));
    if (queue.length === 1 && !draining) {
        runTimeout(drainQueue);
    }
};

// v8 likes predictible objects
function Item(fun, array) {
    this.fun = fun;
    this.array = array;
}
Item.prototype.run = function () {
    this.fun.apply(null, this.array);
};
process.title = 'browser';
process.browser = true;
process.env = {};
process.argv = [];
process.version = ''; // empty string to avoid regexp issues
process.versions = {};

function noop() {}

process.on = noop;
process.addListener = noop;
process.once = noop;
process.off = noop;
process.removeListener = noop;
process.removeAllListeners = noop;
process.emit = noop;
process.prependListener = noop;
process.prependOnceListener = noop;

process.listeners = function (name) { return [] }

process.binding = function (name) {
    throw new Error('process.binding is not supported');
};

process.cwd = function () { return '/' };
process.chdir = function (dir) {
    throw new Error('process.chdir is not supported');
};
process.umask = function() { return 0; };


/***/ }),

/***/ "./node_modules/ssc-js/src/ssc_helper.js":
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__;(function(global, factory) {
  if (true) {
    return !(__WEBPACK_AMD_DEFINE_FACTORY__ = (factory),
				__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?
				(__WEBPACK_AMD_DEFINE_FACTORY__.call(exports, __webpack_require__, exports, module)) :
				__WEBPACK_AMD_DEFINE_FACTORY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
  } else {}
}(this, function() {

  var sscPerformanceCookieName;
  var sscNecessaryCookieName;
  var s1CookieName;
  var uidPerformanceCookieName;
  var uidNecessaryCookieName;
  var sscCoUkHostname;
  var sscComHostname;
  var scorecardresearchHttpHostname;
  var scorecardresearchHttpsHostname;

  sscPerformanceCookieName = "ckpf_sscid";
  sscNecessaryCookieName = "ckns_sscid";
  s1CookieName = "s1";
  uidPerformanceCookieName = "ckpf_uid";
  uidNecessaryCookieName = "ckns_uid";
  sscCoUkHostname = "ssc.api.bbc.co.uk";
  sscComHostname = "ssc.api.bbc.com";
  scorecardresearchHttpHostname = "b.scorecardresearch.com";
  scorecardresearchHttpsHostname = "sb.scorecardresearch.com";

  /**
   * @constructor
   */
  function SSCHelper(options) { 
    options = options || {};
    this.alwaysUseHttps = true === options.alwaysUseHttps || false;
    this.forceBBCHost = false;
    this._sscCookieId = undefined;
    this._s1CookieId = undefined;
    this._uidCookieId = undefined;
    if (".co.uk" === options.forceBBCHost) {
      this.forceBBCHost = ".co.uk";
    } else if (".com" === options.forceBBCHost) {
      this.forceBBCHost = ".com";
    }
  }

   /**
    * Get a cookie value by key
    *
    * @param {String} key
    *
    * @return {*}
    */
  SSCHelper.prototype.getCookie = function(key) {
    return decodeURIComponent(
      document.cookie.replace(
        new RegExp(
          "(?:(?:^|.*;)\\s*" +
          encodeURIComponent(key).replace(/[\-\.\+\*]/g, "\\$&") +
          "\\s*\\=\\s*([^;]*).*$)|^.*$"
        ),
        "$1"
      )
    ) || null;
  };

  /**
   * Returns the window location. 
   *
   * @return {Boolean}
   */
  SSCHelper.prototype.getLocation = function() {
    return window.location;
  };

  /**
   * Returns the most precedent ID.
   * May be one of ckpf_sscid or s1 depending on configuration.
   *
   * @return {String|null}
   */
  SSCHelper.prototype.getCookieId = function() {
    var id;
    var sscHostname;
    var location;
    var isCoUKSSCHostnameAndPage;
    var isComSSCHostnameAndPage;

    sscHostname = this.getSSCHostname();
    location = this.getLocation();

    /**
     * Ensure that the page hostname is in the same scope as the cookie server.
     * We do not want to use the .co.uk page cookie if reporting to the .com 
     * SSC server.
     */
    isCoUKSSCHostnameAndPage = sscHostname === sscCoUkHostname && -1 !== location.hostname.search(/bbc.co.uk$/);
    isComSSCHostnameAndPage = sscHostname === sscComHostname && -1 !== location.hostname.search(/bbc.com$/);
    if (isCoUKSSCHostnameAndPage || isComSSCHostnameAndPage) {
      id = this.getSSCCookieId();
      if (null === id || undefined === id) {
        if (isCoUKSSCHostnameAndPage) {
          id = this.getS1CookieId();
        } else if (isComSSCHostnameAndPage) {
          id = this.getUidCookieId();
        }
      }
    }

    return id;
  };

  /**
   * Returns the s1 cookie ID
   *
   * @return {String|null}
   */
  SSCHelper.prototype.getS1CookieId = function() {
    var cookieId;
    if (undefined === this._s1CookieValue) {
      // returns a string or null
      this._s1CookieValue = this.getCookie(s1CookieName);
    }

    return this._s1CookieValue;
  };

  /**
   * Returns the ckpf_uid cookie ID
   *
   * @return {String|null}
   */
  SSCHelper.prototype.getUidCookieId = function() {
    var cookieId;
    if (undefined === this._uidCookieValue) {
      // returns a string from the necessary cookie or null
      this._uidCookieValue = this.getCookie(uidNecessaryCookieName);
      if (this._uidCookieValue === null) {
        // returns a string from the performance cookie or null
        this._uidCookieValue = this.getCookie(uidPerformanceCookieName);
      }
    }

    return this._uidCookieValue;
  };

  /**
   * Returns the SSC cookie ID
   *
   * @return {String|null}
   */
  SSCHelper.prototype.getSSCCookieId = function() {
    var cookieId;
    /**
     * This logic prevent the cookie value being checked more than 
     * once per instance. On a users first page impression it 
     * may be desirable to check > 1 time as the cookie may be set 
     * on the second check in which case we could report directly
     * to scorecardresearch.com avoiding a redirect.
     */
    if (undefined === this._sscCookieValue) {
      // returns a string from the necessary cookie or null
      this._sscCookieValue = this.getCookie(sscNecessaryCookieName);
      if (this._sscCookieValue === null) {
        // returns a string from the performance cookie or null
        this._sscCookieValue = this.getCookie(sscPerformanceCookieName);
      }
    }

    return this._sscCookieValue;
  };

  /**
   * @todo test this
   *
   * Validate that a string is a valid Id. An ID may be
   * - a legacy S1 cookie eg 61.162.156542A1600C59201D58DE32985
   * - a RCF 4122 v4 UUID eg cc6b02c3-313e-428b-a760-1b482f5899d7
   *
   * @param {String} id the value to test
   *
   * @return Boolean is the value valid
   */
  SSCHelper.prototype.isValidId = function(id) {
    var matches;
    var isValid;
    isValid = false;
    /**
     * comscore labels can contain any character excluding < and >
     * the regex matches any string that does not contain a <, > or space
     */
    if ("string" === typeof id && -1 !== id.search(/^[^(?!<>\s)]+$/)) {
      isValid = true;
    }
    return isValid;
  };  

  /**
   * Returns an object describing the analytics request location
   *
   * @param  {String} search An optional query string
   * @param  {String} id Optional ID to use for ns_alias
   *
   * @return {Boolean}
   */
  SSCHelper.prototype.getAnalyticsLocation = function(search, id) {
    var result;
    var location;
    var useBBCDotComHost;
    var sscHostname;
    var isCoUKSSCHostnameAndPage;
    var queryStringPosition;
    var searchContainsNsAliasParameter;
    var isValidId;
    sscHostname = this.getSSCHostname();
    location = this.getLocation();

    result = {
      sscId: undefined
    };

    if ("string" !== typeof search) {
      search = "";
    }

    if (undefined === id || false === this.isValidId(id)) {
      id = this.getCookieId();
    }

    if (this.alwaysUseHttps || location.protocol === "https:") {
      result.protocol = "https:";
    } else {
      result.protocol = "http:";
    }

    searchContainsNsAliasParameter = -1 !== search.search(/ns_alias=/);
    isValidId = this.isValidId(id);
    if (searchContainsNsAliasParameter || isValidId) {
      result.hostname = this.getScorecardresearchHostname();
    } else {
      result.hostname = this.getSSCHostname();
    }

    if (isValidId) {
      if (search === "") {
        search = "?ns_alias=" + id;
      } else {
        /**
         * We always insert ns_alias at the start of the query string 
         * before and other labels.
         */
        queryStringPosition = search.search(/\?/) + 1;
        search = [
          search.slice(0, queryStringPosition), 
          "ns_alias=" + id + "&", 
          search.slice(queryStringPosition)
        ].join("");
      }
      result.sscId = id;
    }
    result.search = search;

    if (-1 !== result.hostname.search(/scorecardresearch.com$/)) {
      result.pathname = "/p";  
    } else {
      result.pathname = "/";  
    }

    result.href = result.protocol + "//" + result.hostname + result.pathname + result.search;

    return result;
  };

  /**
   * Returns the appropriate SSC server hostname.
   *
   * @return {Boolean}
   */
  SSCHelper.prototype.getSSCHostname = function() {
    var hostname;
    var location;
    location = this.getLocation();

    if (
      this.forceBBCHost !== ".com" &&
      (
        this.forceBBCHost === ".co.uk" || -1 !== location.hostname.search(/bbc\.co\.uk$/)
      )
    ) {
      hostname = sscCoUkHostname;
    } else {
      hostname = sscComHostname;
    }

    return hostname;
  };

  /**
   * Returns the appropriate scorecardresearch server hostname.
   *
   * @return {Boolean}
   */
  SSCHelper.prototype.getScorecardresearchHostname = function() {
    var hostname;
    var location;
    location = this.getLocation();

    if (location.protocol === "https:") {
      hostname = scorecardresearchHttpsHostname;
    } else {
      hostname = scorecardresearchHttpHostname;
    }

    return hostname;
  };

  return SSCHelper;

}));


/***/ }),

/***/ "./node_modules/webpack/buildin/global.js":
/***/ (function(module, exports) {

var g;

// This works in non-strict mode
g = (function() {
	return this;
})();

try {
	// This works if eval is allowed (see CSP)
	g = g || new Function("return this")();
} catch (e) {
	// This works if the window reference is available
	if (typeof window === "object") g = window;
}

// g can still be undefined, but nothing to do about it...
// We return undefined, instead of nothing here, so it's
// easier to handle this case. if(!global) { ...}

module.exports = g;


/***/ }),

/***/ "./package.json":
/***/ (function(module) {

module.exports = {"name":"@bbc/echo-client-js","description":"Client library for sending events","version":"12.3.0","main":"dist/echo.js","scripts":{"test":"grunt build","build":"grunt build","build:dev":"webpack --mode=development --config ./config/webpack.dev.config.js","build:dist":"webpack --mode=production --config ./config/webpack.prod.config.js"},"pre-commit":["test"],"echo-client-js":{"barb-spring-version":"2.0.0","comscore-streamsense-version":"6.2.3.180328","ati-smarttag-version":"5.17.1"},"devDependencies":{"ajv":"^6.6.2","es6-promise":"^4.2.5","eslint":"^5.12.0","grunt":"^1.0.3","grunt-cli":"^1.3.2","grunt-contrib-jshint":"^2.0.0","grunt-contrib-watch":"^1.1.0","grunt-jscs":"^3.0.1","grunt-karma":"^3.0.1","grunt-shell":"^2.1.0","gulp":"^4.0.0","hoek":"^6.1.2","istanbul-instrumenter-loader":"^3.0.1","jasmine":"^3.3.1","jasmine-core":"^3.3.0","jquery":"^3.3.1","karma":"^3.1.4","karma-chrome-launcher":"*","karma-coverage-istanbul-reporter":"^2.0.4","karma-firefox-launcher":"^1.1.0","karma-jasmine":"^2.0.1","karma-jasmine-html-reporter":"^1.4.0","karma-phantomjs-launcher":"^1.0.4","karma-requirejs":"^1.1.0","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.7","karma-story-reporter":"^0.3.1","karma-webpack":"^3.0.0","load-grunt-tasks":"^4.0.0","lodash":"^4.17.11","phantomjs-prebuilt":"^2.1.16","pre-commit":"^1.2.2","requirejs":"^2.3.6","sinon":"^7.2.2","ssc-js":"git+ssh://git@github.com/bbc/ssc-js.git#1.2.0","time-grunt":"^2.0.0","uglifyjs-webpack-plugin":"^2.1.1","webpack":"^4.28.4","webpack-cli":"^3.2.1","webpack-merge":"^4.2.1"}};

/***/ }),

/***/ "./src/echo.js":
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__("./src/echo/bootstrap.js")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(bootstrap) {
    'use strict';

    if (window && window.bbccookies) {
      bootstrap.Environment.setOrbCookies(window.bbccookies);
    }

    return bootstrap;
  }).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),

/***/ "./src/echo/bootstrap.js":
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_RESULT__ = (function(require) {
  'use strict';

  /**
   * Exports the EchoClient class, used for sending usage events
   * @exports Echo
   * @author James Skinner <james.skinner1@bbc.co.uk>
   * @example
  require(['echo'],function(Echo){
    var Media = Echo.Media,             // Media class
      EchoClient = Echo.EchoClient,   // Echo Client class
      Enums = Echo.Enums,             // Enums
      ConfigKeys = Echo.ConfigKeys,   // Key names to use in config
      Environment = Echo.Environment;

    // ** Enable Debug mode (for testing)
    Echo.Debug.enable();
  });

 */
  var meta = __webpack_require__("./src/echo/meta.js");

  var Environment = __webpack_require__("./src/echo/environment.js");

  var exports = {
    /** EchoClient class */
    EchoClient: __webpack_require__("./src/echo/client.js"),
    /** Media class */
    Media: __webpack_require__("./src/echo/media.js"),
    /** Media Id class */
    MediaId: __webpack_require__("./src/echo/media-id.js"),
    /** Environment class */
    Environment: Environment,
    /** Enumerations */
    Enums: __webpack_require__("./src/echo/enumerations.js"),
    /** Keys to use in config for EchoClient */
    ConfigKeys: __webpack_require__("./src/echo/config/keys.js"),
    /** Used to turn debugging on */
    Debug: __webpack_require__("./src/echo/util/debug.js"),

    getImplementationVersion: function() {
      return meta.VERSION;
    }
  };

  return exports;
}).call(exports, __webpack_require__, exports, module),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),

/***/ "./src/echo/client.js":
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_RESULT__;/**
 * Exports the EchoClient class, used for sending usage events
 * @exports Echo/EchoClient
 */
!(__WEBPACK_AMD_DEFINE_RESULT__ = (function (require) {
  'use strict';

  var DEBUG = __webpack_require__("./src/echo/util/debug.js");
  var Util = __webpack_require__("./src/echo/util/methods.js");

  // some conditions that are illegal from echo's viewpoint (e.g. seek after end event)
  // are considereed legal from the player's viewpoint
  // setting the flag to false will throw an error instead of logging for these cases
  // https://jira.dev.bbc.co.uk/browse/MYSTATS-2863
  var FailSilently = true;

  var ConfigKeys = __webpack_require__("./src/echo/config/keys.js");
  var Destinations = __webpack_require__("./src/echo/config/destinations.js");
  var Producers = __webpack_require__("./src/echo/config/producers.js");
  var Enums = __webpack_require__("./src/echo/enumerations.js");
  var LiveBroker = __webpack_require__("./src/echo/live-broker.js");
  var OnDemandBroker = __webpack_require__("./src/echo/on-demand-broker.js");
  var CSKeys = __webpack_require__("./src/echo/delegate/comscore/label-keys.js");
  var Schedule = __webpack_require__("./src/echo/schedule.js");
  var CookieHelper = __webpack_require__("./src/echo/util/cookies.js");

  var saHostname = 'sa.bbc.co.uk';
  var oldEchoDeviceIdCookieName = 'ckpf_echo_device_id';
  var echoDeviceIdCookieName = 'ckns_echo_device_id';

  var OrbitVariables = __webpack_require__("./src/echo/delegate/ati/orbit-variables.js");
  var Promise = __webpack_require__("./node_modules/es6-promise/dist/es6-promise.js").Promise;

  /**
   * Initialise an EchoClient object
   * @constructor
   * @param {string} appName Application Name
   * @param {string} appType Application Type (one of Enums.AplicationType)
   * @param {object} [config] config key-value pairs to override default config
   * @param {Environment} [env] Environment instance
   *
   * @example
   * var echo = new EchoClient('MyApp',ApplicationType.WEB,"abcdeffedcba");
   */
  function EchoClient(appName, appType, config, env, callback) {
    var self = this;

    config = config || {};

    Util.assertContainsValue(Enums.ApplicationType, appType,
      'appType should be one of Enums.ApplicationType, got "' +
      appType + '"');

    // Create space to hold state for the Application
    this.state = {
      counterNameSet: false
    };

    var c = EchoClient.ConfigGenerator.generate(config);

    this._env = env !== undefined ? env : new EchoClient.Environment();

    // set deviceid and clean of any whitespace
    var deviceId;
    if (c && typeof c[ConfigKeys.ECHO_DEVICE_ID] === 'string') {
      deviceId = Util.trim(c[ConfigKeys.ECHO_DEVICE_ID]);
      if (deviceId.length > 0) {
        c[ConfigKeys.ECHO_DEVICE_ID] = deviceId;
        this._deviceId  = deviceId;
      } else {
        c[ConfigKeys.ECHO_DEVICE_ID] = undefined;
      }
    }

    // if reporting sa.bbc.co.uk and the ckpf_echo_device_id cookie is present
    // use it as the device ID to override the s1 cookie. See MYSTATS-2684
    if (c && c[ConfigKeys.COMSCORE_HOST] === saHostname && !c[ConfigKeys.ECHO_DEVICE_ID]) {
      deviceId = CookieHelper.getCookieValueByName(echoDeviceIdCookieName);
      if (!deviceId) {
        deviceId = CookieHelper.getCookieValueByName(oldEchoDeviceIdCookieName);
      }

      if (deviceId) {
        this._deviceId = deviceId;
        c[ConfigKeys.ECHO_DEVICE_ID] = deviceId;
      }
    }

    if (c && c[ConfigKeys.ECHO_AUTO_START] === false) {
      this._autoStart = false;
    } else {
      this._autoStart = true;
    }

    // Create set of 'consumers'
    this._setConsumers(appName, appType, c, this._env);

    if (c && c[ConfigKeys.USE_ESS]) {
      this._essEnabled = true;
    } else {
      this._essEnabled = false;
    }

    if (c && c[ConfigKeys.ESS_HOSTNAME]) {
      Schedule.essHost = c[ConfigKeys.ESS_HOSTNAME];
    }

    if (c && c[ConfigKeys.ECHO_ENABLED] === false) {
      this._isEnabled = false;
    } else {
      this._isEnabled = true;
    }

    if (c && c[ConfigKeys.DEBUG_MODE] === true) {
      DEBUG.enable();
    } else {
      DEBUG.disable();
    }

    this._liveBroker = null;
    this._onDemandBroker = null;

    this._suppressingPlayEvent = false;
    this._suppressedPlayEventLabels = null;

    this.addLabel('bbc_id_wait', '1');
    EchoClient.Environment.getOrbIdCta(function(orbIdCta) {
      self.removeLabel('bbc_id_wait');
      if (orbIdCta && typeof orbIdCta.getIStatsLabels === 'function') {
        self.addLabels({
          bbc_identity: orbIdCta.getIStatsLabels().bbc_identity,
          bbc_hid: encodeURIComponent(orbIdCta.getIStatsLabels().bbc_hid || 'unidentified-user')
        });
      }
    });

    if (c && c[ConfigKeys.ECHO_CACHE_MODE]) {
      this._cacheMode = c[ConfigKeys.ECHO_CACHE_MODE];
    }

    if (this._isEnabled && this._autoStart) {
      this.start().then(callback);
    }
  }

  EchoClient.prototype.getDebugMode = function() {
    return DEBUG.getState();
  };

  EchoClient.prototype.start = function() {
    if (this._isEnabled && !this._hasStarted) {
      this._hasStarted = true;
      return OrbitVariables.get().then((function (orbitVars) {
        this._delegate('start', [orbitVars]);
        if (orbitVars.pageName &&
            orbitVars.pageName !== '' &&
            orbitVars.pageName !== 'orb.page') {
          this.setCounterName(orbitVars.pageName);
        }
      }).bind(this));
    } else {
      return Promise.reject();
    }
  };

  EchoClient.prototype.enable = function() {
    if (!this._isEnabled) {
      this._isEnabled = true;
      this._delegate('enable');

      if (this._autoStart && !this._hasStarted) {
        this.start();
      }
    }

    return this;
  };

  EchoClient.prototype.disable = function() {
    if (this._isEnabled) {
      this._clearMedia();
      this._isEnabled = false;
      this._delegate('disable');
    }

    return this;
  };

  EchoClient.prototype.isEnabled = function() {
    return this._isEnabled;
  };

  /**
   * @return {String|null}
   */
  EchoClient.prototype.getComScoreDeviceId = function() {
    var delegate;

    if (this.consumers[EchoClient.Consumers.COMSCORE]) {
      delegate = this.consumers[EchoClient.Consumers.COMSCORE];
      if (
        delegate instanceof EchoClient.ComScoreDelegate &&
        typeof delegate.getDeviceId === 'function'
      ) {
        return delegate.getDeviceId();
      }
    }

    return null;
  };

  /**
  * @return {String|null}
  */
  EchoClient.prototype.getAtiDeviceId = function() {
    var delegate;

    if (this.consumers[EchoClient.Consumers.ATI]) {
      delegate = this.consumers[EchoClient.Consumers.ATI];
      if (
        delegate instanceof EchoClient.AtiDelegate &&
        typeof delegate.getDeviceId === 'function'
      ) {
        return delegate.getDeviceId();
      }
    }

    return null;
  };

  /**
   * Set the trace identifier. This can then be used to retrieve the events
   * under test.
   *
   * @param {String} id
   */
  EchoClient.prototype.setTraceId = function(id) {
    this._delegate('setTraceId', [id]);
  };

  // Dependencies, saved here so we can mock them
  EchoClient.ConfigGenerator = __webpack_require__("./src/echo/config/generator.js");
  EchoClient.LabelCleanser = __webpack_require__("./src/echo/util/cleansing/label-cleanser.js");
  EchoClient.Util = __webpack_require__("./src/echo/util/methods.js");
  EchoClient.ComScoreDelegate = __webpack_require__(
    "./src/echo/delegate/comscore/comscore-delegate.js"
  );
  EchoClient.SpringDelegate = __webpack_require__("./src/echo/delegate/spring/spring-delegate.js");
  EchoClient.AtiDelegate = __webpack_require__("./src/echo/delegate/ati/ati-delegate.js");
  EchoClient.Environment = __webpack_require__("./src/echo/environment.js");

  /* *
   * --------------------------------------------------------------------
   * Private Methods
   * --------------------------------------------------------------------
   * */

  EchoClient.prototype._eventsEnabled = function() {
    return this._isEnabled && this._hasStarted;
  };

  EchoClient.prototype._setConsumers = function (appName, appType, conf, env) {
    this.consumers = {};
    var cleanAppName = EchoClient.LabelCleanser.cleanLabelValue(
      'app_name', appName
    );

    if (conf && conf[ConfigKeys.COMSCORE_ENABLED]) {
      this.consumers[EchoClient.Consumers.COMSCORE] =
        new EchoClient.ComScoreDelegate(cleanAppName, appType, conf, env);
    }

    if (conf && conf[ConfigKeys.ATI_ENABLED]) {
      this.consumers[EchoClient.Consumers.ATI] =
        new EchoClient.AtiDelegate(cleanAppName, appType, conf, env);
    }

    if (conf && conf[ConfigKeys.BARB_ENABLED]) {
      this.consumers[EchoClient.Consumers.BARB] =
        new EchoClient.SpringDelegate(cleanAppName, appType, conf, env);
    }

    return this;
  };

  /**
   * Call the specified function on all objects in this.consumers
   * @private
   * @param {String} fName Name of the function
   * @param {Array} args Arguments
   * @param {Array} cleanArgs Cleansed arguments to be used if the consumer requires label cleansing
   */
  EchoClient.prototype._delegate = function(fName, args, cleanArgs) {
    var index;
    var consumer;
    var promises = [];

    for (index in this.consumers) {
      if (index) {
        consumer = this.consumers[index];

        if (cleanArgs && consumer.requiresLabelCleansing()) {
          promises.push(consumer[fName].apply(consumer, cleanArgs));
        } else {
          promises.push(consumer[fName].apply(consumer, args));
        }
      }
    }

    return Promise.all(promises);
  };

  /* *
   * --------------------------------------------------------------------
   * Application state Methods
   * --------------------------------------------------------------------
   * */

  /**
   * Add labels to be sent with every event. Multiple calls to
   * this function will append labels to the current list.
   * Label keys must only contain the following chars : [a-z0-9_-.]
   * Label values must be a string or number
   * @param {object} labels Key-value pairs
   * @returns {EchoClient} `this`
   * @example
   * // set a label
   * echo.addLabels({bun:'cinnamon'});
   * // Update it and set another
   * echo.addLabels({bun:'sticky',princess:'hotdog'});
   */
  EchoClient.prototype.addLabels = function(labels) {
    this._delegate('addLabels', [EchoClient.LabelCleanser.cleanLabels(labels)]);
    return this;
  };

  /**
   * Add a single label
   * @param {string} key
   * @param {string|int} value
   * @returns {EchoClient} `this`
   */
  EchoClient.prototype.addLabel = function(key, value) {
    if (typeof key !== 'string') {
      DEBUG.error('Label key must be a string');
      return;
    }

    if (value === null || typeof value === 'undefined') {
      DEBUG.error('Label cannot be null/undefined');
      return;
    }

    var labels = {};
    labels[key] = value;

    return this.addLabels(labels);
  };

  /**
   * Add a single label that is known by Echo
   * @param {string} key
   * @param {string|int} value
   * @returns {this} `this`
   */
  EchoClient.prototype.addManagedLabel = function(key, value) {
    this._delegate('addManagedLabel', [
      EchoClient.LabelCleanser.cleanLabelKey(key),
      EchoClient.LabelCleanser.cleanLabelValue(key, value)
    ]);

    return this;
  };

  /**
   * Remove the specified labels
   * @param {array} labels A list of label names (keys) that need removing
   * @returns {this} `this`
   */
  EchoClient.prototype.removeLabels = function(labels) {
    var cleanLabels = [];
    for (var i = 0, j = labels.length; i < j; i++) {
      cleanLabels.push(EchoClient.LabelCleanser.cleanLabelKey(labels[i]));
    }

    this._delegate('removeLabels', [cleanLabels]);

    return this;
  };

  /**
   * Remove a single label
   * @param {string} label
   * @returns {this} `this`
   */
  EchoClient.prototype.removeLabel = function(label) {
    return this.removeLabels([label]);
  };

  /**
   * Set whether a product user as logged into the bbc
   * @param {string} hid
   * @returns {this} `this`
   */
  EchoClient.prototype.setLoggedInToBBCId = function(hid) {
    this._delegate('setLoggedInToBBCId', [hid]);
    return this;
  };

  /**
   * Set whether a product user is logged into the bbc or not
   * @returns {this} `this`
   */
  EchoClient.prototype.setLoggedOutOfBBCId = function() {
    this._delegate('setLoggedOutOfBBCId');
    return this;
  };

  /**
   * Set the version of the application (this is optional)
   * @param {string} version The version string for the application
   * @returns {this} `this`
   */
  EchoClient.prototype.setAppVersion = function(version) {
    this._delegate('setAppVersion', [version]);
    return this;
  };

  EchoClient.prototype.setDestination = function(destinationCode) {
    this._delegate('setDestination', [Destinations.get(destinationCode)]);
    return this;
  };

  EchoClient.prototype.setProducer = function(producerCode) {
    var producerId;
    if (producerCode) {
      producerId = Producers.getId(producerCode);
    } else {
      // The producer ID should be set to 0 so that it is removed by ATI
      producerId = '0';
    }

    if (producerId) {
      this._delegate('setProducer', [producerId]);
    } else {
      DEBUG.info('Producer [' + producerCode + '] not recognised');
    }

    return this;
  };

  EchoClient.prototype.setProducerById = function(producerId) {
    if (!producerId || !Producers.hasId(producerId)) {
      // Use BBC as the default producer
      producerId = Producers.BBC;
    } else {
      producerId = parseInt(producerId, 10);
    }

    this._delegate('setProducer', [producerId]);

    return this;
  };

  /**
   * Set the countername for this page, this can also be set when
   * a viewEvent is sent. This method provides a way of setting the
   * countername without sending a view event.
   *
   * @param {string} countername The countername
   *
   * @returns {this} `this`
   */
  EchoClient.prototype.setCounterName = function(countername) {
    var cleanCounterName = EchoClient.LabelCleanser.cleanCounterName(countername);

    var returnValue = this._delegate('setCounterName', [countername], [cleanCounterName]);
    this.state.counterNameSet = true;

    return returnValue;
  };

  /**
   * Set the language of the content being displayed, as opposed to
   * the locale language (which can be set on the Environment object)
   * the format for the tag still needs guidance from M&A, though I suspect
   * that following these
   * [instructions](http://www.w3.org/International/questions/qa-choosing-language-tags)
   * will work out fine
   * @param {string} language The language (code) of the content
   * @returns {this} `this`
   */
  EchoClient.prototype.setContentLanguage = function(language) {
    this._delegate('setContentLanguage', [language]);
    return this;
  };

  /**
   * Sets the cache mode for offline-enabled apps
   * @param {string} mode The cache mode
   * @returns {this} `this`
   */
  EchoClient.prototype.setCacheMode = function(mode) {
    this._delegate('setCacheMode', [mode]);
    this._cacheMode = mode;
    return this;
  };

  EchoClient.prototype.getCacheMode = function() {
    return this._cacheMode;
  };

  EchoClient.prototype.clearCache = function() {
    if (!this._isEnabled) {
      return;
    }

    this._delegate('clearCache');
  };

  EchoClient.prototype.flushCache = function() {
    if (!this._isEnabled) {
      return;
    }

    this._delegate('flushCache');
  };

  /* *
   * ------------------------------------------------------------------------
   * Basic Analytics Methods
   * ------------------------------------------------------------------------
   * */

  /**
   * Register a 'view event'. This indicates a new 'page' has been displayed.
   * See
   * [here](https://confluence.dev.bbc.co.uk/display/echo/Echo+Client+for+Product+Managers#EchoClientforProductManagers-Counternames)
   * for guidance on setting the countername. The '.page' suffix will be added
   * automatically if not provided.
   *
   * @param {string} countername The countername for this page
   * @param {object} eventLabels
   * @returns {this} `this`
   * @example
   * echo.viewEvent('news.scotland.page',{label1Key:'label1Value'});
   */
  EchoClient.prototype.viewEvent = function(countername, eventLabels) {
    if (!this._eventsEnabled()) {
      return;
    }

    var cleanCounterName = EchoClient.LabelCleanser.cleanCounterName(countername);
    var cleanEventLabels = EchoClient.LabelCleanser.cleanLabels(eventLabels);

    // Note down that we have evented to comScore at least once
    if (this.consumers[EchoClient.Consumers.COMSCORE]) {
      this.state.comscoreEventSent = true;
    }

    var returnValue = this._delegate('viewEvent', [countername, eventLabels], [cleanCounterName, cleanEventLabels]);
    this.state.counterNameSet = true;

    if (this.consumers[EchoClient.Consumers.COMSCORE]) {
      this.state.comscoreEventSent = true;
    }

    return returnValue;
  };

  /**
   * Register a bespoke event.
   * See
   * [here](https://confluence.dev.bbc.co.uk/display/echo/Echo+Client+for+Product+Managers#EchoClientforProductManagers-Useractiontypesandnames)
   * for advice on setting the actionType and actionName values
   *
   * @param {string} actionType The type of the event (e.g. 'click')
   * @param {string} actionName A description of the event (e.g. 'Button Z')
   * @param {object} [eventLabels] Additional labels
   * @returns {this} `this`
   * @example
   * Register a UserAction event (sent to Analytics (ComScore) only)
   * echo.userActionEvent('click','massive button',{info:'somrthing'});
   * Register a UserAction event also
   * echo.userActionEvent('click','massive button',{info:'somrthing'},
   *  EchoClient.Routing.ANALYTICS | EchoClient.Routing.BBC);
   */
  EchoClient.prototype.userActionEvent = function(
    actionType,
    actionName,
    eventLabels
  ) {
    if (!this._eventsEnabled()) {
      return;
    }

    if (!this.state.counterNameSet) {
      DEBUG.error('userActionEvent not available before a call to ' +
        'viewEvent (to set counter name).');
      return this;
    }

    // By default only send this to analytics
    this._delegate('userActionEvent', [actionType, actionName,
      EchoClient.LabelCleanser.cleanLabels(eventLabels)
    ]);

    // Note down that we have evented to comScore at least once
    if (this.consumers[EchoClient.Consumers.COMSCORE]) {
      this.state.comscoreEventSent = true;
    }

    return this;
  };

  /**
   * Register an error event
   *
   * @param {Error} [error] An Error object (or any object with at
   *                        least "name" and "message" properties)
   * @param {object} [eventLabels] Labels to send with this event
   * @returns {this} `this`
   */
  EchoClient.prototype.errorEvent = function(error, eventLabels) {
    if (!this._eventsEnabled()) {
      return;
    }

    this._delegate(
      'errorEvent', [error, EchoClient.LabelCleanser.cleanLabels(eventLabels)]
    );

    return this;
  };

  /* *
   * ------------------------------------------------------------------------
   * Media Player Attributes
   * ------------------------------------------------------------------------
   * */

  /**
   * Set the name of the AV Media Player being used
   * @param {string} name
   * @returns {this} `this`
   */
  EchoClient.prototype.setPlayerName = function(name) {
    Util.assert(typeof name === 'string' && name.length > 0,
      'setPlayerName: name must be string with length, got "' + name + '"');

    var cleanName = EchoClient.LabelCleanser.cleanLabelValue(
      'player_name', name);

    return this._delegate('setPlayerName', [name], [cleanName]);
  };

  /**
   * Set the version of the AV Media Player
   * @param {string} version The version string
   * @returns {this} `this`
   */
  EchoClient.prototype.setPlayerVersion = function(version) {
    Util.assert(typeof version === 'string' && version.length > 0,
      'setPlayerVersion: version must be string with length, got "' +
      version + '"');

    var cleanVersion = EchoClient.LabelCleanser.cleanLabelValue(
      'player_version', version);

    return this._delegate('setPlayerVersion', [version], [cleanVersion]);
  };

  /**
   * Specify if the player has popped out to a new window
   * *Note: Changing this value will not generate an event,
   * but will change the value sent with all subsequent AV events*
   * @param {boolean} isPopped
   * @returns {this} `this`
   */
  EchoClient.prototype.setPlayerIsPopped = function(isPopped) {
    Util.assert(
      typeof isPopped === 'boolean',
      'setPlayerIsPopped: isPopped must be boolean, got "' + isPopped + '"'
    );
    this._delegate('setPlayerIsPopped', [isPopped]);
    return this;
  };

  /**
   * Set the Media Player window state
   * *Note: Changing this value will not generate an event,
   * but will change the value sent with all subsequent AV events*
   * @param {string} state Should be one of Echo.WindowState, can be any string
   * @returns {this} `this`
   * @example
   * echo.setPlayerWindowState(Echo.WindowState.FULL);
   */
  EchoClient.prototype.setPlayerWindowState = function(state) {
    Util.assertContainsValue(Enums.WindowState, state,
      'The window state must be set as a member' +
      ' of Enums.WindowState, got "' + state + '"');
    this._delegate('setPlayerWindowState', [state]);
    return this;
  };

  /**
   * Set the volume
   * *Note: Changing this value will not generate an event,
   * but will change the value sent with all subsequent AV events*
   * @param {integer} volume Should be an integer in the range 0-100
   * @returns {this} `this`
   */
  EchoClient.prototype.setPlayerVolume = function(volume) {
    Util.assert(
      volume <= 100 && volume >= 0,
      'volume must be 0-100, got: ' + volume
    );

    if ((volume <= 100) && (volume >= 0)) {
      this._delegate(
        'setPlayerVolume', [volume]
      );
    }

    return this;
  };

  /**
   * Indicate whether subtitles are turned on/off
   * *Note: Changing this value will not generate an event,
   * but will change the value sent with all subsequent AV events*
   * @param {boolean} isSubtitled (true for subtitles on)
   * @returns {this} `this`
   */
  EchoClient.prototype.setPlayerIsSubtitled = function(isSubtitled) {
    Util.assert(
      typeof isSubtitled === 'boolean',
      'setPlayerIsSubtitled: isSubtitled must be a boolean, got "' +
      isSubtitled + '"'
    );

    this._delegate('setPlayerIsSubtitled', [isSubtitled]);
    return this;
  };

  /**
   * The player delegate is responsible for reporting the current state of the
   * player. You must implement the following methods.
   *
   * - getTimestamp {Function} that returns a number denoting the players
   * timestamp expressed in Unix Epoch and in milliseconds
   * - getPosition {Function} the current position that the player is at
   *
   * @param {Object} delegate
   * @return EchoClient
   */
  EchoClient.prototype.setPlayerDelegate = function(delegate) {
    delegate = delegate || {};

    // required functions
    var functions = ['getTimestamp', 'getPosition'];
    var methodName;
    var i;
    var valid;

    // failed to initialise the echo client as interface is not met
    var fail = false;

    // check that the `delegate` contains the correct functions and log to
    // console if in debug mode.
    for (i = 0; i < functions.length; i++) {
      methodName = functions[i];

      // check delegate has the method and that it is a function
      valid = (
        delegate.hasOwnProperty(methodName) &&
        typeof delegate[methodName] === 'function'
      );

      Util.assert(
        valid,
        'The player delegate must implement "' + methodName + '"'
      );

      if (!valid) {
        fail = true;
      }
    }

    if (!fail) {
      this._playerDelegate = delegate;
    }

    return this;
  };

  /* *
   * ------------------------------------------------------------------------
   * Media Attributes
   * ------------------------------------------------------------------------
   * */

  /**
   * Set details of the media which the player is about to play.
   *
   * **WARNING: Any updates made to the Media object after it is passed in to
   * Echo will NOT have any effect.**
   *
   * This method should be the first method called when the user requests a
   * new piece of content and must be called before the avEvent methods are
   * called. AV event messages will include all of the attributes of the media
   * object passed via (the most recent call to) this method.
   *
   * This method should only be called when the player is in a stopped state,
   * i.e. before a play event or after an end event.
   *
   * @param {Media} media A Media object defining the content being consumed.
   * @returns {this} `this`
   */
  EchoClient.prototype.setMedia = function(media) {
    if (!this._eventsEnabled()) {
      return;
    }

    this._clearMedia();

    var clonedMedia = media.getClone();

    if (!this.state.counterNameSet) {
      DEBUG.error(
        'setMedia: Must have a countername set ' +
        'or view event sent first'
      );
      return;
    }

    this.media = clonedMedia;

    this.addLabel(CSKeys.ESS_ENABLED, this._essEnabled ? 'true' : 'false');

    var live = Enums.MediaConsumptionMode.LIVE;
    if (this.media.getMediaConsumptionMode() === live) {
      this._initLiveBroker();
    } else {
      this._initOnDemandBroker();
    }

    this._delegate('setMedia', [this.media]);
  };

  /**
   * Invoked from the LiveBroker when a broadcast has been detected.
   *
   * @param {Media} newMedia
   * @param {Number} newPosition the previous position of the player
   * @param {Number} oldPosition the new position
   */
  EchoClient.prototype.liveMediaUpdate = function(
    newMedia,
    newPosition,
    oldPosition
  ) {
    if (!this._eventsEnabled() || !this._avEventsEnabled()) {
      return;
    }

    if (!newMedia) {
      return;
    }

    this._suppressingPlayEvent = false;

    this.media = newMedia;
    this._delegate('liveMediaUpdate', [newMedia, newPosition, oldPosition]);
  };

  /**
   * Set the length of the media (in milliseconds).
   *
   * Media length can be specified on the Media object prior to passing it to
   * Echo if the length is known up front. This method is provided to allow
   * players which do not know the length of piece of content before it starts
   * playing to report the length once it becomes available.
   *
   * For on-demand content, this This method must be called within the first
   * 60 seconds of playback (if the length has not already been passed to Echo
   * via the Media object). Failure to do so will result in inaccurate
   * consumption statistics for the content. This method should be called at
   * most once for each new piece of media passed to Echo.
   *
   * This method is not expected to be called for live content as a length of
   * zero should have been specified on the Media object passed to Echo.
   *
   * @param {integer} length The length of the media in ms.
   * @returns {this} `this`
   */
  EchoClient.prototype.setMediaLength = function(length) {
    if (!this.media) {
      DEBUG.error('setMediaLength: Must call setMedia first');
      return this;
    } else if (!this.media.isOnDemand()) {
      DEBUG.error(
        'setMediaLength: Length should be set to zero prior to ' +
        'passing the media object to Echo for live media'
      );
      return this;
    }

    length = this._cleanPosition(length);

    if (typeof length !== 'number') {
      DEBUG.error(
        'setMediaLength: Length must be a positive number'
      );
      return this;
    }

    this._delegate('setMediaLength', [length]);
    this.media.setLength(length);

    return this;
  };

  /**
   * @deprecated Field is no longer used
   */
  EchoClient.prototype.setMediaBitrate = function() {
  };

  /**
   * @deprecated Field is no longer used
   */
  EchoClient.prototype.setMediaCodec = function() {
  };

  /**
   * @deprecated Field is no longer used
   */
  EchoClient.prototype.setMediaCDN = function() {
  };

  EchoClient.prototype.setEssSuccess = function(isSuccess) {
    this.addLabel(CSKeys.ESS_SUCCESS, isSuccess ? 'true' : 'false');
  };

  EchoClient.prototype.setEssError = function(error, code) {
    this.addLabel(CSKeys.ESS_ERROR, error.toString().toLowerCase());

    if (error.toString() === Enums.EssError.STATUS_CODE.toString()) {
      this.addLabel(CSKeys.ESS_STATUS_CODE, code);
    }

    this._delegate('liveEnrichmentFailed');
  };

  /* *
   * ------------------------------------------------------------------------
   * Media Events
   * ------------------------------------------------------------------------
   * */

  /**
   * Both content Id and AV Type must have been set before trying to use the
   * AV event methods.
   *
   * This method throws an exception in debug mode if both of these attributes
   * have not been set. It returns false in non-debug mode if both of these
   * attributes have not been set.
   *
   * @private
   * @returns {Boolean} True if the appropriate state is set up to use the av
   *         even methods. Returns false if state is not set up in non-debug
   *         mode or throws an exception in debug mode.
   */
  EchoClient.prototype._avEventsEnabled = function() {

    return (
      Util.assert(
        Boolean(this.media), 'setMedia() must be called prior to this method', FailSilently
      ) &&
      Util.assert(
        Boolean(this._playerDelegate),
        'setPlayerDelegate not called or not configured correctly', FailSilently
      )
    );
  };

  /**
   * Get the live broker.
   *
   * @public
   */
  EchoClient.prototype.getLiveBroker = function() {
    return this._liveBroker;
  };

  /**
   * Init the Live broker.
   *
   * @private
   */
  EchoClient.prototype._initLiveBroker = function() {
    if (!this._avEventsEnabled() ||
      this.media.getMediaConsumptionMode() !== Enums.MediaConsumptionMode.LIVE
    ) {
      return;
    }

    this._liveBroker = new LiveBroker(
      this._playerDelegate, this.media, this, this._env, this._essEnabled
    );
    this._delegate('setBroker', [this._liveBroker]);
  };

  /**
   * Get the On-demand broker.
   *
   * @public
   */
  EchoClient.prototype.getOnDemandBroker = function() {
    return this._onDemandBroker;
  };

  /**
   * Init the On-demand broker.
   *
   * @private
   */
  EchoClient.prototype._initOnDemandBroker = function() {
    if (!this._avEventsEnabled() ||
      this.media.getMediaConsumptionMode() === Enums.MediaConsumptionMode.LIVE
    ) {
      return;
    }

    this._onDemandBroker = new OnDemandBroker(
      this._playerDelegate,
      this.media,
      this
    );
    this._delegate('setBroker', [this._onDemandBroker]);
  };

  /**
   * Clean a position value.
   *
   * @param {Number|string} value The value to clean
   * @returns {integer|false}
   */
  EchoClient.prototype._cleanPosition = function(value) {

    if (value !== undefined && value !== null) {
      value = Math.floor(value);
    }

    if (value === undefined || isNaN(value) || !isFinite(value) || value < 0) {
      value = 0;
    }

    return value;
  };

  /**
   * Register an AV Play event
   *
   * @param {integer} position Position through the media in ms
   * @param {object} [eventLabels] Custom labels to set for this event
   * @returns {this} `this`
   */
  EchoClient.prototype.avPlayEvent = function(position, eventLabels) {
    if (!this._eventsEnabled() || !this._avEventsEnabled()) {
      return;
    }

    var isLive = this.media.isLive();

    this._isPlaying = true;

    if (isLive && this._liveBroker) {
      position = this._liveBroker.getPosition();
      this._liveBroker.start();
    } else if (!isLive && this._onDemandBroker) {
      position = this._cleanPosition(position);
      this._previousPlayPosition = position;

      if (this._positionExceedsMediaLength(position)) {
        return;
      }

      this._onDemandBroker.setPosition(position);
      this._onDemandBroker.start();
    }

    if (isLive && this.media.isEssEnriched() && this._suppressingPlayEvent) {
      this._suppressedPlayEventLabels = eventLabels;
    } else {
      this._delegate(
        'avPlayEvent',
        [position, EchoClient.LabelCleanser.cleanLabels(eventLabels)]
      );
      this.media.setBuffering(false);
      this.media.setPlaying(true);
    }

    if (this.consumers[EchoClient.Consumers.COMSCORE]) {
      this.state.comscoreEventSent = true;
    }

    return this;
  };

  /**
   * Perform common av event actions.
   *
   * @param {string}  methodToDelegate The method to delegate
   * @param {integer} position Position through the media in ms
   * @param {object}  eventLabels Optional object of labels
   * @param {integer} rate Optional rate for rwd/ffwd
   * @returns {this} `this`
   */
  EchoClient.prototype._avNavigationEvent = function(
    methodToDelegate, position, eventLabels, rate
  ) {

    if (!this._avEventsEnabled()) {
      return;
    }

    this._isPlaying = false;

    if (this.media.isLive()) {
      if (this._liveBroker) {
        this._liveBroker.stop();
        position = this._liveBroker.getPosition();
      }

      if (this.media.isEssEnriched() && !this._suppressingPlayEvent) {
        this._suppressingPlayEvent = true;
      }

    } else if (this._onDemandBroker) {
      position = this._cleanPosition(position);
      position = this._preventPositionExceedingMediaLength(position);
      this._onDemandBroker.stop();
    }

    if (methodToDelegate === 'avRewindEvent' || methodToDelegate === 'avFastForwardEvent') {
      this._delegate(
        methodToDelegate,
        [position, rate, EchoClient.LabelCleanser.cleanLabels(eventLabels)]
      );
    } else {
      this._delegate(
        methodToDelegate,
        [position, EchoClient.LabelCleanser.cleanLabels(eventLabels)]
      );
    }

  };

  /**
   * Register an AV Pause event
   *
   * @param {Number} position Position through the media in ms
   * @param {object} [eventLabels] Custom labels to set for this event
   * @returns {this} `this`
   */
  EchoClient.prototype.avPauseEvent = function(position, eventLabels) {
    if (!this._eventsEnabled() || !this._avEventsEnabled()) {
      return;
    }

    this.media.setPlaying(false);
    this._avNavigationEvent('avPauseEvent', position, eventLabels);

    return this;
  };

  /**
   * Register an AV Buffer event
   *
   * @param {integer} position Position through the media in ms
   * @param {object} [eventLabels] Custom labels to set for this event
   * @returns {this} `this`
   */
  EchoClient.prototype.avBufferEvent = function(position, eventLabels) {
    if (!this._eventsEnabled() || !this._avEventsEnabled()) {
      return;
    }

    this.media.setPlaying(false);
    this._avNavigationEvent('avBufferEvent', position, eventLabels);
    this.media.setBuffering(true);

    return this;
  };

  /**
   * Register an AV End event
   *
   * @param {integer} position Position through the media in ms
   * @param {object} [eventLabels] Custom labels to set for this event
   * @returns {this} `this`
   */
  EchoClient.prototype.avEndEvent = function(position, eventLabels) {
    if (!this._eventsEnabled() || !this._avEventsEnabled()) {
      return;
    }

    this.media.setPlaying(false);
    this._avNavigationEvent('avEndEvent', position, eventLabels);

    this.media = null;

    return this;
  };

  /**
   * Register an AV Rewind event
   *
   * @param {integer} position Position through the media in ms
   * @param {integer} rate The rate of the rewind (i.e. 2 = double-speed)
   * @param {object} [eventLabels] Custom labels to set for this event
   * @returns {this} `this`
   */
  EchoClient.prototype.avRewindEvent = function(position, rate, eventLabels) {
    if (!this._eventsEnabled() || !this._avEventsEnabled()) {
      return;
    }

    this._avNavigationEvent('avRewindEvent', position, eventLabels, rate);

    return this;
  };

  /**
   * Register an AV Fast Forward event
   *
   * @param {integer} position Position through the media in ms
   * @param {integer} rate The rate of the fast-forward (i.e. 2 = double-speed)
   * @param {object} [eventLabels] Custom labels to set for this event
   * @returns {this} `this`
   */
  EchoClient.prototype.avFastForwardEvent = function(
    position,
    rate,
    eventLabels
  ) {
    if (!this._eventsEnabled() || !this._avEventsEnabled()) {
      return;
    }

    this._avNavigationEvent('avFastForwardEvent', position, eventLabels, rate);

    return this;
  };

  /**
   * Register an AV Seek event
   *
   * @param {integer} position Position through the media in ms
   * @param {object} [eventLabels] Custom labels to set for this event
   * @returns {this} `this`
   */
  EchoClient.prototype.avSeekEvent = function(position, eventLabels) {
    if (!this._eventsEnabled() || !this._avEventsEnabled()) {
      return;
    }

    this._avNavigationEvent('avSeekEvent', position, eventLabels);

    return this;
  };

  /**
   * Register a custom AV event
   *
   * @param {string} actionType The type of action
   * @param {string} actionName The name of the action
   * @param {integer} position Position in media in ms (0 for simulcast)
   * @param {object} [eventLabels] Custom labels to set for this event
   * @returns {this} `this`
   * @example
   * echo.avUserActionEvent('click','av_related_button',5000);
   */
  EchoClient.prototype.avUserActionEvent = function(
    actionType,
    actionName,
    position,
    eventLabels
  ) {
    if (!this._eventsEnabled() || !this._avEventsEnabled()) {
      return;
    }

    if (this._liveBroker) {
      position = this._liveBroker.getPosition();
    } else {
      position = this._cleanPosition(position);
      position = this._preventPositionExceedingMediaLength(position);
    }

    var cleanLabels = EchoClient.LabelCleanser.cleanLabels(eventLabels);
    this._delegate(
      'avUserActionEvent',
      [actionType, actionName, position, cleanLabels]
    );
    return this;
  };

  /**
   * Release a suppressed play event
   *
   * @returns {this} `this`
   */
  EchoClient.prototype.releaseSuppressedPlay = function() {
    if (!this._eventsEnabled() || !this._avEventsEnabled()) {
      return;
    }

    if (this._suppressingPlayEvent) {
      this._suppressingPlayEvent = false;
      this.avPlayEvent(this._liveBroker.getPosition(),
        this._suppressedPlayEventLabels);
    }

    return this;
  };

  /**
   *
   * @private
   */
  EchoClient.prototype._clearMedia = function() {
    this.removeLabel(CSKeys.MEDIA_TIMESTAMP);
    this.removeLabel(CSKeys.ESS_ENABLED);
    this.removeLabel(CSKeys.ESS_ENRICHED);
    this.removeLabel(CSKeys.ESS_SUCCESS);
    this.removeLabel(CSKeys.ESS_ERROR);
    this.removeLabel(CSKeys.ESS_STATUS_CODE);

    if (this.media !== null) {
      this.media = null;
    }

    if (this._liveBroker instanceof LiveBroker) {
      this._liveBroker.stop();
      this._liveBroker = null;
    }

    if (this._onDemandBroker instanceof OnDemandBroker) {
      this._onDemandBroker.stop();
      this._onDemandBroker = null;
    }

    this._isPlaying = undefined;
    this._previousPlayPosition = undefined;
  };

  /**
   *
   * @private
   */
  EchoClient.prototype._positionExceedsMediaLength = function(position) {

    if (this.media && this.media.length > 0 && position >= (this.media.length - 1000)) {
      return true;
    }

    return false;
  };

  /**
   *
   * @private
   */
  EchoClient.prototype._preventPositionExceedingMediaLength = function(position) {

    if (this._positionExceedsMediaLength(position)) {
      return this.media.length;
    }

    return position;
  };

  EchoClient.Consumers = { //NOTE: must be powers of 2
    COMSCORE: 1 << 0,
    BARB: 1 << 1,
    ATI: 1 << 2
  };

  return EchoClient;
}).call(exports, __webpack_require__, exports, module),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),

/***/ "./src/echo/config/destinations.js":
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_RESULT__ = (function() {
  'use strict';

  var Producers = __webpack_require__("./src/echo/config/producers.js");

  var destinations = {
    // Permitted values for setting Destination site ids
    DEFAULT: {
      id: '596068', defaultProducer: Producers.BBC, isTest: true
    },
    ACCOUNT: {
      id: '598250', defaultProducer: Producers.ACCOUNT, isTest: false
    },
    ACCOUNT_TEST: {
      id: '598252', defaultProducer: Producers.ACCOUNT, isTest: true
    },
    AUDIENCE_PORTAL: {
      id: '602136', defaultProducer: Producers.AUDIENCE_SERVICES, isTest: false
    },
    AUDIENCE_PORTAL_TEST: {
      id: '602137', defaultProducer: Producers.AUDIENCE_SERVICES, isTest: true
    },
    AUDIENCE_SERVICES_PS: {
      id: '602167', defaultProducer: Producers.AUDIENCE_SERVICES, isTest: false
    },
    AUDIENCE_SERVICES_PS_TEST: {
      id: '602168', defaultProducer: Producers.AUDIENCE_SERVICES, isTest: true
    },
    BBC_CORPORATE_PS: {
      id: '603550', defaultProducer: Producers.BBC, isTest: false
    },
    BBC_CORPORATE_PS_TEST: {
      id: '603551', defaultProducer: Producers.BBC, isTest: true
    },
    BBC_SHOP: {
      id: '598253', defaultProducer: Producers.BBC_SHOP, isTest: false
    },
    BBC_SHOP_TEST: {
      id: '598254', defaultProducer: Producers.BBC_SHOP, isTest: true
    },
    BBC_SYNDICATION: {
      id: '601718', defaultProducer: Producers.BBC, isTest: false
    },
    BBC_SYNDICATION_TEST: {
      id: '601719', defaultProducer: Producers.BBC, isTest: true
    },
    BBC_THREE: {
      id: '598255', defaultProducer: Producers.BBC_THREE, isTest: false
    },
    BBC_THREE_TEST: {
      id: '598256', defaultProducer: Producers.BBC_THREE, isTest: true
    },
    BITESIZE: {
      id: '598257', defaultProducer: Producers.BITESIZE, isTest: false
    },
    BITESIZE_TEST: {
      id: '598258', defaultProducer: Producers.BITESIZE, isTest: true
    },
    BLOGS_PS: {
      id: '603546', defaultProducer: Producers.BBC, isTest: false
    },
    BLOGS_PS_TEST: {
      id: '603547', defaultProducer: Producers.BBC, isTest: true
    },
    BRITBOX: {
      id: '598259', defaultProducer: Producers.BRITBOX, isTest: false
    },
    BRITBOX_TEST: {
      id: '598260', defaultProducer: Producers.BRITBOX, isTest: true
    },
    CBBC: {
      id: '598261', defaultProducer: Producers.CBBC, isTest: false
    },
    CBBC_TEST: {
      id: '598262', defaultProducer: Producers.CBBC, isTest: true
    },
    CBEEBIES: {
      id: '598263', defaultProducer: Producers.CBEEBIES, isTest: false
    },
    CBEEBIES_TEST: {
      id: '598264', defaultProducer: Producers.CBEEBIES, isTest: true
    },
    FEATURE_SITES_GNL: {
      id: '598265', defaultProducer: Producers.GNL_HOMEPAGE, isTest: false
    },
    FEATURE_SITES_GNL_TEST: {
      id: '598266', defaultProducer: Producers.GNL_HOMEPAGE, isTest: true
    },
    FOOD: {
      id: '598267', defaultProducer: Producers.BBC_FOOD, isTest: false
    },
    FOOD_TEST: {
      id: '598268', defaultProducer: Producers.BBC_FOOD, isTest: true
    },
    GAMES_PS: {
      id: '599452', defaultProducer: Producers.BBC, isTest: false
    },
    GAMES_PS_TEST: {
      id: '599454', defaultProducer: Producers.BBC, isTest: true
    },
    GATEWAY: {
      id: '598269', defaultProducer: Producers.GATEWAY, isTest: false
    },
    GATEWAY_TEST: {
      id: '598270', defaultProducer: Producers.GATEWAY, isTest: true
    },
    HOMEPAGE_GNL: {
      id: '598271', defaultProducer: Producers.GNL_HOMEPAGE, isTest: false
    },
    HOMEPAGE_GNL_TEST: {
      id: '598272', defaultProducer: Producers.GNL_HOMEPAGE, isTest: true
    },
    HOMEPAGE_PS: {
      id: '598273', defaultProducer: Producers.PS_HOMEPAGE, isTest: false
    },
    HOMEPAGE_PS_TEST: {
      id: '598274', defaultProducer: Producers.PS_HOMEPAGE, isTest: true
    },
    IDEAS: {
      id: '598275', defaultProducer: Producers.BBC, isTest: false
    },
    IDEAS_TEST: {
      id: '598276', defaultProducer: Producers.BBC, isTest: true
    },
    IPLAYER: {
      id: '598277', defaultProducer: Producers.IPLAYER, isTest: false
    },
    IPLAYER_TEST: {
      id: '598278', defaultProducer: Producers.IPLAYER, isTest: true
    },
    MEDIA_ACTION: {
      id: '598279', defaultProducer: Producers.MEDIA_ACTION, isTest: false
    },
    MEDIA_ACTION_TEST: {
      id: '598280', defaultProducer: Producers.MEDIA_ACTION, isTest: true
    },
    MONITORING: {
      id: '598281', defaultProducer: Producers.MONITORING, isTest: false
    },
    MONITORING_TEST: {
      id: '598282', defaultProducer: Producers.MONITORING, isTest: true
    },
    MUSIC: {
      id: '598283', defaultProducer: Producers.BBC_MUSIC, isTest: false
    },
    MUSIC_TEST: {
      id: '598284', defaultProducer: Producers.BBC_MUSIC, isTest: true
    },
    NEWS_PS: {
      id: '598285', defaultProducer: Producers.NEWS, isTest: false
    },
    NEWS_PS_TEST: {
      id: '598286', defaultProducer: Producers.NEWS, isTest: true
    },
    NEWS_GNL: {
      id: '598287', defaultProducer: Producers.NEWS, isTest: false
    },
    NEWS_GNL_TEST: {
      id: '598288', defaultProducer: Producers.NEWS, isTest: true
    },
    NEWS_LANGUAGES_GNL: {
      id: '598289', defaultProducer: Producers.NEWS, isTest: false
    },
    NEWS_LANGUAGES_GNL_TEST: {
      id: '598290', defaultProducer: Producers.NEWS, isTest: true
    },
    NEWS_LANGUAGES_PS: {
      id: '598291', defaultProducer: Producers.NEWS, isTest: false
    },
    NEWS_LANGUAGES_PS_TEST: {
      id: '598292', defaultProducer: Producers.NEWS, isTest: true
    },
    NEWSROUND: {
      id: '598293', defaultProducer: Producers.NEWSROUND, isTest: false
    },
    NEWSROUND_TEST: {
      id: '598294', defaultProducer: Producers.NEWSROUND, isTest: true
    },
    OTHER: {
      id: '598295', defaultProducer: Producers.OTHER, isTest: false
    },
    OTHER_TEST: {
      id: '598297', defaultProducer: Producers.OTHER, isTest: true
    },
    OWN_IT: {
      id: '598298', defaultProducer: Producers.CBBC, isTest: false
    },
    OWN_IT_TEST: {
      id: '598299', defaultProducer: Producers.CBBC, isTest: true
    },
    PROGRAMMES_PS: {
      id: '598300', defaultProducer: Producers.PROGRAMMES, isTest: false
    },
    PROGRAMMES_PS_TEST: {
      id: '598301', defaultProducer: Producers.PROGRAMMES, isTest: true
    },
    RED_BUTTON_PS: {
      id: '601192', defaultProducer: Producers.BBC, isTest: false
    },
    RED_BUTTON_PS_TEST: {
      id: '601193', defaultProducer: Producers.BBC, isTest: true
    },
    REWIND_PS: {
      id: '603552', defaultProducer: Producers.BBC, isTest: false
    },
    REWIND_PS_TEST: {
      id: '603553', defaultProducer: Producers.BBC, isTest: true
    },
    SEARCH_GNL: {
      id: '598302', defaultProducer: Producers.SEARCH, isTest: false
    },
    SEARCH_GNL_TEST: {
      id: '598303', defaultProducer: Producers.SEARCH, isTest: true
    },
    SEARCH_PS: {
      id: '598304', defaultProducer: Producers.SEARCH, isTest: false
    },
    SEARCH_PS_TEST: {
      id: '598305', defaultProducer: Producers.SEARCH, isTest: true
    },
    SOUNDS: {
      id: '598306', defaultProducer: Producers.SOUNDS, isTest: false
    },
    SOUNDS_TEST: {
      id: '598307', defaultProducer: Producers.SOUNDS, isTest: true
    },
    SPORT_GNL: {
      id: '598308', defaultProducer: Producers.SPORT, isTest: false
    },
    SPORT_GNL_TEST: {
      id: '598309', defaultProducer: Producers.SPORT, isTest: true
    },
    SPORT_PS: {
      id: '598310', defaultProducer: Producers.SPORT, isTest: false
    },
    SPORT_PS_TEST: {
      id: '598311', defaultProducer: Producers.SPORT, isTest: true
    },
    STORYWORKS_GNL: {
      id: '598312', defaultProducer: Producers.GNL_STORYWORKS, isTest: false
    },
    STORYWORKS_GNL_TEST: {
      id: '598313', defaultProducer: Producers.GNL_STORYWORKS, isTest: true
    },
    SUBTITLES_PS: {
      id: '603548', defaultProducer: Producers.PROGRAMMES, isTest: false
    },
    SUBTITLES_PS_TEST: {
      id: '603549', defaultProducer: Producers.PROGRAMMES, isTest: true
    },
    SYNDICATION_PARTNERS_GNL: {
      id: '598314', defaultProducer: Producers.WS_PARTNERS_B2B, isTest: false
    },
    SYNDICATION_PARTNERS_GNL_TEST: {
      id: '598315', defaultProducer: Producers.WS_PARTNERS_B2B, isTest: true
    },
    TASTER: {
      id: '598316', defaultProducer: Producers.TASTER, isTest: false
    },
    TASTER_TEST: {
      id: '598317', defaultProducer: Producers.TASTER, isTest: true
    },
    TEACH: {
      id: '598318', defaultProducer: Producers.BBC, isTest: false
    },
    TEACH_TEST: {
      id: '598320', defaultProducer: Producers.BBC, isTest: true
    },
    VOICE: {
      id: '598326', defaultProducer: Producers.VOICE, isTest: false
    },
    VOICE_TEST: {
      id: '598328', defaultProducer: Producers.VOICE, isTest: true
    },
    WEATHER_GNL: {
      id: '598330', defaultProducer: Producers.WEATHER, isTest: false
    },
    WEATHER_GNL_TEST: {
      id: '598332', defaultProducer: Producers.WEATHER, isTest: true
    },
    WEATHER_PS: {
      id: '598338', defaultProducer: Producers.WEATHER, isTest: false
    },
    WEATHER_PS_TEST: {
      id: '598339', defaultProducer: Producers.WEATHER, isTest: true
    },
    WS_LEARNING_ENGLISH: {
      id: '598340', defaultProducer: Producers.WS_LEARNING_ENGLISH, isTest: false
    },
    WS_LEARNING_ENGLISH_TEST: {
      id: '598341', defaultProducer: Producers.WS_LEARNING_ENGLISH, isTest: true
    },
    WS_NEWS_LANGUAGES: {
      id: '598342', defaultProducer: Producers.BBC_WORLD_NEWS, isTest: false
    },
    WS_NEWS_LANGUAGES_TEST: {
      id: '598343', defaultProducer: Producers.BBC_WORLD_NEWS, isTest: true
    },
    WS_PARTNERS_B2B: {
      id: '598820', defaultProducer: Producers.WS_PARTNERS_B2B, isTest: false
    },
    WS_PARTNERS_B2B_TEST: {
      id: '598823', defaultProducer: Producers.WS_PARTNERS_B2B, isTest: true
    },
    WS_PROGRAMMES: {
      id: '598344', defaultProducer: Producers.PROGRAMMES, isTest: false
    },
    WS_PROGRAMMES_TEST: {
      id: '598345', defaultProducer: Producers.PROGRAMMES, isTest: true
    },
    WS_SYNDICATION_PARTNERS: {
      id: '598346', defaultProducer: Producers.WS_PARTNERS_B2B, isTest: false
    },
    WS_SYNDICATION_PARTNERS_TEST: {
      id: '598347', defaultProducer: Producers.WS_PARTNERS_B2B, isTest: true
    },

    get: function(destinationCode) {
      var destination;
      if (destinationCode) {
        destination = this[destinationCode.toUpperCase()];
      }

      return destination;
    }
  };

  return destinations;
}).call(exports, __webpack_require__, exports, module),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),

/***/ "./src/echo/config/generator.js":
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_RESULT__;/**
 * Wrapper for the config for each consumer
 * This approach could change, might push this all
 * into the delegates...
 */
!(__WEBPACK_AMD_DEFINE_RESULT__ = (function(require) {
  'use strict';

  var DEBUG = __webpack_require__("./src/echo/util/debug.js");
  var Enums = __webpack_require__("./src/echo/enumerations.js");
  var Utils = __webpack_require__("./src/echo/util/methods.js");
  var meta = __webpack_require__("./src/echo/meta.js");
  var KEYS = __webpack_require__("./src/echo/config/keys.js");

  var defaultConfig = {};

  // Echo
  defaultConfig[KEYS.ECHO_ENABLED] = true;
  defaultConfig[KEYS.ECHO_AUTO_START] = true;
  defaultConfig[KEYS.ECHO_DEVICE_ID] = null;
  defaultConfig[KEYS.REPORTING_PROFILE] = 'PUBLIC_SERVICE';
  defaultConfig[KEYS.ECHO_CACHE_MODE] = 'OFFLINE';

  // ComScore
  defaultConfig[KEYS.COMSCORE_ENABLED] = false;

  // AT Internet
  defaultConfig[KEYS.ATI_ENABLED] = true;

  // BARB
  defaultConfig[KEYS.BARB_ENABLED] = false;
  defaultConfig[KEYS.BARB_DEBUG] = false;
  defaultConfig[KEYS.BARB_SITE_CODE] = 'bbcdotcom';

  // Echo chamber
  defaultConfig[KEYS.TEST_SERVICE_ENABLED] = false;

  // ESS
  defaultConfig[KEYS.USE_ESS] = false;
  defaultConfig[KEYS.ESS_HOSTNAME] = 'ess.api.bbci.co.uk';

  // SSC
  defaultConfig[KEYS.USE_SSC] = false;
  defaultConfig[KEYS.SSC_HOSTNAME] = null;

  // Config values that we do not want the user to overwrite
  var fixedConfig = {};
  fixedConfig[KEYS.ECHO_NAME] = meta.NAME;
  fixedConfig[KEYS.ECHO_VERSION] = meta.VERSION;

  function hasLength(val) {
    return (typeof val === 'string' && val.length > 0);
  }

  function isStringWithNoParams(str) {
    return str.match(/[a-zA-Z]+/);
  }

  function isValidReportingProfile(profileId) {
    if (typeof profileId === 'string') {
      profileId = profileId.toUpperCase();
      return Enums.ReportingProfiles.hasOwnProperty(profileId);
    } else {
      return false;
    }
  }

  function isValidCacheMode(mode) {
    if (typeof mode === 'string') {
      mode = mode.toUpperCase();
      return Enums.EchoCacheMode.hasOwnProperty(mode);
    } else {
      return false;
    }
  }

  function validate(conf) {
    if (!isValidCacheMode(conf[KEYS.ECHO_CACHE_MODE])) {
      DEBUG.error('Config Error: KEYS.ECHO_CACHE_MODE Invalid' +
        ' cache mode specified');
      return false;
    }

    return Utils.assert(
      typeof conf[KEYS.ECHO_ENABLED] === 'boolean',
      'Config: "enabled" must be boolean, got ' +
      conf[KEYS.ECHO_ENABLED]
    ) && Utils.assert(
      typeof conf[KEYS.ECHO_AUTO_START] === 'boolean',
      'Config: "auto_start" must be boolean, got ' +
      conf[KEYS.ECHO_AUTO_START]
    ) && Utils.assert(
      conf[KEYS.ECHO_DEVICE_ID] === null ||
      (typeof conf[KEYS.ECHO_DEVICE_ID] === 'string' &&
      conf[KEYS.ECHO_DEVICE_ID].length),
      'ECHO.DEVICE_ID must be an non-empty string'
    );
  }

  function validateComScore(config) {
    // Don't bother validating if disabled
    if (config[KEYS.COMSCORE_ENABLED] === false) {
      return true;
    }

    if (!hasLength(config[KEYS.REPORTING_PROFILE])) {
      if (!hasLength(config[KEYS.COMSCORE_HOST])) {
        DEBUG.error('Config Error: Must have config value for COMSCORE_HOST' +
          ' or REPORTING_PROFILE'
        );
        return false;
      }

      if (config[KEYS.COMSCORE_HOST] !== 'scorecardresearch.com' &&
        config[KEYS.COMSCORE_HOST] !== 'sa.bbc.co.uk') {
        DEBUG.error('Config Error: KEYS.COMSCORE_HOST Should be one of ' +
          'scorecardresearch.com or sa.bbc.co.uk');
        return false;
      }
    }

    if (!isValidReportingProfile(config[KEYS.REPORTING_PROFILE])) {
      DEBUG.error('Config Error: KEYS.REPORTING_PROFILE Invalid' +
        ' reporting profile specified');
      return false;
    }

    return Utils.assert(
      typeof config[KEYS.COMSCORE_ENABLED] === 'boolean',
      'ComScore config: "ENABLED" must be boolean'
    );
  }

  function validateSpring(config) {
    // Don't bother validating if disabled
    if (config[KEYS.BARB_ENABLED] === false) {
      return true;
    }

    if (!hasLength(config[KEYS.BARB_SITE_CODE])) {
      DEBUG.error('Config Error: KEYS.BARB_SITE_CODE must have a value');
      return false;
    }

    if (!isStringWithNoParams(config[KEYS.BARB_SITE_CODE])) {
      DEBUG.error('Config Error: KEYS.BARB_SITE_CODE must match [a-zA-Z]');
      return false;
    }

    if (typeof config[KEYS.BARB_DEBUG] !== 'boolean') {
      DEBUG.error('Config Error: KEYS.BARB_DEBUG must be a boolean');
      return false;
    }

    return true;
  }

  function validateSscConfig(config) {

    var hostname = config[KEYS.SSC_HOSTNAME];

    if (typeof config[KEYS.USE_SSC] !== 'boolean') {
      DEBUG.error('Config Error: KEYS.USE_SSC must be boolean');
      return false;
    }

    if (hostname !== null && hostname !== '.com' && hostname !== '.co.uk') {
      DEBUG.error(
        'Config Error: SSC_HOSTNAME must be one of .com, .co.uk or null'
      );
      return false;
    }

    return true;
  }

  function getReportingProfile(profileId) {
    if (typeof profileId === 'string') {
      profileId = profileId.toUpperCase();
      if (Enums.ReportingProfiles.hasOwnProperty(profileId)) {
        return Enums.ReportingProfiles[profileId];
      }
    }

    return null;
  }

  function getCacheMode(mode) {
    if (typeof mode === 'string') {
      mode = mode.toUpperCase();
      if (Enums.EchoCacheMode.hasOwnProperty(mode)) {
        return Enums.EchoCacheMode[mode];
      }
    }

    return null;
  }

  // combine and validate the config with each
  // consumer
  function combineWithBaseConfig(userConfig) {

    var reportingProfile;
    var cacheMode;

    userConfig = userConfig || {};

    if (userConfig[KEYS.REPORTING_PROFILE]) {
      reportingProfile = getReportingProfile(userConfig[KEYS.REPORTING_PROFILE]);
    }

    if (!reportingProfile) {
      reportingProfile = getReportingProfile('PUBLIC_SERVICE');
    }

    if (userConfig[KEYS.ECHO_CACHE_MODE]) {
      cacheMode = getCacheMode(userConfig[KEYS.ECHO_CACHE_MODE]);
    }

    if (!cacheMode) {
      cacheMode = getCacheMode('OFFLINE');
    }

    var conf = Utils.extend(defaultConfig, true, reportingProfile, userConfig || {}, fixedConfig);
    if (
      !(validate(conf) && validateComScore(conf) &&
      validateSpring(conf) && validateSscConfig(conf))
    ) {
      return null;
    }

    return conf;
  }

  return {
    defaultConfig: defaultConfig,
    fixedConfig: fixedConfig,
    generate: combineWithBaseConfig
  };
}).call(exports, __webpack_require__, exports, module),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),

/***/ "./src/echo/config/keys.js":
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_RESULT__;/**
 * Keys for passing in config values. Available via Echo.ConfigKeys.
 * These valuse shoud be used as the keys in the config object passed
 * to the `EchoClient` constructor
 * @exports Echo/ConfigKeys
 * @example
 * //Example config for testing
 * var Enums = Echo.Enums,
 *     conf = {};
 *
 * // Add a "trace" so we can find the vents we generate
 * conf[Enums.ECHO.TRACE] = 'mytestabcd';
 * //Point the ComScore events at the ComScore test site (so we don't
 * //dilute the live data (also it's unsampled)
 * conf[Enums.COMSCORE.URL] = 'http://sa.bbc.co.uk/bbc/test/s';
 *
 * //...now we can pass conf into new EchoClient();
 */
!(__WEBPACK_AMD_DEFINE_RESULT__ = (function() {
  'use strict';

  var exports = {
    /**
     * General Echo config
     * @property [ENABLED=true] Set to false to switch off eventing in Echo
     * @property [TRACE] For testing purposes you can set this to a unique ID
     * for your instance so events can be easily found later on
     * @property [DEVICE_ID] Use to set the device ID, this can also be set via
     * a method call on the EchoClient instance. This value will override the s1
     * cookie in DAx
     */
    ECHO_ENABLED: 'enabled',
    ECHO_AUTO_START: 'auto_start',
    ECHO_TRACE: 'trace',
    ECHO_DEVICE_ID: 'device_id',
    REPORTING_PROFILE: 'reporting_profile',
    ECHO_CACHE_MODE: 'cache_mode',
    DEBUG_MODE: 'disabled',

    // These are managed internally and should not be set manually
    ECHO_NAME: 'lib_name',
    ECHO_VERSION: 'lib_version',

    // SSC
    USE_SSC: 'use_ssc',
    SSC_HOSTNAME: 'ssc_hostname',

    /**
     * ComScore specific config
     * @property [ENABLED=`true`] Set to `false` to disable eventing to ComScore
     * @property [HOST='sa.bbc.co.uk']
     * The domain for ComScore events.
     * Results in a comscore endpoint of 'http://sa.bbc.co.uk/bbc/bbc/s' by
     * default
     */
    COMSCORE_ENABLED: 'comscore.enabled',
    COMSCORE_HOST: 'comscore.host',
    COMSCORE_SITE: 'comscore.site',

    COMSCORE_CUSTOMER_ID: 'comscore.customer_id',
    COMSCORE_PUBLISHER_SECRET: 'comscore.publisher_secret',

    /**
     * AT Internet specific config
     * @property [ENABLED=`true`] Set to `false` to disable eventing to AT Internet
     * @property [SITE=`596068`] The ATI site code
     * @property [LOG=`logw363`] The subdomain for the ATI URL
     * @property [DOMAIN=`ati-host.net`] The domain for the ATI URL
     * @property [PIXEL_PATH=`hit.xiti`] The ATI pixel path
     * @property [FORCE_HTTPS=`false`] Whether https is forced
     */
    ATI_ENABLED: 'ati.enabled',
    ATI_LOG: 'ati.log',
    ATI_SSL_LOG: 'ati.ssl_log',
    ATI_DOMAIN: 'ati.domain',
    ATI_PIXEL_PATH: 'ati.pixel_path',
    ATI_FORCE_HTTPS: 'ati.force_https',
    ATI_CACHE_MODE_ALWAYS: 'always',
    ATI_CACHE_MODE_REQUIRED: 'required',
    APP_CATEGORY: 'app_category',
    KEEPALIVE_DURATION: 'keepalive_duration',

    /**
    * Set the destination label for reporting
    */
    DESTINATION: 'bbc_destination',

    /**
    * Set the producer label for reporting
    */
    PRODUCER: 'bbc_producer',

    /**
     * <p>
     * The URL for the test service end point.
     * </p>
     */
    TEST_SERVICE_ENABLED: 'test.enabled',
    TEST_SERVICE_URL: 'test.url',

    /**
     * Spring-specific config (for BARB reporting).
     * There are no configurable values help
     */
    BARB_ENABLED: 'barb.enabled',
    BARB_SITE_CODE: 'barb.site_code',

    // Set to true to turn on debug statements in the spring lib
    BARB_DEBUG: 'barb.debug',

    /**
     * ESS
     */
    USE_ESS: 'use_ess',
    ESS_HOSTNAME: 'ess.hostname'
  };

  return exports;
}).call(exports, __webpack_require__, exports, module),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),

/***/ "./src/echo/config/producers.js":
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_RESULT__ = (function() {
  'use strict';

  var producers = {
    // Permitted values for setting the Producer Name
    ACCOUNT: 1,
    AFAAN_OROMOO: 2,
    AFRIQUE: 3,
    AMHARIC: 4,
    ARABIC: 5,
    AZERI: 6,
    BBC: 7,
    BBC_ALBA: 8,
    BBC_ARTS: 9,
    BBC_ASIAN_NETWORK: 10,
    BBC_FOOD: 11,
    BBC_FOUR: 12,
    BBC_HD: 13,
    BBC_MUSIC: 14,
    BBC_NEWS_CHANNEL: 15,
    BBC_ONE: 16,
    BBC_PARLIAMENT_CHANNEL: 17,
    BBC_RADIO: 18,
    BBC_RADIO_1: 19,
    BBC_RADIO_1XTRA: 20,
    BBC_RADIO_2: 21,
    BBC_RADIO_3: 22,
    BBC_RADIO_4: 23,
    BBC_RADIO_4_EXTRA: 24,
    BBC_RADIO_5_LIVE: 25,
    BBC_RADIO_6_MUSIC: 26,
    BBC_SCOTLAND: 120,
    BBC_SEND: 121,
    BBC_SHOP: 27,
    BBC_THREE: 28,
    BBC_TWO: 29,
    BBC_WORLD_NEWS: 30,
    BENGALI: 31,
    BITESIZE: 32,
    BRASIL: 33,
    BRITBOX: 34,
    BURMESE: 35,
    CBBC: 36,
    CBEEBIES: 37,
    CHINESE: 38,
    ENGLISH_REGIONS: 39,
    GAHUZA: 40,
    GATEWAY: 41,
    GNL_AUTOS: 42,
    GNL_CAPITAL: 43,
    GNL_CULTURE: 44,
    GNL_EARTH: 45,
    GNL_FUTURE: 46,
    GNL_HOMEPAGE: 47,
    GNL_STORYWORKS: 48,
    GNL_TRAVEL: 49,
    GUJARATI: 50,
    HAUSA: 51,
    HINDI: 52,
    IGBO: 53,
    INDONESIAN: 54,
    IPLAYER: 55,
    JAPANESE: 56,
    KOREAN: 57,
    KYRGYZ: 58,
    MARATHI: 59,
    MEDIA_ACTION: 60,
    MONITORING: 61,
    MUNDO: 62,
    NEPALI: 63,
    NEWS: 64,
    NEWSROUND: 65,
    NORTHERN_IRELAND: 66,
    OTHER: 67,
    OWN_IT: 118,
    PASHTO: 68,
    PERSIAN: 69,
    PIDGIN: 70,
    PROGRAMMES: 71,
    PS_HOMEPAGE: 72,
    PUNJABI: 73,
    REEL: 74,
    RUSSIAN: 75,
    S4C: 76,
    SCHOOL_RADIO: 77,
    SCHOOL_REPORT: 78,
    SCOTLAND: 79,
    SEARCH: 80,
    SERBIAN: 81,
    SINHALA: 82,
    SOMALI: 83,
    SOUNDS: 84,
    SPORT: 85,
    SWAHILI: 86,
    TAMIL: 87,
    TASTER: 88,
    TEACH: 119,
    TELUGU: 89,
    THAI: 90,
    TIGRINYA: 91,
    TURKISH: 92,
    UK_CHINA: 93,
    UKRAINIAN: 94,
    URDU: 95,
    UZBEK: 96,
    VIETNAMESE: 97,
    VOICE: 98,
    VOICE_FIRST_FORMATS: 99,
    WALES: 100,
    WEATHER: 101,
    WEATHER_WATCHERS: 102,
    WORLD_SERVICE_ENGLISH: 103,
    WORKLIFE: 104,
    WS_LEARNING_ENGLISH: 105,
    WS_PARTNERS_B2B: 106,
    YORUBA: 107,
    NEWS_ENGLISH_REGIONS: 108,
    SPORT_ENGLISH_REGIONS: 109,
    NEWS_SCOTLAND: 110,
    SPORT_SCOTLAND: 111,
    NEWS_WALES: 112,
    SPORT_WALES: 113,
    NEWS_NORTHERN_IRELAND: 114,
    SPORT_NORTHERN_IRELAND: 115,
    AUDIENCE_SERVICES: 116,
    WORLD_NEWS_PROGRAMMES: 117,

    // Returns the ID associated with a given producer code
    // (e.g. passing in 'WORLD_NEWS_PROGRAMMES' returns 117.
    getId: function(producerCode) {
      var id;
      if (producerCode) {
        id = this[producerCode.toUpperCase()];
      }

      return id;
    },

    // Returns a boolean indicating whether or not here is a Producer with the ID passed in
    // (e.g. passing in 117 returns true, 999 returns false).
    hasId: function(producerId) {
      var self = this;

      if (producerId) {
        producerId = producerId.toString();
      }

      var keys = Object.getOwnPropertyNames(this);

      function findProducer(key) {
        return self[key].toString() === producerId;
      }

      return Boolean(keys.filter(findProducer).length);
    }
  };

  return producers;
}).call(exports, __webpack_require__, exports, module),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),

/***/ "./src/echo/delegate/ati/ati-delegate.js":
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_RESULT__ = (function(require) {
  'use strict';

  var SmartTag = __webpack_require__("./lib/ati/amd.smarttag-5.17.1.min.js");

  var OrbitVariables = __webpack_require__("./src/echo/delegate/ati/orbit-variables.js");

  var ATILabelKeys = __webpack_require__("./src/echo/delegate/ati/label-keys.js");
  var ConfigKeys = __webpack_require__("./src/echo/config/keys.js");
  var CustomEvent = __webpack_require__("./src/echo/delegate/ati/custom-event.js");
  var CustomVariables = __webpack_require__("./src/echo/delegate/ati/custom-variables.js");
  var MediaThemes = __webpack_require__("./src/echo/delegate/ati/media-themes.js");
  var MediaEvent = __webpack_require__("./src/echo/delegate/ati/media-event.js");
  var UserActionEvent = __webpack_require__("./src/echo/delegate/ati/user-action-event.js");

  var Destinations = __webpack_require__("./src/echo/config/destinations.js");
  var Producers = __webpack_require__("./src/echo/config/producers.js");

  var Utils = __webpack_require__("./src/echo/util/methods.js");
  var DEBUG = __webpack_require__("./src/echo/util/debug.js");
  var LabelCleanser = __webpack_require__("./src/echo/util/cleansing/label-cleanser.js");
  var Enums = __webpack_require__("./src/echo/enumerations.js");
  var Environment = __webpack_require__("./src/echo/environment.js");
  var CookieHelper = __webpack_require__("./src/echo/util/cookies.js");

  var INVALID_DATA_STRING = 'invalid-data';

  var AV_EVENT_TYPES = {
    INFO: 'info',
    MOVE: 'move',
    PAUSE: 'pause',
    PLAY: 'play',
    STOP: 'stop'
  };

  var BROADCAST_MODE = {
    CLIP: 'clip',
    LIVE: 'live'
  };

  var COLLECTION_DOMAIN = {
    testHost: 'ati-host.net',
    test: 'logw363.ati-host.net',
    testSSL: 'logws1363.ati-host.net',
    liveHost: 'api.bbc.co.uk',
    live: 'a1.api.bbc.co.uk',
    liveSSL: 'a1.api.bbc.co.uk'
  };

  var KEEPALIVE_DURATION_DEFAULT = 300000;
  var KEEPALIVE_COUNTERNAME = 'keepalive';

  //function to use when we are ignoring a function
  function dummy() {
    return -1;
  }

  function AtiDelegate(appName, appType, config, env) { // jshint ignore:line
    this._tag = null;
    this._broker = null;
    this._media = null;
    this._mediaLength = null;
    this._commonMediaParams = null;
    this._env = env;
    this._pageValues = {};
    this._customParams = {};
    this._appName = appName;
    this._appType = appType;
    this._config = config;
    this._bbc_hid = null;
    this._lastHitUrl = null;
    this._lastPlayHitUrl = null;
    this._lastPage = null;

    // set device id from config value
    this._deviceId = config[ConfigKeys.ECHO_DEVICE_ID] || undefined;

    // or from 3rd party cookie
    if (!this._deviceId) {
      this._deviceId = CookieHelper.getCookieValueByName('idrxvr');
    }

    // or from 1st party cookie
    if (!this._deviceId) {
      var cookieValue = CookieHelper.getCookieValueByName('atuserid');
      if (cookieValue) {
        this._deviceId = JSON.parse(decodeURIComponent(cookieValue)).val;
      }
    }

    if (config[ConfigKeys.ECHO_TRACE]) {
      this.setTraceId(config[ConfigKeys.ECHO_TRACE]);
    }

    this._isEnabled = (config && config[ConfigKeys.ECHO_ENABLED]);

    if (config && config[ConfigKeys.KEEPALIVE_DURATION]) {
      this._keepAliveDuration = Number(config[ConfigKeys.KEEPALIVE_DURATION]);
    } else {
      this._keepAliveDuration = KEEPALIVE_DURATION_DEFAULT;
    }
  }

  AtiDelegate.SmartTag = SmartTag;

  AtiDelegate.prototype._getHttpGetMethod = function() {
    return this._env.getHttpGet() || Environment._defaultHttpGet;
  };

  // Provide ability to use a custom HTTP GET method so that cross-domain clients can use another method instead (e.g. JSONP)
  AtiDelegate.prototype._setHTTPGetMethod = function(callback) {
    var httpGet = this._getHttpGetMethod();

    var self = this;

    // Override the ATI sendUrl method so that it uses the custom GET method. This implementation preserves the ATI event caching feature
    // whilst still allowing the custom GET method to be used
    self._tag.sendUrl = function(hit, tagCallback) {

      var makeTriggerCallback = function (trigger, hit, level) {
        return (function () {
          return function (evt) {

            self._tag.emit(trigger, {
              lvl: level,
              details: {
                hit: hit,
                event: evt
              }
            });

            if (tagCallback && typeof tagCallback === 'function') {
              tagCallback();
            }

            if (callback && typeof callback === 'function') {
              callback();
            }
          };
        })();
      };

      hit = self._addLengthToMediaHit(hit);

      var onSuccess = makeTriggerCallback('Tracker:Hit:Sent:Ok', hit, 'INFO');
      var onError = makeTriggerCallback('Tracker:Hit:Sent:Error', hit, 'ERROR');

      httpGet(hit, onSuccess, onError);
    };
  };

  AtiDelegate.prototype._getDestination = function(config, orbitVars) {
    var destination;

    if (config) {
      destination = Destinations.get(config[ConfigKeys.DESTINATION]);
    }

    if (!destination && orbitVars) {
      destination = Destinations.get(orbitVars.destination);
    }

    if (!destination) {
      // Log the fact that the default Destination is being used instead
      DEBUG.info('Destination not found, using default site');

      // Set to the default ATI site
      destination = Destinations.DEFAULT;
    }

    return destination;
  };

  AtiDelegate.prototype._getProducer = function(config, orbitVars, destination) {
    var producer;

    if (config) {
      producer = Producers.getId(config[ConfigKeys.PRODUCER]);
    }

    if (!producer && orbitVars) {
      producer = Producers.getId(orbitVars.producer);
    }

    if (!producer && destination) {
      DEBUG.info('Producer not found, using default producer');
      producer = destination.defaultProducer;
    }

    return producer;
  };

  AtiDelegate.prototype.setDestination = function(destination) {
    if (!destination) {
      // Use the default destination if the passed in destination code was not found or empty
      destination = Destinations.DEFAULT;

      // Log the fact that the default Destination is being used instead
      DEBUG.info('Destination not found, using default site instead');
    }

    if (destination) {
      this.setProducer(destination.defaultProducer);
      this._setDomain(destination.isTest);
      this._tag.setConfig(ATILabelKeys.LEVEL_1_SITE, destination.id);
    }
  };

  AtiDelegate.prototype.setProducer = function(producerId) {
    this.addLabel(ATILabelKeys.LEVEL_2_SITE, producerId);
  };

  AtiDelegate.prototype._getCookieDomain = function(window) {
    var cookieDomain;

    // Look for .bbc.com at the end of the hostname
    if (window && window.location && window.location.hostname && window.location.hostname.match(/.bbc.com$/)) {
      cookieDomain = 'bbc.com';
    } else {
      cookieDomain = 'bbc.co.uk';
    }

    return cookieDomain;
  };

  AtiDelegate.prototype._setDomain = function(isTest) {
    if (isTest) {
      this._tag.setConfig('domain', COLLECTION_DOMAIN.testHost);
      this._tag.setConfig('collectDomain', COLLECTION_DOMAIN.test);
      this._tag.setConfig('collectDomainSSL', COLLECTION_DOMAIN.testSSL);
    } else {
      this._tag.setConfig('domain', COLLECTION_DOMAIN.liveHost);
      this._tag.setConfig('collectDomain', COLLECTION_DOMAIN.live);
      this._tag.setConfig('collectDomainSSL', COLLECTION_DOMAIN.liveSSL);
    }
  };

  AtiDelegate.prototype._setSection = function(clonedLabels, eventValues, orbitVars) {
    if (!eventValues) {
      return;
    }

    if (clonedLabels && clonedLabels[ATILabelKeys.SECTION]) {
      // Use the label value for the section if it is provided
      eventValues[ATILabelKeys.CHAPTER_1] = LabelCleanser.cleanCustomVariable(clonedLabels[ATILabelKeys.SECTION]);

      if (eventValues.customObject) {
        delete eventValues.customObject[ATILabelKeys.SECTION];
      }

    } else if (orbitVars && orbitVars.section) {
      // Otherwise, default to the Orbit section (if there is one)
      eventValues[ATILabelKeys.CHAPTER_1] = LabelCleanser.cleanCustomVariable(orbitVars.section);
    }
  };

  AtiDelegate.prototype._createAtiOptions = function(config, destination) {
    var atiOpts;
    if (config) {
      atiOpts = {
        collectDomain: destination.isTest ? COLLECTION_DOMAIN.test : COLLECTION_DOMAIN.live,
        collectDomainSSL: destination.isTest ? COLLECTION_DOMAIN.testSSL : COLLECTION_DOMAIN.liveSSL,
        cookieDomain: this._getCookieDomain(window),
        domain: destination.isTest ? COLLECTION_DOMAIN.testHost : COLLECTION_DOMAIN.liveHost,
        pixelPath: config[ConfigKeys.ATI_PIXEL_PATH] || '/hit.xiti',
        secure: config[ConfigKeys.ATI_FORCE_HTTPS] === false ? false : true,
        site: destination.id
      };

      if (config[ConfigKeys.ATI_LOG]) {
        atiOpts.log = config[ConfigKeys.ATI_LOG];
      }

      if (config[ConfigKeys.ATI_SSL_LOG]) {
        atiOpts.logSSL = config[ConfigKeys.ATI_SSL_LOG];
      }

      if (config[ConfigKeys.ECHO_DEVICE_ID]) {
        atiOpts.ClientSideUserId = {
          clientSideMode: 'required',
          userIdCookieDuration: 397,
          userIdExpirationMode: 'fixed'
        };
      }

      // Configure the cache mode
      switch (config[ConfigKeys.ECHO_CACHE_MODE]) {
        case Enums.EchoCacheMode.ALL:
          atiOpts.Offline = {
            storageMode: ConfigKeys.ATI_CACHE_MODE_ALWAYS
          };
          break;
        default:
          atiOpts.Offline = {
            storageMode: ConfigKeys.ATI_CACHE_MODE_REQUIRED
          };
      }
    }

    return atiOpts;
  };

  // PRIVATE
  AtiDelegate.prototype._createTag = function(atiOpts) {
    return new AtiDelegate.SmartTag.Tracker.Tag(atiOpts);
  };

  AtiDelegate.prototype._initTag = function(orbitVars) {
    if (this._tag) {
      return;
    }

    var config = this._config;

    var destination = this._getDestination(config, orbitVars);
    var atiOpts = this._createAtiOptions(config, destination);

    this._tag = this._createTag(atiOpts);
    this._tag.onTrigger('Tracker:Hit:Sent:Ok', this._onHitSent.bind(this));

    if (this._debug) {
      this._tag.debug = function(info) {
        DEBUG.info('ATI DEBUG: ' + info);
      };
    }

    if (this._deviceId) {
      this._tag.clientSideUserId.set(this._deviceId);
    }

    if (this._bbc_hid) {
      this._tag.setParam(ATILabelKeys.HASHED_ID, this._bbc_hid, { hitType: ['all'], permanent: true });
    }

    var producer = this._getProducer(config, orbitVars, destination);
    this.setProducer(producer);

    if (config && config[ConfigKeys.APP_CATEGORY]) {
      this.addLabel(ATILabelKeys.APP_CATEGORY, config[ConfigKeys.APP_CATEGORY]);
    }

    // Provide custom GET method if specified
    this._setHTTPGetMethod();
  };

  AtiDelegate.prototype.start = function(orbitVars) {
    if (this._isEnabled && !this._hasStarted) {
      this._hasStarted = true;
      return this._initTag(orbitVars);
    }
  };

  AtiDelegate.prototype.enable = function() {
    if (!this._isEnabled) {
      this._isEnabled = true;
    }
  };

  AtiDelegate.prototype.disable = function() {
    if (this._isEnabled) {
      this._isEnabled = false;
      this.clearMedia();
    }
  };

  AtiDelegate.prototype._onHitSent = function(trigger, hit) {
    if (hit && hit.details && hit.details.hit) {
      this._setLastHitUrl(hit.details.hit);
    }
  };

  AtiDelegate.prototype._addLengthToMediaHit = function(hitUrl) {
    //If the hit is a rich media event, make sure we have the most recent media length (m1)
    if (hitUrl && typeof hitUrl === 'string' && hitUrl.match(/a\=(play|pause|stop|info|refresh|move)/)) {
      if (this._mediaLength) {
        var length = 'm1=' + Math.ceil(this._mediaLength / 1000);
        hitUrl = hitUrl.replace(/m1\=\d+/g, length);
      }
    }

    return hitUrl;
  };

  AtiDelegate.prototype._setLastHitUrl = function(hitUrl) {
    if (hitUrl && typeof hitUrl === 'string' && hitUrl.match(/a\=play/)) {
      this._lastPlayHitUrl = hitUrl;
    } else {
      this._lastHitUrl = hitUrl;
    }
  };

  AtiDelegate.prototype.setTraceId = function(id) {
    this.addLabel(ConfigKeys.ECHO_TRACE, id);
  };

  // Application State Methods
  AtiDelegate.prototype.addLabels = function(labels) {
    if (typeof labels === 'object') {
      if (labels.bbc_identity) {

        this.setBBCUser({
          bbc_hid: labels.bbc_hid,
          signed_in: labels.bbc_identity === '1'
        });

        delete labels.bbc_hid;
        delete labels.bbc_identity;
      }

      for (var label in labels) {
        if (labels.hasOwnProperty(label)) {
          this.addLabel(label, labels[label]);
        }
      }
    }
  };

  AtiDelegate.prototype.addLabel = function(label, value) {
    // if (this._isExcludedLabel(label) === true) {
    //   return;
    // }

    // add known labels to ATI page values, unknown to customObject
    if (label === ATILabelKeys.BBC_COUNTER_NAME || label === ATILabelKeys.LEVEL_2_SITE) {
      this._pageValues[label] = value;
    } else {
      this._customParams[label] = value;
    }
  };

  AtiDelegate.prototype.setLoggedInToBBCId = function(hid) {
    this.setBBCUser({
      bbc_hid: hid,
      signed_in: true
    });
  };

  AtiDelegate.prototype.setLoggedOutOfBBCId = function() {
    if (this._tag) {
      this._tag.delParam(ATILabelKeys.HASHED_ID);
    }

    this._bbc_hid = null;
  };

  AtiDelegate.prototype.setAppVersion = function (version) {
    if (version && this._tag) {
      this._tag.setParam(ATILabelKeys.APP_VERSION, '[' + version + ']', { hitType: ['all'], permanent: true });
    }
  };

  AtiDelegate.prototype.setBBCUser = function(userInfo) {
    if (userInfo.bbc_hid) {
      this._bbc_hid = userInfo.bbc_hid;
    } else if (userInfo.signed_in) {
      this._bbc_hid = 'unidentified-user';
    }

    if (this._tag && !this._customParams.bbc_id_wait) {
      this._tag.setParam(ATILabelKeys.HASHED_ID, this._bbc_hid, { hitType: ['all'], permanent: true });
    }
  };

  AtiDelegate.prototype.addManagedLabel = dummy;

  AtiDelegate.prototype.removeLabels = function(keysArray) {
    for (var i = 0, len = keysArray.length; i < len; i++) {
      this.removeLabel(keysArray[i]);
    }
  };

  AtiDelegate.prototype.removeLabel = function(label) {
    if (label === ATILabelKeys.BBC_COUNTER_NAME || label === ATILabelKeys.LEVEL_2_SITE) {
      delete this._pageValues[label];
    } else {
      delete this._customParams[label];
    }
  };

  AtiDelegate.prototype.setCounterName = function (counterName) {
    this._tag.page.set({
      name: counterName,
      level2: this._pageValues[ATILabelKeys.LEVEL_2_SITE]
    });
  };

  AtiDelegate.prototype.setContentLanguage = dummy;
  AtiDelegate.prototype.setCacheMode = dummy;

  AtiDelegate.prototype.clearCache = function() {
    this._tag.offline.remove();
  };

  AtiDelegate.prototype.flushCache = function() {
    this._tag.offline.send();
  };

  AtiDelegate.prototype.setESSEnabled = dummy;

  // Analytics Methods
  AtiDelegate.prototype.viewEvent = function(counterName, eventLabels) {
    if (!this._eventsEnabled()) {
      return;
    }

    // Set countername as a persistent label so it's included on all subsequent events.
    this.addLabel(ATILabelKeys.BBC_COUNTER_NAME, counterName);

    this.counterName = counterName;

    return OrbitVariables.get().then((function (orbitVars) {

      var clonedCustomParams =  Utils.clone(this._customParams);
      var customVars = CustomVariables.create(this._appName, this._appType, clonedCustomParams, eventLabels, orbitVars, document);

      // This sets custom/event labels to the customObject
      var clonedLabels = Utils.extend(
        eventLabels, true,
        ATILabelKeys.ECHO_EVENT_NAME, 'view'
      );

      var customObject = Utils.combineObjects(clonedCustomParams, clonedLabels, false);
      var eventValues = Utils.clone(this._pageValues);
      eventValues.customObject = customObject;
      if (customVars) {
        eventValues.customVars = customVars;
      }

      // Set the section
      this._setSection(clonedLabels, eventValues, orbitVars);

      this._tag.page.send(eventValues);
      this._lastPage = eventValues;

    }).bind(this));
  };

  AtiDelegate.prototype.errorEvent = dummy;

  AtiDelegate.prototype.userActionEvent = function(actionType, actionName, eventLabels) {
    if (!this._eventsEnabled()) {
      return;
    }

    // This sets custom/event labels to the customObject
    var clonedLabels = Utils.extend(
      eventLabels, true,
      ATILabelKeys.ECHO_EVENT_NAME, 'userAct'
    );

    var customObject = Utils.combineObjects(this._customParams, clonedLabels, false);
    var eventValues = Utils.clone(this._pageValues);

    if (eventValues) {
      eventValues.actionName = actionName;
      eventValues.actionType = actionType;
      eventValues.user = this._bbc_hid;
      eventValues[ATILabelKeys.BBC_COUNTER_NAME] = this.counterName;
      eventValues.customObject = customObject;

      var isBackgroundEvent = Boolean(eventValues.customObject[ATILabelKeys.IS_BACKGROUND]);

      if (isBackgroundEvent) {
        UserActionEvent.sendImpressionEvent(this._tag, eventValues);
      } else {
        UserActionEvent.sendClickEvent(this._tag, eventValues);
      }
    }
  };

  // Media Player attributes
  AtiDelegate.prototype.setPlayerName = function(mediaPlayerName) {
    this._mediaPlayerName = mediaPlayerName;
  };

  AtiDelegate.prototype.setPlayerVersion = function(mediaPlayerVersion) {
    this._mediaPlayerVersion = mediaPlayerVersion;
  };

  AtiDelegate.prototype.setPlayerIsPopped = dummy;
  AtiDelegate.prototype.setPlayerWindowState = dummy;
  AtiDelegate.prototype.setPlayerVolume = dummy;
  AtiDelegate.prototype.setPlayerIsSubtitled = dummy;

  /**
   * Sets the broker.
   *
   * This method should only be called by the EchoClient class to
   * ensure the interface is implemented.
   *
   * @param {Object} broker An object conforming to the broker interface.
   *
   * @return {AtiDelegate}
   */
  AtiDelegate.prototype.setBroker = function(broker) {
    this._broker = broker;
    return this;
  };

  // Media Attributes
  AtiDelegate.prototype.setMedia = function(media) {
    if (!this._eventsEnabled()) {
      return;
    }

    // If the media player name has previously provided and isn't set in this media object
    // then use the previously provided value
    if (this._mediaPlayerName && !media.getMediaPlayerName()) {
      media.setMediaPlayerName(this._mediaPlayerName);
    }

    // If the media player version has previously provided and isn't set in this media object
    // then use the previously provided value
    if (this._mediaPlayerVersion && !media.getMediaPlayerVersion()) {
      media.setMediaPlayerVersion(this._mediaPlayerVersion);
    }

    this.clearMedia();
    this._media = media;
    this.addMedia(this._media);
  };

  AtiDelegate.prototype.setMediaLength = function(length) {
    this._mediaLength = length;
    this._media.setLength(length);
  };

  AtiDelegate.prototype.setMediaBitrate = dummy;
  AtiDelegate.prototype.setMediaCodec = dummy;
  AtiDelegate.prototype.setMediaCDN = dummy;

  /**
   * Handles an updated clip from the LiveBroker
   *
   * @param {Media} newMedia
   * @param {Number} newPosition
   * @param {Number} oldPosition
   */
  AtiDelegate.prototype.liveMediaUpdate = function(newMedia, newPosition, oldPosition) {

    Utils.assert(
      typeof newPosition === 'number',
      'newPosition must be a number'
    );

    Utils.assert(
      typeof oldPosition === 'number',
      'oldPosition must be a number'
    );
    newMedia.setProducerById(this._media.getProducer());

    // stop playback
    this._sendMediaEvent(AV_EVENT_TYPES.STOP);
    this._media = newMedia;
    this.addMedia(this._media);

    this._sendMediaEvent(AV_EVENT_TYPES.PLAY);
  };

  AtiDelegate.prototype.liveEnrichmentFailed = dummy;

  AtiDelegate.prototype._getIdObjectValue = function(_idObject) {
    if (_idObject !== null && _idObject.isValueValid()) {
      return _idObject.getValue();
    }

    return INVALID_DATA_STRING;
  };

  AtiDelegate.prototype._getMostPrecedentIdObject = function() {
    var versionId = this._media.getVersionIdObject();
    var episodeId = this._media.getEpisodeIdObject();
    var clipId    = this._media.getClipIdObject();
    var vpId      = this._media.getVpIdObject();
    var serviceId = this._media.getServiceIdObject();

    if (versionId.isValueValid()) {
      return versionId;
    } else if (episodeId.isValueValid()) {
      return episodeId;
    } else if (clipId.isValueValid()) {
      return clipId;
    } else if (vpId.isValueValid()) {
      return vpId;
    } else if (serviceId.isValueValid()) {
      return serviceId;
    }

    return null;
  };

  AtiDelegate.prototype._eventsEnabled = function() {
    return this._isEnabled && this._hasStarted;
  };

  AtiDelegate.prototype.addMedia = function(media) {
    if (this._tag && this._tag.richMedia) {

      // Build the set of common media params that are sent with every event
      this._commonMediaParams = {
        playerId: media.getPlayerId(),
        mediaLabel: this._getIdObjectValue(this._getMostPrecedentIdObject()),
        mediaTheme1: MediaThemes.constructThemeOne(media),
        mediaTheme2: MediaThemes.constructThemeTwo(media),
        mediaTheme3: MediaThemes.constructThemeThree(media)
      };

      var richMediaParams = {
        mediaType: media.getAvType(),
        playerId: this._commonMediaParams.playerId,
        duration: (!media || !media.getLength()) ?
          0 : Math.ceil(media.getLength() / 1000),
        mediaLabel: this._commonMediaParams.mediaLabel,
        mediaTheme1: this._commonMediaParams.mediaTheme1,
        mediaTheme2: this._commonMediaParams.mediaTheme2,
        mediaTheme3: this._commonMediaParams.mediaTheme3,
        isEmbedded: media.isEmbedded(),
        broadcastMode: media.getMediaConsumptionMode() === BROADCAST_MODE.LIVE ? BROADCAST_MODE.LIVE : BROADCAST_MODE.CLIP,
        refreshDuration: {
          0: 10,
          1: 60
        }
      };
      if (media.getProducer()) {
        richMediaParams.mediaLevel2 = media.getProducer();
      }

      this._tag.richMedia.add(richMediaParams);
    }
  };

  // Media Events

  AtiDelegate.prototype._sendMediaEvent = function(action, additionalEventArgs) {
    if (this._commonMediaParams) {
      MediaEvent.sendEvent(this._tag, this._commonMediaParams, action, additionalEventArgs);
    }
  };

  AtiDelegate.prototype.avPlayEvent = function(position, eventLabels) { // jshint ignore:line
    if (!this._eventsEnabled() || this._media.getPlaying()) {
      // return if events disabled or already playing
      return;
    }

    if (this._media.getBuffering()) {
      this._sendMediaEvent(AV_EVENT_TYPES.INFO, {
        isBuffering: false
      });
    } else {
      this._sendMediaEvent(AV_EVENT_TYPES.PLAY);
      this._addKeepAliveEventSchedule();
    }
  };

  AtiDelegate.prototype._addKeepAliveEventSchedule = function() {
    if (!this._eventsEnabled()) {
      return;
    }

    if (!this._keepAliveIntervalId) {
      this._keepAliveIntervalId = setInterval(
        this._sendKeepAliveEvent.bind(this),
        this._keepAliveDuration);
    }
  };

  AtiDelegate.prototype._removeKeepAliveEventSchedule = function() {
    if (this._keepAliveIntervalId) {
      clearInterval(this._keepAliveIntervalId);
      this._keepAliveIntervalId = undefined;
    }
  };

  AtiDelegate.prototype._sendKeepAliveEvent = function() {
    if (!this._eventsEnabled()) {
      return;
    }

    var producerId =  (this._media && this._media.getProducer()) ? this._media.getProducer() : 0;

    var event = {
      name: KEEPALIVE_COUNTERNAME,
      level2: producerId
    };

    this._tag.page.send(event);

    //re-add the previous page so subsequent events are correctly attributed
    if (this._lastPage) {
      this._tag.page.set(this._lastPage);
    }
  };

  AtiDelegate.prototype.avPauseEvent = function() {
    if (!this._eventsEnabled()) {
      return;
    }

    this._sendMediaEvent(AV_EVENT_TYPES.PAUSE);
  };

  AtiDelegate.prototype.avBufferEvent = function() {
    if (!this._eventsEnabled()) {
      return;
    }

    this._sendMediaEvent(AV_EVENT_TYPES.INFO, {
      isBuffering: true
    });
  };

  AtiDelegate.prototype.avEndEvent = function() {
    if (!this._eventsEnabled()) {
      return;
    }

    this._isMediaLoaded = false;

    this._removeKeepAliveEventSchedule();

    this._sendMediaEvent(AV_EVENT_TYPES.STOP);

    if (this.isValidMedia()) {
      this.clearMedia();
    }
  };

  AtiDelegate.prototype.avRewindEvent = function() {
    if (!this._eventsEnabled()) {
      return;
    }

    this._sendMediaEvent(AV_EVENT_TYPES.MOVE);
  };

  AtiDelegate.prototype.avFastForwardEvent = function() {
    if (!this._eventsEnabled()) {
      return;
    }

    this._sendMediaEvent(AV_EVENT_TYPES.MOVE);
  };

  AtiDelegate.prototype.avSeekEvent = function() {
    if (!this._eventsEnabled()) {
      return;
    }

    this._sendMediaEvent(AV_EVENT_TYPES.MOVE);
  };

  AtiDelegate.prototype.avUserActionEvent = function(actionType, actionName, position, eventLabels) { // jshint ignore:line
    if (actionType === 'echo_hb' && actionName === 'echo_hb_5') {
      var hitUrl = this._addLengthToMediaHit(this._lastPlayHitUrl);
      CustomEvent.sendRefreshEvent(this._tag, this._getHttpGetMethod(), hitUrl);
    }
  };

  AtiDelegate.prototype.clearMedia = function() {
    if (this.isValidMedia()) {
      if (this._isMediaLoaded) {
        this.avEndEvent();
      }

      this._stream = null;
      this._media = null;
      this._commonMediaParams = null;
      this._tag.richMedia.removeAll();
    }
  };

  AtiDelegate.prototype.isValidMedia = function() {
    return this._media !== null && this._media.avType === Enums.AvType.VIDEO;
  };

  AtiDelegate.prototype.isValidLiveMedia = function() {
    return this.isValidMedia() && this._media.isLive();
  };

  /**
   * Gets the device ID that was used to report to ATI.
   *
   * @returns {String|null}
   */
  AtiDelegate.prototype.getDeviceId = function() {
    return this._deviceId;
  };

  AtiDelegate.prototype.requiresLabelCleansing = function() {
    return true;
  };

  return AtiDelegate;
}).call(exports, __webpack_require__, exports, module),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),

/***/ "./src/echo/delegate/ati/custom-event.js":
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_RESULT__ = (function() {
  'use strict';

  function CustomEvent() {}

  CustomEvent.sendRefreshEvent = function(tag, httpGet, lastPlayHitUrl) {
    if (lastPlayHitUrl) {
      var refreshHitUrl = lastPlayHitUrl;
      refreshHitUrl = refreshHitUrl.replace(/a\=play/g, 'a=refresh');
      refreshHitUrl = refreshHitUrl.replace(/ts\=[0-9\.]+/g, 'ts=' + new Date().getTime());
      refreshHitUrl = refreshHitUrl.replace(/(prich\=|s2rich\=).*?(&|$)/g, '');

      httpGet(refreshHitUrl, function() {
        tag.emit('Tracker:Hit:Sent:Ok', refreshHitUrl);
      }.bind(tag));
    }
  };

  return CustomEvent;
}).call(exports, __webpack_require__, exports, module),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),

/***/ "./src/echo/delegate/ati/custom-variables.js":
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_RESULT__ = (function(require) {
  'use strict';

  var ATILabelKeys = __webpack_require__("./src/echo/delegate/ati/label-keys.js");
  var LabelCleanser = __webpack_require__("./src/echo/util/cleansing/label-cleanser.js");
  var LibraryInfo = __webpack_require__("./src/echo/util/library-info.js");

  var customVariables = {

    APP_NAME: undefined,
    APP_CATEGORY: undefined,

    // NB - These custom variable keys are defined as string values in label-key.js
    bbc_content_id: 1,
    bbc_app_type: 2,
    bbc_app_name: 3,
    language: 4,
    bbc_url: 5,
    bbc_referrer_url: 6,
    bbc_content_type: 7,
    bbc_library_version: 8,
    page_title: 9,

    custom_var_1: 11,
    custom_var_2: 12,
    custom_var_3: 13,
    custom_var_4: 14,
    custom_var_5: 15,
    custom_var_6: 16,
    custom_var_7: 17,
    custom_var_8: 18,
    custom_var_9: 19,
    custom_var_10: 20,

    // Creates a custom variables object
    create: function(appName, appType, customParams, eventLabels, orbitVars, document) {
      var customVars;
      this.APP_NAME = appName;

      if (customParams && customParams[ATILabelKeys.APP_CATEGORY]) {
        this.APP_CATEGORY = customParams[ATILabelKeys.APP_CATEGORY];
      } else {
        this.APP_CATEGORY = '';
      }

      // The _setCustomVariable method will lazily initialie the custom variables object and return the
      // complete set of custom variables added so far
      customVars = this._setCustomVariable(customVars, ATILabelKeys.APP_TYPE, appType);
      customVars = this._setCustomVariable(customVars, ATILabelKeys.APP_NAME, appName);

      customVars = this._setCustomVariable(customVars, ATILabelKeys.LIBRARY_VERSION, LibraryInfo.getLibraryName() + '-' + LibraryInfo.getLibraryVersion());

      if (document) {
        customVars = this._setDocumentCustomVariables(customVars, document);
      }

      if (orbitVars) {
        customVars = this._setOrbitCustomVariables(customVars, orbitVars);
      }

      this._applyLabels(customVars, customParams);
      this._applyLabels(customVars, eventLabels);

      return customVars;
    },

    // Initialises a custom variables object ready for custom variables to be added
    _initialise: function() {
      // Initialise the custom variables object
      return {
        site: {}
      };
    },

    // Iterates through the labels and adds recognised custom variables
    _applyLabels: function(customVars, labels) {
      if (labels) {
        var appName = this._getAppName(labels);
        if (labels[ATILabelKeys.APP_CATEGORY]) {
          customVars = this._setCustomVariable(customVars, ATILabelKeys.APP_NAME, appName);
          delete labels[ATILabelKeys.APP_CATEGORY];
        }

        Object.keys(labels).forEach(function(key) {
          if (this._isCustomVariable(key)) {
            if (key === ATILabelKeys.APP_NAME) {
              labels[key] = appName;
            }

            customVars = this._setCustomVariable(customVars, key, labels[key]);

            // Remove the label as it has been added to the custom variables
            delete labels[key];
          }
        }, this);
      }
    },

    // Fetch the app category and app name from the provided labels, app category prepended to app name
    _getAppName: function(labels) {

      var appName = '';
      if (labels[ATILabelKeys.APP_CATEGORY]) {
        appName = labels[ATILabelKeys.APP_CATEGORY] + '-';
      } else if (this.APP_CATEGORY) {
        appName = this.APP_CATEGORY + '-';
      }

      if (labels[ATILabelKeys.APP_NAME]) {
        appName += labels[ATILabelKeys.APP_NAME];
      } else {
        appName += this.APP_NAME;
      }

      return appName;
    },

    // Tests whether the label passed in represents the key of a custom variable
    _isCustomVariable: function(label) {
      return (this[label] !== undefined && this.hasOwnProperty(label) && typeof this[label] !== 'function');
    },

    // Lazily initialies the custom variables object and returns the custom variables object containing the complete
    // set of custom variables added so far
    _setCustomVariable: function(customVars, key, value) {
      if (value) {
        if (!customVars) {
          customVars = this._initialise();
        }

        var nonSensitive = LabelCleanser.removeSensitiveInfo(value);
        var cleansedValue = LabelCleanser.cleanCustomVariable(nonSensitive);

        var siteKey = this[key];
        customVars.site[siteKey] = '[' + encodeURIComponent(cleansedValue) + ']';
      }

      return customVars;
    },

    // Sets the document-based properties on the custom variables object
    _setDocumentCustomVariables: function(customVars, document) {
      if (document) {
        customVars = this._setCustomVariable(customVars, ATILabelKeys.URL, document.URL);
        customVars = this._setCustomVariable(customVars, ATILabelKeys.REFERRER_URL, document.referrer);
        customVars = this._setCustomVariable(customVars, ATILabelKeys.PAGE_TITLE, document.title);
      }

      return customVars;
    },

    // Sets the Orbit-based properties on the custom variables object (if available)
    _setOrbitCustomVariables: function(customVars, orbitVars) {
      if (orbitVars) {
        customVars = this._setCustomVariable(customVars, ATILabelKeys.CONTENT_ID, orbitVars.contentId);
        customVars = this._setCustomVariable(customVars, ATILabelKeys.CONTENT_TYPE, orbitVars.contentType);
        customVars = this._setCustomVariable(customVars, ATILabelKeys.LANGUAGE, orbitVars.language);
        customVars = this._setProductCustomVariables(customVars, orbitVars.additionalProperties);
      }

      return customVars;
    },

    _setProductCustomVariables: function(customVars, productVars) {
      if (productVars) {
        if (productVars.app_category) {
          customVars = this._setCustomVariable(customVars, ATILabelKeys.APP_NAME, this._getAppName(productVars));
        }

        if (productVars.content_language) {
          customVars = this._setCustomVariable(customVars, ATILabelKeys.LANGUAGE, productVars.content_language);
        }

        customVars = this._setCustomVariable(customVars, ATILabelKeys.CUSTOM_VAR_1, productVars.custom_var_1);
        customVars = this._setCustomVariable(customVars, ATILabelKeys.CUSTOM_VAR_2, productVars.custom_var_2);
        customVars = this._setCustomVariable(customVars, ATILabelKeys.CUSTOM_VAR_3, productVars.custom_var_3);
        customVars = this._setCustomVariable(customVars, ATILabelKeys.CUSTOM_VAR_4, productVars.custom_var_4);
        customVars = this._setCustomVariable(customVars, ATILabelKeys.CUSTOM_VAR_5, productVars.custom_var_5);
        customVars = this._setCustomVariable(customVars, ATILabelKeys.CUSTOM_VAR_6, productVars.custom_var_6);
        customVars = this._setCustomVariable(customVars, ATILabelKeys.CUSTOM_VAR_7, productVars.custom_var_7);
        customVars = this._setCustomVariable(customVars, ATILabelKeys.CUSTOM_VAR_8, productVars.custom_var_8);
        customVars = this._setCustomVariable(customVars, ATILabelKeys.CUSTOM_VAR_9, productVars.custom_var_9);
        customVars = this._setCustomVariable(customVars, ATILabelKeys.CUSTOM_VAR_10, productVars.custom_var_10);
      }

      return customVars;
    }
  };

  return customVariables;
}).call(exports, __webpack_require__, exports, module),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),

/***/ "./src/echo/delegate/ati/label-keys.js":
/***/ (function(module, exports, __webpack_require__) {

!(module.exports = {
  BBC_COUNTER_NAME: 'name',
  ECHO_EVENT_NAME: 'echo_event',
  APP_VERSION: 'apvr',
  HASHED_ID: 'at',

  // Page variables
  LEVEL_1_SITE: 'site',
  LEVEL_2_SITE: 'level2',
  SECTION: 'section',
  CHAPTER_1: 'chapter1',

  // Custom site variables
  CONTENT_ID: 'bbc_content_id',
  APP_TYPE: 'bbc_app_type',
  APP_NAME: 'bbc_app_name',
  APP_CATEGORY: 'app_category',
  LANGUAGE: 'language',
  URL: 'bbc_url',
  REFERRER_URL: 'bbc_referrer_url',
  CONTENT_TYPE: 'bbc_content_type',
  LIBRARY_VERSION: 'bbc_library_version',
  PAGE_TITLE: 'page_title',
  CUSTOM_VAR_1: 'custom_var_1',
  CUSTOM_VAR_2: 'custom_var_2',
  CUSTOM_VAR_3: 'custom_var_3',
  CUSTOM_VAR_4: 'custom_var_4',
  CUSTOM_VAR_5: 'custom_var_5',
  CUSTOM_VAR_6: 'custom_var_6',
  CUSTOM_VAR_7: 'custom_var_7',
  CUSTOM_VAR_8: 'custom_var_8',
  CUSTOM_VAR_9: 'custom_var_9',
  CUSTOM_VAR_10: 'custom_var_10',

  MEDIA_PLAYER: 'bbc_media_player',

  LOGGED_IN: 'bbc_identity',
  BBC_HID: 'bbc_hid',

  MEDIA_BRAND: 'brand',
  MEDIA_SERIES: 'series',

  // Set to determine if the user action is an interaction or a background event
  IS_BACKGROUND: 'is_background',

  // Set the additional source details for the event
  SOURCE: 'source',

  // Set the container as the first level of the data hierarchy for reporting
  CONTAINER: 'container',

  // Set metadata to add additional detail to events for reporting
  METADATA: 'metadata',

  // Set personalisation for reporting
  PERSONALISATION: 'personalisation',

  // Set result of what you would like to track
  RESULT: 'result'
});


/***/ }),

/***/ "./src/echo/delegate/ati/media-event.js":
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_RESULT__ = (function() {
  'use strict';

  function MediaEvent() {}

  MediaEvent.sendEvent = function(tag, commonMediaParams, action, additionalEventArgs) {
    if (commonMediaParams) {
      var event = {
        action: action,
        playerId: commonMediaParams.playerId,
        mediaLabel: commonMediaParams.mediaLabel,
        mediaTheme1: commonMediaParams.mediaTheme1,
        mediaTheme2: commonMediaParams.mediaTheme2,
        mediaTheme3: commonMediaParams.mediaTheme3
      };

      // Merge in any additional event arguments
      for (var key in additionalEventArgs) {
        if (additionalEventArgs.hasOwnProperty(key)) {
          event[key] = additionalEventArgs[key];
        }
      }

      tag.richMedia.send(event);
    }
  };

  return MediaEvent;
}).call(exports, __webpack_require__, exports, module),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),

/***/ "./src/echo/delegate/ati/media-themes.js":
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_RESULT__ = (function() {
  'use strict';

  var LibraryInfo = __webpack_require__("./src/echo/util/library-info.js");

  var SEPARATOR_CHAR = '~';

  var keys = {
    THEME_ONE: {
      BRAND: 'brand',
      SERIES: 'series',
      EPISODE: 'episode',
      CLIP: 'clip',
      NAME: 'name',
      TYPE: 'type',
      PLIST: 'pList'
    },
    THEME_TWO: {
      RETRIEVAL_TYPE: 'retType',
      INITATION_TYPE: 'init',
      ADS_ENABLED: 'adEna'
    },
    THEME_THREE: {
      PLAYER_NAME: 'mpN',
      PLAYER_VERSION: 'mpV',
      TRANSPORT_MODE: 'tMod',
      LIBRARY_NAME: 'mlN',
      LIBRARY_VERSION: 'mlV'
    }
  };

  function nullToStr(value) {
    return value ? value : '';
  }

  var mediaThemes = {

    buildTheme: function(key, value, omitSeparator) {
      return key + '=' + encodeURIComponent(nullToStr(value)) + (omitSeparator ? '' : SEPARATOR_CHAR);
    },

    constructThemeOne: function(media) {
      var themeOne = '';
      if (media) {
        themeOne = this.buildTheme(keys.THEME_ONE.BRAND, media.getBrandId());
        themeOne += this.buildTheme(keys.THEME_ONE.SERIES, media.getSeriesId());
        themeOne += this.buildTheme(keys.THEME_ONE.EPISODE, media.getEpisodeId());
        themeOne += this.buildTheme(keys.THEME_ONE.CLIP, media.getClipId());
        themeOne += this.buildTheme(keys.THEME_ONE.NAME, media.getName());
        themeOne += this.buildTheme(keys.THEME_ONE.TYPE, media.getType());
        if (media.isLive()) {
          themeOne += this.buildTheme(keys.THEME_ONE.PLIST, media.getServiceId(), true);
        } else {
          themeOne += this.buildTheme(keys.THEME_ONE.PLIST, media.getPlaylist(), true);
        }
      }

      return themeOne;
    },

    constructThemeTwo: function(media) {
      var themeTwo = '';
      if (media) {
        themeTwo = this.buildTheme(keys.THEME_TWO.RETRIEVAL_TYPE, media.getRetrievalType());
        themeTwo += this.buildTheme(keys.THEME_TWO.INITATION_TYPE, media.getInitiationType());
        themeTwo += this.buildTheme(keys.THEME_TWO.ADS_ENABLED, media.isAdsEnabled() ? '1' : '0', true);
      }

      return themeTwo;
    },

    constructThemeThree: function(media) {
      var themeThree = '';
      if (media) {
        themeThree = this.buildTheme(keys.THEME_THREE.PLAYER_NAME, media.getMediaPlayerName());
        themeThree += this.buildTheme(keys.THEME_THREE.PLAYER_VERSION, media.getMediaPlayerVersion());
        themeThree += this.buildTheme(keys.THEME_THREE.TRANSPORT_MODE, media.getTransportMode());
        themeThree += this.buildTheme(keys.THEME_THREE.LIBRARY_NAME, LibraryInfo.getLibraryName());
        themeThree += this.buildTheme(keys.THEME_THREE.LIBRARY_VERSION, LibraryInfo.getLibraryVersion(), true);
      }

      return themeThree;
    }
  };

  return mediaThemes;
}).call(exports, __webpack_require__, exports, module),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),

/***/ "./src/echo/delegate/ati/orbit-variables.js":
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_RESULT__ = (function() {
  'use strict';

  var Promise = __webpack_require__("./node_modules/es6-promise/dist/es6-promise.js").Promise;

  function OrbitVariables() {}

  OrbitVariables.get = function() {
    if (window && window.bbcpage) {

      // Allows the passed in method to be called, even though it might not exist on the window.bbcpage object
      // Call the method if it exists, otherwise return a resolved promise instead
      var wrapMethod = function(methodName) {
        return window.bbcpage[methodName] && typeof window.bbcpage[methodName] === 'function' ? window.bbcpage[methodName]() : Promise.resolve(null);
      };

      // Call all of these async methods in parallel
      return Promise.all([
        'getDestination',
        'getProducer',
        'getSection',
        'getContentId',
        'getContentType',
        'getLanguage',
        'getAdditionalProperties',
        'getName'
      ]

        // Handle the fact that the async mathods may not exist on the window.bbcpage object
        .map(function(methodName) {
          return wrapMethod(methodName);
        }))

        // Build the returned result object
        .then(function (orbitVars) {
          return {
            destination: orbitVars[0],
            producer: orbitVars[1],
            section: orbitVars[2],
            contentId: orbitVars[3],
            contentType: orbitVars[4],
            language: orbitVars[5],
            additionalProperties: orbitVars[6],
            pageName: orbitVars[7]
          };
        });
    } else {
      return Promise.resolve(undefined);
    }
  };

  return OrbitVariables;
}).call(exports, __webpack_require__, exports, module),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),

/***/ "./src/echo/delegate/ati/user-action-event.js":
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_RESULT__ = (function() {
  'use strict';

  var ATILabelKeys = __webpack_require__("./src/echo/delegate/ati/label-keys.js");
  var LabelCleanser = __webpack_require__("./src/echo/util/cleansing/label-cleanser.js");

  var SEPARATOR_CHAR = '~';

  var EventDefaults = {
    ACTION_NAME: 'unknown',
    CAMPAIGN_ID: 'Page',
    VARIANT: '',
    FORMAT: '',
    GENERAL_PLACEMENT: 'unknown',
    DETAILED_PLACEMENT: '',
    ADVERTISER_ID: '',
    URL: 'unknown'
  };

  var EventType = {
    CLICK: 'click',
    IMPRESSION: 'impression'
  };

  function UserActionEvent() {}

  UserActionEvent.sendClickEvent = function(tag, eventValues) {
    this._sendEvent(tag, eventValues, EventType.CLICK);
  };

  UserActionEvent.sendImpressionEvent = function(tag, eventValues) {
    this._sendEvent(tag, eventValues, EventType.IMPRESSION);
  };

  UserActionEvent._sendEvent = function(tag, eventValues, eventType) {
    if (!eventValues) {
      eventValues = {
        customObject: {}
      };
    }

    if (!eventValues.customObject) {
      eventValues.customObject = {};
    }

    var eventPayload = {
      creation:           this._formatEventValue(UserActionEvent._buildCreation(eventValues)),
      campaignId:         this._formatEventValue(eventValues.customObject[ATILabelKeys.CONTAINER] || EventDefaults.CAMPAIGN_ID),
      variant:            this._formatEventValue(eventValues.customObject[ATILabelKeys.PERSONALISATION] || EventDefaults.VARIANT),
      format:             this._formatEventValue(eventValues.customObject[ATILabelKeys.METADATA] || EventDefaults.FORMAT),
      generalPlacement:   this._formatEventValue(eventValues[ATILabelKeys.BBC_COUNTER_NAME] || EventDefaults.GENERAL_PLACEMENT),
      detailedPlacement:  this._formatEventValue(eventValues.user || EventDefaults.DETAILED_PLACEMENT),
      advertiserId:       this._formatEventValue(eventValues.customObject[ATILabelKeys.SOURCE] || EventDefaults.ADVERTISER_ID),
      url:                this._formatEventValue(eventValues.customObject[ATILabelKeys.RESULT] || EventDefaults.URL)
    };

    var event = {};
    if (eventType === EventType.CLICK) {
      event.click = eventPayload;
    } else {
      event.impression = eventPayload;
    }

    if (tag) {
      tag.publisher.send(event);
    }
  };

  UserActionEvent._buildCreation = function(eventValues) {
    var creation = (eventValues && eventValues.actionName) || EventDefaults.ACTION_NAME;
    if (eventValues && eventValues.actionType) {
      creation += (SEPARATOR_CHAR + eventValues.actionType);
    }

    return creation;
  };

  UserActionEvent._formatEventValue = function(value) {
    return '[' + LabelCleanser.cleanCustomVariable(value) + ']';
  };

  return UserActionEvent;
}).call(exports, __webpack_require__, exports, module),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),

/***/ "./src/echo/delegate/comscore/app-tag.js":
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/**
 * This module is meant as a replacement for comScore's UDM tag
 * It extends the udm by:
 *  - adding the option to define the httpGet method
 *  - managing persistant labels
 */

/**
 * TODO
 * * Tests
 * * "comScore=" cookie
 */

!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__("./src/echo/delegate/comscore/label-keys.js")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(CSLabelKeys) {
  'use strict';

  function AppTag(customHttpGet, isApp, isScorecardDomain) {
    // init persistent labels
    this._persistantLabels = {};
    this._urlParams = '';
    this._cut = '';
    this._httpGet = customHttpGet;
    this._eventCount = 0;
    this._isApp = isApp;
    this._isScorecardDomain = (isScorecardDomain === true);
    this._hasStarted = false;
  }

  AppTag.IS_ECHO_APP_TAG = true;
  AppTag.URL_LIMIT = 2048;

  AppTag.prototype.setPixelURL = function(pixelURL) {
    this._url = this._makeBaseUrl(pixelURL);
  };

  AppTag.prototype.setCustomerC2 = function(customerC2) {
    this.setLabel(CSLabelKeys.COMSCORE_CUSTOMER, customerC2);
  };

  AppTag.prototype.start = function() {
    if (!this._hasStarted) {
      this._hasStarted = true;
    }
  };

  /** Public **/

  /**
   * Set single persistant label
   */
  AppTag.prototype.setLabel = function(key, val) {
    if (val === null) {
      this.removeLabel(key);
    } else {
      this._persistantLabels[key] = val;
    }
  };

  /**
   * Delete persistant Labels
   */
  AppTag.prototype.removeLabels = function(keys) {
    for (var i in keys) {
      if (typeof this._persistantLabels[keys[i]] !== 'undefined') {
        delete this._persistantLabels[keys[i]];
      }
    }
  };

  /**
   * Delete single persistant label
   */
  AppTag.prototype.removeLabel = function(label) {
    if (typeof this._persistantLabels[label] !== 'undefined') {
      delete this._persistantLabels[label];
    }
  };

  AppTag.prototype.view = function(eventLabels) {
    this.send('view', eventLabels);
  };

  AppTag.prototype.hidden = function(eventLabels) {
    this.send('hidden', eventLabels);
  };

  /**
   * Send an event,
   * type should be "hidden" or "view"
   */
  AppTag.prototype.send = function(type, eventLabels, callback) {
    var pLabels = this._persistantLabels;
    var allLabels = {};
    var finalUrl;
    var k;

    if (!this._hasStarted) {
      return;
    }

    this._eventCount++;

    for (k in pLabels) {
      allLabels[k] = pLabels[k];
    }

    for (k in eventLabels) {
      allLabels[k] = eventLabels[k];
    }

    /* jshint ignore:start */
    allLabels.ns_type = type;
    if (this._isApp) { // ECHO-56
      allLabels.ns_ap_ev = type;
      allLabels.ns_ap_ec = this._eventCount;
    }
    /* jshint ignore:end */

    // ECHO-56
    allLabels[this._isApp ? 'ns_ts' : 'ns__t'] = (+new Date());

    finalUrl = this._createUrl(allLabels);

    this._httpGet(finalUrl, callback);
  };

  /** Private **/

  /**
   * Turn kv pairs (in an object) into a url param string
   * if the string is to exceed limit, the params are
   * encoded and added against the "ns_cut=" key
   */
  AppTag.prototype._createUrl = function(params) {
    var encode = window.encodeURIComponent || escape; // jshint ignore:line
    var url = this._url;
    var k;

    this._urlParams = '';
    this._cut = '';

    // Name *must* be first param in url
    if (params.hasOwnProperty('name')) {
      this._addUrlParam('name', params.name);
    }

    for (k in params) {
      if (k !== 'name' && k !== 'ns_referrer') {
        this._addUrlParam(k, params[k]);
      }
    }

    // ns_referrer *must* be last param in url
    if (params.hasOwnProperty('ns_referrer')) {
      // Should us c9 when reporting to scorecard research MYSTATS-1427
      this._addUrlParam(
        this._isScorecardDomain ? CSLabelKeys.ENV_REFERRER : 'ns_referrer',
        params.ns_referrer // jshint ignore:line
      );
    }

    url += this._urlParams;

    if (this._cut.length) {
      url += 'ns_cut=' + encode(this._cut.replace(/&$/, ''));
    } else {
      url = url.replace(/&$/, '');
    }

    return url;
  };

  AppTag.prototype._addUrlParam = function(key, val) {
    var encode = window.encodeURIComponent || escape; // jshint ignore:line
    var kv = encode(key) + '=' + encode(val) + '&';
    var limit = AppTag.URL_LIMIT - 8;

    if ((this._url.length + this._urlParams.length + kv.length) < limit) {
      this._urlParams += kv;
    } else {
      this._cut += kv;
    }
  };

  /**
   * If the url does not have a trailing '?' or '&', add one
   */
  AppTag.prototype._makeBaseUrl = function(url) {
    var mark = -1;
    var last = url.charAt(url.length - 1);

    for (var i = 0, j = url.length; i < j; i++) {
      if (url.charAt(i) === '?') {
        mark = i;
      }
    }

    if (mark === -1) {
      url += '?';
    } else if (last !== '?' && last !== '&') {
      url += '&';
    }

    return url;
  };

  return AppTag;
}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),

/***/ "./src/echo/delegate/comscore/comscore-delegate.js":
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_RESULT__ = (function(require) {
  'use strict';

  var CSLabelKeys = __webpack_require__("./src/echo/delegate/comscore/label-keys.js");
  var ConfigKeys = __webpack_require__("./src/echo/config/keys.js");
  var PlayerState = __webpack_require__("./src/echo/delegate/comscore/player-state.js");
  var Environment = __webpack_require__("./src/echo/environment.js");
  var Utils = __webpack_require__("./src/echo/util/methods.js");
  var LabelValidator = __webpack_require__("./src/echo/util/cleansing/label-validator.js");
  var Enums = __webpack_require__("./src/echo/enumerations.js");
  var INVALID_DATA_STRING = 'invalid-data';
  var SSCHelper = __webpack_require__("./node_modules/ssc-js/src/ssc_helper.js");
  var CookieHelper = __webpack_require__("./src/echo/util/cookies.js");

  var DOMAIN_SA = 'sa.bbc.co.uk/bbc';
  var DOMAIN_SCR = 'scorecardresearch.com';

  var WEB_TYPES = [
    Enums.ApplicationType.WEB,
    Enums.ApplicationType.MOBILE_WEB,
    Enums.ApplicationType.RESPONSIVE
  ];

  // a list of labels that should not be sent to comscore/ssc
  var sscExcludedLabels = [
    CSLabelKeys.NO_COOKIES
  ];

  // special labels that are overridden by streamsense with each new asset (clip)
  var ASSET_LABELS = [
    'ns_st_pr', 'ns_st_sn', 'ns_st_en', 'ns_st_ep',
    'ns_st_ty', 'ns_st_ct', 'ns_st_st', 'ns_st_pu'
  ];

  /*
   * ------------------------------------------------------------------------
   * Private Helpers
   * ------------------------------------------------------------------------
   */

  function dummy() {
    return -1;
  }

  function _getScoreCardUrl(protocol) {
    var protocolPrefix = (protocol === 'https:') ? 's' : '';

    return protocol + '//' + protocolPrefix + 'b.' + DOMAIN_SCR + '/p?';
  }

  function _getSAUrl(protocol, csSite) {
    return protocol + '//' + DOMAIN_SA + '/' + csSite + '/s';
  }

  function _getCSEndpoint(comscoreHost, envProtocol, csSite) {
    if (comscoreHost === DOMAIN_SCR) {
      return _getScoreCardUrl(envProtocol);
    }

    return _getSAUrl(envProtocol, csSite);
  }

  function _validateClipLabel(_clipLabel) {
    var checkedLabel =
      (_clipLabel === null) ?
      INVALID_DATA_STRING :
      _clipLabel;

    return checkedLabel;
  }

  function _getIdObjectValue(_idObject) {
    if (_idObject !== null && _idObject.isValueValid()) {
      return _idObject.getValue();
    }

    return INVALID_DATA_STRING;
  }

  function _getMostPrecedentIdObject(media) {

    var consumptionMode = media.getMediaConsumptionMode();

    var serviceIdObject = media.getServiceIdObject();
    var versionIdObject = media.getVersionIdObject();
    var clipIdObject = media.getClipIdObject();
    var episodeIdObject = media.getEpisodeIdObject();
    var vpIdObject = media.getVpIdObject();
    var nonPipsContentIdObject = media.getNonPipsContentIdObject();

    // Order of if statement is important for this function
    // Service if consumption mode is live
    if (consumptionMode === Enums.MediaConsumptionMode.LIVE &&
        media.isEssEnriched() === true &&
        versionIdObject.isValueValid()
    ) {
      return versionIdObject;
    } else if (
      consumptionMode === Enums.MediaConsumptionMode.LIVE &&
      serviceIdObject.isValueValid()
    ) {
      return serviceIdObject;

      // Non Pips Content Id
    } else if (nonPipsContentIdObject.isValueValid()) {
      return nonPipsContentIdObject;

      // Version Id
    } else if (versionIdObject.isValueValid()) {
      return versionIdObject;

      // ClipId
    } else if (clipIdObject.isValueValid()) {
      return clipIdObject;

      // Episode Id
    } else if (episodeIdObject.isValueValid()) {
      return episodeIdObject;

      // vPid
    } else if (vpIdObject.isValueValid()) {
      return vpIdObject;

      // Service id is last if not live
    } else if (serviceIdObject.isValueValid()) {
      return serviceIdObject;
    }

    return null;
  }

  function _hasAmbiguousPrecedentId(media) {
    var precedentObject = _getMostPrecedentIdObject(media);
    var versionId = media.getVersionIdObject();
    var episodeId = media.getEpisodeIdObject();
    var clipId = media.getClipIdObject();

    if (precedentObject !== null) {
      var idType = precedentObject.getIdType();

      if (media.isLive()) {

        if (idType === Enums.MediaIdType.SERVICE || media.isEssEnriched()) {
          return false;
        }
      } else if (
        idType === Enums.MediaIdType.SERVICE &&
        !versionId.isValueSet() &&
        !episodeId.isValueSet() &&
        !clipId.isValueSet()
      ) {
        return true;
      } else if (idType !== Enums.MediaIdType.VPID) {
        return false;
      }
    }

    return true;
  }

  function _buildStreamSensePlaylist(media) {
    var playlist = {};
    var precedentObject = _getMostPrecedentIdObject(media);

    // Playlist labels:
    playlist[CSLabelKeys.PLAYLIST_NAME] =
      (precedentObject === null) ?
      INVALID_DATA_STRING :
      precedentObject.getValue();

    return playlist;
  }

  /**
   * Build a set of labels from a media object.
   *
   * @param {Media} media
   * @returns {Object}
   * @private
   */
  function _buildStreamSenseClip(media) {

    var clip = {};
    var precedentObject = _getMostPrecedentIdObject(media);

    var avType = _validateClipLabel(media.getAvType());
    var length = _validateClipLabel(media.getLength());
    var retrievalType = _validateClipLabel(media.getRetrievalType());

    // Clip labels:
    clip[CSLabelKeys.MEDIA_PART_NUMBER] = 1;
    clip[CSLabelKeys.MEDIA_TOTAL_PARTS] = 1;
    clip[CSLabelKeys.MEDIA_LENGTH] = length;
    clip[CSLabelKeys.MEDIA_MEDIUM] = avType;
    clip[CSLabelKeys.MEDIA_RETRIEVAL_TYPE] = retrievalType;

    var consumeMode = media.getMediaConsumptionMode();

    if (consumeMode === null) {
      clip[CSLabelKeys.MEDIA_STREAM_TYPE] = INVALID_DATA_STRING;
      clip[CSLabelKeys.MEDIA_LIVE_OR_ONDEMAND] = INVALID_DATA_STRING;
    } else if (!media.isLive() && avType === INVALID_DATA_STRING) {
      clip[CSLabelKeys.MEDIA_STREAM_TYPE] = INVALID_DATA_STRING;
    } else if (media.isOnDemand() || media.isDownload()) {
      //On Demand Media
      clip[CSLabelKeys.MEDIA_STREAM_TYPE] = media.isVideo() ? 'vod' : 'aod';
      clip[CSLabelKeys.MEDIA_LIVE_OR_ONDEMAND] = 'on-demand';
    } else {
      //Live media
      if (media.isEssEnriched()) {
        clip[CSLabelKeys.ESS_ENRICHED] = 'true';
      } else {
        clip[CSLabelKeys.ESS_ENRICHED] = 'false';
        clip[CSLabelKeys.MEDIA_IS_LIVE] = '1';
      }

      clip[CSLabelKeys.MEDIA_STREAM_TYPE] = 'live';
      clip[CSLabelKeys.MEDIA_LIVE_OR_ONDEMAND] = 'live';
    }

    var versionId = media.getVersionIdObject();
    var serviceId = media.getServiceIdObject();
    var clipId = media.getClipIdObject();
    var episodeId = media.getEpisodeIdObject();
    var nonPipsContentId = media.getNonPipsContentIdObject();

    clip[CSLabelKeys.MEDIA_PID] = _getIdObjectValue(precedentObject);

    // if consumption mode is live and ess has not enriched the media object
    // then we need to prefix the content id if we are not using the service id
    if (media.isLive() &&
        !media.getServiceId() &&
        media.isEssEnriched() === false &&
        (media.getVersionId() || media.getVpId())
    ) {
      var contentId = media.getVersionId() || media.getVpId();
      clip[CSLabelKeys.MEDIA_PID] = 'unverified_' + contentId;
    }

    if (nonPipsContentId.isValueSet()) {
      clip[CSLabelKeys.MEDIA_NON_PIPS_CONTENT_ID] = _getIdObjectValue(nonPipsContentId);
    }

    if (versionId.isValueSet()) {
      clip[CSLabelKeys.MEDIA_VERSION_ID] = _getIdObjectValue(versionId);
    }

    if (serviceId.isValueSet()) {
      clip[CSLabelKeys.MEDIA_SERVICE_ID] = _getIdObjectValue(serviceId);
    }

    if (clipId.isValueSet()) {
      clip[CSLabelKeys.MEDIA_CLIP_ID] = _getIdObjectValue(clipId);
    }

    if (episodeId.isValueSet()) {
      clip[CSLabelKeys.MEDIA_EPISODE_ID] = _getIdObjectValue(episodeId);
    }

    if (_hasAmbiguousPrecedentId(media)) {
      clip[CSLabelKeys.MEDIA_AMBIGUOUS_ID] = '1';
    }

    return clip;
  }

  /**
   * Comscore delegate.
   * @namespace ComScoreDelegate
   * @constructor
   *
   */
  function ComScoreDelegate(appName, appType, config, environment) {
    var csSite = config[ConfigKeys.COMSCORE_SITE];
    var endpoint;
    var offlineEndpoint;
    var derivedEndpoint;
    var isScorecardDomain;
    var csHost;
    var customGet;
    var sscHelper;
    var orbCookiesPolicy;
    var cookiePolicy;
    this._deviceId = null;
    this._broker = null;
    this.media = null;
    this.SSPlayerEvent = ComScoreDelegate.StreamSense.PlayerEvents;
    this.SSPlayerState = ComScoreDelegate.StreamSense.InternalStates;
    this._clips = [];
    this._isEnabled = true;
    this._hasStartedAppTag = false;
    this._hasCreatedAsset = false;
    this._storedAssetLabels = {};

    csHost = config[ConfigKeys.COMSCORE_HOST];
    csSite = config[ConfigKeys.COMSCORE_SITE];

    // SSC settings
    this.useSsc = (config[ConfigKeys.USE_SSC] === true) &&
      (csHost !== 'sa.bbc.co.uk');

    // set device id
    this._deviceId = config[ConfigKeys.ECHO_DEVICE_ID] || undefined;

    // if SSC is enabled and device id is not set, attempt to get it from
    // the cookie using the SSC helper.
    if (this.useSsc === true && !this._deviceId) {
      sscHelper = ComScoreDelegate._createSscHelper({
        forceBBCHost: config[ConfigKeys.SSC_HOSTNAME]
      });
      this._deviceId = sscHelper.getCookieId();
    }

    if (!Utils.containsValue(Enums.ApplicationType, appType)) {
      appType = INVALID_DATA_STRING;
    }

    endpoint = _getCSEndpoint(csHost, environment.getProtocol(), csSite);

    if (this.useSsc === true && !this._deviceId) {
      endpoint = sscHelper.getLocation().protocol +
        '//' + sscHelper.getSSCHostname();
    }

    // if using test service, save the endpoint then replace with test url
    if (config[ConfigKeys.TEST_SERVICE_ENABLED] === true) {
      derivedEndpoint = endpoint;
      endpoint = config[ConfigKeys.TEST_SERVICE_URL] + '/comscore';
      if (this._isUsingComscoreOTTLibrary) {
        offlineEndpoint = config[ConfigKeys.TEST_SERVICE_URL] + '/offline';
      }
    }

    // Are we an App (as ComScore defines it, which is, not a web page?
    // (ECHO-56)
    this._isApp = !Utils.containsValue(WEB_TYPES, appType);

    customGet = environment.getHttpGet();
    isScorecardDomain = (csHost === DOMAIN_SCR);

    // ternary operator ensures this is a binary value and not
    // undefined
    this._isUsingComscoreOTTLibrary =
      (ComScoreDelegate.AppTag && ComScoreDelegate.AppTag.ns_) ? true : false;

    if (this._isUsingComscoreOTTLibrary) {
      this.appTag = ComScoreDelegate.AppTag.ns_.comScore;
      this.appTag.setPlatformAPI(ComScoreDelegate.AppTag.ns_.PlatformAPIs.html5);
      if (customGet) {
        this.appTag.getPlatformAPI().httpGet = customGet;
      }

      this.appTag.setPublisherSecret(config[ConfigKeys.COMSCORE_PUBLISHER_SECRET]);
      this.appTag.setAppContext();
    } else {
      this.appTag = new ComScoreDelegate.AppTag(
        customGet || Environment._defaultHttpGet,
        this._isApp,
        isScorecardDomain
      );
    }

    this.ss = new ComScoreDelegate.StreamSense.StreamingAnalytics(
      { liveEndpointURL: endpoint, systemClockJumpDetection: true });
    if (customGet) {
      this.ss.getPlatformAPI().httpGet = customGet;
    }

    // set C1 and C2 if host is SCR
    if (isScorecardDomain) {
      this.appTag.setCustomerC2(config[ConfigKeys.COMSCORE_CUSTOMER_ID]);
      this.ss.setLabel(CSLabelKeys.COMSCORE_CUSTOMER, config[ConfigKeys.COMSCORE_CUSTOMER_ID]);
      this.addLabel(CSLabelKeys.COMSCORE_C1, '2');
      this.addLabel(CSLabelKeys.COMSCORE_SITE, csSite);
    }

    this.appTag.setPixelURL(endpoint);

    if (this._deviceId) {
      this.addLabel(CSLabelKeys.DEVICE_ID, this._deviceId);
    } else if (!this.useSsc && csHost === 'sa.bbc.co.uk') {
      this._deviceId = CookieHelper.getCookieValueByName('s1');
    }

    if (config[ConfigKeys.TEST_SERVICE_ENABLED] === true) {
      this.addLabel(CSLabelKeys.COMSCORE_ENDPOINT, derivedEndpoint);
      if (this._isUsingComscoreOTTLibrary) {
        this.appTag.setOfflineURL(offlineEndpoint);
      }
    }

    this.addLabel(CSLabelKeys.BBC_APPLICATION_NAME, appName);
    this.addLabel(CSLabelKeys.BBC_APPLICATION_TYPE, appType);
    this.setCacheMode(config[ConfigKeys.ECHO_CACHE_MODE]);
    this.addLabel(
      CSLabelKeys.BBC_MEASUREMENT_LIB_NAME,
      config[ConfigKeys.ECHO_NAME]
    );
    this.addLabel(
      CSLabelKeys.BBC_MEASUREMENT_LIB_VERSION,
      config[ConfigKeys.ECHO_VERSION]
    );

    // Labels to set for "Apps" only
    if (this._isApp) {

      if (this._isUsingComscoreOTTLibrary) {
        this.appTag.setAppName(appName);
      }  else {
        this.addLabel(CSLabelKeys.APP_NAME, appName);
      }

      this.addLabel(
        CSLabelKeys.APP_PLATFORM_NAME,
        environment.getPlatformName()
      );
      this.addLabel(
        CSLabelKeys.APP_PLATFORM_RUNTIME,
        environment.getPlatformRuntimeEnvironment()
      );
      this.addLabel(
        CSLabelKeys.APP_OS_VERSION,
        environment.getPlatformOSVersion()
      );
      this.addLabel(CSLabelKeys.APP_DEVICE_NAME, environment.getDeviceName());
      this.addLabel(CSLabelKeys.APP_SCREEN_RESOLUTION,
        environment.getScreenResolution());
      this.addLabel(CSLabelKeys.APP_LANGUAGE, environment.getLanguage());
    } else {
      this.addLabel(
        CSLabelKeys.WEB_SCREEN_RES,
        environment.getScreenResolution()
      );
    }

    this.addLabel(CSLabelKeys.ENV_CHAR_SET, environment.getCharSet());
    this.addLabel(CSLabelKeys.ENV_TITLE, environment.getTitle());
    this.addLabel(CSLabelKeys.ENV_REFERRER, environment.getReferrer());

    // hide file paths in c7
    if (environment.getURL().indexOf('file:', 0) === -1) {
      this.addLabel(CSLabelKeys.ENV_URL, environment.getURL());
    }

    if (config[ConfigKeys.ECHO_TRACE]) {
      this.setTraceId(config[ConfigKeys.ECHO_TRACE]);
    }

    orbCookiesPolicy = Environment.getOrbCookiesPolicy();
    if (orbCookiesPolicy) {
      cookiePolicy =
        'ad' + (orbCookiesPolicy.ads ? '1' : '0') +
        'ps' + (orbCookiesPolicy.personalisation ? '1' : '0') +
        'pf' + (orbCookiesPolicy.performance ? '1' : '0');

      this.addLabel(CSLabelKeys.COOKIE_POLICY, cookiePolicy);
    }

    // Default is to send invalid-data for site
    this.addLabel(Enums.ManagedLabels.BBC_SITE, INVALID_DATA_STRING);

    this._mediaIsLive = null;

    if (config && config[ConfigKeys.ECHO_ENABLED] === false) {
      this._isEnabled = false;
    } else {
      this._isEnabled = true;
    }
  }

  ComScoreDelegate.prototype.start = function() {
    if (this._isEnabled && !this._hasStartedAppTag) {
      this.appTag.start();
      this._hasStartedAppTag = true;
    }
  };

  ComScoreDelegate.prototype.enable = function() {
    if (!this._isEnabled) {
      this._isEnabled = true;
    }
  };

  ComScoreDelegate.prototype.disable = function() {
    if (this._isEnabled) {
      this.clearMedia();
      this._isEnabled = false;
    }
  };

  /**
   * Gets the device ID that was used to report to ComScore.
   *
   * @returns {String|null}
   */
  ComScoreDelegate.prototype.getDeviceId = function() {
    return this._deviceId;
  };

  /**
   * @param {Media} media
   * @return {Object}
   * @private
   */
  ComScoreDelegate.prototype._buildStreamSenseClip = function(media) {

    var i;
    var clip = _buildStreamSenseClip(media);
    var clipPid = clip[CSLabelKeys.MEDIA_PID];

    for (i = 0; i < this._clips.length; i++) {
      if (this._clips[i][CSLabelKeys.MEDIA_PID] === clipPid) {
        return this._clips[i];
      }
    }

    clip[CSLabelKeys.MEDIA_CLIP_NUMBER] = this._clips.length + 1;
    this._clips.push(clip);

    return clip;
  };

  ComScoreDelegate.prototype.setTraceId = function(id) {
    this.addLabel(ConfigKeys.ECHO_TRACE, id);
  };

  ComScoreDelegate._createSscHelper = function(options) {
    return new SSCHelper(options || {});
  };

  ComScoreDelegate.StreamSense = __webpack_require__("./lib/comscore/amd.streamsense-6.2.3.180328.min.js");
  ComScoreDelegate.AppTag = __webpack_require__("./src/echo/delegate/comscore/app-tag.js");

  /*
   * ------------------------------------------------------------------------
   * Application State Methods
   * ------------------------------------------------------------------------
   */

  // produces a string out of a list of labels that is easy to pass a regex
  // pattern over e.g. given the labels ['foo', 'bar'] the string will be
  // <foo><bar>
  var sscExcludedString = '<' + sscExcludedLabels.join('><') + '>';

  /**
   * Check to see if a label should be excluded from being set. This will check
   * for labels that should not be sent to comscore when ssc is enabled.
   *
   * @param {String} label
   * @return {Boolean}
   */
  ComScoreDelegate.prototype._isExcludedLabel = function(label) {
    if (this.useSsc === true) {
      return !!sscExcludedString.match(new RegExp('<' + label + '>'));
    }

    return false;
  };

  /**
   * Set multiple persistent labels.
   *
   * @param {Object} labels
   */
  ComScoreDelegate.prototype.addLabels = function(labels) {

    if (typeof labels === 'object') {
      for (var label in labels) {
        if (labels.hasOwnProperty(label)) {
          this.addLabel(label, labels[label]);
        }
      }
    }

  };

  /**
   * Set a persistent label
   *
   * @param {String} label
   * @param {*} value
   */
  ComScoreDelegate.prototype.addLabel = function(label, value) {

    if (this._isExcludedLabel(label) === true) {
      return;
    }

    this.appTag.setLabel(label, value);

    // is this label an asset label?
    if (ASSET_LABELS.indexOf(label) > -1) {
      // set label on streamsense asset if it's created, or save for later
      if (this._hasCreatedAsset) {
        this.ss.getPlaybackSession().getAsset().setLabel(label, value);
      } else {
        this._storedAssetLabels[label] = value;
      }
    } else {
      // not an asset label so set it in the usual way
      this.ss.setLabel(label, value);
    }

  };

  ComScoreDelegate.prototype.addManagedLabel = function(label, value) {
    var labelIsValid = LabelValidator.isValidManagedLabel(label, value);
    var valueToUse = labelIsValid ? value : INVALID_DATA_STRING;

    for (var key in Enums.ManagedLabels) {
      if (Enums.ManagedLabels[key] === label) {
        this.addLabel(label, valueToUse);
      }
    }
  };

  ComScoreDelegate.prototype.removeLabels = function(keysArray) {
    for (var i = 0, len = keysArray.length; i < len; i++) {
      this.removeLabel(keysArray[i]);
    }
  };

  ComScoreDelegate.prototype.removeLabel = function(label) {
    this.appTag.setLabel(label, null);

    // is this label an asset label?
    if (ASSET_LABELS.indexOf(label) > -1) {
      // set label on streamsense asset if it's created, or save for later
      if (this._hasCreatedAsset) {
        this.ss.getPlaybackSession().getAsset().setLabel(label, null);
      } else {
        delete this._storedAssetLabels[label];
      }
    } else {
      // not an asset label so set it in the usual way
      this.ss.setLabel(label, null);
    }

  };

  ComScoreDelegate.prototype.setLoggedInToBBCId = function(hid) {
    this.addLabel(CSLabelKeys.BBC_ID_LOGGED_IN, '1');
    if (hid && hid.length > 0) {
      this.addManagedLabel(Enums.ManagedLabels.BBC_HASHED_ID, hid);
    } else {
      this.removeLabel(Enums.ManagedLabels.BBC_HASHED_ID);
    }
  };

  ComScoreDelegate.prototype.setLoggedOutOfBBCId = function() {
    this.removeLabels([
      CSLabelKeys.BBC_ID_LOGGED_IN,
      Enums.ManagedLabels.BBC_HASHED_ID
    ]);
  };

  ComScoreDelegate.prototype.setAppVersion = function (version) {
    if (typeof this.appTag.setAppVersion === 'function') {
      this.appTag.setAppVersion(version);
    } else if (version && this._isApp) {
      this.addLabel(CSLabelKeys.APP_VERSION, version.toString());
    } else if (version) {
      this.addLabel(CSLabelKeys.BBC_APPLICATION_VERSION, version.toString());
    }
  };

  ComScoreDelegate.prototype.setCounterName = function(name) {
    if (!this._isEnabled) {
      return;
    }

    this.addLabel(CSLabelKeys.BBC_COUNTER_NAME, name);
  };

  ComScoreDelegate.prototype.setDestination = function(destinationId) {
    this.addLabel(CSLabelKeys.DESTINATION, destinationId);
  };

  ComScoreDelegate.prototype.setProducer = function(producerId) {
    this.addLabel(CSLabelKeys.PRODUCER, producerId);
  };

  ComScoreDelegate.prototype.setContentLanguage = function(language) {
    this.addLabel(CSLabelKeys.BBC_LANGUAGE, language);
  };

  ComScoreDelegate.prototype.setCacheMode = function(mode) {
    if (!this._isUsingComscoreOTTLibrary || mode === this._cacheMode) {
      return;
    }

    switch (mode) {
      case Enums.EchoCacheMode.ALL:
        this.appTag.allowLiveTransmission(this.appTag.TransmissionMode.NEVER);
        this.appTag.allowOfflineTransmission(this.appTag.TransmissionMode.NEVER);
        break;
      case Enums.EchoCacheMode.OFFLINE:
        this.appTag.allowLiveTransmission(this.appTag.TransmissionMode.DEFAULT);
        this.appTag.allowOfflineTransmission(this.appTag.TransmissionMode.DEFAULT);
        break;
    }

    this._cacheMode = mode;
  };

  ComScoreDelegate.prototype.flushCache = function() {
    if (!this._isUsingComscoreOTTLibrary) {
      return;
    }

    this.appTag.flushCache();
  };

  ComScoreDelegate.prototype.clearCache = dummy;

  /*
   * ------------------------------------------------------------------------
   * Basic Analytics Methods
   * ------------------------------------------------------------------------
   */

  ComScoreDelegate.prototype.viewEvent = function(counterName, eventLabels) {
    if (!this._eventsEnabled()) {
      return;
    }

    /*
     * Set countername as a persistent label so it's included on all
     * subsequent events.
     */
    this.addLabel(CSLabelKeys.BBC_COUNTER_NAME, counterName);
    var clonedLabels = Utils.extend(
      eventLabels, true,
      CSLabelKeys.ECHO_EVENT_NAME, 'view'
    );

    clonedLabels.name = counterName;
    this.appTag.view(clonedLabels);
  };

  ComScoreDelegate.prototype.errorEvent = dummy;

  ComScoreDelegate.prototype.userActionEvent =
  function(actionType, actionName, eventLabels) {
    if (!this._eventsEnabled()) {
      return;
    }

    var clonedLabels = Utils.extend(
      eventLabels, true,
      CSLabelKeys.USER_ACTION_TYPE, actionType,
      CSLabelKeys.USER_ACTION_NAME, actionName,
      CSLabelKeys.ECHO_EVENT_NAME, 'userAct'
    );

    this.appTag.hidden(clonedLabels);
  };

  /*
   * ------------------------------------------------------------------------
   * Media Player Attributes
   * ------------------------------------------------------------------------
   */

  /**
   * Media player information converted to Application i.e. Persistent labels
   * on Stream Sense. Included in all measurement events sent
   */
  ComScoreDelegate.prototype.setPlayerName = function(name) {
    this.addLabel(CSLabelKeys.PLAYER_NAME, name);
  };

  ComScoreDelegate.prototype.setPlayerVersion = function(version) {
    this.addLabel(CSLabelKeys.PLAYER_VERSION, version);
  };

  ComScoreDelegate.prototype.setPlayerIsPopped = function(isPopped) {
    this.ss.setLabel(CSLabelKeys.PLAYER_POPPED, isPopped ? 1 : 0);
  };

  ComScoreDelegate.prototype.setPlayerWindowState = function(windowState) {
    this.ss.setLabel(CSLabelKeys.PLAYER_WINDOW_STATE, windowState);
  };

  ComScoreDelegate.prototype.setPlayerVolume = function(volume) {
    this.ss.setLabel(CSLabelKeys.PLAYER_VOLUME, volume);
  };

  ComScoreDelegate.prototype.setPlayerIsSubtitled = function(isSubtitled) {
    this.ss.setLabel(CSLabelKeys.PLAYER_SUBTITLED, isSubtitled ? 1 : 0);
  };

  /**
   * Sets the broker.
   *
   * This method should only be called by the EchoClient class to
   * ensure the interface is implemented.
   *
   * @param {Object} broker An object conforming to the broker interface.
   *
   * @return {ComScoreDelegate}
   */
  ComScoreDelegate.prototype.setBroker = function(broker) {
    this._broker = broker;
    return this;
  };

  /*
   * ------------------------------------------------------------------------
   * Media Attributes
   * ------------------------------------------------------------------------
   */
  ComScoreDelegate.prototype.setMedia = function(media) {
    if (!this._eventsEnabled()) {
      return;
    }

    this.clearMedia();

    if (media) {
      this.media = media;
      var clip = this._buildStreamSenseClip(this.media);
      var playList = _buildStreamSensePlaylist(this.media);
      this._mediaIsLive = media.isOnDemand() ? false : true;
      this.ss.createPlaybackSession(playList);

      // Put the clip on StreamSense
      if (this.ss.getPlaybackSession()) {
        this.ss.getPlaybackSession().setAsset(clip);
        this._hasCreatedAsset = true;

        // add previously stored labels
        this.ss.getPlaybackSession().getAsset().setLabels(this._storedAssetLabels);
      }
    }

  };

  /**
   * Handles an updated clip from the LiveBroker
   *
   * @param {Media} newMedia
   * @param {Number} newPosition
   * @param {Number} oldPosition
   */
  ComScoreDelegate.prototype.liveMediaUpdate = function(
    newMedia,
    newPosition,
    oldPosition
  ) {

    Utils.assert(
      typeof newPosition === 'number',
      'newPosition must be a number'
    );

    Utils.assert(
      typeof oldPosition === 'number',
      'oldPosition must be a number'
    );

    this.media = newMedia;

    var clip = this._buildStreamSenseClip(newMedia);

    // stop playback
    this.ss.notifyEnd(oldPosition);
    this.ss.getPlaybackSession().setAsset(clip);

    // add previously stored labels
    this.ss.getPlaybackSession().getAsset().setLabels(this._storedAssetLabels);
    this.ss.notifyPlay(newPosition);
  };

  ComScoreDelegate.prototype.liveEnrichmentFailed = dummy;

  /**
   * Update the media length of the clip and playlist.
   *
   * @param {Number} length
   */
  ComScoreDelegate.prototype.setMediaLength = function(length) {
    if (!this._eventsEnabled()) {
      return;
    }

    if (this.media == null) {
      return;
    }

    if (!length || length < 0) {
      length = 0;
    }

    this.ss.getPlaybackSession().getAsset().setLabel(CSLabelKeys.MEDIA_LENGTH, length);
  };

  /*
   * ------------------------------------------------------------------------
   * Media Events
   * ------------------------------------------------------------------------
   */
  /*
   * Uses the addLabel method to add to both av and non-av events
   */
  ComScoreDelegate.prototype.avPlayEvent = function(position, eventLabels) { // jshint ignore:line
    if (!this._eventsEnabled()) {
      return;
    }

    var clonedLabels = Utils.extend(
      eventLabels, true,
      CSLabelKeys.ECHO_EVENT_NAME, 'avPlay'
    );

    if (this.media.isLive() && this.media.isEssEnriched() === false) {
      position = 0;
    }

    this.ss.notifyPlay(clonedLabels, position);
  };

  ComScoreDelegate.prototype.avPauseEvent = function(position, eventLabels) {
    if (!this._eventsEnabled()) {
      return;
    }

    var clonedLabels = Utils.extend(
      eventLabels, true,
      CSLabelKeys.ECHO_EVENT_NAME, 'avPause'
    );
    var isLive = this.media.isLive();

    if (isLive && this.media.isEssEnriched() === false) {
      position = 0;
    } else if (!isLive && this._broker && position === 0) {
      position = this._broker.getCurrentIntervalMaxPosition();
    }

    this.ss.notifyPause(clonedLabels, position);
  };

  ComScoreDelegate.prototype.avBufferEvent = function(position, eventLabels) {// jshint ignore:line
    if (!this._eventsEnabled()) {
      return;
    }

    if (this.media.isLive() && this.media.isEssEnriched() === false) {
      position = 0;
    }

    this.ss.notifyBufferStart(position);
  };

  ComScoreDelegate.prototype.avEndEvent = function(position, eventLabels) {
    if (!this._eventsEnabled()) {
      return;
    }

    var clonedLabels = Utils.extend(
      eventLabels, true,
      CSLabelKeys.ECHO_EVENT_NAME, 'avEnd',
      CSLabelKeys.PLAYLIST_END, 1
    );

    if (this.media.isLive() && this.media.isEssEnriched() === false) {
      position = 0;
    }

    this.ss.notifyEnd(position, clonedLabels);

    this.clearMedia();
  };

  ComScoreDelegate.prototype.avRewindEvent = function(
    position, rate, eventLabels
  ) {
    if (!this._eventsEnabled()) {
      return;
    }

    /*
     * We assume rewind, ff and seek are always user interaction triggered.
     * See Pg 18 StreamSense docs.
     */
    var clonedLabels = Utils.extend(
      eventLabels, true,
      CSLabelKeys.ECHO_EVENT_NAME, 'avRW',
      CSLabelKeys.EVENT_TRIGGERED_BY_USER, 'rewind',
      CSLabelKeys.REWIND_FF_RATE, rate
    );

    if (this.media.isLive() && this.media.isEssEnriched() === false) {
      position = 0;
    }

    // Comscore require a pause when the content stops playing
    this.ss.notifyPause(position, clonedLabels);
  };

  ComScoreDelegate.prototype.avFastForwardEvent = function(
    position, rate, eventLabels
  ) {
    if (!this._eventsEnabled()) {
      return;
    }

    /*
     * We assume rewind, ff and seek are always user interaction triggered.
     * See Pg 18 StreamSense docs.
     */
    var clonedLabels = Utils.extend(
      eventLabels, true,
      CSLabelKeys.ECHO_EVENT_NAME, 'avFF',
      CSLabelKeys.EVENT_TRIGGERED_BY_USER, 'fastforward',
      CSLabelKeys.REWIND_FF_RATE, rate
    );

    if (this.media.isLive() && this.media.isEssEnriched() === false) {
      position = 0;
    }

    // Comscore require a pause when the content stops playing
    this.ss.notifyPause(clonedLabels, position);
  };

  ComScoreDelegate.prototype.avSeekEvent = function(position, eventLabels) {
    if (!this._eventsEnabled()) {
      return;
    }

    /*
     * We assume rewind, ff and seek are always user interaction triggered.
     * See Pg 18 StreamSense docs.
     */
    var clonedLabels = Utils.extend(
      eventLabels, true,
      CSLabelKeys.ECHO_EVENT_NAME, 'avSeek',
      CSLabelKeys.EVENT_TRIGGERED_BY_USER, 'seek'
    );

    if (this.media.isLive() && this.media.isEssEnriched() === false) {
      position = 0;
    }

    // Comscore require a pause when the content stops playing
    this.ss.notifyPause(position, clonedLabels);
  };

  ComScoreDelegate.prototype.avUserActionEvent = function(
      actionType, actionName, position, eventLabels
    ) {
    if (!this._eventsEnabled()) {
      return;
    }

    var clonedLabels = Utils.extend(
      eventLabels, true,
      CSLabelKeys.ECHO_EVENT_NAME, 'avUserAct',
      CSLabelKeys.STREAMSENSE_CUSTOM_EVENT_TYPE, actionType,
      CSLabelKeys.USER_ACTION_TYPE, actionType,
      CSLabelKeys.USER_ACTION_NAME, actionName
    );

    if (this.media.isLive() && this.media.isEssEnriched() === false) {
      position = 0;
    }

    this.ss.notifyCustomEvent(position, clonedLabels);
  };

  ComScoreDelegate.prototype.clearMedia = function() {
    if (!this._eventsEnabled()) {
      return;
    }

    this._clips = [];
    this._hasCreatedAsset = false;

    if (this.media !== null) {
      // If the stream is still active we need to send an avEndEvent
      // Debug mode should warn this
      if (this.ss.getState() === PlayerState.PLAYING) {
        this.avEndEvent(0);
      }

      this.media = null;
    }
  };

  ComScoreDelegate.prototype.requiresLabelCleansing = function() {
    return true;
  };

  ComScoreDelegate.prototype._eventsEnabled = function() {
    return this._isEnabled && this._hasStartedAppTag;
  };

  return ComScoreDelegate;
}).call(exports, __webpack_require__, exports, module),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),

/***/ "./src/echo/delegate/comscore/label-keys.js":
/***/ (function(module, exports, __webpack_require__) {

!(module.exports = {
  BBC_APPLICATION_NAME: 'app_name', // Legacy BBC label
  BBC_APPLICATION_TYPE: 'app_type', // Legacy BBC label
  BBC_APPLICATION_VERSION: 'app_version', // Legacy BBC label
  BBC_COUNTER_NAME: 'name', // Legacy BBC label
  DESTINATION: 'bbc_destination', // Level 1 site
  PRODUCER: 'bbc_producer',  // Level 2 site
  BBC_LANGUAGE: 'language', //ECHO-151
  DEVICE_ID: 'ns_alias', // Overrides using s1
  COMSCORE_C1: 'c1',
  COMSCORE_C7: 'c7',

  BBC_MEASUREMENT_LIB_NAME: 'ml_name',
  BBC_MEASUREMENT_LIB_VERSION: 'ml_version',
  ECHO_TRACE: 'trace',
  ECHO_EVENT_NAME: 'echo_event',

  // Event was triggered by user interaction
  EVENT_TRIGGERED_BY_USER: 'ns_st_ui', //ComScore label

  // See https://confluence.dev.bbc.co.uk/display/iStats/Measurement+Events
  STREAMSENSE_CUSTOM_EVENT_TYPE: 'ns_st_ev', //ComScore label
  USER_ACTION_TYPE: 'action_type', // Legacy BBC label
  USER_ACTION_NAME: 'action_name', // Legacy BBC label
  PLAYLIST_END: 'ns_st_pe', //ComScore label

  REWIND_FF_RATE: 'ffrw_rate', // BBC label - made up by Echo team

  //Site key
  COMSCORE_SITE: 'ns_site', //ComScore label
  COMSCORE_CUSTOMER: 'c2', //ComScore label

  // Test service label keys
  COMSCORE_ENDPOINT: 'comscore_endpoint', //ComScore endpoint

  // Player Keys
  PLAYER_NAME: 'ns_st_mp', //ComScore label
  PLAYER_VERSION: 'ns_st_mv', //ComScore label
  PLAYER_WINDOW_STATE: 'ns_st_ws', //ComScore label
  PLAYER_VOLUME: 'ns_st_vo', //ComScore label
  PLAYER_POPPED: 'bbc_st_pop',
  PLAYER_SUBTITLED: 'bbc_st_sub',

  // Playlist Keys
  PLAYLIST_NAME: 'ns_st_pl', //ComScore label
  PLAYLIST_CLIP_COUNT: 'ns_st_cp', //ComScore label
  PLAYLIST_LENGTH: 'ns_st_ca', //ComScore label

  // Media Keys
  MEDIA_PID: 'ns_st_ci', //ComScore label
  MEDIA_LENGTH: 'ns_st_cl', //ComScore label
  MEDIA_STREAM_TYPE: 'ns_st_ty', //ComScore label
  MEDIA_IS_LIVE: 'ns_st_li', //ComScore label
  MEDIA_EPISODE_ID: 'episode_id', //Legacy BBC label
  MEDIA_CLIP_ID: 'clip_id', //Legacy BBC label
  MEDIA_CLIP_NUMBER: 'ns_st_cn', //ComScore label
  MEDIA_PART_NUMBER: 'ns_st_pn', //ComScore label
  MEDIA_TOTAL_PARTS: 'ns_st_tp', //ComScore label
  MEDIA_MEDIUM: 'bbc_st_med', //New BBC label from Echo
  MEDIA_LIVE_OR_ONDEMAND: 'bbc_st_lod', //New BBC label from Echo
  MEDIA_FORM: 'bbc_st_mf', //New BBC label from Echo
  MEDIA_RETRIEVAL_TYPE: 'bbc_st_ret', //New BBC label from Echo
  MEDIA_SCHEDULE_INDICATOR: 'bbc_st_sch', //New BBC label from Echo
  MEDIA_VERSION_ID: 'version_id', //NKDATA-467
  MEDIA_SERVICE_ID: 'service_id', //NKDATA-467
  MEDIA_NON_PIPS_CONTENT_ID: 'non_pips_content_id', //MYSTATS-1513
  MEDIA_AMBIGUOUS_ID: 'ambig_ci', // MYSTATS-891
  MEDIA_TIMESTAMP: 'bbc_st_live_ts', // MYSTATECHO-36 live timestamp
  ESS_SUCCESS: 'ess_success',
  ESS_ERROR: 'ess_error',
  ESS_STATUS_CODE: 'ess_status_code',

  // App Tag SDK compatibility
  APP_PLATFORM_NAME: 'ns_ap_pn',
  APP_PLATFORM_RUNTIME: 'ns_ap_pfm',
  APP_OS_VERSION: 'ns_ap_pfv',
  APP_DEVICE_NAME: 'ns_ap_device',
  APP_SCREEN_RESOLUTION: 'ns_ap_res',
  APP_LANGUAGE: 'ns_ap_lang',
  ENV_CHAR_SET: 'ns_c',
  ENV_TITLE: 'c8',
  ENV_URL: 'c7',
  ENV_REFERRER: 'c9',

  APP_NAME: 'ns_ap_an',
  APP_VERSION: 'ns_ap_ver',
  NO_COOKIES: 'ns_nc',
  COOKIE_POLICY: 'bbc_mc',
  BBC_ID_LOGGED_IN: 'bbc_identity',

  // WEB istats compatibility
  WEB_SCREEN_RES: 'screen_resolution',

  ESS_ENABLED: 'ess_enabled',
  ESS_ENRICHED: 'ess_enriched'
});


/***/ }),

/***/ "./src/echo/delegate/comscore/player-state.js":
/***/ (function(module, exports, __webpack_require__) {

!(module.exports = {
  IDLE: 0,
  PLAYBACK_NOT_STARTED: 1,
  PLAYING: 2,
  PAUSED: 3,
  BUFFERING_BEFORE_PLAYBACK: 4,
  BUFFERING_DURING_PLAYBACK: 5,
  BUFFERING_DURING_SEEKING: 6,
  BUFFERING_DURING_PAUSE: 7,
  SEEKING_BEFORE_PLAYBACK: 8,
  SEEKING_DURING_PLAYBACK: 9,
  SEEKING_DURING_BUFFERING: 10,
  SEEKING_DURING_PAUSE: 11,
  PAUSED_DURING_BUFFERING: 12
});


/***/ }),

/***/ "./src/echo/delegate/spring/label-keys.js":
/***/ (function(module, exports, __webpack_require__) {

!(module.exports = {
  STREAM: 'stream',
  PID: 'cq',
  WIDTH: 'sx',
  HEIGHT: 'sy',
  PLAYER_DESC: 'pl',
  PLAYER_VERSION: 'plv'
});


/***/ }),

/***/ "./src/echo/delegate/spring/page-context.js":
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_RESULT__ = (function() {
  'use strict';

  function PageContext(namespace, env) {
    this.namespace = namespace;
    this.env = env;
  }

  PageContext.prototype.preloadImage = function (s) {
    var httpGet = this.env.getHttpGet();
    return httpGet(s);
  };

  PageContext.prototype.getLocalStorageItem = function (key) {
    var getLocalStorageItem = this.env.getGetLocalStorageItem();
    return getLocalStorageItem(key);
  };

  PageContext.prototype.setLocalStorageItem = function (key, value) {
    var setLocalStorageItem = this.env.getSetLocalStorageItem();
    return setLocalStorageItem(key, value);
  };

  PageContext.prototype.getWindowLocationURL = function () {
    return this.env.getURL();
  };

  return PageContext;
}).call(exports, __webpack_require__, exports, module),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),

/***/ "./src/echo/delegate/spring/spring-delegate.js":
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_RESULT__ = (function(require) {
  'use strict';

  var Keys = __webpack_require__("./src/echo/delegate/spring/label-keys.js");
  var ConfigKeys = __webpack_require__("./src/echo/config/keys.js");
  var DEBUG = __webpack_require__("./src/echo/util/debug.js");
  var Enums = __webpack_require__("./src/echo/enumerations.js");
  var PageContext = __webpack_require__("./src/echo/delegate/spring/page-context.js");

  //function to use when we are ignoring a function
  function dummy() {
    return -1;
  }

  function SpringDelegate(appName, appType, config, env) { // jshint ignore:line

    // No point in initialising this until we know
    // we are going to play some media
    this._sensors = null;
    this._broker = null;
    this._media = null;
    this._meta = {};
    this._stream = null;
    this._env = env;
    this._siteCode = config[ConfigKeys.BARB_SITE_CODE];
    this._debug = config[ConfigKeys.BARB_DEBUG];
    this._traceId = null;
    this._isPlaying = false;
    this._isEssEnabled = false;
    this._isEnabled = true;
    this._hasStarted = false;

    if (config[ConfigKeys.ECHO_TRACE]) {
      this.setTraceId(config[ConfigKeys.ECHO_TRACE]);
    }

    if (config[ConfigKeys.USE_ESS]) {
      this._isEssEnabled = true;
    }

    if (config && config[ConfigKeys.ECHO_ENABLED] === false) {
      this._isEnabled = false;
    } else {
      this._isEnabled = true;
    }
  }

  SpringDelegate.prototype.start = function() {
    if (!this._hasStarted) {
      this._hasStarted = true;
    }
  };

  SpringDelegate.prototype.enable = function() {
    if (!this._isEnabled) {
      this._isEnabled = true;
    }
  };

  SpringDelegate.prototype.disable = function() {
    if (this._isEnabled) {
      this._isEnabled = false;
      this.clearMedia();
    }
  };

  SpringDelegate.prototype.setTraceId = function(id) {
    this._traceId = id;
  };

  SpringDelegate.SpringStreams = __webpack_require__("./lib/spring/amd.springstreams-2.0.0.beauty.js");

  // Application State Methods
  SpringDelegate.prototype.addLabels = dummy;
  SpringDelegate.prototype.addLabel = dummy;
  SpringDelegate.prototype.addManagedLabel = dummy;
  SpringDelegate.prototype.removeLabels = dummy;
  SpringDelegate.prototype.removeLabel = dummy;
  SpringDelegate.prototype.setLoggedInToBBCId = dummy;
  SpringDelegate.prototype.setLoggedOutOfBBCId = dummy;
  SpringDelegate.prototype.setAppVersion = dummy;
  SpringDelegate.prototype.setCounterName = dummy;
  SpringDelegate.prototype.setContentLanguage = dummy;
  SpringDelegate.prototype.setCacheMode = dummy;
  SpringDelegate.prototype.clearCache = dummy;
  SpringDelegate.prototype.flushCache = dummy;
  SpringDelegate.prototype.setESSEnabled = dummy;

  // Analytics Methods
  SpringDelegate.prototype.viewEvent = dummy;
  SpringDelegate.prototype.errorEvent = dummy;
  SpringDelegate.prototype.userActionEvent = dummy;

  // Media Player attributes
  SpringDelegate.prototype.setPlayerName = function(name) {
    this._meta[Keys.PLAYER_DESC] = name;
  };

  SpringDelegate.prototype.setPlayerVersion = function(version) {
    this._meta[Keys.PLAYER_VERSION] = version;
  };

  SpringDelegate.prototype.setPlayerIsPopped = dummy;
  SpringDelegate.prototype.setPlayerWindowState = dummy;
  SpringDelegate.prototype.setPlayerVolume = dummy;
  SpringDelegate.prototype.setPlayerIsSubtitled = dummy;

  SpringDelegate.prototype.setDestination = dummy;
  SpringDelegate.prototype.setProducer = dummy;

  /**
   * Sets the broker.
   *
   * This method should only be called by the EchoClient class to
   * ensure the interface is implemented.
   *
   * @param {Object} broker An object conforming to the broker interface.
   *
   * @return {SpringDelegate}
   */
  SpringDelegate.prototype.setBroker = function(broker) {
    this._broker = broker;
    return this;
  };

  // Media Attributes
  SpringDelegate.prototype.setMedia = function(media) {
    if (!this._eventsEnabled()) {
      return;
    }

    this.clearMedia();
    this._media = media.getClone();
  };

  SpringDelegate.prototype.setMediaLength = function(length) {
    this._media.setLength(length);
  };

  /**
   * Handles an updated clip from the LiveBroker
   *
   * @param {Media} newMedia
   */
  SpringDelegate.prototype.liveMediaUpdate = function(newMedia) {
    this._media = newMedia.getClone();

    if (this._isPlaying) {
      this._startTracking();
    }
  };

  SpringDelegate.prototype.liveEnrichmentFailed = function() {

    if (!this._media.getServiceId()) {
      this._media.setServiceId('no-service-id-found');
    }

    if (this._isPlaying) {
      this._startTracking();
    }
  };

  // Media Events
  SpringDelegate.prototype.avPlayEvent = function(position, eventLabels) { // jshint ignore:line
    if (!this._eventsEnabled()) {
      return;
    }

    if (this.isValidMedia() && this._broker) {

      this._initSensors();

      this._isPlaying = true;

      if (this._media.isLive() && !this._media.getServiceId()) {
        if (!this._isEssEnabled || (!this._media.getVersionId() && !this._media.getVpId())) {
          this._media.setServiceId('invalid-data');
          this._startTracking();
        }
      } else {
        this._startTracking();
      }
    }
  };

  // PRIVATE
  SpringDelegate.prototype._initSensors = function() {
    if (this._sensors === null) {
      this._sensors = new SpringDelegate.SpringStreams(this._siteCode);

      if (this._env.getSetLocalStorageItem() !== null &&
        this._env.getGetLocalStorageItem() !== null &&
        this._env.getHttpGet() !== null) {
        DEBUG.info('Using custom PageContext for BARB');
        var pageContext = new PageContext('com.kma.springstreams', this._env);
        this._sensors.setPageContext(pageContext);
      }

      if (this._debug) {
        this._sensors.debug = function(x) {
          DEBUG.info('Spring DEBUG: ' + x);
        };
      }
    }
  };

  SpringDelegate.prototype._startTracking = function() {
    if (this._stream === null) {
      var attr = this._getAttributes();
      var id = attr[Keys.PID] || ' ';

      // Start to track the media
      this._stream = this._sensors.track(id, attr, this._getAdaptor());
    }

  };

  SpringDelegate.prototype._getMostPrecedentIdObject = function() {
    var versionId = this._media.getVersionIdObject();
    var episodeId = this._media.getEpisodeIdObject();
    var clipId    = this._media.getClipIdObject();
    var vpId      = this._media.getVpIdObject();
    var serviceId = this._media.getServiceIdObject();

    if (versionId.isValueValid()) {
      return versionId;
    } else if (episodeId.isValueValid()) {
      return episodeId;
    } else if (clipId.isValueValid()) {
      return clipId;
    } else if (vpId.isValueValid()) {
      return vpId;
    } else if (serviceId.isValueValid()) {
      return serviceId;
    }

    return null;
  };

  SpringDelegate.prototype._getAttributes = function() {
    var media = this._media;

    // Create desc object
    var desc = {};

    if (this._traceId) {
      desc[ConfigKeys.ECHO_TRACE] = this._traceId;
    }

    if (!media.isLive()) {
      var precedentId = this._getMostPrecedentIdObject();

      if (precedentId !== null) {
        desc[Keys.PID] = precedentId.getValue();
      }
    }

    if (media.isOnDemand()) {
      desc[Keys.STREAM] = 'od';
    } else if (media.isDownload()) {
      desc[Keys.STREAM] = 'dwn';
    } else if (media.isLive()) {
      if (media.getServiceIdObject().isValueValid()) {
        desc[Keys.STREAM] = 'live/' + media.getServiceId();
      }
    }

    return desc;
  };

  SpringDelegate.prototype._getAdaptor = function() {
    // Create adaptor
    var self = this;
    var positionGetter;

    if (this._media.isLive()) {
      positionGetter = function() {
        return self._broker.getTimestamp();
      };
    } else {
      positionGetter = function() {
        return self._broker.getPosition();
      };
    }

    return {
      getMeta: function(id) { // jshint ignore:line
        return self._meta;
      },

      getDuration: function(id) { // jshint ignore:line
        var secs = 0;

        if (!self._media.isLive()) {
          secs = Math.floor(self._media.getLength() / 1000);
        }

        return secs;
      },

      getPosition: function(id) { // jshint ignore:line
        return Math.floor(positionGetter() / 1000);
      }
    };
  };

  SpringDelegate.prototype._eventsEnabled = function() {
    return this._isEnabled && this._hasStarted;
  };

  SpringDelegate.prototype.avPauseEvent = function() {
  };

  SpringDelegate.prototype.avBufferEvent = function() {
  };

  SpringDelegate.prototype.avEndEvent = function() {
    if (!this._eventsEnabled()) {
      return;
    }

    this._isPlaying = false;

    if (this.isValidMedia()) {
      this.clearMedia();
    }
  };

  SpringDelegate.prototype.avRewindEvent = function() {
  };

  SpringDelegate.prototype.avFastForwardEvent = function() {
  };

  SpringDelegate.prototype.avSeekEvent = function() {
  };

  SpringDelegate.prototype.avUserActionEvent  = dummy;

  SpringDelegate.prototype.clearMedia = function() {
    if (this.isValidMedia()) {
      if (this._stream) {
        this._stream.stop();
      }

      this._stream = null;
      this._media = null;
    }
  };

  SpringDelegate.prototype.isValidMedia = function() {
    return this._media !== null && this._media.avType === Enums.AvType.VIDEO;
  };

  SpringDelegate.prototype.isValidLiveMedia = function() {
    return this.isValidMedia() && this._media.isLive();
  };

  SpringDelegate.prototype.requiresLabelCleansing = function() {
    return true;
  };

  return SpringDelegate;
}).call(exports, __webpack_require__, exports, module),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),

/***/ "./src/echo/enumerations.js":
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_RESULT__;/**
 * ENUM values. Available via Echo.Enums. These values are used to pass in to
 * various methods in `EchoClient` and `Media`
 * @exports Echo/Enums
 */
!(__WEBPACK_AMD_DEFINE_RESULT__ = (function(require) {
  'use strict';

  var ConfigKeys = __webpack_require__("./src/echo/config/keys.js");
  var ATILabelKeys = __webpack_require__("./src/echo/delegate/ati/label-keys.js");

  // Create a list of destinations that can be used as an enumeration
  var destinations = {};
  var origDestinations = __webpack_require__("./src/echo/config/destinations.js");
  Object.keys(origDestinations).map(function(key) {
    destinations[key] = key;
  });

  // Create a list of producers that can be used as an enumeration
  var producers = {};
  var origProducers = __webpack_require__("./src/echo/config/producers.js");
  Object.keys(origProducers).map(function(key) {
    producers[key] = key;
  });

  var comscoreCustomerId = {
    PUBLIC_SERVICE: '16060501',
    GNL: '19293874',
    WORLD_SERVICE: '19999701',
    WORLDWIDE_FEATURES: '19774467',
    STORE_NONCOMMERCIAL: '19774474',
    STORE_COMMERCIAL: '19774472',
    AFFILIATES_ACCEPTANCE: '18897612',
    BRITBOX: '23239715',
    BRITBOX_ACCEPTANCE: '18897612'
  };

  function createReportingProfile(comscoreCustomerId, comscoreSite, comscoreHost, sscHost) {
    var profile = {};
    profile[ConfigKeys.COMSCORE_CUSTOMER_ID] = comscoreCustomerId;
    profile[ConfigKeys.COMSCORE_SITE] = comscoreSite;
    profile[ConfigKeys.COMSCORE_HOST] = comscoreHost;
    profile[ConfigKeys.SSC_HOSTNAME] = sscHost;
    return profile;
  }

  function createPublicServiceReportingProfile(comscoreSite) {
    return createReportingProfile(
      comscoreCustomerId.PUBLIC_SERVICE,
      comscoreSite,
      'sa.bbc.co.uk',
      '.co.uk'
    );
  }

  function createAffiliateReportingProfile(comscoreCustomerId, comscoreSite) {
    return createReportingProfile(
      comscoreCustomerId,
      comscoreSite,
      'scorecardresearch.com',
      '.com'
    );
  }

  var reportingProfiles = {};
  reportingProfiles.PUBLIC_SERVICE = createPublicServiceReportingProfile('bbc');
  reportingProfiles.PUBLIC_SERVICE_STAGE = createPublicServiceReportingProfile('stage');
  reportingProfiles.PUBLIC_SERVICE_TEST = createPublicServiceReportingProfile('test');
  reportingProfiles.PUBLIC_SERVICE_INT = createPublicServiceReportingProfile('int');
  reportingProfiles.PUBLIC_SERVICE_INTRANET = createPublicServiceReportingProfile('intranet');

  reportingProfiles.GNL = createAffiliateReportingProfile(
    comscoreCustomerId.GNL, 'bbc'
  );
  reportingProfiles.GNL_ACCEPTANCE = createAffiliateReportingProfile(
    comscoreCustomerId.AFFILIATES_ACCEPTANCE, 'gnl-test'
  );
  reportingProfiles.WORLD_SERVICE = createAffiliateReportingProfile(
    comscoreCustomerId.WORLD_SERVICE, 'bbc'
  );
  reportingProfiles.WORLD_SERVICE_ACCEPTANCE = createAffiliateReportingProfile(
    comscoreCustomerId.AFFILIATES_ACCEPTANCE, 'ws-test'
  );
  reportingProfiles.WORLDWIDE_FEATURES = createAffiliateReportingProfile(
    comscoreCustomerId.WORLDWIDE_FEATURES, 'bbc'
  );
  reportingProfiles.WORLDWIDE_FEATURES_ACCEPTANCE = createAffiliateReportingProfile(
    comscoreCustomerId.AFFILIATES_ACCEPTANCE, 'features-test'
  );
  reportingProfiles.STORE_NONCOMMERCIAL = createAffiliateReportingProfile(
    comscoreCustomerId.STORE_NONCOMMERCIAL, 'bbc'
  );
  reportingProfiles.STORE_COMMERCIAL = createAffiliateReportingProfile(
    comscoreCustomerId.STORE_COMMERCIAL, 'bbc'
  );
  reportingProfiles.BRITBOX_ACCEPTANCE = createAffiliateReportingProfile(
    comscoreCustomerId.BRITBOX_ACCEPTANCE, 'bbc-global-test'
  );
  reportingProfiles.BRITBOX = createAffiliateReportingProfile(
    comscoreCustomerId.BRITBOX, 'bbc'
  );

  var exports = {
    /** COMSCORE CONFIG **/

    /** ECHO CLIENT **/
    /**
     * Type of application, used in the construction of an `EchoClient` object
     * @property WEB Standard desktop web sites
     * @property MOBILE_WEB Mobile sites
     * @property RESPONSIVE Responsive sites
     * @property MOBILE_APP Native mobile applications
     * @property BIGSCREEN_HTML Connected Tv's and STB's
     * @property BIGSCREEN_FLASH Connected Tv's and STB's
     * @property BIGSCREEN_APP TiVo Xbox Wii etc.
     * @property BIGSCREEN_CAST Chromecast Analyitics.
     * @property DESKTOP_APP Desktop apps, eg iplayer downloader
     */
    ApplicationType: {
      WEB: 'web',
      MOBILE_WEB: 'mobile-web',
      RESPONSIVE: 'responsive',
      MOBILE_APP: 'mobile-app',
      BIGSCREEN_HTML: 'bigscreen-html',
      BIGSCREEN_FLASH: 'bigscreen-flash',
      BIGSCREEN_APP: 'bigscreen-app',
      BIGSCREEN_CAST: 'bigscreen-cast',
      DESKTOP_APP: 'desktop-app'
    },

    /**
     * Window states, used as an argument to the EchoClient method
     * `setPlayerWindowState()`
     * @property FULL
     * @property NORMAL
     * @property MINIMISED
     * @property MAXIMISED
     * @property PICTUREINPICTURE
     */
    WindowState: {
      FULL: 'full',
      NORMAL: 'norm',
      MINIMISED: 'min',
      MAXIMISED: 'max',
      PICTUREINPICTURE: 'picture-in-picture'
    },

    /** MEDIA **/

    /**
     * Type of MediaId used by MediaID
     *
     */
    MediaIdType: {
      VERSION: 'version',
      CLIP: 'clip',
      EPISODE: 'episode',
      SERVICE: 'service',
      VPID: 'vpid',
      NONPIPSCONTENTID: 'nonpipscontentid',
      PRODUCER: 'producer',
      BRAND: 'brand',
      SERIES: 'series'
    },

    MediaClipType: {
      UNDEFINED: undefined,
      CLIP: 'clip',
      EPISODE: 'episode'
    },

    MediaInitiationType: {
      UNDEFINED: undefined,
      USER: 'user',
      AUTO: 'auto'
    },

    /**
     * Type of AV content. Used in the construction of a `Media` object
     * @property AUDIO Audio content
     * @property VIDEO Video content
     */
    AvType: {
      AUDIO: 'audio',
      VIDEO: 'video'
    },

    /**
     * Retrieval Type of AV content. Used in the `Media`
     * object
     * @property STREAM Content is being streamed
     * @property DOWNLOAD Content is downloaded
     */
    RetrievalType: {
      STREAM: 'stream',
      DOWNLOAD: 'download'
    },

    /**
     * Retrieval Type of AV content. Used as an argument to `media.setForm()`
     * @property LONG Content is "long" (an episode)
     * @property SHORT Content is "short" (a clip)
     */
    Form: {
      LONG: 'long',
      SHORT: 'short'
    },

    /**
     * AV type to differentiate between episode and clip,
     * this is used to decide whether the content ID is
     * a clip or episode
     * @property CLIP Content is a clip
     * @property EPISODE Copntent is an episode
     */
    PIPsType: {
      CLIP: 'clip',
      EPISODE: 'ep'
    },

    /**
     * Used in the construction of a Media object, this value
     * indeicates whether the stream is "live" or "on-demand"
     * @property ON_DEMAND Content is On Demand
     * @property LIVE Content is Live
     */
    MediaConsumptionMode: {
      ON_DEMAND: 'ondemand',
      LIVE: 'live',
      DOWNLOAD: 'download'
    },

    EchoCacheMode: {
      OFFLINE: 'offline',
      ALL: 'all'
    },

    ManagedLabels: {
      EVENT_MASTER_BRAND: 'event_master_brand',
      BBC_SITE: 'bbc_site',
      IPLAYER_STATE: 'iplayer_state',
      STORE_ED_TYPE: 'store_ed_type',
      IPLAYER_AVAIL: 'iplayer_avail',
      STORE_REFERRAL: 'store_referral',
      BBC_HASHED_ID: 'bbc_hid'
    },

    ReportingProfiles: reportingProfiles,

    EssError: {
      STATUS_CODE: 'status_code',
      TIMEOUT: 'timeout',
      JSON: 'json',
      RUNTIME: 'runtime_error'
    },

    Destinations: destinations,

    Producers: producers,

    EchoLabelKeys: ATILabelKeys
  };

  return exports;
}).call(exports, __webpack_require__, exports, module),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),

/***/ "./src/echo/environment.js":
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_RESULT__;/**
 * A class to allow for varied enrionments.
 * An instance of this can be passed into EchoClient constructor.
 * Default values are for a standard web environment.
 * @exports Echo/Environment
 */
!(__WEBPACK_AMD_DEFINE_RESULT__ = (function(require) {
  'use strict';

  var LabelCleanser = __webpack_require__("./src/echo/util/cleansing/label-cleanser.js");
  var Cookies = __webpack_require__("./src/echo/util/cookies.js");
  var Networking = __webpack_require__("./src/echo/util/networking.js");

  var orbCookies;
  var orbIdCta;

  // must be initialised as undefined
  var orbIdCtaIsAvailable;
  var orbIdCtaIsLoading = false;
  var orbIdCtaCallbacks = [];

  /**
   * Initialise an Environment object
   * An instance of this can be passed into EchoClient constructor
   * Default values are for a standard web environment. If these are fine
   * for your purposes, then this class does not need to be used and nothing
   * need be passed into `new EchoClient()`
   * @constructor
   */
  function Environment() {
    var screen = window.screen || {};
    var navigator = window.navigator || {};
    var document = window.document || {};

    this._platformRuntimeEnvironment = 'html';
    this._platformOSVersion = '5'; //TODO

    this._screenResolution = (screen.width || '-') +
      'x' + (screen.height || '-');

    this._language = navigator.language || '';
    this._platformName = navigator.platform || '';

    this._charset = document.characterSet || document.defaultCharset || '';
    this._title = document.title || '';
    this._url = document.URL || '';
    this._referrer = document.referrer || '';

    this._deviceName = null; // Dont send if not set

    this._httpGet = null;
    this._executeCrossDomainGet = null;

    this._getCookie = null; // similarly
    this._setCookie = null;

    this._setLocalStorageItem = null;
    this._getLocalStorageItem = null;
  }

  Environment._defaultHttpGet = Networking.httpGet;
  Environment._defaultGetCookie = Cookies.getCookieValueByName;

  Environment.prototype.getPlatformName = function() {
    return this._platformName;
  };

  Environment.prototype.getPlatformRuntimeEnvironment = function() {
    return this._platformRuntimeEnvironment;
  };

  Environment.prototype.getPlatformOSVersion = function() {
    return this._platformOSVersion;
  };

  Environment.prototype.getDeviceName = function() {
    return this._deviceName;
  };

  Environment.prototype.getScreenResolution = function() {
    return this._screenResolution;
  };

  Environment.prototype.getLanguage = function() {
    return this._language;
  };

  Environment.prototype.getHttpGet = function() {
    return this._httpGet;
  };

  Environment.prototype.setExecuteCrossDomainGet = function(executeCrossDomainGet) {
    this._executeCrossDomainGet = executeCrossDomainGet;
  };

  Environment.prototype.getExecuteCrossDomainGet = function() {
    var executeCrossDomainGet;
    if (this._executeCrossDomainGet) {
      executeCrossDomainGet = this._executeCrossDomainGet;
    } else {
      executeCrossDomainGet = Networking.executeCrossDomainGet;
    }

    return executeCrossDomainGet;
  };

  Environment.prototype.getCookieGetter = function() {
    return this._getCookie;
  };

  Environment.prototype.getCookieSetter = function() {
    return this._setCookie;
  };

  Environment.prototype.getCharSet = function() {
    return this._charset;
  };

  Environment.prototype.getTitle = function() {
    return this._title;
  };

  Environment.prototype.getURL = function() {
    return this._url;
  };

  Environment.prototype.getProtocol = function() {
    return this.getURL().toLowerCase().indexOf('http:', 0) !== 0 ? 'https:' : 'http:';
  };

  Environment.prototype.getReferrer = function() {
    return this._referrer;
  };

  Environment.prototype.setSetLocalStorageItem = function(setLocalStorageItem) {
    this._setLocalStorageItem = setLocalStorageItem;
  };

  Environment.prototype.getSetLocalStorageItem = function() {
    return this._setLocalStorageItem;
  };

  Environment.prototype.setGetLocalStorageItem = function(getLocalStorageItem) {
    this._getLocalStorageItem = getLocalStorageItem;
  };

  Environment.prototype.getGetLocalStorageItem = function () {
    return this._getLocalStorageItem;
  };

  /**
   * Set the "Platform Name". If this method is not called the
   * default value will be `window.navigator.platform`
   * @param {string} name
   * @returns {this} `this`
   */
  Environment.prototype.setPlatformName = function(name) {
    this._platformName = name;
    return this;
  };

  /**
   * Set the "Platform Runtime Environment" and the "Platform OS Version".
   * If this method is not called the defaults will be `'html'` and `'5'`
   * @param {string} platformRuntimeEnvironment
   * @param {string} platformOSVersion
   * @returns {this} `this`
   */
  Environment.prototype.setPlatform =
    function(platformRuntimeEnvironment, platformOSVersion) {
    this._platformRuntimeEnvironment = platformRuntimeEnvironment;
    this._platformOSVersion = platformOSVersion;
    return this;
  };

  /**
   * Set the "Device Name". If this method is not called the
   * default value will not be set (and potentially popluated server-side)
   * @param {string} deviceName
   * @returns {this} `this`
   */
  Environment.prototype.setDeviceName = function(deviceName) {
    this._deviceName = deviceName;
    return this;
  };

  /**
   * Set the Screen Resoultion. If this method is not called the
   * default will be `window.screen.availWidth + 'x' +
   * window.screen.availHeight`
   * @param {string} screenResolution
   * @example env.setScreenResolution('200x300');
   */
  Environment.prototype.setScreenResolution = function(screenResolution) {
    this._screenResolution = screenResolution;
    return this;
  };

  /**
   * Set the "device Language (locale)". If this method is not called the
   * default value will be `window.navigator.language`. This should not be
   * confused with the `setContentLanguage()` EchoClient instance method which
   * asks for the language being displayed
   * @param {string} language
   * @returns {this} `this`
   */
  Environment.prototype.setLanguage = function(language) {
    // ECHO-12
    this._language = LabelCleanser.cleanLanguage(language);
    return this;
  };

  /**
   * Set a function to use for httpGet request. If this method is not called
   * AJAX or an `Image` object will be used
   * @param {function} httpGet
   * @returns {this} `this`
   * @example
   * env.setHttpGet(function(url,headers,onSuccess,onError){
   *     var img = new Image();
   *     img.src = url;
   *     if(onSuccess){
   *         img.onload = onSuccess;
   *     }
   *     if(onError){
   *         img.onerror = onError;
   *     }
   * });
   */
  Environment.prototype.setHttpGet = function(httpGet) {
    this._httpGet = httpGet;
    return this;
  };

  /**
   * Set a function to use for getting cookies from the environment.
   * If this method is not called, cookies will be searched for in
   * `document.cookie`
   * @param {function} getCookie
   * @returns {this} `this`
   * @example
   * env.setCookieGetter(function(name){
   *     // get and return the "name" cookie
   * });
   */
  Environment.prototype.setCookieGetter = function(getCookie) {
    this._getCookie = getCookie;
    return this;
  };

  /**
   * Set a function to use for setting cookies.
   * If this method is not called, cookies will be set on `document.cookie`
   * See the example for an example that will work on the web. The passed
   * method should accept all the parameters which the exmaple method does:
   *
   * |Name|Type|Description|
   * |----|----|-----------|
   * |`key`|String|The name of the cookie|
   * |`value`|String|The cookie value|
   * |`path`|String|The path to set the cookie on|
   * |`maxAge`|Integer|The number of milliseconds until the cookie expires|
   *
   * @param {function} setCookie
   * @returns {this} `this`
   * @example
   * env.setCookieSetter(function(key,value,path,maxAge){
   *     var t = new Date();
   *     t.setTime(t.getTime() + maxAge);
   *
   *     document.cookie = key + '=' + value + ';' +
   *                       ' expires=' + t.toUTCString() + ';' +
   *                       ' path=' + path + ';';
   * });
   */
  Environment.prototype.setCookieSetter = function(setCookie) {
    this._setCookie = setCookie;
    return this;
  };

  /**
   * Set the "Character Set". If this method is not called the
   * default value will be `document.characterSet` or, failing that
   * `document.defaultCharset`
   * @param {string} charSet
   * @returns {this} `this`
   */
  Environment.prototype.setCharSet = function(charSet) {
    this._charset = charSet;
    return this;
  };

  /**
   * Set the page title. If this method is not called the
   * default value will be `document.title`
   * @param {string} title
   * @returns {this} `this`
   */
  Environment.prototype.setTitle = function(title) {
    this._title = title;
    return this;
  };

  /**
   * Set the current URL. If this method is not called the
   * default value will be `document.URL`
   * @param {string} url
   * @returns {this} `this`
   */
  Environment.prototype.setURL = function(url) {
    this._url = url;
    return this;
  };

  /**
   * Set the referrer url. If this method is not called the
   * default value will be `document.referrer`
   * @param {string} ref
   * @returns {this} `this`
   */
  Environment.prototype.setReferrer = function(ref) {
    this._referrer = ref;
    return this;
  };

  Environment.setOrbCookies = function(value) {
    orbCookies = value;
    return this;
  };

  Environment.getOrbCookies = function() {
    return orbCookies;
  };

  Environment.getOrbCookiesPolicy = function() {
    if (orbCookies && typeof orbCookies.readPolicy === 'function') {
      return orbCookies.readPolicy();
    }
  };

  Environment.setOrbIdCta = function(value) {
    orbIdCta = value;
    return this;
  };

  Environment.getOrbIdCta = function(callback) {

    var callbackIndex;

    var safeCallback = function(potentialCallback, orbIdCta) {
      if (potentialCallback && typeof potentialCallback === 'function') {
        potentialCallback(orbIdCta);
      }
    };

    if (orbIdCta !== undefined) {
      safeCallback(callback, orbIdCta);
      return;
    } else if (orbIdCtaIsAvailable === false) {
      safeCallback(callback);
      return;
    }

    orbIdCtaCallbacks.push(callback);

    /**
     * We use window.require here rather than the local require (from 'echo.js')
     * as we want to be able to control require behaviour in integration tests.
     */
    var require = window.require;
    if (orbIdCtaIsAvailable === undefined && require) {
      orbIdCtaIsAvailable = typeof require.defined === 'function' &&
        require.defined('idcta/idcta-1');

      // we are looking into the interals of require so be
      // as defensive as possible
      if (
        !orbIdCtaIsAvailable &&
        require.s &&
        require.s.contexts &&
        require.s.contexts._ &&
        require.s.contexts._.config &&
        require.s.contexts._.config.paths &&
        require.s.contexts._.config.paths.idcta
      ) {
        orbIdCtaIsAvailable = true;
      }

    } else {
      orbIdCtaIsAvailable = false;
    }

    // load the idcta is available and not already being loaded
    if (orbIdCtaIsAvailable && !orbIdCtaIsLoading) {
      orbIdCtaIsLoading = true;

      window.require(['idcta/idcta-1'], function(idcta) {
        orbIdCta = idcta;
        for (callbackIndex = 0; callbackIndex < orbIdCtaCallbacks.length; orbIdCtaCallbacks++) {
          if (
            orbIdCtaCallbacks[callbackIndex] &&
            typeof orbIdCtaCallbacks[callbackIndex] === 'function'
          ) {
            safeCallback(orbIdCtaCallbacks[callbackIndex], orbIdCta);
          }
        }
      });
    } else if (orbIdCtaIsAvailable === false) {
      safeCallback(callback);
    }
  };

  return Environment;
}).call(exports, __webpack_require__, exports, module),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),

/***/ "./src/echo/live-broker.js":
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [
  __webpack_require__("./src/echo/playhead.js"),
  __webpack_require__("./src/echo/delegate/comscore/label-keys.js"),
  __webpack_require__("./src/echo/schedule.js"),
  __webpack_require__("./src/echo/media.js")
], __WEBPACK_AMD_DEFINE_RESULT__ = (function(Playhead, CSKeys, Schedule, Media) {

  'use strict';

  var NO_BROADCAST = 'no-broadcast';
  var UPDATE_INTERVAL = 1000;
  var TIMESTAMP_DRIFT_TOLERANCE = 1500;

  /**
   * @param {Object} playerDelegate
   * @param {Media} media the current media item
   * @param {EchoClient} echoClient
   * @param {Obect} environment
   * @param {Boolean} essEnabled
   * @constructor
   */
  function LiveBroker(
    playerDelegate, media, echoClient, environment, essEnabled
  ) {

    this._playerDelegate = playerDelegate;
    this._playhead = new Playhead();
    this._isStarted = false;
    this._interval = null;
    this._echoClient = echoClient;
    this._broadcast = NO_BROADCAST;
    this._playerDelegateTimestamp = 0;
    this._previousPosition = 0;
    this._playingTime = 0;
    this._media = media;
    this._environment = environment;
    this._essEnabled = essEnabled;
    this._hb3NotSentYet = true;
    this._hb5NotSentYet = true;

    this._isRecievingPlayerTimestamp = false;
    this._updateTime = 0;

    if (this._essEnabled) {
      this._schedule = new Schedule(media, environment, echoClient);
    }
  }

  /**
   * Start up the broker
   */
  LiveBroker.prototype.start = function() {

    var self = this;

    if (this._isStarted) {
      return;
    }

    this._interval = setInterval(function() {
      self._update();
    }, UPDATE_INTERVAL);

    this._isStarted = true;

    if (!this._isRecievingPlayerTimestamp) {
      this._playhead.start();
    }
  };

  /**
   * Stop the broker
   */
  LiveBroker.prototype.stop = function() {
    clearInterval(this._interval);
    this._playhead.stop();
    this._isStarted = false;
  };

  /**
   * Check to see if the broadcast has changed based on the current player time.
   *
   * @private
   */
  LiveBroker.prototype._update = function() {
    var playerDelegateTimestamp = parseInt(this._playerDelegate.getTimestamp(), 10);
    var playerDelegateTimestampHasChanged = false;
    var playerDelegateTimestampIsValid = false;
    var hasRealignedTimestampToPlayerDelegate = false;

    var timestamp = this.getTimestamp();
    var timestampDelta;
    var now = new Date();
    now = now.getTime();
    var updateDelta = now - this._updateTime;
    this._updateTime = now;

    if ((typeof playerDelegateTimestamp === 'number') &&
        playerDelegateTimestamp > 0
    ) {
      playerDelegateTimestampIsValid = true;
      this._isRecievingPlayerTimestamp = true;

      if (this._playerDelegateTimestamp !== playerDelegateTimestamp) {
        playerDelegateTimestampHasChanged = true;
        this._echoClient.addLabel(CSKeys.MEDIA_TIMESTAMP, playerDelegateTimestamp);
      }

      // Determine if our internal representation of time (via this.getTimestamp()
      // or this._playerDelegateTimestamp + this._playhead.getPosition()) is aligned
      // with the value recieved from the player delegate.
      timestampDelta = playerDelegateTimestamp - timestamp;

      if (
        playerDelegateTimestampIsValid &&
        (
          this._playerDelegateTimestamp === 0 ||
          timestampDelta < (0 - updateDelta - TIMESTAMP_DRIFT_TOLERANCE) ||
          timestampDelta > (updateDelta + TIMESTAMP_DRIFT_TOLERANCE)
        )
      ) {
        hasRealignedTimestampToPlayerDelegate = true;
        this._playerDelegateTimestamp = playerDelegateTimestamp;
        this._playingTime += this._playhead.getPosition();
        this._restartPlayhead();
        timestamp = this.getTimestamp();
      }
    }

    if (!hasRealignedTimestampToPlayerDelegate) {
      if (
        (this._playerDelegateTimestamp !== 0 && !playerDelegateTimestampHasChanged) ||
        (this._isRecievingPlayerTimestamp && !playerDelegateTimestampIsValid)
      ) {
        this._playhead.stop();
      } else {
        this._playhead.start();
      }
    }

    // Now we have determined the current timestamp we need to check where
    // we are in the schedule and update the media item if necessary.
    var hasUpdatedMedia = this._updateSchedule(timestamp);

    // if we have created a new media item we need to reset playing time
    // playhead and Echo heartbeat flags so the heartbeats are sent again
    // for the new media item
    if (hasUpdatedMedia) {
      this._playingTime = 0;
      this._playerDelegateTimestamp = playerDelegateTimestamp;
      this._restartPlayhead();
      this._hb3NotSentYet = true;
      this._hb5NotSentYet = true;
    } else if (playerDelegateTimestampHasChanged) {
      this._echoClient.releaseSuppressedPlay();
    }

    this._updateHeartbeats();

    this._previousPosition = this.getPosition();

  };

  /**
   * Check to see if the broadcast has changed based on the
   * provided timestamp.
   *
   * @param {Number} timestamp  The timestamp to compare with the schedule
   *
   * @private
   */
  LiveBroker.prototype._updateSchedule = function(timestamp) {
    var broadcast;
    var broadcastTime;
    var clipLength;
    var media;
    var hasUpdatedMedia = false;

    if (this._essEnabled && this._schedule.hasData() && timestamp > 0) {

      broadcast = this._schedule.getBroadcast(timestamp);

      media = new Media(
        this._media.getAvType(),
        this._media.getMediaConsumptionMode()
      );
      media.setServiceId(this._schedule.serviceId);
      media.setTransportMode(this._media.getTransportMode());
      media.setMediaPlayerName(this._media.getMediaPlayerName());
      media.setMediaPlayerVersion(this._media.getMediaPlayerVersion());

      if (!broadcast && this._broadcast !== NO_BROADCAST) {
        // we were previously in a broadcast and have now gone into dead space
        this._broadcast = NO_BROADCAST;
        this._updateMedia(media);
        hasUpdatedMedia = true;
      } else if (
        broadcast && (
          this._broadcast === NO_BROADCAST ||
          broadcast.version.id !== this._broadcast.version.id
        )
      ) {
        /**
         * if we don't already have a broadcast, or if the cached broadcast is
         * different i.e. crossed boundary.
         */

        this._broadcast = broadcast;
        broadcastTime = broadcast.published_time;
        clipLength = broadcastTime.end - broadcastTime.start;

        media.setEssEnriched(true);
        media.setVersionId(broadcast.version.id);
        media.setLength(clipLength);

        if (broadcast.episode && broadcast.episode.id) {
          media.setEpisodeId(broadcast.episode.id);
        }

        this._updateMedia(media);
        hasUpdatedMedia = true;
      }
    }

    return hasUpdatedMedia;
  };

  /**
   * Send heartbeat events if necessary.
   *
   * @private
   */
  LiveBroker.prototype._updateHeartbeats = function() {

    var playingTime;
    var position;

    if (this._broadcast === NO_BROADCAST || (!this._hb3NotSentYet && !this._hb5NotSentYet)) {
      return;
    }

    playingTime = this._playingTime + this._playhead.getPosition();
    position = this.getPosition();

    // send 3 second heartbeat
    if (playingTime >= 3000 && this._hb3NotSentYet) {
      this._echoClient.avUserActionEvent('echo_hb', 'echo_hb_3', position);
      this._hb3NotSentYet = false;
    }

    // send 5 second heartbeat
    if (playingTime >= 5000 && this._hb5NotSentYet) {
      this._echoClient.avUserActionEvent('echo_hb', 'echo_hb_5', position);
      this._hb5NotSentYet = false;
    }
  };

  /**
   * Broadcast the live media update.
   *
   * @param {Media} media a new media item
   * @private
   */
  LiveBroker.prototype._updateMedia = function(media) {

    var position = this.getPosition();

    this._echoClient.liveMediaUpdate(
      media,
      position,
      this._previousPosition
    );

    this._previousPosition = position;
  };

  /**
   * Convenience method for reseting and playing the playhead.
   *
   * @private
   */
  LiveBroker.prototype._restartPlayhead = function() {
    this._playhead.reset();
    this._playhead.start();
  };

  /**
   * Represents the true position a player is at within a piece of media.
   *
   * @returns {Number}
   */
  LiveBroker.prototype.getPosition = function() {

    var position;

    if (this._broadcast && this._broadcast !== NO_BROADCAST) {
      position = (
        this._playerDelegateTimestamp - this._broadcast.published_time.start
      ) + this._playhead.getPosition();
    } else {
      position = this._playhead.getPosition();
    }

    return position;
  };

  /**
   * Represents the timestamp a player is at within a piece of media.
   *
   * @returns {Number}
   */
  LiveBroker.prototype.getTimestamp = function() {
    return this._playerDelegateTimestamp + this._playhead.getPosition();
  };

  return LiveBroker;

}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),

/***/ "./src/echo/media-id.js":
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_RESULT__;/**
 * Exports the Media Id class
 * @exports Echo/Media
 * @author Dai Williams <dai.williams@bbc.co.uk>
 */
!(__WEBPACK_AMD_DEFINE_RESULT__ = (function(require) {
  'use strict';

  var Utils = __webpack_require__("./src/echo/util/methods.js");

  /**
   * Initialise a Media Id Object.
   * @namespace MediaId
   * @constructor
   * @param {MediaIdType} _idType The Media type identifier
   * for a piece of media. 'Enums.MediaIdType'
   *
   * @description The MediaId object is used within the Media object
   * so set values for specific identifiers within the Media object itself.
   * these types can be:
   *
   *   VERSION
   *   CLIP
   *   EPISODE
   *   SERVICE
   *   VPID
   *   NONPIPSCONTENTID
   *
   */
  var MediaId = function(_idType, _requiresValidation) {
    this.idType = _idType;
    this.validValueRegex = /^[a-z0-9A-Z_-]+$/;
    this.value = null;
    this.isSet = false;
    this.isValid = false;
    this.requiresValidation = _requiresValidation;
  };

  /**
   * @memberOf MediaId
   * @instance
   * @method getIdType
   *
   * @returns {MediaIdType} The MediaId type
   */
  MediaId.prototype.getIdType = function() {
    return this.idType;
  };

  /**
   * @memberOf MediaId
   * @instance
   * @method setValue
   *
   * @param {string} _value The value to set for MediaId
   * @returns {MediaIdType} The MediaId type
   */
  MediaId.prototype.setValue = function(_value) {
    this.isSet = true;

    if (_value == null) {
      this.isValid = false;
    } else if (this.requiresValidation) {
      this.isValid = this._validateValue(_value);
    } else {
      this.isValid = true;
    }

    Utils.assert(this.isValid, 'MediaId: The value for ' + this.idType + 'Id is invalid', true);

    this.value = _value;
  };

  /**
   * @memberOf MediaId
   * @instance
   * @method getValue
   *
   * @returns {string} The MediaId value
   */
  MediaId.prototype.getValue = function() {
    return this.value;
  };

  /**
   * @memberOf MediaId
   * @instance
   * @method isValueSet
   *
   * @description Confirms whether a value has been set for the value
   * invalid or valid
   * @returns {bool}
   */
  MediaId.prototype.isValueSet = function() {
    return this.isSet;
  };

  /**
   * @memberOf MediaId
   * @instance
   * @method isValueValid
   *
   * @description Confirms whether the value set is valid. If not set or invalid
   * it returns false
   * @returns {bool}
   */
  MediaId.prototype.isValueValid = function() {
    return this.isValid;
  };

  /**
   * @memberOf MediaId
   * @private
   * @method isValueSet
   *
   * @description Private helper to check if the value being set is
   * a valid value
   * @returns {bool}
   */
  MediaId.prototype._validateValue = function(value) {
    if (typeof value === 'string') {
      return this.validValueRegex.test(value);
    } else {
      return false;
    }
  };

  return MediaId;
}).call(exports, __webpack_require__, exports, module),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),

/***/ "./src/echo/media.js":
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_RESULT__;/**
 * Exports the Media class, used for setting meta-data associated with
 * a piece of AV content
 * @exports Echo/Media
 * @author Dai Williams <dai.williams@bbc.co.uk>
 */
!(__WEBPACK_AMD_DEFINE_RESULT__ = (function(require) {
  'use strict';

  var Producers = __webpack_require__("./src/echo/config/producers.js");
  var MediaId = __webpack_require__("./src/echo/media-id.js");
  var Enums = __webpack_require__("./src/echo/enumerations.js");
  var Utils = __webpack_require__("./src/echo/util/methods.js");
  var LabelKeys = __webpack_require__("./src/echo/delegate/ati/label-keys.js");
  var CSLabelKeys = __webpack_require__("./src/echo/delegate/comscore/label-keys.js");
  var LabelCleanser = __webpack_require__("./src/echo/util/cleansing/label-cleanser.js");
  var DEBUG = __webpack_require__("./src/echo/util/debug.js");
  var CONSUMPTION_MODE = Enums.MediaConsumptionMode;

  /**
   * @memberOf Media
   * @private
   * @method _isValidAvType
   *
   * @description Private helper to determine valid av type
   *
   * @param {AvType} _avType The AV type of the media,
   * one of `Echo.Enums.AvType`.
   * @returns {bool}
   */
  function _isValidAvType(_avType) {
    return (_avType === Enums.AvType.AUDIO || _avType === Enums.AvType.VIDEO);
  }

  /**
   * @memberOf Media
   * @private
   * @method _isValidConsumptionMode
   *
   * @description Private helper to determine valid av type
   *
   * @param {MediaConsumptionMode} _consumptionMode Whether the media is
   * on-demand, download or live.
   * @returns {bool}
   */
  function _isValidConsumptionMode(_consumptionMode) {
    return (
      _consumptionMode === CONSUMPTION_MODE.ON_DEMAND ||
      _consumptionMode === CONSUMPTION_MODE.DOWNLOAD ||
      _consumptionMode === CONSUMPTION_MODE.LIVE
    );
  }

  /**
   * Initialise a Media object.
   * @namespace Media
   * @constructor
   * @param {AvType} _avType The AV type of the media,
   * one of `Echo.Enums.AvType`.
   * @param {MediaConsumptionMode} _consumptionMode Whether the media is
   *                            on-demand, download or live.
   *
   * When determining how to set this flag, consider the experience
   * from the user's perspective. Did they need to plan their time
   * around the BBC in order to view this content? i.e. They had to
   * be in front of a screen / radio at 3pm on a given day in order
   * to watch it. If so, the content is live (regardless of whether
   * the 'screen' is big-screen, console, browser etc). If they
   * didn't need to be there at a particular time, rather they sat
   * down when they wanted and asked the BBC to serve the content
   * at that point (again, regardless of screen type) it is
   * on-demand.
   *
   * @example
   * var media = new Media(Echo.Enums.AvType.VIDEO,
   *                       Echo.Enums.MediaConsumptionMode.ON_DEMAND);
   */
  var Media = function(_avType, _consumptionMode) {
    this.avType = _isValidAvType(_avType) ? _avType : null;

    this.consumptionMode = _isValidConsumptionMode(_consumptionMode) ?
      _consumptionMode : null;

    Utils.assert(this.avType, 'Media: Invalid avType: ' + this.avType, true);
    Utils.assert(
      this.consumptionMode, 'Media: Invalid consumptionMode: ' +
      this.consumptionMode, true
    );

    //Create all Media Id Objects
    this.serviceIdObject = new MediaId(Enums.MediaIdType.SERVICE, true);
    this.versionIdObject = new MediaId(Enums.MediaIdType.VERSION, true);
    this.clipIdObject = new MediaId(Enums.MediaIdType.CLIP, true);
    this.episodeIdObject = new MediaId(Enums.MediaIdType.EPISODE, true);
    this.vpIdObject = new MediaId(Enums.MediaIdType.VPID, true);
    this.nonPipsContentIdObject = new MediaId(Enums.MediaIdType.NONPIPSCONTENT, false);
    this.producerObject = new MediaId(Enums.MediaIdType.PRODUCER, false);
    this.brandIdObject = new MediaId(Enums.MediaIdType.BRAND, false);
    this.seriesIdObject = new MediaId(Enums.MediaIdType.SERIES, false);

    this.length = 0;

    // Optional Values
    this.bufferLength = 0;
    this.supplier = null;
    this.mediaSet = null;
    this.transferFormat = null;

    // flag to check if this media object has been enriched by ESS. a null value
    // means that this media object has not gone through the live broker, so it
    // is always safer to assert equality (===) when you want to check that the
    // media has gone through the live broker *and* whether it has been enriched
    this.essEnrichedData = false;

    // whether or not the media is currently playing
    this._isPlaying = false;

    // whether or not the media is currently buffering (for ATI)
    this._isBuffering = false;

    this._isEmbedded = false;

    //set producer to be default of current page

    this.name = '';
    this.type = Enums.MediaClipType.UNDEFINED;
    this.playlist = '';

    // Media theme 2
    this.initiationType = Enums.MediaInitiationType.UNDEFINED;
    this.adsEnabled = false;

    // Media theme 3
    this.mediaPlayerName = '';
    this.mediaPlayerVersion = '';
    this.transportMode = '';
  };

  /**
   * Check to see if this media object has been enriched by ESS.
   *
   * @returns {Boolean}
   */
  Media.prototype.isEssEnriched = function() {
    return this.essEnrichedData === true;
  };

  /**
   * Set whether this media object has been enriched by ESS.
   *
   * @param {Boolean} isEnriched
   */
  Media.prototype.setEssEnriched = function(isEnriched) {
    this.essEnrichedData = isEnriched;
  };

  /**
   * @memberOf Media
   * @instance
   * @method getAvType
   *
   * @returns {AvType} The av type for the Media Object
   */
  Media.prototype.getAvType = function() {
    return this.avType;
  };

  /**
   * @memberOf Media
   * @instance
   * @method getMediaConsumptionMode
   *
   * @returns {MediaConsumptionMode} The consumption mode for the Media Object
   */
  Media.prototype.getMediaConsumptionMode = function() {
    return this.consumptionMode;
  };

  /**
   * @memberOf Media
   * @instance
   * @method getClone
   *
   * @returns {Media} A new Media object which is an exact clone of
   * itself
   */
  Media.prototype.getClone = function() {
    var clonedMedia = new Media(this.avType, this.consumptionMode);

    //Create all Media Id Objects
    clonedMedia.brandIdObject = this.brandIdObject;
    clonedMedia.seriesIdObject = this.seriesIdObject;
    clonedMedia.serviceIdObject = this.serviceIdObject;
    clonedMedia.versionIdObject = this.versionIdObject;
    clonedMedia.clipIdObject = this.clipIdObject;
    clonedMedia.episodeIdObject = this.episodeIdObject;
    clonedMedia.vpIdObject = this.vpIdObject;
    clonedMedia.name = this.name;
    clonedMedia.type = this.type;
    clonedMedia.playlist = this.playlist;
    clonedMedia.initiationType = this.initiationType;
    clonedMedia.adsEnabled = this.adsEnabled;
    clonedMedia.mediaPlayerVersion = this.mediaPlayerVersion;
    clonedMedia.mediaPlayerName = this.mediaPlayerName;
    clonedMedia.transportMode = this.transportMode;
    clonedMedia.nonPipsContentIdObject = this.nonPipsContentIdObject;
    clonedMedia.producerObject = this.producerObject;
    clonedMedia.bufferLength = this.bufferLength;
    clonedMedia.mediaSet = this.mediaSet;
    clonedMedia.supplier = this.supplier;
    clonedMedia.transferFormat = this.transferFormat;
    clonedMedia.length = this.length;

    clonedMedia.essEnrichedData = this.essEnrichedData;

    return clonedMedia;
  };

  // ** Object ID Setters ** //

  Media.prototype.isEmbedded = function() {
    return this._isEmbedded;
  };

  Media.prototype.setIsEmbedded = function(value) {
    this._isEmbedded = value;
    return this;
  };

  /**
   * @memberOf Media
   * @instance
   * @method setVersionId
   *
   * @description sets the value of the version id for the piece of media
   * @param {string} value The version id value
   * @returns {this} `this`
   */
  Media.prototype.setVersionId = function(value) {
    this.versionIdObject.setValue(value);
    return this;
  };

  Media.prototype.setBrandId = function(value) {
    this.brandIdObject.setValue(LabelCleanser.cleanLabelValue(LabelKeys.MEDIA_BRAND, value));
    return this;
  };

  Media.prototype.setSeriesId = function(value) {
    this.seriesIdObject.setValue(LabelCleanser.cleanLabelValue(LabelKeys.MEDIA_SERIES, value));
    return this;
  };

  /**
   * @memberOf Media
   * @instance
   * @method setClipId
   *
   * @description sets the value of the clip id for
   * the piece of media
   * @param {string} value The clip id value
   * @returns {this} `this`
   */
  Media.prototype.setClipId = function(value) {
    this.clipIdObject.setValue(value);
    return this;
  };

  /**
   * @memberOf Media
   * @instance
   * @method setServiceId
   *
   * @description sets the value of the service id for
   * the piece of media
   * @param {string} value The service id value
   * @returns {this} `this`
   */
  Media.prototype.setServiceId = function(value) {
    this.serviceIdObject.setValue(value);
    return this;
  };

  /**
   * @memberOf Media
   * @instance
   * @method setEpisodeId
   *
   * @description sets the value of the episode id for
   * the piece of media
   * @param {string} value The episode id value
   * @returns {this} `this`
   */
  Media.prototype.setEpisodeId = function(value) {
    this.episodeIdObject.setValue(value);
    return this;
  };

  /**
   * @memberOf Media
   * @instance
   * @method setVpId
   *
   * @description sets the value of the vp id for
   * the piece of media
   * @param {string} value The length of the media content (in ms)
   * @returns {this} `this`
   */
  Media.prototype.setVpId = function(value) {
    this.vpIdObject.setValue(value);
    return this;
  };

  /**
   * @memberOf Media
   * @instance
   * @method setNonPipsContentId
   *
   * @description sets the value of the non pips content id for
   * the piece of media
   * @param {string} value
   * @returns {this} `this`
   */
  Media.prototype.setNonPipsContentId = function(value) {
    this.nonPipsContentIdObject.setValue(LabelCleanser.cleanLabelValue(CSLabelKeys.MEDIA_NON_PIPS_CONTENT_ID, value));
    return this;
  };

  Media.prototype.getSupplier = function () {
    return this.supplier;
  };

  /**
   * Indicate the supplier of the media.
   * Calling this method is optional but products are advised to do so
   * if the information is available to improve analytics insights.
   *
   * @param {String} supplier The supplier of the media
   */
  Media.prototype.setSupplier = function (supplier) {
    if (supplier !== null) {
      var s = Utils.trim(supplier);
      if (s.length !== 0) {
        this.supplier = s;
      }
    }

    return this;
  };

  Media.prototype.getMediaSet = function () {
    return this.mediaSet;
  };

  /**
   * Indicate the mediaset of the media.
   * Calling this method is optional but products are advised to do so
   * if the information is available to improve analytics insights.
   *
   * @param {String} mediaSet The mediaset of the media
   */
  Media.prototype.setMediaSet = function (mediaSet) {
    if (mediaSet !== null) {
      var s = Utils.trim(mediaSet);
      if (s.length !== 0) {
        this.mediaSet = s;
      }
    }

    return this;
  };

  Media.prototype.getTransferFormat = function () {
    return this.transferFormat;
  };

  /**
   * Indicate the transfer format of the media.
   * Calling this method is optional but products are advised to do so
   * if the information is available to improve analytics insights.
   *
   * @param {String} transferFormat The transfer format of the media
   */
  Media.prototype.setTransferFormat = function (transferFormat) {
    if (transferFormat !== null) {
      var s = Utils.trim(transferFormat);
      if (s.length !== 0) {
        this.transferFormat = s;
      }
    }

    return this;
  };

  /**
   * @memberOf Media
   * @instance
   * @method isAdsEnabled
   *
   * @description Convenience helper method to determine if ads are enabled
   *
   * @returns {bool}
   */
  Media.prototype.isAdsEnabled = function() {
    return this.adsEnabled;
  };

  Media.prototype.setAdsEnabled = function(value) {
    this.adsEnabled = value;
    return this;
  };

  Media.prototype.getName = function () {
    return this.name;
  };

  Media.prototype.setName = function(value) {
    this.name = value;
    return this;
  };

  Media.prototype.getType = function () {
    return this.type;
  };

  Media.prototype.setType = function(value) {
    this.type = value;
    return this;
  };

  Media.prototype.getPlaylist = function () {
    return this.playlist;
  };

  Media.prototype.setPlaylist = function(value) {
    this.playlist = value;
    return this;
  };

  Media.prototype.getInitiationType = function () {
    return this.initiationType;
  };

  Media.prototype.setInitiationType = function(value) {
    this.initiationType = value;
    return this;
  };

  Media.prototype.getMediaPlayerName = function () {
    return this.mediaPlayerName;
  };

  Media.prototype.setMediaPlayerName = function(value) {
    this.mediaPlayerName = value;
    return this;
  };

  Media.prototype.getMediaPlayerVersion = function () {
    return this.mediaPlayerVersion;
  };

  Media.prototype.setMediaPlayerVersion = function(value) {
    this.mediaPlayerVersion = value;
    return this;
  };

  Media.prototype.getTransportMode = function () {
    return this.transportMode;
  };

  Media.prototype.setTransportMode = function(value) {
    this.transportMode = value;
    return this;
  };

  /**
   * @memberOf Media
   * @instance
   * @method getLength
   *
   * @returns {Number} The media length value
   */
  Media.prototype.getLength = function() {
    return this.length;
  };

  /**
   * @memberOf Media
   * @instance
   * @method setLength
   *
   * @description Set the length of the media. This attribute can also be set on
   * the EchoClient instance after calling `setMedia()` with the
   *`setMediaLength()` method.
   *
   * @param {Number} _length The length of the media content (in ms)
   * @returns {Media} `this`
   */
  Media.prototype.setLength = function(value) {

    if (value !== undefined && value !== null) {
      value = Math.floor(value);
    }

    if (value === undefined || isNaN(value) || !isFinite(value) || value < 0) {
      DEBUG.warn('Media: length must be an integer of 0 or greater. Echo will report as 0.');
      value = 0;
    }

    this.length = value;

    return this;
  };

  /**
   * @memberOf Media
   * @instance
   * @method getProducer
   *
   * @returns {string} The media producer
   */
  Media.prototype.getProducer = function() {
    return this.producerObject.getValue();
  };

  /**
   * @memberOf Media
   * @instance
   * @method producer
   *
   * @description sets the value of the Producer for the piece of media
   * @param {string} producerCode
   * @returns {this} `this`
   */
  Media.prototype.setProducer = function(producerCode) {
    var producerId;

    if (producerCode) {
      producerId = Producers.getId(producerCode);
    } else {
      // The producer ID should be set to 0 so that it is removed by ATI
      producerId = '0';
    }

    if (producerId) {
      this.producerObject.setValue(producerId);
    }

    return this;
  };

  /**
   * @memberOf Media
   * @instance
   * @method setProducerById
   *
   * @description sets the value of the Producer for the piece of media
   * @param {Number} producerId
   * @returns {this} `this`
   */
  Media.prototype.setProducerById = function(producerId) {
    if (producerId) {
      this.producerObject.setValue(producerId);
    }

    return this;
  };

  /**
   * @memberOf Media
   * @instance
   * @method getVersionIdObject
   *
   * @returns {MediaId} The VersionId object
   */
  Media.prototype.getVersionIdObject = function() {
    return this.versionIdObject;
  };

  /**
   * @memberOf Media
   * @instance
   * @method getClipIdObject
   *
   * @returns {MediaId} The ClipId object
   */
  Media.prototype.getClipIdObject = function() {
    return this.clipIdObject;
  };

  /**
   * @memberOf Media
   * @instance
   * @method getServiceIdObject
   *
   * @returns {MediaId} The ServiceId object
   */
  Media.prototype.getServiceIdObject = function() {

    return this.serviceIdObject;

  };

  /**
   * @memberOf Media
   * @instance
   * @method getEpisodeIdObject
   *
   * @returns {MediaId} The EpisodeId object
   */
  Media.prototype.getEpisodeIdObject = function() {
    return this.episodeIdObject;
  };

  /**
   * @memberOf Media
   * @instance
   * @method getVpIdObject
   *
   * @returns {MediaId} The VpId object
   */
  Media.prototype.getVpIdObject = function() {
    return this.vpIdObject;
  };

  /**
   * @memberOf Media
   * @instance
   * @method getNonPipsContentIdObject
   *
   * @returns {MediaId} The NonPipsContentId object
   */
  Media.prototype.getNonPipsContentIdObject = function() {
    return this.nonPipsContentIdObject;
  };

  Media.prototype.getBrandIdObject = function() {
    return this.brandIdObject;
  };

  Media.prototype.getBrandId = function() {
    return this.brandIdObject.getValue();
  };

  Media.prototype.getSeriesIdObject = function() {
    return this.seriesIdObject;
  };

  Media.prototype.getSeriesId = function() {
    return this.seriesIdObject.getValue();
  };

  /**
   * @memberOf Media
   * @instance
   * @method getVersionId
   *
   * @returns {string} The VersionId value
   */
  Media.prototype.getVersionId = function() {
    return this.versionIdObject.getValue();
  };

  /**
   * @memberOf Media
   * @instance
   * @method getClipId
   *
   * @returns {string} The ClipId value
   */
  Media.prototype.getClipId = function() {
    return this.clipIdObject.getValue();
  };

  /**
   * @memberOf Media
   * @instance
   * @method getServiceId
   *
   * @returns {string} The ServiceId value
   */
  Media.prototype.getServiceId = function() {
    return this.serviceIdObject.getValue();
  };

  /**
   * @memberOf Media
   * @instance
   * @method getEpisodeId
   *
   * @returns {string} The EpisodeId value
   */
  Media.prototype.getEpisodeId = function() {
    return this.episodeIdObject.getValue();
  };

  /**
   * @memberOf Media
   * @instance
   * @method getVpId
   *
   * @returns {string} The getVpId value
   */
  Media.prototype.getVpId = function() {
    return this.vpIdObject.getValue();
  };

  /**
   * @memberOf Media
   * @instance
   * @method getNonPipsContentId
   *
   * @returns {string} The getNonPipsContentId value
   */
  Media.prototype.getNonPipsContentId = function() {
    return this.nonPipsContentIdObject.getValue();
  };

  /**
   * @memberOf Media
   * @instance
   * @method getRetrievalType
   *
   * @returns {EchoRetrievalType} The retrieval type (Download or Stream)
   * or null if consumption mode is invalid
   */
  Media.prototype.getRetrievalType = function() {
    if (this.consumptionMode === null) {
      return null;
    } else {
      var retrievalType = (this.consumptionMode === CONSUMPTION_MODE.DOWNLOAD) ?
        Enums.RetrievalType.DOWNLOAD : Enums.RetrievalType.STREAM;

      return retrievalType;
    }
  };

  /**
   * @memberOf Media
   * @instance
   * @method isOnDemand
   *
   * @description Convenience helper method to determine
   * if media is onDemand
   *
   * @returns {bool}
   */
  Media.prototype.isOnDemand = function() {
    return this.consumptionMode === CONSUMPTION_MODE.ON_DEMAND;
  };

  /**
   * @memberOf Media
   * @instance
   * @method isDownload
   *
   * @description Convenience helper method to determine
   * if media is downloaded
   *
   * @returns {bool}
   */
  Media.prototype.isDownload = function() {
    return this.consumptionMode === CONSUMPTION_MODE.DOWNLOAD;
  };

  /**
   * @memberOf Media
   * @instance
   * @method isLive
   *
   * @description Convenience helper method to determine
   * if media is Live
   *
   * @returns {bool}
   */
  Media.prototype.isLive = function() {
    return this.consumptionMode === CONSUMPTION_MODE.LIVE;
  };

  /**
   * @memberOf Media
   * @instance
   * @method isVideo
   *
   * @description Convenience helper method to determine
   * if media is a video
   *
   * @returns {bool}
   */
  Media.prototype.isVideo = function() {
    return this.avType === Enums.AvType.VIDEO;
  };

  Media.prototype.getPlayerId = function() {
    return '1';
  };

  Media.prototype.setPlaying = function(isPlaying) {
    this._isPlaying = Boolean(isPlaying);

    return this;
  };

  Media.prototype.getPlaying = function() {
    return this._isPlaying;
  };

  Media.prototype.setBuffering = function(isBuffering) {
    this._isBuffering = Boolean(isBuffering);

    return this;
  };

  Media.prototype.getBuffering = function() {
    return this._isBuffering;
  };

  return Media;
}).call(exports, __webpack_require__, exports, module),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),

/***/ "./src/echo/meta.js":
/***/ (function(module, exports, __webpack_require__) {

/* Meta information about echo */
!(module.exports = {
  NAME: 'echo_js',
  VERSION: '12.3.0'
});


/***/ }),

/***/ "./src/echo/on-demand-broker.js":
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [
  __webpack_require__("./src/echo/playhead.js")
], __WEBPACK_AMD_DEFINE_RESULT__ = (function(Playhead) {

  'use strict';

  var UPDATE_INTERVAL = 1000;
  var POSITION_DRIFT_TOLERANCE = 1500;
  var CLOCK_JUMP_TOLERANCE = 1500;

  /**
   * @param {Object} playerDelegate
   * @constructor
   */
  function OnDemandBroker(playerDelegate, media, echoClient) {
    this._playerDelegate = playerDelegate;
    this._media = media;
    this._echoClient = echoClient;
    this._playhead = new Playhead();
    this._isStarted = false;
    this._interval = null;
    this._playerDelegatePosition = 0;
    this._playingTime = 0;
    this._currentIntervalMaxPosition = 0;
    this._hb3NotSentYet = true;
    this._hb5NotSentYet = true;
    this._previousPlayingTime = 0;
  }

  /**
   * Set the playhead.
   */
  OnDemandBroker.prototype.setPlayhead = function(playhead) {
    this._playhead = playhead;
  };

  /**
   * Start up the broker
   */
  OnDemandBroker.prototype.start = function() {

    var self = this;

    if (this._isStarted) {
      return;
    }

    this._interval = setInterval(function() {
      self._update();
    }, UPDATE_INTERVAL);

    this._isStarted = true;
    this._playhead.start();
  };

  /**
   * Stop the broker
   */
  OnDemandBroker.prototype.stop = function() {
    clearInterval(this._interval);
    this._playhead.stop();

    this._isStarted = false;
  };

  /**
   * Set the current position in ms.
   *
   * Should be called inside an EchoClient av Event that
   * accepts a position eg avPlay, avPause, avSeek etc.
   *
   * @param {Number} position
   */
  OnDemandBroker.prototype.setPosition = function(position) {
    if (
      (typeof position === 'number') &&
      position >= 0 &&
      !this.arePositionsWithinTolerance(this.getPosition(), position)
    ) {
      this._playerDelegatePosition = position;
      this._playingTime += this._playhead.getPosition();
      this._restartPlayhead();
      this._currentIntervalMaxPosition = position;
    }
  };

  /**
   * Get the maximum position sampled from the player delegate in
   * the current interval.
   *
   * @return {Number}
   */
  OnDemandBroker.prototype.getCurrentIntervalMaxPosition = function() {
    return this._currentIntervalMaxPosition;
  };

  /**
   * Check to see if the broadcast has changed based on the current player time.
   *
   * @private
   */
  OnDemandBroker.prototype._update = function() {
    var playerDelegatePosition = parseInt(this._playerDelegate.getPosition(), 10);
    var position = this.getPosition();
    var playingTime = this._playingTime + this._playhead.getPosition();
    var playingTimeDiff = Math.abs(playingTime - (this._previousPlayingTime || playingTime));
    this._previousPlayingTime = playingTime;

    if ((typeof playerDelegatePosition === 'number') &&
        playerDelegatePosition !== this._playerDelegatePosition &&
        playerDelegatePosition > 0
    ) {
      if (
        this._playerDelegatePosition === 0 ||
        !this.arePositionsWithinTolerance(
          playerDelegatePosition, position
        )
      ) {
        this._playerDelegatePosition = playerDelegatePosition;
        position = this._playerDelegatePosition;
        this._restartPlayhead();
      }
    }

    if (position > this._currentIntervalMaxPosition) {
      this._currentIntervalMaxPosition = position;
    }

    // send 3 second heartbeat
    if (playingTime >= 3000 && this._hb3NotSentYet && playingTimeDiff < CLOCK_JUMP_TOLERANCE) {
      this._echoClient.avUserActionEvent('echo_hb', 'echo_hb_3', position);
      this._hb3NotSentYet = false;
    }

    // send 5 second heartbeat
    if (playingTime >= 5000 && this._hb5NotSentYet && playingTimeDiff < CLOCK_JUMP_TOLERANCE) {
      this._echoClient.avUserActionEvent('echo_hb', 'echo_hb_5', position);
      this._hb5NotSentYet = false;
    }

    if (this._media.length > 0 && position >= this._media.length) {
      this._echoClient.avPauseEvent(this._media.length, {
        echo_pause_at_media_length: 1
      });
    }

  };

  /**
   * Convenience method for reseting and playing the playhead.
   *
   * @private
   */
  OnDemandBroker.prototype._restartPlayhead = function() {
    this._playhead.reset();
    this._playhead.start();
  };

  /**
   * Represents the true position a player is at within a piece of media.
   *
   * @returns {Number}
   */
  OnDemandBroker.prototype.getPosition = function() {
    var playheadPosition = this._playhead.getPosition();
    var position =  this._playerDelegatePosition + playheadPosition;
    return position;
  };

  /**
   * Represents the timestamp a player is at within a piece of media.
   *
   * @returns {Number}
   */
  OnDemandBroker.prototype.getTimestamp = function() {
    return 0;
  };

  /**
   * Are two positions within allowable tolerance
   *
   * @private
   */
  OnDemandBroker.prototype.arePositionsWithinTolerance = function(position1, position2) {
    var positionDelta = position1 - position2;
    return positionDelta >= -POSITION_DRIFT_TOLERANCE &&
      positionDelta <= POSITION_DRIFT_TOLERANCE;
  };

  return OnDemandBroker;

}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),

/***/ "./src/echo/playhead.js":
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_RESULT__ = (function() {

  'use strict';

  function Playhead() {
    this.reset();
  }

  /**
   * Start
   */
  Playhead.prototype.start = function() {

    if (this._isPlaying === true) {
      return;
    }

    this._isPlaying = true;
    this._startTime = this._getCurrentTime();
  };

  /**
   * Stop and reset the timer.
   */
  Playhead.prototype.reset = function() {

    this._isPlaying = false;
    this._position = 0;
    this._startTime = 0;
  };

  /**
   * Simulate a pause in time.
   */
  Playhead.prototype.stop = function() {

    if (!this._isPlaying) {
      return;
    }

    this._isPlaying = false;
    this._position += this._getCurrentTime() - this._startTime;
    this._startTime = 0;
  };

  /**
   * @returns {Number} the current position
   */
  Playhead.prototype.getPosition = function() {

    var position = this._position;

    if (this._isPlaying === true) {
      position += this._getCurrentTime() - this._startTime;
    }

    return position;
  };

  /**
   * Get the current unix epoch time.
   *
   * @returns {Number} the time in milliseconds
   * @private
   */
  Playhead.prototype._getCurrentTime = function() {

    // Date.now not available in IE <= 8
    if (!Date.now) {
      Date.now = function() {
        return (new Date()).getTime();
      };
    }

    return Date.now();
  };

  return Playhead;
}).call(exports, __webpack_require__, exports, module),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),

/***/ "./src/echo/schedule.js":
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__("./src/echo/util/methods.js"), __webpack_require__("./src/echo/util/debug.js"), __webpack_require__("./src/echo/enumerations.js")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(Utils, Debug, Enums) {

  'use strict';

  /**
   * Perform a lookup for the TV schedule for a specific service.
   *
   * @param {Media} media
   * @param {Environment} environment
   * @constructor
   */
  function Schedule(media, environment, echoClient) {

    this._schedule = [];
    this.serviceId = null;
    this._media = media;
    this._environment = environment;
    this._echoClient = echoClient;

    this._fetchData();
  }

  /**
   * Get the broadcast for the given timestamp.
   *
   * @param {Number} timestamp
   */
  Schedule.prototype.getBroadcast = function(timestamp) {

    var i;
    var item;

    for (i = 0; i < this._schedule.length; i++) {
      item = this._schedule[i].published_time;
      if ((timestamp < item.end) && (timestamp >= item.start)) {
        return this._schedule[i];
      }
    }
  };

  // static property to set the ESS host globally.
  Schedule.essHost = 'ess.api.bbci.co.uk';

  /**
   * @private
   */
  Schedule.prototype._fetchData = function() {

    var self = this;
    var executeCrossDomainGet;
    var protocol;
    executeCrossDomainGet = this._environment.getExecuteCrossDomainGet();
    protocol = this._environment.getProtocol();

    var url = protocol + Schedule.essHost.replace(/^(\/+)?/, '//') + '/schedules';

    if (!this._media) {
      return;
    }

    if (this._media.getServiceId()) {
      url += '?serviceId=' + encodeURIComponent(this._media.getServiceId());
    } else if (this._media.getVersionId()) {
      url += '?versionId=' + encodeURIComponent(this._media.getVersionId());
    } else if (this._media.getVpId()) {
      url += '?vpid=' + encodeURIComponent(this._media.getVpId());
    } else {
      Debug.info(
        'Unable to determine serviceId, versionId or VpId for schedule'
      );
      return;
    }

    executeCrossDomainGet(url, {
      onSuccess: function(data) {
        self._dataSuccessHandler(data);
      },
      onError: function(error, status) {
        var errorType = 'error';
        if (error === 'json') {
          errorType = 'json';
        } else if (typeof error === 'object' && error.type === 'timeout') {
          errorType = 'timeout';
        }

        self._dataErrorHandler(errorType, status);
      }
    });
  };

  /**
   * Indicates when the fetching of data has completed.
   *
   * @returns {Boolean}
   */
  Schedule.prototype.hasData = function() {
    return this._schedule.length > 0;
  };

  /**
   * @param {Object} data Json data string from ESS.
   * @private
   */
  Schedule.prototype._dataSuccessHandler = function(data) {

    var i;
    var items = [];
    var item;
    var start;
    var end;

    Debug.info('Cross-domain schedule request success.');

    if (data) {

      this._echoClient.setEssSuccess(true);

      this.serviceId = data.service.id;

      data.items = data.items || [];

      for (i = 0; i < data.items.length; i++) {
        start = data.items[i].published_time.start;
        end = data.items[i].published_time.end;

        item = data.items[i];
        item.published_time.start = (new Date(start)).getTime();
        item.published_time.end = (new Date(end)).getTime();
        items.push(item);
      }

      this._schedule = items;

    }
  };

  /**
   * @private
   */
  Schedule.prototype._dataErrorHandler = function(errorType, code) {
    this._schedule = [];
    Debug.error('There was a problem requesting the schedule from ESS: ' + errorType);

    this._echoClient.setEssSuccess(false);

    if (errorType === 'json') {
      this._echoClient.setEssError(Enums.EssError.JSON, code);
    } else if (errorType === 'timeout') {
      this._echoClient.setEssError(Enums.EssError.TIMEOUT, code);
    } else if (errorType === 'error' && code !== undefined) {
      this._echoClient.setEssError(Enums.EssError.STATUS_CODE, code);
    } else {
      this._echoClient.setEssError(Enums.EssError.RUNTIME, '0');
    }
  };

  return Schedule;
}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),

/***/ "./src/echo/util/cleansing/label-cleanser.js":
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_RESULT__ = (function(require) {
  'use strict';

  var Util = __webpack_require__("./src/echo/util/methods.js");
  var DEBUG = __webpack_require__("./src/echo/util/debug.js");
  var Enums = __webpack_require__("./src/echo/enumerations.js");
  var LabelRules = __webpack_require__("./src/echo/util/cleansing/label-rules.js");

  var strictLabels = [
    'player_name', 'ns_st_ws', 'bbc_site', 'app_type', 'app_name',
    'bbc_store_pf', 'bbc_store_ed', 'bbc_store_fr', 'bbc_store_src'
  ];

  var sensitiveParams = ['token', 'guardianToken', 'nonce', 'dateOfBirthDay', 'dateOfBirthMonth', 'dateOfBirthYear', 'dateOfBirth', 'permissionToken'];

  var labelRuleMap = {
    name: LabelRules.COUNTERNAME
  };

  labelRuleMap[Enums.ManagedLabels.EVENT_MASTER_BRAND] =
    LabelRules.EVENT_MASTER_BRAND;

  // Initialise rule map for later use
  for (var i = 0; i < strictLabels.length; i++) {
    labelRuleMap[strictLabels[i]] = LabelRules.STRICT;
  }

  function _lookupRule(key) {
    if (labelRuleMap.hasOwnProperty(key)) {
      return labelRuleMap[key];
    }

    return LabelRules.CUSTOM;
  }

  /**
   * Cleans the label using base (event mb/label key) rules
   * @param {string} item - The label key/value to clean
   * @returns {string} a cleaned label key/value
   */
  function _cleanBase(item) {
    return item && item
      .toLowerCase()
      .replace(/[^a-z0-9]+/g, '_') // Caret matches opposite
      .replace(/(^_+)|(_+$)/g, '');
  }

  /**
   * Cleans the key used for a particular label
   * @param {string} labelKey - The label key to clean
   * @returns {string} a cleaned label value
   */
  function cleanLabelKey(labelKey) {
    var newkey = _cleanBase(labelKey);

    Util.assert(labelKey === newkey,
      'Label key can only contain: [a-z0-9_], and no consecutive "_"s or ' +
      '"_" at the begining or end, got "' + labelKey +
      '". This will be sent as "' + newkey + '"', true);

    return newkey;
  }

  /**
   * Cleans the label using event master brand rules
   * @param {string} labelValue - The label value to clean
   * @returns {string} a cleaned label value
   */
  function _cleanEventMasterBrand(labelValue) {
    return _cleanBase(labelValue);
  }

  /**
   * Cleans the label using strict rules
   * @param {string} labelValue   - The label value to clean
   * @returns {string} a cleaned label value
   */
  function _cleanStrict(labelValue) {
    return labelValue && labelValue
      .toLowerCase()
      .replace(/(^\s+)|(\s+$)/g, '')
      .replace(/[^a-z0-9]+/g, '-') // Caret matches opposite
      .replace(/(^-+)|(-+$)/g, '');
  }

  /**
   * Cleans the label using custom rules
   * @param {string} labelValue   - The label value to clean
   * @returns {string} a cleaned label value
   */
  function _cleanCustom(labelValue) {
    return labelValue && labelValue
      .replace(/(^\s+)|(\s+$)/g, '')
      .replace(/\|/g, '!');
  }

  /**
   * Cleans the label using countername rules
   * @param {string} name - The countername to clean
   * @returns {string} a cleaned label value
   */
  function cleanCounterName(name) {
    var countername = name && name
      .toLowerCase()
      .replace(/[^a-z0-9\.]+/g, '_') // Caret matches opposite
      .replace(/\.+/g, '.')
      .replace(/(^_+)|(_+$)/g, '') || 'no.name.page';

    if (name !== countername) {
      if (
        name === null ||
        typeof name !== 'string' ||
        name.replace(/ */, '').length === 0
      ) {
        DEBUG.error('Countername must be a non-empty string');
      }

      // If there are dashes, print warning as it is actualy OK
      if (name && name.search(/-/) !== -1) {
        DEBUG.warn('Submitted countername ("' + name + '") contains at least ' +
          'one "-". Dashes are not permitted but, for legacy reasons, "-" ' +
          'and "_" are equivalent in DAx. Echo converts dashes to ' +
          'underscores, so the countername will be sent as "' +
          countername + '"');
      } else {
        DEBUG.warn('countername may only contain: [a-z0-9._], got "' +
          name + '". This will be cleaned up and sent as "' +
          countername + '"');
      }
    }

    // counternames must end in .page, silently add this
    if (countername.search(/\.page$/) === -1) {
      countername += '.page';
    }

    return countername;
  }

  /**
   * Helper method to determine rules and
   * clean label values based on set rules
   *
   * @param {string} labelKey   - The label key to help look up rules
   * @param {string} labelValue - The label value you need to clean
   * @returns {string} a cleaned label value
   */
  function cleanLabelValue(labelKey, labelValue) {
    var debugInfo = '';
    var newValue = labelValue;
    var cleanType = _lookupRule(labelKey);

    // Countername appends page
    if (cleanType === LabelRules.COUNTERNAME) {
      labelValue = cleanCounterName(labelValue);
    }

    if (typeof labelValue === 'number' || typeof labelValue === 'boolean') {
      return labelValue.toString();
    }

    // Block non-strings that don't co-erce to empty
    if (typeof labelValue !== 'string') {
      DEBUG.error('Label must have number, boolean or string value');
      return;
    }

    switch (cleanType) {
      case LabelRules.EVENT_MASTER_BRAND:
        debugInfo =  'Label value can only contain [0-9a-z], and ' +
          'no consecutive "_"s and no "_"s or whitespace at the start or end.';
        newValue = _cleanEventMasterBrand(labelValue);
        break;

      case LabelRules.STRICT:
        debugInfo = 'Strict Label values can only contain [ 0-9a-z-], and no ' +
          'consecutive "-"s and no "-"s or whitespace at the start or end.';
        newValue = _cleanStrict(labelValue);
        break;

      case LabelRules.NO_CLEANSING:
        break;

      default:
        debugInfo = 'Custom Label value cannot contain whitespace ' +
          'at start or end or pipes (|).';
        newValue = _cleanCustom(labelValue);
    }

    debugInfo += 'Got "' + labelValue + '", will be ' + 'replaced with "' + newValue + '"';
    Util.assert(labelValue === newValue, debugInfo, true);

    return newValue;
  }

  function cleanLanguage(value) { // Same as managed label except allows CAPS
    if (typeof value === 'number' || typeof value === 'boolean') {
      return value.toString();
    }

    var newVal = value && value
      .replace(/(^\s*)|(\s*$)/g, '')
      .replace(/[^0-9a-zA-Z._]+/g, '-')
      .replace(/(^-)|(-$)/g, '') || '';

    Util.assert(
      value === newVal,
      'Language label value can only contain [0-9a-zA-Z._-], and no ' +
      'consecutive "-"s and no - at the start or end. Got "' + value +
      '", will be replaced with "' + newVal + '"', true
    );

    return newVal;
  }

  /**
   * Cleans the string of any unauthorized characters by removing leading and trailing whitespace characters,
   * removing square brackets and replacing one or more consecutive whitespace characters with a single
   * underscore character.
   * @param {string} value
   * @returns {string} a cleaned label value
   */
  function cleanCustomVariable(value) {
    return value && value

      // Strip leading and trailing whitespace
      .trim()

      // Strip square brackets
      .replace(/\[|\]/g, '')

      // Replace & with $
      .replace(/&/g, '$')

      // Replace consecutive whitespace characters with a single space
      .replace(/\s{1,}/g, ' ');
  }

  function cleanLabels(labels) {
    var newLabels = {};
    var newKey;

    for (var key in labels) {
      newKey = cleanLabelKey(key);
      newLabels[newKey] = cleanLabelValue(newKey, labels[key]);
    }

    return newLabels;
  }

  /**
   * Removes potentially senstive information from URL parameters in a custom variable.
   * Must be called before cleanCustomVariable.
   * @param {string} value
   * @returns {string} a string with any sensitive url params obfuscated
   */
  function removeSensitiveInfo(value) {
    if (value && typeof value === 'string') {
      for (i = 0; i < sensitiveParams.length; i++) {
        var regex = new RegExp(sensitiveParams[i] + '=[^\&]*', 'g');
        value = value.replace(regex, sensitiveParams[i] + '=XXXX');
      }
    }

    return value;
  }

  return {
    cleanCounterName: cleanCounterName,
    cleanLabelKey: cleanLabelKey,
    cleanLabelValue: cleanLabelValue,
    cleanLanguage: cleanLanguage,
    cleanLabels: cleanLabels,
    cleanCustomVariable: cleanCustomVariable,
    removeSensitiveInfo: removeSensitiveInfo
  };
}).call(exports, __webpack_require__, exports, module),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),

/***/ "./src/echo/util/cleansing/label-rules.js":
/***/ (function(module, exports, __webpack_require__) {

!(module.exports = {
  STRICT: 'strict',
  COUNTERNAME: 'countername',
  EVENT_MASTER_BRAND: 'event_master_brand',
  NO_CLEANSING: 'no_cleansing',
  CUSTOM: 'custom'
});


/***/ }),

/***/ "./src/echo/util/cleansing/label-validator.js":
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_RESULT__ = (function(require) {
  'use strict';

  var Enums = __webpack_require__("./src/echo/enumerations.js");
  var Utils = __webpack_require__("./src/echo/util/methods.js");

  function isValidManagedLabel(label, value) {
    // validate store labels
    switch (label) {
      case Enums.ManagedLabels.IPLAYER_STATE:
        if (value !== 'purchased' && value !== 'free') {
          return false;
        }

        break;

      case Enums.ManagedLabels.STORE_ED_TYPE:
        if (value !== 'archive' && value !== 'standard') {
          return false;
        }

        break;

      case Enums.ManagedLabels.IPLAYER_AVAIL:
        if (value !== 'avail' && value !== 'unavail' && value !== 'soon') {
          return false;
        }

        break;

      case Enums.ManagedLabels.STORE_REFERRAL:
        if (value !== 'iplayer' && value !== 'store') {
          return false;
        }

        break;

      case Enums.ManagedLabels.BBC_HASHED_ID:
        if (typeof value !== 'string' || Utils.trim(value).length === 0) {
          return false;
        }

        break;
    }

    return true;
  }

  return {
    isValidManagedLabel: isValidManagedLabel
  };
}).call(exports, __webpack_require__, exports, module),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),

/***/ "./src/echo/util/cookies.js":
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_RESULT__ = (function() {
  'use strict';

  /**
   * CookiesModule is a helper module to obtain cookie values from the
   * stored cookie string on the window.document
   *
   * @type {{getCookieValueByName: getCookieValueByName}}
   */
  var CookiesModule = {

    /**
     *
     * @function getCookieValueByName
     * @description - helper function to get the cookie
     * value from the Browser's cookies
     *
     * name - name of cookie you require the value off
     * _window - Browser Window (optional parameter)
     * @returns {string} - The cookie value requested or
     * null if does not exist
     */
    getCookieValueByName: function(name, _window) {
      var win = _window || window;
      var cookieName = name + '=';
      var document = win.document;
      var cookiesArray = {};

      if (typeof document === 'undefined' || typeof document.cookie !== 'string') {
        return null;
      } else {
        cookiesArray = document.cookie.split(';');
      }

      for (var i = 0, length = cookiesArray.length; i < length; i++) {
        var cookie = cookiesArray[i];

        if (cookie.charAt(0) === ' ') {
          cookie = cookie.substring(1, cookie.length);
        }

        if (cookie.indexOf(cookieName) === 0) {
          return cookie.substring(cookieName.length, cookie.length);
        }
      }

      return null;
    }
  };

  return CookiesModule;
}).call(exports, __webpack_require__, exports, module),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),

/***/ "./src/echo/util/debug.js":
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_RESULT__;/**
 * Simply wraps and 'console.x' method into a module
 * this way any 'console' functionality can be used without
 * worrying about cases where the 'console' object is undefined
 */

/**
 * Module used to print debug/error statements to the console.
 * Exports a method "enable"
 * @exports Echo/Debug
 * @example
 * Echo.Debug.enable();
 */
!(__WEBPACK_AMD_DEFINE_RESULT__ = (function(require) { // jshint ignore:line
  'use strict';
  var ENABLED = false; // Is DEBUG enabled?

  /**
   * Returns a function calling the console
   * method sent as a argument. Passes any arguments
   * from the final calling method onto the console.
   */
  function callConsole(method, message) {
    if (typeof console === 'object' && typeof console[method] === 'function') {
      console[method](message);
    }

  }

  /**
   * Enable debug mode. Calling this method will result in errors
   * encountered by Echo (due to bad config/use) to be printed
   * to the console. The default behaviour is to silently fail.
   */
  function enable() {
    ENABLED = true;
  }

  function disable() {
    ENABLED = false;
  }

  function getState() {
    return ENABLED;
  }

  function info(message) {
    if (ENABLED) {
      callConsole('log', message);
    }
  }

  function error(message) {
    if (ENABLED) {
      throw new Error('ECHO_DEBUG: ' + message);
    }
  }

  // Map warn to info to keep backward compatibility
  return {
    enable: enable,
    disable: disable,
    getState: getState,
    info: info,
    warn: info,
    error: error
  };
}).call(exports, __webpack_require__, exports, module),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),

/***/ "./src/echo/util/library-info.js":
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_RESULT__ = (function(require) {
  'use strict';

  var packageJson = __webpack_require__("./package.json");

  var LIBRARY_VERSION = packageJson.version;
  var LIRBARY_NAME = 'echo_js';

  var libraryInfo = {

    getLibraryName: function() {
      return LIRBARY_NAME;
    },

    getLibraryVersion: function() {
      return LIBRARY_VERSION;
    }
  };

  return libraryInfo;
}).call(exports, __webpack_require__, exports, module),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),

/***/ "./src/echo/util/methods.js":
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_RESULT__ = (function(require) {
  'use strict';

  var DEBUG = __webpack_require__("./src/echo/util/debug.js");

  // Just copy an object
  function clone(obj) {
    var ret = {};

    for (var p in obj) {
      try {
        if (obj[p].constructor === Object) {
          ret[p] = clone(obj[p]);
        } else {
          ret[p] = obj[p];
        }
      } catch (e) {
        ret[p] = obj[p];
      }
    }

    return ret;
  }

  function combineObjects(obj1, obj2, noclone) {
    var base = noclone ? obj1 : clone(obj1);
    for (var p in obj2) {
      try {
        if (obj2[p].constructor === Object) {
          base[p] = combineObjects(base[p], obj2[p]);
        } else {
          base[p] = obj2[p];
        }
      } catch (e) {
        base[p] = obj2[p];
      }
    }

    return base;
  }

  function containsValue(obj, val) {
    for (var prop in obj) {
      if (obj.hasOwnProperty(prop) && obj[prop] === val) {
        return true;
      }
    }

    return false;
  }

  function extend(obj, fresh) {
    // If fresh, clone it dont alter it
    var o = (fresh ? clone(obj) : obj) || {};
    var args = arguments;

    for (var i = 2, t = args.length; i < t; i++) {
      if (typeof args[i] === 'object') {
        combineObjects(o, args[i], true);
      } else {
        o[args[i]] = args[++i];
      }
    }

    return o;
  }

  function addKV(obj, a, b) {
    if (b) {
      return extend(obj, true, a, b);
    } else {
      return extend(obj, true, a);
    }
  }

  /**
   * Checks a condition and DEBUGs an error
   * if it fails. returns the result
   */
  function assert(test, message, warn) {
    if (!test) {
      if (warn) {
        DEBUG.warn('AssertionFailed: ' + message);
      } else {
        DEBUG.error('AssertionFailed: ' + message);
      }
    }

    return test;
  }

  /**
   * Checks that an object contains a value and DEBUGs
   * an error if not. Returns the result
   */
  function assertContainsValue(object, value, message) {
    return assert(containsValue(object, value), message);
  }

  /**
   * Use native trim() if supported, else use regexp
   * String.trim() was added in ECMAScript 5.1 and is not available in older browsers (e.g. IE8)
   */

  function trim(value) {
    if (typeof value === 'string') {
      if (String.prototype.trim) {
        value = value.trim();
      } else {
        value = value.replace(/^\s+|\s+$/g, '');
      }

      return value;
    }
  }

  return {
    clone: clone,
    combineObjects: combineObjects,
    addKV: addKV,
    containsValue: containsValue,
    extend: extend,
    assert: assert,
    assertContainsValue: assertContainsValue,
    trim: trim
  };
}).call(exports, __webpack_require__, exports, module),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),

/***/ "./src/echo/util/networking.js":
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_RESULT__ = (function() {

  'use strict';

  var xhrTimeout = 10000;

  /**
   * Perform a http get
   *
   * @param {String} url
   * @param {Function} onSuccess
   * @param {Function} onError
   */
  function httpGet(url, onSuccess, onError) {
    var img = new Image();
    img.onload = onSuccess;
    img.onerror = onError;
    img.src = url;
  }

  /**
   * Perform a cross domain http get (CORS only).
   *
   * @param {String} url
   * @param {Object} callbacks Object containing callbacks
   * @param {Function} [callbacks.onSuccess] Will be called with the
   * decoded JSON object if the call is successful.
   * @param {Function} [callbacks.onError] Will be called with error text,
   * and HTTP status for CORS requests, if the calls fails.
   */
  function executeCrossDomainGet(url, callbacks) {
    var xhr;
    var isAbort;
    var deviceSupportsCrossDomainGetAndJsonParse;
    isAbort = false;
    deviceSupportsCrossDomainGetAndJsonParse = false;

    var abort = function() {
      isAbort = true;
      xhr.onload = xhr.onerror  = xhr.onreadystatechange = null;
      xhr.abort();
    };

    var onError = function(error, status) {
      if (callbacks.onError) {
        callbacks.onError(error, status);
      }
    };

    var handleFirefoxAccessException = function(firefoxAccessException) {
      if (!isAbort) {
        onError(firefoxAccessException);
      }
    };

    var handleResponse = function() {
      var responseData;
      if (callbacks.onSuccess) {
        try {
          responseData = window.JSON.parse(xhr.responseText);
        } catch (error) {
          onError('json');
        }

        if (typeof responseData === 'object') {
          setTimeout(function() {
            callbacks.onSuccess(responseData);
          });
        }
      }
    };

    if (
      window.JSON && window.JSON.parse &&
      typeof window.XMLHttpRequest !== 'undefined'
    ) {
      xhr = new XMLHttpRequest();
      if ('withCredentials' in xhr) {
        deviceSupportsCrossDomainGetAndJsonParse = true;
      }
    }

    if (!deviceSupportsCrossDomainGetAndJsonParse) {
      onError();
      return;
    }

    try {
      xhr.open('GET', url, true);
      xhr.onload = function() {
        if (
          (
            typeof xhr.status === 'undefined' ||
            xhr.status < 400
          ) && xhr.responseText !== null
        ) {
          handleResponse();
        } else {
          onError(xhr.responseText, xhr.status);
        }
      };

      xhr.onerror = function(error) {
        onError(error);
      };

      xhr.timeout = xhrTimeout;
      xhr.ontimeout = function(error) {
        onError(error);
      };

    } catch (firefoxAccessException) {
      handleFirefoxAccessException(firefoxAccessException);
    }

    try {
      xhr.send(null);
    } catch (error) {
      abort();
      onError(error);
    }
  }

  return {
    httpGet: httpGet,
    executeCrossDomainGet: executeCrossDomainGet
  };

}).call(exports, __webpack_require__, exports, module),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),

/***/ 0:
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__("./src/echo.js");


/***/ })

/******/ });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZWNoby5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL2VjaG9fanMvd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovL2VjaG9fanMvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vZWNob19qcy8uL2xpYi9hdGkvYW1kLnNtYXJ0dGFnLTUuMTcuMS5taW4uanMiLCJ3ZWJwYWNrOi8vZWNob19qcy8uL2xpYi9jb21zY29yZS9hbWQuc3RyZWFtc2Vuc2UtNi4yLjMuMTgwMzI4Lm1pbi5qcyIsIndlYnBhY2s6Ly9lY2hvX2pzLy4vbGliL3NwcmluZy9hbWQuc3ByaW5nc3RyZWFtcy0yLjAuMC5iZWF1dHkuanMiLCJ3ZWJwYWNrOi8vZWNob19qcy8uL25vZGVfbW9kdWxlcy9lczYtcHJvbWlzZS9kaXN0L2VzNi1wcm9taXNlLmpzIiwid2VicGFjazovL2VjaG9fanMvLi9ub2RlX21vZHVsZXMvcHJvY2Vzcy9icm93c2VyLmpzIiwid2VicGFjazovL2VjaG9fanMvLi9ub2RlX21vZHVsZXMvc3NjLWpzL3NyYy9zc2NfaGVscGVyLmpzIiwid2VicGFjazovL2VjaG9fanMvKHdlYnBhY2spL2J1aWxkaW4vZ2xvYmFsLmpzIiwid2VicGFjazovL2VjaG9fanMvLi9zcmMvZWNoby5qcyIsIndlYnBhY2s6Ly9lY2hvX2pzLy4vc3JjL2VjaG8vYm9vdHN0cmFwLmpzIiwid2VicGFjazovL2VjaG9fanMvLi9zcmMvZWNoby9jbGllbnQuanMiLCJ3ZWJwYWNrOi8vZWNob19qcy8uL3NyYy9lY2hvL2NvbmZpZy9kZXN0aW5hdGlvbnMuanMiLCJ3ZWJwYWNrOi8vZWNob19qcy8uL3NyYy9lY2hvL2NvbmZpZy9nZW5lcmF0b3IuanMiLCJ3ZWJwYWNrOi8vZWNob19qcy8uL3NyYy9lY2hvL2NvbmZpZy9rZXlzLmpzIiwid2VicGFjazovL2VjaG9fanMvLi9zcmMvZWNoby9jb25maWcvcHJvZHVjZXJzLmpzIiwid2VicGFjazovL2VjaG9fanMvLi9zcmMvZWNoby9kZWxlZ2F0ZS9hdGkvYXRpLWRlbGVnYXRlLmpzIiwid2VicGFjazovL2VjaG9fanMvLi9zcmMvZWNoby9kZWxlZ2F0ZS9hdGkvY3VzdG9tLWV2ZW50LmpzIiwid2VicGFjazovL2VjaG9fanMvLi9zcmMvZWNoby9kZWxlZ2F0ZS9hdGkvY3VzdG9tLXZhcmlhYmxlcy5qcyIsIndlYnBhY2s6Ly9lY2hvX2pzLy4vc3JjL2VjaG8vZGVsZWdhdGUvYXRpL2xhYmVsLWtleXMuanMiLCJ3ZWJwYWNrOi8vZWNob19qcy8uL3NyYy9lY2hvL2RlbGVnYXRlL2F0aS9tZWRpYS1ldmVudC5qcyIsIndlYnBhY2s6Ly9lY2hvX2pzLy4vc3JjL2VjaG8vZGVsZWdhdGUvYXRpL21lZGlhLXRoZW1lcy5qcyIsIndlYnBhY2s6Ly9lY2hvX2pzLy4vc3JjL2VjaG8vZGVsZWdhdGUvYXRpL29yYml0LXZhcmlhYmxlcy5qcyIsIndlYnBhY2s6Ly9lY2hvX2pzLy4vc3JjL2VjaG8vZGVsZWdhdGUvYXRpL3VzZXItYWN0aW9uLWV2ZW50LmpzIiwid2VicGFjazovL2VjaG9fanMvLi9zcmMvZWNoby9kZWxlZ2F0ZS9jb21zY29yZS9hcHAtdGFnLmpzIiwid2VicGFjazovL2VjaG9fanMvLi9zcmMvZWNoby9kZWxlZ2F0ZS9jb21zY29yZS9jb21zY29yZS1kZWxlZ2F0ZS5qcyIsIndlYnBhY2s6Ly9lY2hvX2pzLy4vc3JjL2VjaG8vZGVsZWdhdGUvY29tc2NvcmUvbGFiZWwta2V5cy5qcyIsIndlYnBhY2s6Ly9lY2hvX2pzLy4vc3JjL2VjaG8vZGVsZWdhdGUvY29tc2NvcmUvcGxheWVyLXN0YXRlLmpzIiwid2VicGFjazovL2VjaG9fanMvLi9zcmMvZWNoby9kZWxlZ2F0ZS9zcHJpbmcvbGFiZWwta2V5cy5qcyIsIndlYnBhY2s6Ly9lY2hvX2pzLy4vc3JjL2VjaG8vZGVsZWdhdGUvc3ByaW5nL3BhZ2UtY29udGV4dC5qcyIsIndlYnBhY2s6Ly9lY2hvX2pzLy4vc3JjL2VjaG8vZGVsZWdhdGUvc3ByaW5nL3NwcmluZy1kZWxlZ2F0ZS5qcyIsIndlYnBhY2s6Ly9lY2hvX2pzLy4vc3JjL2VjaG8vZW51bWVyYXRpb25zLmpzIiwid2VicGFjazovL2VjaG9fanMvLi9zcmMvZWNoby9lbnZpcm9ubWVudC5qcyIsIndlYnBhY2s6Ly9lY2hvX2pzLy4vc3JjL2VjaG8vbGl2ZS1icm9rZXIuanMiLCJ3ZWJwYWNrOi8vZWNob19qcy8uL3NyYy9lY2hvL21lZGlhLWlkLmpzIiwid2VicGFjazovL2VjaG9fanMvLi9zcmMvZWNoby9tZWRpYS5qcyIsIndlYnBhY2s6Ly9lY2hvX2pzLy4vc3JjL2VjaG8vbWV0YS5qcyIsIndlYnBhY2s6Ly9lY2hvX2pzLy4vc3JjL2VjaG8vb24tZGVtYW5kLWJyb2tlci5qcyIsIndlYnBhY2s6Ly9lY2hvX2pzLy4vc3JjL2VjaG8vcGxheWhlYWQuanMiLCJ3ZWJwYWNrOi8vZWNob19qcy8uL3NyYy9lY2hvL3NjaGVkdWxlLmpzIiwid2VicGFjazovL2VjaG9fanMvLi9zcmMvZWNoby91dGlsL2NsZWFuc2luZy9sYWJlbC1jbGVhbnNlci5qcyIsIndlYnBhY2s6Ly9lY2hvX2pzLy4vc3JjL2VjaG8vdXRpbC9jbGVhbnNpbmcvbGFiZWwtcnVsZXMuanMiLCJ3ZWJwYWNrOi8vZWNob19qcy8uL3NyYy9lY2hvL3V0aWwvY2xlYW5zaW5nL2xhYmVsLXZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9lY2hvX2pzLy4vc3JjL2VjaG8vdXRpbC9jb29raWVzLmpzIiwid2VicGFjazovL2VjaG9fanMvLi9zcmMvZWNoby91dGlsL2RlYnVnLmpzIiwid2VicGFjazovL2VjaG9fanMvLi9zcmMvZWNoby91dGlsL2xpYnJhcnktaW5mby5qcyIsIndlYnBhY2s6Ly9lY2hvX2pzLy4vc3JjL2VjaG8vdXRpbC9tZXRob2RzLmpzIiwid2VicGFjazovL2VjaG9fanMvLi9zcmMvZWNoby91dGlsL25ldHdvcmtpbmcuanMiXSwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW10sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wiZWNob19qc1wiXSA9IGZhY3RvcnkoKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJlY2hvX2pzXCJdID0gZmFjdG9yeSgpO1xufSkod2luZG93LCBmdW5jdGlvbigpIHtcbnJldHVybiAiLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCIvKiogU1RBUlQgQkJDIEFERElUSU9OICoqL1xuZGVmaW5lKCBmdW5jdGlvbigpe1xuLyoqIEVORCBCQkMgQURESVRJT04gKiovXG5cbjsoZnVuY3Rpb24oKXt2YXIgZGZsdFBsdWdpbkNmZz17XCJzb3VyY2VGaWxlXCI6XCJkb3dubG9hZFwiLFwiaW5mb1wiOnRydWV9O3ZhciBkZmx0R2xvYmFsQ2ZnPXtcInNpdGVcIjo1OTYwNjgsXCJsb2dcIjpcIlwiLFwibG9nU1NMXCI6XCJcIixcImRvbWFpblwiOlwiYXRpLWhvc3QubmV0XCIsXCJjb2xsZWN0RG9tYWluXCI6XCJsb2d3MzYzLmF0aS1ob3N0Lm5ldFwiLFwiY29sbGVjdERvbWFpblNTTFwiOlwibG9nd3MxMzYzLmF0aS1ob3N0Lm5ldFwiLFwic2VjdXJlXCI6dHJ1ZSxcInBpeGVsUGF0aFwiOlwiL2hpdC54aXRpXCIsXCJkaXNhYmxlQ29va2llXCI6ZmFsc2UsXCJkaXNhYmxlU3RvcmFnZVwiOmZhbHNlLFwiY29va2llU2VjdXJlXCI6ZmFsc2UsXCJjb29raWVEb21haW5cIjpcIlwiLFwicHJldmlld1wiOmZhbHNlLFwicGxnc1wiOltcIkNhbXBhaWduc1wiLFwiQ2xpY2tzXCIsXCJDbGllbnRTaWRlVXNlcklkXCIsXCJDb250ZXh0VmFyaWFibGVzXCIsXCJPZmZsaW5lXCIsXCJPblNpdGVBZHNcIixcIlBhZ2VcIixcIlJpY2hNZWRpYVwiXSxcImxhenlMb2FkaW5nUGF0aFwiOlwiXCIsXCJkb2N1bWVudExldmVsXCI6XCJkb2N1bWVudFwiLFwicmVkaXJlY3RcIjpmYWxzZSxcImFjdGl2YXRlQ2FsbGJhY2tzXCI6dHJ1ZSxcIm1lZGl1bVwiOlwiXCIsXCJpZ25vcmVFbXB0eUNoYXB0ZXJWYWx1ZVwiOnRydWUsXCJiYXNlNjRTdG9yYWdlXCI6ZmFsc2UsXCJzZW5kSGl0V2hlbk9wdE91dFwiOnRydWV9OyhmdW5jdGlvbihhKXthLkVjaG8xMjAwQVRJbnRlcm5ldD1hLkVjaG8xMjAwQVRJbnRlcm5ldHx8e307YS5FY2hvMTIwMEFUSW50ZXJuZXQuVHJhY2tlcj1hLkVjaG8xMjAwQVRJbnRlcm5ldC5UcmFja2VyfHx7fTthLkVjaG8xMjAwQVRJbnRlcm5ldC5UcmFja2VyLlBsdWdpbnM9YS5FY2hvMTIwMEFUSW50ZXJuZXQuVHJhY2tlci5QbHVnaW5zfHx7fX0pKHdpbmRvdyk7XG52YXIgVXRpbHM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKHEpe3ZhciBjPXR5cGVvZiBxO2lmKFwib2JqZWN0XCIhPT1jfHxudWxsPT09cSlyZXR1cm5cInN0cmluZ1wiPT09YyYmKHE9J1wiJytxKydcIicpLFN0cmluZyhxKTt2YXIgZixiLGg9W10scz1xJiZxLmNvbnN0cnVjdG9yPT09QXJyYXk7Zm9yKGYgaW4gcSlxLmhhc093blByb3BlcnR5KGYpJiYoYj1xW2ZdLGM9dHlwZW9mIGIsXCJmdW5jdGlvblwiIT09YyYmXCJ1bmRlZmluZWRcIiE9PWMmJihcInN0cmluZ1wiPT09Yz9iPSdcIicrYi5yZXBsYWNlKC9bXlxcXFxdXCIvZywnXFxcXFwiJykrJ1wiJzpcIm9iamVjdFwiPT09YyYmbnVsbCE9PWImJihiPWEoYikpLGgucHVzaCgocz9cIlwiOidcIicrZisnXCI6JykrU3RyaW5nKGIpKSkpO3JldHVybihzP1wiW1wiOlwie1wiKStTdHJpbmcoaCkrKHM/XCJdXCI6XCJ9XCIpfWZ1bmN0aW9uIGsoYSl7cmV0dXJuIG51bGw9PT1hP1wiXCI6KGErXCJcIikucmVwbGFjZShuLFwiXCIpfWZ1bmN0aW9uIGwoYSl7dmFyIGMsZj1udWxsO3JldHVybihhPWsoYStcIlwiKSkmJlxuIWsoYS5yZXBsYWNlKGUsZnVuY3Rpb24oYSxoLHEscil7YyYmaCYmKGY9MCk7aWYoMD09PWYpcmV0dXJuIGE7Yz1xfHxoO2YrPSFyLSFxO3JldHVyblwiXCJ9KSk/RnVuY3Rpb24oXCJyZXR1cm4gXCIrYSkoKTpudWxsfXZhciBkPXRoaXMsZT0vKCwpfChcXFt8eyl8KH18XSl8XCIoPzpbXlwiXFxcXFxcclxcbl18XFxcXFtcIlxcXFxcXC9iZm5ydF18XFxcXHVbXFxkYS1mQS1GXXs0fSkqXCJcXHMqOj98dHJ1ZXxmYWxzZXxudWxsfC0/KD8hMFxcZClcXGQrKD86XFwuXFxkK3wpKD86W2VFXVsrLV0/XFxkK3wpL2csbj1SZWdFeHAoXCJeW1xcXFx4MjBcXFxcdFxcXFxyXFxcXG5cXFxcZl0rfCgoPzpefFteXFxcXFxcXFxdKSg/OlxcXFxcXFxcLikqKVtcXFxceDIwXFxcXHRcXFxcclxcXFxuXFxcXGZdKyRcIixcImdcIik7ZC5pc0xvY2FsU3RvcmFnZUF2YWlsYWJsZT1mdW5jdGlvbigpe3RyeXt2YXIgYT1sb2NhbFN0b3JhZ2U7YS5zZXRJdGVtKFwiX19zdG9yYWdlX3Rlc3RfX1wiLFwiX19zdG9yYWdlX3Rlc3RfX1wiKTthLnJlbW92ZUl0ZW0oXCJfX3N0b3JhZ2VfdGVzdF9fXCIpO3JldHVybiEwfWNhdGNoKGMpe3JldHVybiExfX07XG5kLkJhc2U2ND17X2tleVN0cjpcIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89XCIsZW5jb2RlOmZ1bmN0aW9uKGEpe3ZhciBjPVwiXCIsZixiLGgscyxyLGUsZz0wO2ZvcihhPWQuQmFzZTY0Ll91dGY4X2VuY29kZShhKTtnPGEubGVuZ3RoOylmPWEuY2hhckNvZGVBdChnKyspLGI9YS5jaGFyQ29kZUF0KGcrKyksaD1hLmNoYXJDb2RlQXQoZysrKSxzPWY+PjIsZj0oZiYzKTw8NHxiPj40LHI9KGImMTUpPDwyfGg+PjYsZT1oJjYzLGlzTmFOKGIpP3I9ZT02NDppc05hTihoKSYmKGU9NjQpLGM9Yyt0aGlzLl9rZXlTdHIuY2hhckF0KHMpK3RoaXMuX2tleVN0ci5jaGFyQXQoZikrdGhpcy5fa2V5U3RyLmNoYXJBdChyKSt0aGlzLl9rZXlTdHIuY2hhckF0KGUpO3JldHVybiBjfSxkZWNvZGU6ZnVuY3Rpb24oYSl7dmFyIGM9XCJcIixmLGIsaCxlLHIsZz0wO2ZvcihhPWEucmVwbGFjZSgvW15BLVphLXowLTlcXCtcXC9cXD1dL2csXCJcIik7ZzxcbmEubGVuZ3RoOylmPXRoaXMuX2tleVN0ci5pbmRleE9mKGEuY2hhckF0KGcrKykpLGI9dGhpcy5fa2V5U3RyLmluZGV4T2YoYS5jaGFyQXQoZysrKSksZT10aGlzLl9rZXlTdHIuaW5kZXhPZihhLmNoYXJBdChnKyspKSxyPXRoaXMuX2tleVN0ci5pbmRleE9mKGEuY2hhckF0KGcrKykpLGY9Zjw8MnxiPj40LGI9KGImMTUpPDw0fGU+PjIsaD0oZSYzKTw8NnxyLGMrPVN0cmluZy5mcm9tQ2hhckNvZGUoZiksNjQhPWUmJihjKz1TdHJpbmcuZnJvbUNoYXJDb2RlKGIpKSw2NCE9ciYmKGMrPVN0cmluZy5mcm9tQ2hhckNvZGUoaCkpO3JldHVybiBjPWQuQmFzZTY0Ll91dGY4X2RlY29kZShjKX0sX3V0ZjhfZW5jb2RlOmZ1bmN0aW9uKGEpe2E9YS5yZXBsYWNlKC9cXHJcXG4vZyxcIlxcblwiKTtmb3IodmFyIGM9XCJcIixmPTA7ZjxhLmxlbmd0aDtmKyspe3ZhciBiPWEuY2hhckNvZGVBdChmKTsxMjg+Yj9jKz1TdHJpbmcuZnJvbUNoYXJDb2RlKGIpOigxMjc8YiYmMjA0OD5iP2MrPVN0cmluZy5mcm9tQ2hhckNvZGUoYj4+XG42fDE5Mik6KGMrPVN0cmluZy5mcm9tQ2hhckNvZGUoYj4+MTJ8MjI0KSxjKz1TdHJpbmcuZnJvbUNoYXJDb2RlKGI+PjYmNjN8MTI4KSksYys9U3RyaW5nLmZyb21DaGFyQ29kZShiJjYzfDEyOCkpfXJldHVybiBjfSxfdXRmOF9kZWNvZGU6ZnVuY3Rpb24oYSl7Zm9yKHZhciBjPVwiXCIsZj0wLGIsaCxlO2Y8YS5sZW5ndGg7KWI9YS5jaGFyQ29kZUF0KGYpLDEyOD5iPyhjKz1TdHJpbmcuZnJvbUNoYXJDb2RlKGIpLGYrKyk6MTkxPGImJjIyND5iPyhoPWEuY2hhckNvZGVBdChmKzEpLGMrPVN0cmluZy5mcm9tQ2hhckNvZGUoKGImMzEpPDw2fGgmNjMpLGYrPTIpOihoPWEuY2hhckNvZGVBdChmKzEpLGU9YS5jaGFyQ29kZUF0KGYrMiksYys9U3RyaW5nLmZyb21DaGFyQ29kZSgoYiYxNSk8PDEyfChoJjYzKTw8NnxlJjYzKSxmKz0zKTtyZXR1cm4gY319O2QubG9hZFNjcmlwdD1mdW5jdGlvbihhLGMpe3ZhciBmO2M9Y3x8ZnVuY3Rpb24oKXt9O2Y9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtcbmYudHlwZT1cInRleHQvamF2YXNjcmlwdFwiO2Yuc3JjPWEudXJsO2YuYXN5bmM9ITE7Zi5kZWZlcj0hMTtmLm9ubG9hZD1mLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbihhKXthPWF8fHdpbmRvdy5ldmVudDtpZihcImxvYWRcIj09PWEudHlwZXx8L2xvYWRlZHxjb21wbGV0ZS8udGVzdChmLnJlYWR5U3RhdGUpJiYoIWRvY3VtZW50LmRvY3VtZW50TW9kZXx8OT5kb2N1bWVudC5kb2N1bWVudE1vZGUpKWYub25sb2FkPWYub25yZWFkeXN0YXRlY2hhbmdlPWYub25lcnJvcj1udWxsLGMobnVsbCxhKX07Zi5vbmVycm9yPWZ1bmN0aW9uKGEpe2Yub25sb2FkPWYub25yZWFkeXN0YXRlY2hhbmdlPWYub25lcnJvcj1udWxsO2Moe21zZzpcInNjcmlwdCBub3QgbG9hZGVkXCIsZXZlbnQ6YX0pfTt2YXIgYj1kb2N1bWVudC5oZWFkfHxkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIilbMF07Yi5pbnNlcnRCZWZvcmUoZixiLmxhc3RDaGlsZCl9O2QuY2xvbmVTaW1wbGVPYmplY3Q9XG5mdW5jdGlvbihhLGMpe2lmKFwib2JqZWN0XCIhPT10eXBlb2YgYXx8bnVsbD09PWF8fGEgaW5zdGFuY2VvZiBEYXRlKXJldHVybiBhO3ZhciBmPW5ldyBhLmNvbnN0cnVjdG9yLGI7Zm9yKGIgaW4gYSlhLmhhc093blByb3BlcnR5KGIpJiYodm9pZCAwPT09Ynx8YyYmdm9pZCAwPT09YVtiXXx8KGZbYl09ZC5jbG9uZVNpbXBsZU9iamVjdChhW2JdKSkpO3JldHVybiBmfTtkLmpzb25TZXJpYWxpemU9ZnVuY3Rpb24oZSl7dHJ5e3JldHVyblwidW5kZWZpbmVkXCIhPT10eXBlb2YgSlNPTiYmSlNPTi5zdHJpbmdpZnk/SlNPTi5zdHJpbmdpZnkoZSk6YShlKX1jYXRjaChjKXtyZXR1cm4gbnVsbH19O2QuanNvblBhcnNlPWZ1bmN0aW9uKGEpe3RyeXtyZXR1cm5cInVuZGVmaW5lZFwiIT09dHlwZW9mIEpTT04mJkpTT04ucGFyc2U/SlNPTi5wYXJzZShhK1wiXCIpOmwoYSl9Y2F0Y2goYyl7cmV0dXJuIG51bGx9fTtkLmFycmF5SW5kZXhPZj1mdW5jdGlvbihhLGMpe3JldHVybiBBcnJheS5pbmRleE9mP1xuYS5pbmRleE9mKGMpOmZ1bmN0aW9uKGEpe2lmKG51bGw9PXRoaXMpdGhyb3cgbmV3IFR5cGVFcnJvcjt2YXIgYj1PYmplY3QodGhpcyksYz1iLmxlbmd0aD4+PjA7aWYoMD09PWMpcmV0dXJuLTE7dmFyIGU9MDsxPGFyZ3VtZW50cy5sZW5ndGgmJihlPU51bWJlcihhcmd1bWVudHNbMV0pLGUhPWU/ZT0wOjAhPWUmJkluZmluaXR5IT1lJiYtSW5maW5pdHkhPWUmJihlPSgwPGV8fC0xKSpNYXRoLmZsb29yKE1hdGguYWJzKGUpKSkpO2lmKGU+PWMpcmV0dXJuLTE7Zm9yKGU9MDw9ZT9lOk1hdGgubWF4KGMtTWF0aC5hYnMoZSksMCk7ZTxjO2UrKylpZihlIGluIGImJmJbZV09PT1hKXJldHVybiBlO3JldHVybi0xfS5hcHBseShhLFtjXSl9O2QudXVpZD1mdW5jdGlvbigpe3JldHVybnt2NDpmdW5jdGlvbigpe3JldHVyblwieHh4eHh4eHgteHh4eC00eHh4LXl4eHgteHh4eHh4eHh4eHh4XCIucmVwbGFjZSgvW3h5XS9nLGZ1bmN0aW9uKGEpe3ZhciBjPTE2Kk1hdGgucmFuZG9tKCl8MDtyZXR1cm4oXCJ4XCI9PT1cbmE/YzpjJjN8OCkudG9TdHJpbmcoMTYpfSl9LG51bTpmdW5jdGlvbihhKXt2YXIgYz1uZXcgRGF0ZSxmPWZ1bmN0aW9uKGEpe2EtPTEwMCpNYXRoLmZsb29yKGEvMTAwKTtyZXR1cm4gMTA+YT9cIjBcIithOlN0cmluZyhhKX07cmV0dXJuIGYoYy5nZXRIb3VycygpKStcIlwiK2YoYy5nZXRNaW51dGVzKCkpK1wiXCIrZihjLmdldFNlY29uZHMoKSkrXCJcIitmdW5jdGlvbihhKXtyZXR1cm4gTWF0aC5mbG9vcigoOSpNYXRoLnJhbmRvbSgpKzEpKk1hdGgucG93KDEwLGEtMSkpfShhLTYpfX19O2QuZ2V0T2JqZWN0S2V5cz1mdW5jdGlvbihhKXt2YXIgYz1bXSxmO2ZvcihmIGluIGEpYS5oYXNPd25Qcm9wZXJ0eShmKSYmYy5wdXNoKGYpO3JldHVybiBjfTtkLmNvbXBsZXRlRnN0TGV2ZWxPYmo9ZnVuY3Rpb24oYSxjLGYpe2lmKGEpe2lmKGMpZm9yKHZhciBiIGluIGMpIWMuaGFzT3duUHJvcGVydHkoYil8fGFbYl0mJiFmfHwoYVtiXT1jW2JdKX1lbHNlIGE9YztyZXR1cm4gYX07ZC5pc1ByZXZpZXc9XG5mdW5jdGlvbigpe3JldHVybiB3aW5kb3cubmF2aWdhdG9yJiZcInByZXZpZXdcIj09PXdpbmRvdy5uYXZpZ2F0b3IubG9hZFB1cnBvc2V9O2QuaXNQcmVyZW5kZXI9ZnVuY3Rpb24oYSl7dmFyIGMsZj0hMSxiPVtcIndlYmtpdFwiLFwibXNcIl07aWYoXCJwcmVyZW5kZXJcIj09PWRvY3VtZW50LnZpc2liaWxpdHlTdGF0ZSljPVwidmlzaWJpbGl0eWNoYW5nZVwiO2Vsc2UgZm9yKHZhciBoPTA7aDxiLmxlbmd0aDtoKyspXCJwcmVyZW5kZXJcIj09PWRvY3VtZW50W2JbaF0rXCJWaXNpYmlsaXR5U3RhdGVcIl0mJihjPWJbaF0rXCJ2aXNpYmlsaXR5Y2hhbmdlXCIpO2lmKFwidW5kZWZpbmVkXCIhPT10eXBlb2YgYyl7dmFyIGU9ZnVuY3Rpb24oYil7YShiKTtkLnJlbW92ZUV2dExpc3RlbmVyKGRvY3VtZW50LGMsZSl9O2QuYWRkRXZ0TGlzdGVuZXIoZG9jdW1lbnQsYyxlKTtmPSEwfXJldHVybiBmfTt2YXIgbT1kLmFkZEV2dExpc3RlbmVyPWZ1bmN0aW9uKGEsYyxmKXthLmFkZEV2ZW50TGlzdGVuZXI/YS5hZGRFdmVudExpc3RlbmVyKGMsXG5mLCExKTphLmF0dGFjaEV2ZW50JiZhLmF0dGFjaEV2ZW50KFwib25cIitjLGYpfSxnPWQucmVtb3ZlRXZ0TGlzdGVuZXI9ZnVuY3Rpb24oYSxjLGYpe2EucmVtb3ZlRXZlbnRMaXN0ZW5lcj9hLnJlbW92ZUV2ZW50TGlzdGVuZXIoYyxmLCExKTphLmRldGFjaEV2ZW50JiZhLmRldGFjaEV2ZW50KFwib25cIitjLGYpfTtkLmhhc2hjb2RlPWZ1bmN0aW9uKGEpe3ZhciBjPTA7aWYoMD09PWEubGVuZ3RoKXJldHVybiBjO2Zvcih2YXIgZj0wO2Y8YS5sZW5ndGg7ZisrKXZhciBiPWEuY2hhckNvZGVBdChmKSxjPShjPDw1KS1jK2IsYz1jfDA7cmV0dXJuIGN9O2Quc2V0TG9jYXRpb249ZnVuY3Rpb24oYSl7dmFyIGM9YS5sb2NhdGlvbjthPXdpbmRvd1thLnRhcmdldF18fHdpbmRvdztjJiYoYS5sb2NhdGlvbi5ocmVmPWMpfTtkLmRpc3BhdGNoQ2FsbGJhY2tFdmVudD1mdW5jdGlvbihhKXt2YXIgYztpZihcImZ1bmN0aW9uXCI9PT10eXBlb2Ygd2luZG93LkV2ZW50KWM9bmV3IEV2ZW50KFwiQVRDYWxsYmFja0V2ZW50XCIpO1xuZWxzZSB0cnl7Yz1kb2N1bWVudC5jcmVhdGVFdmVudChcIkV2ZW50XCIpLGMuaW5pdEV2ZW50JiZjLmluaXRFdmVudChcIkFUQ2FsbGJhY2tFdmVudFwiLCEwLCEwKX1jYXRjaChmKXt9YyYmXCJmdW5jdGlvblwiPT09dHlwZW9mIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQmJihjLm5hbWU9YSxkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGMpKX07ZC5hZGRDYWxsYmFja0V2ZW50PWZ1bmN0aW9uKGEpe20oZG9jdW1lbnQsXCJBVENhbGxiYWNrRXZlbnRcIixhKX07ZC5yZW1vdmVDYWxsYmFja0V2ZW50PWZ1bmN0aW9uKGEpe2QucmVtb3ZlRXZlbnQoXCJBVENhbGxiYWNrRXZlbnRcIixhKX07KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShjLGYpe2Y9Znx8e2J1YmJsZXM6ITEsY2FuY2VsYWJsZTohMSxkZXRhaWw6dm9pZCAwfTt2YXIgYjt0cnl7Yj1kb2N1bWVudC5jcmVhdGVFdmVudChcIkN1c3RvbUV2ZW50XCIpLGIuaW5pdEN1c3RvbUV2ZW50KGMsZi5idWJibGVzLGYuY2FuY2VsYWJsZSxmLmRldGFpbCl9Y2F0Y2goaCl7fXJldHVybiBifVxuXCJmdW5jdGlvblwiPT09dHlwZW9mIHdpbmRvdy5DdXN0b21FdmVudD93aW5kb3cuQVRDdXN0b21FdmVudD13aW5kb3cuQ3VzdG9tRXZlbnQ6KFwiZnVuY3Rpb25cIj09PXR5cGVvZiB3aW5kb3cuRXZlbnQmJihhLnByb3RvdHlwZT13aW5kb3cuRXZlbnQucHJvdG90eXBlKSx3aW5kb3cuQVRDdXN0b21FdmVudD1hKX0pKCk7ZC5hZGRFdmVudD1mdW5jdGlvbihhLGMsZixiKXtkW2FdPW5ldyBBVEN1c3RvbUV2ZW50KGEse2RldGFpbDp7bmFtZTpjLGlkOmZ9fSk7bShkb2N1bWVudCxhLGIpfTtkLnJlbW92ZUV2ZW50PWZ1bmN0aW9uKGEsYyl7Zyhkb2N1bWVudCxhLGMpfTtkLmRpc3BhdGNoRXZlbnQ9ZnVuY3Rpb24oYSxjKXtkW2FdPWRbYV18fG5ldyBBVEN1c3RvbUV2ZW50KGEse2RldGFpbDp7bmFtZTpjLGlkOi0xfX0pO3RyeXtkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGRbYV0pfWNhdGNoKGYpe319O2QuYWRkT3B0T3V0RXZlbnQ9ZnVuY3Rpb24oYSxjKXtkLmFkZEV2ZW50KFwiQVRPcHRPdXRFdmVudFwiLFxuXCJjbGllbnRzaWRldXNlcmlkXCIsYSxjKX07ZC5yZW1vdmVPcHRPdXRFdmVudD1mdW5jdGlvbihhKXtkLnJlbW92ZUV2ZW50KFwiQVRPcHRPdXRFdmVudFwiLGEpfTtkLmRpc3BhdGNoT3B0T3V0RXZlbnQ9ZnVuY3Rpb24oYSl7ZC5vcHRlZE91dD1hO2QuZGlzcGF0Y2hFdmVudChcIkFUT3B0T3V0RXZlbnRcIixcImNsaWVudHNpZGV1c2VyaWRcIil9O2QudXNlck9wdGVkT3V0PWZ1bmN0aW9uKCl7ZC5kaXNwYXRjaE9wdE91dEV2ZW50KCEwKX07ZC51c2VyT3B0ZWRJbj1mdW5jdGlvbigpe2QuZGlzcGF0Y2hPcHRPdXRFdmVudCghMSl9O2QuaXNPcHRlZE91dD1mdW5jdGlvbigpe2lmKG51bGw9PT1kLm9wdGVkT3V0KXt2YXIgYTthOnthPW51bGw7ZC5pc0xvY2FsU3RvcmFnZUF2YWlsYWJsZSgpJiYoYT1sb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImF0b3B0ZWRvdXRcIikpO2lmKG51bGw9PT1hKXt2YXIgYz0vKD86XnwgKWF0b3B0ZWRvdXQ9KFteO10rKS8uZXhlYyhkb2N1bWVudC5jb29raWUpO251bGwhPT1cbmMmJihhPWNbMV0pfWlmKG51bGwhPT1hKXRyeXthPWRlY29kZVVSSUNvbXBvbmVudChhKX1jYXRjaChmKXt9aWYoYSYmKGE9ZC5qc29uUGFyc2UoYSl8fGQuanNvblBhcnNlKGQuQmFzZTY0LmRlY29kZShhKSksbnVsbCE9PWEpKXthPSEhYS52YWw7YnJlYWsgYX1hPSExfWQub3B0ZWRPdXQ9YX1yZXR1cm4hIWQub3B0ZWRPdXR9O2Qub3B0ZWRPdXQ9bnVsbDtkLmNvbnNlbnRSZWNlaXZlZD1mdW5jdGlvbihhKXtkLmNvbnNlbnQ9ISFhfTtkLmNvbnNlbnQ9ITA7ZC5pc1RhYk9wZW5pbmdBY3Rpb249ZnVuY3Rpb24oYSl7dmFyIGM9ITE7YSYmKGEuY3RybEtleXx8YS5zaGlmdEtleXx8YS5tZXRhS2V5fHxhLmJ1dHRvbiYmMT09PWEuYnV0dG9uKSYmKGM9ITApO3JldHVybiBjfX07d2luZG93LkVjaG8xMjAwQVRJbnRlcm5ldC5VdGlscz1uZXcgVXRpbHM7XG52YXIgQnVpbGRNYW5hZ2VyPWZ1bmN0aW9uKGEpe3ZhciBrPXRoaXMsbD0xNjAwLGQ9W1wiZHpcIl0sZT1mdW5jdGlvbihhLGYsYixoLGUscixnKXthPVwiJlwiK2ErXCI9XCI7cmV0dXJue3BhcmFtOmEscGFyYW1TaXplOmEubGVuZ3RoLHN0cjpmLHN0clNpemU6Zi5sZW5ndGgsdHJ1bmNhdGU6YixtdWx0aWhpdDpoLHNlcGFyYXRvcjplfHxcIlwiLGVuY29kZTpyLGxhc3Q6Z319LG49ZnVuY3Rpb24oYSxmKXt2YXIgYj1cIlwiLGg9MCxlPTAscj0wLGc9bnVsbCxwPW51bGwsZDtmb3IoZCBpbiBhKWEuaGFzT3duUHJvcGVydHkoZCkmJihnPWFbZF0pJiYoaD1mLWUsZy5sYXN0JiZudWxsIT09cD9wW2RdPWc6Zy5zdHJTaXplK2cucGFyYW1TaXplPD1oPyhiKz1nLnBhcmFtK2cuc3RyLGUrPWcucGFyYW1TaXplK2cuc3RyU2l6ZSk6KHA9cHx8e30scFtkXT1nLGcudHJ1bmNhdGUmJihyPWgtZy5wYXJhbVNpemUsZy5zZXBhcmF0b3ImJihoPWcuc3RyLnN1YnN0cmluZygwLGgpLHI9Zy5lbmNvZGU/aC5sYXN0SW5kZXhPZihlbmNvZGVVUklDb21wb25lbnQoZy5zZXBhcmF0b3IpKXx8XG5yOmgubGFzdEluZGV4T2YoZy5zZXBhcmF0b3IpfHxyKSxiKz1nLnBhcmFtK2cuc3RyLnN1YnN0cmluZygwLHIpLGUrPWcucGFyYW1TaXplK2cuc3RyLnN1YnN0cmluZygwLHIpLnNpemUscFtkXS5zdHI9Zy5zdHIuc3Vic3RyaW5nKHIsZy5zdHJTaXplKSxwW2RdLnN0clNpemU9cFtkXS5zdHIubGVuZ3RoKSkpO3JldHVybltiLHBdfSxtPWZ1bmN0aW9uKGMsZixiLGgpe3ZhciBnPVwiXCIscj1mdW5jdGlvbihiKXtpZihiPT09e30pcmV0dXJuW107dmFyIGM9W10saDtoPXt9O3ZhciBmPSExLHI9dm9pZCAwLHAsbSxxLGssdyx0LHYseSx6PVwiXCIseDtmb3IoeCBpbiBiKWlmKGIuaGFzT3duUHJvcGVydHkoeCkpaWYodD13PWs9cT0hMSxwPWJbeF0udmFsdWUsbT1iW3hdLm9wdGlvbnN8fHt9LFwiYm9vbGVhblwiPT09dHlwZW9mIG0uZW5jb2RlJiYocT1tLmVuY29kZSksXCJmdW5jdGlvblwiPT09dHlwZW9mIHAmJihwPXAoKSkscD1wIGluc3RhbmNlb2YgQXJyYXk/cC5qb2luKG0uc2VwYXJhdG9yfHxcblwiLFwiKTpcIm9iamVjdFwiPT09dHlwZW9mIHA/RWNobzEyMDBBVEludGVybmV0LlV0aWxzLmpzb25TZXJpYWxpemUocCk6XCJ1bmRlZmluZWRcIj09PXR5cGVvZiBwP1widW5kZWZpbmVkXCI6cC50b1N0cmluZygpLHEmJihwPWVuY29kZVVSSUNvbXBvbmVudChwKSksLTE8RWNobzEyMDBBVEludGVybmV0LlV0aWxzLmFycmF5SW5kZXhPZihkLHgpP2s9ITA6XCJib29sZWFuXCI9PT10eXBlb2YgbS50cnVuY2F0ZSYmKGs9bS50cnVuY2F0ZSksXCJib29sZWFuXCI9PT10eXBlb2YgbS5tdWx0aWhpdCYmKHc9bS5tdWx0aWhpdCksXCJib29sZWFuXCI9PT10eXBlb2YgbS5sYXN0JiYodD1tLmxhc3QpLHA9ZSh4LHAsayx3LG0uc2VwYXJhdG9yLHEsdCksdylsLT1wLnBhcmFtU2l6ZStwLnN0clNpemUseis9cC5wYXJhbStwLnN0cjtlbHNlIGlmKHQpcC5wYXJhbVNpemUrcC5zdHJTaXplPmwmJihwLnN0cj1wLnN0ci5zdWJzdHJpbmcoMCxsLXAucGFyYW1TaXplKSxwLnN0clNpemU9cC5zdHIubGVuZ3RoKSx2PXgseT1wO2Vsc2UgaWYoaFt4XT1cbnAsaFt4XS5wYXJhbVNpemUraFt4XS5zdHJTaXplPmwmJiFoW3hdLnRydW5jYXRlKXthLmVtaXQoXCJUcmFja2VyOkhpdDpCdWlsZDpFcnJvclwiLHtsdmw6XCJFUlJPUlwiLG1zZzonVG9vIGxvbmcgcGFyYW1ldGVyOiBcIicraFt4XS5wYXJhbSsnXCInLGRldGFpbHM6e3ZhbHVlOmhbeF0uc3RyfX0pO2Y9ITA7cj14O2JyZWFrfXYmJihoW3ZdPXkpO2g9W2gsZixyLHpdO2I9aFswXTtmPWhbMV07Zz1oWzNdO2YmJihoPWhbMl0sYj1iW2hdLGIuc3RyPWIuc3RyLnN1YnN0cmluZygwLGwtYi5wYXJhbVNpemUpLGIuc3RyU2l6ZT1iLnN0ci5sZW5ndGgsZj17fSxmLm1oZXJyPWUoXCJtaGVyclwiLFwiMVwiLCExLCExLFwiXCIsITEpLGZbaF09YixiPWYpO2I9bihiLGwpO2lmKG51bGw9PT1iWzFdKWM9YlswXTtlbHNlIGZvcihjLnB1c2goYlswXSk7bnVsbCE9PWJbMV07KWI9bihiWzFdLGwpLGMucHVzaChiWzBdKTtyZXR1cm4gY30sbT1cIlwiO2EuYnVmZmVyLnByZXNlbnRJbkZpbHRlcnMoYixcImhpdFR5cGVcIil8fFxuKGI9YS5idWZmZXIuYWRkSW5GaWx0ZXJzKGIsXCJoaXRUeXBlXCIsW1wicGFnZVwiXSkpO2I9YS5idWZmZXIuYWRkSW5GaWx0ZXJzKGIsXCJoaXRUeXBlXCIsW1wiYWxsXCJdKTt2YXIgcDtpZihcIm9iamVjdFwiPT09dHlwZW9mIGMmJm51bGwhPT1jKXtiPWEuYnVmZmVyLmFkZEluRmlsdGVycyhiLFwicGVybWFuZW50XCIsITApO2I9YS5idWZmZXIuZ2V0KGIsITApO3ZhciBxLGsseix0O2ZvcihwIGluIGMpaWYoYy5oYXNPd25Qcm9wZXJ0eShwKSl7bT1jW3BdO3E9e307aWYoZiYmXCJvYmplY3RcIj09PXR5cGVvZiBjW3BdKXt6PWs9ITE7Zm9yKHQgaW4gY1twXSljW3BdLmhhc093blByb3BlcnR5KHQpJiYoXCJ2YWx1ZVwiPT09dD9rPSEwOlwib3B0aW9uc1wiPT09dCYmXCJvYmplY3RcIj09PXR5cGVvZiBjW3BdLm9wdGlvbnMmJm51bGwhPT1jW3BdLm9wdGlvbnMmJih6PSEwKSk7ayYmeiYmKG09Y1twXS52YWx1ZSxxPWNbcF0ub3B0aW9ucyl9YltwXT17dmFsdWU6bSxvcHRpb25zOnF9fW09cihiKX1lbHNlIGZvcihwIGluIGI9XG5hLmJ1ZmZlci5nZXQoYiwhMCksbT1yKGIpLGIpIWIuaGFzT3duUHJvcGVydHkocCl8fGJbcF0ub3B0aW9ucyYmYltwXS5vcHRpb25zLnBlcm1hbmVudHx8YS5idWZmZXIuZGVsKHApO2gmJmgobSxnKX0sZz1mdW5jdGlvbihjLGYpe3ZhciBiPWEuZ2V0Q29uZmlnKFwic2VjdXJlXCIpLGg9XCJcIjtpZihjKWg9YztlbHNlIHZhciBoPVwiaHR0cHM6XCI9PT1kb2N1bWVudC5sb2NhdGlvbi5wcm90b2NvbCxlPShoPWJ8fGgpP2EuZ2V0Q29uZmlnKFwibG9nU1NMXCIpOmEuZ2V0Q29uZmlnKFwibG9nXCIpLHI9YS5nZXRDb25maWcoXCJkb21haW5cIiksaD1lJiZyP2UrXCIuXCIrcjpoP2EuZ2V0Q29uZmlnKFwiY29sbGVjdERvbWFpblNTTFwiKTphLmdldENvbmZpZyhcImNvbGxlY3REb21haW5cIik7ZT1hLmdldENvbmZpZyhcImJhc2VVUkxcIik7cj0ocj1hLmdldENvbmZpZyhcInBpeGVsUGF0aFwiKSl8fFwiL1wiO1wiL1wiIT09ci5jaGFyQXQoMCkmJihyPVwiL1wiK3IpO3ZhciBnPWEuZ2V0Q29uZmlnKFwic2l0ZVwiKTtpZigoZXx8aCYmXG5yKSYmZyl7dmFyIHA9XCIvL1wiO2ImJihwPVwiaHR0cHM6XCIrcCk7ZiYmZihudWxsLChlP2U6cCtoK3IpKyhcIj9zPVwiK2cpKX1lbHNlIGYmJmYoe21lc3NhZ2U6XCJDb25maWcgZXJyb3JcIn0pfSxxPWZ1bmN0aW9uKGEsZixiLGgsZSl7ZyhoLGZ1bmN0aW9uKGgsZyl7aD9lJiZlKGgpOihsPTE2MDAtKGcubGVuZ3RoKzI3KSxtKGEsZixiLGZ1bmN0aW9uKGEsYil7dmFyIGM9W10saD1FY2hvMTIwMEFUSW50ZXJuZXQuVXRpbHMudXVpZCgpLm51bSgxMyk7aWYoYSBpbnN0YW5jZW9mIEFycmF5KWZvcih2YXIgZj0xO2Y8PWEubGVuZ3RoO2YrKyljLnB1c2goZytiK1wiJm1oPVwiK2YrXCItXCIrYS5sZW5ndGgrXCItXCIraCthW2YtMV0pO2Vsc2UgYy5wdXNoKGcrYithKTtlJiZlKG51bGwsYyl9KSl9KX07ay5zZW5kPWZ1bmN0aW9uKGMsZixiLGgsZSl7cShjLGUsZixoLGZ1bmN0aW9uKGMsaCl7aWYoYylhLmVtaXQoXCJUcmFja2VyOkhpdDpCdWlsZDpFcnJvclwiLHtsdmw6XCJFUlJPUlwiLG1zZzpjLm1lc3NhZ2UsZGV0YWlsczp7fX0pLFxuYiYmYigpO2Vsc2UgZm9yKHZhciBmPTA7ZjxoLmxlbmd0aDtmKyspay5zZW5kVXJsKGhbZl0sYil9KX07ay5zZW5kVXJsPWZ1bmN0aW9uKGMsZil7dmFyIGI9ZnVuY3Rpb24oYixjLGgpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihlKXt2YXIgZz1cIlwiO2lmKFwiL1wiPT09Yy5jaGFyQXQoMCkpdmFyIGc9YS5nZXRDb25maWcoXCJzZWN1cmVcIiksbT1cImh0dHBzOlwiPT09ZG9jdW1lbnQubG9jYXRpb24ucHJvdG9jb2wsZz1nfHxtP1wiaHR0cHM6XCI6XCJodHRwOlwiO2EuZW1pdChiLHtsdmw6aCxkZXRhaWxzOntoaXQ6ZytjLGV2ZW50OmV9fSk7ZiYmZigpfX0oKX07aWYoRWNobzEyMDBBVEludGVybmV0LlV0aWxzLmlzT3B0ZWRPdXQoKSYmIWEuZ2V0Q29uZmlnKFwic2VuZEhpdFdoZW5PcHRPdXRcIikpYihcIlRyYWNrZXI6SGl0OlNlbnQ6Tm9UcmFja1wiLGMsXCJJTkZPXCIpKCk7ZWxzZXt2YXIgaD1uZXcgSW1hZ2U7aC5vbmxvYWQ9YihcIlRyYWNrZXI6SGl0OlNlbnQ6T2tcIixjLFwiSU5GT1wiKTtoLm9uZXJyb3I9XG5iKFwiVHJhY2tlcjpIaXQ6U2VudDpFcnJvclwiLGMsXCJFUlJPUlwiKTtoLnNyYz1jfX19LFRyaWdnZXJzTWFuYWdlcj1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSxkLG0pe2Zvcih2YXIgZz1bXSxxPTA7cTxhLmxlbmd0aDtxKyspYVtxXS5jYWxsYmFjayhkLG0pLGFbcV0uc2luZ2xlVXNlfHxnLnB1c2goYVtxXSk7cmV0dXJuIGd9ZnVuY3Rpb24gayhhLGQsbSxnKXt2YXIgcT1hLnNoaWZ0KCk7aWYoXCIqXCI9PT1xKXJldHVybiBkW1wiKlwiXT1kW1wiKlwiXXx8W10sZFtcIipcIl0ucHVzaCh7Y2FsbGJhY2s6bSxzaW5nbGVVc2U6Z30pLGRbXCIqXCJdLmxlbmd0aC0xO2lmKDA9PT1hLmxlbmd0aClyZXR1cm4gayhbcSxcIipcIl0sZCxtLGcpO2RbXCIqXCJdPWRbXCIqXCJdfHxbXTtkW3FdPWRbcV18fHt9O3JldHVybiBrKGEsZFtxXSxtLGcpfWZ1bmN0aW9uIGwoZSxkLG0sZyl7dmFyIHE9ZC5zaGlmdCgpO1wiKlwiIT09cSYmKDA9PT1kLmxlbmd0aD9sKGUsW3EsXCIqXCJdLG0sZyk6bVtxXSYmKG1bcV1bXCIqXCJdPWEobVtxXVtcIipcIl0sXG5lLGcpLGwoZSxkLG1bcV0sZykpKX12YXIgZD17fTt0aGlzLm9uPWZ1bmN0aW9uKGEsbixtKXttPW18fCExO3JldHVybiBrKGEuc3BsaXQoXCI6XCIpLGQsbixtKX07dGhpcy5lbWl0PWZ1bmN0aW9uKGUsbil7ZFtcIipcIl0mJihkW1wiKlwiXT1hKGRbXCIqXCJdLGUsbikpO2woZSxlLnNwbGl0KFwiOlwiKSxkLG4pfX0sUGx1Z2luc01hbmFnZXI9ZnVuY3Rpb24oYSl7dmFyIGs9e30sbD17fSxkPTAsZT17fSxuPTAsbT1mdW5jdGlvbihhKXt2YXIgYj0hMTtrW2FdJiYoYj0hMCk7cmV0dXJuIGJ9LGc9dGhpcy51bmxvYWQ9ZnVuY3Rpb24oYil7bShiKT8oa1tiXT12b2lkIDAsYS5lbWl0KFwiVHJhY2tlcjpQbHVnaW46VW5sb2FkOlwiK2IrXCI6T2tcIix7bHZsOlwiSU5GT1wifSkpOmEuZW1pdChcIlRyYWNrZXI6UGx1Z2luOlVubG9hZDpcIitiK1wiOkVycm9yXCIse2x2bDpcIkVSUk9SXCIsbXNnOlwibm90IGEga25vd24gcGx1Z2luXCJ9KTtyZXR1cm4gYX0scT10aGlzLmxvYWQ9ZnVuY3Rpb24oYixjKXtcImZ1bmN0aW9uXCI9PT1cbnR5cGVvZiBjP1widW5kZWZpbmVkXCI9PT10eXBlb2YgYS5nZXRDb25maWcucGxnQWxsb3dlZHx8MD09PWEuZ2V0Q29uZmlnLnBsZ0FsbG93ZWQubGVuZ3RofHwtMTxhLmdldENvbmZpZy5wbGdBbGxvd2VkLmluZGV4T2YoYik/KGtbYl09bmV3IGMoYSksbFtiXSYmbShiKSYmKGxbYl09ITEsZC0tLG0oYitcIl9sbFwiKSYmZyhiK1wiX2xsXCIpLDA9PT1kJiZhLmVtaXQoXCJUcmFja2VyOlBsdWdpbjpMYXp5bG9hZDpGaWxlOkNvbXBsZXRlXCIse2x2bDpcIklORk9cIixtc2c6XCJMYXp5TG9hZGluZyB0cmlnZ2VycyBhcmUgZmluaXNoZWRcIn0pKSxhLmVtaXQoXCJUcmFja2VyOlBsdWdpbjpMb2FkOlwiK2IrXCI6T2tcIix7bHZsOlwiSU5GT1wifSkpOmEuZW1pdChcIlRyYWNrZXI6UGx1Z2luOkxvYWQ6XCIrYitcIjpFcnJvclwiLHtsdmw6XCJFUlJPUlwiLG1zZzpcIlBsdWdpbiBub3QgYWxsb3dlZFwiLGRldGFpbHM6e319KTphLmVtaXQoXCJUcmFja2VyOlBsdWdpbjpMb2FkOlwiK2IrXCI6RXJyb3JcIix7bHZsOlwiRVJST1JcIixtc2c6XCJub3QgYSBmdW5jdGlvblwiLFxuZGV0YWlsczp7b2JqOmN9fSk7cmV0dXJuIGF9LGM9dGhpcy5pc0xhenlsb2FkaW5nPWZ1bmN0aW9uKGEpe3JldHVybiBhPyEwPT09bFthXTowIT09ZH0sZj1mdW5jdGlvbihhKXtyZXR1cm4hbShhKSYmIWMoYSkmJm0oYStcIl9sbFwiKX0sYj1mdW5jdGlvbihiKXtsW2JdPSEwO2QrKztFY2hvMTIwMEFUSW50ZXJuZXQuVXRpbHMubG9hZFNjcmlwdCh7dXJsOmEuZ2V0Q29uZmlnKFwibGF6eUxvYWRpbmdQYXRoXCIpK2IrXCIuanNcIn0pfSxoPWZ1bmN0aW9uKGEpe3JldHVybiBmKGEpPyhiKGEpLCEwKTohMX0scz1mdW5jdGlvbihhKXtlW2FdP2VbYV0rKzplW2FdPTE7bisrfTt0aGlzLmlzRXhlY1dhaXRpbmdMYXp5bG9hZGluZz1mdW5jdGlvbigpe3JldHVybiAwIT09bn07YS5leGVjPXRoaXMuZXhlYz1mdW5jdGlvbihoLGcscCxkKXt2YXIgcT1udWxsLGw9ZnVuY3Rpb24oYSxiLGMsaCl7Yj1iLnNwbGl0KFwiLlwiKTttKGEpJiZrW2FdW2JbMF1dJiYocT0xPGIubGVuZ3RoJiZrW2FdW2JbMF1dW2JbMV1dP2tbYV1bYlswXV1bYlsxXV0uYXBwbHkoa1thXSxcbmMpOmtbYV1bYlswXV0uYXBwbHkoa1thXSxjKSk7aCYmaChxKX0sdD1mdW5jdGlvbihiLGMsaCxmKXtzKGIpO2Eub25UcmlnZ2VyKFwiVHJhY2tlcjpQbHVnaW46TG9hZDpcIitiK1wiOk9rXCIsZnVuY3Rpb24oKXtsKGIsYyxoLGZ1bmN0aW9uKGMpe2VbYl0tLTtuLS07MD09PW4mJmEuZW1pdChcIlRyYWNrZXI6UGx1Z2luOkxhenlsb2FkOkV4ZWM6Q29tcGxldGVcIix7bHZsOlwiSU5GT1wiLG1zZzpcIkFsbCBleGVjIHdhaXRpbmcgZm9yIGxhenlsb2FkaW5nIGFyZSBkb25lXCJ9KTtmJiZmKGMpfSl9LCEwKX07ZihoKT8odChoLGcscCxkKSxiKGgpKTpjKGgpP3QoaCxnLHAsZCk6bChoLGcscCxkKX07dGhpcy53YWl0Rm9yRGVwZW5kZW5jaWVzPWZ1bmN0aW9uKGIsYyl7dmFyIGY9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXttY291bnQ6MCxwbHVnaW5zOnt9fSxjPTA7YzxhLmxlbmd0aDtjKyspay5oYXNPd25Qcm9wZXJ0eShhW2NdKXx8KGIubWNvdW50KyssYi5wbHVnaW5zW2FbY11dPSEwKTtyZXR1cm4gYn0oYik7XG5pZigwPT09Zi5tY291bnQpYS5lbWl0KFwiVHJhY2tlcjpQbHVnaW46RGVwZW5kZW5jaWVzOkxvYWRlZFwiLHtsdmw6XCJJTkZPXCIsZGV0YWlsczp7ZGVwZW5kZW5jaWVzOmJ9fSksYygpO2Vsc2UgZm9yKHZhciBlIGluIGYucGx1Z2lucylmLnBsdWdpbnMuaGFzT3duUHJvcGVydHkoZSkmJihhLmVtaXQoXCJUcmFja2VyOlBsdWdpbjpEZXBlbmRlbmNpZXM6RXJyb3JcIix7bHZsOlwiV0FSTklOR1wiLG1zZzpcIk1pc3NpbmcgcGx1Z2luIFwiK2V9KSxhLm9uVHJpZ2dlcihcIlRyYWNrZXI6UGx1Z2luOkxvYWQ6XCIrZSxmdW5jdGlvbihhLGIpe3ZhciBoPWEuc3BsaXQoXCI6XCIpLGU9aFszXTtcIk9rXCI9PT1oWzRdJiYoZi5wbHVnaW5zW2VdPSExLGYubWNvdW50LS0sMD09PWYubWNvdW50JiZjKCkpfSwhMCksaChlKSl9O3RoaXMuaW5pdD1mdW5jdGlvbigpe2Zvcih2YXIgYSBpbiBFY2hvMTIwMEFUSW50ZXJuZXQuVHJhY2tlci5wbHVnaW5Qcm90b3MpRWNobzEyMDBBVEludGVybmV0LlRyYWNrZXIucGx1Z2luUHJvdG9zLmhhc093blByb3BlcnR5KGEpJiZcbnEoYSxFY2hvMTIwMEFUSW50ZXJuZXQuVHJhY2tlci5wbHVnaW5Qcm90b3NbYV0pfX0sQ2FsbGJhY2tzTWFuYWdlcj1mdW5jdGlvbihhKXt2YXIgaz10aGlzLGw9e30sZD1mdW5jdGlvbihhKXtpZihhLm5hbWUpe3ZhciBkPSEwO1widW5kZWZpbmVkXCIhPT10eXBlb2YgY29uZmlndXJhdGlvbiYmKGNvbmZpZ3VyYXRpb24uaW5jbHVkZSBpbnN0YW5jZW9mIEFycmF5JiYtMT09PUVjaG8xMjAwQVRJbnRlcm5ldC5VdGlscy5hcnJheUluZGV4T2YoY29uZmlndXJhdGlvbi5pbmNsdWRlLGEubmFtZSkmJihkPSExKSxjb25maWd1cmF0aW9uLmV4Y2x1ZGUgaW5zdGFuY2VvZiBBcnJheSYmLTEhPT1FY2hvMTIwMEFUSW50ZXJuZXQuVXRpbHMuYXJyYXlJbmRleE9mKGNvbmZpZ3VyYXRpb24uZXhjbHVkZSxhLm5hbWUpJiYoZD0hMSkpO2lmKEVjaG8xMjAwQVRJbnRlcm5ldC5DYWxsYmFja3MmJkVjaG8xMjAwQVRJbnRlcm5ldC5DYWxsYmFja3MuaGFzT3duUHJvcGVydHkoYS5uYW1lKSl7dmFyIG09e307bVthLm5hbWVdPXtcImZ1bmN0aW9uXCI6RWNobzEyMDBBVEludGVybmV0LkNhbGxiYWNrc1thLm5hbWVdfTtcbmQmJmsubG9hZChhLm5hbWUsbVthLm5hbWVdW1wiZnVuY3Rpb25cIl0pO0VjaG8xMjAwQVRJbnRlcm5ldC5UcmFja2VyLmNhbGxiYWNrUHJvdG9zW2EubmFtZV18fChFY2hvMTIwMEFUSW50ZXJuZXQuVHJhY2tlci5jYWxsYmFja1Byb3Rvc1thLm5hbWVdPW1bYS5uYW1lXSl9fX07ay5sb2FkPWZ1bmN0aW9uKGUsZCl7XCJmdW5jdGlvblwiPT09dHlwZW9mIGQ/KG5ldyBkKGEpLGEuZW1pdChcIlRyYWNrZXI6Q2FsbGJhY2s6TG9hZDpcIitlK1wiOk9rXCIse2x2bDpcIklORk9cIixkZXRhaWxzOntvYmo6ZH19KSk6YS5lbWl0KFwiVHJhY2tlcjpDYWxsYmFjazpMb2FkOlwiK2UrXCI6RXJyb3JcIix7bHZsOlwiRVJST1JcIixtc2c6XCJub3QgYSBmdW5jdGlvblwiLGRldGFpbHM6e29iajpkfX0pO3JldHVybiBhfTtrLmluaXQ9ZnVuY3Rpb24oKXtpZihhLmdldENvbmZpZyhcImFjdGl2YXRlQ2FsbGJhY2tzXCIpKXt2YXIgZT1hLmdldENvbmZpZyhcImNhbGxiYWNrc1wiKTtpZihcInVuZGVmaW5lZFwiIT09dHlwZW9mIGUmJmUuaW5jbHVkZSBpbnN0YW5jZW9mXG5BcnJheSlmb3IodmFyIG49MDtuPGUuaW5jbHVkZS5sZW5ndGg7bisrKUVjaG8xMjAwQVRJbnRlcm5ldC5DYWxsYmFja3MmJkVjaG8xMjAwQVRJbnRlcm5ldC5DYWxsYmFja3MuaGFzT3duUHJvcGVydHkoZS5pbmNsdWRlW25dKSYmKGxbZS5pbmNsdWRlW25dXT17XCJmdW5jdGlvblwiOkVjaG8xMjAwQVRJbnRlcm5ldC5DYWxsYmFja3NbZS5pbmNsdWRlW25dXX0sRWNobzEyMDBBVEludGVybmV0LlRyYWNrZXIuY2FsbGJhY2tQcm90b3NbZS5pbmNsdWRlW25dXXx8KEVjaG8xMjAwQVRJbnRlcm5ldC5UcmFja2VyLmNhbGxiYWNrUHJvdG9zW2UuaW5jbHVkZVtuXV09bFtlLmluY2x1ZGVbbl1dKSk7ZWxzZSBmb3IobiBpbiBFY2hvMTIwMEFUSW50ZXJuZXQuQ2FsbGJhY2tzKUVjaG8xMjAwQVRJbnRlcm5ldC5DYWxsYmFja3MuaGFzT3duUHJvcGVydHkobikmJihsW25dPXtcImZ1bmN0aW9uXCI6RWNobzEyMDBBVEludGVybmV0LkNhbGxiYWNrc1tuXX0sRWNobzEyMDBBVEludGVybmV0LlRyYWNrZXIuY2FsbGJhY2tQcm90b3Nbbl18fChFY2hvMTIwMEFUSW50ZXJuZXQuVHJhY2tlci5jYWxsYmFja1Byb3Rvc1tuXT1sW25dKSk7aWYoXCJ1bmRlZmluZWRcIiE9PVxudHlwZW9mIGUmJmUuZXhjbHVkZSBpbnN0YW5jZW9mIEFycmF5KWZvcihuPTA7bjxlLmV4Y2x1ZGUubGVuZ3RoO24rKylsW2UuZXhjbHVkZVtuXV0mJihsW2UuZXhjbHVkZVtuXV09dm9pZCAwKTtmb3IodmFyIG0gaW4gbClsLmhhc093blByb3BlcnR5KG0pJiZsW21dJiZrLmxvYWQobSxsW21dW1wiZnVuY3Rpb25cIl0pO0VjaG8xMjAwQVRJbnRlcm5ldC5VdGlscy5hZGRDYWxsYmFja0V2ZW50KGQpfX07ay5yZW1vdmVDYWxsYmFja0V2ZW50PWZ1bmN0aW9uKCl7RWNobzEyMDBBVEludGVybmV0LlV0aWxzLnJlbW92ZUNhbGxiYWNrRXZlbnQoZCl9fSxCdWZmZXJNYW5hZ2VyPWZ1bmN0aW9uKGEpe3ZhciBrPXt9O3RoaXMuc2V0PWZ1bmN0aW9uKGEsZCxtKXttPW18fHt9O20uaGl0VHlwZT1tLmhpdFR5cGV8fFtcInBhZ2VcIl07a1thXT17dmFsdWU6ZCxvcHRpb25zOm19fTt2YXIgbD1mdW5jdGlvbihhLGQsbSl7cmV0dXJuKGE9d2luZG93LkVjaG8xMjAwQVRJbnRlcm5ldC5VdGlscy5jbG9uZVNpbXBsZU9iamVjdChhW2RdKSkmJiFtP1xuYS52YWx1ZTphfSxkPWZ1bmN0aW9uIG4oYSxnKXtpZighKGEmJmcgaW5zdGFuY2VvZiBBcnJheSYmYSBpbnN0YW5jZW9mIEFycmF5KSlyZXR1cm5bXTtpZigwPT09YS5sZW5ndGgpcmV0dXJuIGc7dmFyIGQ9YVswXSxjLGY9W10sYj13aW5kb3cuRWNobzEyMDBBVEludGVybmV0LlV0aWxzLmNsb25lU2ltcGxlT2JqZWN0KGEpO2Iuc2hpZnQoKTtmb3IodmFyIGg9MDtoPGcubGVuZ3RoO2grKylpZihcIm9iamVjdFwiIT09dHlwZW9mIGRbMV0pa1tnW2hdXSYma1tnW2hdXS5vcHRpb25zW2RbMF1dPT09ZFsxXSYmZi5wdXNoKGdbaF0pO2Vsc2V7Yz1kWzFdLmxlbmd0aDtmb3IodmFyIHM9MDtzPGM7cysrKWlmKGtbZ1toXV0mJmtbZ1toXV0ub3B0aW9uc1tkWzBdXWluc3RhbmNlb2YgQXJyYXkmJjA8PXdpbmRvdy5FY2hvMTIwMEFUSW50ZXJuZXQuVXRpbHMuYXJyYXlJbmRleE9mKGtbZ1toXV0ub3B0aW9uc1tkWzBdXSxkWzFdW3NdKSl7Zi5wdXNoKGdbaF0pO2JyZWFrfX1yZXR1cm4gbihiLGYpfTt0aGlzLmdldD1mdW5jdGlvbihhLFxubSl7dmFyIGc9e307aWYoXCJzdHJpbmdcIj09PXR5cGVvZiBhKWc9bChrLGEsbSk7ZWxzZSBmb3IodmFyIHE9ZChhLHdpbmRvdy5FY2hvMTIwMEFUSW50ZXJuZXQuVXRpbHMuZ2V0T2JqZWN0S2V5cyhrKSksYz0wO2M8cS5sZW5ndGg7YysrKWdbcVtjXV09bChrLHFbY10sbSk7cmV0dXJuIGd9O3RoaXMucHJlc2VudEluRmlsdGVycz1mdW5jdGlvbiBtKGEsZCl7cmV0dXJuIGEmJjAhPT1hLmxlbmd0aD9hWzBdWzBdPT09ZD8hMDptKGEuc2xpY2UoMSksZCk6ITF9O3RoaXMuYWRkSW5GaWx0ZXJzPWZ1bmN0aW9uIGcoYSxjLGYsYil7aWYoIWF8fDA9PT1hLmxlbmd0aClyZXR1cm4gYj9bXTpbW2MsZl1dO3ZhciBoPWFbMF1bMF0sZD1hWzBdWzFdO2g9PT1jJiYoZCBpbnN0YW5jZW9mIEFycmF5JiYtMT09PXdpbmRvdy5FY2hvMTIwMEFUSW50ZXJuZXQuVXRpbHMuYXJyYXlJbmRleE9mKGQsZlswXSkmJmQucHVzaChmWzBdKSxiPSEwKTtyZXR1cm5bW2gsZF1dLmNvbmNhdChnKGEuc2xpY2UoMSksYyxmLGIpKX07dGhpcy5kZWw9XG5mdW5jdGlvbihhKXtrW2FdPXZvaWQgMH07dGhpcy5jbGVhcj1mdW5jdGlvbigpe2s9e319fSxUYWc9ZnVuY3Rpb24oYSxrLGwpe2s9a3x8e307dmFyIGQ9dGhpcztkLnZlcnNpb249XCI1LjE3LjFcIjt2YXIgZT13aW5kb3cuRWNobzEyMDBBVEludGVybmV0LlV0aWxzLmNsb25lU2ltcGxlT2JqZWN0KGspO2QudHJpZ2dlcnM9bmV3IFRyaWdnZXJzTWFuYWdlcihkKTtkLmVtaXQ9ZC50cmlnZ2Vycy5lbWl0O2Qub25UcmlnZ2VyPWQudHJpZ2dlcnMub247dmFyIG49d2luZG93LkVjaG8xMjAwQVRJbnRlcm5ldC5VdGlscy5jbG9uZVNpbXBsZU9iamVjdChkZmx0R2xvYmFsQ2ZnKXx8e30sbTtmb3IobSBpbiBhKWEuaGFzT3duUHJvcGVydHkobSkmJihuW21dPWFbbV0pO2QuZ2V0Q29uZmlnPWZ1bmN0aW9uKGEpe3JldHVybiBuW2FdfTtkLnNldENvbmZpZz1mdW5jdGlvbihhLGUsYyl7dm9pZCAwIT09blthXSYmY3x8KGQuZW1pdChcIlRyYWNrZXI6Q29uZmlnOlNldDpcIithLHtsdmw6XCJJTkZPXCIsZGV0YWlsczp7YmVmOm5bYV0sXG5hZnQ6ZX19KSxuW2FdPWUpfTtkLmNvbmZpZ1BsdWdpbj1mdW5jdGlvbihhLGUsYyl7blthXT1uW2FdfHx7fTtmb3IodmFyIGYgaW4gZSllLmhhc093blByb3BlcnR5KGYpJiZ2b2lkIDA9PT1uW2FdW2ZdJiYoblthXVtmXT1lW2ZdKTtjJiYoYyhuW2FdKSxkLm9uVHJpZ2dlcihcIlRyYWNrZXI6Q29uZmlnOlNldDpcIithLGZ1bmN0aW9uKGEsaCl7YyhoLmRldGFpbHMuYWZ0KX0pKTtyZXR1cm4gblthXX07ZC5nZXRDb250ZXh0PWZ1bmN0aW9uKGEpe3JldHVybiBlW2FdfTtkLnNldENvbnRleHQ9ZnVuY3Rpb24oYSxtKXtkLmVtaXQoXCJUcmFja2VyOkNvbnRleHQ6U2V0OlwiK2Ese2x2bDpcIklORk9cIixkZXRhaWxzOntiZWY6ZVthXSxhZnQ6bX19KTtlW2FdPW19O2QuZGVsQ29udGV4dD1mdW5jdGlvbihhLG0pe2QuZW1pdChcIlRyYWNrZXI6Q29udGV4dDpEZWxldGVkOlwiK2ErXCI6XCIrbSx7bHZsOlwiSU5GT1wiLGRldGFpbHM6e2tleTE6YSxrZXkyOm19fSk7aWYoYSllLmhhc093blByb3BlcnR5KGEpJiZcbihtP2VbYV0mJmVbYV0uaGFzT3duUHJvcGVydHkobSkmJihlW2FdW21dPXZvaWQgMCk6ZVthXT12b2lkIDApO2Vsc2UgaWYobSlmb3IodmFyIGMgaW4gZSllLmhhc093blByb3BlcnR5KGMpJiZlW2NdJiZlW2NdLmhhc093blByb3BlcnR5KG0pJiYoZVtjXVttXT12b2lkIDApfTtkLnBsdWdpbnM9bmV3IFBsdWdpbnNNYW5hZ2VyKGQpO2QuYnVmZmVyPW5ldyBCdWZmZXJNYW5hZ2VyKGQpO2Quc2V0UGFyYW09ZC5idWZmZXIuc2V0O2QuZ2V0UGFyYW1zPWZ1bmN0aW9uKGEpe3JldHVybiBkLmJ1ZmZlci5nZXQoYSwhMSl9O2QuZ2V0UGFyYW09ZC5idWZmZXIuZ2V0O2QuZGVsUGFyYW09ZC5idWZmZXIuZGVsO2QuYnVpbGRlcj1uZXcgQnVpbGRNYW5hZ2VyKGQpO2Quc2VuZEhpdD1kLmJ1aWxkZXIuc2VuZDtkLnNlbmRVcmw9ZC5idWlsZGVyLnNlbmRVcmw7ZC5jYWxsYmFja3M9bmV3IENhbGxiYWNrc01hbmFnZXIoZCk7ZC5zZXRQYXJhbShcInRzXCIsZnVuY3Rpb24oKXtyZXR1cm4obmV3IERhdGUpLmdldFRpbWUoKX0sXG57cGVybWFuZW50OiEwLGhpdFR5cGU6W1wiYWxsXCJdfSk7KGQuZ2V0Q29uZmlnKFwiZGlzYWJsZUNvb2tpZVwiKXx8ZC5nZXRDb25maWcoXCJkaXNhYmxlU3RvcmFnZVwiKSkmJmQuc2V0UGFyYW0oXCJpZGNsaWVudFwiLFwiQ29uc2VudC1OT1wiLHtwZXJtYW5lbnQ6ITAsaGl0VHlwZTpbXCJhbGxcIl19KTtkLmdldENvbmZpZyhcIm1lZGl1bVwiKSYmZC5zZXRQYXJhbShcIm1lZGl1bVwiLGQuZ2V0Q29uZmlnKFwibWVkaXVtXCIpLHtwZXJtYW5lbnQ6ITAsaGl0VHlwZTpbXCJhbGxcIl19KTtkLnBsdWdpbnMuaW5pdCgpO2QuY2FsbGJhY2tzLmluaXQoKTtFY2hvMTIwMEFUSW50ZXJuZXQuVHJhY2tlci5pbnN0YW5jZXMucHVzaChkKTtkLmVtaXQoXCJUcmFja2VyOlJlYWR5XCIse2x2bDpcIklORk9cIixtc2c6XCJUcmFja2VyIGluaXRpYWxpemVkXCIsZGV0YWlsczp7dHJhY2tlcjpkLGFyZ3M6e2NvbmZpZzphLGNvbnRleHQ6ayxjYWxsYmFjazpsfX19KTtsJiZsKGQpfTtFY2hvMTIwMEFUSW50ZXJuZXQuVHJhY2tlci5UYWc9VGFnO1xuRWNobzEyMDBBVEludGVybmV0LlRyYWNrZXIuaW5zdGFuY2VzPVtdO0VjaG8xMjAwQVRJbnRlcm5ldC5UcmFja2VyLnBsdWdpblByb3Rvcz17fTtFY2hvMTIwMEFUSW50ZXJuZXQuVHJhY2tlci5hZGRQbHVnaW49ZnVuY3Rpb24oYSxrKXtrPWt8fEVjaG8xMjAwQVRJbnRlcm5ldC5UcmFja2VyLlBsdWdpbnNbYV07aWYoIUVjaG8xMjAwQVRJbnRlcm5ldC5UcmFja2VyLnBsdWdpblByb3Rvc1thXSl7RWNobzEyMDBBVEludGVybmV0LlRyYWNrZXIucGx1Z2luUHJvdG9zW2FdPWs7Zm9yKHZhciBsPTA7bDxFY2hvMTIwMEFUSW50ZXJuZXQuVHJhY2tlci5pbnN0YW5jZXMubGVuZ3RoO2wrKylFY2hvMTIwMEFUSW50ZXJuZXQuVHJhY2tlci5pbnN0YW5jZXNbbF0ucGx1Z2lucy5sb2FkKGEsayl9fTtFY2hvMTIwMEFUSW50ZXJuZXQuVHJhY2tlci5kZWxQbHVnaW49ZnVuY3Rpb24oYSl7aWYoRWNobzEyMDBBVEludGVybmV0LlRyYWNrZXIucGx1Z2luUHJvdG9zW2FdKXtFY2hvMTIwMEFUSW50ZXJuZXQuVHJhY2tlci5wbHVnaW5Qcm90b3NbYV09dm9pZCAwO2Zvcih2YXIgaz0wO2s8RWNobzEyMDBBVEludGVybmV0LlRyYWNrZXIuaW5zdGFuY2VzLmxlbmd0aDtrKyspRWNobzEyMDBBVEludGVybmV0LlRyYWNrZXIuaW5zdGFuY2VzW2tdLnBsdWdpbnMudW5sb2FkKGEpfX07XG5FY2hvMTIwMEFUSW50ZXJuZXQuVHJhY2tlci5jYWxsYmFja1Byb3Rvcz17fTtcbn0pLmNhbGwod2luZG93KTs7KGZ1bmN0aW9uKCl7dmFyIGRmbHRQbHVnaW5DZmc9e1wibGlmZXRpbWVcIjozMCxcImxhc3RQZXJzaXN0ZW5jZVwiOnRydWUsXCJsaXN0RXZlbnRzRm9yRXhlY1wiOltdLFwiZG9tYWluQXR0cmlidXRpb25cIjp0cnVlLFwiaW5mb1wiOnRydWV9O3ZhciBkZmx0R2xvYmFsQ2ZnPXtcInZpc2l0TGlmZXRpbWVcIjozMCxcInJlZGlyZWN0aW9uTGlmZXRpbWVcIjozMH07d2luZG93LkVjaG8xMjAwQVRJbnRlcm5ldC5UcmFja2VyLlBsdWdpbnMuQ2FtcGFpZ25zPWZ1bmN0aW9uKGEpe2Euc2V0Q29uZmlnKFwidmlzaXRMaWZldGltZVwiLGRmbHRHbG9iYWxDZmcudmlzaXRMaWZldGltZSwhMCk7YS5zZXRDb25maWcoXCJyZWRpcmVjdGlvbkxpZmV0aW1lXCIsZGZsdEdsb2JhbENmZy5yZWRpcmVjdGlvbkxpZmV0aW1lLCEwKTt2YXIgaz17fSxsLGQ7YS5jb25maWdQbHVnaW4oXCJDYW1wYWlnbnNcIixkZmx0UGx1Z2luQ2ZnfHx7fSxmdW5jdGlvbihhKXtrPWF9KTt2YXIgZSxuLG0sZyxxLGMsZixiLGgscyxyLHcscCx5PWZ1bmN0aW9uKCl7dmFyIGI9ZnVuY3Rpb24oYSl7dmFyIGI9XCJcIjthJiYoYj1pc05hTihhKSYmLTE9PT1hLnNlYXJjaCgvXFxbKC4qPylcXF0vZyk/XCJbXCIrYStcIl1cIjphKTtyZXR1cm4gYn0sYz1mdW5jdGlvbihhKXtmb3IoO1wiLVwiPT09YS5jaGFyQXQoYS5sZW5ndGgtMSk7KWE9YS5zdWJzdHJpbmcoMCxhLmxlbmd0aC0xKTtyZXR1cm4gYX07dGhpcy5TcG9uc29yZWRMaW5rcz1cbmZ1bmN0aW9uKCl7dmFyIGg9e2dvb2dsZTpcImdvb1wiLHlhaG9vOlwieXNtXCIsbWl2YTpcIm1pdlwiLG9yYW5nZTpcIndhblwiLG1zbjpcIm1zblwiLG1pcmFnbzpcIm1pclwiLHNrbGlrOlwic2tsXCIsYWRmb3g6XCJhZGZcIixldGFyZ2V0OlwiZXRnXCIseWFuZGV4OlwieWFuXCIsZWJheTpcImViYVwiLHNlYXJjaGFsbGlhbmNlOlwic2FsXCIsYmluZzpcImJpblwiLG5hdmVyOlwibmF2XCIsYmFpZHU6XCJiZHVcIixxd2FudDpcInF3dFwifSxmPXtzZWFyY2g6XCJzXCIsY29udGVudDpcImNcIn07dGhpcy5hdF9tZWRpdW09XCJzbFwiO3RoaXMuYXRfdGVybT10aGlzLmF0X25ldHdvcms9dGhpcy5hdF92YXJpYW50PXRoaXMuYXRfY3JlYXRpb249dGhpcy5hdF9wbGF0Zm9ybT10aGlzLmF0X2NhbXBhaWduPVwiXCI7dGhpcy5mb3JtYXQ9ZnVuY3Rpb24oKXt2YXIgYT1cInNlY1wiLGU9Yih0aGlzLmF0X2NhbXBhaWduKSxnPWhbdGhpcy5hdF9wbGF0Zm9ybV18fFwiXCIsZD1iKHRoaXMuYXRfY3JlYXRpb24pLHA9Yih0aGlzLmF0X3ZhcmlhbnQpLHI9Zlt0aGlzLmF0X25ldHdvcmtdfHxcblwiXCIsbT1iKHRoaXMuYXRfdGVybSk7cmV0dXJuIGMoYSsoXCItXCIrZStcIi1cIitnK1wiLVwiK2QrXCItXCIrcCtcIi1cIityK1wiLVwiK20pKX07dGhpcy5zZXRQcm9wZXJ0aWVzPWZ1bmN0aW9uKGIpe3RoaXMuYXRfY2FtcGFpZ249YS51dGlscy5nZXRRdWVyeVN0cmluZ1ZhbHVlKFwiYXRfY2FtcGFpZ25cIixiKXx8XCJcIjt0aGlzLmF0X3BsYXRmb3JtPWEudXRpbHMuZ2V0UXVlcnlTdHJpbmdWYWx1ZShcImF0X3BsYXRmb3JtXCIsYil8fFwiXCI7dGhpcy5hdF9jcmVhdGlvbj1hLnV0aWxzLmdldFF1ZXJ5U3RyaW5nVmFsdWUoXCJhdF9jcmVhdGlvblwiLGIpfHxcIlwiO3RoaXMuYXRfdmFyaWFudD1hLnV0aWxzLmdldFF1ZXJ5U3RyaW5nVmFsdWUoXCJhdF92YXJpYW50XCIsYil8fFwiXCI7dGhpcy5hdF9uZXR3b3JrPWEudXRpbHMuZ2V0UXVlcnlTdHJpbmdWYWx1ZShcImF0X25ldHdvcmtcIixiKXx8XCJcIjt0aGlzLmF0X3Rlcm09YS51dGlscy5nZXRRdWVyeVN0cmluZ1ZhbHVlKFwiYXRfdGVybVwiLGIpfHxcIlwifX07dGhpcy5FbWFpbD1mdW5jdGlvbigpe3ZhciBoPVxue2FjcXVpc2l0aW9uOlwiZXJlY1wiLHJldGVudGlvbjpcImVwclwiLHByb21vdGlvbjpcImVzXCJ9O3RoaXMuYXRfbWVkaXVtPVwiZW1haWxcIjt0aGlzLmF0X3NlbmRfdGltZT10aGlzLmF0X3JlY2lwaWVudF9saXN0PXRoaXMuYXRfcmVjaXBpZW50X2lkPXRoaXMuYXRfbGluaz10aGlzLmF0X3NlbmRfZGF0ZT10aGlzLmF0X2NyZWF0aW9uPXRoaXMuYXRfY2FtcGFpZ249dGhpcy5hdF9lbWFpbHR5cGU9XCJcIjt0aGlzLmZvcm1hdD1mdW5jdGlvbigpe3ZhciBhPWhbdGhpcy5hdF9lbWFpbHR5cGVdfHxoLnByb21vdGlvbixmPWIodGhpcy5hdF9jYW1wYWlnbiksZT1iKHRoaXMuYXRfY3JlYXRpb24pLGc9dGhpcy5hdF9zZW5kX2RhdGUsZD1iKHRoaXMuYXRfbGluayksYT1hKyhcIi1cIitmK1wiLVwiK2UrXCItXCIrZytcIi1cIitkK1wiLVwiKyh0aGlzLmF0X3JlY2lwaWVudF9pZCsodGhpcy5hdF9yZWNpcGllbnRfbGlzdD9cIkBcIit0aGlzLmF0X3JlY2lwaWVudF9saXN0OlwiXCIpKStcIi1cIit0aGlzLmF0X3NlbmRfdGltZSk7XG5yZXR1cm4gYyhhKX07dGhpcy5zZXRQcm9wZXJ0aWVzPWZ1bmN0aW9uKGIpe3RoaXMuYXRfZW1haWx0eXBlPWEudXRpbHMuZ2V0UXVlcnlTdHJpbmdWYWx1ZShcImF0X2VtYWlsdHlwZVwiLGIpfHxcIlwiO3RoaXMuYXRfY2FtcGFpZ249YS51dGlscy5nZXRRdWVyeVN0cmluZ1ZhbHVlKFwiYXRfY2FtcGFpZ25cIixiKXx8XCJcIjt0aGlzLmF0X2NyZWF0aW9uPWEudXRpbHMuZ2V0UXVlcnlTdHJpbmdWYWx1ZShcImF0X2NyZWF0aW9uXCIsYil8fFwiXCI7dGhpcy5hdF9zZW5kX2RhdGU9YS51dGlscy5nZXRRdWVyeVN0cmluZ1ZhbHVlKFwiYXRfc2VuZF9kYXRlXCIsYil8fFwiXCI7dGhpcy5hdF9saW5rPWEudXRpbHMuZ2V0UXVlcnlTdHJpbmdWYWx1ZShcImF0X2xpbmtcIixiKXx8XCJcIjt0aGlzLmF0X3JlY2lwaWVudF9pZD1hLnV0aWxzLmdldFF1ZXJ5U3RyaW5nVmFsdWUoXCJhdF9yZWNpcGllbnRfaWRcIixiKXx8XCJcIjt0aGlzLmF0X3JlY2lwaWVudF9saXN0PWEudXRpbHMuZ2V0UXVlcnlTdHJpbmdWYWx1ZShcImF0X3JlY2lwaWVudF9saXN0XCIsXG5iKXx8XCJcIjt0aGlzLmF0X3NlbmRfdGltZT1hLnV0aWxzLmdldFF1ZXJ5U3RyaW5nVmFsdWUoXCJhdF9zZW5kX3RpbWVcIixiKXx8XCJcIn19O3RoaXMuQWZmaWxpYXRlPWZ1bmN0aW9uKCl7dGhpcy5hdF9tZWRpdW09XCJhZmZpbGlhdGVcIjt0aGlzLmF0X3ZhcmlhbnQ9dGhpcy5hdF9jcmVhdGlvbj10aGlzLmF0X2Zvcm1hdD10aGlzLmF0X2lkZW50aWZpZXI9dGhpcy5hdF90eXBlPXRoaXMuYXRfY2FtcGFpZ249XCJcIjt0aGlzLmZvcm1hdD1mdW5jdGlvbigpe3ZhciBhPVwiYWxcIixoPWIodGhpcy5hdF9jYW1wYWlnbiksZj1iKHRoaXMuYXRfdHlwZSksZT1iKHRoaXMuYXRfaWRlbnRpZmllciksZz1iKHRoaXMuYXRfZm9ybWF0KSxkPWIodGhpcy5hdF9jcmVhdGlvbikscD1iKHRoaXMuYXRfdmFyaWFudCk7cmV0dXJuIGMoYSsoXCItXCIraCtcIi1cIitmK1wiLVwiK2UrXCItXCIrZytcIi1cIitkK1wiLVwiK3ApKX07dGhpcy5zZXRQcm9wZXJ0aWVzPWZ1bmN0aW9uKGIpe3RoaXMuYXRfY2FtcGFpZ249YS51dGlscy5nZXRRdWVyeVN0cmluZ1ZhbHVlKFwiYXRfY2FtcGFpZ25cIixcbmIpfHxcIlwiO3RoaXMuYXRfdHlwZT1hLnV0aWxzLmdldFF1ZXJ5U3RyaW5nVmFsdWUoXCJhdF90eXBlXCIsYil8fFwiXCI7dGhpcy5hdF9pZGVudGlmaWVyPWEudXRpbHMuZ2V0UXVlcnlTdHJpbmdWYWx1ZShcImF0X2lkZW50aWZpZXJcIixiKXx8XCJcIjt0aGlzLmF0X2Zvcm1hdD1hLnV0aWxzLmdldFF1ZXJ5U3RyaW5nVmFsdWUoXCJhdF9mb3JtYXRcIixiKXx8XCJcIjt0aGlzLmF0X2NyZWF0aW9uPWEudXRpbHMuZ2V0UXVlcnlTdHJpbmdWYWx1ZShcImF0X2NyZWF0aW9uXCIsYil8fFwiXCI7dGhpcy5hdF92YXJpYW50PWEudXRpbHMuZ2V0UXVlcnlTdHJpbmdWYWx1ZShcImF0X3ZhcmlhbnRcIixiKXx8XCJcIn19O3RoaXMuRGlzcGxheT1mdW5jdGlvbigpe3RoaXMuYXRfbWVkaXVtPVwiZGlzcGxheVwiO3RoaXMuYXRfZGV0YWlsX3BsYWNlbWVudD10aGlzLmF0X2dlbmVyYWxfcGxhY2VtZW50PXRoaXMuYXRfY2hhbm5lbD10aGlzLmF0X2Zvcm1hdD10aGlzLmF0X3ZhcmlhbnQ9dGhpcy5hdF9jcmVhdGlvbj10aGlzLmF0X2NhbXBhaWduPVxuXCJcIjt0aGlzLmZvcm1hdD1mdW5jdGlvbigpe3ZhciBhPVwiYWRcIixoPWIodGhpcy5hdF9jYW1wYWlnbiksZj1iKHRoaXMuYXRfY3JlYXRpb24pLGU9Yih0aGlzLmF0X3ZhcmlhbnQpLGc9Yih0aGlzLmF0X2Zvcm1hdCksZD1iKHRoaXMuYXRfY2hhbm5lbCkscD1iKHRoaXMuYXRfZ2VuZXJhbF9wbGFjZW1lbnQpLHI9Yih0aGlzLmF0X2RldGFpbF9wbGFjZW1lbnQpO3JldHVybiBjKGErKFwiLVwiK2grXCItXCIrZitcIi1cIitlK1wiLVwiK2crXCItXCIrZCtcIi1cIitwK1wiLVwiK3IpKX07dGhpcy5zZXRQcm9wZXJ0aWVzPWZ1bmN0aW9uKGIpe3RoaXMuYXRfY2FtcGFpZ249YS51dGlscy5nZXRRdWVyeVN0cmluZ1ZhbHVlKFwiYXRfY2FtcGFpZ25cIixiKXx8XCJcIjt0aGlzLmF0X2NyZWF0aW9uPWEudXRpbHMuZ2V0UXVlcnlTdHJpbmdWYWx1ZShcImF0X2NyZWF0aW9uXCIsYil8fFwiXCI7dGhpcy5hdF92YXJpYW50PWEudXRpbHMuZ2V0UXVlcnlTdHJpbmdWYWx1ZShcImF0X3ZhcmlhbnRcIixiKXx8XCJcIjt0aGlzLmF0X2Zvcm1hdD1cbmEudXRpbHMuZ2V0UXVlcnlTdHJpbmdWYWx1ZShcImF0X2Zvcm1hdFwiLGIpfHxcIlwiO3RoaXMuYXRfY2hhbm5lbD1hLnV0aWxzLmdldFF1ZXJ5U3RyaW5nVmFsdWUoXCJhdF9jaGFubmVsXCIsYil8fFwiXCI7dGhpcy5hdF9nZW5lcmFsX3BsYWNlbWVudD1hLnV0aWxzLmdldFF1ZXJ5U3RyaW5nVmFsdWUoXCJhdF9nZW5lcmFsX3BsYWNlbWVudFwiLGIpfHxcIlwiO3RoaXMuYXRfZGV0YWlsX3BsYWNlbWVudD1hLnV0aWxzLmdldFF1ZXJ5U3RyaW5nVmFsdWUoXCJhdF9kZXRhaWxfcGxhY2VtZW50XCIsYil8fFwiXCJ9fTt0aGlzLkN1c3RvbT1mdW5jdGlvbigpe3RoaXMuYXRfY3VzdG9tND10aGlzLmF0X2N1c3RvbTM9dGhpcy5hdF9jdXN0b20yPXRoaXMuYXRfY3VzdG9tMT10aGlzLmF0X2NhbXBhaWduPXRoaXMuYXRfbWVkaXVtPVwiXCI7dGhpcy5mb3JtYXQ9ZnVuY3Rpb24oKXt2YXIgYT1cIlwiOy9cXGQrJC8udGVzdCh0aGlzLmF0X21lZGl1bSkmJihhPS9cXGQrJC8uZXhlYyh0aGlzLmF0X21lZGl1bSlbMF0pO3ZhciBhPVxuXCJjc1wiK2EsaD1iKHRoaXMuYXRfY2FtcGFpZ24pLGY9Yih0aGlzLmF0X2N1c3RvbTEpLGU9Yih0aGlzLmF0X2N1c3RvbTIpLGc9Yih0aGlzLmF0X2N1c3RvbTMpLGQ9Yih0aGlzLmF0X2N1c3RvbTQpO3JldHVybiBjKGErKFwiLVwiK2grXCItXCIrZitcIi1cIitlK1wiLVwiK2crXCItXCIrZCkpfTt0aGlzLnNldFByb3BlcnRpZXM9ZnVuY3Rpb24oYil7dGhpcy5hdF9tZWRpdW09YS51dGlscy5nZXRRdWVyeVN0cmluZ1ZhbHVlKFwiYXRfbWVkaXVtXCIsYil8fFwiXCI7dGhpcy5hdF9jYW1wYWlnbj1hLnV0aWxzLmdldFF1ZXJ5U3RyaW5nVmFsdWUoXCJhdF9jYW1wYWlnblwiLGIpfHxcIlwiO3RoaXMuYXRfY3VzdG9tMT1hLnV0aWxzLmdldFF1ZXJ5U3RyaW5nVmFsdWUoXCJhdF9jdXN0b20xXCIsYil8fFwiXCI7dGhpcy5hdF9jdXN0b20yPWEudXRpbHMuZ2V0UXVlcnlTdHJpbmdWYWx1ZShcImF0X2N1c3RvbTJcIixiKXx8XCJcIjt0aGlzLmF0X2N1c3RvbTM9YS51dGlscy5nZXRRdWVyeVN0cmluZ1ZhbHVlKFwiYXRfY3VzdG9tM1wiLFxuYil8fFwiXCI7dGhpcy5hdF9jdXN0b200PWEudXRpbHMuZ2V0UXVlcnlTdHJpbmdWYWx1ZShcImF0X2N1c3RvbTRcIixiKXx8XCJcIn19O3RoaXMubWVkaXVtPXtzbDp0aGlzLlNwb25zb3JlZExpbmtzLGVtYWlsOnRoaXMuRW1haWwsYWZmaWxpYXRlOnRoaXMuQWZmaWxpYXRlLGRpc3BsYXk6dGhpcy5EaXNwbGF5fX0sdj1mdW5jdGlvbihiLGMpe3ZhciBoPWEuc3RvcmFnZVtkXShiKTtpZihudWxsIT09aClyZXR1cm5cIm9iamVjdFwiPT09dHlwZW9mIGgmJiEoaCBpbnN0YW5jZW9mIEFycmF5KTthLnN0b3JhZ2VbbF0oYix7fSxjKTtyZXR1cm4hMH0sej1mdW5jdGlvbihiLGMpe3ZhciBoPWEuZ2V0Q29udGV4dChcImNhbXBhaWduc1wiKXx8e307aFtiXT1jO2Euc2V0Q29udGV4dChcImNhbXBhaWduc1wiLGgpfTsoZnVuY3Rpb24oKXthLnBsdWdpbnMud2FpdEZvckRlcGVuZGVuY2llcyhbXCJTdG9yYWdlXCIsXCJVdGlsc1wiXSxmdW5jdGlvbigpe2w9XCJzZXRcIisoay5kb21haW5BdHRyaWJ1dGlvbj9cIlwiOlwiUHJpdmF0ZVwiKTtcbmQ9XCJnZXRcIisoay5kb21haW5BdHRyaWJ1dGlvbj9cIlwiOlwiUHJpdmF0ZVwiKTtlPWEuc3RvcmFnZVtkXShbXCJhdHJlZGlyXCIsXCJnb3BjXCJdKTtuPWEuc3RvcmFnZVtkXShbXCJhdHJlZGlyXCIsXCJnb3BjX2VyclwiXSk7bT1hLnN0b3JhZ2VbZF0oW1wiYXRyZWRpclwiLFwiY2FtcFwiXSk7YS5zdG9yYWdlLmRlbChbXCJhdHJlZGlyXCIsXCJnb3BjXCJdKTthLnN0b3JhZ2UuZGVsKFtcImF0cmVkaXJcIixcImdvcGNfZXJyXCJdKTthLnN0b3JhZ2UuZGVsKFtcImF0cmVkaXJcIixcImNhbXBcIl0pO2c9YS5zdG9yYWdlW2RdKFtcImF0c2Vzc2lvblwiLFwiaGlzdG9fY2FtcFwiXSk7cT1hLnN0b3JhZ2VbZF0oW1wiYXRyZW1hblwiLFwiY2FtcFwiXSk7Yz1hLnN0b3JhZ2VbZF0oW1wiYXRyZW1hblwiLFwiZGF0ZVwiXSk7dmFyIHQ9YS51dGlscy5nZXRMb2NhdGlvbigpLHU9YS51dGlscy5nZXRRdWVyeVN0cmluZ1ZhbHVlKFwiYXRfbWVkaXVtXCIsdCk7aWYodSl7dmFyIEI9bmV3IHksdT1cImZ1bmN0aW9uXCI9PT10eXBlb2YgQi5tZWRpdW1bdV0/bmV3IEIubWVkaXVtW3VdOlxubmV3IEIuQ3VzdG9tO3Uuc2V0UHJvcGVydGllcyh0KTtmPXUuZm9ybWF0KCl9ZWxzZSBmPWEudXRpbHMuZ2V0UXVlcnlTdHJpbmdWYWx1ZShcInh0b3JcIix0KTtiPWEudXRpbHMuZ2V0UXVlcnlTdHJpbmdWYWx1ZShcInh0ZHRcIix0KTtoPWEudXRpbHMuZ2V0UXVlcnlTdHJpbmdWYWx1ZShcInh0c1wiLHQpO3M9YS5nZXRDb250ZXh0KFwiZm9yY2VkQ2FtcGFpZ25cIik7cj0hIWEuZ2V0Q29uZmlnKFwicmVkaXJlY3RcIik7dz0hIShmJiZiJiZoKTtwPSExO3cmJih0PShuZXcgRGF0ZSkuZ2V0VGltZSgpLzZFNCxwPSFyJiZoIT09YS5nZXRDb25maWcoXCJzaXRlXCIpfHwwPnQtYnx8dC1iPj1hLmdldENvbmZpZyhcInZpc2l0TGlmZXRpbWVcIikpO3Q9c3x8bXx8ZjtyJiZ0JiZ2KFwiYXRyZWRpclwiLHtwYXRoOlwiL1wiLGVuZDphLmdldENvbmZpZyhcInJlZGlyZWN0aW9uTGlmZXRpbWVcIil9KSYmKGEuc3RvcmFnZVtsXShbXCJhdHJlZGlyXCIsXCJjYW1wXCJdLHQpLHU9dD0hMSxzfHwobT8odD1lLHU9bik6KHQ9dyx1PXApKSxcbmEuc3RvcmFnZVtsXShbXCJhdHJlZGlyXCIsXCJnb3BjXCJdLHQpLGEuc3RvcmFnZVtsXShbXCJhdHJlZGlyXCIsXCJnb3BjX2VyclwiXSx1KSk7IXImJnEmJih6KFwieHRvclwiLHEpLHQ9KG5ldyBEYXRlKS5nZXRUaW1lKCkvMzZFNSx0PU1hdGguZmxvb3IodC1jKSx6KFwicm9pbmJoXCIsMDw9dD90OjApKTtyfHwodD1udWxsLHQ9bT9lP3N8fHQ6c3x8bTp3P3M6c3x8Znx8dCxnJiZnIGluc3RhbmNlb2YgQXJyYXkmJi0xPGcuaW5kZXhPZih0KSYmKHQ9bnVsbCksdCYmeihcInh0b1wiLHQpKTtpZighciYmIXMpe3ZhciBBO20/biYmKEE9bSk6cCYmKEE9Zik7QSYmeihcInBndFwiLEEpfWlmKCFyJiYoQT1tP3N8fG06c3x8Znx8bnVsbCkmJiEoIXMmJiFtJiZ3JiZwfHwhcyYmbSYmZSYmbikpe2lmKCghZ3x8ZyBpbnN0YW5jZW9mIEFycmF5JiYwPmcuaW5kZXhPZihBKSkmJnYoXCJhdHNlc3Npb25cIix7cGF0aDpcIi9cIixzZXNzaW9uOjYwKmEuZ2V0Q29uZmlnKFwidmlzaXRMaWZldGltZVwiKX0pKWEuc3RvcmFnZVtsXShbXCJhdHNlc3Npb25cIixcblwiaGlzdG9fY2FtcFwiXSxnJiZnLnB1c2goQSk/ZzpbQV0pO3EmJiFrLmxhc3RQZXJzaXN0ZW5jZXx8IXYoXCJhdHJlbWFuXCIse3BhdGg6XCIvXCIsc2Vzc2lvbjo4NjQwMCprLmxpZmV0aW1lfSl8fChhLnN0b3JhZ2VbbF0oW1wiYXRyZW1hblwiLFwiY2FtcFwiXSxBKSxhLnN0b3JhZ2VbbF0oW1wiYXRyZW1hblwiLFwiZGF0ZVwiXSwobmV3IERhdGUpLmdldFRpbWUoKS8zNkU1KSl9YS5lbWl0KFwiQ2FtcGFpZ25zOnByb2Nlc3M6ZG9uZVwiLHtsdmw6XCJJTkZPXCJ9KX0pfSkoKX07d2luZG93LkVjaG8xMjAwQVRJbnRlcm5ldC5UcmFja2VyLmFkZFBsdWdpbihcIkNhbXBhaWduc1wiKTtcbn0pLmNhbGwod2luZG93KTs7KGZ1bmN0aW9uKCl7dmFyIGRmbHRQbHVnaW5DZmc9e1wiaW5mb1wiOnRydWV9O3ZhciBkZmx0R2xvYmFsQ2ZnPXt9O3dpbmRvdy5FY2hvMTIwMEFUSW50ZXJuZXQuVHJhY2tlci5QbHVnaW5zLkNsaWNrcz1mdW5jdGlvbihhKXt2YXIgaz1mdW5jdGlvbihhKXt2YXIgZD1cIlwiO3N3aXRjaChhKXtjYXNlIFwiZXhpdFwiOmQ9XCJTXCI7YnJlYWs7Y2FzZSBcImRvd25sb2FkXCI6ZD1cIlRcIjticmVhaztjYXNlIFwiYWN0aW9uXCI6ZD1cIkFcIjticmVhaztjYXNlIFwibmF2aWdhdGlvblwiOmQ9XCJOXCJ9cmV0dXJuIGR9LGw9ZnVuY3Rpb24oZSl7dmFyIGQ9ZS5uYW1lO2EuZXhlYyhcIlV0aWxzXCIsXCJtYW5hZ2VDaGFwdGVyc1wiLFtlLFwiY2hhcHRlclwiLDNdLGZ1bmN0aW9uKGEpe2Q9YSsoZD9kOlwiXCIpfSk7cmV0dXJuIGR9LGQ9ZnVuY3Rpb24oZSl7dmFyIGQ9e3A6bChlKSxzMjplLmxldmVsMnx8XCJcIixjbGljazprKGUudHlwZSl8fFwiXCJ9LG09W1wiY2xpY2tcIl0sZz1hLmdldENvbnRleHQoXCJwYWdlXCIpfHx7fTtkLnBjbGljaz1sKGcpO2QuczJjbGljaz1nLmxldmVsMnx8XCJcIjt2YXIgZz1lLmN1c3RvbU9iamVjdCxxPSExO2cmJihxPSEwLGc9YS5wcm9jZXNzVGFnT2JqZWN0KFwic3RjXCIsXG5tLGcpLGQuc3RjPXt2YWx1ZTpFY2hvMTIwMEFUSW50ZXJuZXQuVXRpbHMuanNvblNlcmlhbGl6ZShnKSxvcHRpb25zOntoaXRUeXBlOm0sZW5jb2RlOiEwLHNlcGFyYXRvcjpcIixcIix0cnVuY2F0ZTohMH19KTthLnNlbmRIaXQoZCxbW1wiaGl0VHlwZVwiLG1dXSxlLmNhbGxiYWNrLG51bGwscSl9O2EuY2xpY2s9e307YS5jbGlja0xpc3RlbmVyPXRoaXMuY2xpY2tMaXN0ZW5lcj17fTthLmNsaWNrLnNlbmQ9dGhpcy5zZW5kPWZ1bmN0aW9uKGUpe3ZhciBrPSEwLG09bnVsbDtlJiZlLmhhc093blByb3BlcnR5KFwiZXZlbnRcIikmJihtPWUuZXZlbnR8fHdpbmRvdy5ldmVudCk7IUVjaG8xMjAwQVRJbnRlcm5ldC5VdGlscy5pc1RhYk9wZW5pbmdBY3Rpb24obSkmJmUuZWxlbSYmKGs9YS50ZWNoQ2xpY2tzLm1hbmFnZUNsaWNrKGUuZWxlbSxtKSk7ZChlKTtyZXR1cm4ga307YS5jbGlja0xpc3RlbmVyLnNlbmQ9dGhpcy5jbGlja0xpc3RlbmVyLnNlbmQ9ZnVuY3Rpb24oZSl7aWYoZS5lbGVtKXt2YXIgaz1cImNsaWNrXCI7YS5wbHVnaW5zLmV4ZWMoXCJUZWNoQ2xpY2tzXCIsXG5cImlzRm9ybVN1Ym1pdFwiLFtlLmVsZW1dLGZ1bmN0aW9uKGEpe2s9YT9cInN1Ym1pdFwiOlwiY2xpY2tcIn0pO0VjaG8xMjAwQVRJbnRlcm5ldC5VdGlscy5hZGRFdnRMaXN0ZW5lcihlLmVsZW0sayxmdW5jdGlvbihtKXtFY2hvMTIwMEFUSW50ZXJuZXQuVXRpbHMuaXNUYWJPcGVuaW5nQWN0aW9uKG0pfHxhLnRlY2hDbGlja3MubWFuYWdlQ2xpY2soZS5lbGVtLG0pO2QoZSl9KX19O2EuY2xpY2suc2V0PXRoaXMuc2V0PWZ1bmN0aW9uKGUpe2EuZGlzcGF0Y2hTdWJzY3JpYmUoXCJjbGlja1wiKTthLnNldENvbnRleHQoXCJjbGlja1wiLHtuYW1lOmwoZSksbGV2ZWwyOmUubGV2ZWwyfHxcIlwiLGN1c3RvbU9iamVjdDplLmN1c3RvbU9iamVjdH0pO2Euc2V0UGFyYW0oXCJjbGlja1wiLGsoZS50eXBlKXx8XCJcIix7aGl0VHlwZTpbXCJjbGlja1wiXX0pfTthLmNsaWNrLm9uRGlzcGF0Y2g9dGhpcy5vbkRpc3BhdGNoPWZ1bmN0aW9uKGUpe3ZhciBkPVtcImNsaWNrXCJdLG09YS5nZXRDb250ZXh0KFwiY2xpY2tcIil8fHt9LGc9YS5nZXRDb250ZXh0KFwicGFnZVwiKXx8XG57fTthLnNldFBhcmFtKFwicGNsaWNrXCIsbChnKSx7aGl0VHlwZTpkfSk7YS5zZXRQYXJhbShcInMyY2xpY2tcIixnLmxldmVsMnx8XCJcIix7aGl0VHlwZTpkfSk7YS5zZXRQYXJhbShcInBcIixtLm5hbWUse2hpdFR5cGU6ZH0pO2Euc2V0UGFyYW0oXCJzMlwiLG0ubGV2ZWwyLHtoaXRUeXBlOmR9KTsobT1tLmN1c3RvbU9iamVjdCk/YS5wcm9jZXNzQ29udGV4dE9iamVjdEFuZFNlbmRIaXQoXCJzdGNcIix7aGl0VHlwZTpkLGVuY29kZTohMCxzZXBhcmF0b3I6XCIsXCIsdHJ1bmNhdGU6ITB9LG0sZSk6YS5tYW5hZ2VTZW5kKGZ1bmN0aW9uKCl7YS5zZW5kSGl0KG51bGwsW1tcImhpdFR5cGVcIixkXV0sZSl9KTthLnNldENvbnRleHQoXCJjbGlja1wiLHZvaWQgMCl9fTt3aW5kb3cuRWNobzEyMDBBVEludGVybmV0LlRyYWNrZXIuYWRkUGx1Z2luKFwiQ2xpY2tzXCIpO1xufSkuY2FsbCh3aW5kb3cpOzsoZnVuY3Rpb24oKXt2YXIgZGZsdFBsdWdpbkNmZz17XCJjbGllbnRTaWRlTW9kZVwiOlwiYWx3YXlzXCIsXCJ1c2VySWRDb29raWVEdXJhdGlvblwiOjM5NyxcInVzZXJJZEV4cGlyYXRpb25Nb2RlXCI6XCJyZWxhdGl2ZVwiLFwib3B0T3V0XCI6XCJPUFQtT1VUXCIsXCJ1c2VySWRTdG9yYWdlTmFtZVwiOlwiYXR1c2VyaWRcIixcIm9wdE91dFN0b3JhZ2VOYW1lXCI6XCJhdG9wdGVkb3V0XCIsXCJpbmZvXCI6dHJ1ZX07dmFyIGRmbHRHbG9iYWxDZmc9e307d2luZG93LkVjaG8xMjAwQVRJbnRlcm5ldC5UcmFja2VyLlBsdWdpbnMuQ2xpZW50U2lkZVVzZXJJZD1mdW5jdGlvbihhKXt2YXIgaz17fSxsPXZvaWQgMCxkPW51bGwsZT0hMSxuPSExLG09ITEsZz1cIlwiLHE9XCJcIixjPSExLGY9ITEsYj0tMTthLmNvbmZpZ1BsdWdpbihcIkNsaWVudFNpZGVVc2VySWRcIixkZmx0UGx1Z2luQ2ZnfHx7fSxmdW5jdGlvbihhKXtrPWF9KTt2YXIgaD1mdW5jdGlvbigpe2lmKFwicmVsYXRpdmVcIj09PWsudXNlcklkRXhwaXJhdGlvbk1vZGV8fFwiZml4ZWRcIj09PWsudXNlcklkRXhwaXJhdGlvbk1vZGUmJm51bGw9PT1kfHxjKXt2YXIgYj1uZXcgRGF0ZTtiLnNldFRpbWUoYi5nZXRUaW1lKCkrODY0RTUqay51c2VySWRDb29raWVEdXJhdGlvbik7YS5zdG9yYWdlLnNldChxLGcse2VuZDpiLHBhdGg6XCIvXCJ9LGYpO2I9YS5zdG9yYWdlLmdldChxLCEwKTtFY2hvMTIwMEFUSW50ZXJuZXQuVXRpbHMuY29uc2VudCYmIWMmJmchPT1iJiZhLnNldFBhcmFtKFwiaWRjbGllbnRcIixnK1wiLU5PXCIse211bHRpaGl0OiEwLFxucGVybWFuZW50OiEwLGhpdFR5cGU6W1wiYWxsXCJdfSl9fSxzPWZ1bmN0aW9uKCl7YS5zZXRQYXJhbShcImlkY2xpZW50XCIsZyx7bXVsdGloaXQ6ITAscGVybWFuZW50OiEwLGhpdFR5cGU6W1wiYWxsXCJdfSk7aCgpfSxyPWZ1bmN0aW9uKCl7bD1hLmdldENvbnRleHQoXCJ1c2VySWRlbnRpZmllclwiKTtkPWEuc3RvcmFnZS5nZXQoXCJhdHVzZXJpZFwiKTt2YXIgYj0hMTtpZihcInJlcXVpcmVkXCI9PT1rLmNsaWVudFNpZGVNb2RlKXt2YXIgaD1cIlwiO3dpbmRvdy5uYXZpZ2F0b3ImJihoPXdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50KTtpZigvU2FmYXJpLy50ZXN0KGgpJiYhL0Nocm9tZS8udGVzdChoKXx8L2lQaG9uZXxpUG9kfGlQYWQvLnRlc3QoaCkpYj0hMH1lbHNlXCJhbHdheXNcIj09PWsuY2xpZW50U2lkZU1vZGUmJihiPSEwKTtlPWI7Yj0hMTtoPUVjaG8xMjAwQVRJbnRlcm5ldC5VdGlscy5vcHRlZE91dDshMT09PWgmJihhLnN0b3JhZ2UuZGVsKFwiYXRvcHRlZG91dFwiKSxhLmdldFBhcmFtKFwiaWRjbGllbnRcIik9PT1cbmsub3B0T3V0JiZhLmRlbFBhcmFtKFwiaWRjbGllbnRcIikpO3ZhciByPWEuc3RvcmFnZS5nZXQoXCJhdG9wdGVkb3V0XCIsITApO2lmKCEwPT09aHx8cj09PWsub3B0T3V0KWI9ITA7YiYmKEVjaG8xMjAwQVRJbnRlcm5ldC5VdGlscy5vcHRlZE91dD0hMCk7bj1iO209XCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBsO2lmKGV8fG58fG0pcT1rLnVzZXJJZFN0b3JhZ2VOYW1lLGY9Yz0hMSxuPyhnPWsub3B0T3V0LHE9ay5vcHRPdXRTdG9yYWdlTmFtZSxmPWM9ITApOmEuZ2V0Q29uZmlnKFwiZGlzYWJsZUNvb2tpZVwiKXx8YS5nZXRDb25maWcoXCJkaXNhYmxlU3RvcmFnZVwiKT8oZz1hLmdldFBhcmFtKFwiaWRjbGllbnRcIiksYz0hMCk6bT8oZz1sLGM9ITApOmc9bnVsbCE9PWQ/ZDpFY2hvMTIwMEFUSW50ZXJuZXQuVXRpbHMudXVpZCgpLnY0KCkscygpfSx3PWZ1bmN0aW9uKGEpe2EmJihhPWEuZGV0YWlsKSYmXCJjbGllbnRzaWRldXNlcmlkXCI9PT1hLm5hbWUmJmEuaWQ9PT1iJiZyKCl9OyhmdW5jdGlvbigpe2EucGx1Z2lucy53YWl0Rm9yRGVwZW5kZW5jaWVzKFtcIlN0b3JhZ2VcIl0sXG5mdW5jdGlvbigpe3ZhciBhPUVjaG8xMjAwQVRJbnRlcm5ldC5VdGlscy51dWlkKCk7Yj1wYXJzZUludChhLm51bSg4KSk7RWNobzEyMDBBVEludGVybmV0LlV0aWxzLnJlbW92ZU9wdE91dEV2ZW50KHcpO0VjaG8xMjAwQVRJbnRlcm5ldC5VdGlscy5hZGRPcHRPdXRFdmVudChiLHcpO3IoKX0pfSkoKTthLmNsaWVudFNpZGVVc2VySWQ9e307YS5jbGllbnRTaWRlVXNlcklkLnNldD1mdW5jdGlvbihhKXtufHwoZz1hLGM9ITAscT1rLnVzZXJJZFN0b3JhZ2VOYW1lLGY9ITEscygpKX07YS5jbGllbnRTaWRlVXNlcklkLnN0b3JlPWZ1bmN0aW9uKCl7Zj1jPSEwO2goKX07YS5jbGllbnRTaWRlVXNlcklkLmdldD1mdW5jdGlvbigpe3JldHVybiBnfX07d2luZG93LkVjaG8xMjAwQVRJbnRlcm5ldC5UcmFja2VyLmFkZFBsdWdpbihcIkNsaWVudFNpZGVVc2VySWRcIik7XG59KS5jYWxsKHdpbmRvdyk7OyhmdW5jdGlvbigpe3ZhciBkZmx0UGx1Z2luQ2ZnPXtcImRvbWFpbkF0dHJpYnV0aW9uXCI6dHJ1ZSxcImluZm9cIjp0cnVlfTt2YXIgZGZsdEdsb2JhbENmZz17XCJyZWRpcmVjdGlvbkxpZmV0aW1lXCI6MzB9O3dpbmRvdy5FY2hvMTIwMEFUSW50ZXJuZXQuVHJhY2tlci5QbHVnaW5zLkNvbnRleHRWYXJpYWJsZXM9ZnVuY3Rpb24oYSl7dmFyIGs9XCJcIixsPW51bGwsZCxlPVwiXCIsbj1cIlwiLG09e307YS5jb25maWdQbHVnaW4oXCJDb250ZXh0VmFyaWFibGVzXCIsZGZsdFBsdWdpbkNmZ3x8e30sZnVuY3Rpb24oYSl7bT1hfSk7YS5zZXRDb25maWcoXCJyZWRpcmVjdGlvbkxpZmV0aW1lXCIsZGZsdEdsb2JhbENmZy5yZWRpcmVjdGlvbkxpZmV0aW1lLCEwKTt2YXIgZz1mdW5jdGlvbihiLGMsZil7dmFyIGU9bnVsbDthLnBsdWdpbnMuZXhlYyhiLGMsZixmdW5jdGlvbihhKXtlPWF9KTtyZXR1cm4gZX0scT1mdW5jdGlvbihhLGIpe3JldHVybiBnKFwiVXRpbHNcIixhLGIpfSxjPWZ1bmN0aW9uKGIsYyl7dmFyIGY9bnVsbDthLnBsdWdpbnMuZXhlYyhcIlN0b3JhZ2VcIixiLGMsZnVuY3Rpb24oYSl7Zj1hfSk7cmV0dXJuIGZ9LGY9ZnVuY3Rpb24oKXthLnNldFBhcmFtKFwiaGxcIixmdW5jdGlvbigpe3ZhciBhPW5ldyBEYXRlO3JldHVybiBhLmdldEhvdXJzKCkrXG5cInhcIithLmdldE1pbnV0ZXMoKStcInhcIithLmdldFNlY29uZHMoKX0se3Blcm1hbmVudDohMCxoaXRUeXBlOltcImFsbFwiXX0pfSxiPWZ1bmN0aW9uKGEpeyhhPWQ/ZDpcImFjY19kaXJcIj09PWs/XCJcIjpudWxsIT09az9rOlwiYWNjX2RpclwiPT09bD9cIlwiOmw/bDphP2EucmVmZXJyZXI6XCJcIikmJihhPWEucmVwbGFjZSgvWzw+XS9nLFwiXCIpLnN1YnN0cmluZygwLDE2MDApLnJlcGxhY2UoLyYvZyxcIiRcIikpO3JldHVybiBhfTthLnBsdWdpbnMud2FpdEZvckRlcGVuZGVuY2llcyhbXCJTdG9yYWdlXCIsXCJVdGlsc1wiXSxmdW5jdGlvbigpe2U9XCJzZXRcIisobS5kb21haW5BdHRyaWJ1dGlvbj9cIlwiOlwiUHJpdmF0ZVwiKTtuPVwiZ2V0XCIrKG0uZG9tYWluQXR0cmlidXRpb24/XCJcIjpcIlByaXZhdGVcIik7dmFyIGg9cShcImdldExvY2F0aW9uXCIsW10pO2s9cShcImdldFF1ZXJ5U3RyaW5nVmFsdWVcIixbXCJ4dHJlZlwiLGhdKTt2b2lkIDA9PT1rJiYoaz1cIlwiKTtkPWEuZ2V0Q29udGV4dChcImZvcmNlZFJlZmVyZXJcIik7aWYoYS5nZXRDb25maWcoXCJyZWRpcmVjdFwiKSl7dmFyIGg9XG5xKFwiZ2V0RG9jdW1lbnRMZXZlbFwiLFtdKSxoPWQ/ZDpudWxsIT09az9rOmg/aC5yZWZlcnJlcjpcImFjY19kaXJcIixnO2lmKGc9aCl7Zz17cGF0aDpcIi9cIixlbmQ6YS5nZXRDb25maWcoXCJyZWRpcmVjdGlvbkxpZmV0aW1lXCIpfTt2YXIgcj1jKG4sW1wiYXRyZWRpclwiXSk7bnVsbCE9PXI/Zz1cIm9iamVjdFwiPT09dHlwZW9mIHImJiEociBpbnN0YW5jZW9mIEFycmF5KTooYyhlLFtcImF0cmVkaXJcIix7fSxnXSksZz0hMCl9ZyYmYyhlLFtbXCJhdHJlZGlyXCIsXCJyZWZcIl0saF0pfWVsc2V7bD1jKG4sW1tcImF0cmVkaXJcIixcInJlZlwiXV0pO2MoXCJkZWxcIixbW1wiYXRyZWRpclwiLFwicmVmXCJdXSk7YS5zZXRQYXJhbShcInZ0YWdcIixhLnZlcnNpb24se3Blcm1hbmVudDohMCxoaXRUeXBlOltcImFsbFwiXX0pO2Euc2V0UGFyYW0oXCJwdGFnXCIsXCJqc1wiLHtwZXJtYW5lbnQ6ITAsaGl0VHlwZTpbXCJhbGxcIl19KTtoPVwiXCI7dHJ5e2grPXdpbmRvdy5zY3JlZW4ud2lkdGgrXCJ4XCIrd2luZG93LnNjcmVlbi5oZWlnaHQrXCJ4XCIrd2luZG93LnNjcmVlbi5waXhlbERlcHRoK1xuXCJ4XCIrd2luZG93LnNjcmVlbi5jb2xvckRlcHRofWNhdGNoKHcpe31hLnNldFBhcmFtKFwiclwiLGgse3Blcm1hbmVudDohMCxoaXRUeXBlOltcImFsbFwiXX0pO2g9XCJcIjt3aW5kb3cuaW5uZXJXaWR0aD9oKz13aW5kb3cuaW5uZXJXaWR0aCtcInhcIit3aW5kb3cuaW5uZXJIZWlnaHQ6ZG9jdW1lbnQuYm9keSYmZG9jdW1lbnQuYm9keS5vZmZzZXRXaWR0aCYmKGgrPWRvY3VtZW50LmJvZHkub2Zmc2V0V2lkdGgrXCJ4XCIrZG9jdW1lbnQuYm9keS5vZmZzZXRIZWlnaHQpO2Euc2V0UGFyYW0oXCJyZVwiLGgse3Blcm1hbmVudDohMCxoaXRUeXBlOltcImFsbFwiXX0pO2YoKTt3aW5kb3cubmF2aWdhdG9yJiZhLnNldFBhcmFtKFwibG5nXCIsd2luZG93Lm5hdmlnYXRvci5sYW5ndWFnZXx8d2luZG93Lm5hdmlnYXRvci51c2VyTGFuZ3VhZ2Use3Blcm1hbmVudDohMCxoaXRUeXBlOltcImFsbFwiXX0pO2g9RWNobzEyMDBBVEludGVybmV0LlV0aWxzLnV1aWQoKS5udW0oMTMpO2Euc2V0UGFyYW0oXCJpZHBcIixoLHtwZXJtYW5lbnQ6ITAsXG5oaXRUeXBlOltcInBhZ2VcIixcImNsaWNrem9uZVwiXX0pO3dpbmRvdy5uYXZpZ2F0b3ImJmEuc2V0UGFyYW0oXCJqdlwiLHdpbmRvdy5uYXZpZ2F0b3IuamF2YUVuYWJsZWQoKT9cIjFcIjpcIjBcIix7aGl0VHlwZTpbXCJwYWdlXCJdfSk7aD1xKFwiZ2V0RG9jdW1lbnRMZXZlbFwiLFtdKTthLnNldFBhcmFtKFwicmVmXCIsYihoKSx7cGVybWFuZW50OiEwLGxhc3Q6ITAsaGl0VHlwZTpbXCJwYWdlXCJdfSl9YS5lbWl0KFwiQ29udGV4dFZhcmlhYmxlczpSZWFkeVwiLHtsdmw6XCJJTkZPXCJ9KX0pfTt3aW5kb3cuRWNobzEyMDBBVEludGVybmV0LlRyYWNrZXIuYWRkUGx1Z2luKFwiQ29udGV4dFZhcmlhYmxlc1wiKTtcbn0pLmNhbGwod2luZG93KTs7KGZ1bmN0aW9uKCl7dmFyIGRmbHRQbHVnaW5DZmc9e1wic3RvcmFnZUNhcGFjaXR5XCI6MSxcInRpbWVvdXRcIjo1MDAsXCJpbmZvXCI6dHJ1ZX07dmFyIGRmbHRHbG9iYWxDZmc9e307d2luZG93LkVjaG8xMjAwQVRJbnRlcm5ldC5UcmFja2VyLlBsdWdpbnMuT2ZmbGluZT1mdW5jdGlvbihhKXt2YXIgaz17fTthLmNvbmZpZ1BsdWdpbihcIk9mZmxpbmVcIixkZmx0UGx1Z2luQ2ZnfHx7fSxmdW5jdGlvbihhKXtrPWF9KTt2YXIgbD1mdW5jdGlvbigpe3ZhciBhPWxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiQVRPZmZsaW5lXCIpLGY9e2hpdHM6W10sbGVuZ3RoOjB9O2lmKGEpe3ZhciBiPUVjaG8xMjAwQVRJbnRlcm5ldC5VdGlscy5qc29uUGFyc2UoYSl8fHtoaXRzOltdfTtmLmhpdHM9Yi5oaXRzO2YubGVuZ3RoPWEubGVuZ3RofXJldHVybiBmfSxkPWZ1bmN0aW9uKGEpe3RyeXtsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcIkFUT2ZmbGluZVwiLEVjaG8xMjAwQVRJbnRlcm5ldC5VdGlscy5qc29uU2VyaWFsaXplKGEpKX1jYXRjaChmKXt9fSxlPWZ1bmN0aW9uKCl7cmV0dXJuIGwoKS5oaXRzfSxuPWZ1bmN0aW9uKGEpe2lmKGEpe2E9YS5zcGxpdCgvJnJlZj1cXC4qL2kpO3ZhciBmPVwiJmNuPW9mZmxpbmUmb2x0PVwiK1N0cmluZyhNYXRoLmZsb29yKChuZXcgRGF0ZSkuZ2V0VGltZSgpL1xuMUUzKSk7YT1hWzBdK2YrXCImcmVmPVwiKyhhWzFdfHxcIlwiKX1yZXR1cm4gYX0sbT1mdW5jdGlvbihhKXt2YXIgZj1sKCksYj1hLmxlbmd0aCxlPSEwO2lmKDQqKChmLmxlbmd0aHx8MTEpK2IpPjEwNDg1NzYqay5zdG9yYWdlQ2FwYWNpdHkpe3ZhciBlPSExLGc9Zi5oaXRzLnNoaWZ0KCk7aWYoXCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBnKWZvcih2YXIgZT0hMCxyPWcubGVuZ3RoO3I8YjspaWYoZz1mLmhpdHMuc2hpZnQoKSxcInVuZGVmaW5lZFwiIT09dHlwZW9mIGcpcis9Zy5sZW5ndGg7ZWxzZXtlPSExO2JyZWFrfX1lJiYoZi5oaXRzLnB1c2goYSksZCh7aGl0czpmLmhpdHN9KSl9LGc9ZnVuY3Rpb24oYyxmKXtpZih3aW5kb3cubmF2aWdhdG9yJiZ3aW5kb3cubmF2aWdhdG9yLm9uTGluZSl7dmFyIGI9ZSgpO2lmKDA8Yi5sZW5ndGgpe3ZhciBoPWIuc2hpZnQoKTtkKHtoaXRzOmJ9KTthLm9uVHJpZ2dlcihcIlRyYWNrZXI6SGl0OlNlbnQ6T2tcIixmdW5jdGlvbigpe2coYyxmKX0sITApO2Eub25UcmlnZ2VyKFwiVHJhY2tlcjpIaXQ6U2VudDpFcnJvclwiLFxuZnVuY3Rpb24oKXtnKGMsZil9LCEwKTthLnNlbmRVcmwoaCl9ZWxzZSBpZihjKXt2YXIgbD1udWxsO2EucGx1Z2lucy5leGVjKFwiVXRpbHNcIixcImdldFF1ZXJ5U3RyaW5nVmFsdWVcIixbXCJhXCIsY10sZnVuY3Rpb24oYSl7bD1hfSk7bD9zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YS5zZW5kVXJsKGMsZil9LGsudGltZW91dCk6YS5zZW5kVXJsKGMsZil9fWVsc2UgYyYmKG0obihjKSksZiYmZigpKX0scT1mdW5jdGlvbihjKXthLmJ1aWxkZXIuc2VuZFVybD1mdW5jdGlvbihhLGIpe2N8fHdpbmRvdy5uYXZpZ2F0b3ImJiF3aW5kb3cubmF2aWdhdG9yLm9uTGluZT8obShuKGEpKSxiJiZiKCkpOmcoYSxiKX19O2Eub2ZmbGluZT17fTthLm9mZmxpbmUuZ2V0TGVuZ3RoPWZ1bmN0aW9uKCl7cmV0dXJuIDQqbCgpLmxlbmd0aH07YS5vZmZsaW5lLnJlbW92ZT1mdW5jdGlvbigpe2Qoe2hpdHM6W119KX07YS5vZmZsaW5lLmdldD1lO2Eub2ZmbGluZS5zZW5kPWZ1bmN0aW9uKCl7ZyhudWxsLG51bGwpfTtcbmEucGx1Z2lucy53YWl0Rm9yRGVwZW5kZW5jaWVzKFtcIlV0aWxzXCJdLGZ1bmN0aW9uKCl7dmFyIGM9RWNobzEyMDBBVEludGVybmV0LlV0aWxzLmlzTG9jYWxTdG9yYWdlQXZhaWxhYmxlKCksZjt3aW5kb3cubmF2aWdhdG9yJiYoZj13aW5kb3cubmF2aWdhdG9yLm9uTGluZSk7YyYmXCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBmJiYoXCJyZXF1aXJlZFwiPT09ay5zdG9yYWdlTW9kZT9xKCExKTpcImFsd2F5c1wiPT09ay5zdG9yYWdlTW9kZSYmcSghMCkpO2EuZW1pdChcIk9mZmxpbmU6UmVhZHlcIix7bHZsOlwiSU5GT1wiLGRldGFpbHM6e2lzTG9jYWxTdG9yYWdlQXZhaWxhYmxlOmMsc3RvcmFnZU1vZGU6ay5zdG9yYWdlTW9kZSxpc09ubGluZTpmfX0pfSl9O3dpbmRvdy5FY2hvMTIwMEFUSW50ZXJuZXQuVHJhY2tlci5hZGRQbHVnaW4oXCJPZmZsaW5lXCIpO1xufSkuY2FsbCh3aW5kb3cpOzsoZnVuY3Rpb24oKXt2YXIgZGZsdFBsdWdpbkNmZz17XCJpbmZvXCI6dHJ1ZX07dmFyIGRmbHRHbG9iYWxDZmc9e307d2luZG93LkVjaG8xMjAwQVRJbnRlcm5ldC5UcmFja2VyLlBsdWdpbnMuT25TaXRlQWRzPWZ1bmN0aW9uKGEpe3ZhciBrPVwiXCIsbD1mdW5jdGlvbihjKXt2YXIgZj1jLm5hbWU7YS5leGVjKFwiVXRpbHNcIixcIm1hbmFnZUNoYXB0ZXJzXCIsW2MsXCJjaGFwdGVyXCIsM10sZnVuY3Rpb24oYSl7Zj1hKyhmP2Y6XCJcIil9KTtyZXR1cm4gZn0sZD1mdW5jdGlvbihhLGYpe3JldHVybiBhW2ZdP2FbZl06XCJcIn0sZT1mdW5jdGlvbihhLGYpe3ZhciBiPWQoYSxmKTtpZihiKXt2YXIgZT1kKGEsXCJwcmVmaXhcIik7aWYoYi5jYW1wYWlnbklkKXt2YXIgZT1lfHxcIlBVQlwiLGc9ZChiLFwiY2FtcGFpZ25JZFwiKSxrPWQoYixcImNyZWF0aW9uXCIpLG09ZChiLFwidmFyaWFudFwiKSxwPWQoYixcImZvcm1hdFwiKSxsPWQoYixcImdlbmVyYWxQbGFjZW1lbnRcIiksbj1kKGIsXCJkZXRhaWxlZFBsYWNlbWVudFwiKSxxPWQoYixcImFkdmVydGlzZXJJZFwiKSxiPWQoYixcInVybFwiKTtyZXR1cm4gZStcIi1cIitnK1wiLVwiK2srXCItXCIrbStcIi1cIitwK1wiLVwiK2wrXCItXCIrXG5uK1wiLVwiK3ErXCItXCIrYn1pZihiLmFkSWQpcmV0dXJuIGU9ZXx8XCJJTlRcIixnPWQoYixcImFkSWRcIiksaz1kKGIsXCJmb3JtYXRcIiksYj1kKGIsXCJwcm9kdWN0SWRcIiksZStcIi1cIitnK1wiLVwiK2srXCJ8fFwiK2J9cmV0dXJuXCJcIn0sbj1mdW5jdGlvbihjKXt2YXIgZj1bXCJvblNpdGVBZHNJbXByZXNzaW9uXCJdLGI9e307Yi5hdGk9e3ZhbHVlOmUoYyxcImltcHJlc3Npb25cIiksb3B0aW9uczp7aGl0VHlwZTpmLHRydW5jYXRlOiEwfX07Yi50eXBlPVwiQVRcIjtFY2hvMTIwMEFUSW50ZXJuZXQuVXRpbHMuaXNQcmV2aWV3KCkmJmEuZ2V0Q29uZmlnKFwicHJldmlld1wiKSYmKGIucHZ3PTEpO3ZhciBkPWMuY3VzdG9tT2JqZWN0O2QmJihkPWEucHJvY2Vzc1RhZ09iamVjdChcInN0Y1wiLGYsZCksYi5zdGM9e3ZhbHVlOkVjaG8xMjAwQVRJbnRlcm5ldC5VdGlscy5qc29uU2VyaWFsaXplKGQpLG9wdGlvbnM6e2hpdFR5cGU6ZixlbmNvZGU6ITAsc2VwYXJhdG9yOlwiLFwiLHRydW5jYXRlOiEwfX0pO2EubWFuYWdlU2VuZChmdW5jdGlvbigpe2Euc2VuZEhpdChiLFxuW1tcImhpdFR5cGVcIixmXV0sYy5jYWxsYmFjayxudWxsLCEwKX0pfSxtPWZ1bmN0aW9uKGMsZil7dmFyIGI9YS5idWZmZXIuZ2V0KFwiYXRpXCIsITApfHx7fTtiLnZhbHVlPVwic3RyaW5nXCI9PT10eXBlb2YgYi52YWx1ZT9bYi52YWx1ZV06Yi52YWx1ZXx8W107Yi5vcHRpb25zPWIub3B0aW9uc3x8e3RydW5jYXRlOiEwLGhpdFR5cGU6W2YsXCJwYWdlXCJdfTtiLnZhbHVlLnB1c2goYyk7YS5idWZmZXIuc2V0KFwiYXRpXCIsYi52YWx1ZSxiLm9wdGlvbnMpfSxnPWZ1bmN0aW9uKGMsZil7Yy5jbGljaz9hLnNldFBhcmFtKFwiYXRjXCIsZShjLFwiY2xpY2tcIikse3RydW5jYXRlOiEwLGhpdFR5cGU6W2YsXCJwYWdlXCJdfSk6Yy5pbXByZXNzaW9uJiZhLnNldFBhcmFtKFwiYXRpXCIsZShjLFwiaW1wcmVzc2lvblwiKSx7dHJ1bmNhdGU6ITAsaGl0VHlwZTpbZixcInBhZ2VcIl19KTtpZihjLmN1c3RvbU9iamVjdCl7YS5zZXRDb250ZXh0KFwib25zaXRlYWRzXCIse2N1c3RvbU9iamVjdDpjLmN1c3RvbU9iamVjdH0pO3ZhciBiPVxuYS5nZXRDb250ZXh0KFwicGFnZVwiKXx8e307Yi5jdXN0b21PYmplY3Q9RWNobzEyMDBBVEludGVybmV0LlV0aWxzLmNvbXBsZXRlRnN0TGV2ZWxPYmooYi5jdXN0b21PYmplY3QsYy5jdXN0b21PYmplY3QsITEpO2Euc2V0Q29udGV4dChcInBhZ2VcIixiKX1hLmRpc3BhdGNoU3Vic2NyaWJlKFwib25TaXRlQWRzXCIpfTthLnNlbGZQcm9tb3Rpb249dGhpcy5zZWxmUHJvbW90aW9uPXt9O2EucHVibGlzaGVyPXRoaXMucHVibGlzaGVyPXt9O2EucHVibGlzaGVyLnNldD10aGlzLnB1Ymxpc2hlci5zZXQ9ZnVuY3Rpb24oYSl7ZyhhLFwicHVibGlzaGVyXCIpfTthLnNlbGZQcm9tb3Rpb24uc2V0PXRoaXMuc2VsZlByb21vdGlvbi5zZXQ9ZnVuY3Rpb24oYSl7ZyhhLFwic2VsZlByb21vdGlvblwiKX07YS5wdWJsaXNoZXIuYWRkPXRoaXMucHVibGlzaGVyLmFkZD1mdW5jdGlvbihjKXttKGUoYyxcImltcHJlc3Npb25cIiksXCJwdWJsaXNoZXJcIik7YS5kaXNwYXRjaFN1YnNjcmliZShcIm9uU2l0ZUFkc1wiKX07YS5zZWxmUHJvbW90aW9uLmFkZD1cbnRoaXMuc2VsZlByb21vdGlvbi5hZGQ9ZnVuY3Rpb24oYyl7bShlKGMsXCJpbXByZXNzaW9uXCIpLFwic2VsZlByb21vdGlvblwiKTthLmRpc3BhdGNoU3Vic2NyaWJlKFwib25TaXRlQWRzXCIpfTt2YXIgcT10aGlzLmFkdmVydEV2ZW50PWZ1bmN0aW9uKGMpe3ZhciBmPSEwLGI9bnVsbDtjJiZjLmhhc093blByb3BlcnR5KFwiZXZlbnRcIikmJihiPWMuZXZlbnR8fHdpbmRvdy5ldmVudCk7IUVjaG8xMjAwQVRJbnRlcm5ldC5VdGlscy5pc1RhYk9wZW5pbmdBY3Rpb24oYikmJmMuZWxlbSYmKGY9YS50ZWNoQ2xpY2tzLm1hbmFnZUNsaWNrKGMuZWxlbSxiKSk7aWYoYy5jbGljayl7dmFyIGI9W1wib25TaXRlQWRzQ2xpY2tcIl0sZD1hLmdldENvbnRleHQoXCJwYWdlXCIpfHx7fSxnPXt9O2cuYXRjPXt2YWx1ZTplKGMsXCJjbGlja1wiKSxvcHRpb25zOnt0cnVuY2F0ZTohMH19O2cudHlwZT1cIkFUXCI7Zy5wYXRjPWwoZCk7Zy5zMmF0Yz1kLmxldmVsMnx8XCJcIjtpZihkPWMuY3VzdG9tT2JqZWN0KWQ9YS5wcm9jZXNzVGFnT2JqZWN0KFwic3RjXCIsXG5iLGQpLGcuc3RjPXt2YWx1ZTpFY2hvMTIwMEFUSW50ZXJuZXQuVXRpbHMuanNvblNlcmlhbGl6ZShkKSxvcHRpb25zOntoaXRUeXBlOmIsZW5jb2RlOiEwLHNlcGFyYXRvcjpcIixcIix0cnVuY2F0ZTohMH19O2Euc2VuZEhpdChnLFtbXCJoaXRUeXBlXCIsYl1dLGMuY2FsbGJhY2ssbnVsbCwhMCl9ZWxzZSBjLmltcHJlc3Npb24mJm4oYyk7cmV0dXJuIGZ9O2EucHVibGlzaGVyLnNlbmQ9dGhpcy5wdWJsaXNoZXIuc2VuZD1mdW5jdGlvbihhKXtyZXR1cm4gcShhKX07YS5zZWxmUHJvbW90aW9uLnNlbmQ9dGhpcy5zZWxmUHJvbW90aW9uLnNlbmQ9ZnVuY3Rpb24oYSl7cmV0dXJuIHEoYSl9O2Eub25TaXRlQWRzPXt9O2Eub25TaXRlQWRzLm9uRGlzcGF0Y2g9dGhpcy5vbkRpc3BhdGNoPWZ1bmN0aW9uKGMpe2lmKCFhLmRpc3BhdGNoU3Vic2NyaWJlZChcInBhZ2VcIikpe2Euc2V0UGFyYW0oXCJ0eXBlXCIsXCJBVFwiLHtoaXRUeXBlOltcInB1Ymxpc2hlclwiLFwic2VsZlByb21vdGlvblwiXX0pO3ZhciBmPWEuZ2V0Q29udGV4dChcInBhZ2VcIil8fFxue307YS5nZXRQYXJhbShcImF0Y1wiKSYmKGEuc2V0UGFyYW0oXCJwYXRjXCIsbChmKSx7aGl0VHlwZTpbXCJwdWJsaXNoZXJcIixcInNlbGZQcm9tb3Rpb25cIl19KSxhLnNldFBhcmFtKFwiczJhdGNcIixmLmxldmVsMnx8XCJcIix7aGl0VHlwZTpbXCJwdWJsaXNoZXJcIixcInNlbGZQcm9tb3Rpb25cIl19KSk7RWNobzEyMDBBVEludGVybmV0LlV0aWxzLmlzUHJldmlldygpJiZhLmdldENvbmZpZyhcInByZXZpZXdcIikmJmEuc2V0UGFyYW0oXCJwdndcIiwxKTt2YXIgYj1bXCJwdWJsaXNoZXJcIixcInNlbGZQcm9tb3Rpb25cIl07KGY9KGEuZ2V0Q29udGV4dChcIm9uc2l0ZWFkc1wiKXx8e30pLmN1c3RvbU9iamVjdCk/YS5wcm9jZXNzQ29udGV4dE9iamVjdEFuZFNlbmRIaXQoXCJzdGNcIix7aGl0VHlwZTpiLGVuY29kZTohMCxzZXBhcmF0b3I6XCIsXCIsdHJ1bmNhdGU6ITB9LGYsYyk6YS5tYW5hZ2VTZW5kKGZ1bmN0aW9uKCl7YS5zZW5kSGl0KG51bGwsW1tcImhpdFR5cGVcIixiXV0sYyl9KX19O2EucGx1Z2lucy53YWl0Rm9yRGVwZW5kZW5jaWVzKFtcIlV0aWxzXCIsXG5cIlRlY2hDbGlja3NcIl0sZnVuY3Rpb24oKXtrPWRvY3VtZW50LmxvY2F0aW9uLmhyZWY7YS5wbHVnaW5zLmV4ZWMoXCJVdGlsc1wiLFwiZ2V0UXVlcnlTdHJpbmdWYWx1ZVwiLFtcInh0YXRjXCIsa10sZnVuY3Rpb24oYyl7YyYmYS5zZXRQYXJhbShcImF0Y1wiLGMse2hpdFR5cGU6W1wicHVibGlzaGVyXCIsXCJzZWxmUHJvbW90aW9uXCIsXCJwYWdlXCJdfSl9KTthLmVtaXQoXCJPblNpdGVBZHM6UmVhZHlcIix7bHZsOlwiSU5GT1wiLGRldGFpbHM6e2hyZWY6a319KX0pfTt3aW5kb3cuRWNobzEyMDBBVEludGVybmV0LlRyYWNrZXIuYWRkUGx1Z2luKFwiT25TaXRlQWRzXCIpO1xufSkuY2FsbCh3aW5kb3cpOzsoZnVuY3Rpb24oKXt2YXIgZGZsdFBsdWdpbkNmZz17XCJpbmZvXCI6dHJ1ZX07dmFyIGRmbHRHbG9iYWxDZmc9e307d2luZG93LkVjaG8xMjAwQVRJbnRlcm5ldC5UcmFja2VyLlBsdWdpbnMuUGFnZT1mdW5jdGlvbihhKXt2YXIgaz1bXCJwYWdlSWRcIixcImNoYXB0ZXJMYWJlbFwiLFwidXBkYXRlXCJdLGw9W1wicGlkXCIsXCJwY2hhcFwiLFwicGlkdFwiXSxkPVtcInBhZ2VcIixcInNpdGVcIl0sZT1bXCJmXCIsXCJ4XCJdLG49ZnVuY3Rpb24oYil7dmFyIGM9Yi5uYW1lO2EuZXhlYyhcIlV0aWxzXCIsXCJtYW5hZ2VDaGFwdGVyc1wiLFtiLFwiY2hhcHRlclwiLDNdLGZ1bmN0aW9uKGEpe2M9YSsoYz9jOlwiXCIpfSk7cmV0dXJuIGN9LG09ZnVuY3Rpb24oYSxiLGMpe2I/YT1iOmF8fFwidW5kZWZpbmVkXCI9PT10eXBlb2YgY3x8KGE9Yyk7cmV0dXJuIGF9LGc9ZnVuY3Rpb24oYSxiLGMpe2IuaGFzT3duUHJvcGVydHkoYykmJihhW2NdPW0oYVtjXSxiW2NdKSl9LHE9ZnVuY3Rpb24oYixjLGYpe2lmKGMpZm9yKHZhciBoPTA7aDxkLmxlbmd0aDtoKyspaWYoYy5oYXNPd25Qcm9wZXJ0eShkW2hdKSYmY1tkW2hdXSlmb3IodmFyIGcgaW4gY1tkW2hdXSljW2RbaF1dLmhhc093blByb3BlcnR5KGcpJiZcbihmP2JbZVtoXStnXT1jW2RbaF1dW2ddOmEuc2V0UGFyYW0oZVtoXStnLGNbZFtoXV1bZ10pKX0sYz1mdW5jdGlvbihiLGMsZil7aWYoYyl7YS5leGVjKFwiVXRpbHNcIixcIm1hbmFnZUNoYXB0ZXJzXCIsW2MsXCJjaGFwdGVyXCIsM10sZnVuY3Rpb24oYSl7YSYmKGMuY2hhcHRlckxhYmVsPWEucmVwbGFjZSgvOjokL2dpLFwiXCIpKX0pO2Zvcih2YXIgZD0wO2Q8bC5sZW5ndGg7ZCsrKWMuaGFzT3duUHJvcGVydHkoa1tkXSkmJihmP2JbbFtkXV09Y1trW2RdXTphLnNldFBhcmFtKGxbZF0sY1trW2RdXSkpfX0sZj1mdW5jdGlvbihiLGMsZil7aWYoYyYmYy5rZXl3b3JkcyBpbnN0YW5jZW9mIEFycmF5KXt2YXIgZD1jLmtleXdvcmRzLmxlbmd0aDtpZigwPGQpe2Zvcih2YXIgZT1cIlwiLGg9MDtoPGQ7aCsrKWUrPVwiW1wiK2Mua2V5d29yZHNbaF0rXCJdXCIrKGg8ZC0xP1wifFwiOlwiXCIpO2Y/Yi50YWc9ZTphLnNldFBhcmFtKFwidGFnXCIsZSl9fX0sYj1mdW5jdGlvbihiLGMsZil7aWYoYyl7dmFyIGQsZT1mdW5jdGlvbihhKXtyZXR1cm4gYT9cbmE6XCIwXCJ9O2Q9XCJcIisoZShjLmNhdGVnb3J5MSkrXCItXCIpO2QrPWUoYy5jYXRlZ29yeTIpK1wiLVwiO2QrPWUoYy5jYXRlZ29yeTMpO2Y/Yi5wdHlwZT1kOmEuc2V0UGFyYW0oXCJwdHlwZVwiLGQpfX0saD1mdW5jdGlvbihiLGMsZil7aWYoYylmb3IodmFyIGQgaW4gYyljLmhhc093blByb3BlcnR5KGQpJiZcInVuZGVmaW5lZFwiIT09dHlwZW9mIGNbZF0mJihmP2JbZF09Y1tkXTphLnNldFBhcmFtKGQsY1tkXSkpfTthLmN1c3RvbVZhcnM9dGhpcy5jdXN0b21WYXJzPXt9O2EuY3VzdG9tVmFycy5zZXQ9dGhpcy5jdXN0b21WYXJzLnNldD1mdW5jdGlvbihiKXt2YXIgYz1hLmdldENvbnRleHQoXCJwYWdlXCIpfHx7fSxmPWMuY3VzdG9tVmFycztpZihmKXtpZihiKWZvcih2YXIgZCBpbiBiKWIuaGFzT3duUHJvcGVydHkoZCkmJihmW2RdPUVjaG8xMjAwQVRJbnRlcm5ldC5VdGlscy5jb21wbGV0ZUZzdExldmVsT2JqKGZbZF0sYltkXSwhMCkpfWVsc2UgZj1iO2MuY3VzdG9tVmFycz1mO2Euc2V0Q29udGV4dChcInBhZ2VcIixcbmMpfTthLmR5bmFtaWNMYWJlbD10aGlzLmR5bmFtaWNMYWJlbD17fTthLmR5bmFtaWNMYWJlbC5zZXQ9dGhpcy5keW5hbWljTGFiZWwuc2V0PWZ1bmN0aW9uKGIpe3ZhciBjPWEuZ2V0Q29udGV4dChcInBhZ2VcIil8fHt9O2MuZHluYW1pY0xhYmVsPUVjaG8xMjAwQVRJbnRlcm5ldC5VdGlscy5jb21wbGV0ZUZzdExldmVsT2JqKGMuZHluYW1pY0xhYmVsLGIsITApO2Euc2V0Q29udGV4dChcInBhZ2VcIixjKX07YS50YWdzPXRoaXMudGFncz17fTthLnRhZ3Muc2V0PXRoaXMudGFncy5zZXQ9ZnVuY3Rpb24oYil7dmFyIGM9YS5nZXRDb250ZXh0KFwicGFnZVwiKXx8e307Yy50YWdzPUVjaG8xMjAwQVRJbnRlcm5ldC5VdGlscy5jb21wbGV0ZUZzdExldmVsT2JqKGMudGFncyxiLCEwKTthLnNldENvbnRleHQoXCJwYWdlXCIsYyl9O2EuY3VzdG9tVHJlZVN0cnVjdHVyZT10aGlzLmN1c3RvbVRyZWVTdHJ1Y3R1cmU9e307YS5jdXN0b21UcmVlU3RydWN0dXJlLnNldD10aGlzLmN1c3RvbVRyZWVTdHJ1Y3R1cmUuc2V0PWZ1bmN0aW9uKGIpe3ZhciBjPVxuYS5nZXRDb250ZXh0KFwicGFnZVwiKXx8e307Yy5jdXN0b21UcmVlU3RydWN0dXJlPUVjaG8xMjAwQVRJbnRlcm5ldC5VdGlscy5jb21wbGV0ZUZzdExldmVsT2JqKGMuY3VzdG9tVHJlZVN0cnVjdHVyZSxiLCEwKTthLnNldENvbnRleHQoXCJwYWdlXCIsYyl9O2EucGFnZT17fTthLnBhZ2UucmVzZXQ9dGhpcy5yZXNldD1mdW5jdGlvbigpe2Euc2V0Q29udGV4dChcInBhZ2VcIix2b2lkIDApfTthLnBhZ2Uuc2V0PXRoaXMuc2V0PWZ1bmN0aW9uKGIpe2EuZGlzcGF0Y2hTdWJzY3JpYmUoXCJwYWdlXCIpO3ZhciBjPWEuZ2V0Q29udGV4dChcInBhZ2VcIil8fHt9O2MubmFtZT1tKGMubmFtZSxiLm5hbWUsXCJcIik7Yy5sZXZlbDI9bShjLmxldmVsMixiLmxldmVsMixcIlwiKTtnKGMsYixcImNoYXB0ZXIxXCIpO2coYyxiLFwiY2hhcHRlcjJcIik7ZyhjLGIsXCJjaGFwdGVyM1wiKTtjLmN1c3RvbU9iamVjdD1FY2hvMTIwMEFUSW50ZXJuZXQuVXRpbHMuY29tcGxldGVGc3RMZXZlbE9iaihjLmN1c3RvbU9iamVjdCxiLmN1c3RvbU9iamVjdCwhMCk7XG5hLnNldENvbnRleHQoXCJwYWdlXCIsYyl9O2EucGFnZS5zZW5kPXRoaXMuc2VuZD1mdW5jdGlvbihkKXt2YXIgZT0hMCxrPXtwOm4oZCksczI6ZC5sZXZlbDJ8fFwiXCJ9LHA9ZC5jdXN0b21PYmplY3QsbD0hMTtpZihwKXt2YXIgbD0hMCx2PVtcInBhZ2VcIl0scD1hLnByb2Nlc3NUYWdPYmplY3QoXCJzdGNcIix2LHApO2suc3RjPXt2YWx1ZTpFY2hvMTIwMEFUSW50ZXJuZXQuVXRpbHMuanNvblNlcmlhbGl6ZShwKSxvcHRpb25zOntoaXRUeXBlOnYsZW5jb2RlOiEwLHNlcGFyYXRvcjpcIixcIix0cnVuY2F0ZTohMH19fXA9YS5nZXRDb250ZXh0KFwicGFnZVwiKXx8e307cC52cm4mJihrLnZybj1wLnZybixwLnZybj12b2lkIDAsYS5zZXRDb250ZXh0KFwicGFnZVwiLHApKTt2PWEuZ2V0Q29udGV4dChcIkludGVybmFsU2VhcmNoXCIpfHx7fTtcInVuZGVmaW5lZFwiIT09dHlwZW9mIHYua2V5d29yZCYmKGsubWM9RWNobzEyMDBBVEludGVybmV0LlV0aWxzLmNsb25lU2ltcGxlT2JqZWN0KHYua2V5d29yZCksXCJ1bmRlZmluZWRcIiE9PXR5cGVvZiB2LnJlc3VsdFBhZ2VOdW1iZXImJlxuKGsubnA9RWNobzEyMDBBVEludGVybmV0LlV0aWxzLmNsb25lU2ltcGxlT2JqZWN0KHYucmVzdWx0UGFnZU51bWJlcikpLGEuc2V0Q29udGV4dChcIkludGVybmFsU2VhcmNoXCIsdm9pZCAwKSk7RWNobzEyMDBBVEludGVybmV0LlV0aWxzLmlzUHJldmlldygpJiZhLmdldENvbmZpZyhcInByZXZpZXdcIikmJihrLnB2dz0xKTtxKGssZC5jdXN0b21WYXJzLCEwKTtjKGssZC5keW5hbWljTGFiZWwsITApO2YoayxkLnRhZ3MsITApO2IoayxkLmN1c3RvbVRyZWVTdHJ1Y3R1cmUsITApO3Y9YS5nZXRDb250ZXh0KFwiY2FtcGFpZ25zXCIpfHx7fTtoKGssdiwhMCk7YS5zZXRDb250ZXh0KFwiY2FtcGFpZ25zXCIsdm9pZCAwKTt2PW51bGw7ZCYmZC5oYXNPd25Qcm9wZXJ0eShcImV2ZW50XCIpJiYodj1kLmV2ZW50fHx3aW5kb3cuZXZlbnQpOyFFY2hvMTIwMEFUSW50ZXJuZXQuVXRpbHMuaXNUYWJPcGVuaW5nQWN0aW9uKHYpJiZkLmVsZW0mJihlPWEudGVjaENsaWNrcy5tYW5hZ2VDbGljayhkLmVsZW0sdikpO2EubWFuYWdlU2VuZChmdW5jdGlvbigpe2Euc2VuZEhpdChrLFxubnVsbCxkLmNhbGxiYWNrLG51bGwsbCl9KTtwLm5hbWU9bShwLm5hbWUsZC5uYW1lLFwiXCIpO3AubGV2ZWwyPW0ocC5sZXZlbDIsZC5sZXZlbDIsXCJcIik7ZyhwLGQsXCJjaGFwdGVyMVwiKTtnKHAsZCxcImNoYXB0ZXIyXCIpO2cocCxkLFwiY2hhcHRlcjNcIik7YS5zZXRDb250ZXh0KFwicGFnZVwiLHApO3JldHVybiBlfTthLnBhZ2Uub25EaXNwYXRjaD10aGlzLm9uRGlzcGF0Y2g9ZnVuY3Rpb24oZCl7dmFyIGU9YS5nZXRDb250ZXh0KFwicGFnZVwiKXx8e30sZz1hLmdldENvbnRleHQoXCJJbnRlcm5hbFNlYXJjaFwiKXx8e307YS5zZXRQYXJhbShcInBcIixuKGUpKTthLnNldFBhcmFtKFwiczJcIixlLmxldmVsMnx8XCJcIik7ZS52cm4mJihhLnNldFBhcmFtKFwidnJuXCIsZS52cm4pLGUudnJuPXZvaWQgMCxhLnNldENvbnRleHQoXCJwYWdlXCIsZSkpO1widW5kZWZpbmVkXCIhPT10eXBlb2YgZy5rZXl3b3JkJiYoYS5zZXRQYXJhbShcIm1jXCIsRWNobzEyMDBBVEludGVybmV0LlV0aWxzLmNsb25lU2ltcGxlT2JqZWN0KGcua2V5d29yZCkpLFxuXCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBnLnJlc3VsdFBhZ2VOdW1iZXImJmEuc2V0UGFyYW0oXCJucFwiLEVjaG8xMjAwQVRJbnRlcm5ldC5VdGlscy5jbG9uZVNpbXBsZU9iamVjdChnLnJlc3VsdFBhZ2VOdW1iZXIpKSxhLnNldENvbnRleHQoXCJJbnRlcm5hbFNlYXJjaFwiLHZvaWQgMCkpO0VjaG8xMjAwQVRJbnRlcm5ldC5VdGlscy5pc1ByZXZpZXcoKSYmYS5nZXRDb25maWcoXCJwcmV2aWV3XCIpJiZhLnNldFBhcmFtKFwicHZ3XCIsMSk7cShudWxsLGUuY3VzdG9tVmFycywhMSk7YyhudWxsLGUuZHluYW1pY0xhYmVsLCExKTtmKG51bGwsZS50YWdzLCExKTtiKG51bGwsZS5jdXN0b21UcmVlU3RydWN0dXJlLCExKTtnPWEuZ2V0Q29udGV4dChcImNhbXBhaWduc1wiKXx8e307aChudWxsLGcsITEpO2Euc2V0Q29udGV4dChcImNhbXBhaWduc1wiLHZvaWQgMCk7dmFyIGs9W1wicGFnZVwiXTsoZT1lLmN1c3RvbU9iamVjdCk/YS5wcm9jZXNzQ29udGV4dE9iamVjdEFuZFNlbmRIaXQoXCJzdGNcIix7aGl0VHlwZTprLGVuY29kZTohMCxzZXBhcmF0b3I6XCIsXCIsXG50cnVuY2F0ZTohMH0sZSxkKTphLm1hbmFnZVNlbmQoZnVuY3Rpb24oKXthLnNlbmRIaXQobnVsbCxbW1wiaGl0VHlwZVwiLGtdXSxkKX0pfX07d2luZG93LkVjaG8xMjAwQVRJbnRlcm5ldC5UcmFja2VyLmFkZFBsdWdpbihcIlBhZ2VcIik7XG59KS5jYWxsKHdpbmRvdyk7OyhmdW5jdGlvbigpe3ZhciBkZmx0UGx1Z2luQ2ZnPXtcImluZm9cIjp0cnVlfTt2YXIgZGZsdEdsb2JhbENmZz17fTt3aW5kb3cuRWNobzEyMDBBVEludGVybmV0LlRyYWNrZXIuUGx1Z2lucy5SaWNoTWVkaWE9ZnVuY3Rpb24oYSl7dmFyIGs9ZnVuY3Rpb24oYSxmKXt2YXIgYj1wYXJzZUludChhLDEwKTtyZXR1cm4gYj9NYXRoLm1heChiLGYpOjB9LGw9bmV3IGZ1bmN0aW9uKCl7dGhpcy5tZWRpYT1mdW5jdGlvbigpe3RoaXMudHlwZT12b2lkIDA7dGhpcy5wbHlyPTA7dGhpcy5jbG5rPXRoaXMuczI9dm9pZCAwO3RoaXMucD1cIlwiO3RoaXMubTk9dGhpcy5tNj10aGlzLm01PXRoaXMubTE9dGhpcy5yZnNoPXRoaXMuYnVmPXRoaXMuYT12b2lkIDB9O3RoaXMubWVkaWFBbGw9e307dGhpcy5zZXRNZWRpYVZhbHVlPWZ1bmN0aW9uKGEsZixiLGQpe1widW5kZWZpbmVkXCIhPT10eXBlb2YgZCYmKHRoaXMubWVkaWFBbGxbYV09dGhpcy5tZWRpYUFsbFthXXx8e30sdGhpcy5tZWRpYUFsbFthXVtmXT10aGlzLm1lZGlhQWxsW2FdW2ZdfHxuZXcgdGhpcy5tZWRpYSx0aGlzLm1lZGlhQWxsW2FdW2ZdW2JdPWQpfTt0aGlzLmdldE1lZGlhVmFsdWU9XG5mdW5jdGlvbihhLGQsYil7aWYodGhpcy5tZWRpYUFsbFthXSYmdGhpcy5tZWRpYUFsbFthXVtkXSlyZXR1cm4gdGhpcy5tZWRpYUFsbFthXVtkXVtiXX07dGhpcy5yZW1vdmVQbGF5ZXI9ZnVuY3Rpb24oYSl7dGhpcy5tZWRpYUFsbFthXT17fX07dGhpcy5yZW1vdmVBbGw9ZnVuY3Rpb24oKXt0aGlzLm1lZGlhQWxsPXt9fX0sZD1uZXcgZnVuY3Rpb24oKXt0aGlzLnRpbWVvdXQ9e307dGhpcy5zZXRUaW1lb3V0PWZ1bmN0aW9uKGMsZCxiKXt0aGlzLnRpbWVvdXRbY109dGhpcy50aW1lb3V0W2NdfHx7fTt0aGlzLnRpbWVvdXRbY11bZF0mJndpbmRvdy5jbGVhclRpbWVvdXQodGhpcy50aW1lb3V0W2NdW2RdKTt0aGlzLnRpbWVvdXRbY11bZF09d2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXthLnJpY2hNZWRpYS5zZW5kKHthY3Rpb246XCJyZWZyZXNoXCIscGxheWVySWQ6YyxtZWRpYUxhYmVsOmR9KX0sMUUzKmIpfTt0aGlzLnNldFRpbWVvdXRPYmplY3Q9ZnVuY3Rpb24oYyxkLGIpe3RoaXMudGltZW91dFtjXT1cbnRoaXMudGltZW91dFtjXXx8e307aWYoXCJ1bmRlZmluZWRcIj09PXR5cGVvZiB0aGlzLnRpbWVvdXRbY11bZF0pe3ZhciBlPVtdLGc7Zm9yKGcgaW4gYiliLmhhc093blByb3BlcnR5KGcpJiZlLnB1c2goe2RlbGF5OmsoZywwKSxyZWZyZXNoOmsoYltnXSw1KX0pO2Uuc29ydChmdW5jdGlvbihhLGIpe3JldHVybiBhLmRlbGF5PGIuZGVsYXk/LTE6YS5kZWxheT5iLmRlbGF5PzE6MH0pO3RoaXMudGltZW91dFtjXVtkXT17cmVmcmVzaFRhYjplLGJhY2t1cFJlZnJlc2hUYWI6RWNobzEyMDBBVEludGVybmV0LlV0aWxzLmNsb25lU2ltcGxlT2JqZWN0KGUpLGRlbGF5Q29uZmlndXJhdGlvbjp7fX19Yj10aGlzLnRpbWVvdXRbY11bZF07aWYoMDxiLnJlZnJlc2hUYWIubGVuZ3RoJiYoZT1iLnJlZnJlc2hUYWJbMF0uZGVsYXksZz1iLnJlZnJlc2hUYWJbMF0ucmVmcmVzaCxcIm51bWJlclwiPT09dHlwZW9mIGUmJlwibnVtYmVyXCI9PT10eXBlb2YgZyYmMDxnKSl7Yi5kZWxheUNvbmZpZ3VyYXRpb25bZV09Yi5kZWxheUNvbmZpZ3VyYXRpb25bZV18fFxue307dmFyIG09dm9pZCAwO1widW5kZWZpbmVkXCIhPT10eXBlb2YgYi5yZWZyZXNoVGFiWzFdJiYobT1iLnJlZnJlc2hUYWJbMV0uZGVsYXkpO3ZhciBuPTA7XCJ1bmRlZmluZWRcIj09PXR5cGVvZiBtP249MTpcIm51bWJlclwiPT09dHlwZW9mIGIuZGVsYXlDb25maWd1cmF0aW9uW2VdLm51bWJlcj9uPVwicmVmcmVzaFwiPT09bC5nZXRNZWRpYVZhbHVlKGMsZCxcImFcIik/TWF0aC5tYXgoYi5kZWxheUNvbmZpZ3VyYXRpb25bZV0ubnVtYmVyLTEsMCk6Yi5kZWxheUNvbmZpZ3VyYXRpb25bZV0ubnVtYmVyOlwibnVtYmVyXCI9PT10eXBlb2YgbSYmKG49TWF0aC5mbG9vcig2MCoobS1lKS9nKS0xKTtiLmRlbGF5Q29uZmlndXJhdGlvbltlXS5udW1iZXI9bjtiLmRlbGF5Q29uZmlndXJhdGlvbltlXS50aW1lb3V0JiZ3aW5kb3cuY2xlYXJUaW1lb3V0KGIuZGVsYXlDb25maWd1cmF0aW9uW2VdLnRpbWVvdXQpOzA8bj9iLmRlbGF5Q29uZmlndXJhdGlvbltlXS50aW1lb3V0PXdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YS5yaWNoTWVkaWEuc2VuZCh7YWN0aW9uOlwicmVmcmVzaFwiLFxucGxheWVySWQ6YyxtZWRpYUxhYmVsOmR9KX0sMUUzKmcpOihiLmRlbGF5Q29uZmlndXJhdGlvbltlXS5udW1iZXI9dm9pZCAwLGIuZGVsYXlDb25maWd1cmF0aW9uW2VdLnRpbWVvdXQ9dm9pZCAwLGIucmVmcmVzaFRhYi5zcGxpY2UoMCwxKSx3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe2EucmljaE1lZGlhLnNlbmQoe2FjdGlvbjpcInJlZnJlc2hcIixwbGF5ZXJJZDpjLG1lZGlhTGFiZWw6ZH0pfSwxRTMqZykpO3RoaXMudGltZW91dFtjXVtkXT1ifX07dGhpcy5jbGVhclRpbWVvdXQ9ZnVuY3Rpb24oYSxkLGIpe3RoaXMudGltZW91dFthXT10aGlzLnRpbWVvdXRbYV18fHt9O3ZhciBlPXRoaXMudGltZW91dFthXVtkXTtpZihcIm9iamVjdFwiPT09dHlwZW9mIGUpe2lmKFwib2JqZWN0XCI9PT10eXBlb2YgZS5kZWxheUNvbmZpZ3VyYXRpb24pe3ZhciBnLGs7Zm9yKGsgaW4gZS5kZWxheUNvbmZpZ3VyYXRpb24pZS5kZWxheUNvbmZpZ3VyYXRpb24uaGFzT3duUHJvcGVydHkoaykmJihnPVxuZS5kZWxheUNvbmZpZ3VyYXRpb25ba10ubnVtYmVyLFwidW5kZWZpbmVkXCIhPT10eXBlb2YgZyYmMDxnJiYoZS5kZWxheUNvbmZpZ3VyYXRpb25ba10udGltZW91dCYmd2luZG93LmNsZWFyVGltZW91dChlLmRlbGF5Q29uZmlndXJhdGlvbltrXS50aW1lb3V0KSxlLmRlbGF5Q29uZmlndXJhdGlvbltrXS50aW1lb3V0PXZvaWQgMCkpO2ImJihlLnJlZnJlc2hUYWI9RWNobzEyMDBBVEludGVybmV0LlV0aWxzLmNsb25lU2ltcGxlT2JqZWN0KGUuYmFja3VwUmVmcmVzaFRhYikpO3RoaXMudGltZW91dFthXVtkXT1lfX1lbHNlIGUmJndpbmRvdy5jbGVhclRpbWVvdXQoZSl9O3RoaXMucmVtb3ZlUGxheWVyPWZ1bmN0aW9uKGMpe2Zvcih2YXIgZCBpbiB0aGlzLnRpbWVvdXRbY10paWYodGhpcy50aW1lb3V0W2NdLmhhc093blByb3BlcnR5KGQpKXt0aGlzLmNsZWFyVGltZW91dChjLGQsITEpO3ZhciBiPWwuZ2V0TWVkaWFWYWx1ZShjLGQsXCJhXCIpO1widW5kZWZpbmVkXCIhPT10eXBlb2YgdGhpcy50aW1lb3V0W2NdW2RdJiZcblwic3RvcFwiIT09YiYmYS5yaWNoTWVkaWEuc2VuZCh7YWN0aW9uOlwic3RvcFwiLHBsYXllcklkOmMsbWVkaWFMYWJlbDpkfSl9dGhpcy50aW1lb3V0W2NdPXt9fTt0aGlzLnJlbW92ZUFsbD1mdW5jdGlvbigpe2Zvcih2YXIgYSBpbiB0aGlzLnRpbWVvdXQpdGhpcy50aW1lb3V0Lmhhc093blByb3BlcnR5KGEpJiZ0aGlzLnJlbW92ZVBsYXllcihhKTt0aGlzLnRpbWVvdXQ9e319fSxlPWZ1bmN0aW9uKGMsZCxiKXt2YXIgZT1jW2JdfHxcIlwiO2EuZXhlYyhcIlV0aWxzXCIsXCJtYW5hZ2VDaGFwdGVyc1wiLFtjLGQsM10sZnVuY3Rpb24oYSl7ZT1hK2V9KTtyZXR1cm4gZX0sbj1mdW5jdGlvbihhLGQsYixlKXt2YXIgZz1hW2RdO1wiYm9vbGVhblwiPT09dHlwZW9mIGFbZF0mJihnPWFbZF0/ZTpiKTtyZXR1cm4gZ30sbT1mdW5jdGlvbihhKXt2YXIgZD0wOy9eKFxcLXxcXCspPyhbMC05XSspJC8udGVzdChhKSYmKGQ9TnVtYmVyKGEpKTtyZXR1cm4gZH0sZz1mdW5jdGlvbihhLGQsYixlLGcpe2Q9bC5nZXRNZWRpYVZhbHVlKGQsXG5iLGUpO1widW5kZWZpbmVkXCIhPT10eXBlb2YgZCYmKGFbZV09Zz9lbmNvZGVVUklDb21wb25lbnQoZCk6ZCl9LHE9ZnVuY3Rpb24oYSxkLGIpe1widW5kZWZpbmVkXCIhPT10eXBlb2YgYiYmKGFbZF09Yil9O2EucmljaE1lZGlhPXt9O2EucmljaE1lZGlhLmFkZD1mdW5jdGlvbihhKXthPWF8fHt9O3ZhciBkPW0oYS5wbGF5ZXJJZCksYj1lKGEsXCJtZWRpYVRoZW1lXCIsXCJtZWRpYUxhYmVsXCIpLGc9bihhLFwiaXNFbWJlZGRlZFwiLFwiaW50XCIsXCJleHRcIik7bC5zZXRNZWRpYVZhbHVlKGQsYixcInBseXJcIixkKTtsLnNldE1lZGlhVmFsdWUoZCxiLFwidHlwZVwiLGEubWVkaWFUeXBlKTtsLnNldE1lZGlhVmFsdWUoZCxiLFwiczJcIixhLm1lZGlhTGV2ZWwyKTtsLnNldE1lZGlhVmFsdWUoZCxiLFwicFwiLGIpO2wuc2V0TWVkaWFWYWx1ZShkLGIsXCJjbG5rXCIsYS5saW5rZWRDb250ZW50fHxhLnByZXZpb3VzTWVkaWEpO2wuc2V0TWVkaWFWYWx1ZShkLGIsXCJhXCIsYS5hY3Rpb24pO2wuc2V0TWVkaWFWYWx1ZShkLFxuYixcInJmc2hcIixhLnJlZnJlc2hEdXJhdGlvbik7bC5zZXRNZWRpYVZhbHVlKGQsYixcIm0xXCIsYS5kdXJhdGlvbik7bC5zZXRNZWRpYVZhbHVlKGQsYixcIm01XCIsZyk7bC5zZXRNZWRpYVZhbHVlKGQsYixcIm02XCIsYS5icm9hZGNhc3RNb2RlKTtsLnNldE1lZGlhVmFsdWUoZCxiLFwibTlcIixhLndlYmRvbWFpbil9O2EucmljaE1lZGlhLnNlbmQ9ZnVuY3Rpb24oYyl7Yz1jfHx7fTt2YXIgZj1tKGMucGxheWVySWQpLGI9ZShjLFwibWVkaWFUaGVtZVwiLFwibWVkaWFMYWJlbFwiKSxoPWMuYWN0aW9uO2wuc2V0TWVkaWFWYWx1ZShmLGIsXCJhXCIsaCk7dmFyIHM9e3BseXI6ZixwOmJ9O2cocyxmLGIsXCJhXCIsITEpO2cocyxmLGIsXCJ0eXBlXCIsITEpO2cocyxmLGIsXCJzMlwiLCExKTtnKHMsZixiLFwibTFcIiwhMSk7ZyhzLGYsYixcIm01XCIsITEpO2cocyxmLGIsXCJtNlwiLCExKTtpZihcInBsYXlcIj09PWh8fFwiaW5mb1wiPT09aCl7Yz1uKGMsXCJpc0J1ZmZlcmluZ1wiLFwiMFwiLFwiMVwiKTt2YXIgcj1hLmdldENvbnRleHQoXCJwYWdlXCIpfHxcbnt9LHc9ZShyLFwiY2hhcHRlclwiLFwibmFtZVwiKXx8dm9pZCAwLHI9ci5sZXZlbDJ8fHZvaWQgMDtxKHMsXCJidWZcIixjKTtxKHMsXCJwcmljaFwiLHcpO3EocyxcInMycmljaFwiLHIpO2cocyxmLGIsXCJjbG5rXCIsITEpO2cocyxmLGIsXCJtOVwiLCEwKX1hLnNlbmRIaXQocyxbW1wiaGl0VHlwZVwiLFtcInJpY2htZWRpYVwiXV1dKTtcInBhdXNlXCI9PT1oP2QuY2xlYXJUaW1lb3V0KGYsYiwhMSk6XCJzdG9wXCI9PT1oJiZkLmNsZWFyVGltZW91dChmLGIsITApO2lmKFwicGxheVwiPT09aHx8XCJyZWZyZXNoXCI9PT1oKWg9bC5nZXRNZWRpYVZhbHVlKGYsYixcInJmc2hcIiksXCJvYmplY3RcIj09PXR5cGVvZiBoJiZudWxsIT09aD9kLnNldFRpbWVvdXRPYmplY3QoZixiLGgpOihoPWsoaCw1KSwwIT09aCYmZC5zZXRUaW1lb3V0KGYsYixoKSl9O2EucmljaE1lZGlhLnJlbW92ZT1mdW5jdGlvbihhKXtkLnJlbW92ZVBsYXllcihhKTtsLnJlbW92ZVBsYXllcihhKX07YS5yaWNoTWVkaWEucmVtb3ZlQWxsPWZ1bmN0aW9uKCl7ZC5yZW1vdmVBbGwoKTtcbmwucmVtb3ZlQWxsKCl9fTt3aW5kb3cuRWNobzEyMDBBVEludGVybmV0LlRyYWNrZXIuYWRkUGx1Z2luKFwiUmljaE1lZGlhXCIpO1xufSkuY2FsbCh3aW5kb3cpOzsoZnVuY3Rpb24oKXt2YXIgZGZsdFBsdWdpbkNmZz17XCJpbmZvXCI6ZmFsc2V9O3ZhciBkZmx0R2xvYmFsQ2ZnPXtcInN0b3JhZ2VNb2RlXCI6XCJjb29raWVcIn07RWNobzEyMDBBVEludGVybmV0LlRyYWNrZXIuUGx1Z2lucy5Db29raWVzPUVjaG8xMjAwQVRJbnRlcm5ldC5UcmFja2VyLlBsdWdpbnMuU3RvcmFnZT1mdW5jdGlvbihhKXt2YXIgaz10aGlzLGw9e30sZD0hMSxlPW51bGw7YS5jb25maWdQbHVnaW4oXCJTdG9yYWdlXCIsZGZsdFBsdWdpbkNmZ3x8e30sZnVuY3Rpb24oYSl7bD1hO1wibG9jYWxTdG9yYWdlXCI9PT1sLnN0b3JhZ2VNb2RlJiYoZD1FY2hvMTIwMEFUSW50ZXJuZXQuVXRpbHMuaXNMb2NhbFN0b3JhZ2VBdmFpbGFibGUoKSl9KTt2YXIgbj17fSxtPWZ1bmN0aW9uKGIpe3JldHVybiBhLmdldENvbmZpZyhcImJhc2U2NFN0b3JhZ2VcIik/RWNobzEyMDBBVEludGVybmV0LlV0aWxzLkJhc2U2NC5lbmNvZGUoYik6ZW5jb2RlVVJJQ29tcG9uZW50KGIpfSxnPWZ1bmN0aW9uKGIpe3JldHVybiBhLmdldENvbmZpZyhcImJhc2U2NFN0b3JhZ2VcIik/RWNobzEyMDBBVEludGVybmV0LlV0aWxzLkJhc2U2NC5kZWNvZGUoYik6ZGVjb2RlVVJJQ29tcG9uZW50KGIpfSxxPWZ1bmN0aW9uKCl7dGhpcy5nZXREYXRhPWZ1bmN0aW9uKGEpe3ZhciBiPVxubnVsbDsoYT1SZWdFeHAoXCIoPzpefCApXCIrYStcIj0oW147XSspXCIpLmV4ZWMoZG9jdW1lbnQuY29va2llKXx8bnVsbCkmJihiPWcoYVsxXSkpO3JldHVybiBifTt0aGlzLnNldERhdGE9ZnVuY3Rpb24oYil7dmFyIGM9ITE7aWYoYi5uYW1lJiZcInN0cmluZ1wiPT09dHlwZW9mIGIubmFtZSl7dmFyIGQ9Yi5vcHRpb25zfHx7fSxlPWQuZW5kfHx7fSxmPWQuZG9tYWlufHxhLmdldENvbmZpZyhcImNvb2tpZURvbWFpblwiKSxnPWQuc2VjdXJlfHxhLmdldENvbmZpZyhcImNvb2tpZVNlY3VyZVwiKSxoPUVjaG8xMjAwQVRJbnRlcm5ldC5VdGlscy5qc29uU2VyaWFsaXplKGIpLGg9Yi5uYW1lK1wiPVwiK20oaCksaD1oKyhkLnBhdGgmJlwic3RyaW5nXCI9PT10eXBlb2YgZC5wYXRoP1wiO3BhdGg9XCIrZC5wYXRoOlwiXCIpLGg9aCsoZiYmXCJzdHJpbmdcIj09PXR5cGVvZiBmP1wiO2RvbWFpbj1cIitmOlwiXCIpKyhnJiZcImJvb2xlYW5cIj09PXR5cGVvZiBnP1wiO3NlY3VyZVwiOlwiXCIpO1wiZnVuY3Rpb25cIj09PXR5cGVvZiBlLnRvVVRDU3RyaW5nP1xuaCs9XCI7ZXhwaXJlcz1cIitlLnRvVVRDU3RyaW5nKCk6XCJudW1iZXJcIj09PXR5cGVvZiBlJiYoaCs9XCI7bWF4LWFnZT1cIitlLnRvU3RyaW5nKCkpO2RvY3VtZW50LmNvb2tpZT1oO3RoaXMuZ2V0RGF0YShiLm5hbWUpJiYoYz0hMCl9cmV0dXJuIGN9fTtlPWQ/bmV3IGZ1bmN0aW9uKCl7dmFyIGE9ZnVuY3Rpb24oYSl7dmFyIGI9K25ldyBEYXRlLGM9ITEsZDthLm9wdGlvbnMmJihcInVuZGVmaW5lZFwiIT09dHlwZW9mIGEub3B0aW9ucy5leHBpcmVzP2Q9YS5vcHRpb25zLmV4cGlyZXM6KGE9YS5vcHRpb25zLmVuZHx8e30sXCJmdW5jdGlvblwiPT09dHlwZW9mIGEuZ2V0VGltZT9kPWEuZ2V0VGltZSgpOlwibnVtYmVyXCI9PT10eXBlb2YgYSYmKGQ9YisxRTMqYSkpKTtcIm51bWJlclwiPT09dHlwZW9mIGQmJmI+PWQmJihjPSEwKTtyZXR1cm57aXRlbVRvRGVsZXRlOmMsdGltZXN0YW1wOmR9fSxiPWZ1bmN0aW9uKGEpe3ZhciBiPSExO3RyeXtsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShhKSxiPSEwfWNhdGNoKGMpe31yZXR1cm4gYn07XG50aGlzLmdldERhdGE9ZnVuY3Rpb24oYyl7dmFyIGQ9bnVsbCxlPWxvY2FsU3RvcmFnZS5nZXRJdGVtKGMpO2lmKGUpe3ZhciBlPWcoZSksZj1FY2hvMTIwMEFUSW50ZXJuZXQuVXRpbHMuanNvblBhcnNlKGUpO2YmJlwib2JqZWN0XCI9PT10eXBlb2YgZj9hKGYpLml0ZW1Ub0RlbGV0ZSYmYihjKXx8KGRlbGV0ZSBmLm9wdGlvbnMuZXhwaXJlcyxkPUVjaG8xMjAwQVRJbnRlcm5ldC5VdGlscy5qc29uU2VyaWFsaXplKGYpKTpkPWV9cmV0dXJuIGR9O3RoaXMuc2V0RGF0YT1mdW5jdGlvbihjKXt2YXIgZD0hMTtpZihjLm5hbWUmJlwic3RyaW5nXCI9PT10eXBlb2YgYy5uYW1lKXt2YXIgZT1hKGMpO1wibnVtYmVyXCI9PT10eXBlb2YgZS50aW1lc3RhbXAmJihjLm9wdGlvbnMuZXhwaXJlcz1lLnRpbWVzdGFtcCk7dmFyIGY9RWNobzEyMDBBVEludGVybmV0LlV0aWxzLmpzb25TZXJpYWxpemUoYyk7aWYoZS5pdGVtVG9EZWxldGUpZD1iKGMubmFtZSk7ZWxzZSB0cnl7bG9jYWxTdG9yYWdlLnNldEl0ZW0oYy5uYW1lLG0oZikpLGQ9ITB9Y2F0Y2goZyl7fX1yZXR1cm4gZH19OlxubmV3IHE7dmFyIGM9ZnVuY3Rpb24oYixjKXt2YXIgZD0hMTshRWNobzEyMDBBVEludGVybmV0LlV0aWxzLmNvbnNlbnQmJiFjfHxhLmdldENvbmZpZyhcImRpc2FibGVDb29raWVcIil8fGEuZ2V0Q29uZmlnKFwiZGlzYWJsZVN0b3JhZ2VcIil8fCFifHxcIm9iamVjdFwiIT09dHlwZW9mIGJ8fChkPWUuc2V0RGF0YShiKSk7cmV0dXJuIGR9LGY9ZnVuY3Rpb24oYSxiLGMpe2E9e25hbWU6YSx2YWw6Yn07YyYmYy5zZXNzaW9uJiZcIm51bWJlclwiPT09dHlwZW9mIGMuc2Vzc2lvbiYmKGMuZW5kPWMuc2Vzc2lvbik7YS5vcHRpb25zPWN8fHt9O3JldHVybiBhfSxiPWZ1bmN0aW9uKGIpe3ZhciBjPW51bGwsZD1udWxsO2EuZ2V0Q29uZmlnKFwiZGlzYWJsZUNvb2tpZVwiKXx8YS5nZXRDb25maWcoXCJkaXNhYmxlU3RvcmFnZVwiKXx8IWJ8fFwic3RyaW5nXCIhPT10eXBlb2YgYnx8KGQ9ZS5nZXREYXRhKGIpKTsoYj1kKSYmKGM9RWNobzEyMDBBVEludGVybmV0LlV0aWxzLmpzb25QYXJzZShiKSk7cmV0dXJuIGN9LGg9ZnVuY3Rpb24oYSxiKXt2YXIgZD1cbkVjaG8xMjAwQVRJbnRlcm5ldC5VdGlscy5jbG9uZVNpbXBsZU9iamVjdChhKTtyZXR1cm4gYyhkLGIpP0VjaG8xMjAwQVRJbnRlcm5ldC5VdGlscy5qc29uUGFyc2UoRWNobzEyMDBBVEludGVybmV0LlV0aWxzLmpzb25TZXJpYWxpemUoYSkpOm51bGx9LHM9ZnVuY3Rpb24oYSxjLGQpe2lmKCFkJiZuW2FdKWQ9blthXTtlbHNlIGlmKGQ9YihhKSlkLm9wdGlvbnM9ZC5vcHRpb25zfHx7fSxkLm9wdGlvbnMuc2Vzc2lvbiYmXCJudW1iZXJcIj09PXR5cGVvZiBkLm9wdGlvbnMuc2Vzc2lvbiYmKGQub3B0aW9ucy5lbmQ9ZC5vcHRpb25zLnNlc3Npb24saChkLCExKSksblthXT1kO3JldHVybiBkP2M/KGE9bnVsbCwhZHx8XCJvYmplY3RcIiE9PXR5cGVvZiBkLnZhbHx8ZC52YWwgaW5zdGFuY2VvZiBBcnJheXx8dm9pZCAwPT09ZC52YWxbY118fChhPWQudmFsW2NdKSxhKTpkLnZhbDpudWxsfSxyPWZ1bmN0aW9uKGEsYyxkLGUsZyl7aWYoYyl7aWYoZz1iKGEpKSFnfHxcIm9iamVjdFwiIT09dHlwZW9mIGcudmFsfHxnLnZhbCBpbnN0YW5jZW9mXG5BcnJheT9nPW51bGw6XCJ1bmRlZmluZWRcIj09PXR5cGVvZiBkP2RlbGV0ZSBnLnZhbFtjXTpnLnZhbFtjXT1kLGcmJihnPWgoZyxlKSl9ZWxzZSBnPWd8fHt9LGc9ZihhLGQsZyksZz1oKGcsZSk7cmV0dXJuIGc/KG5bYV09ZyxnLnZhbCk6bnVsbH0sdz1mdW5jdGlvbihhLGIpe2lmKGIpcihhLGIsdm9pZCAwLCExLG51bGwpO2Vsc2V7blthXT12b2lkIDA7dmFyIGQ9ZihhLFwiXCIse2VuZDpuZXcgRGF0ZShcIlRodSwgMDEgSmFuIDE5NzAgMDA6MDA6MDAgVVRDXCIpLHBhdGg6XCIvXCJ9KTtjKGQsITEpfX07YS5zdG9yYWdlPXt9O2Euc3RvcmFnZS5nZXQ9ay5nZXQ9ZnVuY3Rpb24oYSxiKXtiPSEhYjtyZXR1cm4gYSBpbnN0YW5jZW9mIEFycmF5P3MoYVswXSxhWzFdLGIpOnMoYSxcIlwiLGIpfTthLnN0b3JhZ2UuZ2V0UHJpdmF0ZT1rLmdldFByaXZhdGU9ZnVuY3Rpb24oYixjKXtiIGluc3RhbmNlb2YgQXJyYXk/YlswXSs9YS5nZXRDb25maWcoXCJzaXRlXCIpOmIrPWEuZ2V0Q29uZmlnKFwic2l0ZVwiKTtcbnJldHVybiBrLmdldChiLGMpfTthLnN0b3JhZ2Uuc2V0PWsuc2V0PWZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiBhIGluc3RhbmNlb2YgQXJyYXk/cihhWzBdLGFbMV0sYixkLG51bGwpOnIoYSxudWxsLGIsZCxjKX07YS5zdG9yYWdlLnNldFByaXZhdGU9ay5zZXRQcml2YXRlPWZ1bmN0aW9uKGIsYyxkKXtiIGluc3RhbmNlb2YgQXJyYXk/YlswXSs9YS5nZXRDb25maWcoXCJzaXRlXCIpOmIrPWEuZ2V0Q29uZmlnKFwic2l0ZVwiKTtyZXR1cm4gay5zZXQoYixjLGQpfTthLnN0b3JhZ2UuZGVsPWsuZGVsPWZ1bmN0aW9uKGEpe2EgaW5zdGFuY2VvZiBBcnJheT93KGFbMF0sYVsxXSk6dyhhLFwiXCIpfTthLnN0b3JhZ2UuZGVsUHJpdmF0ZT1rLmRlbFByaXZhdGU9ZnVuY3Rpb24oYil7YiBpbnN0YW5jZW9mIEFycmF5P2JbMF0rPWEuZ2V0Q29uZmlnKFwic2l0ZVwiKTpiKz1hLmdldENvbmZpZyhcInNpdGVcIik7ay5kZWwoYil9O2Euc3RvcmFnZS5jYWNoZUludmFsaWRhdGlvbj1rLmNhY2hlSW52YWxpZGF0aW9uPVxuZnVuY3Rpb24oKXtuPXt9fX07RWNobzEyMDBBVEludGVybmV0LlRyYWNrZXIuYWRkUGx1Z2luKFwiU3RvcmFnZVwiKTtFY2hvMTIwMEFUSW50ZXJuZXQuVHJhY2tlci5hZGRQbHVnaW4oXCJDb29raWVzXCIpO1xufSkuY2FsbCh3aW5kb3cpOzsoZnVuY3Rpb24oKXt2YXIgZGZsdFBsdWdpbkNmZz17XCJjbGlja3NBdXRvTWFuYWdlbWVudEVuYWJsZWRcIjp0cnVlLFwiY2xpY2tzQXV0b01hbmFnZW1lbnRUaW1lb3V0XCI6NTAwLFwiaW5mb1wiOmZhbHNlfTt2YXIgZGZsdEdsb2JhbENmZz17fTt3aW5kb3cuRWNobzEyMDBBVEludGVybmV0LlRyYWNrZXIuUGx1Z2lucy5UZWNoQ2xpY2tzPWZ1bmN0aW9uKGEpe3ZhciBrPXRoaXMsbCxkO2EuY29uZmlnUGx1Z2luKFwiVGVjaENsaWNrc1wiLGRmbHRQbHVnaW5DZmd8fHt9LGZ1bmN0aW9uKGEpe2w9YS5jbGlja3NBdXRvTWFuYWdlbWVudEVuYWJsZWQ7ZD1hLmNsaWNrc0F1dG9NYW5hZ2VtZW50VGltZW91dH0pO2suZGVhY3RpdmF0ZUF1dG9NYW5hZ2VtZW50PWZ1bmN0aW9uKCl7bD0hMX07dmFyIGU9ZnVuY3Rpb24oYSl7c3dpdGNoKGEudGFyZ2V0KXtjYXNlIFwiX3RvcFwiOndpbmRvdy50b3AubG9jYXRpb24uaHJlZj1hLnVybDticmVhaztjYXNlIFwiX3BhcmVudFwiOndpbmRvdy5wYXJlbnQubG9jYXRpb24uaHJlZj1hLnVybDticmVhaztkZWZhdWx0OndpbmRvdy5sb2NhdGlvbi5ocmVmPWEudXJsfX0sbj1mdW5jdGlvbihhKXt2YXIgYj1hLnRpbWVvdXQ7YS5tYWlsdG8/ay50aW1lb3V0PXNldFRpbWVvdXQoZnVuY3Rpb24oKXt3aW5kb3cubG9jYXRpb24uaHJlZj1cbmEubWFpbHRvfSxiKTphLmZvcm0/ay50aW1lb3V0PXNldFRpbWVvdXQoZnVuY3Rpb24oKXthLmZvcm0uc3VibWl0KCl9LGIpOmEudXJsJiYoay50aW1lb3V0PXNldFRpbWVvdXQoZnVuY3Rpb24oKXtlKHt1cmw6YS51cmwsdGFyZ2V0OmEudGFyZ2V0fSl9LGIpKX0sbT1mdW5jdGlvbihjKXtmb3IodmFyIGIsZz1cIl9zZWxmXCIsbT1jLnRpbWVvdXRvbmx5O2M7KXtpZihjLmhyZWYmJjA9PT1jLmhyZWYuaW5kZXhPZihcImh0dHBcIikpe2I9Yy5ocmVmLnNwbGl0KCdcIicpLmpvaW4oJ1xcXFxcIicpO2c9Yy50YXJnZXQ/Yy50YXJnZXQ6ZzticmVha31jPWMucGFyZW50Tm9kZX1pZihiKXtpZighbSlhLm9uVHJpZ2dlcihcIlRyYWNrZXI6SGl0OlNlbnQ6T2tcIixmdW5jdGlvbigpe2sudGltZW91dCYmY2xlYXJUaW1lb3V0KGsudGltZW91dCk7ZSh7dXJsOmIsdGFyZ2V0Omd9KX0pO24oe3VybDpiLHRhcmdldDpnLHRpbWVvdXQ6ZH0pfX0sZz1mdW5jdGlvbihjKXt2YXIgYj1jO2ZvcihjPWIudGltZW91dG9ubHk7YiYmXG5cIkZPUk1cIiE9PWIubm9kZU5hbWU7KWI9Yi5wYXJlbnROb2RlO2lmKGIpe2lmKCFjKWEub25UcmlnZ2VyKFwiVHJhY2tlcjpIaXQ6U2VudDpPa1wiLGZ1bmN0aW9uKCl7ay50aW1lb3V0JiZjbGVhclRpbWVvdXQoay50aW1lb3V0KTtiLnN1Ym1pdCgpfSk7bih7Zm9ybTpiLHRpbWVvdXQ6ZH0pfX0scT1mdW5jdGlvbihjKXt2YXIgYj1jO2ZvcihjPWIudGltZW91dG9ubHk7YiYmIShiLmhyZWYmJjA8PWIuaHJlZi5pbmRleE9mKFwibWFpbHRvOlwiKSk7KWI9Yi5wYXJlbnROb2RlO2lmKGIpe2lmKCFjKWEub25UcmlnZ2VyKFwiVHJhY2tlcjpIaXQ6U2VudDpPa1wiLGZ1bmN0aW9uKCl7ay50aW1lb3V0JiZjbGVhclRpbWVvdXQoay50aW1lb3V0KTt3aW5kb3cubG9jYXRpb24uaHJlZj1iLmhyZWZ9KTtuKHttYWlsdG86Yi5ocmVmLHRpbWVvdXQ6ZH0pfX0sYz1mdW5jdGlvbihhKXtmb3IoO2E7KXtpZihhLmhyZWYpe2lmKDA8PWEuaHJlZi5pbmRleE9mKFwibWFpbHRvOlwiKSlyZXR1cm5cIm1haWx0b1wiO2lmKDA9PT1cbmEuaHJlZi5pbmRleE9mKFwiaHR0cFwiKSlyZXR1cm5cInJlZGlyZWN0aW9uXCJ9ZWxzZSBpZihcIkZPUk1cIj09PWEubm9kZU5hbWUpcmV0dXJuXCJmb3JtXCI7YT1hLnBhcmVudE5vZGV9cmV0dXJuXCJcIn07YS50ZWNoQ2xpY2tzPXt9O2EudGVjaENsaWNrcy5tYW5hZ2VDbGljaz1rLm1hbmFnZUNsaWNrPWZ1bmN0aW9uKGEsYil7dmFyIGQ9ITA7aWYobCYmYSl7dmFyIGU7YTp7Zm9yKGU9YTtlOyl7aWYoXCJmdW5jdGlvblwiPT09dHlwZW9mIGUuZ2V0QXR0cmlidXRlJiYoXCJfYmxhbmtcIj09PWUuZ2V0QXR0cmlidXRlKFwidGFyZ2V0XCIpfHxcIm5vXCI9PT1lLmdldEF0dHJpYnV0ZShcImRhdGEtYXRjbGlja21hbmFnZW1lbnRcIikpKXtlPSEwO2JyZWFrIGF9ZT1lLnBhcmVudE5vZGV9ZT1hO2Zvcih2YXIgaz13aW5kb3cubG9jYXRpb24uaHJlZixuO2U7KXtpZigobj1lLmhyZWYpJiYwPD1uLmluZGV4T2YoXCIjXCIpJiZrLnN1YnN0cmluZygwLDA8PWsuaW5kZXhPZihcIiNcIik/ay5pbmRleE9mKFwiI1wiKTprLmxlbmd0aCk9PT1cbm4uc3Vic3RyaW5nKDAsbi5pbmRleE9mKFwiI1wiKSkpe2U9ITA7YnJlYWsgYX1lPWUucGFyZW50Tm9kZX1lPSExfWs9YyhhKTtpZighZSYmayl7c3dpdGNoKGspe2Nhc2UgXCJtYWlsdG9cIjpxKGEpO2Q9ITE7YnJlYWs7Y2FzZSBcImZvcm1cIjpnKGEpO2Q9ITE7YnJlYWs7Y2FzZSBcInJlZGlyZWN0aW9uXCI6bShhKSxkPSExfWImJihlPWIuZGVmYXVsdFByZXZlbnRlZCxcImZ1bmN0aW9uXCI9PT10eXBlb2YgYi5pc0RlZmF1bHRQcmV2ZW50ZWQmJihlPWIuaXNEZWZhdWx0UHJldmVudGVkKCkpLGV8fGIucHJldmVudERlZmF1bHQmJmIucHJldmVudERlZmF1bHQoKSl9fXJldHVybiBkfX07d2luZG93LkVjaG8xMjAwQVRJbnRlcm5ldC5UcmFja2VyLmFkZFBsdWdpbihcIlRlY2hDbGlja3NcIik7XG59KS5jYWxsKHdpbmRvdyk7OyhmdW5jdGlvbigpe3ZhciBkZmx0UGx1Z2luQ2ZnPXtcImluZm9cIjpmYWxzZX07dmFyIGRmbHRHbG9iYWxDZmc9e307d2luZG93LkVjaG8xMjAwQVRJbnRlcm5ldC5UcmFja2VyLlBsdWdpbnMuVXRpbHM9ZnVuY3Rpb24oYSl7dmFyIGs9dGhpcyxsPXt9O2EudXRpbHM9e307YS51dGlscy5nZXRRdWVyeVN0cmluZ1ZhbHVlPWsuZ2V0UXVlcnlTdHJpbmdWYWx1ZT1mdW5jdGlvbihhLGQpe3ZhciBlPUVjaG8xMjAwQVRJbnRlcm5ldC5VdGlscy5oYXNoY29kZShkKS50b1N0cmluZygpO2lmKCFsW2VdKXtsW2VdPXt9O3ZhciBrPVJlZ0V4cChcIlsmIz9dezF9KFteJj0jP10qKT0oW14mI10qKT9cIixcImdcIiksYz1rLmV4ZWMoZCk7aWYobnVsbCE9PWMpZm9yKDtudWxsIT09YzspbFtlXVtjWzFdXT1jWzJdLGM9ay5leGVjKGQpfXJldHVybiBsW2VdLmhhc093blByb3BlcnR5KGEpP2xbZV1bYV06bnVsbH07ay5tYW5hZ2VDaGFwdGVycz1mdW5jdGlvbihkLGUsZyl7dmFyIGs9YS5nZXRDb25maWcoXCJpZ25vcmVFbXB0eUNoYXB0ZXJWYWx1ZVwiKSxjPVwiXCI7aWYoZCl7Zz1wYXJzZUludChnLDEwKTtmb3IodmFyIGY9MTtmPGcrMTtmKyspdmFyIGI9XG5kW2UrZl18fFwiXCIsYz1rP2MrKGI/YitcIjo6XCI6XCJcIik6YysoZC5oYXNPd25Qcm9wZXJ0eShlK2YpP2IrXCI6OlwiOlwiXCIpfXJldHVybiBjfTtrLmdldERvY3VtZW50TGV2ZWw9ZnVuY3Rpb24oKXt2YXIgZD1hLmdldENvbmZpZyhcImRvY3VtZW50TGV2ZWxcIik7aWYoMD5kLmluZGV4T2YoXCIuXCIpKXJldHVybiB3aW5kb3dbZF18fGRvY3VtZW50O2Q9ZC5zcGxpdChcIi5cIik7cmV0dXJuIHdpbmRvd1tkWzBdXVtkWzFdXXx8ZG9jdW1lbnR9O2EudXRpbHMuZ2V0TG9jYXRpb249ay5nZXRMb2NhdGlvbj1mdW5jdGlvbigpe3JldHVybiBrLmdldERvY3VtZW50TGV2ZWwoKS5sb2NhdGlvbi5ocmVmfTthLmRpc3BhdGNoSW5kZXg9e307YS5kaXNwYXRjaFN0YWNrPVtdO2EuZGlzcGF0Y2hFdmVudEZvcj17fTt2YXIgZD0wO2EuZGlzcGF0Y2hTdWJzY3JpYmU9ZnVuY3Rpb24oZCl7cmV0dXJuIGEuZGlzcGF0Y2hJbmRleFtkXT8hMTooYS5kaXNwYXRjaFN0YWNrLnB1c2goZCksYS5kaXNwYXRjaEluZGV4W2RdPVxuITApfTthLmRpc3BhdGNoU3Vic2NyaWJlZD1mdW5jdGlvbihkKXtyZXR1cm4hMD09PWEuZGlzcGF0Y2hJbmRleFtkXX07YS5hZGRTcGVjaWZpY0Rpc3BhdGNoRXZlbnRGb3I9ZnVuY3Rpb24oZSl7cmV0dXJuIGEuZGlzcGF0Y2hFdmVudEZvcltlXT8hMTooYS5kaXNwYXRjaEV2ZW50Rm9yW2VdPSEwLGQrKywhMCl9O2EucHJvY2Vzc1NwZWNpZmljRGlzcGF0Y2hFdmVudEZvcj1mdW5jdGlvbihlKXthLmRpc3BhdGNoRXZlbnRGb3JbZV0mJihhLmRpc3BhdGNoRXZlbnRGb3JbZV09ITEsZC0tLDA9PT1kJiYoYS5kaXNwYXRjaEV2ZW50Rm9yPXt9LGEuZW1pdChcIlRyYWNrZXI6UGx1Z2luOlNwZWNpZmljRXZlbnQ6RXhlYzpDb21wbGV0ZVwiLHtsdmw6XCJJTkZPXCJ9KSkpfTthLmRpc3BhdGNoPWZ1bmN0aW9uKGUpe3ZhciBrPWZ1bmN0aW9uKCl7Zm9yKHZhciBkPVwiXCIsYz1udWxsOzA8YS5kaXNwYXRjaFN0YWNrLmxlbmd0aDspZD1hLmRpc3BhdGNoU3RhY2sucG9wKCksMD09PWEuZGlzcGF0Y2hTdGFjay5sZW5ndGgmJlxuKGM9ZSksYVtkXS5vbkRpc3BhdGNoKGMpO2EuZGlzcGF0Y2hJbmRleD17fTthLmRlbENvbnRleHQodm9pZCAwLFwiY3VzdG9tT2JqZWN0XCIpfSxnPWZ1bmN0aW9uKCl7aWYoYS5wbHVnaW5zLmlzRXhlY1dhaXRpbmdMYXp5bG9hZGluZygpKWEub25UcmlnZ2VyKFwiVHJhY2tlcjpQbHVnaW46TGF6eWxvYWQ6RXhlYzpDb21wbGV0ZVwiLGZ1bmN0aW9uKCl7aygpfSwhMCk7ZWxzZSBrKCl9O2lmKDA9PT1kKWcoKTtlbHNlIGEub25UcmlnZ2VyKFwiVHJhY2tlcjpQbHVnaW46U3BlY2lmaWNFdmVudDpFeGVjOkNvbXBsZXRlXCIsZnVuY3Rpb24oKXtnKCl9LCEwKX07YS5kaXNwYXRjaFJlZGlyZWN0PWZ1bmN0aW9uKGQpe3ZhciBlPSEwLGc9bnVsbDtkJiYoZz1udWxsLGQmJmQuaGFzT3duUHJvcGVydHkoXCJldmVudFwiKSYmKGc9ZC5ldmVudHx8d2luZG93LmV2ZW50KSwhRWNobzEyMDBBVEludGVybmV0LlV0aWxzLmlzVGFiT3BlbmluZ0FjdGlvbihnKSYmZC5lbGVtJiYoZC5lbGVtLnRpbWVvdXRvbmx5PSEwLGEucGx1Z2lucy5leGVjKFwiVGVjaENsaWNrc1wiLFxuXCJtYW5hZ2VDbGlja1wiLFtkLmVsZW0sZ10sZnVuY3Rpb24oYSl7ZT1hfSkpLGc9ZC5jYWxsYmFjayk7YS5kaXNwYXRjaChnKTtyZXR1cm4gZX07dmFyIGU9YS5tYW5hZ2VTZW5kPWZ1bmN0aW9uKGQpe2lmKCFFY2hvMTIwMEFUSW50ZXJuZXQuVXRpbHMuaXNQcmV2aWV3KCl8fGEuZ2V0Q29uZmlnKFwicHJldmlld1wiKSlFY2hvMTIwMEFUSW50ZXJuZXQuVXRpbHMuaXNQcmVyZW5kZXIoZnVuY3Rpb24oYSl7ZChhKX0pfHxkKCl9O2EucHJvY2Vzc1RhZ09iamVjdD1mdW5jdGlvbihkLGUsZyl7aWYoKGQ9YS5nZXRQYXJhbShkLCEwKSkmJmQub3B0aW9ucy5wZXJtYW5lbnQpe2Zvcih2YXIgaz0hMSxjPWQub3B0aW9ucy5oaXRUeXBlfHxbXSxmPTA7ZjxjLmxlbmd0aDtmKyspaWYoLTEhPT1FY2hvMTIwMEFUSW50ZXJuZXQuVXRpbHMuYXJyYXlJbmRleE9mKGUuY29uY2F0KFwiYWxsXCIpLGNbZl0pKXtrPSEwO2JyZWFrfWsmJihnPUVjaG8xMjAwQVRJbnRlcm5ldC5VdGlscy5jb21wbGV0ZUZzdExldmVsT2JqKGQudmFsdWV8fHt9LGcsITApKX1yZXR1cm4gZ307XG5hLnByb2Nlc3NDb250ZXh0T2JqZWN0QW5kU2VuZEhpdD1mdW5jdGlvbihkLGssZyxsKXt2YXIgYz1hLmdldFBhcmFtKGQsITApO2lmKGMpe2Zvcih2YXIgZj0hMSxiPWMub3B0aW9ucy5oaXRUeXBlfHxbXSxoPTA7aDxiLmxlbmd0aDtoKyspaWYoLTEhPT1FY2hvMTIwMEFUSW50ZXJuZXQuVXRpbHMuYXJyYXlJbmRleE9mKGsuaGl0VHlwZS5jb25jYXQoXCJhbGxcIiksYltoXSkpe2Y9ITA7YnJlYWt9Zj8oZj1FY2hvMTIwMEFUSW50ZXJuZXQuVXRpbHMuY2xvbmVTaW1wbGVPYmplY3QoYyksZi52YWx1ZT1FY2hvMTIwMEFUSW50ZXJuZXQuVXRpbHMuY29tcGxldGVGc3RMZXZlbE9iaihmLnZhbHVlfHx7fSxnLCEwKSxhLnNldFBhcmFtKGQsZi52YWx1ZSx7aGl0VHlwZTprLmhpdFR5cGUsZW5jb2RlOmsuZW5jb2RlLHNlcGFyYXRvcjprLnNlcGFyYXRvcix0cnVuY2F0ZTprLnRydW5jYXRlfSksZShmdW5jdGlvbigpe2Euc2VuZEhpdChudWxsLFtbXCJoaXRUeXBlXCIsay5oaXRUeXBlXV0sbCxudWxsLCEwKX0pLGMub3B0aW9ucy5wZXJtYW5lbnQmJlxuYS5zZXRQYXJhbShkLGMudmFsdWUsYy5vcHRpb25zKSk6KGEuc2V0UGFyYW0oZCxnLHtoaXRUeXBlOmsuaGl0VHlwZSxlbmNvZGU6ay5lbmNvZGUsc2VwYXJhdG9yOmsuc2VwYXJhdG9yLHRydW5jYXRlOmsudHJ1bmNhdGV9KSxlKGZ1bmN0aW9uKCl7YS5zZW5kSGl0KG51bGwsW1tcImhpdFR5cGVcIixrLmhpdFR5cGVdXSxsLG51bGwsITApfSksYS5zZXRQYXJhbShkLGMudmFsdWUsYy5vcHRpb25zKSl9ZWxzZSBhLnNldFBhcmFtKGQsZyx7aGl0VHlwZTprLmhpdFR5cGUsZW5jb2RlOmsuZW5jb2RlLHNlcGFyYXRvcjprLnNlcGFyYXRvcix0cnVuY2F0ZTprLnRydW5jYXRlfSksZShmdW5jdGlvbigpe2Euc2VuZEhpdChudWxsLFtbXCJoaXRUeXBlXCIsay5oaXRUeXBlXV0sbCxudWxsLCEwKX0pfX07d2luZG93LkVjaG8xMjAwQVRJbnRlcm5ldC5UcmFja2VyLmFkZFBsdWdpbihcIlV0aWxzXCIpO1xufSkuY2FsbCh3aW5kb3cpO1xuaWYodHlwZW9mIHdpbmRvdy5FY2hvMTIwMEFUSW50ZXJuZXQub25UcmFja2VyTG9hZD09PSdmdW5jdGlvbicpe3dpbmRvdy5FY2hvMTIwMEFUSW50ZXJuZXQub25UcmFja2VyTG9hZCgpO31cblxuLyoqIFNUQVJUIEJCQyBBRERJVElPTiAqKi9cbnJldHVybiBFY2hvMTIwMEFUSW50ZXJuZXQ7XG59KTtcbi8qKiBFTkQgQkJDIEFERElUSU9OICoqL1xuIiwiIWZ1bmN0aW9uKG4pe2lmKFwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgbW9kdWxlKW1vZHVsZS5leHBvcnRzPW4oKTtlbHNlIGlmKFwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZClkZWZpbmUoW10sbik7ZWxzZXsoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGdsb2JhbD9nbG9iYWw6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGY/c2VsZjp0aGlzKS5uc189bigpfX0oZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24gbyh1LHMsYSl7ZnVuY3Rpb24gZihlLG4pe2lmKCFzW2VdKXtpZighdVtlXSl7dmFyIHQ9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighbiYmdClyZXR1cm4gdChlLCEwKTtpZihjKXJldHVybiBjKGUsITApO3ZhciBpPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrZStcIidcIik7dGhyb3cgaS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGl9dmFyIHI9c1tlXT17ZXhwb3J0czp7fX07dVtlXVswXS5jYWxsKHIuZXhwb3J0cyxmdW5jdGlvbihuKXt2YXIgdD11W2VdWzFdW25dO3JldHVybiBmKHR8fG4pfSxyLHIuZXhwb3J0cyxvLHUscyxhKX1yZXR1cm4gc1tlXS5leHBvcnRzfWZvcih2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLG49MDtuPGEubGVuZ3RoO24rKylmKGFbbl0pO3JldHVybiBmfSh7MTpbZnVuY3Rpb24obix0LGUpe3ZhciBhPW4oMjQpLGY9bigyNiksYz1uKDM2KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7dmFyIG49dGhpcyxlPSExLGk9LTEscj1udWxsO2Z1bmN0aW9uIG8obil7aT1uLHQudCgpLnNldChcInBsYW5uZWRGbHVzaFRpbWVcIixuK1wiXCIpfWZ1bmN0aW9uIHUoKXt0LmZsdXNoKCksbygtMSksbi5pKCl9ZnVuY3Rpb24gcygpe3ImJihjLmNsZWFyVGltZW91dChyKSxyPW51bGwpfWEuZXh0ZW5kKG4se3N0YXJ0OmZ1bmN0aW9uKCl7ZT0hMCwhciYmMDx0LmdldENhY2hlRmx1c2hpbmdJbnRlcnZhbCgpJiZudWxsIT10LmdldEN1c3RvbWVyQzIoKSYmKHQudCgpLmhhcyhcInBsYW5uZWRGbHVzaFRpbWVcIikmJihpPWYubyh0LnQoKS5nZXQoXCJwbGFubmVkRmx1c2hUaW1lXCIpLC0xKSksbi5pKCkpfSxzdG9wOmZ1bmN0aW9uKCl7ZT0hMSxzKCl9LHVwZGF0ZTpmdW5jdGlvbigpezA8dC5nZXRDYWNoZUZsdXNoaW5nSW50ZXJ2YWwoKSYmbnVsbCE9dC5nZXRDdXN0b21lckMyKCk/IXImJmU/KG8oLTEpLG4uc3RhcnQoKSk6bnVsbCE9ciYmKG8oMDx0LmdldENhY2hlRmx1c2hpbmdJbnRlcnZhbCgpPytuZXcgRGF0ZSsxZTMqdC5nZXRDYWNoZUZsdXNoaW5nSW50ZXJ2YWwoKTotMSksciYmKGMuY2xlYXJUaW1lb3V0KHIpLG4uaSgpKSk6KG8oLTEpLHMoKSl9LGk6ZnVuY3Rpb24oKXtpPDAmJm8oK25ldyBEYXRlKzFlMyp0LmdldENhY2hlRmx1c2hpbmdJbnRlcnZhbCgpKSxyPWMuc2V0VGltZW91dCh1LGktK25ldyBEYXRlKX19KX19LHsyNDoyNCwyNjoyNiwzNjozNn1dLDI6W2Z1bmN0aW9uKG4sdCxlKXt2YXIgaT1uKDUpLHI9big4KS5UcmFuc21pc3Npb25Nb2RlLG89big4KS51LHU9bmV3IGkscz17VHJhbnNtaXNzaW9uTW9kZTpyLGdldENvcmU6ZnVuY3Rpb24oKXtyZXR1cm4gdX0sc2V0QXBwQ29udGV4dDpmdW5jdGlvbihuKXt1LnNldEFwcENvbnRleHQobil9LHNldEVuYWJsZWQ6ZnVuY3Rpb24obil7dS5zZXRFbmFibGVkKG4pfSxnZXRFbmFibGVkOmZ1bmN0aW9uKCl7cmV0dXJuIHUuZ2V0RW5hYmxlZCgpfSxvblV4QWN0aXZlOmZ1bmN0aW9uKCl7dS5vblV4QWN0aXZlKCl9LG9uVXhJbmFjdGl2ZTpmdW5jdGlvbigpe3Uub25VeEluYWN0aXZlKCl9LG9uRW50ZXJGb3JlZ3JvdW5kOmZ1bmN0aW9uKCl7dS5vbkVudGVyRm9yZWdyb3VuZCgpfSxvbkV4aXRGb3JlZ3JvdW5kOmZ1bmN0aW9uKCl7dS5vbkV4aXRGb3JlZ3JvdW5kKCl9LG9uVXNlckludGVyYWN0aW9uOmZ1bmN0aW9uKCl7dS5vblVzZXJJbnRlcmFjdGlvbigpfSx1cGRhdGU6ZnVuY3Rpb24oKXt1LnVwZGF0ZSgpfSxlbmFibGVBdXRvVXBkYXRlOmZ1bmN0aW9uKG4sdCl7dS5lbmFibGVBdXRvVXBkYXRlKG4sdm9pZCAwPT09dHx8dCl9LGRpc2FibGVBdXRvVXBkYXRlOmZ1bmN0aW9uKCl7dS5kaXNhYmxlQXV0b1VwZGF0ZSgpfSxpc0F1dG9VcGRhdGVFbmFibGVkOmZ1bmN0aW9uKCl7cmV0dXJuIHUuaXNBdXRvVXBkYXRlRW5hYmxlZCgpfSxzdGFydDpmdW5jdGlvbihuKXt1LnMoby5sLG58fHt9KX0sdmlldzpmdW5jdGlvbihuKXt1LnMoby52LG58fHt9KX0saGlkZGVuOmZ1bmN0aW9uKG4pe3UucyhvLkhJRERFTixufHx7fSl9LGNsb3NlOmZ1bmN0aW9uKG4pe3UucyhvLmgsbil9LGFnZ3JlZ2F0ZTpmdW5jdGlvbihuKXt1LnMoby5fLG4pfSxnZXRQaXhlbFVSTDpmdW5jdGlvbigpe3JldHVybiB1LmdldFBpeGVsVVJMKCl9LHNldFBpeGVsVVJMOmZ1bmN0aW9uKG4pe3Uuc2V0UGl4ZWxVUkwobil9LGdldEN1c3RvbWVyQzI6ZnVuY3Rpb24oKXtyZXR1cm4gdS5nZXRDdXN0b21lckMyKCl9LHNldEN1c3RvbWVyQzI6ZnVuY3Rpb24obil7dS5zZXRDdXN0b21lckMyKG4pfSxnZXRBcHBOYW1lOmZ1bmN0aW9uKCl7cmV0dXJuIHUuZ2V0QXBwTmFtZSgpfSxzZXRBcHBOYW1lOmZ1bmN0aW9uKG4pe3Uuc2V0QXBwTmFtZShuKX0sZ2V0QXBwVmVyc2lvbjpmdW5jdGlvbigpe3JldHVybiB1LmdldEFwcFZlcnNpb24oKX0sc2V0QXBwVmVyc2lvbjpmdW5jdGlvbihuKXt1LnNldEFwcFZlcnNpb24obil9LGdldEdlbmVzaXM6ZnVuY3Rpb24oKXtyZXR1cm4gdS5nZXRHZW5lc2lzKCl9LGdldFZpc2l0b3JJRDpmdW5jdGlvbigpe3JldHVybiB1LmdldFZpc2l0b3JJZCgpfSxzZXRWaXNpdG9ySWQ6ZnVuY3Rpb24obix0KXt1LnNldFZpc2l0b3JJZChuLHQpfSxnZXRDcm9zc1B1Ymxpc2hlcklkOmZ1bmN0aW9uKCl7cmV0dXJuIHUuZ2V0Q3Jvc3NQdWJsaXNoZXJJZCgpfSxnZXRPZmZsaW5lVHJhbnNtaXNzaW9uTW9kZTpmdW5jdGlvbigpe3JldHVybiB1LmdldE9mZmxpbmVUcmFuc21pc3Npb25Nb2RlKCl9LGFsbG93T2ZmbGluZVRyYW5zbWlzc2lvbjpmdW5jdGlvbihuKXt1LmFsbG93T2ZmbGluZVRyYW5zbWlzc2lvbihuKX0sZ2V0TGl2ZVRyYW5zbWlzc2lvbk1vZGU6ZnVuY3Rpb24oKXtyZXR1cm4gdS5nZXRMaXZlVHJhbnNtaXNzaW9uTW9kZSgpfSxhbGxvd0xpdmVUcmFuc21pc3Npb246ZnVuY3Rpb24obil7dS5hbGxvd0xpdmVUcmFuc21pc3Npb24obil9LGdldFB1Ymxpc2hlclNlY3JldDpmdW5jdGlvbigpe3JldHVybiB1LmcoKX0sc2V0UHVibGlzaGVyU2VjcmV0OmZ1bmN0aW9uKG4pe3UubShuKX0sZmx1c2hDYWNoZTpmdW5jdGlvbigpe3UuZmx1c2goKX0sY2xlYXJPZmZsaW5lQ2FjaGU6ZnVuY3Rpb24oKXt1LkkoKS5jbGVhcigpfSxzZXRMYWJlbDpmdW5jdGlvbihuLHQpe3Uuc2V0TGFiZWwobix0KX0sZ2V0TGFiZWw6ZnVuY3Rpb24obil7cmV0dXJuIHUuZ2V0TGFiZWwobil9LHNldExhYmVsczpmdW5jdGlvbihuKXt1LnNldExhYmVscyhuKX0sZ2V0TGFiZWxzOmZ1bmN0aW9uKCl7cmV0dXJuIHUuZ2V0TGFiZWxzKCl9LHNldEF1dG9TdGFydExhYmVsczpmdW5jdGlvbihuKXt1LnNldEF1dG9TdGFydExhYmVscyhuKX0sZ2V0QXV0b1N0YXJ0TGFiZWw6ZnVuY3Rpb24obil7cmV0dXJuIHUuZ2V0QXV0b1N0YXJ0TGFiZWwobil9LGdldEF1dG9TdGFydExhYmVsczpmdW5jdGlvbigpe3JldHVybiB1LmdldEF1dG9TdGFydExhYmVscygpfSxzZXRBdXRvU3RhcnRMYWJlbDpmdW5jdGlvbihuLHQpe3Uuc2V0QXV0b1N0YXJ0TGFiZWwobix0KX0saXNLZWVwQWxpdmVFbmFibGVkOmZ1bmN0aW9uKCl7cmV0dXJuIHUuUygpLmlzRW5hYmxlZCgpfSxzZXRLZWVwQWxpdmVFbmFibGVkOmZ1bmN0aW9uKG4pe3Uuc2V0S2VlcEFsaXZlRW5hYmxlZCghIW4pfSxzZXRDYWNoZU1heE1lYXN1cmVtZW50czpmdW5jdGlvbihuKXt1LnNldENhY2hlTWF4TWVhc3VyZW1lbnRzKG4pfSxnZXRDYWNoZU1heE1lYXN1cmVtZW50czpmdW5jdGlvbigpe3JldHVybiB1LmdldENhY2hlTWF4TWVhc3VyZW1lbnRzKCl9LHNldENhY2hlTWF4QmF0Y2hGaWxlczpmdW5jdGlvbihuKXt1LnNldENhY2hlTWF4QmF0Y2hGaWxlcyhuKX0sZ2V0Q2FjaGVNYXhCYXRjaEZpbGVzOmZ1bmN0aW9uKCl7cmV0dXJuIHUuZ2V0Q2FjaGVNYXhCYXRjaEZpbGVzKCl9LHNldENhY2hlTWF4Rmx1c2hlc0luQVJvdzpmdW5jdGlvbihuKXt1LnNldENhY2hlTWF4Rmx1c2hlc0luQVJvdyhuKX0sZ2V0Q2FjaGVNYXhGbHVzaGVzSW5BUm93OmZ1bmN0aW9uKCl7cmV0dXJuIHUuZ2V0Q2FjaGVNYXhGbHVzaGVzSW5BUm93KCl9LHNldENhY2hlTWludXRlc1RvUmV0cnk6ZnVuY3Rpb24obil7dS5zZXRDYWNoZU1pbnV0ZXNUb1JldHJ5KG4pfSxnZXRDYWNoZU1pbnV0ZXNUb1JldHJ5OmZ1bmN0aW9uKCl7cmV0dXJuIHUuZ2V0Q2FjaGVNaW51dGVzVG9SZXRyeSgpfSxzZXRDYWNoZU1lYXN1cmVtZW50RXhwaXJ5OmZ1bmN0aW9uKG4pe3Uuc2V0Q2FjaGVNZWFzdXJlbWVudEV4cGlyeShuKX0sZ2V0Q2FjaGVNZWFzdXJlbWVudEV4cGlyeTpmdW5jdGlvbigpe3JldHVybiB1LmdldENhY2hlTWVhc3VyZW1lbnRFeHBpcnkoKX0sZ2V0Q2FjaGVGbHVzaGluZ0ludGVydmFsOmZ1bmN0aW9uKCl7cmV0dXJuIHUuZ2V0Q2FjaGVGbHVzaGluZ0ludGVydmFsKCl9LHNldENhY2hlRmx1c2hpbmdJbnRlcnZhbDpmdW5jdGlvbihuKXt1LnNldENhY2hlRmx1c2hpbmdJbnRlcnZhbChuKX0sc2V0U2VjdXJlOmZ1bmN0aW9uKG4pe3Uuc2V0U2VjdXJlKG4pfSxpc1NlY3VyZTpmdW5jdGlvbigpe3JldHVybiB1LmlzU2VjdXJlKCl9LGdldE1lYXN1cmVtZW50TGFiZWxPcmRlcjpmdW5jdGlvbigpe3JldHVybiB1LmdldE1lYXN1cmVtZW50TGFiZWxPcmRlcigpfSxzZXRNZWFzdXJlbWVudExhYmVsT3JkZXI6ZnVuY3Rpb24obil7dS5zZXRNZWFzdXJlbWVudExhYmVsT3JkZXIobil9LHNldEF1dG9TdGFydEVuYWJsZWQ6ZnVuY3Rpb24obil7dS5zZXRBdXRvU3RhcnRFbmFibGVkKG4pfSxpc0F1dG9TdGFydEVuYWJsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdS5pc0F1dG9TdGFydEVuYWJsZWQoKX0sZ2V0VmVyc2lvbjpmdW5jdGlvbigpe3JldHVybiB1LmdldFZlcnNpb24oKX0sZ2V0UGxhdGZvcm1BUEk6ZnVuY3Rpb24oKXtyZXR1cm4gdS5nZXRQbGF0Zm9ybUFQSSgpfSxzZXRQbGF0Zm9ybUFQSTpmdW5jdGlvbihuKXt1LnNldFBsYXRmb3JtQVBJKG4pfSxzZXRPZmZsaW5lVVJMOmZ1bmN0aW9uKG4pe3Uuc2V0T2ZmbGluZVVSTChuKX0sY2xlYXJJbnRlcm5hbERhdGE6ZnVuY3Rpb24oKXt1LmNsZWFySW50ZXJuYWxEYXRhKCl9LGNhY2hlSHR0cFJlZGlyZWN0czpmdW5jdGlvbigpe3UuY2FjaGVIdHRwUmVkaXJlY3RzKCl9fTt0LmV4cG9ydHM9c30sezU6NSw4Ojh9XSwzOltmdW5jdGlvbihuLHQsZSl7dmFyIHA9bigyNCksdj1uKDM2KSxkPW4oOCkuVHJhbnNtaXNzaW9uTW9kZSxoPTMwO3QuZXhwb3J0cz1mdW5jdGlvbih0KXt2YXIgZSxpPTFlMyxyPSExLG89bnVsbCx1PW51bGwscz0tMTtmdW5jdGlvbiBhKCl7dC5mbHVzaCgpLHM9LTEsbz1udWxsfWZ1bmN0aW9uIGYoKXtvJiYodi5jbGVhclRpbWVvdXQobyksbz1udWxsKX1mdW5jdGlvbiBjKG4pe3ZhciB0PStuZXcgRGF0ZTtyPyhmKCksKHM8dHx8czwwfHwhbikmJihzPXQrMWUzKmgpLG89di5zZXRUaW1lb3V0KGEscy10KSk6czwwJiYocz10KzFlMypoKX1mdW5jdGlvbiBsKCl7dmFyIG49di5pc0Nvbm5lY3Rpb25BdmFpbGFibGUoKTtuIT1lJiYoKGU9bik/dC5nZXRPZmZsaW5lVHJhbnNtaXNzaW9uTW9kZSgpIT1kLk5FVkVSJiZ0LmdldE9mZmxpbmVUcmFuc21pc3Npb25Nb2RlKCkhPWQuRElTQUJMRUQmJmMoITEpOihmKCkscz0tMSkpLHImJih1PXYuc2V0VGltZW91dChsLGkpKX1wLmV4dGVuZCh0aGlzLHtzdGFydDpmdW5jdGlvbigpe3I9ITAsZSYmMDxzJiZjKCEwKSx1PXYuc2V0VGltZW91dChsLGkpfSxzdG9wOmZ1bmN0aW9uKCl7di5jbGVhclRpbWVvdXQodSksdT1udWxsLHI9ITEsZigpfX0pfX0sezI0OjI0LDM2OjM2LDg6OH1dLDQ6W2Z1bmN0aW9uKG4sdCxlKXt0LmV4cG9ydHM9e1BBR0VfTkFNRV9MQUJFTDpcIm5hbWVcIixQOjIwNDgsQTo0MDk2LEM6XCJwcmV2aW91c1ZlcnNpb25cIixrOltcImMxXCIsXCJjMlwiLFwiY2EyXCIsXCJjYjJcIixcImNjMlwiLFwiY2QyXCIsXCJuc19zaXRlXCIsXCJjYV9uc19zaXRlXCIsXCJjYl9uc19zaXRlXCIsXCJjY19uc19zaXRlXCIsXCJjZF9uc19zaXRlXCIsXCJuc192c2l0ZVwiLFwiY2FfbnNfdnNpdGVcIixcImNiX25zX3ZzaXRlXCIsXCJjY19uc192c2l0ZVwiLFwiY2RfbnNfdnNpdGVcIixcIm5zX2FsaWFzXCIsXCJjYV9uc19hbGlhc1wiLFwiY2JfbnNfYWxpYXNcIixcImNjX25zX2FsaWFzXCIsXCJjZF9uc19hbGlhc1wiLFwibnNfYXBfYW5cIixcImNhX25zX2FwX2FuXCIsXCJjYl9uc19hcF9hblwiLFwiY2NfbnNfYXBfYW5cIixcImNkX25zX2FwX2FuXCIsXCJuc19hcF9wblwiLFwibnNfYXBfcHZcIixcImMxMlwiLFwiY2ExMlwiLFwiY2IxMlwiLFwiY2MxMlwiLFwiY2QxMlwiLFwibnNfYWtcIixcIm5zX2FwX2h3XCIsXCJuYW1lXCIsXCJuc19hcF9uaVwiLFwibnNfYXBfZWNcIixcIm5zX2FwX2V2XCIsXCJuc19hcF9kZXZpY2VcIixcIm5zX2FwX2lkXCIsXCJuc19hcF9jc2ZcIixcIm5zX2FwX2JpXCIsXCJuc19hcF9wZm1cIixcIm5zX2FwX3BmdlwiLFwibnNfYXBfdmVyXCIsXCJjYV9uc19hcF92ZXJcIixcImNiX25zX2FwX3ZlclwiLFwiY2NfbnNfYXBfdmVyXCIsXCJjZF9uc19hcF92ZXJcIixcIm5zX2FwX3N2XCIsXCJuc19hcF9idlwiLFwibnNfYXBfY3ZcIixcIm5zX2FwX3NtdlwiLFwibnNfdHlwZVwiLFwiY2FfbnNfdHlwZVwiLFwiY2JfbnNfdHlwZVwiLFwiY2NfbnNfdHlwZVwiLFwiY2RfbnNfdHlwZVwiLFwibnNfcmFkaW9cIixcIm5zX25jXCIsXCJjc19wYXJ0bmVyXCIsXCJjc194Y2lkXCIsXCJjc19pbXBpZFwiLFwibnNfYXBfdWlcIixcImNhX25zX2FwX3VpXCIsXCJjYl9uc19hcF91aVwiLFwiY2NfbnNfYXBfdWlcIixcImNkX25zX2FwX3VpXCIsXCJuc19hcF9nc1wiLFwibnNfYXBfaWVcIixcIm5zX3N0X3N2XCIsXCJuc19zdF9wdlwiLFwibnNfc3Rfc212XCIsXCJuc19zdF9pdFwiLFwibnNfc3RfaWRcIixcIm5zX3N0X2VjXCIsXCJuc19zdF9zcFwiLFwibnNfc3Rfc2NcIixcIm5zX3N0X3BzcVwiLFwibnNfc3RfYXNxXCIsXCJuc19zdF9zcVwiLFwibnNfc3RfcHBjXCIsXCJuc19zdF9hcGNcIixcIm5zX3N0X3NwY1wiLFwibnNfc3RfYXRwY1wiLFwibnNfc3RfY25cIixcIm5zX3N0X2V2XCIsXCJuc19zdF9wb1wiLFwibnNfc3RfY2xcIixcIm5zX3N0X2VsXCIsXCJuc19zdF9zbFwiLFwibnNfc3RfcGJcIixcIm5zX3N0X2hjXCIsXCJuc19zdF9tcFwiLFwiY2FfbnNfc3RfbXBcIixcImNiX25zX3N0X21wXCIsXCJjY19uc19zdF9tcFwiLFwiY2RfbnNfc3RfbXBcIixcIm5zX3N0X212XCIsXCJjYV9uc19zdF9tdlwiLFwiY2JfbnNfc3RfbXZcIixcImNjX25zX3N0X212XCIsXCJjZF9uc19zdF9tdlwiLFwibnNfc3RfcG5cIixcIm5zX3N0X3RwXCIsXCJuc19zdF9hZFwiLFwibnNfc3RfbGlcIixcIm5zX3N0X2NpXCIsXCJuc19zdF9zaVwiLFwibnNfc3RfcHRcIixcIm5zX3N0X2RwdFwiLFwibnNfc3RfaXB0XCIsXCJuc19zdF9hcFwiLFwibnNfc3RfZGFwXCIsXCJuc19zdF9ldFwiLFwibnNfc3RfZGV0XCIsXCJuc19zdF91cGNcIixcIm5zX3N0X2R1cGNcIixcIm5zX3N0X2l1cGNcIixcIm5zX3N0X3VwYVwiLFwibnNfc3RfZHVwYVwiLFwibnNfc3RfaXVwYVwiLFwibnNfc3RfbHBjXCIsXCJuc19zdF9kbHBjXCIsXCJuc19zdF9scGFcIixcIm5zX3N0X2RscGFcIixcIm5zX3N0X3BhXCIsXCJuc19zdF9sZHdcIixcIm5zX3N0X2xkb1wiLFwibnNfc3RfaWVcIixcIm5zX2FwX2piXCIsXCJuc19hcF9ldFwiLFwibnNfYXBfcmVzXCIsXCJuc19hcF9zZFwiLFwibnNfYXBfcG9cIixcIm5zX2FwX290XCIsXCJuc19hcF9jMTJtXCIsXCJjc19jMTJ1XCIsXCJjYV9jc19jMTJ1XCIsXCJjYl9jc19jMTJ1XCIsXCJjY19jc19jMTJ1XCIsXCJjZF9jc19jMTJ1XCIsXCJuc19hcF9pbnN0YWxsXCIsXCJuc19hcF91cGRhdGVkXCIsXCJuc19hcF9sYXN0cnVuXCIsXCJuc19hcF9jc1wiLFwibnNfYXBfcnVuc1wiLFwibnNfYXBfdXNhZ2VcIixcIm5zX2FwX2ZnXCIsXCJuc19hcF9mdFwiLFwibnNfYXBfZGZ0XCIsXCJuc19hcF9idFwiLFwibnNfYXBfZGJ0XCIsXCJuc19hcF9kaXRcIixcIm5zX2FwX2FzXCIsXCJuc19hcF9kYXNcIixcIm5zX2FwX2l0XCIsXCJuc19hcF91Y1wiLFwibnNfYXBfYXVzXCIsXCJuc19hcF9kYXVzXCIsXCJuc19hcF91c1wiLFwibnNfYXBfZHVzXCIsXCJuc19hcF91dFwiLFwibnNfYXBfb2NcIixcIm5zX2FwX3V4Y1wiLFwibnNfYXBfdXhzXCIsXCJuc19hcF9sYW5nXCIsXCJuc19hcF9hclwiLFwibnNfYXBfbWlzc1wiLFwibnNfdHNcIixcIm5zX2FwX2NmZ1wiLFwibnNfYXBfZW52XCIsXCJuc19hcF9haXNcIixcIm5zX3N0X2NhXCIsXCJuc19zdF9jcFwiLFwibnNfc3RfZXJcIixcImNhX25zX3N0X2VyXCIsXCJjYl9uc19zdF9lclwiLFwiY2NfbnNfc3RfZXJcIixcImNkX25zX3N0X2VyXCIsXCJuc19zdF9wZVwiLFwibnNfc3RfdWlcIixcImNhX25zX3N0X3VpXCIsXCJjYl9uc19zdF91aVwiLFwiY2NfbnNfc3RfdWlcIixcImNkX25zX3N0X3VpXCIsXCJuc19zdF9iY1wiLFwibnNfc3RfZGJjXCIsXCJuc19zdF9idFwiLFwibnNfc3RfZGJ0XCIsXCJuc19zdF9icFwiLFwibnNfc3RfbHRcIixcIm5zX3N0X3NrY1wiLFwibnNfc3RfZHNrY1wiLFwibnNfc3Rfc2thXCIsXCJuc19zdF9kc2thXCIsXCJuc19zdF9za2RcIixcIm5zX3N0X3NrdFwiLFwibnNfc3RfZHNrdFwiLFwibnNfc3RfcGNcIixcIm5zX3N0X2RwY1wiLFwibnNfc3RfcHBcIixcIm5zX3N0X2JyXCIsXCJuc19zdF9wYnJcIixcIm5zX3N0X3J0XCIsXCJuc19zdF9wcnRcIixcIm5zX3N0X3ViXCIsXCJuc19zdF92b1wiLFwibnNfc3RfcHZvXCIsXCJuc19zdF93c1wiLFwibnNfc3RfcHdzXCIsXCJuc19zdF9raVwiLFwibnNfc3RfcnBcIixcIm5zX3N0X2JuXCIsXCJuc19zdF90YlwiLFwibnNfc3RfYW5cIixcIm5zX3N0X3RhXCIsXCJuc19zdF9wbFwiLFwibnNfc3RfcHJcIixcIm5zX3N0X3RwclwiLFwibnNfc3Rfc25cIixcIm5zX3N0X2VuXCIsXCJuc19zdF9lcFwiLFwibnNfc3RfdGVwXCIsXCJuc19zdF9zclwiLFwibnNfc3RfdHlcIixcIm5zX3N0X2N0XCIsXCJuc19zdF9jc1wiLFwibnNfc3RfZ2VcIixcIm5zX3N0X3N0XCIsXCJuc19zdF9zdGNcIixcIm5zX3N0X2NlXCIsXCJuc19zdF9pYVwiLFwibnNfc3RfZHRcIixcIm5zX3N0X2RkdFwiLFwibnNfc3RfdGR0XCIsXCJuc19zdF90bVwiLFwibnNfc3RfZHRtXCIsXCJuc19zdF90dG1cIixcIm5zX3N0X2RlXCIsXCJuc19zdF9wdVwiLFwibnNfc3RfdGlcIixcIm5zX3N0X2N1XCIsXCJuc19zdF9mZWVcIixcIm5zX3N0X2Z0XCIsXCJuc19zdF9hdFwiLFwibnNfc3RfcGF0XCIsXCJuc19zdF92dFwiLFwibnNfc3RfcHZ0XCIsXCJuc19zdF90dFwiLFwibnNfc3RfcHR0XCIsXCJuc19zdF9jZG5cIixcIm5zX3N0X3BjZG5cIixcIm5zX3N0X2FtZ1wiLFwibnNfc3RfYW1pXCIsXCJuc19zdF9hbXBcIixcIm5zX3N0X2FtdFwiLFwibnNfc3RfYW1zXCIsXCJuc19hcF9pMVwiLFwibnNfYXBfaTJcIixcIm5zX2FwX2kzXCIsXCJuc19hcF9pNFwiLFwibnNfYXBfaTVcIixcIm5zX2FwX2k2XCIsXCJuc19hcF9yZWZlcnJlclwiLFwibnNfY2xpZFwiLFwibnNfY2FtcGFpZ25cIixcIm5zX3NvdXJjZVwiLFwibnNfbWNoYW5uZWxcIixcIm5zX2xpbmtuYW1lXCIsXCJuc19mZWVcIixcImdjbGlkXCIsXCJ1dG1fY2FtcGFpZ25cIixcInV0bV9zb3VyY2VcIixcInV0bV9tZWRpdW1cIixcInV0bV90ZXJtXCIsXCJ1dG1fY29udGVudFwiLFwibnNfZWNvbW1lcmNlXCIsXCJuc19lY19zdlwiLFwibnNfY2xpZW50X2lkXCIsXCJuc19vcmRlcl9pZFwiLFwibnNfZWNfY3VyXCIsXCJuc19vcmRlcmxpbmVfaWRcIixcIm5zX29yZGVybGluZXNcIixcIm5zX3Byb2RfaWRcIixcIm5zX3F0eVwiLFwibnNfcHJvZF9wcmljZVwiLFwibnNfcHJvZF9ncnBcIixcIm5zX2JyYW5kXCIsXCJuc19zaG9wXCIsXCJuc19jYXRlZ29yeVwiLFwiY2F0ZWdvcnlcIixcIm5zX2NcIixcIm5zX3NlYXJjaF90ZXJtXCIsXCJuc19zZWFyY2hfcmVzdWx0XCIsXCJuc19tX2V4cFwiLFwibnNfbV9jaHNcIixcImMzXCIsXCJjYTNcIixcImNiM1wiLFwiY2MzXCIsXCJjZDNcIixcImM0XCIsXCJjYTRcIixcImNiNFwiLFwiY2M0XCIsXCJjZDRcIixcImM1XCIsXCJjYTVcIixcImNiNVwiLFwiY2M1XCIsXCJjZDVcIixcImM2XCIsXCJjYTZcIixcImNiNlwiLFwiY2M2XCIsXCJjZDZcIixcImMxMFwiLFwiYzExXCIsXCJjMTNcIixcImMxNFwiLFwiYzE1XCIsXCJjMTZcIixcImM3XCIsXCJjOFwiLFwiYzlcIixcIm5zX2FwX2VyXCIsXCJuc19zdF9hbWNcIl19fSx7fV0sNTpbZnVuY3Rpb24obix0LGUpe3ZhciBQbj1uKDgpLlQsQW49big4KS5OLENuPW4oNCksa249bigyNiksaT1uKDE3KSxFbj1uKDgpLnUsVG49bigzNiksTm49bigyMSksTG49bigyNCksRG49bigyMiksUm49bigyNSksTW49big2KSxPbj1uKDExKSxXbj1uKDcpLFZuPW4oOSkseG49bigxMikuTCxVbj1uKDEpLEJuPW4oMyksRm49XCJ1bmRlZmluZWRcIixqbj1pLkQsR249XCI2LjIuMy4xODAzMjhcIixLbj1cImh0dHA6Ly9iLnNjb3JlY2FyZHJlc2VhcmNoLmNvbS9wMj9cIixxbj1cImh0dHBzOi8vc2Iuc2NvcmVjYXJkcmVzZWFyY2guY29tL3AyP1wiLEhuPTE4ZTUsWW49M2U1LEpuPTYwLHpuPVwiZXhpdENvZGVcIixRbj1cImxhc3RBcHBsaWNhdGlvbkFjY3VtdWxhdGlvblRpbWVzdGFtcFwiLFhuPVwibGFzdFNlc3Npb25BY2N1bXVsYXRpb25UaW1lc3RhbXBcIixabj1cImxhc3RBcHBsaWNhdGlvblNlc3Npb25UaW1lc3RhbXBcIiwkbj1cImxhc3RVc2VyU2Vzc2lvblRpbWVzdGFtcFwiLG50PVwibGFzdEFjdGl2ZVVzZXJTZXNzaW9uVGltZXN0YW1wXCIsdHQ9XCJmb3JlZ3JvdW5kVHJhbnNpdGlvbnNDb3VudFwiLGV0PVwiYWNjdW11bGF0ZWRGb3JlZ3JvdW5kVGltZVwiLGl0PVwiYWNjdW11bGF0ZWRCYWNrZ3JvdW5kVGltZVwiLHJ0PVwiYWNjdW11bGF0ZWRJbmFjdGl2ZVRpbWVcIixvdD1cInRvdGFsRm9yZWdyb3VuZFRpbWVcIix1dD1cInRvdGFsQmFja2dyb3VuZFRpbWVcIixzdD1cInRvdGFsSW5hY3RpdmVUaW1lXCIsYXQ9XCJhY2N1bXVsYXRlZEFwcGxpY2F0aW9uU2Vzc2lvblRpbWVcIixmdD1cImFjY3VtdWxhdGVkQWN0aXZlVXNlclNlc3Npb25UaW1lXCIsY3Q9XCJhY2N1bXVsYXRlZFVzZXJTZXNzaW9uVGltZVwiLGx0PVwiYWN0aXZlVXNlclNlc3Npb25Db3VudFwiLHB0PVwidXNlclNlc3Npb25Db3VudFwiLHZ0PVwibGFzdFVzZXJJbnRlcmFjdGlvblRpbWVzdGFtcFwiLGR0PVwidXNlckludGVyYWN0aW9uQ291bnRcIixodD1cImFwcGxpY2F0aW9uU2Vzc2lvbkNvdW50S2V5XCIsX3Q9XCJnZW5lc2lzXCIsZ3Q9XCJwcmV2aW91c0dlbmVzaXNcIixtdD1cImluc3RhbGxJZFwiLHd0PVwiZmlyc3RJbnN0YWxsSWRcIix5dD1cImN1cnJlbnRWZXJzaW9uXCIsYnQ9XCJydW5zXCIsSXQ9XCJjb2xkU3RhcnRDb3VudFwiLFN0PVwidmlkXCIsUHQ9XCJjcm9zc1B1Ymxpc2hlcklkSGFzaGVkXCIsQXQ9XCJjcm9zc1B1Ymxpc2hlcklkXCI7dC5leHBvcnRzPWZ1bmN0aW9uKCl7dmFyIHQscixzLGEsZixjLGUsaSxvLHUsbCxuLHAsdixkLGgsXyxnLG0sdyx5LGIsSSxTLFAsQSxDLGssRSxULE4sTCxELFIsTSxPLFcsVix4LFUsQixGLGosRyxLLHEsSCxZLEoseixRLFgsWiwkLG5uPXRoaXMsdG49ITAsZW49ITEscm49ITAsb249UG4uUix1bj1Bbi5SLHNuPSExLGFuPSExLGZuPSExLGNuPSEwLGxuPSExLHBuPTA7ZnVuY3Rpb24gdm4oKXtubi5NKCksZj1uZXcgV24obm4pLHM9bmV3IFZuKG5uKSxubi5PKCksbm4uVygpLG5uLlYoKSxvPW5ldyBPbihubiksZT1uZXcgTW4sZnVuY3Rpb24oKXtUPWtuLm8oci5nZXQoUW4pLC0xKSxGPWtuLm8oci5nZXQoWG4pLC0xKSxXPWtuLm8oci5nZXQoWm4pLC0xKSxWPWtuLm8oci5nZXQoJG4pLC0xKSx4PWtuLm8oci5nZXQobnQpLC0xKSx5PWtuLlUoci5nZXQodHQpKSxBPWtuLm8oci5nZXQoZXQpKSxQPWtuLm8oci5nZXQoaXQpKSxDPWtuLm8oci5nZXQocnQpKSxiPWtuLm8oci5nZXQob3QpKSxJPWtuLm8oci5nZXQodXQpKSxTPWtuLm8oci5nZXQoc3QpKSxOPWtuLm8oci5nZXQoYXQpKSxEPWtuLm8oci5nZXQoZnQpKSxMPWtuLm8oci5nZXQoY3QpKSxPPWtuLlUoci5nZXQobHQpLC0xKSxNPWtuLlUoci5nZXQocHQpLC0xKSxCPWtuLm8oci5nZXQodnQpLC0xKSxVPWtuLlUoci5nZXQoZHQpLDApLFI9a24uVShyLmdldChodCksMCksej1yLmdldCh6bik/cGFyc2VJbnQoci5nZXQoem4pKTowLGg9VG4uZ2V0QXBwVmVyc2lvbigpLEU9a24ubyhyLmdldChndCksMCksKGs9a24ubyhyLmdldChfdCksLTEpKTwwPyhrPStuZXcgRGF0ZSxFPTAsVz1rLFIrKyk6KF9uKCl8fChOKz0rbmV3IERhdGUtRixyLnNldChhdCxOK1wiXCIpKSxXPWspLChkPWtuLm8oci5nZXQod3QpLC0xKSk8MD8odj1kPWssaCYmaCE9am4mJnIuc2V0KHl0LGgrXCJcIiksci5zZXQod3QsZCtcIlwiKSxyLnNldChtdCx2K1wiXCIpKTpubi5zZXRBcHBWZXJzaW9uKGgpLHIuc2V0KF90LGsrXCJcIiksci5zZXQoZ3QsRStcIlwiKSxubi5CKGspO3ZhciBuPStuZXcgRGF0ZTtpZigwPD1UKXt2YXIgdD1uLVQ7Qys9dCxyLnNldChydCxDK1wiXCIpLFMrPXQsci5zZXQoc3QsUytcIlwiKX1GPVQ9bixyLnNldChRbixUK1wiXCIpLHIuc2V0KFhuLEYrXCJcIiksci5zZXQoWm4sVytcIlwiKSxyLmhhcyhidCl8fHIuc2V0KGJ0LFwiMFwiKSxsPWtuLlUoci5nZXQoYnQpKSxwPWtuLlUoci5nZXQoSXQpKX0oKX1mdW5jdGlvbiBkbihuKXtyZXR1cm4gci5oYXMobik/ci5nZXQobikrXCJcIjpudWxsfWZ1bmN0aW9uIGhuKG4pe2lmKFopc3dpdGNoKG4pe2Nhc2UgQW4uRjplPStuZXcgRGF0ZSxZbjw9ZS14JiZPKysseD1lLG5uLmooKTtjYXNlIEFuLkc6dD0rbmV3IERhdGUsWW48PXQtViYmTSsrLFY9dDtjYXNlIEFuLks6X24oKTticmVhaztjYXNlIEFuLlI6fXZhciB0LGV9ZnVuY3Rpb24gX24oKXt2YXIgbj0rbmV3IERhdGUsdD0hMTtyZXR1cm4gSG48bi1XJiYoRT1rLGs9bixSKyssdD0hMCksVz1uLHR9ZnVuY3Rpb24gZ24obil7aWYoWil7bj10eXBlb2Ygbj09PUZufHxuO3ZhciB0PStuZXcgRGF0ZSxlPXQtVDtzd2l0Y2gob24pe2Nhc2UgUG4uSDpBKz1lLGIrPWU7YnJlYWs7Y2FzZSBQbi5ZOlArPWUsSSs9ZTticmVhaztjYXNlIFBuLlI6Qys9ZSxTKz1lfVQ9dCxuJiYoci5zZXQoUW4sVCtcIlwiKSxyLnNldCh0dCx5K1wiXCIpLHIuc2V0KGV0LEErXCJcIiksci5zZXQoaXQsUCtcIlwiKSxyLnNldChydCxDK1wiXCIpLHIuc2V0KG90LGIrXCJcIiksci5zZXQodXQsSStcIlwiKSxyLnNldChzdCxTK1wiXCIpKX19ZnVuY3Rpb24gbW4obil7aWYoWil7bj10eXBlb2Ygbj09PUZufHxuO3ZhciB0PStuZXcgRGF0ZSxlPXQtRjtzd2l0Y2godW4pe2Nhc2UgQW4uRjpEKz1lLHg9dDtjYXNlIEFuLkc6TCs9ZSxWPXQ7Y2FzZSBBbi5LOk4rPWUsVz10O2JyZWFrO2Nhc2UgQW4uUjp9Rj10LG4mJihyLnNldChYbixGK1wiXCIpLHIuc2V0KFpuLFcrXCJcIiksci5zZXQoJG4sVitcIlwiKSxyLnNldChudCx4K1wiXCIpLHIuc2V0KGF0LE4rXCJcIiksci5zZXQoZnQsRCtcIlwiKSxyLnNldChjdCxMK1wiXCIpLHIuc2V0KGx0LE8rXCJcIiksci5zZXQocHQsTStcIlwiKSxyLnNldCh2dCxCK1wiXCIpLHIuc2V0KGR0LFUrXCJcIiksci5zZXQoZ3QsRStcIlwiKSxyLnNldChfdCxrK1wiXCIpLHIuc2V0KGh0LFIrXCJcIikpfX1mdW5jdGlvbiB3bigpe2lmKFope3ZhciBuLHQsZT0rbmV3IERhdGU7bj0wPG0/UG4uSDowPHc/UG4uWTpQbi5SLHQ9ZS1CPFluP0FuLkY6MDx3P0FuLkc6MDxtP0FuLks6QW4uUjt2YXIgaSxyPW9uLG89dW47aWYobiE9cnx8dCE9byl7dmFyIHU9ITE7ciE9biYmKGZ1bmN0aW9uKG4pe2lmKFopc3dpdGNoKG4pe2Nhc2UgUG4uUjpmLkooITEpLHMuWCgpLHMuWigpLGMuc3RhcnQoKSxhLnN0YXJ0KCk7YnJlYWs7Y2FzZSBQbi5ZOkluKCk7YnJlYWs7Y2FzZSBQbi5IOm5uLm5uKG51bGwpLEluKCl9fShvbiksZnVuY3Rpb24obil7aWYoWilzd2l0Y2gobil7Y2FzZSBQbi5SOmMuc3RvcCgpLHMucGF1c2UoKSxhLnN0b3AoKSxJbigpLGYuSighMCk7YnJlYWs7Y2FzZSBQbi5ZOnRufHxibigpO2JyZWFrO2Nhc2UgUG4uSDpibigpLHkrK319KG4pLGduKCksb249bix1PSEwKSxvIT10JiYoZnVuY3Rpb24obil7aWYoWil7dmFyIHQ9K25ldyBEYXRlO3N3aXRjaChuKXtjYXNlIEFuLkY6bnVsbCE9aiYmKFRuLmNsZWFyVGltZW91dChqKSxqPW51bGwpLHg9dDtjYXNlIEFuLkc6Vj10O2Nhc2UgQW4uSzpXPXQ7YnJlYWs7Y2FzZSBBbi5SOl9uKCl8fChOKz10LUYpfX19KHVuKSxobih0KSxtbigpLHVuPXQpLHUmJihpPW9uLFomJmkhPVBuLlImJm5uLmlzQXV0b1N0YXJ0RW5hYmxlZCgpJiYhZW4mJm5uLnMoRW4ubCxYKSl9fX1mdW5jdGlvbiB5bihuLHQpe1omJihObi50bihuKT8odD1Obi50bih0KT9cIi1jc1wiK3Q6XCJcIixLPW4rdCk6bnVsbD09SyYmbG4mJihLPURuKFRuLmdldFZpc2l0b3JJZCgpK25uLmcoKSksXCJmdW5jdGlvblwiPT10eXBlb2YgVG4uZ2V0VmlzaXRvcklkU3VmZml4JiZudWxsIT1Ubi5nZXRWaXNpdG9ySWRTdWZmaXgoKSYmKEs9SytcIi1jc1wiK1RuLmdldFZpc2l0b3JJZFN1ZmZpeCgpKSksci5zZXQoU3QsSytcIlwiKSl9ZnVuY3Rpb24gYm4oKXtpZihaKXtJbigpO3ZhciBuPWZ1bmN0aW9uKCl7bm4udXBkYXRlKCksbnVsbCE9aSYmVG4uc2V0VGltZW91dChuLHUpfTtpPVRuLnNldFRpbWVvdXQobix1KX19ZnVuY3Rpb24gSW4oKXtaJiZudWxsIT1pJiYoVG4uY2xlYXJUaW1lb3V0KHUpLGk9bnVsbCl9ZnVuY3Rpb24gU24oKXtyZXR1cm4hbG58fG51bGw9PVl8fDA9PT1ZLmxlbmd0aHx8bnVsbD09R3x8MD09PUcubGVuZ3RofUxuLmV4dGVuZChubix7aXNQcm9wZXJseUluaXRpYWxpemVkOmZ1bmN0aW9uKCl7cmV0dXJuIVNuKCl9LHJlc2V0OmZ1bmN0aW9uKCl7WiYmKGUucmVzZXQoKSxvbj1Qbi5SLHVuPUFuLlIsZW49ITEsXz1oPW51bGwsej1VPUU9TD1EPU49Qz1BPVA9Uz1JPWI9dz1tPXA9bD0wLGFuPXNuPSEoZD12PXg9Vj1XPUY9VD1CPU09Tz1rPXY9ZD1uPS0xKSxubi5kaXNhYmxlQXV0b1VwZGF0ZSgpLG51bGwhPWomJihUbi5jbGVhclRpbWVvdXQoaiksaj1udWxsKSxudWxsIT1zJiZzLmNhbmNlbCgpLG51bGwhPWEmJmEuc3RvcCgpLG51bGwhPWYmJihmLmVuKCksZj1uZXcgV24obm4pKSl9LE06ZnVuY3Rpb24obil7cj1ufHxuZXcgVG4uU3RvcmFnZX0sTzpmdW5jdGlvbihuKXt0PW58fG5ldyB4bihubil9LFc6ZnVuY3Rpb24obil7YT1ufHxuZXcgVW4obm4pfSxWOmZ1bmN0aW9uKG4pe2M9bmV3IEJuKG5uKX0saW46ZnVuY3Rpb24oKXt2YXIgbj1kbihcIkFwcE5hbWVcIik7bnVsbCE9biYmbm4uc2V0QXBwTmFtZShuKTt2YXIgdD1kbihcIkFwcFZlcnNpb25cIik7bnVsbCE9dCYmbm4uc2V0QXBwVmVyc2lvbih0KX0scm46ZnVuY3Rpb24oKXtaJiZyLmhhcyhTdCkmJihLPXIuZ2V0KFN0KSl9LHVuOmZ1bmN0aW9uKCl7WiYmKGwrKyxyLnNldChidCxsK1wiXCIpKX0sc246ZnVuY3Rpb24oKXtyZXR1cm4hZW4mJihlbj0hMCxwKyssci5zZXQoSXQscCtcIlwiKSxuPStuZXcgRGF0ZSwhMCl9LGo6ZnVuY3Rpb24oKXtaJiYobnVsbCE9aiYmKFRuLmNsZWFyVGltZW91dChqKSxqPW51bGwpLGo9VG4uc2V0VGltZW91dChmdW5jdGlvbigpe251bGwhPWomJihUbi5jbGVhclRpbWVvdXQoaiksaj1udWxsKSx3bigpfSxZbikpfSxJOmZ1bmN0aW9uKCl7cmV0dXJuIHR9LGFuOmZ1bmN0aW9uKCl7cmV0dXJuIGN9LHQ6ZnVuY3Rpb24oKXtyZXR1cm4gcn0sZm46ZnVuY3Rpb24oKXtyZXR1cm4gZn0sUzpmdW5jdGlvbigpe3JldHVybiBzfSxjbjpmdW5jdGlvbigpe3JldHVybiBhfSxsbjpmdW5jdGlvbigpe3JldHVybiBlfSxvblV4QWN0aXZlOmZ1bmN0aW9uKCl7WiYmKFNuKCl8fChNPDAmJihNPTApLHcrKyx3bigpKSl9LG9uVXhJbmFjdGl2ZTpmdW5jdGlvbigpe1omJihTbigpfHwwPHcmJih3LS0sd24oKSkpfSxvbkVudGVyRm9yZWdyb3VuZDpmdW5jdGlvbigpe1omJihTbigpfHwobSsrLHduKCkpKX0sb25FeGl0Rm9yZWdyb3VuZDpmdW5jdGlvbigpe1omJihTbigpfHwwPG0mJihtLS0sd24oKSkpfSxvblVzZXJJbnRlcmFjdGlvbjpmdW5jdGlvbigpe1omJihTbigpfHwoTTwwJiYoTT0wKSxPPDAmJihPPTApLEI9K25ldyBEYXRlLFUrKyx1biE9QW4uRj93bigpOm5uLmooKSkpfSxwbjpmdW5jdGlvbigpe3JldHVybiBvbn0sdm46ZnVuY3Rpb24oKXtyZXR1cm4gdW59LGRuOmZ1bmN0aW9uKCl7cmV0dXJuIGx9LGhuOmZ1bmN0aW9uKCl7cmV0dXJuIHZ9LF9uOmZ1bmN0aW9uKCl7cmV0dXJuIGR9LGduOmZ1bmN0aW9uKCl7cmV0dXJuIG59LG1uOmZ1bmN0aW9uKCl7cmV0dXJuIHB9LHduOmZ1bmN0aW9uKCl7cmV0dXJuIF99LHluOmZ1bmN0aW9uKG4pe189bn0sYm46ZnVuY3Rpb24obil7dmFyIHQ9eTtyZXR1cm4obj10eXBlb2Ygbj09PUZufHxuKSYmKHk9MCxyLnNldCh0dCx5K1wiXCIpKSx0fSxJbjpmdW5jdGlvbihuKXt2YXIgdD1iO3JldHVybihuPXR5cGVvZiBuPT09Rm58fG4pJiYoYj0wLHIuc2V0KG90LGIrXCJcIikpLHR9LFNuOmZ1bmN0aW9uKG4pe3ZhciB0PUE7cmV0dXJuKG49dHlwZW9mIG49PT1Gbnx8bikmJihBPTAsci5zZXQoZXQsQStcIlwiKSksdH0sUG46ZnVuY3Rpb24obil7dmFyIHQ9STtyZXR1cm4obj10eXBlb2Ygbj09PUZufHxuKSYmKEk9MCxyLnNldCh1dCxJK1wiXCIpKSx0fSxBbjpmdW5jdGlvbihuKXt2YXIgdD1QO3JldHVybihuPXR5cGVvZiBuPT09Rm58fG4pJiYoUD0wLHIuc2V0KGl0LFArXCJcIikpLHR9LENuOmZ1bmN0aW9uKG4pe3ZhciB0PVM7cmV0dXJuKG49dHlwZW9mIG49PT1Gbnx8bikmJihTPTAsci5zZXQoc3QsUytcIlwiKSksdH0sa246ZnVuY3Rpb24obil7dmFyIHQ9QztyZXR1cm4obj10eXBlb2Ygbj09PUZufHxuKSYmKEM9MCxyLnNldChydCxDK1wiXCIpKSx0fSxFbjpmdW5jdGlvbihuKXt2YXIgdD1OO3JldHVybihuPXR5cGVvZiBuPT09Rm58fG4pJiYoTj0wLHIuc2V0KGF0LE4rXCJcIikpLHR9LFRuOmZ1bmN0aW9uKG4pe3ZhciB0PUQ7cmV0dXJuKG49dHlwZW9mIG49PT1Gbnx8bikmJihEPTAsci5zZXQoZnQsRCtcIlwiKSksdH0sTm46ZnVuY3Rpb24obil7dmFyIHQ9TDtyZXR1cm4obj10eXBlb2Ygbj09PUZufHxuKSYmKEw9MCxyLnNldChjdCxMK1wiXCIpKSx0fSxMbjpmdW5jdGlvbigpe3JldHVybiB1fSxEbjpmdW5jdGlvbihuKXt2YXIgdD1SO3JldHVybihuPXR5cGVvZiBuPT09Rm58fG4pJiYoUj0wLHIuc2V0KGh0LFIrXCJcIikpLHR9LFJuOmZ1bmN0aW9uKG4pe249dHlwZW9mIG49PT1Gbnx8bjt2YXIgdD0tMTtyZXR1cm4gMDw9TyYmKHQ9TyxuJiYoTz0wLHIuc2V0KGx0LE8rXCJcIikpKSx0fSxNbjpmdW5jdGlvbihuKXtuPXR5cGVvZiBuPT09Rm58fG47dmFyIHQ9LTE7cmV0dXJuIDA8PU0mJih0PU0sbiYmKE09MCxyLnNldChwdCxNK1wiXCIpKSksdH0sT246ZnVuY3Rpb24obil7dmFyIHQ9VTtyZXR1cm4obj10eXBlb2Ygbj09PUZufHxuKSYmKFU9MCxyLnNldChkdCxVK1wiXCIpKSx0fSxzZXRBcHBDb250ZXh0OmZ1bmN0aW9uKCl7bG58fChUbi5hdXRvRGV0ZWN0KCksdm4oKSxubi5pbigpLG5uLnJuKCksbG49ITApfSxzZXRFbmFibGVkOmZ1bmN0aW9uKG4pe1omJm51bGwhPW4mJiFuJiYoWj0hMSxhLnN0b3AoKSxjLnN0b3AoKSxzLnBhdXNlKCkpfSxnZXRFbmFibGVkOmZ1bmN0aW9uKCl7cmV0dXJuIFp9LFduOmZ1bmN0aW9uKCl7cmV0dXJue319LFZuOmZ1bmN0aW9uKCl7cmV0dXJuIGd9LG5uOmZ1bmN0aW9uKG4pe2c9bn0sc2V0UGl4ZWxVUkw6ZnVuY3Rpb24obil7aWYoWil7aWYobnVsbD09bnx8MD09PW4ubGVuZ3RoKXJldHVybiBudWxsO3NuPSEwO3ZhciB0PW4uaW5kZXhPZihcIj9cIik7aWYoMDw9dCl7aWYodDxuLmxlbmd0aC0xKXtmb3IodmFyIGU9bi5zdWJzdHJpbmcodCsxKS5zcGxpdChcIiZcIiksaT0wLHI9ZS5sZW5ndGg7aTxyO2krKyl7dmFyIG89ZVtpXS5zcGxpdChcIj1cIik7Mj09by5sZW5ndGg/bm4uc2V0TGFiZWwob1swXSxvWzFdKToxPT1vLmxlbmd0aCYmbm4uc2V0TGFiZWwoQ24uUEFHRV9OQU1FX0xBQkVMLG9bMF0pfW49bi5zdWJzdHJpbmcoMCx0KzEpfX1lbHNlIG4rPVwiP1wiO3JldHVybiBHPW59fSxzZXRLZWVwQWxpdmVFbmFibGVkOmZ1bmN0aW9uKG4pe1omJnMueG4obil9LGdldFBpeGVsVVJMOmZ1bmN0aW9uKCl7cmV0dXJuIEd9LGdldENyb3NzUHVibGlzaGVySWQ6ZnVuY3Rpb24oKXtyZXR1cm4gcX0saXNDcm9zc1B1Ymxpc2hlcklkQ2hhbmdlZDpmdW5jdGlvbigpe3JldHVybiBUbi5pc0Nyb3NzUHVibGlzaGVySWRDaGFuZ2VkKCl8fGZufSxnZXRWaXNpdG9ySWQ6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbD09SyYmeW4oKSxLfSxzZXRWaXNpdG9ySWQ6eW4sVW46ZnVuY3Rpb24oKXt2YXIgbj0oVG4uZ2V0Q3Jvc3NQdWJsaXNoZXJJZCgpfHxcIm51bGxcIikuc3BsaXQoXCIgXCIpLHQ9blswXSYmXCJudWxsXCIhPW5bMF0/blswXTpudWxsLGU9XCJ0cnVlXCI9PW5bMV07aWYobnVsbCE9dCl7cXx8KEg9ci5nZXQoUHQpLHE9ci5nZXQoQXQpKTt2YXIgaT1udWxsO3E/XCJub25lXCI9PXQmJlwibm9uZVwiPT1xfHwhY24mJlwibm9uZVwiPT1xfHxcIm5vbmVcIiE9dCYmKGk9RG4odCkpPT1IfHwoZT9cIm5vbmVcIj09dD8oSD1udWxsLHE9XCJub25lXCIpOihIPWkscT1Sbih0KSk6KGZuPSEwLGNuJiZcIm5vbmVcIiE9dD8oSD1Ebih0KSxxPVJuKHQpKTooSD1udWxsLHE9XCJub25lXCIpKSxyLnNldChBdCxxKSxudWxsPT1IP3IucmVtb3ZlKFB0KTpyLnNldChQdCxIKSk6KFwibm9uZVwiPT10PyhIPW51bGwscT1cIm5vbmVcIik6KEg9RG4odCkscT1Sbih0KSksci5zZXQoQXQscSksbnVsbD09SD9yLnJlbW92ZShQdCk6ci5zZXQoUHQsSCkpLGNuPSExfWVsc2UgcT1IPW51bGx9LG06ZnVuY3Rpb24obil7cmV0dXJuIG51bGw9PW58fDA9PT1uLmxlbmd0aHx8KFk9biksbm59LGc6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbD09WSYmKFk9XCJcIiksWX0sc2V0QXBwTmFtZTpmdW5jdGlvbihuKXtaJiYoSj1uKX0sZ2V0QXBwTmFtZTpmdW5jdGlvbigpe3JldHVybiBudWxsIT1KJiYwIT09Si5sZW5ndGh8fG5uLnNldEFwcE5hbWUoVG4uZ2V0QXBwTmFtZSgpKSxKfSxzZXRBcHBWZXJzaW9uOmZ1bmN0aW9uKG4pe3ZhciB0O3ImJihuJiZuIT1qbj8oci5oYXMoQ24uQykmJihfPXIuZ2V0KENuLkMpK1wiXCIpLHIuaGFzKHl0KSYmKHQ9ci5nZXQoeXQpK1wiXCIpLHQmJnQhPT1uPyhfPXQsci5zZXQoQ24uQyxfK1wiXCIpLHY9ayxyLnNldChtdCx2K1wiXCIpKTp2PWtuLm8oci5nZXQobXQpLC0xKSxyLnNldCh5dCxuK1wiXCIpKTp2PWtuLm8oci5nZXQobXQpLC0xKSksaD1ufSxnZXRBcHBWZXJzaW9uOmZ1bmN0aW9uKCl7cmV0dXJuIGh9LGdldFZlcnNpb246ZnVuY3Rpb24oKXtyZXR1cm4gR259LGdldEdlbmVzaXM6ZnVuY3Rpb24oKXtyZXR1cm4ga30sQm46ZnVuY3Rpb24oKXtyZXR1cm4gRX0sQjpmdW5jdGlvbihuKXtyLnNldCh6bixuLnRvU3RyaW5nKDEwKSl9LEZuOmZ1bmN0aW9uKCl7cmV0dXJuIHp9LGdldExhYmVsczpmdW5jdGlvbigpe3JldHVybiBRfSxzZXRMYWJlbHM6ZnVuY3Rpb24obil7aWYoWilmb3IodmFyIHQgaW4gbiluLmhhc093blByb3BlcnR5KHQpJiZubi5zZXRMYWJlbCh0LG5bdF0pfSxnZXRMYWJlbDpmdW5jdGlvbihuKXtyZXR1cm4gUVtuXX0sc2V0TGFiZWw6ZnVuY3Rpb24obix0KXtaJiYoIW58fHQ/UVtuXT10OmRlbGV0ZSBRW25dKX0sc2V0QXV0b1N0YXJ0TGFiZWxzOmZ1bmN0aW9uKG4pe1omJm51bGwhPW4mJkxuLmV4dGVuZChYLG4pfSxnZXRBdXRvU3RhcnRMYWJlbDpmdW5jdGlvbihuKXtyZXR1cm4gWFtuXX0sZ2V0QXV0b1N0YXJ0TGFiZWxzOmZ1bmN0aW9uKCl7cmV0dXJuIFh9LHNldEF1dG9TdGFydExhYmVsOmZ1bmN0aW9uKG4sdCl7WiYmKFhbbl09dCl9LGdldEN1c3RvbWVyQzI6ZnVuY3Rpb24oKXtyZXR1cm4gUS5jMn0sc2V0Q3VzdG9tZXJDMjpmdW5jdGlvbihuKXtpZihaJiZudWxsIT1uJiYwIT09bi5sZW5ndGgpe3ZhciB0PWUuaXNTZWN1cmUoKT9xbjpLbjtubi5zZXRQaXhlbFVSTCh0KSxzbj0hMSxubi5zZXRMYWJlbChcImMyXCIsbil9fSxnZXRMaXZlVHJhbnNtaXNzaW9uTW9kZTpmdW5jdGlvbigpe3JldHVybiBlLmdldExpdmVUcmFuc21pc3Npb25Nb2RlKCl9LGFsbG93TGl2ZVRyYW5zbWlzc2lvbjpmdW5jdGlvbihuKXtaJiZlLmdldExpdmVUcmFuc21pc3Npb25Nb2RlKCkhPW4mJmUuYWxsb3dMaXZlVHJhbnNtaXNzaW9uKG4pfSxnZXRPZmZsaW5lVHJhbnNtaXNzaW9uTW9kZTpmdW5jdGlvbigpe3JldHVybiBlLmdldE9mZmxpbmVUcmFuc21pc3Npb25Nb2RlKCl9LGFsbG93T2ZmbGluZVRyYW5zbWlzc2lvbjpmdW5jdGlvbihuKXtaJiZlLmdldE9mZmxpbmVUcmFuc21pc3Npb25Nb2RlKCkhPW4mJmUuYWxsb3dPZmZsaW5lVHJhbnNtaXNzaW9uKG4pfSxzZXRTZWN1cmU6ZnVuY3Rpb24obil7WiYmKHRoaXMuZ2V0Q3VzdG9tZXJDMigpfHwoYW49ITAsZS5pc1NlY3VyZSgpIT1uJiZlLnNldFNlY3VyZShuKSkpfSxqbjpmdW5jdGlvbihuKXtpZighYW4mJihlLnNldFNlY3VyZSghIW4pLG51bGwhPWYmJmYuR24oTW4uS24sISFuKSxubi5nZXRDdXN0b21lckMyKCkmJiFzbikpe3ZhciB0PWUuaXNTZWN1cmUoKT9xbjpLbjtubi5zZXRQaXhlbFVSTCh0KSxzbj0hMX19LHNldEF1dG9TdGFydEVuYWJsZWQ6ZnVuY3Rpb24obil7WiYmKHJuPW4pfSxpc0F1dG9TdGFydEVuYWJsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gcm59LGlzU2VjdXJlOmZ1bmN0aW9uKCl7cmV0dXJuIGUuaXNTZWN1cmUoKX0sc2V0Q2FjaGVNYXhNZWFzdXJlbWVudHM6ZnVuY3Rpb24obil7bnVsbCE9dCYmdC5zZXRDYWNoZU1heE1lYXN1cmVtZW50cyhuKX0sZ2V0Q2FjaGVNYXhNZWFzdXJlbWVudHM6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbCE9dD90LmdldENhY2hlTWF4TWVhc3VyZW1lbnRzKCk6eG4ucW59LHNldENhY2hlTWF4QmF0Y2hGaWxlczpmdW5jdGlvbihuKXtudWxsIT10JiZ0LnNldENhY2hlTWF4QmF0Y2hGaWxlcyhuKX0sZ2V0Q2FjaGVNYXhCYXRjaEZpbGVzOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGwhPXQ/dC5nZXRDYWNoZU1heEJhdGNoRmlsZXMoKTp4bi5Ibn0sc2V0Q2FjaGVNYXhGbHVzaGVzSW5BUm93OmZ1bmN0aW9uKG4pe251bGwhPXQmJnQuWW4obil9LGdldENhY2hlTWF4Rmx1c2hlc0luQVJvdzpmdW5jdGlvbigpe3JldHVybiBudWxsIT10P3QuSm4oKTp4bi56bn0sc2V0Q2FjaGVNaW51dGVzVG9SZXRyeTpmdW5jdGlvbihuKXtudWxsIT10JiZ0LlFuKG4pfSxnZXRDYWNoZU1pbnV0ZXNUb1JldHJ5OmZ1bmN0aW9uKCl7cmV0dXJuIG51bGwhPXQ/dC5YbigpOnhuLlpufSxzZXRDYWNoZU1lYXN1cmVtZW50RXhwaXJ5OmZ1bmN0aW9uKG4pe251bGwhPXQmJnQuc2V0Q2FjaGVNZWFzdXJlbWVudEV4cGlyeShuKX0sZ2V0Q2FjaGVNZWFzdXJlbWVudEV4cGlyeTpmdW5jdGlvbigpe3JldHVybiBudWxsIT10P3QuZ2V0Q2FjaGVNZWFzdXJlbWVudEV4cGlyeSgpOnhuLiRufSxnZXRDYWNoZUZsdXNoaW5nSW50ZXJ2YWw6ZnVuY3Rpb24oKXtyZXR1cm4gcG59LHNldENhY2hlRmx1c2hpbmdJbnRlcnZhbDpmdW5jdGlvbihuKXtaJiZwbiE9biYmKHBuPW4sbnVsbCE9YSYmYS51cGRhdGUoKSl9LGdldE1lYXN1cmVtZW50TGFiZWxPcmRlcjpmdW5jdGlvbigpe3JldHVybiBlLmdldE1lYXN1cmVtZW50TGFiZWxPcmRlcigpfSxzZXRNZWFzdXJlbWVudExhYmVsT3JkZXI6ZnVuY3Rpb24obil7WiYmbiE9ZS5nZXRNZWFzdXJlbWVudExhYmVsT3JkZXIoKSYmZS5zZXRNZWFzdXJlbWVudExhYmVsT3JkZXIobil9LGZsdXNoOmZ1bmN0aW9uKCl7dC5mbHVzaChlLGZ1bmN0aW9uKCl7fSl9LHVwZGF0ZTpmdW5jdGlvbihuKXtaJiYoZ24obj10eXBlb2Ygbj09PUZufHxuKSxtbihuKSl9LGVuYWJsZUF1dG9VcGRhdGU6ZnVuY3Rpb24obix0KXtaJiYobj1ufHxKbixJbigpLG48Sm4mJihuPUpuKSx0bj10LHU9MWUzKm4sb249PVBuLkg/Ym4oKTpvbiE9UG4uWXx8dG58fGJuKCkpfSxkaXNhYmxlQXV0b1VwZGF0ZTpmdW5jdGlvbigpe1omJihJbigpLHRuPSEwLHU9LTEpfSxpc0F1dG9VcGRhdGVFbmFibGVkOmZ1bmN0aW9uKCl7cmV0dXJuIDA8dX0sczpmdW5jdGlvbihuLHQpe1omJihTbigpfHwoZW58fG49PUVuLmx8fG8uc2VuZChFbi5sLHt9LHNuP0c6bnVsbCksbj09RW4uaD8obm4uQigwKSxubi51cGRhdGUoITApKTpvLnNlbmQobix0LHNuP0c6bnVsbCkpKX0sbnQ6ZnVuY3Rpb24obix0KXtvLnNlbmQoRW4uSElEREVOLG4sdCl9LHNldE9mZmxpbmVVUkw6ZnVuY3Rpb24obil7WiYmdC50dChuKX0sZ2V0UGxhdGZvcm1BUEk6ZnVuY3Rpb24oKXtyZXR1cm4gVG59LHNldFBsYXRmb3JtQVBJOmZ1bmN0aW9uKG4pe1RuLnNldFBsYXRmb3JtQVBJKG4pfSxldDpmdW5jdGlvbigpe3JldHVybiBvfSxjbGVhckludGVybmFsRGF0YTpmdW5jdGlvbigpe3ImJnIuY2xlYXIoKX0sY2FjaGVIdHRwUmVkaXJlY3RzOmZ1bmN0aW9uKG4peyQ9bn0saXQ6ZnVuY3Rpb24oKXtyZXR1cm4gJH19KSxlPW5ldyBNbixRPXt9LFg9e30sJD1aPSEwLG5uLnJlc2V0KCl9fSx7MToxLDExOjExLDEyOjEyLDE3OjE3LDIxOjIxLDIyOjIyLDI0OjI0LDI1OjI1LDI2OjI2LDM6MywzNjozNiw0OjQsNjo2LDc6Nyw4OjgsOTo5fV0sNjpbZnVuY3Rpb24obix0LGUpe3ZhciBvPW4oMjQpLHU9big4KS5UcmFuc21pc3Npb25Nb2RlLHM9bigzNiksYT1uKDQpLGY9MCxjPTEsbD0yLHA9MztmdW5jdGlvbiBpKCl7dmFyIHQsZSxpLHI7by5leHRlbmQodGhpcyx7cmVzZXQ6ZnVuY3Rpb24oKXt0PXUuREVGQVVMVCxlPXUuREVGQVVMVCxpPXMuaXNDb25uZWN0aW9uU2VjdXJlKCkscj1hLmt9LHJ0OmZ1bmN0aW9uKG4pe3Q9bi5nZXRMaXZlVHJhbnNtaXNzaW9uTW9kZSgpLGU9bi5nZXRPZmZsaW5lVHJhbnNtaXNzaW9uTW9kZSgpLHI9bi5nZXRNZWFzdXJlbWVudExhYmVsT3JkZXIoKSxpPW4uaXNTZWN1cmUoKX0sb3Q6ZnVuY3Rpb24obix0KXtzd2l0Y2gobil7Y2FzZSBmOnRoaXMuYWxsb3dMaXZlVHJhbnNtaXNzaW9uKHQpO2JyZWFrO2Nhc2UgYzp0aGlzLmFsbG93T2ZmbGluZVRyYW5zbWlzc2lvbih0KTticmVhaztjYXNlIGw6dGhpcy5zZXRTZWN1cmUodCk7YnJlYWs7Y2FzZSBwOnRoaXMuc2V0TWVhc3VyZW1lbnRMYWJlbE9yZGVyKHQpfX0sZ2V0TGl2ZVRyYW5zbWlzc2lvbk1vZGU6ZnVuY3Rpb24oKXtyZXR1cm4gdH0sYWxsb3dMaXZlVHJhbnNtaXNzaW9uOmZ1bmN0aW9uKG4pe251bGwhPW4mJih0PW4pfSxnZXRPZmZsaW5lVHJhbnNtaXNzaW9uTW9kZTpmdW5jdGlvbigpe3JldHVybiBlfSxhbGxvd09mZmxpbmVUcmFuc21pc3Npb246ZnVuY3Rpb24obil7bnVsbCE9biYmKGU9bil9LGlzU2VjdXJlOmZ1bmN0aW9uKCl7cmV0dXJuIGl9LHNldFNlY3VyZTpmdW5jdGlvbihuKXtpPW59LGdldE1lYXN1cmVtZW50TGFiZWxPcmRlcjpmdW5jdGlvbigpe3JldHVybiByfSxzZXRNZWFzdXJlbWVudExhYmVsT3JkZXI6ZnVuY3Rpb24obil7bnVsbCE9biYmMDxuLmxlbmd0aCYmKHI9bil9fSksdGhpcy5yZXNldCgpfWkudXQ9ZixpLnN0PWMsaS5Lbj1sLGkuYXQ9cCx0LmV4cG9ydHM9aX0sezI0OjI0LDM2OjM2LDQ6NCw4Ojh9XSw3OltmdW5jdGlvbihuLHQsZSl7dmFyIHI9bigyNCksXz1uKDEzKSxnPTFlMyxtPTg2NGU1LG89XCJxX2RjZlwiLHc9XCJxX2RjY1wiLHk9MjAsYj02ZTM7dC5leHBvcnRzPWZ1bmN0aW9uKHUpe3ZhciBlLHMsaSxhLGYsbixjPVtdLGw9ITE7ZnVuY3Rpb24gcChuKXtyZXR1cm4gbi1zPGcmJnk8PWV9ZnVuY3Rpb24gdihuKXtyZXR1cm4gbi1hPG0mJmI8PWl9ZnVuY3Rpb24gZChuKXttPG4tYSYmKGk9MCxhPW4pLGc8bi1zJiYoZT0wLHM9biksaSsrLGUrKzt2YXIgdD11LnQoKTt0LnNldCh3LGkrXCJcIiksdC5zZXQobyxhK1wiXCIpfWZ1bmN0aW9uIGgoKXt2YXIgbix0PStuZXcgRGF0ZTtpZihsKWZvcig7Yy5sZW5ndGg7KXt2YXIgZT1jLnNoaWZ0KCk7aT1lLHUuSSgpLmZ0KGkpfWVsc2V7Zm9yKHZhciBpLHIsbztjLmxlbmd0aCYmIXAobz10KSYmIXYobyk7KWQodCksZT1jLnNoaWZ0KCkscj1lLG5ldyBfKHUsdS5sbigpLHIpLnNlbmQoKTtuPXQsYy5sZW5ndGgmJihmfHwocChuKT9mPXUuZ2V0UGxhdGZvcm1BUEkoKS5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Zj1udWxsLGgoKX0scytnLW4pOnYobikmJihmPXUuZ2V0UGxhdGZvcm1BUEkoKS5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Zj1udWxsLGgoKX0sYSttLW4pKSkpfX1yLmV4dGVuZCh0aGlzLHtjdDpmdW5jdGlvbihuKXt1LmdldEVuYWJsZWQoKSYmKGMucHVzaChuKSxoKCkpfSxlbjpmdW5jdGlvbigpe3UuZ2V0UGxhdGZvcm1BUEkoKS5jbGVhclRpbWVvdXQoZiksYy5sZW5ndGg9MH0sSjpmdW5jdGlvbihuKXtsPW4sdS5nZXRQbGF0Zm9ybUFQSSgpLmNsZWFyVGltZW91dChmKSxoKCl9fSksKG49dS50KCkpLmhhcyh3KSYmbi5oYXMobyk/KGk9cGFyc2VJbnQobi5nZXQodykpLGE9cGFyc2VJbnQobi5nZXQobykpKTooaT0wLGE9K25ldyBEYXRlKSxlPTAscz0rbmV3IERhdGV9fSx7MTM6MTMsMjQ6MjR9XSw4OltmdW5jdGlvbihuLHQsZSl7dmFyIGk9e0RFRkFVTFQ6MCxORVZFUjoxLFdJRklPTkxZOjIsUElHR1lCQUNLOjMsRElTQUJMRUQ6NCx2YWx1ZU9mOmZ1bmN0aW9uKG4pe3JldHVybiBudWxsPT1ufHxcIkRFRkFVTFRcIj09bj9pLkRFRkFVTFQ6XCJORVZFUlwiPT1uP2kuTkVWRVI6XCJXSUZJT05MWVwiPT1uP2kuV0lGSU9OTFk6XCJQSUdHWUJBQ0tcIj09bj9pLlBJR0dZQkFDSzpcIkRJU0FCTEVEXCI9PW4/aS5ESVNBQkxFRDp2b2lkIDB9fTtlLlRyYW5zbWlzc2lvbk1vZGU9aSxlLk49e1I6MCxLOjEsRzoyLEY6M30sZS5UPXtSOjAsWToxLEg6Mn0sZS51PXtsOlwic3RhcnRcIix2Olwidmlld1wiLGg6XCJjbG9zZVwiLF86XCJhZ2dyZWdhdGVcIixISURERU46XCJoaWRkZW5cIixLRUVQQUxJVkU6XCJrZWVwLWFsaXZlXCJ9fSx7fV0sOTpbZnVuY3Rpb24obix0LGUpe3ZhciBhPW4oMzYpLGY9big4KS51LGM9bigyNCk7dC5leHBvcnRzPWZ1bmN0aW9uKG4pe3ZhciB0PXRoaXMsZT1udWxsLGk9TmFOLHI9ITAsbz04NjRlNTtmdW5jdGlvbiB1KCl7aT0rbmV3IERhdGUrbyxzKCl9ZnVuY3Rpb24gcygpe24uZXQoKS5zZW5kKGYuS0VFUEFMSVZFKX1jLmV4dGVuZCh0LHt4bjpmdW5jdGlvbihuKXsocj1uKT8odC5YKCksdC5aKCkpOnQuY2FuY2VsKCl9LGlzRW5hYmxlZDpmdW5jdGlvbigpe3JldHVybiByfSxaOmZ1bmN0aW9uKCl7ciYmKHQuY2FuY2VsKCksaT0rbmV3IERhdGUrbyxlPWEuc2V0SW50ZXJ2YWwodSxvKSl9LFg6ZnVuY3Rpb24oKXtpZihyKXt2YXIgbj0rbmV3IERhdGU7aSYmaTw9biYmcygpfX0scGF1c2U6ZnVuY3Rpb24oKXt0LmNhbmNlbCgpfSxjYW5jZWw6ZnVuY3Rpb24oKXtlJiYoYS5jbGVhckludGVydmFsKGUpLGU9bnVsbCl9fSl9fSx7MjQ6MjQsMzY6MzYsODo4fV0sMTA6W2Z1bmN0aW9uKG4sdCxlKXt2YXIgYz1uKDI0KSxpPW4oMjEpLHM9big4KS51LHI9bigxNyksYT1uKDM2KSx1PW4oNCkseT1cInVuZGVmaW5lZFwiLG89ci5ELGw9dHlwZW9mIGVuY29kZVVSSUNvbXBvbmVudCE9eT9lbmNvZGVVUklDb21wb25lbnQ6ZXNjYXBlLGY9ZnVuY3Rpb24obil7cmV0dXJuIGkubHQobik/bjpvfSxwPWZ1bmN0aW9uKG4pe3JldHVybiBuPT1zLmx8fG49PXMuaHx8bj09cy52P3MudjpzLkhJRERFTn07ZnVuY3Rpb24gdihuKXt2YXIgdCxmPXt9O2MuZXh0ZW5kKHRoaXMse3B0OmZ1bmN0aW9uKG4pe2RlbGV0ZSBmW25dfSx2dDpmdW5jdGlvbihuKXtpZihudWxsIT1uKWZvcih2YXIgdCBpbiBuKW4uaGFzT3duUHJvcGVydHkodCkmJnRoaXMuc2V0TGFiZWwodCxuW3RdKX0sc2V0TGFiZWw6ZnVuY3Rpb24obix0KXtmW25dPXR9LGdldExhYmVsOmZ1bmN0aW9uKG4pe3JldHVybiBmW25dfSxnZXRMYWJlbHM6ZnVuY3Rpb24oKXtyZXR1cm4gZn0sZHQ6ZnVuY3Rpb24obil7cmV0dXJuIGYuaGFzT3duUHJvcGVydHkobil9LGh0OmZ1bmN0aW9uKG4pe2Zvcih2YXIgdD1bXSxlPWMuZXh0ZW5kKHt9LGYpLGk9MCxyPW4ubGVuZ3RoO2k8cjtpKyspe3ZhciBvPW5baV0sdT1lW29dO251bGwhPXUmJlwiXCIhPT11JiYodC5wdXNoKFwiJlwiLGwobyksXCI9XCIsbCh1KSksZGVsZXRlIGVbb10pfWZvcih2YXIgcyBpbiBlKWlmKGUuaGFzT3duUHJvcGVydHkocykpe3ZhciBhPWVbc107bnVsbCE9YSYmXCJcIiE9PWEmJnQucHVzaChcIiZcIixsKHMpLFwiPVwiLGwoZVtzXSkpfXJldHVybiAwPCh0PXQuam9pbihcIlwiKSkubGVuZ3RoJiZcIiZcIj09dC5jaGFyQXQoMCk/dC5zdWJzdHJpbmcoMSk6dH0sc2V0UGl4ZWxVUkw6ZnVuY3Rpb24obil7dD1ufSxnZXRQaXhlbFVSTDpmdW5jdGlvbigpe3JldHVybiB0fX0pLG4mJnRoaXMuc2V0UGl4ZWxVUkwobi5nZXRQaXhlbFVSTCgpKX1mdW5jdGlvbiBkKG4sdCxlLGkpe2lmKHYuY2FsbCh0aGlzLG4pLG4pe251bGwhPWUmJnRoaXMuc2V0UGl4ZWxVUkwoZSksdGhpcy5zZXRMYWJlbChcImMxXCIsXCIxOVwiKSx0aGlzLnNldExhYmVsKFwibnNfYXBfYW5cIixmKG4uZ2V0QXBwTmFtZSgpKSksdGhpcy5zZXRMYWJlbChcIm5zX2FwX3BuXCIsZihhLmdldFBsYXRmb3JtTmFtZSgpKSksdGhpcy5zZXRMYWJlbChcIm5zX2FwX3B2XCIsZihhLmdldFJ1bnRpbWVWZXJzaW9uKCkpKSx0aGlzLnNldExhYmVsKFwiYzEyXCIsbi5nZXRWaXNpdG9ySWQoKSksbi5VbigpO3ZhciByPW4uZ2V0Q3Jvc3NQdWJsaXNoZXJJZCgpO3ImJih0aGlzLnNldExhYmVsKFwibnNfYWtcIixyKSxuLmlzQ3Jvc3NQdWJsaXNoZXJJZENoYW5nZWQoKSYmdGhpcy5zZXRMYWJlbChcIm5zX2FwX25pXCIsXCIxXCIpKSx0aGlzLnNldExhYmVsKFwibnNfYXBfZGV2aWNlXCIsZihhLmdldERldmljZU1vZGVsKCkpKSx0aGlzLnNldExhYmVsKFwibnNfYXBfYXJcIixmKGEuZ2V0RGV2aWNlQXJjaGl0ZWN0dXJlKCkpKSx0aGlzLnNldExhYmVsKFwibnNfcmFkaW9cIixmKGEuZ2V0Q29ubmVjdGlvblR5cGUoKSkpLHRoaXMuc2V0TGFiZWwoXCJuc190eXBlXCIscCh0KSksdGhpcy5zZXRMYWJlbChcIm5zX25jXCIsXCIxXCIpLHRoaXMuc2V0TGFiZWwoXCJuc19hcF9wZnZcIixmKGEuZ2V0UGxhdGZvcm1WZXJzaW9uKCkpKSx0aGlzLnNldExhYmVsKFwibnNfYXBfcGZtXCIsZihhLmdldFJ1bnRpbWVOYW1lKCkpKSx0aGlzLnNldExhYmVsKFwibnNfYXBfZXZcIix0KSx0aGlzLnNldExhYmVsKFwibnNfYXBfdmVyXCIsZihuLmdldEFwcFZlcnNpb24oKSkpLHRoaXMuc2V0TGFiZWwoXCJuc19hcF9zZFwiLGEuZ2V0RGlzcGxheVJlc29sdXRpb24oKSksdGhpcy5zZXRMYWJlbChcIm5zX2FwX3Jlc1wiLGEuZ2V0QXBwbGljYXRpb25SZXNvbHV0aW9uKCkpLHRoaXMuc2V0TGFiZWwoXCJuc19hcF9sYW5nXCIsYS5nZXRMYW5ndWFnZSgpKSx0aGlzLnNldExhYmVsKFwibnNfYXBfc3ZcIixuLmdldFZlcnNpb24oKSksdD09cy5LRUVQQUxJVkUmJnRoaXMuc2V0TGFiZWwoXCJuc19hcF9vY1wiLG4uSSgpLl90KCkrXCJcIik7dmFyIG89bi5nbigpLHU9bi5tbigpO3RoaXMuc2V0TGFiZWwoXCJuc19hcF9pZFwiLG8rXCJcIiksdGhpcy5zZXRMYWJlbChcIm5zX2FwX2NzXCIsdStcIlwiKSx0aGlzLnNldExhYmVsKFwibnNfYXBfYmlcIixhLmdldFBhY2thZ2VOYW1lKCkpLHRoaXMuc2V0TGFiZWwoXCJuc19hcF9qYlwiLGYoYS5nZXREZXZpY2VKYWlsQnJva2VuRmxhZygpKSl9fWZ1bmN0aW9uIGgobix0LGUsaSl7ZC5jYWxsKHRoaXMsbix0LGUsaSksdGhpcy5zZXRMYWJlbChcIm5zX2FwX2dzXCIsbi5fbigpK1wiXCIpLHRoaXMuc2V0TGFiZWwoXCJuc19hcF9pbnN0YWxsXCIsbi5obigpK1wiXCIpLHRoaXMuc2V0TGFiZWwoXCJuc19hcF9ydW5zXCIsbi5kbigpK1wiXCIpLGkmJnRoaXMuc2V0TGFiZWwoXCJuc19hcF9jc2ZcIixcIjFcIiksdGhpcy5zZXRMYWJlbChcIm5zX2FwX2xhc3RydW5cIixuLkJuKCkrXCJcIik7dmFyIHI9bi5GbigpOzA8ciYmdGhpcy5zZXRMYWJlbChcIm5zX2FwX21pc3NcIixyLnRvU3RyaW5nKCkpO3ZhciBvPW4ud24oKTtvJiYodGhpcy5zZXRMYWJlbChcIm5zX2FwX3VwZGF0ZWRcIixvK1wiXCIpLG4udCgpLnJlbW92ZSh1LkMpLG4ueW4obnVsbCkpLHRoaXMuc2V0TGFiZWwoXCJuc19hcF9qYlwiLGYoYS5nZXREZXZpY2VKYWlsQnJva2VuRmxhZygpKSl9ZC5ndD1mdW5jdGlvbihuLHQpe3ZhciBlPXQud3QsaT10Lnl0LHI9dC5idDtpZihpPXR5cGVvZiBpPT09eXx8aSxyPXR5cGVvZiByPT09eXx8cixuLnVwZGF0ZShyKSxyKXt2YXIgbz1uLmJuKCksdT1uLkluKGUpLHM9bi5TbihpKSxhPW4uUG4oZSksZj1uLkFuKGkpLGM9bi5DbihlKSxsPW4ua24oaSkscD1uLkVuKGkpLHY9bi5UbihpKSxkPW4uTm4oaSksaD1uLkxuKCksXz1uLkRuKGkpLGc9bi5SbihpKSxtPW4uTW4oaSksdz1uLk9uKGkpO3QubGFiZWxzLm5zX2FwX2ZnPW8rXCJcIix0LmxhYmVscy5uc19hcF9mdD11K1wiXCIsdC5sYWJlbHMubnNfYXBfZGZ0PXMrXCJcIix0LmxhYmVscy5uc19hcF9idD1hK1wiXCIsdC5sYWJlbHMubnNfYXBfZGJ0PWYrXCJcIix0LmxhYmVscy5uc19hcF9pdD1jK1wiXCIsdC5sYWJlbHMubnNfYXBfZGl0PWwrXCJcIix0LmxhYmVscy5uc19hcF91dD1oK1wiXCIsdC5sYWJlbHMubnNfYXBfYXM9XytcIlwiLHQubGFiZWxzLm5zX2FwX2Rhcz1wK1wiXCIsMDw9ZyYmKHQubGFiZWxzLm5zX2FwX2F1cz1nK1wiXCIsdC5sYWJlbHMubnNfYXBfZGF1cz12K1wiXCIsdC5sYWJlbHMubnNfYXBfdWM9dytcIlwiKSwwPD1tJiYodC5sYWJlbHMubnNfYXBfdXM9bStcIlwiLHQubGFiZWxzLm5zX2FwX2R1cz1kK1wiXCIpLHQubGFiZWxzLm5zX2FwX3VzYWdlPXQuSXQtbi5nZXRHZW5lc2lzKCkrXCJcIn10LmxhYmVscy5uc190cz10Lkl0K1wiXCJ9LGQucHJvdG90eXBlPW5ldyB2LGQuU3Q9ZnVuY3Rpb24obix0LGUsaSl7dmFyIHI9bi5ldCgpLG89ci5QdCh0LGUsaSk7cmV0dXJuIHIuQXQobyl9LGgucHJvdG90eXBlPW5ldyBkLHQuZXhwb3J0cy5DdD12LHQuZXhwb3J0cy5rdD1kLHQuZXhwb3J0cy5FdD1ofSx7MTc6MTcsMjE6MjEsMjQ6MjQsMzY6MzYsNDo0LDg6OH1dLDExOltmdW5jdGlvbihuLHQsZSl7dmFyIGY9bigxMCkua3QsYz1uKDEwKS5FdCxsPW4oMzYpLHA9big4KS51LHY9big4KS5ULGQ9big0KSxoPW4oMTQpLlR0LF89XCJzdGFydFwiLGc9XCJmb3JlZ3JvdW5kXCIsbT1cImJhY2tncm91bmRcIjt0LmV4cG9ydHM9ZnVuY3Rpb24obyl7dmFyIHI9dGhpcyxpPTAsdT1bXSx0PSExLHM9MCxhPXt9O3IuTnQ9ZnVuY3Rpb24oKXtpKys7dmFyIHQ9ITE7cmV0dXJuIGZ1bmN0aW9uKG4pe3R8fCh0PSEwLGktLSxuJiZyLkx0KCkpfX0sci5EdD1mdW5jdGlvbigpe2lmKCF0KXt2YXIgbj1yLk50KCk7dD0hMCxsLm9uRGF0YUZldGNoKGZ1bmN0aW9uKCl7bighKHQ9ITEpKX0sZnVuY3Rpb24oKXtuKHQ9ITEpfSl9fSxyLkx0PWZ1bmN0aW9uKCl7aWYoISgwPGkpKXtmb3IodmFyIG49MDtuPHUubGVuZ3RoOysrbil7dmFyIHQ9dVtuXSxlPXIuQXQodCk7ci5SdCh0LGUpfXUubGVuZ3RoPTB9fSxyLk10PWZ1bmN0aW9uKG4pe3UucHVzaChuKSxyLkR0KCl9LHIuUnQ9ZnVuY3Rpb24obix0KXtvLmZuKCkuY3QodCksby5TKCkuWigpfSxyLnNlbmQ9ZnVuY3Rpb24obix0LGUpe2lmKG4hPXAuXyl7dmFyIGk9ci5QdChuLHQsZSk7ci5NdChpKX1lbHNlIHIuT3QodCl9LHIuUHQ9ZnVuY3Rpb24obix0LGUpe3ZhciBpPXtJdDorbmV3IERhdGUsV3Q6bixWdDplLHd0OiExLHl0OnZvaWQgMCxidDp2b2lkIDAsbGFiZWxzOnt9fTtyZXR1cm4gcysrLGkubGFiZWxzLm5zX2FwX2VjPXMrXCJcIixuPT1wLmw/KG8udW4oKSxpLnd0PW8uc24oKSk6KGkueXQ9IShudWxsIT10JiZ0Lmhhc093blByb3BlcnR5KFwibnNfc3RfZXZcIikmJlwiaGJcIj09dC5uc19zdF9ldiksaS5idD0hKG51bGwhPXQmJnQuaGFzT3duUHJvcGVydHkoXCJuc19zdF9ldlwiKSkpLGkueHQ9by5nZXRMYWJlbHMoKSxpLlV0PXQsbnVsbCE9by5WbigpP2kuQnQ9by5WbigpOm49PXAubD9pLkJ0PV86by5wbigpPT12Lkg/aS5CdD1nOmkuQnQ9bSxmLmd0KG8saSksaX0sci5BdD1mdW5jdGlvbihuKXt2YXIgdD1udWxsLGU9bi5XdCxpPW4uVnQscj1uLnd0O3JldHVybih0PWU9PT1wLmw/bmV3IGMobyxlLGkscik6bmV3IGYobyxlLGkscikpLnZ0KG4ubGFiZWxzKSx0LnZ0KG4ueHQpLHQudnQobi5VdCksdC5kdChkLlBBR0VfTkFNRV9MQUJFTCl8fHQuc2V0TGFiZWwoZC5QQUdFX05BTUVfTEFCRUwsbi5CdCksbC5wcm9jZXNzTWVhc3VyZW1lbnRMYWJlbHModCksdC52dChhKSxhPXt9LHR9LHIuT3Q9ZnVuY3Rpb24obil7aChhLG4pfX19LHsxMDoxMCwxNDoxNCwzNjozNiw0OjQsODo4fV0sMTI6W2Z1bmN0aW9uKG4sdCxlKXt2YXIgQT1uKDM2KSxDPW4oMjQpLGs9bigyMSksRT1uKDE5KSxUPW4oMjIpLE49big4KS5UcmFuc21pc3Npb25Nb2RlLEw9bigxNSksRD1uKDE0KS5GdCxSPVwiY3NfY2FjaGVfXCIsTT1cIkNBQ0hFX0RST1BQRURfTUVBU1VSRU1FTlRTXCIsTz0yZTMsVz0xMDAsVj0xMCx4PTMwLFU9MzEsQj1cImh0dHA6Ly91ZG0uc2NvcmVjYXJkcmVzZWFyY2guY29tL29mZmxpbmVcIixGPVwiaHR0cHM6Ly91ZG0uc2NvcmVjYXJkcmVzZWFyY2guY29tL29mZmxpbmVcIjtmdW5jdGlvbiBpKHUsbyl7dmFyIHQsZSxpLHIscyxhLGYsYyxsLHAsbj10aGlzLHY9MDtmdW5jdGlvbiBkKCl7aWYodS5nZXRFbmFibGVkKCkmJkEuaXNDb25uZWN0aW9uQXZhaWxhYmxlKCkmJiFuLmp0KCkmJm51bGwhPXUuZ2V0Q3VzdG9tZXJDMigpKXtpZighKGk8PWMpKXJldHVybiEwO2lmKDFlMypyKjYwLSgrbmV3IERhdGUtbCk8PTApcmV0dXJuIShsPWM9MCl9cmV0dXJuITF9ZnVuY3Rpb24gaCgpe3Y9MCxudWxsIT1mJiYoZj1udWxsKX1mdW5jdGlvbiBfKCl7Zm9yKHZhciBuLHQ9bSgpLGU9ITEsaT10Lmxlbmd0aDswPGk7aS0tKXt2YXIgcj0obj10W2ktMV0sTnVtYmVyKG4uc3Vic3RyaW5nKG8ubGVuZ3RoKSkpO2U/eSh0W2ktMV0sITApOmU9UyhyKX19ZnVuY3Rpb24gZyhuKXtpZih1LmdldEVuYWJsZWQoKSl7dmFyIHQ9dS50KCk7dC5oYXMoTSkmJihuKz1OdW1iZXIodC5nZXQoTSkpKSx0LnNldChNLG4rXCJcIil9fWZ1bmN0aW9uIG0oKXtyZXR1cm4gbnVsbD09YSYmKGE9RC5HdCgpKSxhfWZ1bmN0aW9uIHcobil7dmFyIHQ9bytMLkt0KG4sXCJuc190c1wiKTtELnF0KHUsdCxuKSxudWxsPT1hJiYoYT1bXSksYS5wdXNoKHQpLGgoKX1mdW5jdGlvbiB5KG4sdCl7aWYobnVsbCE9bil7dCYmKGk9biwocj11LnQoKSkuaGFzKGkpJiZnKE51bWJlcihyLmdldChpKSkpKSxELmRlbGV0ZUZpbGUodSxuKTt2YXIgZT1FLmluZGV4T2YobixhKTswPD1lJiZhLnNwbGljZShlLDEpfXZhciBpLHJ9ZnVuY3Rpb24gYigpe3JldHVybiBudWxsIT1hJiYwPGEubGVuZ3RoP2FbYS5sZW5ndGgtMV06bnVsbH1mdW5jdGlvbiBJKG4pe3ZhciB0PXUudCgpLGU9MDtyZXR1cm4gbnVsbCE9biYmKGU9dC5oYXMobik/TnVtYmVyKHQuZ2V0KG4pKTpELkh0KHUsbikubGVuZ3RoKSxlfWZ1bmN0aW9uIFMobil7dmFyIHQ9K25ldyBEYXRlO3JldHVybiAyNCpzKjYwKjYwKjFlMy0odC1uKTw9MH1mdW5jdGlvbiBQKHQsZSl7dmFyIGk9dS50KCk7aWYoZCgpKXt2YXIgbj1udWxsLHI9bnVsbDtpZihudWxsPT1mJiZudWxsIT0obj1mdW5jdGlvbihuKXtmb3IodmFyIHQ9MCxlPUQuSHQodSxuKSxpPSExO3Q8ZS5sZW5ndGgmJiEoaT0hUyhOdW1iZXIoTC5LdChlW3RdLFwibnNfdHNcIikpKSk7dCsrKTtyZXR1cm4gaT8oZyh0KSxlPWUuc2xpY2UodCxlLmxlbmd0aCkpOih5KG4sITApLGU9bnVsbCksZX0ocj1iKCkpKSYmMDxuLmxlbmd0aCl7dmFyIG89aS5oYXMoTSk/aS5nZXQoTSk6XCIwXCI7Zj1MLll0KG4sbyl9aWYobnVsbCE9ZiYmMDxmLmxlbmd0aClyZXR1cm4gdm9pZCBBLmh0dHBQb3N0KGZ1bmN0aW9uKG4pe3ZhciB0LGU9ITA7LTE9PSh0PWsudG4ocCkmJmsubHQocCk/cDpuLmlzU2VjdXJlKCk/RjpCKS5pbmRleE9mKFwiP1wiKSYmKHQrPVwiP1wiLGU9ITEpO3ZhciBpPXUuZ2V0Q3VzdG9tZXJDMigpO2subHQoaSkmJihlJiYodCs9XCImXCIpLHQrPVwiYzI9XCIraSxlPSEwKTt2YXIgcj1cIkpldHBvcnRHb3RBTWFza09mVGhlXCIrdS5nKCkrXCJTLkRfSy1cIjtyZXR1cm4gcj1UKHIpLGsubHQocikmJihlJiYodCs9XCImXCIpLHQrPVwicz1cIityKSx0LnRvTG93ZXJDYXNlKCl9KHQpLGYsZnVuY3Rpb24obil7aWYoMjAwPT1uKXJldHVybiBjKysseShyLCExKSxoKCksbD0rbmV3IERhdGUsaS5yZW1vdmUoTSksdm9pZCBBLnNldFRpbWVvdXQoZnVuY3Rpb24oKXtQKHQsZSl9LDApO2UoKX0pfWUoKX1vPW98fFIsQy5leHRlbmQodGhpcyx7Zmx1c2g6ZnVuY3Rpb24obix0KXt1LmdldEVuYWJsZWQoKSYmKF8oKSwxZTMqcio2MC0oK25ldyBEYXRlLXYpPD0wPyh2PTAsUChuLHQpKTp0KCkpfSxzZXRDYWNoZU1heE1lYXN1cmVtZW50czpmdW5jdGlvbihuKXt0PW59LGdldENhY2hlTWF4TWVhc3VyZW1lbnRzOmZ1bmN0aW9uKCl7cmV0dXJuIHR9LHNldENhY2hlTWF4QmF0Y2hGaWxlczpmdW5jdGlvbihuKXtuPD0wfHwoZT1uKX0sZ2V0Q2FjaGVNYXhCYXRjaEZpbGVzOmZ1bmN0aW9uKCl7cmV0dXJuIGV9LFluOmZ1bmN0aW9uKG4pe2k9bn0sSm46ZnVuY3Rpb24oKXtyZXR1cm4gaX0sUW46ZnVuY3Rpb24obil7cj1ufSxYbjpmdW5jdGlvbigpe3JldHVybiByfSxzZXRDYWNoZU1lYXN1cmVtZW50RXhwaXJ5OmZ1bmN0aW9uKG4pe3M9bn0sZ2V0Q2FjaGVNZWFzdXJlbWVudEV4cGlyeTpmdW5jdGlvbigpe3JldHVybiBzfSxmdDpmdW5jdGlvbihuKXtpZih1LmdldEVuYWJsZWQoKSl7dmFyIHQ9dS5sbigpO2lmKFwic3RyaW5nXCIhPXR5cGVvZiBuJiYobj1uLmh0KHQuZ2V0TWVhc3VyZW1lbnRMYWJlbE9yZGVyKCkpKSx0LmdldE9mZmxpbmVUcmFuc21pc3Npb25Nb2RlKCkhPU4uRElTQUJMRUQmJm51bGwhPXUuZ2V0Q3VzdG9tZXJDMigpJiZrLmx0KEwuS3QobixcIm5zX3RzXCIpKSl7dmFyIGU9YigpO2lmKG51bGwhPWUpSShlKTx0aGlzLmdldENhY2hlTWF4QmF0Y2hGaWxlcygpPyhuPVwiXFxuXCIrbixELnF0KHUsZSxuKSxoKCkpOihtKCkubGVuZ3RoPj10aGlzLmdldENhY2hlTWF4TWVhc3VyZW1lbnRzKCkvdGhpcy5nZXRDYWNoZU1heEJhdGNoRmlsZXMoKSYmeShudWxsIT1hJiYwPGEubGVuZ3RoP2FbMF06bnVsbCwhMCksdyhuKSk7ZWxzZSB3KG4pfX19LF90OmZ1bmN0aW9uKCl7dmFyIG49SShiKCkpO3JldHVybiAwPG0oKS5sZW5ndGgmJihuKz0obSgpLmxlbmd0aC0xKSp0aGlzLmdldENhY2hlTWF4QmF0Y2hGaWxlcygpKSxufSxqdDpmdW5jdGlvbigpe3JldHVybiAwPT10aGlzLl90KCl9LGNsZWFyOmZ1bmN0aW9uKCl7Zm9yKHZhciBuPW0oKSx0PW4ubGVuZ3RoOzA8dDt0LS0peShuW3QtMV0sITApO3UudCgpLnJlbW92ZShNKX0sdHQ6ZnVuY3Rpb24obil7cD1ufX0pLHRoaXMuc2V0Q2FjaGVNYXhNZWFzdXJlbWVudHMoTyksdGhpcy5zZXRDYWNoZU1heEJhdGNoRmlsZXMoVyksdGhpcy5ZbihWKSx0aGlzLlFuKHgpLHRoaXMuc2V0Q2FjaGVNZWFzdXJlbWVudEV4cGlyeShVKSxfKCl9aS5xbj1PLGkuSG49VyxpLnpuPVYsaS5abj14LGkuJG49VSxlLkw9aX0sezE0OjE0LDE1OjE1LDE5OjE5LDIxOjIxLDIyOjIyLDI0OjI0LDM2OjM2LDg6OH1dLDEzOltmdW5jdGlvbihuLHQsZSl7dmFyIGY9bigyNCksYz1uKDIwKSxsPW4oMzYpLHA9big0KSx2PW4oOCkuVHJhbnNtaXNzaW9uTW9kZTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxuLGUsaSl7dmFyIHI9dGhpcyxvPW4sdT1lO2Z1bmN0aW9uIHMobil7MjAwIT1uJiYoMzAyIT1uJiYzMDEhPW58fHQuaXQoKSkmJnQuSSgpLmZ0KHUuaHQoby5nZXRNZWFzdXJlbWVudExhYmVsT3JkZXIoKSksbyksaSYmaSgpfWZ1bmN0aW9uIGEoKXt2YXIgbj1yLnByb2Nlc3ModS5nZXRQaXhlbFVSTCgpKTtsLmh0dHBHZXQobixzKX1mLmV4dGVuZChyLHtwcm9jZXNzOmZ1bmN0aW9uKG4pe24rPXUuaHQoby5nZXRNZWFzdXJlbWVudExhYmVsT3JkZXIoKSk7dmFyIHQ9Yy5KdCgpP3AuQTpwLlA7aWYobi5sZW5ndGg+dCYmMDxuLmluZGV4T2YoXCImXCIpKXt2YXIgZT1uLnN1YnN0cmluZygwLHQtOCkubGFzdEluZGV4T2YoXCImXCIpLGk9ZW5jb2RlVVJJQ29tcG9uZW50KG4uc3Vic3RyaW5nKGUrMSkpO249bi5zdWJzdHJpbmcoMCxlKStcIiZuc19jdXQ9XCIraX1yZXR1cm4gbi5sZW5ndGg+dCYmKG49bi5zdWJzdHJpbmcoMCx0KSksbn0sc2VuZDpmdW5jdGlvbigpe3ZhciBuPW8uZ2V0TGl2ZVRyYW5zbWlzc2lvbk1vZGUoKTtyZXR1cm4gbj09di5ORVZFUnx8bj09di5ESVNBQkxFRD8odC5JKCkuZnQodS5odChvLmdldE1lYXN1cmVtZW50TGFiZWxPcmRlcigpKSxvKSxpJiZpKCkpOm8uZ2V0T2ZmbGluZVRyYW5zbWlzc2lvbk1vZGUoKSE9di5ORVZFUiYmMDx0LkkoKS5fdCgpP3QuSSgpLmZsdXNoKG8sYSk6YSgpLCEwfX0pfX0sezIwOjIwLDI0OjI0LDM2OjM2LDQ6NCw4Ojh9XSwxNDpbZnVuY3Rpb24obix0LGUpe3ZhciBvPW4oMzYpLHU9XCJjYWNoZV9kaXJcIixpPXtHdDpmdW5jdGlvbigpe3JldHVybiBvLklPLmRpcih1KXx8W119LHF0OmZ1bmN0aW9uKG4sdCxlKXt2YXIgaT1uLnQoKSxyPU51bWJlcihpLmdldCh0KSl8fDA7by5JTy5hcHBlbmQodSx0LGUpLHIrKyxpLnNldCh0LHIrXCJcIil9LGRlbGV0ZUZpbGU6ZnVuY3Rpb24obix0KXtvLklPLmRlbGV0ZUZpbGUodSx0KSxuLnQoKS5yZW1vdmUodCl9LEh0OmZ1bmN0aW9uKG4sdCl7dmFyIGU9by5JTy5yZWFkKHUsdCk7cmV0dXJuIGU/ZS5zcGxpdChcIlxcblwiKTpbXX19O2Z1bmN0aW9uIHMobil7cmV0dXJuISgobis9XCJcIikuaW5kZXhPZihcIixcIik8MCkmJm4uaW5kZXhPZihcIiBcIik8MH1mdW5jdGlvbiBhKG4pe3JldHVybiFpc05hTihwYXJzZUludChuKSkmJmlzRmluaXRlKG4pfWZ1bmN0aW9uIGYobix0KXtmb3IodmFyIGU9dCxpPW4uc3BsaXQoXCIsXCIpLHI9MCxvPWkubGVuZ3RoO3I8bztyKyspe3ZhciB1PWlbcl07aWYoMDx1Lmxlbmd0aClpZihlLmluZGV4T2YodSk8MCkwPT1lLmxlbmd0aD9lKz11K1wiOjFcIjplKz1cIjtcIit1K1wiOjFcIjtlbHNlIGZvcih2YXIgcz1lLnNwbGl0KFwiO1wiKSxhPTAsZj1zLmxlbmd0aDthPGY7YSsrKWlmKDA8PXNbYV0uaW5kZXhPZih1KSl7dmFyIGM9c1thXS5zcGxpdChcIjpcIiksbD1OdW1iZXIoY1sxXSk7bCsrO3ZhciBwPWNbMF0rXCI6XCIrbCx2PWUuaW5kZXhPZihzW2FdKTtlPWUuc3Vic3RyaW5nKDAsdikrcCtlLnN1YnN0cmluZyh2K3NbYV0ubGVuZ3RoKX19cmV0dXJuIGV9ZS5UdD1mdW5jdGlvbihuLHQpe2Zvcih2YXIgZSBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkoZSkpe3ZhciBpPW5bZV0scj10W2VdO251bGw9PWk/cyhyKT9uW2VdPWYocixcIlwiKTpuW2VdPXI6YShpKSYmYShyKT9uW2VdPXBhcnNlSW50KGkpK3BhcnNlSW50KHIpK1wiXCI6cyhyKT9uW2VdPWYocixpKToobz1yLDA8PWkuaW5kZXhPZihvKXx8KG5bZV09aStcIixcIityKSl9dmFyIG99LGUuRnQ9aX0sezM2OjM2fV0sMTU6W2Z1bmN0aW9uKG4sdCxlKXt2YXIgbz1uKDIyKSxsPW4oMjEpLHA9W10sdj0tMSxkPS0xLGY9W1wiYzEyXCIsXCJjMVwiLFwibnNfYXBfYW5cIixcIm5zX2FwX3BuXCIsXCJuc19hcF9wdlwiLFwibnNfYXBfZGV2aWNlXCIsXCJuc19ha1wiXSxoPVtcImMxMlwiLFwiYzFcIixcIm5zX2FwX2FuXCIsXCJuc19hcF9wblwiLFwibnNfYXBfcHZcIixcIm5zX2FwX2RldmljZVwiLFwibnNfdHNcIixcIm5zX2FrXCJdLF89KDE8PGgubGVuZ3RoKS0xLGM9LTE7ZnVuY3Rpb24gZyhuLHQpe3Y9ZD0tMTt2YXIgZT0wO2Rve2lmKDA8PShlPW4uaW5kZXhPZih0LGUpKSl7dmFyIGk9ZSt0Lmxlbmd0aDtpZigoMD09ZXx8XCImXCI9PW4uY2hhckF0KGUtMSkpJiZpPG4ubGVuZ3RoJiZcIj1cIj09bi5jaGFyQXQoaSkpcmV0dXJuIHY9aSsxLHZvaWQoLTE9PShkPW4uaW5kZXhPZihcIiZcIix2KSkmJihkPW4ubGVuZ3RoKSk7ZT1pKzF9fXdoaWxlKDA8PWUmJmU8bi5sZW5ndGgpfWZ1bmN0aW9uIHUobix0KXt2YXIgZT0wO2lmKGcobixcIm5zX3RzXCIpLC0xIT12JiZ2PGQpe3QucHVzaCgnPGV2ZW50IHQ9XCInLG4uc3Vic3RyaW5nKHYsZCksJ1wiPicpO2Zvcih2YXIgaSxyLG89MCx1PTA7bzxuLmxlbmd0aDspe2lmKC0xPT0oaT1uLmluZGV4T2YoXCImXCIsbykpJiYoaT1uLmxlbmd0aCksbzxpJiZvPChyPW4uaW5kZXhPZihcIj1cIixvKSkpe3ZhciBzPSEwO2lmKGUhPV8pZm9yKHZhciBhPTAsZj1oLmxlbmd0aDthPGY7YSsrKXt2YXIgYz0xPDxhO2lmKDA9PShlJmMpJiZoW2FdLmxlbmd0aD09ci1vJiZsLnp0KGhbYV0sMCxuLG8saFthXS5sZW5ndGgpKXtzPSExLGV8PWM7YnJlYWt9fXMmJigwPHUmJihwLnB1c2goXCImXCIpLHQucHVzaChcIiZcIikpLHAucHVzaChuLnN1YnN0cmluZyhvLGkpKSx0LnB1c2gobi5zdWJzdHJpbmcobyxpKSksdSsrKX1vPWkrMX10LnB1c2goXCI8L2V2ZW50PlwiKX19dmFyIGk9e1l0OmZ1bmN0aW9uKG4sdCl7dmFyIGUsaSxyPVsnPD94bWwgdmVyc2lvbj1cIjEuMFwiIGVuY29kaW5nPVwiVVRGLThcIiA/PiddO3JldHVybiBmdW5jdGlvbihuLHQsZSl7dmFyIGkscixvLHU9K25ldyBEYXRlK1wiXCI7bi5wdXNoKCc8ZXZlbnRzIHQ9XCInLHUsJ1wiICcpO2Zvcih2YXIgcz0wLGE9Zi5sZW5ndGg7czxhO3MrKylpPW4scj10LG89ZltzXSxnKHIsbyksLTEhPXYmJnY8ZCYmaS5wdXNoKG8sJz1cIicsci5zdWJzdHJpbmcodixkKSwnXCIgJyk7bi5wdXNoKCdkcm9wcGVkPVwiJyxlLCdcIiBtZDU9XCInLCdcIj4nKSxjPW4ubGVuZ3RoLTF9KHIsblswXSx0KSxmdW5jdGlvbihuLHQpe3A9W107Zm9yKHZhciBlPTAsaT1uLmxlbmd0aDtlPGk7ZSsrKWwubHQobltlXSkmJnUobltlXSx0KX0obixyKSxlPXIsaT1vKHAuam9pbihcIlwiKSkudG9Mb3dlckNhc2UoKSxlLnNwbGljZShjLDAsaSksci5wdXNoKFwiPC9ldmVudHM+XCIpLHIuam9pbihcIlwiKX0sS3Q6ZnVuY3Rpb24obix0KXtyZXR1cm4gZyhuLHQpLC0xIT12JiZ2PGQ/bi5zdWJzdHJpbmcodixkKTpudWxsfX07dC5leHBvcnRzPWl9LHsyMToyMSwyMjoyMn1dLDE2OltmdW5jdGlvbih0LHIsbil7KGZ1bmN0aW9uKG4pe3ZhciBlPXQoMjQpLGk9ci5leHBvcnRzPW4ubnNffHx7fTtcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93JiYod2luZG93Lm5zXz1pKSxpLmNvbVNjb3JlPXQoMiksaS5sb2FkTW9kdWxlPWkubG9hZE1vZHVsZXx8ZnVuY3Rpb24obil7Zm9yKHZhciB0IGluIG4pXCJuc19cIiE9PXQmJmUuZXh0ZW5kKGksbik7cmV0dXJuIG4ubnNfPWl9LGkuUGxhdGZvcm1BUElzPXQoMzIpLHQoMzkpLGkuU3RyZWFtaW5nQW5hbHl0aWNzPXQoNjcpLGkuUmVkdWNlZFJlcXVpcmVtZW50c1N0cmVhbWluZ0FuYWx5dGljcz10KDY0KX0pLmNhbGwodGhpcyxcInVuZGVmaW5lZFwiIT10eXBlb2YgZ2xvYmFsP2dsb2JhbDpcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZj9zZWxmOlwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/d2luZG93Ont9KX0sezI6MiwyNDoyNCwzMjozMiwzOTozOSw2NDo2NCw2Nzo2N31dLDE3OltmdW5jdGlvbihuLHQsZSl7dC5leHBvcnRzPXtEOlwidW5rbm93blwiLFF0OlwiMHgwXCIsWHQ6XCItLS0tLUJFR0lOIFBVQkxJQyBLRVktLS0tLVxcbk1JR2ZNQTBHQ1NxR1NJYjNEUUVCQVFVQUE0R05BRENCaVFLQmdRRDArZkNWeEdxM0JrMjRqVUtPMVB6c2lVczNcXG52cXd3NnpSNG4yZTNBd2VWTFVBZ3NyRFJiQVdKL0VqWm0xV0JMQlZOTWlUTHBTQWtWNnNqT0lyVXMwM3hkVUVqXFxuUVpKSHdPR0srTWZ6RmFadWtvbzBxQXNFTVB3UTVwb3N2MEpka0JkVUdoS2NoUGs2K05ZbUQ2SGI0NExrcDcvYVxcblFuVmVXenZmQVBReVRKUjV3UUlEQVFBQlxcbi0tLS0tRU5EIFBVQkxJQyBLRVktLS0tLVwifX0se31dLDE4OltmdW5jdGlvbihuLHQsZSl7dmFyIGE9MWU0LGY9XCJ1bmRlZmluZWRcIixjPVwiZnVuY3Rpb25cIjt0LmV4cG9ydHM9ZnVuY3Rpb24oZSxvKXt2YXIgbj10aGlzLGk9XCJjb21TY29yZVwiLHI9W107ZnVuY3Rpb24gdChuKXtuPW58fFtdO3ZhciB0PVtpLCtuZXcgRGF0ZV07cmV0dXJuIGUmJnQucHVzaChlKSxuPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKG4pLHQ9dC5jb25jYXQobil9ZnVuY3Rpb24gdShuKXt2YXIgdCxlLGk7aWYoXCJib29sZWFuXCI9PXR5cGVvZiBvfHwhbylyZXR1cm4hIW87aWYoaT1uLmpvaW4oXCIgXCIpLG8gaW5zdGFuY2VvZiBBcnJheSYmMDxvLmxlbmd0aCl7Zm9yKHQ9MDt0PG8ubGVuZ3RoOysrdClpZigoZT1vW3RdKWluc3RhbmNlb2YgUmVnRXhwJiZlLnRlc3QoaSkpcmV0dXJuITA7cmV0dXJuITF9aWYoXCJvYmplY3RcIj09dHlwZW9mIG8pe3ZhciByPSExO2lmKG8uaGlkZSBpbnN0YW5jZW9mIEFycmF5KWZvcih0PTA7dDxvLmhpZGUubGVuZ3RoOysrdClpZigoZT1vLmhpZGVbdF0paW5zdGFuY2VvZiBSZWdFeHAmJmUudGVzdChpKSl7cj0hMDticmVha31pZihvLnNob3cgaW5zdGFuY2VvZiBBcnJheSlmb3IodD0wO3Q8by5zaG93Lmxlbmd0aDsrK3QpaWYoKGU9by5zaG93W3RdKWluc3RhbmNlb2YgUmVnRXhwJiZlLnRlc3QoaSkpcmV0dXJuITA7cmV0dXJuIXImJiFvLnNob3d9cmV0dXJuITB9ZnVuY3Rpb24gcyhuKXt2YXIgdD1yLmxlbmd0aDtpZihhPHR8fFwib2JqZWN0XCI9PXR5cGVvZiBvJiZvLm1heCYmdD5vLm1heCl7dmFyIGU9XCJvYmplY3RcIj09dHlwZW9mIG8mJm8ubWF4fHxhO3Iuc3BsaWNlKDAsci5sZW5ndGgtZSsxKX1yLnB1c2gobil9bi5sb2c9ZnVuY3Rpb24oKXt2YXIgbj10KGFyZ3VtZW50cyk7cyhuKSx0eXBlb2YgY29uc29sZSE9ZiYmdHlwZW9mIGNvbnNvbGUubG9nPT1jJiZ1KG4pJiZjb25zb2xlLmxvZy5hcHBseShjb25zb2xlLG4pfSxuLndhcm49ZnVuY3Rpb24oKXt2YXIgbj10KGFyZ3VtZW50cyk7cyhuKSx0eXBlb2YgY29uc29sZSE9ZiYmdHlwZW9mIGNvbnNvbGUud2Fybj09YyYmdShuKSYmY29uc29sZS53YXJuLmFwcGx5KGNvbnNvbGUsbil9LG4uZXJyb3I9ZnVuY3Rpb24oKXt2YXIgbj10KGFyZ3VtZW50cyk7cyhuKSx0eXBlb2YgY29uc29sZSE9ZiYmdHlwZW9mIGNvbnNvbGUuZXJyb3I9PWMmJnUobikmJmNvbnNvbGUuZXJyb3IuYXBwbHkoY29uc29sZSxuKX0sbi5adD1mdW5jdGlvbihuKXtmb3IodmFyIHQ9W1wiQVBJIGNhbGwgdG86XCIsbl0sZT0xO2U8YXJndW1lbnRzLmxlbmd0aDsrK2UpdC5wdXNoKFwiYXJnXCIrZStcIjpcIixhcmd1bWVudHNbZV0pO3RoaXMubG9nLmFwcGx5KHRoaXMsdCl9LG4uJHQ9ZnVuY3Rpb24oKXt2YXIgbj1bXCJUcmFjZSBsb2c6XCJdO24ucHVzaC5hcHBseShuLEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cykpLHRoaXMubG9nLmFwcGx5KHRoaXMsbil9LG4ubmU9ZnVuY3Rpb24obix0KXt2YXIgZT1bXCJEZXByZWNhdGVkIEFQSTpcIixuLFwiaXMgZGVwcmVjYXRlZCBhbmQgd2lsbCBiZSBldmVudHVhbGx5IHJlbW92ZWQuXCJdO3QmJmUucHVzaChcIlVzZVwiLHQsXCJpbnN0ZWFkLlwiKSx0aGlzLndhcm4uYXBwbHkodGhpcyxlKX0sbi50ZT1mdW5jdGlvbigpe3JldHVybiByfX19LHt9XSwxOTpbZnVuY3Rpb24obix0LGUpe3ZhciByPXt9LHM9XCJ1bmRlZmluZWRcIjtyLmluZGV4T2Y9ZnVuY3Rpb24oZSxuKXt2YXIgaT0tMTtyZXR1cm4gci5mb3JFYWNoKG4sZnVuY3Rpb24obix0KXtuPT1lJiYoaT10KX0pLGl9LHIuZm9yRWFjaD1mdW5jdGlvbihuLHQsZSl7dHJ5e2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIHQpaWYoZT10eXBlb2YgZSE9cz9lOm51bGwsXCJudW1iZXJcIiE9dHlwZW9mIG4ubGVuZ3RofHx0eXBlb2YgblswXT09cyl7dmFyIGk9dHlwZW9mIG4uX19wcm90b19fIT1zO2Zvcih2YXIgciBpbiBuKW4uaGFzT3duUHJvcGVydHkocikmJighaXx8aSYmdHlwZW9mIG4uX19wcm90b19fW3JdPT1zKSYmXCJmdW5jdGlvblwiIT10eXBlb2YgbltyXSYmdC5jYWxsKGUsbltyXSxyKX1lbHNlIGZvcih2YXIgbz0wLHU9bi5sZW5ndGg7bzx1O28rKyl0LmNhbGwoZSxuW29dLG8pfWNhdGNoKG4pe319LGUuaW5kZXhPZj1yLmluZGV4T2YsZS5mb3JFYWNoPXIuZm9yRWFjaH0se31dLDIwOltmdW5jdGlvbihuLHQsZSl7dmFyIGk9e30scj1cInVuZGVmaW5lZFwiLG89dHlwZW9mIGRvY3VtZW50IT1yJiZkb2N1bWVudHx8dm9pZCAwO2kuZWU9ZnVuY3Rpb24oKXtpZighbylyZXR1cm4hMTt2YXIgbj0hMTtyZXR1cm4gdHlwZW9mIG8uaGlkZGVuIT09cj9uPSEwOnR5cGVvZiBvLm1vekhpZGRlbiE9PXI/bj0hMDp0eXBlb2Ygby5tc0hpZGRlbiE9PXI/bj0hMDp0eXBlb2Ygby53ZWJraXRIaWRkZW4hPT1yJiYobj0hMCksZnVuY3Rpb24oKXtyZXR1cm4gbn19KCksaS5pZT1mdW5jdGlvbigpe2lmKCFvKXJldHVybiBudWxsO3ZhciBuLHQsZTt0eXBlb2Ygby5oaWRkZW4hPT1yPyhuPVwiaGlkZGVuXCIsdD1cInZpc2liaWxpdHljaGFuZ2VcIixlPVwidmlzaWJpbGl0eVN0YXRlXCIpOnR5cGVvZiBvLm1vekhpZGRlbiE9PXI/KG49XCJtb3pIaWRkZW5cIix0PVwibW96dmlzaWJpbGl0eWNoYW5nZVwiLGU9XCJtb3pWaXNpYmlsaXR5U3RhdGVcIik6dHlwZW9mIG8ubXNIaWRkZW4hPT1yPyhuPVwibXNIaWRkZW5cIix0PVwibXN2aXNpYmlsaXR5Y2hhbmdlXCIsZT1cIm1zVmlzaWJpbGl0eVN0YXRlXCIpOnR5cGVvZiBvLndlYmtpdEhpZGRlbiE9PXImJihuPVwid2Via2l0SGlkZGVuXCIsdD1cIndlYmtpdHZpc2liaWxpdHljaGFuZ2VcIixlPVwid2Via2l0VmlzaWJpbGl0eVN0YXRlXCIpO3ZhciBpPXtoaWRkZW46bixyZTp0LHN0YXRlOmV9O3JldHVybiBmdW5jdGlvbigpe3JldHVybiBpfX0oKSxpLm9lPWZ1bmN0aW9uKCl7aWYoIW8pcmV0dXJuIG51bGw7dmFyIG49aS5pZSgpO3JldHVybiBmdW5jdGlvbigpe3JldHVybiBvW24uaGlkZGVuXX19KCksaS51ZT1mdW5jdGlvbigpe2lmKCFuYXZpZ2F0b3IpcmV0dXJuXCJcIjt2YXIgbix0LGU9bmF2aWdhdG9yLnVzZXJBZ2VudHx8XCJcIixpPW5hdmlnYXRvci5hcHBOYW1lfHxcIlwiO3JldHVybi0xIT0odD1lLmluZGV4T2YoXCJPcGVyYVwiKSl8fC0xIT0odD1lLmluZGV4T2YoXCJPUFIvXCIpKT9pPVwiT3BlcmFcIjotMSE9KHQ9ZS5pbmRleE9mKFwiQW5kcm9pZFwiKSk/aT1cIkFuZHJvaWRcIjotMSE9KHQ9ZS5pbmRleE9mKFwiQ2hyb21lXCIpKT9pPVwiQ2hyb21lXCI6LTEhPSh0PWUuaW5kZXhPZihcIlNhZmFyaVwiKSk/aT1cIlNhZmFyaVwiOi0xIT0odD1lLmluZGV4T2YoXCJGaXJlZm94XCIpKT9pPVwiRmlyZWZveFwiOi0xIT0odD1lLmluZGV4T2YoXCJJRU1vYmlsZVwiKSk/aT1cIkludGVybmV0IEV4cGxvcmVyIE1vYmlsZVwiOlwiTWljcm9zb2Z0IEludGVybmV0IEV4cGxvcmVyXCI9PWl8fFwiTmV0c2NhcGVcIj09aT9pPVwiSW50ZXJuZXQgRXhwbG9yZXJcIjoobj1lLmxhc3RJbmRleE9mKFwiIFwiKSsxKTwodD1lLmxhc3RJbmRleE9mKFwiL1wiKSk/KGk9ZS5zdWJzdHJpbmcobix0KSkudG9Mb3dlckNhc2UoKT09aS50b1VwcGVyQ2FzZSgpJiYoaT1uYXZpZ2F0b3IuYXBwTmFtZSk6aT1cInVua25vd25cIixpfSxpLnNlPWZ1bmN0aW9uKCl7aWYoIW5hdmlnYXRvcilyZXR1cm5cIlwiO3ZhciBuLHQsZSxpPW5hdmlnYXRvci51c2VyQWdlbnR8fFwiXCIscj1uYXZpZ2F0b3IuYXBwTmFtZXx8XCJcIixvPW5hdmlnYXRvci5hcHBWZXJzaW9uP1wiXCIrcGFyc2VGbG9hdChuYXZpZ2F0b3IuYXBwVmVyc2lvbik6XCJcIjtyZXR1cm4tMSE9KHQ9aS5pbmRleE9mKFwiT3BlcmFcIikpPyhvPWkuc3Vic3RyaW5nKHQrNiksLTEhPSh0PWkuaW5kZXhPZihcIlZlcnNpb25cIikpJiYobz1pLnN1YnN0cmluZyh0KzgpKSk6LTEhPSh0PWkuaW5kZXhPZihcIk9QUi9cIikpP289aS5zdWJzdHJpbmcodCs0KTotMSE9KHQ9aS5pbmRleE9mKFwiQW5kcm9pZFwiKSk/bz1pLnN1YnN0cmluZyh0KzExKTotMSE9KHQ9aS5pbmRleE9mKFwiQ2hyb21lXCIpKT9vPWkuc3Vic3RyaW5nKHQrNyk6LTEhPSh0PWkuaW5kZXhPZihcIlNhZmFyaVwiKSk/KG89aS5zdWJzdHJpbmcodCs3KSwtMSE9KHQ9aS5pbmRleE9mKFwiVmVyc2lvblwiKSkmJihvPWkuc3Vic3RyaW5nKHQrOCkpKTotMSE9KHQ9aS5pbmRleE9mKFwiRmlyZWZveFwiKSk/bz1pLnN1YnN0cmluZyh0KzgpOlwiTWljcm9zb2Z0IEludGVybmV0IEV4cGxvcmVyXCI9PXI/bnVsbCE9bmV3IFJlZ0V4cChcIk1TSUUgKFswLTldezEsfVsuMC05XXswLH0pXCIpLmV4ZWMoaSkmJihvPXBhcnNlRmxvYXQoUmVnRXhwLiQxKSk6XCJOZXRzY2FwZVwiPT1yP251bGwhPW5ldyBSZWdFeHAoXCJUcmlkZW50Ly4qcnY6KFswLTldezEsfVsuMC05XXswLH0pXCIpLmV4ZWMoaSkmJihvPXBhcnNlRmxvYXQoUmVnRXhwLiQxKSk6bz1pLmxhc3RJbmRleE9mKFwiIFwiKSsxPCh0PWkubGFzdEluZGV4T2YoXCIvXCIpKT9pLnN1YnN0cmluZyh0KzEpOlwidW5rbm93blwiLC0xIT0oZT0obz1vLnRvU3RyaW5nKCkpLmluZGV4T2YoXCI7XCIpKSYmKG89by5zdWJzdHJpbmcoMCxlKSksLTEhPShlPW8uaW5kZXhPZihcIiBcIikpJiYobz1vLnN1YnN0cmluZygwLGUpKSwtMSE9KGU9by5pbmRleE9mKFwiKVwiKSkmJihvPW8uc3Vic3RyaW5nKDAsZSkpLG49cGFyc2VJbnQoXCJcIitvLDEwKSxpc05hTihuKSYmKG89XCJcIitwYXJzZUZsb2F0KG5hdmlnYXRvci5hcHBWZXJzaW9uKSksb30saS5KdD1mdW5jdGlvbigpe3JldHVybiB0eXBlb2Ygd2luZG93IT1yJiZ3aW5kb3cuYWUsITB9LGkuZmU9ZnVuY3Rpb24oKXtyZXR1cm4gdHlwZW9mIHdpbmRvdyE9ciYmb30saS5jZT1mdW5jdGlvbigpe3JldHVybiEhbyYmXCJzXCI9PT1vLmxvY2F0aW9uLmhyZWYuY2hhckF0KDQpfSx0LmV4cG9ydHMuZWU9aS5lZSx0LmV4cG9ydHMuaWU9aS5pZSx0LmV4cG9ydHMub2U9aS5vZSx0LmV4cG9ydHMudWU9aS51ZSx0LmV4cG9ydHMuc2U9aS5zZSx0LmV4cG9ydHMuSnQ9aS5KdCx0LmV4cG9ydHMuZmU9aS5mZSx0LmV4cG9ydHMuY2U9aS5jZX0se31dLDIxOltmdW5jdGlvbihuLHQsZSl7dmFyIGkscj1yfHx7fSxvPVwidW5kZWZpbmVkXCI7ci5sZT0oaT0xLGZ1bmN0aW9uKCl7cmV0dXJuK25ldyBEYXRlK1wiX1wiK2krK30pLHIuanQ9ZnVuY3Rpb24obil7cmV0dXJuIG51bGw9PW58fFwiXCI9PT1ufHxuIGluc3RhbmNlb2YgQXJyYXkmJjA9PT1uLmxlbmd0aH0sci5sdD1mdW5jdGlvbihuKXtyZXR1cm4hdGhpcy5qdChuKX0sci5wZT1mdW5jdGlvbihuLHQpe3JldHVybiB0PXRoaXMudG4odCk/dDpcIlwiLHRoaXMudG4obik/bjp0fSxyLnZlPWZ1bmN0aW9uKG4pe3JldHVybiB0eXBlb2YgbiE9byYmKFwic3RyaW5nXCI9PXR5cGVvZiBuP1widHJ1ZVwiPT09KG49bi50b0xvd2VyQ2FzZSgpKXx8XCIxXCI9PT1ufHxcIm9uXCI9PT1uOiEhbil9LHIuenQ9ZnVuY3Rpb24obix0LGUsaSxyKXtpZih0PDB8fGk8MHx8dCtyPm4ubGVuZ3RofHxpK3I+ZS5sZW5ndGgpcmV0dXJuITE7Zm9yKDswPD0tLXI7KXtpZihuLmNoYXJBdCh0KyspIT1lLmNoYXJBdChpKyspKXJldHVybiExfXJldHVybiEwfSxyLnRuPWZ1bmN0aW9uKG4pe3JldHVybiB0eXBlb2YgbiE9byYmbnVsbCE9bn0sdC5leHBvcnRzLnRuPXIudG4sdC5leHBvcnRzLnp0PXIuenQsdC5leHBvcnRzLnZlPXIudmUsdC5leHBvcnRzLnBlPXIucGUsdC5leHBvcnRzLmx0PXIubHQsdC5leHBvcnRzLmp0PXIuanQsdC5leHBvcnRzLmxlPXIubGV9LHt9XSwyMjpbZnVuY3Rpb24obix0LGUpe3ZhciBpPXt9O2kuZGU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBvKG4sdCl7dmFyIGU9blswXSxpPW5bMV0scj1uWzJdLG89blszXTtpPWMoaT1jKGk9YyhpPWMoaT1mKGk9ZihpPWYoaT1mKGk9YShpPWEoaT1hKGk9YShpPXUoaT11KGk9dShpPXUoaSxyPXUocixvPXUobyxlPXUoZSxpLHIsbyx0WzBdLDcsLTY4MDg3NjkzNiksaSxyLHRbMV0sMTIsLTM4OTU2NDU4NiksZSxpLHRbMl0sMTcsNjA2MTA1ODE5KSxvLGUsdFszXSwyMiwtMTA0NDUyNTMzMCkscj11KHIsbz11KG8sZT11KGUsaSxyLG8sdFs0XSw3LC0xNzY0MTg4OTcpLGkscix0WzVdLDEyLDEyMDAwODA0MjYpLGUsaSx0WzZdLDE3LC0xNDczMjMxMzQxKSxvLGUsdFs3XSwyMiwtNDU3MDU5ODMpLHI9dShyLG89dShvLGU9dShlLGkscixvLHRbOF0sNywxNzcwMDM1NDE2KSxpLHIsdFs5XSwxMiwtMTk1ODQxNDQxNyksZSxpLHRbMTBdLDE3LC00MjA2MyksbyxlLHRbMTFdLDIyLC0xOTkwNDA0MTYyKSxyPXUocixvPXUobyxlPXUoZSxpLHIsbyx0WzEyXSw3LDE4MDQ2MDM2ODIpLGkscix0WzEzXSwxMiwtNDAzNDExMDEpLGUsaSx0WzE0XSwxNywtMTUwMjAwMjI5MCksbyxlLHRbMTVdLDIyLDEyMzY1MzUzMjkpLHI9YShyLG89YShvLGU9YShlLGkscixvLHRbMV0sNSwtMTY1Nzk2NTEwKSxpLHIsdFs2XSw5LC0xMDY5NTAxNjMyKSxlLGksdFsxMV0sMTQsNjQzNzE3NzEzKSxvLGUsdFswXSwyMCwtMzczODk3MzAyKSxyPWEocixvPWEobyxlPWEoZSxpLHIsbyx0WzVdLDUsLTcwMTU1ODY5MSksaSxyLHRbMTBdLDksMzgwMTYwODMpLGUsaSx0WzE1XSwxNCwtNjYwNDc4MzM1KSxvLGUsdFs0XSwyMCwtNDA1NTM3ODQ4KSxyPWEocixvPWEobyxlPWEoZSxpLHIsbyx0WzldLDUsNTY4NDQ2NDM4KSxpLHIsdFsxNF0sOSwtMTAxOTgwMzY5MCksZSxpLHRbM10sMTQsLTE4NzM2Mzk2MSksbyxlLHRbOF0sMjAsMTE2MzUzMTUwMSkscj1hKHIsbz1hKG8sZT1hKGUsaSxyLG8sdFsxM10sNSwtMTQ0NDY4MTQ2NyksaSxyLHRbMl0sOSwtNTE0MDM3ODQpLGUsaSx0WzddLDE0LDE3MzUzMjg0NzMpLG8sZSx0WzEyXSwyMCwtMTkyNjYwNzczNCkscj1mKHIsbz1mKG8sZT1mKGUsaSxyLG8sdFs1XSw0LC0zNzg1NTgpLGkscix0WzhdLDExLC0yMDIyNTc0NDYzKSxlLGksdFsxMV0sMTYsMTgzOTAzMDU2MiksbyxlLHRbMTRdLDIzLC0zNTMwOTU1Nikscj1mKHIsbz1mKG8sZT1mKGUsaSxyLG8sdFsxXSw0LC0xNTMwOTkyMDYwKSxpLHIsdFs0XSwxMSwxMjcyODkzMzUzKSxlLGksdFs3XSwxNiwtMTU1NDk3NjMyKSxvLGUsdFsxMF0sMjMsLTEwOTQ3MzA2NDApLHI9ZihyLG89ZihvLGU9ZihlLGkscixvLHRbMTNdLDQsNjgxMjc5MTc0KSxpLHIsdFswXSwxMSwtMzU4NTM3MjIyKSxlLGksdFszXSwxNiwtNzIyNTIxOTc5KSxvLGUsdFs2XSwyMyw3NjAyOTE4OSkscj1mKHIsbz1mKG8sZT1mKGUsaSxyLG8sdFs5XSw0LC02NDAzNjQ0ODcpLGkscix0WzEyXSwxMSwtNDIxODE1ODM1KSxlLGksdFsxNV0sMTYsNTMwNzQyNTIwKSxvLGUsdFsyXSwyMywtOTk1MzM4NjUxKSxyPWMocixvPWMobyxlPWMoZSxpLHIsbyx0WzBdLDYsLTE5ODYzMDg0NCksaSxyLHRbN10sMTAsMTEyNjg5MTQxNSksZSxpLHRbMTRdLDE1LC0xNDE2MzU0OTA1KSxvLGUsdFs1XSwyMSwtNTc0MzQwNTUpLHI9YyhyLG89YyhvLGU9YyhlLGkscixvLHRbMTJdLDYsMTcwMDQ4NTU3MSksaSxyLHRbM10sMTAsLTE4OTQ5ODY2MDYpLGUsaSx0WzEwXSwxNSwtMTA1MTUyMyksbyxlLHRbMV0sMjEsLTIwNTQ5MjI3OTkpLHI9YyhyLG89YyhvLGU9YyhlLGkscixvLHRbOF0sNiwxODczMzEzMzU5KSxpLHIsdFsxNV0sMTAsLTMwNjExNzQ0KSxlLGksdFs2XSwxNSwtMTU2MDE5ODM4MCksbyxlLHRbMTNdLDIxLDEzMDkxNTE2NDkpLHI9YyhyLG89YyhvLGU9YyhlLGkscixvLHRbNF0sNiwtMTQ1NTIzMDcwKSxpLHIsdFsxMV0sMTAsLTExMjAyMTAzNzkpLGUsaSx0WzJdLDE1LDcxODc4NzI1OSksbyxlLHRbOV0sMjEsLTM0MzQ4NTU1MSksblswXT1wKGUsblswXSksblsxXT1wKGksblsxXSksblsyXT1wKHIsblsyXSksblszXT1wKG8sblszXSl9ZnVuY3Rpb24gcyhuLHQsZSxpLHIsbyl7cmV0dXJuIHQ9cChwKHQsbikscChpLG8pKSxwKHQ8PHJ8dD4+PjMyLXIsZSl9ZnVuY3Rpb24gdShuLHQsZSxpLHIsbyx1KXtyZXR1cm4gcyh0JmV8fnQmaSxuLHQscixvLHUpfWZ1bmN0aW9uIGEobix0LGUsaSxyLG8sdSl7cmV0dXJuIHModCZpfGUmfmksbix0LHIsbyx1KX1mdW5jdGlvbiBmKG4sdCxlLGkscixvLHUpe3JldHVybiBzKHReZV5pLG4sdCxyLG8sdSl9ZnVuY3Rpb24gYyhuLHQsZSxpLHIsbyx1KXtyZXR1cm4gcyhlXih0fH5pKSxuLHQscixvLHUpfWZ1bmN0aW9uIGwobil7dmFyIHQsZT1bXTtmb3IodD0wO3Q8NjQ7dCs9NCllW3Q+PjJdPW4uY2hhckNvZGVBdCh0KSsobi5jaGFyQ29kZUF0KHQrMSk8PDgpKyhuLmNoYXJDb2RlQXQodCsyKTw8MTYpKyhuLmNoYXJDb2RlQXQodCszKTw8MjQpO3JldHVybiBlfXZhciBpPVwiMDEyMzQ1Njc4OWFiY2RlZlwiLnNwbGl0KFwiXCIpO2Z1bmN0aW9uIGUobil7Zm9yKHZhciB0PVwiXCIsZT0wO2U8NDtlKyspdCs9aVtuPj44KmUrNCYxNV0raVtuPj44KmUmMTVdO3JldHVybiB0fWZ1bmN0aW9uIG4obil7cmV0dXJuIGZ1bmN0aW9uKG4pe2Zvcih2YXIgdD0wO3Q8bi5sZW5ndGg7dCsrKW5bdF09ZShuW3RdKTtyZXR1cm4gbi5qb2luKFwiXCIpfShmdW5jdGlvbihuKXt2YXIgdCxlPW4ubGVuZ3RoLGk9WzE3MzI1ODQxOTMsLTI3MTczMzg3OSwtMTczMjU4NDE5NCwyNzE3MzM4NzhdO2Zvcih0PTY0O3Q8PW4ubGVuZ3RoO3QrPTY0KW8oaSxsKG4uc3Vic3RyaW5nKHQtNjQsdCkpKTtuPW4uc3Vic3RyaW5nKHQtNjQpO3ZhciByPVswLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwXTtmb3IodD0wO3Q8bi5sZW5ndGg7dCsrKXJbdD4+Ml18PW4uY2hhckNvZGVBdCh0KTw8KHQlNDw8Myk7aWYoclt0Pj4yXXw9MTI4PDwodCU0PDwzKSw1NTx0KWZvcihvKGksciksdD0wO3Q8MTY7dCsrKXJbdF09MDtyZXR1cm4gclsxNF09OCplLG8oaSxyKSxpfShuKSl9ZnVuY3Rpb24gcChuLHQpe3JldHVybiBuK3QmNDI5NDk2NzI5NX1pZihcIjVkNDE0MDJhYmM0YjJhNzZiOTcxOWQ5MTEwMTdjNTkyXCIhPW4oXCJoZWxsb1wiKSlmdW5jdGlvbiBwKG4sdCl7dmFyIGU9KDY1NTM1Jm4pKyg2NTUzNSZ0KTtyZXR1cm4obj4+MTYpKyh0Pj4xNikrKGU+PjE2KTw8MTZ8NjU1MzUmZX1yZXR1cm4gbn0oKSx0LmV4cG9ydHM9aS5kZX0se31dLDIzOltmdW5jdGlvbihuLHQsZSl7dmFyIG89ZnVuY3Rpb24obil7aWYoXCJvYmplY3RcIiE9dHlwZW9mIG4pcmV0dXJuIG47dmFyIHQ7aWYobiBpbnN0YW5jZW9mIEFycmF5KXt0PVtdO2Zvcih2YXIgZT0wLGk9bi5sZW5ndGg7ZTxpO2UrKyl0W2VdPW8obltlXSk7cmV0dXJuIHR9Zm9yKHZhciByIGluIHQ9e30sbiluLmhhc093blByb3BlcnR5KHIpJiYodFtyXT1uW3JdKTtyZXR1cm4gdH07dC5leHBvcnRzPW99LHt9XSwyNDpbZnVuY3Rpb24obix0LGUpe3ZhciBpPWl8fHt9O2kuZmlsdGVyPWZ1bmN0aW9uKG4sdCl7dmFyIGU9e307Zm9yKHZhciBpIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShpKSYmbih0W2ldKSYmKGVbaV09dFtpXSk7cmV0dXJuIGV9LGkuZXh0ZW5kPWZ1bmN0aW9uKG4pe3ZhciB0LGU9YXJndW1lbnRzLmxlbmd0aDtuPW58fHt9O2Zvcih2YXIgaT0xO2k8ZTtpKyspaWYodD1hcmd1bWVudHNbaV0pZm9yKHZhciByIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShyKSYmKG5bcl09dFtyXSk7cmV0dXJuIG59LHQuZXhwb3J0cy5maWx0ZXI9aS5maWx0ZXIsdC5leHBvcnRzLmV4dGVuZD1pLmV4dGVuZH0se31dLDI1OltmdW5jdGlvbihuLHQsZSl7dmFyIEs9bigxNyksaT17fTtpLmVuY3J5cHQ9ZnVuY3Rpb24oKXt2YXIgaT1cIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky9cIix1PWZ1bmN0aW9uKG4sdCl7dmFyIGU9aS5pbmRleE9mKG4uY2hhckF0KHQpKTtpZigtMT09PWUpdGhyb3cgbmV3IEVycm9yO3JldHVybiBlfSxyPWZ1bmN0aW9uKG4pe3ZhciB0LGUsaSxyPShuPVwiXCIrbikubGVuZ3RoO2lmKDA9PT1yKXJldHVybiBuO2lmKHIlNCE9MCl0aHJvdyBuZXcgRXJyb3I7dD0wLFwiPVwiPT09bi5jaGFyQXQoci0xKSYmKHQ9MSxcIj1cIj09PW4uY2hhckF0KHItMikmJih0PTIpLHItPTQpO3ZhciBvPVtdO2ZvcihlPTA7ZTxyO2UrPTQpaT11KG4sZSk8PDE4fHUobixlKzEpPDwxMnx1KG4sZSsyKTw8Nnx1KG4sZSszKSxvLnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZShpPj4xNixpPj44JjI1NSwyNTUmaSkpO3N3aXRjaCh0KXtjYXNlIDE6aT11KG4sZSk8PDE4fHUobixlKzEpPDwxMnx1KG4sZSsyKTw8NixvLnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZShpPj4xNixpPj44JjI1NSkpO2JyZWFrO2Nhc2UgMjppPXUobixlKTw8MTh8dShuLGUrMSk8PDEyLG8ucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKGk+PjE2KSl9cmV0dXJuIG8uam9pbihcIlwiKX07ZnVuY3Rpb24gdyhuLHQsZSl7bnVsbCE9biYmKFwibnVtYmVyXCI9PXR5cGVvZiBuP3RoaXMuaGUobix0LGUpOm51bGw9PXQmJlwic3RyaW5nXCIhPXR5cGVvZiBuP3RoaXMuX2UobiwyNTYpOnRoaXMuX2Uobix0KSl9ZnVuY3Rpb24geSgpe3JldHVybiBuZXcgdyhudWxsKX13LnByb3RvdHlwZS5nZT1mdW5jdGlvbihuLHQsZSxpLHIsbyl7Zm9yKHZhciB1PTE2MzgzJnQscz10Pj4xNDswPD0tLW87KXt2YXIgYT0xNjM4MyZ0aGlzW25dLGY9dGhpc1tuKytdPj4xNCxjPXMqYStmKnU7cj0oKGE9dSphKygoMTYzODMmYyk8PDE0KStlW2ldK3IpPj4yOCkrKGM+PjE0KStzKmYsZVtpKytdPTI2ODQzNTQ1NSZhfXJldHVybiByfSx3LnByb3RvdHlwZS5tZT0yOCx3LnByb3RvdHlwZS53ZT0yNjg0MzU0NTUsdy5wcm90b3R5cGUueWU9MTw8Mjg7dy5wcm90b3R5cGUuYmU9TWF0aC5wb3coMiw1Miksdy5wcm90b3R5cGUuSWU9MjQsdy5wcm90b3R5cGUuU2U9NDt2YXIgbix0LGU9XCIwMTIzNDU2Nzg5YWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXpcIixvPVtdO2ZvcihuPVwiMFwiLmNoYXJDb2RlQXQoMCksdD0wO3Q8PTk7Kyt0KW9bbisrXT10O2ZvcihuPVwiYVwiLmNoYXJDb2RlQXQoMCksdD0xMDt0PDM2OysrdClvW24rK109dDtmb3Iobj1cIkFcIi5jaGFyQ29kZUF0KDApLHQ9MTA7dDwzNjsrK3Qpb1tuKytdPXQ7ZnVuY3Rpb24gYShuKXtyZXR1cm4gZS5jaGFyQXQobil9ZnVuY3Rpb24gZihuLHQpe3ZhciBlPW9bbi5jaGFyQ29kZUF0KHQpXTtyZXR1cm4gbnVsbD09ZT8tMTplfWZ1bmN0aW9uIF8obil7dmFyIHQ9eSgpO3JldHVybiB0LlBlKG4pLHR9ZnVuY3Rpb24gYihuKXt2YXIgdCxlPTE7cmV0dXJuIDAhPSh0PW4+Pj4xNikmJihuPXQsZSs9MTYpLDAhPSh0PW4+PjgpJiYobj10LGUrPTgpLDAhPSh0PW4+PjQpJiYobj10LGUrPTQpLDAhPSh0PW4+PjIpJiYobj10LGUrPTIpLDAhPSh0PW4+PjEpJiYobj10LGUrPTEpLGV9ZnVuY3Rpb24gZyhuKXt0aGlzLkFlPW59ZnVuY3Rpb24gbShuKXt0aGlzLkFlPW4sdGhpcy5DZT1uLmtlKCksdGhpcy5FZT0zMjc2NyZ0aGlzLkNlLHRoaXMuVGU9dGhpcy5DZT4+MTUsdGhpcy5OZT0oMTw8bi5tZS0xNSktMSx0aGlzLkxlPTIqbi5EZX1mdW5jdGlvbiBzKG4sdCl7cmV0dXJuIG4mdH1mdW5jdGlvbiBjKG4sdCl7cmV0dXJuIG58dH1mdW5jdGlvbiBsKG4sdCl7cmV0dXJuIG5edH1mdW5jdGlvbiBwKG4sdCl7cmV0dXJuIG4mfnR9ZnVuY3Rpb24gdihuKXtpZigwPT1uKXJldHVybi0xO3ZhciB0PTA7cmV0dXJuIDA9PSg2NTUzNSZuKSYmKG4+Pj0xNix0Kz0xNiksMD09KDI1NSZuKSYmKG4+Pj04LHQrPTgpLDA9PSgxNSZuKSYmKG4+Pj00LHQrPTQpLDA9PSgzJm4pJiYobj4+PTIsdCs9MiksMD09KDEmbikmJisrdCx0fWZ1bmN0aW9uIGQobil7Zm9yKHZhciB0PTA7MCE9bjspbiY9bi0xLCsrdDtyZXR1cm4gdH1mdW5jdGlvbiBoKCl7fWZ1bmN0aW9uIEkobil7cmV0dXJuIG59ZnVuY3Rpb24gUyhuKXt0aGlzLnIyPXkoKSx0aGlzLlJlPXkoKSx3Lk9ORS5NZSgyKm4uRGUsdGhpcy5yMiksdGhpcy5PZT10aGlzLnIyLldlKG4pLHRoaXMuQWU9bn1nLnByb3RvdHlwZS5WZT1mdW5jdGlvbihuKXtyZXR1cm4gbi54ZTwwfHwwPD1uLlVlKHRoaXMuQWUpP24uQmUodGhpcy5BZSk6bn0sZy5wcm90b3R5cGUuRmU9ZnVuY3Rpb24obil7cmV0dXJuIG59LGcucHJvdG90eXBlLnJlZHVjZT1mdW5jdGlvbihuKXtuLmplKHRoaXMuQWUsbnVsbCxuKX0sZy5wcm90b3R5cGUuR2U9ZnVuY3Rpb24obix0LGUpe24uS2UodCxlKSx0aGlzLnJlZHVjZShlKX0sZy5wcm90b3R5cGUucWU9ZnVuY3Rpb24obix0KXtuLkhlKHQpLHRoaXMucmVkdWNlKHQpfSxtLnByb3RvdHlwZS5WZT1mdW5jdGlvbihuKXt2YXIgdD15KCk7cmV0dXJuIG4uYWJzKCkuTWUodGhpcy5BZS5EZSx0KSx0LmplKHRoaXMuQWUsbnVsbCx0KSxuLnhlPDAmJjA8dC5VZSh3LlpFUk8pJiZ0aGlzLkFlLlllKHQsdCksdH0sbS5wcm90b3R5cGUuRmU9ZnVuY3Rpb24obil7dmFyIHQ9eSgpO3JldHVybiBuLkplKHQpLHRoaXMucmVkdWNlKHQpLHR9LG0ucHJvdG90eXBlLnJlZHVjZT1mdW5jdGlvbihuKXtmb3IoO24uRGU8PXRoaXMuTGU7KW5bbi5EZSsrXT0wO2Zvcih2YXIgdD0wO3Q8dGhpcy5BZS5EZTsrK3Qpe3ZhciBlPTMyNzY3Jm5bdF0saT1lKnRoaXMuRWUrKChlKnRoaXMuVGUrKG5bdF0+PjE1KSp0aGlzLkVlJnRoaXMuTmUpPDwxNSkmbi53ZTtmb3IobltlPXQrdGhpcy5BZS5EZV0rPXRoaXMuQWUuZ2UoMCxpLG4sdCwwLHRoaXMuQWUuRGUpO25bZV0+PW4ueWU7KW5bZV0tPW4ueWUsblsrK2VdKyt9bi56ZSgpLG4uUWUodGhpcy5BZS5EZSxuKSwwPD1uLlVlKHRoaXMuQWUpJiZuLlllKHRoaXMuQWUsbil9LG0ucHJvdG90eXBlLkdlPWZ1bmN0aW9uKG4sdCxlKXtuLktlKHQsZSksdGhpcy5yZWR1Y2UoZSl9LG0ucHJvdG90eXBlLnFlPWZ1bmN0aW9uKG4sdCl7bi5IZSh0KSx0aGlzLnJlZHVjZSh0KX0sdy5wcm90b3R5cGUuSmU9ZnVuY3Rpb24obil7Zm9yKHZhciB0PXRoaXMuRGUtMTswPD10Oy0tdCluW3RdPXRoaXNbdF07bi5EZT10aGlzLkRlLG4ueGU9dGhpcy54ZX0sdy5wcm90b3R5cGUuUGU9ZnVuY3Rpb24obil7dGhpcy5EZT0xLHRoaXMueGU9bjwwPy0xOjAsMDxuP3RoaXNbMF09bjpuPC0xP3RoaXNbMF09bitEVjp0aGlzLkRlPTB9LHcucHJvdG90eXBlLl9lPWZ1bmN0aW9uKG4sdCl7dmFyIGU7aWYoMTY9PXQpZT00O2Vsc2UgaWYoOD09dCllPTM7ZWxzZSBpZigyNTY9PXQpZT04O2Vsc2UgaWYoMj09dCllPTE7ZWxzZSBpZigzMj09dCllPTU7ZWxzZXtpZig0IT10KXJldHVybiB2b2lkIHRoaXMuWGUobix0KTtlPTJ9dGhpcy5EZT0wLHRoaXMueGU9MDtmb3IodmFyIGk9bi5sZW5ndGgscj0hMSxvPTA7MDw9LS1pOyl7dmFyIHU9OD09ZT8yNTUmbltpXTpmKG4saSk7dTwwP1wiLVwiPT1uLmNoYXJBdChpKSYmKHI9ITApOihyPSExLDA9PW8/dGhpc1t0aGlzLkRlKytdPXU6bytlPnRoaXMubWU/KHRoaXNbdGhpcy5EZS0xXXw9KHUmKDE8PHRoaXMubWUtbyktMSk8PG8sdGhpc1t0aGlzLkRlKytdPXU+PnRoaXMubWUtbyk6dGhpc1t0aGlzLkRlLTFdfD11PDxvLChvKz1lKT49dGhpcy5tZSYmKG8tPXRoaXMubWUpKX04PT1lJiYwIT0oMTI4Jm5bMF0pJiYodGhpcy54ZT0tMSwwPG8mJih0aGlzW3RoaXMuRGUtMV18PSgxPDx0aGlzLm1lLW8pLTE8PG8pKSx0aGlzLnplKCksciYmdy5aRVJPLlllKHRoaXMsdGhpcyl9LHcucHJvdG90eXBlLnplPWZ1bmN0aW9uKCl7Zm9yKHZhciBuPXRoaXMueGUmdGhpcy53ZTswPHRoaXMuRGUmJnRoaXNbdGhpcy5EZS0xXT09bjspLS10aGlzLkRlfSx3LnByb3RvdHlwZS5NZT1mdW5jdGlvbihuLHQpe3ZhciBlO2ZvcihlPXRoaXMuRGUtMTswPD1lOy0tZSl0W2Urbl09dGhpc1tlXTtmb3IoZT1uLTE7MDw9ZTstLWUpdFtlXT0wO3QuRGU9dGhpcy5EZStuLHQueGU9dGhpcy54ZX0sdy5wcm90b3R5cGUuUWU9ZnVuY3Rpb24obix0KXtmb3IodmFyIGU9bjtlPHRoaXMuRGU7KytlKXRbZS1uXT10aGlzW2VdO3QuRGU9TWF0aC5tYXgodGhpcy5EZS1uLDApLHQueGU9dGhpcy54ZX0sdy5wcm90b3R5cGUuWmU9ZnVuY3Rpb24obix0KXt2YXIgZSxpPW4ldGhpcy5tZSxyPXRoaXMubWUtaSxvPSgxPDxyKS0xLHU9TWF0aC5mbG9vcihuL3RoaXMubWUpLHM9dGhpcy54ZTw8aSZ0aGlzLndlO2ZvcihlPXRoaXMuRGUtMTswPD1lOy0tZSl0W2UrdSsxXT10aGlzW2VdPj5yfHMscz0odGhpc1tlXSZvKTw8aTtmb3IoZT11LTE7MDw9ZTstLWUpdFtlXT0wO3RbdV09cyx0LkRlPXRoaXMuRGUrdSsxLHQueGU9dGhpcy54ZSx0LnplKCl9LHcucHJvdG90eXBlLiRlPWZ1bmN0aW9uKG4sdCl7dC54ZT10aGlzLnhlO3ZhciBlPU1hdGguZmxvb3Iobi90aGlzLm1lKTtpZihlPj10aGlzLkRlKXQuRGU9MDtlbHNle3ZhciBpPW4ldGhpcy5tZSxyPXRoaXMubWUtaSxvPSgxPDxpKS0xO3RbMF09dGhpc1tlXT4+aTtmb3IodmFyIHU9ZSsxO3U8dGhpcy5EZTsrK3UpdFt1LWUtMV18PSh0aGlzW3VdJm8pPDxyLHRbdS1lXT10aGlzW3VdPj5pOzA8aSYmKHRbdGhpcy5EZS1lLTFdfD0odGhpcy54ZSZvKTw8ciksdC5EZT10aGlzLkRlLWUsdC56ZSgpfX0sdy5wcm90b3R5cGUuWWU9ZnVuY3Rpb24obix0KXtmb3IodmFyIGU9MCxpPTAscj1NYXRoLm1pbihuLkRlLHRoaXMuRGUpO2U8cjspaSs9dGhpc1tlXS1uW2VdLHRbZSsrXT1pJnRoaXMud2UsaT4+PXRoaXMubWU7aWYobi5EZTx0aGlzLkRlKXtmb3IoaS09bi54ZTtlPHRoaXMuRGU7KWkrPXRoaXNbZV0sdFtlKytdPWkmdGhpcy53ZSxpPj49dGhpcy5tZTtpKz10aGlzLnhlfWVsc2V7Zm9yKGkrPXRoaXMueGU7ZTxuLkRlOylpLT1uW2VdLHRbZSsrXT1pJnRoaXMud2UsaT4+PXRoaXMubWU7aS09bi54ZX10LnhlPWk8MD8tMTowLGk8LTE/dFtlKytdPXRoaXMueWUraTowPGkmJih0W2UrK109aSksdC5EZT1lLHQuemUoKX0sdy5wcm90b3R5cGUuS2U9ZnVuY3Rpb24obix0KXt2YXIgZT10aGlzLmFicygpLGk9bi5hYnMoKSxyPWUuRGU7Zm9yKHQuRGU9citpLkRlOzA8PS0tcjspdFtyXT0wO2ZvcihyPTA7cjxpLkRlOysrcil0W3IrZS5EZV09ZS5nZSgwLGlbcl0sdCxyLDAsZS5EZSk7dC54ZT0wLHQuemUoKSx0aGlzLnhlIT1uLnhlJiZ3LlpFUk8uWWUodCx0KX0sdy5wcm90b3R5cGUuSGU9ZnVuY3Rpb24obil7Zm9yKHZhciB0PXRoaXMuYWJzKCksZT1uLkRlPTIqdC5EZTswPD0tLWU7KW5bZV09MDtmb3IoZT0wO2U8dC5EZS0xOysrZSl7dmFyIGk9dC5nZShlLHRbZV0sbiwyKmUsMCwxKTsobltlK3QuRGVdKz10LmdlKGUrMSwyKnRbZV0sbiwyKmUrMSxpLHQuRGUtZS0xKSk+PXQueWUmJihuW2UrdC5EZV0tPXQueWUsbltlK3QuRGUrMV09MSl9MDxuLkRlJiYobltuLkRlLTFdKz10LmdlKGUsdFtlXSxuLDIqZSwwLDEpKSxuLnhlPTAsbi56ZSgpfSx3LnByb3RvdHlwZS5qZT1mdW5jdGlvbihuLHQsZSl7dmFyIGk9bi5hYnMoKTtpZighKGkuRGU8PTApKXt2YXIgcj10aGlzLmFicygpO2lmKHIuRGU8aS5EZSlyZXR1cm4gbnVsbCE9dCYmdC5QZSgwKSx2b2lkKG51bGwhPWUmJnRoaXMuSmUoZSkpO251bGw9PWUmJihlPXkoKSk7dmFyIG89eSgpLHU9dGhpcy54ZSxzPW4ueGUsYT10aGlzLm1lLWIoaVtpLkRlLTFdKTswPGE/KGkuWmUoYSxvKSxyLlplKGEsZSkpOihpLkplKG8pLHIuSmUoZSkpO3ZhciBmPW8uRGUsYz1vW2YtMV07aWYoMCE9Yyl7dmFyIGw9YyooMTw8dGhpcy5JZSkrKDE8Zj9vW2YtMl0+PnRoaXMuU2U6MCkscD10aGlzLmJlL2wsdj0oMTw8dGhpcy5JZSkvbCxkPTE8PHRoaXMuU2UsaD1lLkRlLF89aC1mLGc9bnVsbD09dD95KCk6dDtmb3Ioby5NZShfLGcpLDA8PWUuVWUoZykmJihlW2UuRGUrK109MSxlLlllKGcsZSkpLHcuT05FLk1lKGYsZyksZy5ZZShvLG8pO28uRGU8Zjspb1tvLkRlKytdPTA7Zm9yKDswPD0tLV87KXt2YXIgbT1lWy0taF09PWM/dGhpcy53ZTpNYXRoLmZsb29yKGVbaF0qcCsoZVtoLTFdK2QpKnYpO2lmKChlW2hdKz1vLmdlKDAsbSxlLF8sMCxmKSk8bSlmb3Ioby5NZShfLGcpLGUuWWUoZyxlKTtlW2hdPC0tbTspZS5ZZShnLGUpfW51bGwhPXQmJihlLlFlKGYsdCksdSE9cyYmdy5aRVJPLlllKHQsdCkpLGUuRGU9ZixlLnplKCksMDxhJiZlLiRlKGEsZSksdTwwJiZ3LlpFUk8uWWUoZSxlKX19fSx3LnByb3RvdHlwZS5rZT1mdW5jdGlvbigpe2lmKHRoaXMuRGU8MSlyZXR1cm4gMDt2YXIgbj10aGlzWzBdO2lmKDA9PSgxJm4pKXJldHVybiAwO3ZhciB0PTMmbjtyZXR1cm4gMDwodD0odD0odD0odD10KigyLSgxNSZuKSp0KSYxNSkqKDItKDI1NSZuKSp0KSYyNTUpKigyLSgoNjU1MzUmbikqdCY2NTUzNSkpJjY1NTM1KSooMi1uKnQldGhpcy55ZSkldGhpcy55ZSk/dGhpcy55ZS10Oi10fSx3LnByb3RvdHlwZS5uaT1mdW5jdGlvbigpe3JldHVybiAwPT0oMDx0aGlzLkRlPzEmdGhpc1swXTp0aGlzLnhlKX0sdy5wcm90b3R5cGUuZXhwPWZ1bmN0aW9uKG4sdCl7aWYoNDI5NDk2NzI5NTxufHxuPDEpcmV0dXJuIHcuT05FO3ZhciBlPXkoKSxpPXkoKSxyPXQuVmUodGhpcyksbz1iKG4pLTE7Zm9yKHIuSmUoZSk7MDw9LS1vOylpZih0LnFlKGUsaSksMDwobiYxPDxvKSl0LkdlKGkscixlKTtlbHNle3ZhciB1PWU7ZT1pLGk9dX1yZXR1cm4gdC5GZShlKX0sdy5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24obil7aWYodGhpcy54ZTwwKXJldHVyblwiLVwiK3RoaXMudGkoKS50b1N0cmluZyhuKTt2YXIgdDtpZigxNj09bil0PTQ7ZWxzZSBpZig4PT1uKXQ9MztlbHNlIGlmKDI9PW4pdD0xO2Vsc2UgaWYoMzI9PW4pdD01O2Vsc2V7aWYoNCE9bilyZXR1cm4gdGhpcy5laShuKTt0PTJ9dmFyIGUsaT0oMTw8dCktMSxyPSExLG89XCJcIix1PXRoaXMuRGUscz10aGlzLm1lLXUqdGhpcy5tZSV0O2lmKDA8dS0tKWZvcihzPHRoaXMubWUmJjA8KGU9dGhpc1t1XT4+cykmJihyPSEwLG89YShlKSk7MDw9dTspczx0PyhlPSh0aGlzW3VdJigxPDxzKS0xKTw8dC1zLGV8PXRoaXNbLS11XT4+KHMrPXRoaXMubWUtdCkpOihlPXRoaXNbdV0+PihzLT10KSZpLHM8PTAmJihzKz10aGlzLm1lLC0tdSkpLDA8ZSYmKHI9ITApLHImJihvKz1hKGUpKTtyZXR1cm4gcj9vOlwiMFwifSx3LnByb3RvdHlwZS50aT1mdW5jdGlvbigpe3ZhciBuPXkoKTtyZXR1cm4gdy5aRVJPLlllKHRoaXMsbiksbn0sdy5wcm90b3R5cGUuYWJzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMueGU8MD90aGlzLnRpKCk6dGhpc30sdy5wcm90b3R5cGUuVWU9ZnVuY3Rpb24obil7dmFyIHQ9dGhpcy54ZS1uLnhlO2lmKDAhPXQpcmV0dXJuIHQ7dmFyIGU9dGhpcy5EZTtpZigwIT0odD1lLW4uRGUpKXJldHVybiB0aGlzLnhlPDA/LXQ6dDtmb3IoOzA8PS0tZTspaWYoMCE9KHQ9dGhpc1tlXS1uW2VdKSlyZXR1cm4gdDtyZXR1cm4gMH0sdy5wcm90b3R5cGUuaWk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5EZTw9MD8wOnRoaXMubWUqKHRoaXMuRGUtMSkrYih0aGlzW3RoaXMuRGUtMV1edGhpcy54ZSZ0aGlzLndlKX0sdy5wcm90b3R5cGUuQmU9ZnVuY3Rpb24obil7dmFyIHQ9eSgpO3JldHVybiB0aGlzLmFicygpLmplKG4sbnVsbCx0KSx0aGlzLnhlPDAmJjA8dC5VZSh3LlpFUk8pJiZuLlllKHQsdCksdH0sdy5wcm90b3R5cGUucmk9ZnVuY3Rpb24obix0KXt2YXIgZTtyZXR1cm4gZT1uPDI1Nnx8dC5uaSgpP25ldyBnKHQpOm5ldyBtKHQpLHRoaXMuZXhwKG4sZSl9LHcuWkVSTz1fKDApLHcuT05FPV8oMSksaC5wcm90b3R5cGUuVmU9SSxoLnByb3RvdHlwZS5GZT1JLGgucHJvdG90eXBlLkdlPWZ1bmN0aW9uKG4sdCxlKXtuLktlKHQsZSl9LGgucHJvdG90eXBlLnFlPWZ1bmN0aW9uKG4sdCl7bi5IZSh0KX0sUy5wcm90b3R5cGUuVmU9ZnVuY3Rpb24obil7aWYobi54ZTwwfHxuLkRlPjIqdGhpcy5BZS5EZSlyZXR1cm4gbi5CZSh0aGlzLkFlKTtpZihuLlVlKHRoaXMuQWUpPDApcmV0dXJuIG47dmFyIHQ9eSgpO3JldHVybiBuLkplKHQpLHRoaXMucmVkdWNlKHQpLHR9LFMucHJvdG90eXBlLkZlPWZ1bmN0aW9uKG4pe3JldHVybiBufSxTLnByb3RvdHlwZS5yZWR1Y2U9ZnVuY3Rpb24obil7Zm9yKG4uUWUodGhpcy5BZS5EZS0xLHRoaXMucjIpLG4uRGU+dGhpcy5BZS5EZSsxJiYobi5EZT10aGlzLkFlLkRlKzEsbi56ZSgpKSx0aGlzLk9lLm9pKHRoaXMucjIsdGhpcy5BZS5EZSsxLHRoaXMuUmUpLHRoaXMuQWUudWkodGhpcy5SZSx0aGlzLkFlLkRlKzEsdGhpcy5yMik7bi5VZSh0aGlzLnIyKTwwOyluLnNpKDEsdGhpcy5BZS5EZSsxKTtmb3Iobi5ZZSh0aGlzLnIyLG4pOzA8PW4uVWUodGhpcy5BZSk7KW4uWWUodGhpcy5BZSxuKX0sUy5wcm90b3R5cGUuR2U9ZnVuY3Rpb24obix0LGUpe24uS2UodCxlKSx0aGlzLnJlZHVjZShlKX0sUy5wcm90b3R5cGUucWU9ZnVuY3Rpb24obix0KXtuLkhlKHQpLHRoaXMucmVkdWNlKHQpfTt2YXIgUD1bMiwzLDUsNywxMSwxMywxNywxOSwyMywyOSwzMSwzNyw0MSw0Myw0Nyw1Myw1OSw2MSw2Nyw3MSw3Myw3OSw4Myw4OSw5NywxMDEsMTAzLDEwNywxMDksMTEzLDEyNywxMzEsMTM3LDEzOSwxNDksMTUxLDE1NywxNjMsMTY3LDE3MywxNzksMTgxLDE5MSwxOTMsMTk3LDE5OSwyMTEsMjIzLDIyNywyMjksMjMzLDIzOSwyNDEsMjUxLDI1NywyNjMsMjY5LDI3MSwyNzcsMjgxLDI4MywyOTMsMzA3LDMxMSwzMTMsMzE3LDMzMSwzMzcsMzQ3LDM0OSwzNTMsMzU5LDM2NywzNzMsMzc5LDM4MywzODksMzk3LDQwMSw0MDksNDE5LDQyMSw0MzEsNDMzLDQzOSw0NDMsNDQ5LDQ1Nyw0NjEsNDYzLDQ2Nyw0NzksNDg3LDQ5MSw0OTksNTAzLDUwOSw1MjEsNTIzLDU0MSw1NDcsNTU3LDU2Myw1NjksNTcxLDU3Nyw1ODcsNTkzLDU5OSw2MDEsNjA3LDYxMyw2MTcsNjE5LDYzMSw2NDEsNjQzLDY0Nyw2NTMsNjU5LDY2MSw2NzMsNjc3LDY4Myw2OTEsNzAxLDcwOSw3MTksNzI3LDczMyw3MzksNzQzLDc1MSw3NTcsNzYxLDc2OSw3NzMsNzg3LDc5Nyw4MDksODExLDgyMSw4MjMsODI3LDgyOSw4MzksODUzLDg1Nyw4NTksODYzLDg3Nyw4ODEsODgzLDg4Nyw5MDcsOTExLDkxOSw5MjksOTM3LDk0MSw5NDcsOTUzLDk2Nyw5NzEsOTc3LDk4Myw5OTEsOTk3XSxBPSgxPDwyNikvUFtQLmxlbmd0aC0xXTtmdW5jdGlvbiBDKCl7dGhpcy5haT0wLHRoaXMuZmk9MCx0aGlzLmNpPVtdfXcucHJvdG90eXBlLmxpPWZ1bmN0aW9uKG4pe3JldHVybiBNYXRoLmZsb29yKE1hdGguTE4yKnRoaXMubWUvTWF0aC5sb2cobikpfSx3LnByb3RvdHlwZS5laT1mdW5jdGlvbihuKXtpZihudWxsPT1uJiYobj0xMCksMD09dGhpcy5waSgpfHxuPDJ8fDM2PG4pcmV0dXJuXCIwXCI7dmFyIHQ9dGhpcy5saShuKSxlPU1hdGgucG93KG4sdCksaT1fKGUpLHI9eSgpLG89eSgpLHU9XCJcIjtmb3IodGhpcy5qZShpLHIsbyk7MDxyLnBpKCk7KXU9KGUrby52aSgpKS50b1N0cmluZyhuKS5zdWJzdHIoMSkrdSxyLmplKGkscixvKTtyZXR1cm4gby52aSgpLnRvU3RyaW5nKG4pK3V9LHcucHJvdG90eXBlLlhlPWZ1bmN0aW9uKG4sdCl7dGhpcy5QZSgwKSxudWxsPT10JiYodD0xMCk7Zm9yKHZhciBlPXRoaXMubGkodCksaT1NYXRoLnBvdyh0LGUpLHI9ITEsbz0wLHU9MCxzPTA7czxuLmxlbmd0aDsrK3Mpe3ZhciBhPWYobixzKTthPDA/XCItXCI9PW4uY2hhckF0KHMpJiYwPT10aGlzLnBpKCkmJihyPSEwKToodT10KnUrYSwrK28+PWUmJih0aGlzLmRpKGkpLHRoaXMuc2kodSwwKSx1PW89MCkpfTA8byYmKHRoaXMuZGkoTWF0aC5wb3codCxvKSksdGhpcy5zaSh1LDApKSxyJiZ3LlpFUk8uWWUodGhpcyx0aGlzKX0sdy5wcm90b3R5cGUuaGU9ZnVuY3Rpb24obix0LGUpe2lmKFwibnVtYmVyXCI9PXR5cGVvZiB0KWlmKG48Mil0aGlzLlBlKDEpO2Vsc2UgZm9yKHRoaXMuaGUobixlKSx0aGlzLmhpKG4tMSl8fHRoaXMuX2kody5PTkUuc2hpZnRMZWZ0KG4tMSksYyx0aGlzKSx0aGlzLm5pKCkmJnRoaXMuc2koMSwwKTshdGhpcy5naSh0KTspdGhpcy5zaSgyLDApLHRoaXMuaWkoKT5uJiZ0aGlzLlllKHcuT05FLnNoaWZ0TGVmdChuLTEpLHRoaXMpO2Vsc2V7dmFyIGk9W10scj03Jm47aS5sZW5ndGg9MSsobj4+MyksdC5taShpKSwwPHI/aVswXSY9KDE8PHIpLTE6aVswXT0wLHRoaXMuX2UoaSwyNTYpfX0sdy5wcm90b3R5cGUuX2k9ZnVuY3Rpb24obix0LGUpe3ZhciBpLHIsbz1NYXRoLm1pbihuLkRlLHRoaXMuRGUpO2ZvcihpPTA7aTxvOysraSllW2ldPXQodGhpc1tpXSxuW2ldKTtpZihuLkRlPHRoaXMuRGUpe2ZvcihyPW4ueGUmdGhpcy53ZSxpPW87aTx0aGlzLkRlOysraSllW2ldPXQodGhpc1tpXSxyKTtlLkRlPXRoaXMuRGV9ZWxzZXtmb3Iocj10aGlzLnhlJnRoaXMud2UsaT1vO2k8bi5EZTsrK2kpZVtpXT10KHIsbltpXSk7ZS5EZT1uLkRlfWUueGU9dCh0aGlzLnhlLG4ueGUpLGUuemUoKX0sdy5wcm90b3R5cGUud2k9ZnVuY3Rpb24obix0KXt2YXIgZT13Lk9ORS5zaGlmdExlZnQobik7cmV0dXJuIHRoaXMuX2koZSx0LGUpLGV9LHcucHJvdG90eXBlLnlpPWZ1bmN0aW9uKG4sdCl7Zm9yKHZhciBlPTAsaT0wLHI9TWF0aC5taW4obi5EZSx0aGlzLkRlKTtlPHI7KWkrPXRoaXNbZV0rbltlXSx0W2UrK109aSZ0aGlzLndlLGk+Pj10aGlzLm1lO2lmKG4uRGU8dGhpcy5EZSl7Zm9yKGkrPW4ueGU7ZTx0aGlzLkRlOylpKz10aGlzW2VdLHRbZSsrXT1pJnRoaXMud2UsaT4+PXRoaXMubWU7aSs9dGhpcy54ZX1lbHNle2ZvcihpKz10aGlzLnhlO2U8bi5EZTspaSs9bltlXSx0W2UrK109aSZ0aGlzLndlLGk+Pj10aGlzLm1lO2krPW4ueGV9dC54ZT1pPDA/LTE6MCwwPGk/dFtlKytdPWk6aTwtMSYmKHRbZSsrXT10aGlzLnllK2kpLHQuRGU9ZSx0LnplKCl9LHcucHJvdG90eXBlLmRpPWZ1bmN0aW9uKG4pe3RoaXNbdGhpcy5EZV09dGhpcy5nZSgwLG4tMSx0aGlzLDAsMCx0aGlzLkRlKSwrK3RoaXMuRGUsdGhpcy56ZSgpfSx3LnByb3RvdHlwZS5zaT1mdW5jdGlvbihuLHQpe2lmKDAhPW4pe2Zvcig7dGhpcy5EZTw9dDspdGhpc1t0aGlzLkRlKytdPTA7Zm9yKHRoaXNbdF0rPW47dGhpc1t0XT49dGhpcy55ZTspdGhpc1t0XS09dGhpcy55ZSwrK3Q+PXRoaXMuRGUmJih0aGlzW3RoaXMuRGUrK109MCksKyt0aGlzW3RdfX0sdy5wcm90b3R5cGUudWk9ZnVuY3Rpb24obix0LGUpe3ZhciBpLHI9TWF0aC5taW4odGhpcy5EZStuLkRlLHQpO2ZvcihlLnhlPTAsZS5EZT1yOzA8cjspZVstLXJdPTA7Zm9yKGk9ZS5EZS10aGlzLkRlO3I8aTsrK3IpZVtyK3RoaXMuRGVdPXRoaXMuZ2UoMCxuW3JdLGUsciwwLHRoaXMuRGUpO2ZvcihpPU1hdGgubWluKG4uRGUsdCk7cjxpOysrcil0aGlzLmdlKDAsbltyXSxlLHIsMCx0LXIpO2UuemUoKX0sdy5wcm90b3R5cGUub2k9ZnVuY3Rpb24obix0LGUpey0tdDt2YXIgaT1lLkRlPXRoaXMuRGUrbi5EZS10O2ZvcihlLnhlPTA7MDw9LS1pOyllW2ldPTA7Zm9yKGk9TWF0aC5tYXgodC10aGlzLkRlLDApO2k8bi5EZTsrK2kpZVt0aGlzLkRlK2ktdF09dGhpcy5nZSh0LWksbltpXSxlLDAsMCx0aGlzLkRlK2ktdCk7ZS56ZSgpLGUuUWUoMSxlKX0sdy5wcm90b3R5cGUuYmk9ZnVuY3Rpb24obil7aWYobjw9MClyZXR1cm4gMDt2YXIgdD10aGlzLnllJW4sZT10aGlzLnhlPDA/bi0xOjA7aWYoMDx0aGlzLkRlKWlmKDA9PXQpZT10aGlzWzBdJW47ZWxzZSBmb3IodmFyIGk9dGhpcy5EZS0xOzA8PWk7LS1pKWU9KHQqZSt0aGlzW2ldKSVuO3JldHVybiBlfSx3LnByb3RvdHlwZS5JaT1mdW5jdGlvbihuKXt2YXIgdD10aGlzLlNpKHcuT05FKSxlPXQuUGkoKTtpZihlPD0wKXJldHVybiExO3ZhciBpPXQuQWkoZSk7KG49bisxPj4xKT5QLmxlbmd0aCYmKG49UC5sZW5ndGgpO2Zvcih2YXIgcj15KCksbz0wO288bjsrK28pe3IuUGUoUFtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqUC5sZW5ndGgpXSk7dmFyIHU9ci5DaShpLHRoaXMpO2lmKDAhPXUuVWUody5PTkUpJiYwIT11LlVlKHQpKXtmb3IodmFyIHM9MTtzKys8ZSYmMCE9dS5VZSh0KTspaWYoMD09KHU9dS5yaSgyLHRoaXMpKS5VZSh3Lk9ORSkpcmV0dXJuITE7aWYoMCE9dS5VZSh0KSlyZXR1cm4hMX19cmV0dXJuITB9LHcucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKCl7dmFyIG49eSgpO3JldHVybiB0aGlzLkplKG4pLG59LHcucHJvdG90eXBlLnZpPWZ1bmN0aW9uKCl7aWYodGhpcy54ZTwwKXtpZigxPT10aGlzLkRlKXJldHVybiB0aGlzWzBdLXRoaXMueWU7aWYoMD09dGhpcy5EZSlyZXR1cm4tMX1lbHNle2lmKDE9PXRoaXMuRGUpcmV0dXJuIHRoaXNbMF07aWYoMD09dGhpcy5EZSlyZXR1cm4gMH1yZXR1cm4odGhpc1sxXSYoMTw8MzItdGhpcy5tZSktMSk8PHRoaXMubWV8dGhpc1swXX0sdy5wcm90b3R5cGUua2k9ZnVuY3Rpb24oKXtyZXR1cm4gMD09dGhpcy5EZT90aGlzLnhlOnRoaXNbMF08PDI0Pj4yNH0sdy5wcm90b3R5cGUuRWk9ZnVuY3Rpb24oKXtyZXR1cm4gMD09dGhpcy5EZT90aGlzLnhlOnRoaXNbMF08PDE2Pj4xNn0sdy5wcm90b3R5cGUucGk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy54ZTwwPy0xOnRoaXMuRGU8PTB8fDE9PXRoaXMuRGUmJnRoaXNbMF08PTA/MDoxfSx3LnByb3RvdHlwZS5UaT1mdW5jdGlvbigpe3ZhciBuPXRoaXMuRGUsdD1bXTt0WzBdPXRoaXMueGU7dmFyIGUsaT10aGlzLm1lLW4qdGhpcy5tZSU4LHI9MDtpZigwPG4tLSlmb3IoaTx0aGlzLm1lJiYoZT10aGlzW25dPj5pKSE9KHRoaXMueGUmdGhpcy53ZSk+PmkmJih0W3IrK109ZXx0aGlzLnhlPDx0aGlzLm1lLWkpOzA8PW47KWk8OD8oZT0odGhpc1tuXSYoMTw8aSktMSk8PDgtaSxlfD10aGlzWy0tbl0+PihpKz10aGlzLm1lLTgpKTooZT10aGlzW25dPj4oaS09OCkmMjU1LGk8PTAmJihpKz10aGlzLm1lLC0tbikpLDAhPSgxMjgmZSkmJihlfD0tMjU2KSwwPT1yJiYoMTI4JnRoaXMueGUpIT0oMTI4JmUpJiYrK3IsKDA8cnx8ZSE9dGhpcy54ZSkmJih0W3IrK109ZSk7cmV0dXJuIHR9LHcucHJvdG90eXBlLk5pPWZ1bmN0aW9uKG4pe3JldHVybiAwPT10aGlzLlVlKG4pfSx3LnByb3RvdHlwZS5taW49ZnVuY3Rpb24obil7cmV0dXJuIHRoaXMuVWUobik8MD90aGlzOm59LHcucHJvdG90eXBlLm1heD1mdW5jdGlvbihuKXtyZXR1cm4gMDx0aGlzLlVlKG4pP3RoaXM6bn0sdy5wcm90b3R5cGUuTGk9ZnVuY3Rpb24obil7dmFyIHQ9eSgpO3JldHVybiB0aGlzLl9pKG4scyx0KSx0fSx3LnByb3RvdHlwZS5EaT1mdW5jdGlvbihuKXt2YXIgdD15KCk7cmV0dXJuIHRoaXMuX2kobixjLHQpLHR9LHcucHJvdG90eXBlLlJpPWZ1bmN0aW9uKG4pe3ZhciB0PXkoKTtyZXR1cm4gdGhpcy5faShuLGwsdCksdH0sdy5wcm90b3R5cGUuTWk9ZnVuY3Rpb24obil7dmFyIHQ9eSgpO3JldHVybiB0aGlzLl9pKG4scCx0KSx0fSx3LnByb3RvdHlwZS5PaT1mdW5jdGlvbigpe2Zvcih2YXIgbj15KCksdD0wO3Q8dGhpcy5EZTsrK3Qpblt0XT10aGlzLndlJn50aGlzW3RdO3JldHVybiBuLkRlPXRoaXMuRGUsbi54ZT1+dGhpcy54ZSxufSx3LnByb3RvdHlwZS5zaGlmdExlZnQ9ZnVuY3Rpb24obil7dmFyIHQ9eSgpO3JldHVybiBuPDA/dGhpcy4kZSgtbix0KTp0aGlzLlplKG4sdCksdH0sdy5wcm90b3R5cGUuQWk9ZnVuY3Rpb24obil7dmFyIHQ9eSgpO3JldHVybiBuPDA/dGhpcy5aZSgtbix0KTp0aGlzLiRlKG4sdCksdH0sdy5wcm90b3R5cGUuUGk9ZnVuY3Rpb24oKXtmb3IodmFyIG49MDtuPHRoaXMuRGU7KytuKWlmKDAhPXRoaXNbbl0pcmV0dXJuIG4qdGhpcy5tZSt2KHRoaXNbbl0pO3JldHVybiB0aGlzLnhlPDA/dGhpcy5EZSp0aGlzLm1lOi0xfSx3LnByb3RvdHlwZS5XaT1mdW5jdGlvbigpe2Zvcih2YXIgbj0wLHQ9dGhpcy54ZSZ0aGlzLndlLGU9MDtlPHRoaXMuRGU7KytlKW4rPWQodGhpc1tlXV50KTtyZXR1cm4gbn0sdy5wcm90b3R5cGUuaGk9ZnVuY3Rpb24obil7dmFyIHQ9TWF0aC5mbG9vcihuL3RoaXMubWUpO3JldHVybiB0Pj10aGlzLkRlPzAhPXRoaXMueGU6MCE9KHRoaXNbdF0mMTw8biV0aGlzLm1lKX0sdy5wcm90b3R5cGUuVmk9ZnVuY3Rpb24obil7cmV0dXJuIHRoaXMud2kobixjKX0sdy5wcm90b3R5cGUueGk9ZnVuY3Rpb24obil7cmV0dXJuIHRoaXMud2kobixwKX0sdy5wcm90b3R5cGUuVWk9ZnVuY3Rpb24obil7cmV0dXJuIHRoaXMud2kobixsKX0sdy5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKG4pe3ZhciB0PXkoKTtyZXR1cm4gdGhpcy55aShuLHQpLHR9LHcucHJvdG90eXBlLlNpPWZ1bmN0aW9uKG4pe3ZhciB0PXkoKTtyZXR1cm4gdGhpcy5ZZShuLHQpLHR9LHcucHJvdG90eXBlLm11bHRpcGx5PWZ1bmN0aW9uKG4pe3ZhciB0PXkoKTtyZXR1cm4gdGhpcy5LZShuLHQpLHR9LHcucHJvdG90eXBlLldlPWZ1bmN0aW9uKG4pe3ZhciB0PXkoKTtyZXR1cm4gdGhpcy5qZShuLHQsbnVsbCksdH0sdy5wcm90b3R5cGUuQmk9ZnVuY3Rpb24obil7dmFyIHQ9eSgpO3JldHVybiB0aGlzLmplKG4sbnVsbCx0KSx0fSx3LnByb3RvdHlwZS5GaT1mdW5jdGlvbihuKXt2YXIgdD15KCksZT15KCk7cmV0dXJuIHRoaXMuamUobix0LGUpLFt0LGVdfSx3LnByb3RvdHlwZS5DaT1mdW5jdGlvbihuLHQpe3ZhciBlLGkscj1uLmlpKCksbz1fKDEpO2lmKHI8PTApcmV0dXJuIG87ZT1yPDE4PzE6cjw0OD8zOnI8MTQ0PzQ6cjw3Njg/NTo2LGk9cjw4P25ldyBnKHQpOnQubmkoKT9uZXcgUyh0KTpuZXcgbSh0KTt2YXIgdT1bXSxzPTMsYT1lLTEsZj0oMTw8ZSktMTtpZih1WzFdPWkuVmUodGhpcyksMTxlKXt2YXIgYz15KCk7Zm9yKGkucWUodVsxXSxjKTtzPD1mOyl1W3NdPXkoKSxpLkdlKGMsdVtzLTJdLHVbc10pLHMrPTJ9dmFyIGwscCx2PW4uRGUtMSxkPSEwLGg9eSgpO2ZvcihyPWIoblt2XSktMTswPD12Oyl7Zm9yKGE8PXI/bD1uW3ZdPj5yLWEmZjoobD0oblt2XSYoMTw8cisxKS0xKTw8YS1yLDA8diYmKGx8PW5bdi0xXT4+dGhpcy5tZStyLWEpKSxzPWU7MD09KDEmbCk7KWw+Pj0xLC0tcztpZigoci09cyk8MCYmKHIrPXRoaXMubWUsLS12KSxkKXVbbF0uSmUobyksZD0hMTtlbHNle2Zvcig7MTxzOylpLnFlKG8saCksaS5xZShoLG8pLHMtPTI7MDxzP2kucWUobyxoKToocD1vLG89aCxoPXApLGkuR2UoaCx1W2xdLG8pfWZvcig7MDw9diYmMD09KG5bdl0mMTw8cik7KWkucWUobyxoKSxwPW8sbz1oLGg9cCwtLXI8MCYmKHI9dGhpcy5tZS0xLC0tdil9cmV0dXJuIGkuRmUobyl9LHcucHJvdG90eXBlLmppPWZ1bmN0aW9uKG4pe3ZhciB0PW4ubmkoKTtpZih0aGlzLm5pKCkmJnR8fDA9PW4ucGkoKSlyZXR1cm4gdy5aRVJPO2Zvcih2YXIgZT1uLmNsb25lKCksaT10aGlzLmNsb25lKCkscj1fKDEpLG89XygwKSx1PV8oMCkscz1fKDEpOzAhPWUucGkoKTspe2Zvcig7ZS5uaSgpOyllLiRlKDEsZSksdD8oci5uaSgpJiZvLm5pKCl8fChyLnlpKHRoaXMsciksby5ZZShuLG8pKSxyLiRlKDEscikpOm8ubmkoKXx8by5ZZShuLG8pLG8uJGUoMSxvKTtmb3IoO2kubmkoKTspaS4kZSgxLGkpLHQ/KHUubmkoKSYmcy5uaSgpfHwodS55aSh0aGlzLHUpLHMuWWUobixzKSksdS4kZSgxLHUpKTpzLm5pKCl8fHMuWWUobixzKSxzLiRlKDEscyk7MDw9ZS5VZShpKT8oZS5ZZShpLGUpLHQmJnIuWWUodSxyKSxvLlllKHMsbykpOihpLlllKGUsaSksdCYmdS5ZZShyLHUpLHMuWWUobyxzKSl9cmV0dXJuIDAhPWkuVWUody5PTkUpP3cuWkVSTzowPD1zLlVlKG4pP3MuU2kobik6cy5waSgpPDA/KHMueWkobixzKSxzLnBpKCk8MD9zLmFkZChuKTpzKTpzfSx3LnByb3RvdHlwZS5wb3c9ZnVuY3Rpb24obil7cmV0dXJuIHRoaXMuZXhwKG4sbmV3IGgpfSx3LnByb3RvdHlwZS5HaT1mdW5jdGlvbihuKXt2YXIgdD10aGlzLnhlPDA/dGhpcy50aSgpOnRoaXMuY2xvbmUoKSxlPW4ueGU8MD9uLnRpKCk6bi5jbG9uZSgpO2lmKHQuVWUoZSk8MCl7dmFyIGk9dDt0PWUsZT1pfXZhciByPXQuUGkoKSxvPWUuUGkoKTtpZihvPDApcmV0dXJuIHQ7Zm9yKHI8byYmKG89ciksMDxvJiYodC4kZShvLHQpLGUuJGUobyxlKSk7MDx0LnBpKCk7KTA8KHI9dC5QaSgpKSYmdC4kZShyLHQpLDA8KHI9ZS5QaSgpKSYmZS4kZShyLGUpLDA8PXQuVWUoZSk/KHQuWWUoZSx0KSx0LiRlKDEsdCkpOihlLlllKHQsZSksZS4kZSgxLGUpKTtyZXR1cm4gMDxvJiZlLlplKG8sZSksZX0sdy5wcm90b3R5cGUuZ2k9ZnVuY3Rpb24obil7dmFyIHQsZT10aGlzLmFicygpO2lmKDE9PWUuRGUmJmVbMF08PVBbUC5sZW5ndGgtMV0pe2Zvcih0PTA7dDxQLmxlbmd0aDsrK3QpaWYoZVswXT09UFt0XSlyZXR1cm4hMDtyZXR1cm4hMX1pZihlLm5pKCkpcmV0dXJuITE7Zm9yKHQ9MTt0PFAubGVuZ3RoOyl7Zm9yKHZhciBpPVBbdF0scj10KzE7cjxQLmxlbmd0aCYmaTxBOylpKj1QW3IrK107Zm9yKGk9ZS5iaShpKTt0PHI7KWlmKGklUFt0KytdPT0wKXJldHVybiExfXJldHVybiBlLklpKG4pfSx3LnByb3RvdHlwZS5LaT1mdW5jdGlvbigpe3ZhciBuPXkoKTtyZXR1cm4gdGhpcy5IZShuKSxufSxDLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKG4pe3ZhciB0LGUsaTtmb3IodD0wO3Q8MjU2OysrdCl0aGlzLmNpW3RdPXQ7Zm9yKHQ9ZT0wO3Q8MjU2OysrdCllPWUrdGhpcy5jaVt0XStuW3Qlbi5sZW5ndGhdJjI1NSxpPXRoaXMuY2lbdF0sdGhpcy5jaVt0XT10aGlzLmNpW2VdLHRoaXMuY2lbZV09aTt0aGlzLmFpPTAsdGhpcy5maT0wfSxDLnByb3RvdHlwZS5uZXh0PWZ1bmN0aW9uKCl7dmFyIG47cmV0dXJuIHRoaXMuYWk9dGhpcy5haSsxJjI1NSx0aGlzLmZpPXRoaXMuZmkrdGhpcy5jaVt0aGlzLmFpXSYyNTUsbj10aGlzLmNpW3RoaXMuYWldLHRoaXMuY2lbdGhpcy5haV09dGhpcy5jaVt0aGlzLmZpXSx0aGlzLmNpW3RoaXMuZmldPW4sdGhpcy5jaVtuK3RoaXMuY2lbdGhpcy5haV0mMjU1XX07dmFyIGssRSxULE49MjU2O2Z1bmN0aW9uIEwoKXt2YXIgbjtuPShuZXcgRGF0ZSkuZ2V0VGltZSgpLEVbVCsrXV49MjU1Jm4sRVtUKytdXj1uPj44JjI1NSxFW1QrK11ePW4+PjE2JjI1NSxFW1QrK11ePW4+PjI0JjI1NSxOPD1UJiYoVC09Til9aWYobnVsbD09RSl7dmFyIEQ7Zm9yKEU9W10sVD0wO1Q8TjspRD1NYXRoLmZsb29yKDY1NTM2Kk1hdGgucmFuZG9tKCkpLEVbVCsrXT1EPj4+OCxFW1QrK109MjU1JkQ7VD0wLEwoKX1mdW5jdGlvbiBSKCl7aWYobnVsbD09ayl7Zm9yKEwoKSwoaz1uZXcgQykuaW5pdChFKSxUPTA7VDxFLmxlbmd0aDsrK1QpRVtUXT0wO1Q9MH1yZXR1cm4gay5uZXh0KCl9ZnVuY3Rpb24gTSgpe31mdW5jdGlvbiBPKG4sdCl7cmV0dXJuIG5ldyB3KG4sdCl9ZnVuY3Rpb24gVygpe3RoaXMubj1udWxsLHRoaXMuZT0wLHRoaXMuZD1udWxsLHRoaXMucD1udWxsLHRoaXMucT1udWxsLHRoaXMuZG1wMT1udWxsLHRoaXMuZG1xMT1udWxsLHRoaXMuY29lZmY9bnVsbH1NLnByb3RvdHlwZS5taT1mdW5jdGlvbihuKXt2YXIgdDtmb3IodD0wO3Q8bi5sZW5ndGg7Kyt0KW5bdF09UigpfSxXLnByb3RvdHlwZS5xaT1mdW5jdGlvbihuKXtyZXR1cm4gbi5yaSh0aGlzLmUsdGhpcy5uKX0sVy5wcm90b3R5cGUuSGk9ZnVuY3Rpb24obix0KXtudWxsIT1uJiZudWxsIT10JiYwPG4ubGVuZ3RoJiYwPHQubGVuZ3RoPyh0aGlzLm49TyhuLDE2KSx0aGlzLmU9cGFyc2VJbnQodCwxNikpOmFsZXJ0KFwiSW52YWxpZCBSU0EgcHVibGljIGtleVwiKX0sVy5wcm90b3R5cGUuZW5jcnlwdD1mdW5jdGlvbihuKXt2YXIgdD1mdW5jdGlvbihuLHQpe2lmKHQ8bi5sZW5ndGgrMTEpcmV0dXJuIGFsZXJ0KFwiTWVzc2FnZSB0b28gbG9uZyBmb3IgUlNBXCIpLG51bGw7Zm9yKHZhciBlPVtdLGk9bi5sZW5ndGgtMTswPD1pJiYwPHQ7KXt2YXIgcj1uLmNoYXJDb2RlQXQoaS0tKTtyPDEyOD9lWy0tdF09cjoxMjc8ciYmcjwyMDQ4PyhlWy0tdF09NjMmcnwxMjgsZVstLXRdPXI+PjZ8MTkyKTooZVstLXRdPTYzJnJ8MTI4LGVbLS10XT1yPj42JjYzfDEyOCxlWy0tdF09cj4+MTJ8MjI0KX1lWy0tdF09MDtmb3IodmFyIG89bmV3IE0sdT1bXTsyPHQ7KXtmb3IodVswXT0wOzA9PXVbMF07KW8ubWkodSk7ZVstLXRdPXVbMF19cmV0dXJuIGVbLS10XT0yLGVbLS10XT0wLG5ldyB3KGUpfShuLHRoaXMubi5paSgpKzc+PjMpO2lmKG51bGw9PXQpcmV0dXJuIG51bGw7dmFyIGU9dGhpcy5xaSh0KTtpZihudWxsPT1lKXJldHVybiBudWxsO3ZhciBpPWUudG9TdHJpbmcoMTYpO3JldHVybiAwPT0oMSZpLmxlbmd0aCk/aTpcIjBcIitpfSxXLnByb3RvdHlwZS5ZaT1mdW5jdGlvbihuKXtpZihudWxsPT10aGlzLnB8fG51bGw9PXRoaXMucSlyZXR1cm4gbi5DaSh0aGlzLmQsdGhpcy5uKTtmb3IodmFyIHQ9bi5CZSh0aGlzLnApLkNpKHRoaXMuZG1wMSx0aGlzLnApLGU9bi5CZSh0aGlzLnEpLkNpKHRoaXMuZG1xMSx0aGlzLnEpO3QuVWUoZSk8MDspdD10LmFkZCh0aGlzLnApO3JldHVybiB0LlNpKGUpLm11bHRpcGx5KHRoaXMuY29lZmYpLkJlKHRoaXMucCkubXVsdGlwbHkodGhpcy5xKS5hZGQoZSl9LFcucHJvdG90eXBlLkppPWZ1bmN0aW9uKG4sdCxlKXtudWxsIT1uJiZudWxsIT10JiYwPG4ubGVuZ3RoJiYwPHQubGVuZ3RoPyh0aGlzLm49TyhuLDE2KSx0aGlzLmU9cGFyc2VJbnQodCwxNiksdGhpcy5kPU8oZSwxNikpOmFsZXJ0KFwiSW52YWxpZCBSU0EgcHJpdmF0ZSBrZXlcIil9LFcucHJvdG90eXBlLnppPWZ1bmN0aW9uKG4sdCxlLGkscixvLHUscyl7bnVsbCE9biYmbnVsbCE9dCYmMDxuLmxlbmd0aCYmMDx0Lmxlbmd0aD8odGhpcy5uPU8obiwxNiksdGhpcy5lPXBhcnNlSW50KHQsMTYpLHRoaXMuZD1PKGUsMTYpLHRoaXMucD1PKGksMTYpLHRoaXMucT1PKHIsMTYpLHRoaXMuZG1wMT1PKG8sMTYpLHRoaXMuZG1xMT1PKHUsMTYpLHRoaXMuY29lZmY9TyhzLDE2KSk6YWxlcnQoXCJJbnZhbGlkIFJTQSBwcml2YXRlIGtleVwiKX0sVy5wcm90b3R5cGUuUWk9ZnVuY3Rpb24obix0KXt2YXIgZT1uZXcgTSxpPW4+PjE7dGhpcy5lPXBhcnNlSW50KHQsMTYpO2Zvcih2YXIgcj1uZXcgdyh0LDE2KTs7KXtmb3IoO3RoaXMucD1uZXcgdyhuLWksMSxlKSwwIT10aGlzLnAuU2kody5PTkUpLkdpKHIpLlVlKHcuT05FKXx8IXRoaXMucC5naSgxMCk7KTtmb3IoO3RoaXMucT1uZXcgdyhpLDEsZSksMCE9dGhpcy5xLlNpKHcuT05FKS5HaShyKS5VZSh3Lk9ORSl8fCF0aGlzLnEuZ2koMTApOyk7aWYodGhpcy5wLlVlKHRoaXMucSk8PTApe3ZhciBvPXRoaXMucDt0aGlzLnA9dGhpcy5xLHRoaXMucT1vfXZhciB1PXRoaXMucC5TaSh3Lk9ORSkscz10aGlzLnEuU2kody5PTkUpLGE9dS5tdWx0aXBseShzKTtpZigwPT1hLkdpKHIpLlVlKHcuT05FKSl7dGhpcy5uPXRoaXMucC5tdWx0aXBseSh0aGlzLnEpLHRoaXMuZD1yLmppKGEpLHRoaXMuZG1wMT10aGlzLmQuQmUodSksdGhpcy5kbXExPXRoaXMuZC5CZShzKSx0aGlzLmNvZWZmPXRoaXMucS5qaSh0aGlzLnApO2JyZWFrfX19LFcucHJvdG90eXBlLmRlY3J5cHQ9ZnVuY3Rpb24obil7dmFyIHQ9TyhuLDE2KSxlPXRoaXMuWWkodCk7cmV0dXJuIG51bGw9PWU/bnVsbDpmdW5jdGlvbihuLHQpe2Zvcih2YXIgZT1uLlRpKCksaT0wO2k8ZS5sZW5ndGgmJjA9PWVbaV07KSsraTtpZihlLmxlbmd0aC1pIT10LTF8fDIhPWVbaV0pcmV0dXJuIG51bGw7Zm9yKCsraTswIT1lW2ldOylpZigrK2k+PWUubGVuZ3RoKXJldHVybiBudWxsO2Zvcih2YXIgcj1cIlwiOysraTxlLmxlbmd0aDspe3ZhciBvPTI1NSZlW2ldO288MTI4P3IrPVN0cmluZy5mcm9tQ2hhckNvZGUobyk6MTkxPG8mJm88MjI0PyhyKz1TdHJpbmcuZnJvbUNoYXJDb2RlKCgzMSZvKTw8Nnw2MyZlW2krMV0pLCsraSk6KHIrPVN0cmluZy5mcm9tQ2hhckNvZGUoKDE1Jm8pPDwxMnwoNjMmZVtpKzFdKTw8Nnw2MyZlW2krMl0pLGkrPTIpfXJldHVybiByfShlLHRoaXMubi5paSgpKzc+PjMpfTt2YXIgVj1cIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky9cIix4PVwiPVwiO2Z1bmN0aW9uIFUobil7dmFyIHQsZSxpPVwiXCI7Zm9yKHQ9MDt0KzM8PW4ubGVuZ3RoO3QrPTMpZT1wYXJzZUludChuLnN1YnN0cmluZyh0LHQrMyksMTYpLGkrPVYuY2hhckF0KGU+PjYpK1YuY2hhckF0KDYzJmUpO2Zvcih0KzE9PW4ubGVuZ3RoPyhlPXBhcnNlSW50KG4uc3Vic3RyaW5nKHQsdCsxKSwxNiksaSs9Vi5jaGFyQXQoZTw8MikpOnQrMj09bi5sZW5ndGgmJihlPXBhcnNlSW50KG4uc3Vic3RyaW5nKHQsdCsyKSwxNiksaSs9Vi5jaGFyQXQoZT4+MikrVi5jaGFyQXQoKDMmZSk8PDQpKTswPCgzJmkubGVuZ3RoKTspaSs9eDtyZXR1cm4gaX1mdW5jdGlvbiBCKG4pe3ZhciB0LGUsaT1cIlwiLHI9MDtmb3IodD0wO3Q8bi5sZW5ndGgmJm4uY2hhckF0KHQpIT14OysrdCl7dmFyIG89Vi5pbmRleE9mKG4uY2hhckF0KHQpKTtvPDB8fCgwPT1yPyhpKz1hKG8+PjIpLGU9MyZvLHI9MSk6MT09cj8oaSs9YShlPDwyfG8+PjQpLGU9MTUmbyxyPTIpOjI9PXI/KGkrPWEoZSksaSs9YShvPj4yKSxlPTMmbyxyPTMpOihpKz1hKGU8PDJ8bz4+NCksaSs9YSgxNSZvKSxyPTApKX1yZXR1cm4gMT09ciYmKGkrPWEoZTw8MikpLGl9Vy5wcm90b3R5cGUuWGk9ZnVuY3Rpb24obil7bj10aGlzLlppKG4pO3ZhciB0PXRoaXMuJGkoKSxlPTAsaT1udWxsLHI9bnVsbCxvPTA7Zm9yKHZhciB1IGluIHQpdC5oYXNPd25Qcm9wZXJ0eSh1KSYmKChpPXRbdV0pLmhhc093blByb3BlcnR5KFwib2Zmc2V0XCIpJiYoZSs9MippLm9mZnNldCksbz1cInN0cmluZ1wiPT10eXBlb2YgaS5sZW5ndGg/dGhpc1tpLmxlbmd0aF06aS5sZW5ndGgsbyo9MixyPW4uc3Vic3RyKGUsbyksaS5oYXNPd25Qcm9wZXJ0eShcInR5cGVcIikmJihcImludFwiPT1pLnR5cGU/cj1wYXJzZUludChyLDE2KTpcImJpZ2ludFwiPT1pLnR5cGUmJihyPU8ociwxNikpKSxlKz1vLHRoaXNbdV09cil9LFcucHJvdG90eXBlLm5yPWZ1bmN0aW9uKG4pe3ZhciB0PVwiXCI7bj1yKG4pO2Zvcih2YXIgZT0wO2U8bi5sZW5ndGg7KytlKXt2YXIgaT1uLmNoYXJDb2RlQXQoZSkudG9TdHJpbmcoMTYpOzE9PT1pLmxlbmd0aCYmKGk9XCIwXCIraSksdCs9aX1yZXR1cm4gdH0sVy5wcm90b3R5cGUuWmk9ZnVuY3Rpb24obil7dmFyIHQ9KG49bi5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLFwiXCIpKS5zcGxpdCgvXFxyP1xcbi8pO3JldHVyblwiLS0tLS1CRUdJTlwiPT10WzBdLnN1YnN0cmluZygwLDEwKSYmKHQ9dC5zbGljZSgxLHQubGVuZ3RoLTEpKSxuPXQuam9pbihcIlwiKSx0aGlzLm5yKG4pfSxXLnByb3RvdHlwZS50cj1mdW5jdGlvbigpe3ZhciBuPVwiXCIsdD10aGlzLiRpKCksZT1udWxsLGk9bnVsbCxyPTA7Zm9yKHZhciBvIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShvKSYmKGU9dFtvXSkuZXImJigoaT10aGlzW29dLnRvU3RyaW5nKDE2KSkubGVuZ3RoJTImJihpPVwiMFwiK2kpLGUuaGFzT3duUHJvcGVydHkoXCJwYWRkZWRcIikmJmUuaXImJihpPVwiMDBcIitpKSwocj0ocj1pLmxlbmd0aC8yKS50b1N0cmluZygxNikpLmxlbmd0aCUyJiYocj1cIjBcIityKSxlLmhhc093blByb3BlcnR5KFwiZXh0cmFzcGFjZVwiKSYmKG4rPXIpLG4rPXIsbis9aSxuKz1cIjAyXCIpO3JldHVybiBuLnNsaWNlKDAsLTIpfSxXLnByb3RvdHlwZS5ycj1mdW5jdGlvbihuLHQpe2lmKCFuKXJldHVybiBuO3ZhciBlPVwiKC57MSxcIisodD10fHw2NCkrXCJ9KSggK3wkXFxuPyl8KC57MSxcIit0K1wifSlcIjtyZXR1cm4gbi5tYXRjaChuZXcgUmVnRXhwKGUsXCJnXCIpKS5qb2luKFwiXFxuXCIpfSxXLnByb3RvdHlwZS5vcj1mdW5jdGlvbigpe3ZhciBuPVwiLS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLVxcblwiLHQ9XCIzMDgyMDI1ZTAyMDEwMDAyXCI7cmV0dXJuIHQrPXRoaXMudHIoKSxuKz10aGlzLnJyKFUodCkpK1wiXFxuXCIsbis9XCItLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLVwifSxXLnByb3RvdHlwZS51cj1mdW5jdGlvbigpe3ZhciBuPVwiLS0tLS1CRUdJTiBQVUJMSUMgS0VZLS0tLS1cXG5cIix0PVwiMzA4MTlmMzAwZDA2MDkyYTg2NDg4NmY3MGQwMTAxMDEwNTAwMDM4MThkMDAzMDgxODkwMlwiO3JldHVybiB0Kz10aGlzLnRyKCksbis9dGhpcy5ycihVKHQpKStcIlxcblwiLG4rPVwiLS0tLS1FTkQgUFVCTElDIEtFWS0tLS0tXCJ9O3ZhciBGPWZ1bmN0aW9uKG4pe1cuY2FsbCh0aGlzKSxuJiZ0aGlzLlhpKG4pfTsoKEYucHJvdG90eXBlPW5ldyBXKS5jb25zdHJ1Y3Rvcj1GKS5wcm90b3R5cGUuJGk9ZnVuY3Rpb24oKXtyZXR1cm57aGVhZGVyOntsZW5ndGg6NH0sdmVyc2lvbmxlbmd0aDp7bGVuZ3RoOjEsb2Zmc2V0OjEsdHlwZTpcImludFwifSx2ZXJzaW9uOntsZW5ndGg6XCJ2ZXJzaW9ubGVuZ3RoXCIsdHlwZTpcImludFwifSxuX2xlbmd0aDp7bGVuZ3RoOjEsb2Zmc2V0OjIsdHlwZTpcImludFwifSxuOntsZW5ndGg6XCJuX2xlbmd0aFwiLHR5cGU6XCJiaWdpbnRcIixlcjohMCxpcjohMCxzcjohMH0sZV9sZW5ndGg6e2xlbmd0aDoxLG9mZnNldDoxLHR5cGU6XCJpbnRcIn0sZTp7bGVuZ3RoOlwiZV9sZW5ndGhcIix0eXBlOlwiaW50XCIsZXI6ITB9LGRfbGVuZ3RoOntsZW5ndGg6MSxvZmZzZXQ6Mix0eXBlOlwiaW50XCJ9LGQ6e2xlbmd0aDpcImRfbGVuZ3RoXCIsdHlwZTpcImJpZ2ludFwiLGVyOiEwLGlyOiEwLHNyOiEwfSxwX2xlbmd0aDp7bGVuZ3RoOjEsb2Zmc2V0OjEsdHlwZTpcImludFwifSxwOntsZW5ndGg6XCJwX2xlbmd0aFwiLHR5cGU6XCJiaWdpbnRcIixlcjohMCxpcjohMH0scV9sZW5ndGg6e2xlbmd0aDoxLG9mZnNldDoxLHR5cGU6XCJpbnRcIn0scTp7bGVuZ3RoOlwicV9sZW5ndGhcIix0eXBlOlwiYmlnaW50XCIsZXI6ITAsaXI6ITB9LGRtcDFfbGVuZ3RoOntsZW5ndGg6MSxvZmZzZXQ6MSx0eXBlOlwiaW50XCJ9LGRtcDE6e2xlbmd0aDpcImRtcDFfbGVuZ3RoXCIsdHlwZTpcImJpZ2ludFwiLGVyOiEwfSxkbXExX2xlbmd0aDp7bGVuZ3RoOjEsb2Zmc2V0OjEsdHlwZTpcImludFwifSxkbXExOntsZW5ndGg6XCJkbXExX2xlbmd0aFwiLHR5cGU6XCJiaWdpbnRcIixlcjohMCxpcjohMH0sY29lZmZfbGVuZ3RoOntsZW5ndGg6MSxvZmZzZXQ6MSx0eXBlOlwiaW50XCJ9LGNvZWZmOntsZW5ndGg6XCJjb2VmZl9sZW5ndGhcIix0eXBlOlwiYmlnaW50XCIsZXI6ITAsaXI6ITB9fX07dmFyIGo9ZnVuY3Rpb24obil7Vy5jYWxsKHRoaXMpLG4mJihcInN0cmluZ1wiPT10eXBlb2Ygbj90aGlzLlhpKG4pOm4uaGFzT3duUHJvcGVydHkoXCJuXCIpJiZuLmhhc093blByb3BlcnR5KFwiZVwiKSYmKHRoaXMubj1uLm4sdGhpcy5lPW4uZSkpfTsoKGoucHJvdG90eXBlPW5ldyBXKS5jb25zdHJ1Y3Rvcj1qKS5wcm90b3R5cGUuJGk9ZnVuY3Rpb24oKXtyZXR1cm57aGVhZGVyOntsZW5ndGg6MjV9LG5fbGVuZ3RoOntsZW5ndGg6MSxvZmZzZXQ6Mix0eXBlOlwiaW50XCJ9LG46e2xlbmd0aDpcIm5fbGVuZ3RoXCIsdHlwZTpcImJpZ2ludFwiLGVyOiEwLGlyOiEwLHNyOiEwfSxlX2xlbmd0aDp7bGVuZ3RoOjEsb2Zmc2V0OjEsdHlwZTpcImludFwifSxlOntsZW5ndGg6XCJlX2xlbmd0aFwiLHR5cGU6XCJpbnRcIixlcjohMH19fTt2YXIgRz1mdW5jdGlvbigpe3RoaXMuYXI9bnVsbCx0aGlzLmNyPW51bGx9O3JldHVybiBHLnByb3RvdHlwZS5scj1mdW5jdGlvbihuKXt0aGlzLmFyPW5ldyBGKG4pLHRoaXMuY3I9bmV3IGoodGhpcy5hcil9LEcucHJvdG90eXBlLnByPWZ1bmN0aW9uKG4pe3RoaXMuY3I9bmV3IGoobil9LEcucHJvdG90eXBlLmRlY3J5cHQ9ZnVuY3Rpb24obil7cmV0dXJuISF0aGlzLmFyJiZ0aGlzLmFyLmRlY3J5cHQoQihuKSl9LEcucHJvdG90eXBlLmVuY3J5cHQ9ZnVuY3Rpb24obil7dmFyIHQ9dGhpcy5jcnx8dGhpcy5hcjtyZXR1cm4hIXQmJlUodC5lbmNyeXB0KG4pKX0sRy5wcm90b3R5cGUub3I9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hcnx8KHRoaXMuYXI9bmV3IEYsdGhpcy5hci5RaSgxMDI0LFwiMDEwMDAxXCIpLHRoaXMuY3I9bmV3IGoodGhpcy5hcikpLHRoaXMuYXIub3IoKX0sRy5wcm90b3R5cGUudXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jcnx8KHRoaXMuY3I9bmV3IGosdGhpcy5jci5RaSgxMDI0LFwiMDEwMDAxXCIpKSx0aGlzLmNyLnVyKCl9LGZ1bmN0aW9uKG4pe3ZhciB0PW5ldyBHO3JldHVybiB0LnByKEsuWHQpLHQuZW5jcnlwdChuKX19KCksdC5leHBvcnRzPWkuZW5jcnlwdH0sezE3OjE3fV0sMjY6W2Z1bmN0aW9uKG4sdCxlKXt2YXIgaT1pfHx7fSxyPVwidW5kZWZpbmVkXCI7aS52cj1mdW5jdGlvbihuLHQpe3JldHVybiB0PXR8fCExLG4/XCIwXCIhPW46dH0saS5VPWZ1bmN0aW9uKG4sdCl7cmV0dXJuIG51bGw9PW58fGlzTmFOKG4pP3R8fDA6cGFyc2VJbnQobil9LGkubz1mdW5jdGlvbihuLHQpe3ZhciBlPU51bWJlcihuKTtyZXR1cm4gbnVsbD09bnx8aXNOYU4oZSk/dHx8MDplfSxpLnRvU3RyaW5nPWZ1bmN0aW9uKG4pe2lmKHR5cGVvZiBuPT1yKXJldHVybiByO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBuKXJldHVybiBuO2lmKG4gaW5zdGFuY2VvZiBBcnJheSlyZXR1cm4gbi5qb2luKFwiLFwiKTt2YXIgdD1cIlwiO2Zvcih2YXIgZSBpbiBuKW4uaGFzT3duUHJvcGVydHkoZSkmJih0Kz1lK1wiOlwiK25bZV0rXCI7XCIpO3JldHVybiB0fHxuLnRvU3RyaW5nKCl9LHQuZXhwb3J0cy52cj1pLnZyLHQuZXhwb3J0cy5VPWkuVSx0LmV4cG9ydHMubz1pLm8sdC5leHBvcnRzLnRvU3RyaW5nPWkudG9TdHJpbmd9LHt9XSwyNzpbZnVuY3Rpb24obix0LGUpe3ZhciBzPW4oMTkpLGk9XCJ1bmRlZmluZWRcIixhPXR5cGVvZiBlbmNvZGVVUklDb21wb25lbnQhPT1pP2VuY29kZVVSSUNvbXBvbmVudDplc2NhcGUsdT10eXBlb2YgZGVjb2RlVVJJQ29tcG9uZW50IT09aT9kZWNvZGVVUklDb21wb25lbnQ6dW5lc2NhcGUsZj1cImNzX2Rpcl9cIixjPVwiY3NfZmlsZV9cIixsPXR5cGVvZiBsb2NhbFN0b3JhZ2UhPT1pP2xvY2FsU3RvcmFnZTpudWxsLHA9e30sdj1cInxcIixkPWwmJmEmJnU7dmFyIG89e2RpcjpmdW5jdGlvbihuKXtpZighZClyZXR1cm4gbnVsbDt2YXIgdD1mK24sZT1wW3RdO2lmKGUpcmV0dXJuIGUuc2xpY2UoKTt2YXIgaT1sLmdldEl0ZW0odCk7aWYoaSl7ZT1bXTtmb3IodmFyIHI9MCxvPShpPWkuc3BsaXQodikpLmxlbmd0aDtyPG87cisrKTA8aVtyXS5sZW5ndGgmJmUucHVzaCh1KGlbcl0pKTtyZXR1cm4ocFt0XT1lKS5zbGljZSgpfXJldHVybiBudWxsfSxhcHBlbmQ6ZnVuY3Rpb24obix0LGUpe2lmKGQpe3ZhciBpPW8ucmVhZChuLHQpO2k/aSs9ZTppPWUsby53cml0ZShuLHQsaSl9fSx3cml0ZTpmdW5jdGlvbihuLHQsZSl7aWYoZCl7dmFyIGkscj1vLmRpcihuKTtyfHwoaT1mK24sXCJmdW5jdGlvblwiPT10eXBlb2YgbC5zZXRJdGVtP2wuc2V0SXRlbShpLFwiXCIpOmxbaV09XCJcIixwW2ldPVtdLHI9W10pLC0xPT1zLmluZGV4T2YodCxyKSYmZnVuY3Rpb24obix0KXt2YXIgZT1mK247dHJ5e1wiZnVuY3Rpb25cIj09dHlwZW9mIGwuc2V0SXRlbT9sLnNldEl0ZW0oZSxsLmdldEl0ZW0oZSkrdithKHQpKTpsW2VdPWwuZ2V0SXRlbShlKSt2K2EodCl9Y2F0Y2gobil7fXBbZV0ucHVzaCh0KX0obix0KSxmdW5jdGlvbihuLHQsZSl7dHJ5e1wiZnVuY3Rpb25cIj09dHlwZW9mIGwuc2V0SXRlbT9sLnNldEl0ZW0oYytuK3QsZSk6bFtjK24rdF09ZX1jYXRjaChuKXt9fShuLHQsZSl9fSxkZWxldGVGaWxlOmZ1bmN0aW9uKG4sdCl7aWYoIWQpcmV0dXJuITE7dmFyIGU9by5kaXIobik7cmV0dXJuISFlJiYoLTEhPXMuaW5kZXhPZih0LGUpJiYoZnVuY3Rpb24obix0KXt2YXIgZT1mK24saT1wW2VdO2kuc3BsaWNlKHMuaW5kZXhPZih0LGkpLDEpO2Zvcih2YXIgcj1bXSxvPTAsdT1pLmxlbmd0aDtvPHU7bysrKXIucHVzaChhKGlbb10pKTt0cnl7XCJmdW5jdGlvblwiPT10eXBlb2YgbC5zZXRJdGVtP2wuc2V0SXRlbShlLHIuam9pbih2KSk6bFtlXT1yLmpvaW4odiksXCJmdW5jdGlvblwiPT10eXBlb2YgbC5yZW1vdmVJdGVtP2wucmVtb3ZlSXRlbShjK24rdCk6ZGVsZXRlIGxbYytuK3RdfWNhdGNoKG4pe319KG4sdCksITApKX0scmVhZDpmdW5jdGlvbihuLHQpe2lmKCFkKXJldHVybiBudWxsO3ZhciBlPW8uZGlyKG4pO3JldHVybiBlPy0xPT1zLmluZGV4T2YodCxlKT9udWxsOmZ1bmN0aW9uKG4sdCl7dHJ5e3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIGwuZ2V0SXRlbT9sLmdldEl0ZW0oYytuK3QpOmxbYytuK3RdfWNhdGNoKG4pe319KG4sdCk6bnVsbH19O3QuZXhwb3J0cz1vfSx7MTk6MTl9XSwyODpbZnVuY3Rpb24obix0LGUpe3ZhciB1LHIsbz1uKDE5KSxpPVwidW5kZWZpbmVkXCIscz1udWxsLGE9bnVsbCxmPVwiY3NfZGlyX1wiLGM9XCJ8XCIsbD17fSxwPSExO2Z1bmN0aW9uIHYoKXtzPXR5cGVvZiBGaWxlU3lzdGVtIT1pP25ldyBGaWxlU3lzdGVtOm51bGwsYT10eXBlb2YgY3VyV2lkZ2V0IT1pP2N1cldpZGdldC5pZDpudWxsLHR5cGVvZiBzZiE9PWkmJihyPXU9ZnVuY3Rpb24obix0KXtzZi5jb3JlLmxvY2FsRGF0YShuLHQpfSksbnVsbD09c3x8dHlwZW9mIHMuaXNWYWxpZENvbW1vblBhdGg9PWl8fHMuaXNWYWxpZENvbW1vblBhdGgoYSl8fHMuY3JlYXRlQ29tbW9uRGlyKGEpLHA9ITB9ZnVuY3Rpb24gZChuKXtyZXR1cm4gbi5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLFwiXCIpfWZ1bmN0aW9uIGgobix0KXt2YXIgZT1sW25dO2U/ZS5wdXNoKHQpOmU9bFtuXT1bdF0scihmK24sZS5qb2luKGMpKX1mdW5jdGlvbiBfKG4sdCl7dmFyIGU9bFtuXSxpPW8uaW5kZXhPZih0LGUpOzA8PWkmJihlLnNwbGljZShpLDEpLHIoZituLDA9PT1lLmxlbmd0aD9udWxsOmUuam9pbihjKSkpfXZhciBnPXtkaXI6ZnVuY3Rpb24obil7aWYocHx8digpLHMuaXNWYWxpZENvbW1vblBhdGgoYStcIi9cIituKSl7dmFyIHQ9bFtuXTtpZighdCl7aWYoISh0PXUoZituKSkpcmV0dXJuIG51bGw7dD1sW25dPXQuc3BsaXQoYyl9Zm9yKHZhciBlPXQuc2xpY2UoKSxpPTAscj1lLmxlbmd0aDtpPHI7aSsrKXt2YXIgbz10W2ldO3MuaXNWYWxpZENvbW1vblBhdGgoYStcIi9cIituK1wiL1wiK28pfHxfKG4sbyl9cmV0dXJuIGV9cmV0dXJuIG51bGx9LGFwcGVuZDpmdW5jdGlvbihuLHQsZSl7cHx8digpO3ZhciBpPWErXCIvXCIrbjtzLmlzVmFsaWRDb21tb25QYXRoKGkpfHxzLmNyZWF0ZUNvbW1vbkRpcihpKSxzLmlzVmFsaWRDb21tb25QYXRoKGkrXCIvXCIrdCl8fGgobix0KTt2YXIgcj1zLm9wZW5Db21tb25GaWxlKGkrXCIvXCIrdCxcImFcIik7ci53cml0ZUxpbmUoZChlKSkscy5jbG9zZUNvbW1vbkZpbGUocil9LHdyaXRlOmZ1bmN0aW9uKG4sdCxlKXtwfHx2KCk7dmFyIGk9YStcIi9cIituO3MuaXNWYWxpZENvbW1vblBhdGgoaSl8fHMuY3JlYXRlQ29tbW9uRGlyKGkpLHMuaXNWYWxpZENvbW1vblBhdGgoaStcIi9cIit0KXx8aChuLHQpO3ZhciByPXMub3BlbkNvbW1vbkZpbGUoaStcIi9cIit0LFwid1wiKTtyLndyaXRlTGluZShkKGUpKSxzLmNsb3NlQ29tbW9uRmlsZShyKX0sZGVsZXRlRmlsZTpmdW5jdGlvbihuLHQpe3B8fHYoKTt2YXIgZT1hK1wiL1wiK247cmV0dXJuISFzLmlzVmFsaWRDb21tb25QYXRoKGUpJiYoXyhuLHQpLHMuZGVsZXRlQ29tbW9uRmlsZShlK1wiL1wiK3QpKX0scmVhZDpmdW5jdGlvbihuLHQpe3B8fHYoKTt2YXIgZT1hK1wiL1wiK247aWYoIXMuaXNWYWxpZENvbW1vblBhdGgoZSkpcmV0dXJuIG51bGw7dmFyIGk9cy5vcGVuQ29tbW9uRmlsZShlK1wiL1wiK3QsXCJyXCIpO2lmKGkpe2Zvcih2YXIgcixvPVtdO3I9aS5yZWFkTGluZSgpOylvLnB1c2gocik7cmV0dXJuIHMuY2xvc2VDb21tb25GaWxlKGkpLG8uam9pbihcIlxcblwiKX1yZXR1cm4gXyhuLHQpLFwiXCJ9fTt0LmV4cG9ydHM9Z30sezE5OjE5fV0sMjk6W2Z1bmN0aW9uKG4sdCxlKXt0LmV4cG9ydHM9e2RpcjpmdW5jdGlvbigpe3JldHVybiBudWxsfSxhcHBlbmQ6ZnVuY3Rpb24obix0LGUpe30sd3JpdGU6ZnVuY3Rpb24obix0LGUpe30sZGVsZXRlRmlsZTpmdW5jdGlvbigpe3JldHVybiExfSxyZWFkOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9fX0se31dLDMwOltmdW5jdGlvbihuLHQsZSl7dmFyIGk9bigyMSkscj1uKDE3KSxvPW4oNDkpLmRyLHU9big0OSkuaHIoKSxzPW4oNDUpLGE9bigyOSksZj1cInVuZGVmaW5lZFwiLGM9ci5ELGw9ci5RdCxwPW51bGwsdj1udWxsLGQ9bnVsbDtmdW5jdGlvbiBoKCl7bnVsbD09cCYmKHR5cGVvZiBhdHYhPWYmJnR5cGVvZiBhdHYuZGV2aWNlIT1mJiZhdHYuZGV2aWNlLmlkRm9yVmVuZG9yPyhwPWkucGUoYXR2LmRldmljZS5pZEZvclZlbmRvcixcIlwiKSx2PVwiNjJcIik6KHA9K25ldyBEYXRlK35+KDFlMypNYXRoLnJhbmRvbSgpKSx2PVwiNzJcIiksZD1udWxsKX12YXIgXz17UExBVEZPUk06XCJhdHZcIixodHRwR2V0Om8saHR0cFBvc3Q6dSxTdG9yYWdlOnMsSU86YSxnZXRDcm9zc1B1Ymxpc2hlcklkOmZ1bmN0aW9uKCl7cmV0dXJuIGgoKSxkfSxnZXRBcHBOYW1lOmZ1bmN0aW9uKCl7cmV0dXJuIGN9LGdldEFwcFZlcnNpb246ZnVuY3Rpb24oKXtyZXR1cm4gY30sZ2V0VmlzaXRvcklkOmZ1bmN0aW9uKCl7cmV0dXJuIGgoKSxwfSxnZXRWaXNpdG9ySWRTdWZmaXg6ZnVuY3Rpb24oKXtyZXR1cm4gdn0sZ2V0RGV2aWNlTW9kZWw6ZnVuY3Rpb24oKXtyZXR1cm5cIkFwcGxlIFRWXCJ9LGdldFBsYXRmb3JtVmVyc2lvbjpmdW5jdGlvbigpe3JldHVybiB0eXBlb2YgYXR2IT1mJiZ0eXBlb2YgYXR2LmRldmljZSE9ZiYmaS5wZShhdHYuZGV2aWNlLnNvZnR3YXJlVmVyc2lvbixjKX0sZ2V0UGxhdGZvcm1OYW1lOmZ1bmN0aW9uKCl7cmV0dXJuXCJqc1wifSxnZXRSdW50aW1lTmFtZTpmdW5jdGlvbigpe3JldHVyblwiYXR2XCJ9LGdldFJ1bnRpbWVWZXJzaW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHR5cGVvZiBhdHYhPWYmJnR5cGVvZiBhdHYuZGV2aWNlIT1mJiZpLnBlKGF0di5kZXZpY2Uuc29mdHdhcmVWZXJzaW9uLGMpfSxnZXREaXNwbGF5UmVzb2x1dGlvbjpmdW5jdGlvbigpe3JldHVybiB0eXBlb2YgYXR2LmRldmljZSE9ZiYmdHlwZW9mIGF0di5kZXZpY2Uuc2NyZWVuRnJhbWUhPWYmJnR5cGVvZiBhdHYuZGV2aWNlLnNjcmVlbkZyYW1lLmhlaWdodCE9ZiYmdHlwZW9mIGF0di5kZXZpY2Uuc2NyZWVuRnJhbWUud2lkdGghPWY/YXR2LmRldmljZS5zY3JlZW5GcmFtZS5oZWlnaHQrXCJ4XCIrYXR2LmRldmljZS5zY3JlZW5GcmFtZS53aWR0aDpsfSxnZXRMYW5ndWFnZTpmdW5jdGlvbigpe3JldHVybiB0eXBlb2YgYXR2IT1mJiZ0eXBlb2YgYXR2LmRldmljZSE9ZiYmaS5wZShhdHYuZGV2aWNlLmxhbmd1YWdlLFwiXCIpfSxnZXRQYWNrYWdlTmFtZTpmdW5jdGlvbigpe3JldHVyblwiXCJ9LGlzQ29ubmVjdGlvbkF2YWlsYWJsZTpmdW5jdGlvbigpe3JldHVybiEwfSxzZXRUaW1lb3V0OmZ1bmN0aW9uKG4sdCl7cmV0dXJuIHR5cGVvZiBhdHYhPWYmJnR5cGVvZiBhdHYuc2V0VGltZW91dCE9ZiYmYXR2LnNldFRpbWVvdXQobix0KX0sc2V0SW50ZXJ2YWw6ZnVuY3Rpb24obix0KXtyZXR1cm4gdHlwZW9mIGF0diE9ZiYmdHlwZW9mIGF0di5zZXRJbnRlcnZhbCE9ZiYmYXR2LnNldEludGVydmFsKG4sdCl9LGNsZWFyVGltZW91dDpmdW5jdGlvbihuKXtyZXR1cm4gdHlwZW9mIGF0diE9ZiYmdHlwZW9mIGF0di5jbGVhclRpbWVvdXQhPWYmJmF0di5jbGVhclRpbWVvdXQobil9LGNsZWFySW50ZXJ2YWw6ZnVuY3Rpb24obil7cmV0dXJuIHR5cGVvZiBhdHYhPWYmJnR5cGVvZiBhdHYuY2xlYXJJbnRlcnZhbCE9ZiYmYXR2LmNsZWFySW50ZXJ2YWwobil9LGlzQ29tcGF0aWJsZTpmdW5jdGlvbigpe3JldHVybiB0eXBlb2Ygd2luZG93PT1mJiZ0eXBlb2YgYXR2IT1mfSxpc0Nvbm5lY3Rpb25TZWN1cmU6ZnVuY3Rpb24oKXtyZXR1cm4gdHlwZW9mIGRvY3VtZW50IT1mJiZudWxsIT1kb2N1bWVudCYmXCJzXCI9PT1kb2N1bWVudC5sb2NhdGlvbi5ocmVmLmNoYXJBdCg0KX19O3QuZXhwb3J0cz1ffSx7MTc6MTcsMjE6MjEsMjk6MjksNDU6NDUsNDk6NDl9XSwzMTpbZnVuY3Rpb24obix0LGUpe3ZhciBpPW4oMjEpLHI9bigyMCksbz1uKDE3KSx1PW4oNTApLHM9big0OCkuX3IsYT1uKDQ2KSxmPW4oMjcpLGM9XCJ1bmRlZmluZWRcIixsPW8uRCxwPW8uUXQ7dmFyIHY9e1BMQVRGT1JNOlwiY2hyb21lY2FzdFwiLGh0dHBHZXQ6dSxodHRwUG9zdDpzLFN0b3JhZ2U6YSxJTzpmLGdldENyb3NzUHVibGlzaGVySWQ6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH0sZ2V0QXBwTmFtZTpmdW5jdGlvbigpe3JldHVybiB0eXBlb2YgbnNfLmNybT09PWM/bDpuc18uY3JtLmdldEFwcGxpY2F0aW9uRGF0YSgpLm5hbWV9LGdldEFwcFZlcnNpb246ZnVuY3Rpb24oKXtyZXR1cm4gbH0sZ2V0VmlzaXRvcklkOmZ1bmN0aW9uKCl7cmV0dXJuK25ldyBEYXRlK35+KDFlMypNYXRoLnJhbmRvbSgpKX0sZ2V0VmlzaXRvcklkU3VmZml4OmZ1bmN0aW9uKCl7cmV0dXJuXCI3MlwifSxnZXREZXZpY2VNb2RlbDpmdW5jdGlvbigpe3JldHVyblwiY2hyb21lY2FzdFwifSxnZXRQbGF0Zm9ybVZlcnNpb246ZnVuY3Rpb24oKXtyZXR1cm4gY2FzdC5yZWNlaXZlci5WRVJTSU9OK1wiLVwiK2kucGUoci51ZSgpK1wiIFwiK3Iuc2UoKSxsKX0sZ2V0UGxhdGZvcm1OYW1lOmZ1bmN0aW9uKCl7cmV0dXJuXCJqc1wifSxnZXRSdW50aW1lTmFtZTpmdW5jdGlvbigpe3JldHVyblwiaHRtbFwifSxnZXRSdW50aW1lVmVyc2lvbjpmdW5jdGlvbigpe3JldHVyblwiNVwifSxnZXREaXNwbGF5UmVzb2x1dGlvbjpmdW5jdGlvbigpe3ZhciBuPXR5cGVvZiB3aW5kb3chPWMmJmkudG4od2luZG93LnNjcmVlbikmJmkudG4od2luZG93LnNjcmVlbi5hdmFpbFdpZHRoKT93aW5kb3cuc2NyZWVuLmF2YWlsV2lkdGg6MCx0PXR5cGVvZiB3aW5kb3chPWMmJmkudG4od2luZG93LnNjcmVlbikmJmkudG4od2luZG93LnNjcmVlbi5hdmFpbEhlaWdodCk/d2luZG93LnNjcmVlbi5hdmFpbEhlaWdodDowO3JldHVybiAwPG4mJjA8dD9uK1wieFwiK3Q6cH0sZ2V0TGFuZ3VhZ2U6ZnVuY3Rpb24oKXtyZXR1cm4gdHlwZW9mIHdpbmRvdyE9YyYmaS50bih3aW5kb3cubmF2aWdhdG9yKSYmaS5wZSh3aW5kb3cubmF2aWdhdG9yLmxhbmd1YWdlLFwiXCIpfHxsfSxnZXRQYWNrYWdlTmFtZTpmdW5jdGlvbigpe3JldHVybiBsfSxpc0Nvbm5lY3Rpb25BdmFpbGFibGU6ZnVuY3Rpb24oKXtyZXR1cm4hMH0saXNDb21wYXRpYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIHR5cGVvZiB3aW5kb3chPT1jJiYhaS5qdCh3aW5kb3cuY2FzdCkmJiFpLmp0KGNhc3QucmVjZWl2ZXIpfSxpc0Nvbm5lY3Rpb25TZWN1cmU6ZnVuY3Rpb24oKXtyZXR1cm4gdHlwZW9mIGRvY3VtZW50IT1jJiZudWxsIT1kb2N1bWVudCYmXCJzXCI9PT1kb2N1bWVudC5sb2NhdGlvbi5ocmVmLmNoYXJBdCg0KX19O3QuZXhwb3J0cz12fSx7MTc6MTcsMjA6MjAsMjE6MjEsMjc6MjcsNDY6NDYsNDg6NDgsNTA6NTB9XSwzMjpbZnVuY3Rpb24obix0LGUpe3QuZXhwb3J0cz17U21hcnRUVjowLE5ldGNhc3Q6MSxDb3Jkb3ZhOjIsVHJpbGl0aGl1bTozLEFwcGxlVFY6NCxDaHJvbWVjYXN0OjUsWGJveDo2LHdlYk9TOjcsdHZPUzo4LG5vZGVqczo5LGh0bWw1OjEwLEpTTUFGOjExLFNrZWxldG9uOjEyfX0se31dLDMzOltmdW5jdGlvbihuLHQsZSl7dmFyIGk9bigyMSkscj1uKDE3KSxvPW4oNTApLHU9big0OCkuZ3Iscz1uKDQ4KS5fcixhPW4oNDYpLGY9bigyNyksYz1cInVuZGVmaW5lZFwiLGw9ci5ELHA9ci5RdCx2PW51bGwsZD1udWxsLGg9bnVsbDtmdW5jdGlvbiBfKCl7cmV0dXJuIHR5cGVvZiBkZXZpY2UhPWMmJnR5cGVvZiBkZXZpY2UuYXZhaWxhYmxlIT1jJiZkZXZpY2UuYXZhaWxhYmxlJiZ0eXBlb2Ygd2luZG93IT1jJiZ0eXBlb2Ygd2luZG93Lm5hdmlnYXRvciE9Y31mdW5jdGlvbiBnKCl7aWYobnVsbD09dil7dmFyIG49XygpJiZ0eXBlb2YgZGV2aWNlIT1jJiZpLnRuKGRldmljZS51dWlkKSYmMDxkZXZpY2UudXVpZC5sZW5ndGg/ZGV2aWNlLnV1aWQ6bnVsbDtudWxsIT1uPyhkPVwiMzFcIixoPXY9bik6KHY9K25ldyBEYXRlK35+KDFlMypNYXRoLnJhbmRvbSgpKSxkPVwiNzJcIixoPW51bGwpfX12YXIgbT17UExBVEZPUk06XCJjb3Jkb3ZhXCIsaHR0cEdldDpmdW5jdGlvbigpe3JldHVybiB0eXBlb2YgSW1hZ2UhPWM/by5hcHBseSh0aGlzLGFyZ3VtZW50cyk6dS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGh0dHBQb3N0OnMsU3RvcmFnZTphLElPOmYsZ2V0Q3Jvc3NQdWJsaXNoZXJJZDpmdW5jdGlvbigpe3JldHVybiBnKCksaH0sZ2V0QXBwTmFtZTpmdW5jdGlvbigpe3JldHVybiBsfSxnZXRBcHBWZXJzaW9uOmZ1bmN0aW9uKCl7cmV0dXJuIGx9LGdldFZpc2l0b3JJZDpmdW5jdGlvbigpe3JldHVybiBnKCksdn0sZ2V0VmlzaXRvcklkU3VmZml4OmZ1bmN0aW9uKCl7cmV0dXJuIGR9LGdldERldmljZU1vZGVsOmZ1bmN0aW9uKCl7cmV0dXJuIHR5cGVvZiBkZXZpY2UhPWMmJmkudG4oZGV2aWNlLm1vZGVsKXx8bH0sZ2V0UGxhdGZvcm1WZXJzaW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHR5cGVvZiBkZXZpY2UhPWMmJmkudG4oZGV2aWNlLmNvcmRvdmEpJiZkZXZpY2UuY29yZG92YXx8bH0sZ2V0UGxhdGZvcm1OYW1lOmZ1bmN0aW9uKCl7cmV0dXJuXCJqc1wifSxnZXRSdW50aW1lTmFtZTpmdW5jdGlvbigpe3JldHVybiB0eXBlb2YgZGV2aWNlIT1jJiZpLnRuKGRldmljZS5wbGF0Zm9ybSkmJlwiY29yZG92YVwiK2RldmljZS5wbGF0Zm9ybXx8XCJjb3Jkb3ZhXCJ9LGdldFJ1bnRpbWVWZXJzaW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHR5cGVvZiBkZXZpY2UhPWMmJmkudG4oZGV2aWNlLnZlcnNpb24pfHxsfSxnZXREaXNwbGF5UmVzb2x1dGlvbjpmdW5jdGlvbigpe3ZhciBuPXR5cGVvZiB3aW5kb3chPWMmJmkudG4od2luZG93LnNjcmVlbikmJmkudG4od2luZG93LnNjcmVlbi5hdmFpbFdpZHRoKSYmd2luZG93LnNjcmVlbi5hdmFpbFdpZHRofHwwLHQ9dHlwZW9mIHdpbmRvdyE9YyYmaS50bih3aW5kb3cuc2NyZWVuKSYmaS50bih3aW5kb3cuc2NyZWVuLmF2YWlsSGVpZ2h0KSYmd2luZG93LnNjcmVlbi5hdmFpbEhlaWdodHx8MDtyZXR1cm4gMDxuJiYwPHQ/bitcInhcIit0OnB9LGdldExhbmd1YWdlOmZ1bmN0aW9uKCl7cmV0dXJuIHR5cGVvZiB3aW5kb3chPWMmJmkudG4od2luZG93Lm5hdmlnYXRvcikmJmkudG4od2luZG93Lm5hdmlnYXRvci5sYW5ndWFnZSkmJndpbmRvdy5uYXZpZ2F0b3IubGFuZ3VhZ2V8fGx9LGdldFBhY2thZ2VOYW1lOmZ1bmN0aW9uKCl7cmV0dXJuXCJcIn0saXNDb25uZWN0aW9uQXZhaWxhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIHR5cGVvZiB3aW5kb3c9PWN8fCghaS50bih3aW5kb3cubmF2aWdhdG9yKXx8IWkudG4od2luZG93Lm5hdmlnYXRvci5vbkxpbmUpfHx3aW5kb3cubmF2aWdhdG9yLm9uTGluZSl9LGlzQ29tcGF0aWJsZTpfLGlzQ29ubmVjdGlvblNlY3VyZTpmdW5jdGlvbigpe3JldHVybiB0eXBlb2YgZG9jdW1lbnQhPWMmJm51bGwhPWRvY3VtZW50JiZcInNcIj09PWRvY3VtZW50LmxvY2F0aW9uLmhyZWYuY2hhckF0KDQpfX07dC5leHBvcnRzPW19LHsxNzoxNywyMToyMSwyNzoyNyw0Njo0Niw0ODo0OCw1MDo1MH1dLDM0OltmdW5jdGlvbihuLHQsZSl7dmFyIGk9bigyMSkscj1uKDIwKSxvPW4oMTcpLHU9big1MCkscz1uKDQ4KS5ncixhPW4oNDgpLl9yLGY9big0NiksYz1uKDI3KSxsPVwidW5kZWZpbmVkXCIscD10eXBlb2YgZG9jdW1lbnQhPWwmJmRvY3VtZW50fHx2b2lkIDAsdj1vLkQsZD1vLlF0LGg9e1BMQVRGT1JNOlwiaHRtbDVcIixodHRwR2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHR5cGVvZiBJbWFnZSE9bD91LmFwcGx5KHRoaXMsYXJndW1lbnRzKTpzLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0saHR0cFBvc3Q6YSxTdG9yYWdlOmYsSU86YyxnZXRDcm9zc1B1Ymxpc2hlcklkOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9LGdldEFwcE5hbWU6ZnVuY3Rpb24oKXtyZXR1cm4gcCYmaS50bihwLnRpdGxlKSYmcC50aXRsZXx8dn0sZ2V0QXBwVmVyc2lvbjpmdW5jdGlvbigpe3JldHVybiB2fSxnZXRWaXNpdG9ySWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXREZXZpY2VNb2RlbCgpKyArbmV3IERhdGUrfn4oMWUzKk1hdGgucmFuZG9tKCkpfSxnZXRWaXNpdG9ySWRTdWZmaXg6ZnVuY3Rpb24oKXtyZXR1cm5cIjcyXCJ9LGdldERldmljZU1vZGVsOmZ1bmN0aW9uKCl7cmV0dXJuIHR5cGVvZiB3aW5kb3chPWwmJmkudG4od2luZG93Lm5hdmlnYXRvcikmJmkucGUod2luZG93Lm5hdmlnYXRvci5wbGF0Zm9ybSxcIlwiKXx8XCJcIn0sZ2V0UGxhdGZvcm1WZXJzaW9uOmZ1bmN0aW9uKCl7cmV0dXJuIGkucGUoci51ZSgpK1wiIFwiK3Iuc2UoKSxcIlwiKX0sZ2V0UGxhdGZvcm1OYW1lOmZ1bmN0aW9uKCl7cmV0dXJuXCJqc1wifSxnZXRSdW50aW1lTmFtZTpmdW5jdGlvbigpe3JldHVyblwiaHRtbFwifSxnZXRSdW50aW1lVmVyc2lvbjpmdW5jdGlvbigpe3JldHVyblwiNVwifSxnZXREaXNwbGF5UmVzb2x1dGlvbjpmdW5jdGlvbigpe3ZhciBuLHQ7dHlwZW9mIHdpbmRvdyE9bCYmd2luZG93LnNjcmVlbiYmd2luZG93LnNjcmVlbi53aWR0aCYmKG49d2luZG93LnNjcmVlbi53aWR0aCksdHlwZW9mIHdpbmRvdyE9bCYmd2luZG93LnNjcmVlbiYmd2luZG93LnNjcmVlbi53aWR0aCYmKHQ9d2luZG93LnNjcmVlbi5oZWlnaHQpO3ZhciBlPTE7cmV0dXJuIHR5cGVvZiB3aW5kb3chPWwmJndpbmRvdy5kZXZpY2VQaXhlbFJhdGlvJiYoZT13aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyksMDxuJiYwPHQ/KG4qPWUpK1wieFwiKyh0Kj1lKTpkfSxnZXRBcHBsaWNhdGlvblJlc29sdXRpb246ZnVuY3Rpb24oKXt2YXIgbix0O3R5cGVvZiB3aW5kb3chPWwmJndpbmRvdy5pbm5lcldpZHRoJiYobj13aW5kb3cuaW5uZXJXaWR0aCksdHlwZW9mIHdpbmRvdyE9bCYmd2luZG93LmlubmVySGVpZ2h0JiYodD13aW5kb3cuaW5uZXJIZWlnaHQpO3ZhciBlPTE7cmV0dXJuIHR5cGVvZiB3aW5kb3chPWwmJndpbmRvdy5kZXZpY2VQaXhlbFJhdGlvJiYoZT13aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyksMDxuJiYwPHQ/KG4qPWUpK1wieFwiKyh0Kj1lKTpkfSxnZXRMYW5ndWFnZTpmdW5jdGlvbigpe3JldHVybiB0eXBlb2Ygd2luZG93IT1sJiZpLnRuKHdpbmRvdy5uYXZpZ2F0b3IpJiZpLnBlKHdpbmRvdy5uYXZpZ2F0b3IubGFuZ3VhZ2UsXCJcIil8fHZ9LGdldFBhY2thZ2VOYW1lOmZ1bmN0aW9uKCl7cmV0dXJuXCJcIn0saXNDb25uZWN0aW9uQXZhaWxhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIHR5cGVvZiB3aW5kb3c9PWx8fCghaS50bih3aW5kb3cubmF2aWdhdG9yKXx8IWkudG4od2luZG93Lm5hdmlnYXRvci5vbkxpbmUpfHx3aW5kb3cubmF2aWdhdG9yLm9uTGluZSl9LGlzQ29tcGF0aWJsZTpmdW5jdGlvbigpe3JldHVybiB0eXBlb2Ygd2luZG93IT09bCYmaS50bih3aW5kb3cubmF2aWdhdG9yKSYmaS50bih3aW5kb3cubG9jYWxTdG9yYWdlKSYmaS50bihwKSYmISFwLmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIikuZ2V0Q29udGV4dH0saXNDb25uZWN0aW9uU2VjdXJlOmZ1bmN0aW9uKCl7cmV0dXJuISFwJiZcInNcIj09PXAubG9jYXRpb24uaHJlZi5jaGFyQXQoNCl9fTt0LmV4cG9ydHM9aH0sezE3OjE3LDIwOjIwLDIxOjIxLDI3OjI3LDQ2OjQ2LDQ4OjQ4LDUwOjUwfV0sMzU6W2Z1bmN0aW9uKG4sdCxlKXt2YXIgaT1uKDIxKSxyPW4oMTcpLG89big0OCkuZ3IsdT1uKDQ4KS5fcixzPW4oNDYpLGE9bigyNyksZj1cInVuZGVmaW5lZFwiLGM9ci5ELGw9ci5RdCxwPW51bGwsdj1udWxsLGQ9bnVsbDtmdW5jdGlvbiBoKCl7aWYobnVsbD09cClpZih0eXBlb2YganNtYWYhPWYmJmkudG4oanNtYWYuaGFyZHdhcmVJZCkpe3ZhciBuPWpzbWFmLmhhcmR3YXJlSWQ7dj1cIjMxXCIsZD1wPW59ZWxzZSBwPStuZXcgRGF0ZSt+figxZTMqTWF0aC5yYW5kb20oKSksdj1cIjcyXCIsZD1udWxsfWZ1bmN0aW9uIF8oKXtyZXR1cm4gdHlwZW9mIGpzbWFmPT1mfHwhaS50bihqc21hZi5uZXR3b3JrU3RhdHVzKXx8XCJjb25uZWN0ZWRcIj09anNtYWYubmV0d29ya1N0YXR1c312YXIgZz17UExBVEZPUk06XCJqc21hZlwiLGh0dHBHZXQ6byxodHRwUG9zdDp1LFN0b3JhZ2U6cyxJTzphLGdldENyb3NzUHVibGlzaGVySWQ6ZnVuY3Rpb24oKXtyZXR1cm4gaCgpLGR9LGdldEFwcE5hbWU6ZnVuY3Rpb24oKXtyZXR1cm4gY30sZ2V0QXBwVmVyc2lvbjpmdW5jdGlvbigpe3JldHVybiBjfSxnZXRWaXNpdG9ySWQ6ZnVuY3Rpb24oKXtyZXR1cm4gaCgpLHB9LGdldFZpc2l0b3JJZFN1ZmZpeDpmdW5jdGlvbigpe3JldHVybiBoKCksdn0sZ2V0RGV2aWNlTW9kZWw6ZnVuY3Rpb24oKXtyZXR1cm4gdHlwZW9mIGpzbWFmIT1mJiZpLnRuKGpzbWFmLnBsYXRmb3JtKT9qc21hZi5wbGF0Zm9ybTpjfSxnZXRQbGF0Zm9ybU5hbWU6ZnVuY3Rpb24oKXtyZXR1cm5cImpzXCJ9LGdldFBsYXRmb3JtVmVyc2lvbjpmdW5jdGlvbigpe3JldHVybiBjfSxnZXRSdW50aW1lTmFtZTpmdW5jdGlvbigpe3JldHVyblwianNtYWZcIn0sZ2V0UnVudGltZVZlcnNpb246ZnVuY3Rpb24oKXtyZXR1cm4gdHlwZW9mIGpzbWFmIT1mJiZpLnRuKGpzbWFmLnZlcnNpb24pP2pzbWFmLnZlcnNpb246Y30sZ2V0RGlzcGxheVJlc29sdXRpb246ZnVuY3Rpb24oKXtyZXR1cm4gdHlwZW9mIGpzbWFmIT1mJiZpLnRuKGpzbWFmLnNjcmVlbldpZHRoKSYmaS50bihqc21hZi5zY3JlZW5IZWlnaHQpP2pzbWFmLnNjcmVlbldpZHRoK1wieFwiK2pzbWFmLnNjcmVlbkhlaWdodDpsfSxnZXRMYW5ndWFnZTpmdW5jdGlvbigpe3JldHVybiB0eXBlb2YganNtYWYhPWYmJmkudG4oanNtYWYubG9jYWxlKT9qc21hZi5sb2NhbGU6Y30sZ2V0UGFja2FnZU5hbWU6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH0saXNDb25uZWN0aW9uQXZhaWxhYmxlOl8saXNDb21wYXRpYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIHR5cGVvZiBqc21hZiE9Zn0sc2V0VGltZW91dDpmdW5jdGlvbihuLHQpe3JldHVybiBqc21hZi5zZXRUaW1lb3V0KG4sdCl9LHNldEludGVydmFsOmZ1bmN0aW9uKG4sdCl7cmV0dXJuIGpzbWFmLnNldEludGVydmFsKG4sdCl9LGNsZWFyVGltZW91dDpmdW5jdGlvbihuKXtyZXR1cm4ganNtYWYuY2xlYXJUaW1lb3V0KG4pfSxjbGVhckludGVydmFsOmZ1bmN0aW9uKG4pe3JldHVybiBqc21hZi5jbGVhckludGVydmFsKG4pfSxnZXREZXZpY2VBcmNoaXRlY3R1cmU6ZnVuY3Rpb24oKXtpZih0eXBlb2YganNtYWY9PWZ8fCFpLnRuKGpzbWFmLnBsYXRmb3JtKSl2YXIgbj1jO3JldHVyblwicHMzXCI9PWpzbWFmLnBsYXRmb3JtP249XCJjZWxsXCI6XCJwczRcIj09anNtYWYucGxhdGZvcm0/bj1cInBzNFwiOlwidml0YVwiPT1qc21hZi5wbGF0Zm9ybSYmKG49XCJ2aXRhXCIpLG59LGdldENvbm5lY3Rpb25UeXBlOmZ1bmN0aW9uKCl7cmV0dXJuIF8oKSYmdHlwZW9mIGpzbWFmIT1mJiZpLnRuKGpzbWFmLmNvbm5lY3Rpb25UeXBlKT9cIndpcmVkXCI9PWpzbWFmLmNvbm5lY3Rpb25UeXBlP1wiZXRoXCI6XCJ3aXJlbGVzc1wiPT1qc21hZi5jb25uZWN0aW9uVHlwZT9cIndpZmlcIjpcInBob25lXCI9PWpzbWFmLmNvbm5lY3Rpb25UeXBlP1wid3dhblwiOmM6Y30sZ2V0RGV2aWNlSmFpbEJyb2tlbkZsYWc6ZnVuY3Rpb24oKXtyZXR1cm4gY30saXNDb25uZWN0aW9uU2VjdXJlOmZ1bmN0aW9uKCl7cmV0dXJuIHR5cGVvZiBkb2N1bWVudCE9ZiYmbnVsbCE9ZG9jdW1lbnQmJlwic1wiPT09ZG9jdW1lbnQubG9jYXRpb24uaHJlZi5jaGFyQXQoNCl9fTt0LmV4cG9ydHM9Z30sezE3OjE3LDIxOjIxLDI3OjI3LDQ2OjQ2LDQ4OjQ4fV0sMzY6W2Z1bmN0aW9uKG4sdCxlKXt2YXIgaT1uKDUwKSxyPW4oNTIpLm1yLG89big0NiksdT1uKDI5KSxzPW4oMTcpLGE9cy5ELGY9cy5RdCxjPXtQTEFURk9STTpcImdlbmVyaWNcIixodHRwR2V0OmksaHR0cFBvc3Q6cixTdG9yYWdlOm8sSU86dSxvbkRhdGFGZXRjaDpmdW5jdGlvbihuKXtuKCl9LGdldENyb3NzUHVibGlzaGVySWQ6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH0sZ2V0QXBwTmFtZTpmdW5jdGlvbigpe3JldHVybiBhfSxnZXRBcHBWZXJzaW9uOmZ1bmN0aW9uKCl7cmV0dXJuIGF9LGdldFZpc2l0b3JJZDpmdW5jdGlvbigpe3JldHVybituZXcgRGF0ZSt+figxZTMqTWF0aC5yYW5kb20oKSl9LGdldFZpc2l0b3JJZFN1ZmZpeDpmdW5jdGlvbigpe3JldHVyblwiNzJcIn0sZ2V0RGV2aWNlTW9kZWw6ZnVuY3Rpb24oKXtyZXR1cm4gYX0sZ2V0UGxhdGZvcm1WZXJzaW9uOmZ1bmN0aW9uKCl7cmV0dXJuIGF9LGdldFBsYXRmb3JtTmFtZTpmdW5jdGlvbigpe3JldHVyblwianNcIn0sZ2V0UnVudGltZU5hbWU6ZnVuY3Rpb24oKXtyZXR1cm4gYX0sZ2V0UnVudGltZVZlcnNpb246ZnVuY3Rpb24oKXtyZXR1cm4gYX0sZ2V0RGlzcGxheVJlc29sdXRpb246ZnVuY3Rpb24oKXtyZXR1cm4gZn0sZ2V0QXBwbGljYXRpb25SZXNvbHV0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIGZ9LGdldExhbmd1YWdlOmZ1bmN0aW9uKCl7cmV0dXJuIGF9LGdldFBhY2thZ2VOYW1lOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9LGlzQ29ubmVjdGlvbkF2YWlsYWJsZTpmdW5jdGlvbigpe3JldHVybiEwfSxpc0NvbXBhdGlibGU6ZnVuY3Rpb24oKXtyZXR1cm4hMH0sYXV0b1NlbGVjdDpmdW5jdGlvbigpe30sYXV0b0RldGVjdDpmdW5jdGlvbigpe30sc2V0UGxhdGZvcm1BUEk6ZnVuY3Rpb24oKXt9LGlzQ3Jvc3NQdWJsaXNoZXJJZENoYW5nZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hMX0sc2V0VGltZW91dDpmdW5jdGlvbihuLHQpe3JldHVybiBzZXRUaW1lb3V0KG4sdCl9LHNldEludGVydmFsOmZ1bmN0aW9uKG4sdCl7cmV0dXJuIHNldEludGVydmFsKG4sdCl9LGNsZWFyVGltZW91dDpmdW5jdGlvbihuKXtyZXR1cm4gY2xlYXJUaW1lb3V0KG4pfSxjbGVhckludGVydmFsOmZ1bmN0aW9uKG4pe3JldHVybiBjbGVhckludGVydmFsKG4pfSxnZXREZXZpY2VBcmNoaXRlY3R1cmU6ZnVuY3Rpb24oKXtyZXR1cm4gYX0sZ2V0Q29ubmVjdGlvblR5cGU6ZnVuY3Rpb24oKXtyZXR1cm4gYX0sZ2V0RGV2aWNlSmFpbEJyb2tlbkZsYWc6ZnVuY3Rpb24oKXtyZXR1cm4gYX0saXNDb25uZWN0aW9uU2VjdXJlOmZ1bmN0aW9uKCl7cmV0dXJuITF9LHByb2Nlc3NNZWFzdXJlbWVudExhYmVsczpmdW5jdGlvbigpe319O3QuZXhwb3J0cz1jfSx7MTc6MTcsMjk6MjksNDY6NDYsNTA6NTAsNTI6NTJ9XSwzNzpbZnVuY3Rpb24obix0LGUpe3ZhciBpPW4oMjEpLHI9bigxNyksbz1uKDUwKSx1PW4oNDgpLmdyLHM9big1MikubXIsYT1uKDQ2KSxmPW4oMjkpLGM9XCJ1bmRlZmluZWRcIixsPXIuRCxwPXIuUXQsdj1udWxsLGQ9bnVsbCxoPW51bGw7ZnVuY3Rpb24gXygpe2lmKG51bGw9PXYpe3ZhciBuPWZ1bmN0aW9uKCl7aWYodHlwZW9mIG5zXyE9YyYmaS50bihuc18ubmV0Y2FzdERldmljZSkpe2lmKGkudG4obnNfLm5ldGNhc3REZXZpY2UubmV0X21hY0FkZHJlc3MpJiZpLmx0KG5zXy5uZXRjYXN0RGV2aWNlLm5ldF9tYWNBZGRyZXNzKSlyZXR1cm4gbnNfLm5ldGNhc3REZXZpY2UubmV0X21hY0FkZHJlc3M7aWYoaS50bihuc18ubmV0Y2FzdERldmljZS5zZXJpYWxOdW1iZXIpJiZpLmx0KG5zXy5uZXRjYXN0RGV2aWNlLnNlcmlhbE51bWJlcikpcmV0dXJuIG5zXy5uZXRjYXN0RGV2aWNlLnNlcmlhbE51bWJlcn1yZXR1cm4gbnVsbH0oKTtudWxsIT1uPyhkPVwiMzFcIixoPXY9bik6KHY9K25ldyBEYXRlK35+KDFlMypNYXRoLnJhbmRvbSgpKSxkPVwiNzJcIixoPW51bGwpfX12YXIgZz17UExBVEZPUk06XCJuZXRjYXN0XCIsaHR0cEdldDpmdW5jdGlvbigpe3JldHVybiB0eXBlb2YgSW1hZ2UhPWM/by5hcHBseSh0aGlzLGFyZ3VtZW50cyk6dS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGh0dHBQb3N0OnMsU3RvcmFnZTphLElPOmYsZ2V0Q3Jvc3NQdWJsaXNoZXJJZDpmdW5jdGlvbigpe3JldHVybiBfKCksaH0sZ2V0QXBwTmFtZTpmdW5jdGlvbigpe3JldHVybiBsfSxnZXRBcHBWZXJzaW9uOmZ1bmN0aW9uKCl7cmV0dXJuIGx9LGdldFZpc2l0b3JJZDpmdW5jdGlvbigpe3JldHVybiBfKCksdn0sZ2V0VmlzaXRvcklkU3VmZml4OmZ1bmN0aW9uKCl7cmV0dXJuIGR9LGdldERldmljZU1vZGVsOmZ1bmN0aW9uKCl7cmV0dXJuIHR5cGVvZiBuc18hPWMmJmkudG4obnNfLm5ldGNhc3REZXZpY2UpJiZpLnRuKG5zXy5uZXRjYXN0RGV2aWNlLm1vZGVsTmFtZSkmJm5zXy5uZXRjYXN0RGV2aWNlLm1vZGVsTmFtZXx8bH0sZ2V0UGxhdGZvcm1WZXJzaW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHR5cGVvZiBuc18hPWMmJmkudG4obnNfLm5ldGNhc3REZXZpY2UpJiZpLnBlKG5zXy5uZXRjYXN0RGV2aWNlLnZlcnNpb24sbCl8fGx9LGdldFBsYXRmb3JtTmFtZTpmdW5jdGlvbigpe3JldHVyblwianNcIn0sZ2V0UnVudGltZU5hbWU6ZnVuY3Rpb24oKXtyZXR1cm4gdHlwZW9mIG5zXyE9YyYmaS50bihuc18ubmV0Y2FzdERldmljZSk/XCJsZy1vdHRcIitpLnBlKG5zXy5uZXRjYXN0RGV2aWNlLnBsYXRmb3JtLGwpOmx9LGdldFJ1bnRpbWVWZXJzaW9uOmZ1bmN0aW9uKCl7aWYodHlwZW9mIG5zXyE9YyYmaS50bihuc18ubmV0Y2FzdERldmljZSkpe2lmKGkudG4obnNfLm5ldGNhc3REZXZpY2UudmVyc2lvbikpcmV0dXJuIG5zXy5uZXRjYXN0RGV2aWNlLnZlcnNpb247aWYoaS50bihuc18ubmV0Y2FzdERldmljZS5od1ZlcnNpb24pKXJldHVybiBuc18ubmV0Y2FzdERldmljZS5od1ZlcnNpb247aWYoaS50bihuc18ubmV0Y2FzdERldmljZS5zd1ZlcnNpb24pKXJldHVybiBuc18ubmV0Y2FzdERldmljZS5zd1ZlcnNpb259cmV0dXJuIGx9LGdldERpc3BsYXlSZXNvbHV0aW9uOmZ1bmN0aW9uKCl7aWYodHlwZW9mIG5zXyE9YyYmaS50bihuc18ubmV0Y2FzdERldmljZSkmJmkudG4obnNfLm5ldGNhc3REZXZpY2Uub3NkUmVzb2x1dGlvbikpc3dpdGNoKG5zXy5uZXRjYXN0RGV2aWNlLm9zZFJlc29sdXRpb24pe2Nhc2UgMDpyZXR1cm5cIjY0MHg0ODBcIjtjYXNlIDE6cmV0dXJuXCI3MjB4NTc2XCI7Y2FzZSAyOnJldHVyblwiMTI4MHg3MjBcIjtjYXNlIDM6cmV0dXJuXCIxOTIweDEwODBcIjtjYXNlIDQ6cmV0dXJuXCIxMzY2eDc2OFwifXJldHVybiBwfSxnZXRMYW5ndWFnZTpmdW5jdGlvbigpe3JldHVybiB0eXBlb2YgbnNfIT1jJiZpLnRuKG5zXy5uZXRjYXN0RGV2aWNlKSYmaS5wZShuc18ubmV0Y2FzdERldmljZS50dkxhbmd1YWdlMixpLnBlKHdpbmRvdy5uYXZpZ2F0b3IubGFuZ3VhZ2UpKXx8bH0sZ2V0UGFja2FnZU5hbWU6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH0saXNDb25uZWN0aW9uQXZhaWxhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIHR5cGVvZiBuc18ubmV0Y2FzdERldmljZT09PWN8fCEhbnNfLm5ldGNhc3REZXZpY2UubmV0X2lzQ29ubmVjdGVkfSxnZXRDb25uZWN0aW9uVHlwZTpmdW5jdGlvbigpe2lmKHR5cGVvZiBuc18ubmV0Y2FzdERldmljZSE9PWMpe2lmKDA9PT1uc18ubmV0Y2FzdERldmljZS5uZXR3b3JrVHlwZSlyZXR1cm5cImV0aFwiO2lmKDE9PT1uc18ubmV0Y2FzdERldmljZS5uZXR3b3JrVHlwZSlyZXR1cm5cIndpZmlcIn1yZXR1cm4gbH0saXNDb21wYXRpYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIHR5cGVvZiBuc18hPWMmJnR5cGVvZiBuc18ubmV0Y2FzdERldmljZSE9YyYmdHlwZW9mIG5zXy5uZXRjYXN0RGV2aWNlLnZlcnNpb24hPWMmJnR5cGVvZiB3aW5kb3chPWMmJnR5cGVvZiB3aW5kb3cubmF2aWdhdG9yIT1jfSxpc0Nvbm5lY3Rpb25TZWN1cmU6ZnVuY3Rpb24oKXtyZXR1cm4gdHlwZW9mIGRvY3VtZW50IT1jJiZudWxsIT1kb2N1bWVudCYmXCJzXCI9PT1kb2N1bWVudC5sb2NhdGlvbi5ocmVmLmNoYXJBdCg0KX19O3QuZXhwb3J0cz1nfSx7MTc6MTcsMjE6MjEsMjk6MjksNDY6NDYsNDg6NDgsNTA6NTAsNTI6NTJ9XSwzODpbZnVuY3Rpb24oZCxoLF8peyhmdW5jdGlvbihuKXt2YXIgdD1kKDIxKSxlPWQoMTcpLGk9ZCg1MikubXIscj1kKDQ2KSxvPWQoMjkpLHU9XCJ1bmRlZmluZWRcIixzPWUuRCxhPWUuUXQsZj1udWxsLGM9bnVsbCxsPW51bGw7ZnVuY3Rpb24gcCgpe251bGw9PWYmJihmPStuZXcgRGF0ZSt+figxZTMqTWF0aC5yYW5kb20oKSksYz1cIjcyXCIsbD1udWxsKX12YXIgdj17UExBVEZPUk06XCJub2RlanNcIixodHRwR2V0OmZ1bmN0aW9uKG4sdCl7bmV3IGZ1bmN0aW9uKGUpe3ZhciBpPXRoaXMscj0wO2kuc2VuZD1mdW5jdGlvbihuKXtkKFwiaHR0cFwiKS5nZXQobixmdW5jdGlvbihuKXt2YXIgdD1uLnN0YXR1c0NvZGU7aWYoKDMwMj09dHx8MzAxPT10KSYmcjwyMCYmbi5oZWFkZXJzJiZuLmhlYWRlcnMubG9jYXRpb24pcmV0dXJuIHIrKyx2b2lkIGkuc2VuZChuLmhlYWRlcnMubG9jYXRpb24pO2UodCl9KS5vbihcImVycm9yXCIsZnVuY3Rpb24oKXtlKCl9KX19KHQpLnNlbmQobil9LGh0dHBQb3N0OmksU3RvcmFnZTpyLElPOm8sZ2V0Q3Jvc3NQdWJsaXNoZXJJZDpmdW5jdGlvbigpe3JldHVybiBwKCksbH0sZ2V0VmlzaXRvcklkOmZ1bmN0aW9uKCl7cmV0dXJuIHAoKSxmfSxnZXRWaXNpdG9ySWRTdWZmaXg6ZnVuY3Rpb24oKXtyZXR1cm4gY30sZ2V0UGxhdGZvcm1WZXJzaW9uOmZ1bmN0aW9uKCl7dmFyIG49ZChcIm9zXCIpO3JldHVybltuLnR5cGUoKSxuLnBsYXRmb3JtKCksbi5yZWxlYXNlKCldLmpvaW4oXCI7XCIpfSxnZXRQbGF0Zm9ybU5hbWU6ZnVuY3Rpb24oKXtyZXR1cm5cImpzXCJ9LGdldFJ1bnRpbWVOYW1lOmZ1bmN0aW9uKCl7cmV0dXJuXCJub2RlanNcIn0sZ2V0UnVudGltZVZlcnNpb246ZnVuY3Rpb24oKXtyZXR1cm4gdHlwZW9mIHByb2Nlc3M9PT11fHx0Lmp0KHByb2Nlc3MudmVyc2lvbik/czpwcm9jZXNzLnZlcnNpb259LGdldERpc3BsYXlSZXNvbHV0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIGF9LGlzQ29tcGF0aWJsZTpmdW5jdGlvbigpe3JldHVybiB0eXBlb2Ygd2luZG93PT09dSYmdHlwZW9mIGghPT11JiZ0eXBlb2YgXyE9PXUmJnR5cGVvZiBuIT09dSYmdHlwZW9mIHByb2Nlc3MhPT11JiZ0LnRuKHByb2Nlc3MudmVyc2lvbil9LGlzQ29ubmVjdGlvblNlY3VyZTpmdW5jdGlvbigpe3JldHVybiExfX07aC5leHBvcnRzPXZ9KS5jYWxsKHRoaXMsXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGdsb2JhbD9nbG9iYWw6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGY/c2VsZjpcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp7fSl9LHsxNzoxNywyMToyMSwyOToyOSw0Njo0Niw1Mjo1Mix1bmRlZmluZWQ6dm9pZCAwfV0sMzk6W2Z1bmN0aW9uKG4sdCxlKXt2YXIgaT1uKDI0KSxyPW4oMzIpLG89bigzNiksdT1uKDQwKSxzPW4oMzcpLGE9big0MyksZj1uKDMzKSxjPW4oNDEpLGw9bigzMCkscD1uKDQ0KSx2PW4oMzEpLGQ9big0MiksaD1uKDM1KSxfPW4oMzgpLGc9bigzNCksbT0hMTtvLmF1dG9EZXRlY3Q9ZnVuY3Rpb24oKXttfHwobT0hMCx1LmlzQ29tcGF0aWJsZSgpP2kuZXh0ZW5kKG8sdSk6cy5pc0NvbXBhdGlibGUoKT9pLmV4dGVuZChvLHMpOmEuaXNDb21wYXRpYmxlKCk/aS5leHRlbmQobyxhKTpmLmlzQ29tcGF0aWJsZSgpP2kuZXh0ZW5kKG8sZik6Yy5pc0NvbXBhdGlibGUoKT9pLmV4dGVuZChvLGMpOmwuaXNDb21wYXRpYmxlKCk/aS5leHRlbmQobyxsKTpwLmlzQ29tcGF0aWJsZSgpP2kuZXh0ZW5kKG8scCk6di5pc0NvbXBhdGlibGUoKT9pLmV4dGVuZChvLHYpOmQuaXNDb21wYXRpYmxlKCk/aS5leHRlbmQobyxkKTpoLmlzQ29tcGF0aWJsZSgpP2kuZXh0ZW5kKG8saCk6Xy5pc0NvbXBhdGlibGUoKT9pLmV4dGVuZChvLF8pOmcuaXNDb21wYXRpYmxlKCkmJmkuZXh0ZW5kKG8sZykpfSxvLmF1dG9TZWxlY3Q9by5hdXRvRGV0ZWN0LG8uc2V0UGxhdGZvcm1BUEk9ZnVuY3Rpb24obil7c3dpdGNoKG09ITAsbil7Y2FzZSByLlNtYXJ0VFY6aS5leHRlbmQobyx1KTticmVhaztjYXNlIHIuTmV0Y2FzdDppLmV4dGVuZChvLHMpO2JyZWFrO2Nhc2Ugci5Db3Jkb3ZhOmkuZXh0ZW5kKG8sZik7YnJlYWs7Y2FzZSByLlRyaWxpdGhpdW06aS5leHRlbmQobyxjKTticmVhaztjYXNlIHIuQXBwbGVUVjppLmV4dGVuZChvLGwpO2JyZWFrO2Nhc2Ugci5DaHJvbWVjYXN0OmkuZXh0ZW5kKG8sdik7YnJlYWs7Y2FzZSByLlhib3g6aS5leHRlbmQobyxwKTticmVhaztjYXNlIHIud2ViT1M6aS5leHRlbmQobyxhKTticmVhaztjYXNlIHIudHZPUzppLmV4dGVuZChvLGQpO2JyZWFrO2Nhc2Ugci5KU01BRjppLmV4dGVuZChvLGgpO2JyZWFrO2Nhc2Ugci5ub2RlanM6aS5leHRlbmQobyxfKTticmVhaztjYXNlIHIuaHRtbDU6aS5leHRlbmQobyxnKTticmVhaztjYXNlIHIuU2tlbGV0b246YnJlYWs7ZGVmYXVsdDptPSExfX19LHsyNDoyNCwzMDozMCwzMTozMSwzMjozMiwzMzozMywzNDozNCwzNTozNSwzNjozNiwzNzozNywzODozOCw0MDo0MCw0MTo0MSw0Mjo0Miw0Mzo0Myw0NDo0NH1dLDQwOltmdW5jdGlvbihuLHQsZSl7dmFyIGk9bigyMSkscj1uKDE3KSxvPW4oNDgpLmdyLHU9big1MikubXIscz1uKDQ3KSxhPW4oMjgpLGY9XCJ1bmRlZmluZWRcIixjPXIuRCxsPXIuUXQscD1udWxsLHY9bnVsbCxkPW51bGw7ZnVuY3Rpb24gaCgpe2lmKG51bGw9PXApe3ZhciBuPWZ1bmN0aW9uKCl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIHNmfHxcIm9iamVjdFwiIT10eXBlb2Ygc2YuY29yZXx8XCJmdW5jdGlvblwiIT10eXBlb2Ygc2YuY29yZS5zZWZwbHVnaW4pcmV0dXJuIG51bGw7dmFyIG49c2YuY29yZS5zZWZwbHVnaW4oXCJOTkFWSVwiKTtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBuLk9wZW58fFwiZnVuY3Rpb25cIiE9dHlwZW9mIG4uRXhlY3V0ZSlyZXR1cm4gbnVsbDtuLk9wZW4oXCJOZXR3b3JrXCIsXCIxLjAwMVwiLFwiTmV0d29ya1wiKTt2YXIgdD1uLkV4ZWN1dGUoXCJHZXRNQUNcIixcIjBcIik7aWYoIWkuanQodCkpcmV0dXJuIHQ7aWYodD1uLkV4ZWN1dGUoXCJHZXRNQUNcIixcIjFcIiksIWkuanQodCkpcmV0dXJuIHQ7dmFyIGU9bi5FeGVjdXRlKFwiR2V0RGV2aWNlSURcIik7cmV0dXJuIGkuanQoZSk/bnVsbDplfSgpO251bGwhPW4/KHY9XCIzMVwiLGQ9cD1uKToocD0rbmV3IERhdGUrfn4oMWUzKk1hdGgucmFuZG9tKCkpLHY9XCI3MlwiLGQ9bnVsbCl9fXZhciBfPXtQTEFURk9STTpcInNtYXJ0dHZcIixodHRwR2V0Om8saHR0cFBvc3Q6dSxTdG9yYWdlOnMsSU86YSxnZXRDcm9zc1B1Ymxpc2hlcklkOmZ1bmN0aW9uKCl7cmV0dXJuIGgoKSxkfSxnZXRBcHBOYW1lOmZ1bmN0aW9uKCl7cmV0dXJuIGN9LGdldEFwcFZlcnNpb246ZnVuY3Rpb24oKXtyZXR1cm4gdHlwZW9mIHNmIT1mJiZpLnRuKHNmLmVudikmJmkudG4oc2YuZW52LmdldEFwcFZlcnNpb24pJiZzZi5lbnYuZ2V0QXBwVmVyc2lvbigpfHxjfSxnZXRWaXNpdG9ySWQ6ZnVuY3Rpb24oKXtyZXR1cm4gaCgpLHB9LGdldFZpc2l0b3JJZFN1ZmZpeDpmdW5jdGlvbigpe3JldHVybiB2fSxnZXREZXZpY2VNb2RlbDpmdW5jdGlvbigpe3JldHVybiB0eXBlb2Ygc2YhPWYmJmkudG4oc2YuY29yZSkmJmkudG4oc2YuY29yZS5nZXRFbnZWYWx1ZSkmJnNmLmNvcmUuZ2V0RW52VmFsdWUoXCJtb2RlbGlkXCIpfHxjfSxnZXRQbGF0Zm9ybVZlcnNpb246ZnVuY3Rpb24oKXtyZXR1cm5cIjIuMC4wXCJ9LGdldFBsYXRmb3JtTmFtZTpmdW5jdGlvbigpe3JldHVyblwianNcIn0sZ2V0UnVudGltZU5hbWU6ZnVuY3Rpb24oKXtpZih0eXBlb2Ygc2YhPT1mJiZpLnRuKHNmLmVudikmJmkudG4oc2YuZW52LmdldFByb2R1Y3RUeXBlKSYmaS50bihzZi5lbnYuUFJPRFVDVFRZUEVfVFYpJiZpLnRuKHNmLmVudi5QUk9EVUNUVFlQRV9NT05JVE9SKSYmaS50bihzZi5lbnYuUFJPRFVDVFRZUEVfQkQpKXt2YXIgbj1bXTtyZXR1cm4gbltzZi5lbnYuUFJPRFVDVFRZUEVfVFZdPVwic2Ftc3VuZy1zbWFydHR2LXR2XCIsbltzZi5lbnYuUFJPRFVDVFRZUEVfTU9OSVRPUl09XCJzYW1zdW5nLXNtYXJ0dHYtbW9uaXRvclwiLG5bc2YuZW52LlBST0RVQ1RUWVBFX0JEXT1cInNhbXN1bmctc21hcnR0di1iZFwiLG5bc2YuZW52LmdldFByb2R1Y3RUeXBlKCldfX0sZ2V0UnVudGltZVZlcnNpb246ZnVuY3Rpb24oKXtyZXR1cm4gdHlwZW9mIHNmIT1mJiZpLnRuKHNmLmVudikmJmkudG4oc2YuZW52LmdldEZpcm13YXJlVmVyKSYmc2YuZW52LmdldEZpcm13YXJlVmVyKCkudmVyc2lvbn0sZ2V0RGlzcGxheVJlc29sdXRpb246ZnVuY3Rpb24oKXtpZih0eXBlb2Ygc2Y9PT1mfHwhaS50bihzZi5lbnYpfHwhaS50bihzZi5lbnYuZ2V0U2NyZWVuU2l6ZSkpcmV0dXJuIGw7dmFyIG49c2YuZW52LmdldFNjcmVlblNpemUoKTtyZXR1cm4gbi53aWR0aCtcInhcIituLmhlaWdodH0sZ2V0TGFuZ3VhZ2U6ZnVuY3Rpb24oKXtpZih0eXBlb2Ygc2YhPT1mJiZpLnRuKHNmLmVudikmJmkudG4oc2YuZW52LmdldExhbmd1YWdlQ29kZSkpcmV0dXJuIHNmLmVudi5nZXRMYW5ndWFnZUNvZGUoKX0sZ2V0UGFja2FnZU5hbWU6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH0saXNDb25uZWN0aW9uQXZhaWxhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuITB9LGlzQ29tcGF0aWJsZTpmdW5jdGlvbigpe3JldHVybiB0eXBlb2Ygd2luZG93IT1mJiZ0eXBlb2Ygd2luZG93Lm5hdmlnYXRvciE9ZiYmdHlwZW9mIHNmIT1mJiZ0eXBlb2Ygc2YuZW52IT1mfSxnZXRDb25uZWN0aW9uVHlwZTpmdW5jdGlvbigpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBzZnx8XCJvYmplY3RcIiE9dHlwZW9mIHNmLmNvcmV8fFwiZnVuY3Rpb25cIiE9dHlwZW9mIHNmLmNvcmUuc2VmcGx1Z2luKXJldHVybiBjO3ZhciBuPXNmLmNvcmUuc2VmcGx1Z2luKFwiTkVUV09SS1wiKTtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBuLk9wZW58fFwiZnVuY3Rpb25cIiE9dHlwZW9mIG4uRXhlY3V0ZSlyZXR1cm4gYztuLk9wZW4oXCJOZXR3b3JrXCIsXCIxLjAwMVwiLFwiTmV0d29ya1wiKTt2YXIgdD1uLkV4ZWN1dGUoXCJHZXRBY3RpdmVUeXBlXCIpO3JldHVybiAwPT09dD9cIndpcmVkXCI6MT09PXQ/XCJ3aXJlbGVzc1wiOmN9LGlzQ29ubmVjdGlvblNlY3VyZTpmdW5jdGlvbigpe3JldHVybiB0eXBlb2YgZG9jdW1lbnQhPWYmJm51bGwhPWRvY3VtZW50JiZcInNcIj09PWRvY3VtZW50LmxvY2F0aW9uLmhyZWYuY2hhckF0KDQpfX07dC5leHBvcnRzPV99LHsxNzoxNywyMToyMSwyODoyOCw0Nzo0Nyw0ODo0OCw1Mjo1Mn1dLDQxOltmdW5jdGlvbihuLHQsZSl7dmFyIGk9bigyMSkscj1uKDE3KSxvPW4oNTEpLHU9big1Mikscz1uKDQ2KSxhPW4oMjkpLGY9XCJ1bmRlZmluZWRcIixjPXIuRCxsPXIuUXQscD1udWxsLHY9bnVsbCxkPW51bGw7ZnVuY3Rpb24gaCgpe2lmKG51bGw9PXApe3ZhciBuPWkubHQoZW5naW5lLnN0YXRzLmRldmljZS5pZCk/ZW5naW5lLnN0YXRzLmRldmljZS5pZDppLmx0KGVuZ2luZS5zdGF0cy5uZXR3b3JrLm1hYyk/ZW5naW5lLnN0YXRzLm5ldHdvcmsubWFjOm51bGw7bnVsbCE9bj8odj1cIjMxXCIsZD1wPW4pOihwPStuZXcgRGF0ZSt+figxZTMqTWF0aC5yYW5kb20oKSksdj1cIjcyXCIsZD1udWxsKX19dmFyIF89e1BMQVRGT1JNOlwidHJpbGl0aGl1bVwiLGh0dHBHZXQ6byxodHRwUG9zdDp1LFN0b3JhZ2U6cyxJTzphLGdldENyb3NzUHVibGlzaGVySWQ6ZnVuY3Rpb24oKXtyZXR1cm4gaCgpLGR9LGdldEFwcE5hbWU6ZnVuY3Rpb24oKXtyZXR1cm4gaS5sdChlbmdpbmUuc3RhdHMuYXBwbGljYXRpb24ubmFtZSk/ZW5naW5lLnN0YXRzLmFwcGxpY2F0aW9uLm5hbWU6Y30sZ2V0QXBwVmVyc2lvbjpmdW5jdGlvbigpe3JldHVybiBpLmx0KGVuZ2luZS5zdGF0cy5hcHBsaWNhdGlvbi52ZXJzaW9uKT9lbmdpbmUuc3RhdHMuYXBwbGljYXRpb24udmVyc2lvbjpjfSxnZXRWaXNpdG9ySWQ6ZnVuY3Rpb24oKXtyZXR1cm4gaCgpLHB9LGdldFZpc2l0b3JJZFN1ZmZpeDpmdW5jdGlvbigpe3JldHVybiB2fSxnZXREZXZpY2VNb2RlbDpmdW5jdGlvbigpe3JldHVybiBpLnBlKGVuZ2luZS5zdGF0cy5kZXZpY2UucGxhdGZvcm0sYyl9LGdldFBsYXRmb3JtVmVyc2lvbjpmdW5jdGlvbigpe3JldHVyblwiXCJ9LGdldFBsYXRmb3JtTmFtZTpmdW5jdGlvbigpe3JldHVyblwianNcIn0sZ2V0UnVudGltZU5hbWU6ZnVuY3Rpb24oKXtyZXR1cm5cInRyaWxpdGhpdW1cIn0sZ2V0UnVudGltZVZlcnNpb246ZnVuY3Rpb24oKXtyZXR1cm4gaS5wZShlbmdpbmUuc3RhdHMuZGV2aWNlLnZlcnNpb24sYyl9LGdldERpc3BsYXlSZXNvbHV0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHR5cGVvZiBzY3JlZW4hPWYmJnR5cGVvZiBzY3JlZW4uaGVpZ2h0IT1mJiZ0eXBlb2Ygc2NyZWVuLndpZHRoIT1mP3NjcmVlbi5oZWlnaHQrXCJ4XCIrc2NyZWVuLndpZHRoOmx9LGdldExhbmd1YWdlOmZ1bmN0aW9uKCl7cmV0dXJuIGN9LGdldFBhY2thZ2VOYW1lOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9LGlzQ29ubmVjdGlvbkF2YWlsYWJsZTpmdW5jdGlvbigpe3JldHVybiEwfSxpc0NvbXBhdGlibGU6ZnVuY3Rpb24oKXtyZXR1cm4gdHlwZW9mIGVuZ2luZSE9ZiYmdHlwZW9mIGVuZ2luZS5zdGF0cyE9Zn0saXNDb25uZWN0aW9uU2VjdXJlOmZ1bmN0aW9uKCl7cmV0dXJuIHR5cGVvZiBkb2N1bWVudCE9ZiYmbnVsbCE9ZG9jdW1lbnQmJlwic1wiPT09ZG9jdW1lbnQubG9jYXRpb24uaHJlZi5jaGFyQXQoNCl9fTt0LmV4cG9ydHM9X30sezE3OjE3LDIxOjIxLDI5OjI5LDQ2OjQ2LDUxOjUxLDUyOjUyfV0sNDI6W2Z1bmN0aW9uKG4sdCxlKXt2YXIgaT1uKDIxKSxyPW4oMTcpLG89big0OCkuZ3IsdT1uKDQ4KS5fcixzPW4oNDYpLGE9bigyNyksZj1cInVuZGVmaW5lZFwiLGM9ci5ELGw9ci5RdCxwPW51bGwsdj1udWxsLGQ9bnVsbDtmdW5jdGlvbiBoKCl7bnVsbD09cCYmKGkuanQoRGV2aWNlLnZlbmRvcklkZW50aWZpZXIpPyhwPStuZXcgRGF0ZSt+figxZTMqTWF0aC5yYW5kb20oKSksdj1cIjcyXCIpOihwPURldmljZS52ZW5kb3JJZGVudGlmaWVyLHY9XCI2MlwiKSxkPXApfXZhciBfPXtQTEFURk9STTpcInR2b3NcIixodHRwR2V0Om8saHR0cFBvc3Q6dSxTdG9yYWdlOnMsSU86YSxnZXRDcm9zc1B1Ymxpc2hlcklkOmZ1bmN0aW9uKCl7cmV0dXJuIGgoKSxkfSxnZXRBcHBOYW1lOmZ1bmN0aW9uKCl7cmV0dXJuIERldmljZS5hcHBJZGVudGlmaWVyfSxnZXRBcHBWZXJzaW9uOmZ1bmN0aW9uKCl7cmV0dXJuIERldmljZS5hcHBWZXJzaW9ufSxnZXRWaXNpdG9ySWQ6ZnVuY3Rpb24oKXtyZXR1cm4gaCgpLHB9LGdldFZpc2l0b3JJZFN1ZmZpeDpmdW5jdGlvbigpe3JldHVybiB2fSxnZXREZXZpY2VNb2RlbDpmdW5jdGlvbigpe3JldHVybiBEZXZpY2UucHJvZHVjdFR5cGV9LGdldFBsYXRmb3JtVmVyc2lvbjpmdW5jdGlvbigpe3JldHVybiBEZXZpY2Uuc3lzdGVtVmVyc2lvbn0sZ2V0UGxhdGZvcm1OYW1lOmZ1bmN0aW9uKCl7cmV0dXJuXCJqc1wifSxnZXRSdW50aW1lTmFtZTpmdW5jdGlvbigpe3JldHVyblwidHZvc1wifSxnZXRSdW50aW1lVmVyc2lvbjpmdW5jdGlvbigpe3JldHVybiBEZXZpY2Uuc3lzdGVtVmVyc2lvbn0sZ2V0RGlzcGxheVJlc29sdXRpb246ZnVuY3Rpb24oKXtyZXR1cm4gbH0sZ2V0TGFuZ3VhZ2U6ZnVuY3Rpb24oKXtyZXR1cm4gU2V0dGluZ3MubGFuZ3VhZ2V9LGdldFBhY2thZ2VOYW1lOmZ1bmN0aW9uKCl7cmV0dXJuIGN9LGlzQ29ubmVjdGlvbkF2YWlsYWJsZTpmdW5jdGlvbigpe3JldHVybiEwfSxpc0NvbXBhdGlibGU6ZnVuY3Rpb24oKXtyZXR1cm4gdHlwZW9mIHdpbmRvdz09PWYmJnR5cGVvZiBEZXZpY2UhPT1mJiZcIkFwcGxlIFRWXCI9PT1EZXZpY2UubW9kZWx9LGlzQ29ubmVjdGlvblNlY3VyZTpmdW5jdGlvbigpe3JldHVybiEwfX07dC5leHBvcnRzPV99LHsxNzoxNywyMToyMSwyNzoyNyw0Njo0Niw0ODo0OH1dLDQzOltmdW5jdGlvbihuLHQsZSl7dmFyIHMsYSxmLGk9bigyMSkscj1uKDE3KSxvPW4oNTApLHU9big0OCkuX3IsYz1uKDQ2KSxsPW4oMjcpLHA9XCJ1bmRlZmluZWRcIix2PXIuRCxkPXIuUXQ7dmFyIGg9e1BMQVRGT1JNOlwid2Vib3NcIixodHRwR2V0Om8saHR0cFBvc3Q6dSxTdG9yYWdlOmMsSU86bCxvbkRhdGFGZXRjaDpmdW5jdGlvbihuLHQpe3ZhciBlLGkscixvPTMsdT1mdW5jdGlvbigpezA9PS0tbyYmbigpfTtlPXUsd2ViT1Muc2VydmljZS5yZXF1ZXN0KFwibHVuYTovL2NvbS53ZWJvcy5zZXJ2aWNlLnR2LnN5c3RlbXByb3BlcnR5XCIse21ldGhvZDpcImdldFN5c3RlbUluZm9cIixwYXJhbWV0ZXJzOntrZXlzOltcIm1vZGVsTmFtZVwiLFwiZmlybXdhcmVWZXJzaW9uXCIsXCJVSERcIixcInNka1ZlcnNpb25cIl19LG9uU3VjY2VzczpmdW5jdGlvbihuKXtuLnJldHVyblZhbHVlJiYocz1uKSxlKCl9LG9uRmFpbHVyZTpmdW5jdGlvbigpe2UoKX19KSxpPXUsd2ViT1Muc2VydmljZS5yZXF1ZXN0KFwibHVuYTovL2NvbS53ZWJvcy5zZXR0aW5nc3NlcnZpY2VcIix7bWV0aG9kOlwiZ2V0U3lzdGVtU2V0dGluZ3NcIixwYXJhbWV0ZXJzOntjYXRlZ29yeTpcIm9wdGlvblwifSxvblN1Y2Nlc3M6ZnVuY3Rpb24obil7bi5yZXR1cm5WYWx1ZSYmKGE9biksaSgpfSxvbkZhaWx1cmU6ZnVuY3Rpb24oKXtpKCl9fSkscj11LHdlYk9TLnNlcnZpY2UucmVxdWVzdChcImx1bmE6Ly9jb20ud2Vib3Muc2VydmljZS5jb25uZWN0aW9ubWFuYWdlclwiLHttZXRob2Q6XCJnZXRTdGF0dXNcIixvblN1Y2Nlc3M6ZnVuY3Rpb24obil7bi5yZXR1cm5WYWx1ZSYmKGY9bikscigpfSxvbkZhaWx1cmU6ZnVuY3Rpb24oKXtyKCl9fSl9LGdldENyb3NzUHVibGlzaGVySWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdHlwZW9mIHdlYk9TIT09cCYmd2ViT1MuZGV2aWNlJiZ3ZWJPUy5kZXZpY2Uuc2VyaWFsTnVtYmVyJiZcIlVua25vd25cIiE9d2ViT1MuZGV2aWNlLnNlcmlhbE51bWJlcj93ZWJPUy5kZXZpY2Uuc2VyaWFsTnVtYmVyOm51bGx9LGdldEFwcE5hbWU6ZnVuY3Rpb24oKXtyZXR1cm4gdn0sZ2V0QXBwVmVyc2lvbjpmdW5jdGlvbigpe3JldHVybiB2fSxnZXRWaXNpdG9ySWQ6ZnVuY3Rpb24oKXtyZXR1cm4rbmV3IERhdGUrfn4oMWUzKk1hdGgucmFuZG9tKCkpfSxnZXRWaXNpdG9ySWRTdWZmaXg6ZnVuY3Rpb24oKXtyZXR1cm5cIjcyXCJ9LGdldERldmljZU1vZGVsOmZ1bmN0aW9uKCl7cmV0dXJuIHMmJnMubW9kZWxOYW1lP3MubW9kZWxOYW1lOnZ9LGdldFBsYXRmb3JtVmVyc2lvbjpmdW5jdGlvbigpe3JldHVybiBzJiZzLnNka1ZlcnNpb24/cy5zZGtWZXJzaW9uOnZ9LGdldFBsYXRmb3JtTmFtZTpmdW5jdGlvbigpe3JldHVyblwianNcIn0sZ2V0UnVudGltZU5hbWU6ZnVuY3Rpb24oKXtyZXR1cm5cIndlYk9TXCJ9LGdldFJ1bnRpbWVWZXJzaW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHR5cGVvZiB3ZWJPUyE9PXAmJndlYk9TLmRldmljZT93ZWJPUy5kZXZpY2UucGxhdGZvcm1WZXJzaW9uOnZ9LGdldERpc3BsYXlSZXNvbHV0aW9uOmZ1bmN0aW9uKCl7dmFyIG49MDt0eXBlb2Ygd2ViT1MhPT1wJiZ3ZWJPUy5kZXZpY2U/bj13ZWJPUy5kZXZpY2Uuc2NyZWVuV2lkdGg6dHlwZW9mIHdpbmRvdyE9cCYmd2luZG93LnNjcmVlbiYmKG49d2luZG93LnNjcmVlbi5hdmFpbFdpZHRoKTt2YXIgdD0wO3JldHVybiB0eXBlb2Ygd2ViT1MhPT1wJiZ0eXBlb2Ygd2ViT1MuZGV2aWNlIT09cD90PXdlYk9TLmRldmljZS5zY3JlZW5IZWlnaHQ6dHlwZW9mIHdpbmRvdyE9cCYmd2luZG93LnNjcmVlbiYmKHQ9d2luZG93LnNjcmVlbi5hdmFpbEhlaWdodCksMDxuJiYwPHQ/bitcInhcIit0OmR9LGdldExhbmd1YWdlOmZ1bmN0aW9uKCl7cmV0dXJuIGEmJmEubG9jYWxlcyYmKGEubG9jYWxlcy5VSXx8YS5sb2NhbGVzLlRWKXx8dn0sZ2V0UGFja2FnZU5hbWU6ZnVuY3Rpb24oKXtyZXR1cm4gdn0saXNDb25uZWN0aW9uQXZhaWxhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIWZ8fCFmLmlzSW50ZXJuZXRDb25uZWN0aW9uQXZhaWxhYmxlfHxmLmlzSW50ZXJuZXRDb25uZWN0aW9uQXZhaWxhYmxlfSxpc0NvbXBhdGlibGU6ZnVuY3Rpb24oKXtyZXR1cm4gdHlwZW9mIHdpbmRvdyE9PXAmJiFpLmp0KHdpbmRvdy53ZWJPUykmJiFpLmp0KHdlYk9TLnNlcnZpY2UpJiYhaS5qdCh3ZWJPUy5zZXJ2aWNlLnJlcXVlc3QpfSxnZXRDb25uZWN0aW9uVHlwZTpmdW5jdGlvbigpe2lmKGYmJihmLndpcmVkfHxmLndpZmkpKXtpZihcImNvbm5lY3RlZFwiPT09Zi53aXJlZC5zdGF0ZSYmXCJ5ZXNcIj09PWYud2lyZWQub25JbnRlcm5ldClyZXR1cm5cImV0aFwiO2lmKFwiY29ubmVjdGVkXCI9PT1mLndpZmkuc3RhdGUmJlwieWVzXCI9PT1mLndpZmkub25JbnRlcm5ldClyZXR1cm5cIndpZmlcIn1yZXR1cm4gdn0saXNDb25uZWN0aW9uU2VjdXJlOmZ1bmN0aW9uKCl7cmV0dXJuIHR5cGVvZiBkb2N1bWVudCE9cCYmbnVsbCE9ZG9jdW1lbnQmJlwic1wiPT09ZG9jdW1lbnQubG9jYXRpb24uaHJlZi5jaGFyQXQoNCl9fTt0LmV4cG9ydHM9aH0sezE3OjE3LDIxOjIxLDI3OjI3LDQ2OjQ2LDQ4OjQ4LDUwOjUwfV0sNDQ6W2Z1bmN0aW9uKG4sdCxlKXt2YXIgaT1uKDE3KSxyPW4oNTMpLndyLG89big1MykueXIsdT1uKDQ2KSxzPW4oMjcpLGE9XCJ1bmRlZmluZWRcIixmPWkuRCxjPWkuUXQsbD1udWxsLHA9bnVsbCx2PW51bGwsZD0hMSxoPSExLF89ITE7ZnVuY3Rpb24gZygpe3R5cGVvZiBXaW5kb3dzIT1hJiZXaW5kb3dzJiZXaW5kb3dzLlhib3gmJldpbmRvd3MuWGJveC5BcHBsaWNhdGlvbk1vZGVsJiZXaW5kb3dzLlhib3guQXBwbGljYXRpb25Nb2RlbC5Db3JlJiZXaW5kb3dzLlhib3guQXBwbGljYXRpb25Nb2RlbC5Db3JlLkNvcmVBcHBsaWNhdGlvbkNvbnRleHQmJldpbmRvd3MuWGJveC5BcHBsaWNhdGlvbk1vZGVsLkNvcmUuQ29yZUFwcGxpY2F0aW9uQ29udGV4dC5hZGRFdmVudExpc3RlbmVyKFwiY3VycmVudHVzZXJjaGFuZ2VkXCIsZnVuY3Rpb24oKXtoPSEwfSksbSgpLF89ITB9ZnVuY3Rpb24gbSgpe3ZhciBuPW51bGw7aWYodHlwZW9mIFdpbmRvd3MhPWEmJldpbmRvd3MmJldpbmRvd3MuWGJveCYmV2luZG93cy5YYm94LkFwcGxpY2F0aW9uTW9kZWwmJldpbmRvd3MuWGJveC5BcHBsaWNhdGlvbk1vZGVsLkNvcmUmJldpbmRvd3MuWGJveC5BcHBsaWNhdGlvbk1vZGVsLkNvcmUuQ29yZUFwcGxpY2F0aW9uQ29udGV4dCYmV2luZG93cy5YYm94LkFwcGxpY2F0aW9uTW9kZWwuQ29yZS5Db3JlQXBwbGljYXRpb25Db250ZXh0LmN1cnJlbnRVc2VyKXt2YXIgdD1XaW5kb3dzLlhib3guQXBwbGljYXRpb25Nb2RlbC5Db3JlLkNvcmVBcHBsaWNhdGlvbkNvbnRleHQuY3VycmVudFVzZXI7bnVsbCE9dCYmIXQuYnImJnQuSXImJihuPVdpbmRvd3MuWGJveC5BcHBsaWNhdGlvbk1vZGVsLkNvcmUuQ29yZUFwcGxpY2F0aW9uQ29udGV4dC5jdXJyZW50VXNlci54Ym94VXNlcklkKX12PW59dmFyIHc9e1BMQVRGT1JNOlwieGJveFwiLGh0dHBHZXQ6cixodHRwUG9zdDpvLFN0b3JhZ2U6dSxJTzpzLGdldENyb3NzUHVibGlzaGVySWQ6ZnVuY3Rpb24oKXtyZXR1cm4gX3x8ZygpLGgmJm0oKSx2fSxnZXRBcHBOYW1lOmZ1bmN0aW9uKCl7dmFyIG49ZjtyZXR1cm4gdHlwZW9mIFdpbmRvd3MhPWEmJldpbmRvd3MmJldpbmRvd3MuQXBwbGljYXRpb25Nb2RlbCYmV2luZG93cy5BcHBsaWNhdGlvbk1vZGVsLlBhY2thZ2UmJldpbmRvd3MuQXBwbGljYXRpb25Nb2RlbC5QYWNrYWdlLmN1cnJlbnQmJldpbmRvd3MuQXBwbGljYXRpb25Nb2RlbC5QYWNrYWdlLmN1cnJlbnQuaWQmJldpbmRvd3MuQXBwbGljYXRpb25Nb2RlbC5QYWNrYWdlLmN1cnJlbnQuaWQubmFtZSYmKG49V2luZG93cy5BcHBsaWNhdGlvbk1vZGVsLlBhY2thZ2UuY3VycmVudC5pZC5uYW1lKSxufSxnZXRBcHBWZXJzaW9uOmZ1bmN0aW9uKCl7dmFyIG49ZjtpZih0eXBlb2YgV2luZG93cyE9YSYmV2luZG93cyYmV2luZG93cy5BcHBsaWNhdGlvbk1vZGVsJiZXaW5kb3dzLkFwcGxpY2F0aW9uTW9kZWwuUGFja2FnZSYmV2luZG93cy5BcHBsaWNhdGlvbk1vZGVsLlBhY2thZ2UuY3VycmVudCYmV2luZG93cy5BcHBsaWNhdGlvbk1vZGVsLlBhY2thZ2UuY3VycmVudC5pZCYmV2luZG93cy5BcHBsaWNhdGlvbk1vZGVsLlBhY2thZ2UuY3VycmVudC5pZC52ZXJzaW9uKXt2YXIgdD1XaW5kb3dzLkFwcGxpY2F0aW9uTW9kZWwuUGFja2FnZS5jdXJyZW50LmlkLnZlcnNpb247bj10Lm1ham9yK1wiLlwiK3QubWlub3IrXCIuXCIrdC5idWlsZCtcIi5cIit0LnJldmlzaW9ufXJldHVybiBufSxnZXRWaXNpdG9ySWQ6ZnVuY3Rpb24oKXtyZXR1cm4gZHx8ZnVuY3Rpb24oKXtsPXR5cGVvZiBXaW5kb3dzIT1hJiZXaW5kb3dzJiZXaW5kb3dzLlhib3gmJldpbmRvd3MuWGJveC5TeXN0ZW0mJldpbmRvd3MuWGJveC5TeXN0ZW0uQ29uc29sZSYmV2luZG93cy5YYm94LlN5c3RlbS5Db25zb2xlLmFwcGxpY2F0aW9uU3BlY2lmaWNEZXZpY2VJZD9XaW5kb3dzLlhib3guU3lzdGVtLkNvbnNvbGUuYXBwbGljYXRpb25TcGVjaWZpY0RldmljZUlkOnRoaXMuZ2V0RGV2aWNlTW9kZWwoKSsgK25ldyBEYXRlK35+KDFlMypNYXRoLnJhbmRvbSgpKSxwPVwiNzJcIixkPSEwfSgpLGx9LGdldFZpc2l0b3JJZFN1ZmZpeDpmdW5jdGlvbigpe3JldHVybiBwfSxnZXREZXZpY2VNb2RlbDpmdW5jdGlvbigpe3JldHVyblwieGJveCBvbmVcIn0sZ2V0UGxhdGZvcm1WZXJzaW9uOmZ1bmN0aW9uKCl7dmFyIHQ9ZjtyZXR1cm4gdHlwZW9mIG5hdmlnYXRvciE9YSYmbmF2aWdhdG9yJiZuYXZpZ2F0b3IudXNlckFnZW50JiZuYXZpZ2F0b3IudXNlckFnZW50LnNwbGl0KFwiO1wiKS5maWx0ZXIoZnVuY3Rpb24obil7cmV0dXJuLTEhPW4uaW5kZXhPZihcIldpbmRvd3MgTlRcIil9KS5mb3JFYWNoKGZ1bmN0aW9uKG4pe3Q9bi5zdWJzdHIobi5pbmRleE9mKFwiV2luZG93cyBOVFwiKSsxMSxuLmxlbmd0aC0xKX0pLHR9LGdldFBsYXRmb3JtTmFtZTpmdW5jdGlvbigpe3JldHVyblwieGJveFwifSxnZXRSdW50aW1lTmFtZTpmdW5jdGlvbigpe3JldHVyblwid2luanNcIn0sZ2V0UnVudGltZVZlcnNpb246ZnVuY3Rpb24oKXt2YXIgdD1mO3JldHVybiB0eXBlb2YgV2luZG93cyE9YSYmV2luZG93cyYmV2luZG93cy5BcHBsaWNhdGlvbk1vZGVsJiZXaW5kb3dzLkFwcGxpY2F0aW9uTW9kZWwuUGFja2FnZSYmV2luZG93cy5BcHBsaWNhdGlvbk1vZGVsLlBhY2thZ2UuY3VycmVudCYmV2luZG93cy5BcHBsaWNhdGlvbk1vZGVsLlBhY2thZ2UuY3VycmVudC5kZXBlbmRlbmNpZXMmJldpbmRvd3MuQXBwbGljYXRpb25Nb2RlbC5QYWNrYWdlLmN1cnJlbnQuZGVwZW5kZW5jaWVzLmZpbHRlcihmdW5jdGlvbihuKXtyZXR1cm4gbiYmbi5pZCYmbi5pZC5uYW1lJiYtMSE9bi5pZC5uYW1lLmluZGV4T2YoXCJXaW5KU1wiKSYmbi5pZC52ZXJzaW9ufSkuZm9yRWFjaChmdW5jdGlvbihuKXt0PW4uaWQudmVyc2lvbi5tYWpvcitcIi5cIituLmlkLnZlcnNpb24ubWlub3IrXCIuXCIrbi5pZC52ZXJzaW9uLmJ1aWxkK1wiLlwiK24uaWQudmVyc2lvbi5yZXZpc2lvbn0pLHR9LGdldERpc3BsYXlSZXNvbHV0aW9uOmZ1bmN0aW9uKCl7dmFyIG49YztpZih0eXBlb2YgV2luZG93cyE9YSYmV2luZG93cyYmV2luZG93cy5YYm94JiZXaW5kb3dzLlhib3guR3JhcGhpY3MmJldpbmRvd3MuWGJveC5HcmFwaGljcy5EaXNwbGF5JiZXaW5kb3dzLlhib3guR3JhcGhpY3MuRGlzcGxheS5EaXNwbGF5Q29uZmlndXJhdGlvbiYmV2luZG93cy5YYm94LkdyYXBoaWNzLkRpc3BsYXkuRGlzcGxheUNvbmZpZ3VyYXRpb24uZ2V0Rm9yQ3VycmVudFZpZXcmJldpbmRvd3MuWGJveC5HcmFwaGljcy5EaXNwbGF5LkRpc3BsYXlDb25maWd1cmF0aW9uLmdldEZvckN1cnJlbnRWaWV3KCkmJldpbmRvd3MuWGJveC5HcmFwaGljcy5EaXNwbGF5LkRpc3BsYXlDb25maWd1cmF0aW9uLmdldEZvckN1cnJlbnRWaWV3KCkuY3VycmVudERpc3BsYXlNb2RlJiZXaW5kb3dzLlhib3guR3JhcGhpY3MuRGlzcGxheS5EaXNwbGF5Q29uZmlndXJhdGlvbi5nZXRGb3JDdXJyZW50VmlldygpLmN1cnJlbnREaXNwbGF5TW9kZS5yYXdXaWR0aCYmV2luZG93cy5YYm94LkdyYXBoaWNzLkRpc3BsYXkuRGlzcGxheUNvbmZpZ3VyYXRpb24uZ2V0Rm9yQ3VycmVudFZpZXcoKS5jdXJyZW50RGlzcGxheU1vZGUucmF3SGVpZ2h0KXt2YXIgdD1XaW5kb3dzLlhib3guR3JhcGhpY3MuRGlzcGxheS5EaXNwbGF5Q29uZmlndXJhdGlvbi5nZXRGb3JDdXJyZW50VmlldygpLmN1cnJlbnREaXNwbGF5TW9kZTtuPXQucmF3V2lkdGgrXCJ4XCIrdC5yYXdIZWlnaHR9cmV0dXJuIG59LGdldEFwcGxpY2F0aW9uUmVzb2x1dGlvbjpmdW5jdGlvbigpe3ZhciBuPWM7cmV0dXJuIHR5cGVvZiB3aW5kb3chPWEmJndpbmRvdy5pbm5lcldpZHRoJiZ3aW5kb3cuaW5uZXJIZWlnaHQmJihuPXdpbmRvdy5pbm5lcldpZHRoK1wieFwiK3dpbmRvdy5pbm5lckhlaWdodCksbn0sZ2V0TGFuZ3VhZ2U6ZnVuY3Rpb24oKXt2YXIgbj1mO3JldHVybiB0eXBlb2YgV2luZG93cyE9YSYmV2luZG93cyYmV2luZG93cy5TeXN0ZW0mJldpbmRvd3MuU3lzdGVtLlVzZXJQcm9maWxlJiZXaW5kb3dzLlN5c3RlbS5Vc2VyUHJvZmlsZS5HbG9iYWxpemF0aW9uUHJlZmVyZW5jZXMmJldpbmRvd3MuU3lzdGVtLlVzZXJQcm9maWxlLkdsb2JhbGl6YXRpb25QcmVmZXJlbmNlcy5sYW5ndWFnZXMmJihuPVdpbmRvd3MuU3lzdGVtLlVzZXJQcm9maWxlLkdsb2JhbGl6YXRpb25QcmVmZXJlbmNlcy5sYW5ndWFnZXMuZ2V0QXQoMCkpLG59LGdldFBhY2thZ2VOYW1lOmZ1bmN0aW9uKCl7dmFyIG49ZjtyZXR1cm4gdHlwZW9mIFdpbmRvd3MhPWEmJldpbmRvd3MmJldpbmRvd3MuQXBwbGljYXRpb25Nb2RlbCYmV2luZG93cy5BcHBsaWNhdGlvbk1vZGVsLlBhY2thZ2UmJldpbmRvd3MuQXBwbGljYXRpb25Nb2RlbC5QYWNrYWdlLmN1cnJlbnQmJldpbmRvd3MuQXBwbGljYXRpb25Nb2RlbC5QYWNrYWdlLmN1cnJlbnQuaWQmJldpbmRvd3MuQXBwbGljYXRpb25Nb2RlbC5QYWNrYWdlLmN1cnJlbnQuaWQubmFtZSYmKG49V2luZG93cy5BcHBsaWNhdGlvbk1vZGVsLlBhY2thZ2UuY3VycmVudC5pZC5uYW1lKSxufSxpc0Nvbm5lY3Rpb25BdmFpbGFibGU6ZnVuY3Rpb24oKXtyZXR1cm4hKHR5cGVvZiBXaW5kb3dzIT1hJiZXaW5kb3dzJiZXaW5kb3dzLk5ldHdvcmtpbmcmJldpbmRvd3MuTmV0d29ya2luZy5Db25uZWN0aXZpdHkmJldpbmRvd3MuTmV0d29ya2luZy5Db25uZWN0aXZpdHkuTmV0d29ya0luZm9ybWF0aW9uJiZXaW5kb3dzLk5ldHdvcmtpbmcuQ29ubmVjdGl2aXR5Lk5ldHdvcmtJbmZvcm1hdGlvbi5nZXRJbnRlcm5ldENvbm5lY3Rpb25Qcm9maWxlJiZXaW5kb3dzLk5ldHdvcmtpbmcuQ29ubmVjdGl2aXR5Lk5ldHdvcmtJbmZvcm1hdGlvbi5nZXRJbnRlcm5ldENvbm5lY3Rpb25Qcm9maWxlKCkmJldpbmRvd3MuTmV0d29ya2luZy5Db25uZWN0aXZpdHkuTmV0d29ya0luZm9ybWF0aW9uLmdldEludGVybmV0Q29ubmVjdGlvblByb2ZpbGUoKS5nZXROZXR3b3JrQ29ubmVjdGl2aXR5TGV2ZWwmJldpbmRvd3MuTmV0d29ya2luZy5Db25uZWN0aXZpdHkuTmV0d29ya0luZm9ybWF0aW9uLmdldEludGVybmV0Q29ubmVjdGlvblByb2ZpbGUoKS5nZXROZXR3b3JrQ29ubmVjdGl2aXR5TGV2ZWwoKSl8fDQ9PVdpbmRvd3MuTmV0d29ya2luZy5Db25uZWN0aXZpdHkuTmV0d29ya0luZm9ybWF0aW9uLmdldEludGVybmV0Q29ubmVjdGlvblByb2ZpbGUoKS5nZXROZXR3b3JrQ29ubmVjdGl2aXR5TGV2ZWwoKX0saXNDb21wYXRpYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIHR5cGVvZiBXaW5KUyE9YSYmV2luSlMmJnR5cGVvZiBXaW5kb3dzIT1hJiZXaW5kb3dzJiZXaW5kb3dzLlhib3h9LHNldFBsYXRmb3JtQVBJOmZ1bmN0aW9uKCl7fSxpc0Nyb3NzUHVibGlzaGVySWRDaGFuZ2VkOmZ1bmN0aW9uKCl7cmV0dXJuIF98fGcoKSxofSxnZXREZXZpY2VBcmNoaXRlY3R1cmU6ZnVuY3Rpb24oKXt2YXIgbj1cInVua25vd25cIjtpZih0eXBlb2YgV2luZG93cyE9YSYmV2luZG93cyYmV2luZG93cy5BcHBsaWNhdGlvbk1vZGVsJiZXaW5kb3dzLkFwcGxpY2F0aW9uTW9kZWwuUGFja2FnZSYmV2luZG93cy5BcHBsaWNhdGlvbk1vZGVsLlBhY2thZ2UuY3VycmVudCYmV2luZG93cy5BcHBsaWNhdGlvbk1vZGVsLlBhY2thZ2UuY3VycmVudC5pZCYmV2luZG93cy5BcHBsaWNhdGlvbk1vZGVsLlBhY2thZ2UuY3VycmVudC5pZC5hcmNoaXRlY3R1cmUpc3dpdGNoKFdpbmRvd3MuQXBwbGljYXRpb25Nb2RlbC5QYWNrYWdlLmN1cnJlbnQuaWQuYXJjaGl0ZWN0dXJlKXtjYXNlIDU6bj1cImFybVwiO2JyZWFrO2Nhc2UgMTE6bj1cIm5ldXRyYWxcIjticmVhaztjYXNlIDk6bj1cIng2NFwiO2JyZWFrO2Nhc2UgMDpuPVwieDg2XCJ9cmV0dXJuIG59LGdldENvbm5lY3Rpb25UeXBlOmZ1bmN0aW9uKCl7dmFyIG49ZjtpZih0eXBlb2YgV2luZG93cyE9YSYmV2luZG93cyYmV2luZG93cy5OZXR3b3JraW5nJiZXaW5kb3dzLk5ldHdvcmtpbmcuQ29ubmVjdGl2aXR5JiZXaW5kb3dzLk5ldHdvcmtpbmcuQ29ubmVjdGl2aXR5Lk5ldHdvcmtJbmZvcm1hdGlvbiYmV2luZG93cy5OZXR3b3JraW5nLkNvbm5lY3Rpdml0eS5OZXR3b3JrSW5mb3JtYXRpb24uZ2V0SW50ZXJuZXRDb25uZWN0aW9uUHJvZmlsZSYmV2luZG93cy5OZXR3b3JraW5nLkNvbm5lY3Rpdml0eS5OZXR3b3JrSW5mb3JtYXRpb24uZ2V0SW50ZXJuZXRDb25uZWN0aW9uUHJvZmlsZSgpJiZXaW5kb3dzLk5ldHdvcmtpbmcuQ29ubmVjdGl2aXR5Lk5ldHdvcmtJbmZvcm1hdGlvbi5nZXRJbnRlcm5ldENvbm5lY3Rpb25Qcm9maWxlKCkubmV0d29ya0FkYXB0ZXImJldpbmRvd3MuTmV0d29ya2luZy5Db25uZWN0aXZpdHkuTmV0d29ya0luZm9ybWF0aW9uLmdldEludGVybmV0Q29ubmVjdGlvblByb2ZpbGUoKS5uZXR3b3JrQWRhcHRlci5pYW5hSW50ZXJmYWNlVHlwZSlzd2l0Y2goV2luZG93cy5OZXR3b3JraW5nLkNvbm5lY3Rpdml0eS5OZXR3b3JrSW5mb3JtYXRpb24uZ2V0SW50ZXJuZXRDb25uZWN0aW9uUHJvZmlsZSgpLm5ldHdvcmtBZGFwdGVyLmlhbmFJbnRlcmZhY2VUeXBlKXtjYXNlIDY6bj1cImV0aFwiO2JyZWFrO2Nhc2UgNzE6bj1cIndpZmlcIn1yZXR1cm4gbn0sZ2V0RGV2aWNlSmFpbEJyb2tlbkZsYWc6ZnVuY3Rpb24oKXtyZXR1cm4gZn0saXNDb25uZWN0aW9uU2VjdXJlOmZ1bmN0aW9uKCl7cmV0dXJuIHR5cGVvZiBkb2N1bWVudCE9YSYmbnVsbCE9ZG9jdW1lbnQmJlwic1wiPT09ZG9jdW1lbnQubG9jYXRpb24uaHJlZi5jaGFyQXQoNCl9fTt0LmV4cG9ydHM9d30sezE3OjE3LDI3OjI3LDQ2OjQ2LDUzOjUzfV0sNDU6W2Z1bmN0aW9uKG4sdCxlKXt2YXIgaT1uKDI0KSxyPVwidW5kZWZpbmVkXCIsbz1cImNzX1wiO3QuZXhwb3J0cz1mdW5jdGlvbigpe3ZhciBlPXR5cGVvZiBhdHYhPXImJnR5cGVvZiBhdHYubG9jYWxTdG9yYWdlIT1yJiZhdHYubG9jYWxTdG9yYWdlfHxudWxsO2kuZXh0ZW5kKHRoaXMse2dldDpmdW5jdGlvbihuKXtyZXR1cm4gZSYmbiYmZS5nZXRJdGVtKG8rbil8fG51bGx9LHNldDpmdW5jdGlvbihuLHQpe2UmJm4mJihlW28rbl09dCl9LGhhczpmdW5jdGlvbihuKXtyZXR1cm4gZSYmbiYmbnVsbCE9ZS5nZXRJdGVtKG8rbil8fCExfSxyZW1vdmU6ZnVuY3Rpb24obil7ZSYmbiYmZS5yZW1vdmVJdGVtKG8rbil9LGNsZWFyOmZ1bmN0aW9uKCl7fX0pfX0sezI0OjI0fV0sNDY6W2Z1bmN0aW9uKG4sdCxlKXt2YXIgaT1uKDI0KSxyPVwiY3NfXCI7dC5leHBvcnRzPWZ1bmN0aW9uKCl7dmFyIGU9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGxvY2FsU3RvcmFnZT9sb2NhbFN0b3JhZ2U6bnVsbDtpLmV4dGVuZCh0aGlzLHtnZXQ6ZnVuY3Rpb24obil7dHJ5e3JldHVybiBlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLmdldEl0ZW0/ZS5nZXRJdGVtKHIrbik6ZT9lW3Irbl06ZX1jYXRjaChuKXt9fSxzZXQ6ZnVuY3Rpb24obix0KXt0cnl7ZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgZS5zZXRJdGVtP2Uuc2V0SXRlbShyK24sdCk6ZSYmKGVbcituXT10KX1jYXRjaChuKXt9fSxoYXM6ZnVuY3Rpb24obil7dHJ5e3JldHVybiBlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLmdldEl0ZW0/ZS5nZXRJdGVtKHIrbik6ZT9lW3Irbl06ZX1jYXRjaChuKXt9fSxyZW1vdmU6ZnVuY3Rpb24obil7dHJ5e2UmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGUucmVtb3ZlSXRlbT9lLnJlbW92ZUl0ZW0ocituKTplJiZkZWxldGUgZVtyK25dfWNhdGNoKG4pe319LGNsZWFyOmZ1bmN0aW9uKCl7dHJ5e2Zvcih2YXIgbj0wO2UmJm48ZS5sZW5ndGg7KytuKXt2YXIgdD1lLmtleShuKTt0LnN1YnN0cigwLHIubGVuZ3RoKT09PXImJihcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLnJlbW92ZUl0ZW0/ZS5yZW1vdmVJdGVtKHQpOmRlbGV0ZSBlW3RdKX19Y2F0Y2gobil7fX19KX19LHsyNDoyNH1dLDQ3OltmdW5jdGlvbihuLHQsZSl7dmFyIGkscixvPW4oMjQpLHU9XCJjc19cIjtcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2Y/cj1pPWZ1bmN0aW9uKG4sdCl7c2YuY29yZS5sb2NhbERhdGEobix0KX06KHI9ZnVuY3Rpb24obix0KXskLnNmLnNldERhdGEobix2b2lkIDA9PT10P251bGw6dCl9LGk9ZnVuY3Rpb24obil7cmV0dXJuICQuc2YuZ2V0RGF0YShuKX0pO3QuZXhwb3J0cz1mdW5jdGlvbigpe28uZXh0ZW5kKHRoaXMse2dldDpmdW5jdGlvbihuKXtyZXR1cm4gaSh1K24pfSxzZXQ6ZnVuY3Rpb24obix0KXtyKHUrbix0KX0saGFzOmZ1bmN0aW9uKG4pe3JldHVybiB2b2lkIDAhPT1pKHUrbil9LHJlbW92ZTpmdW5jdGlvbihuKXtyKHUrbixudWxsKX19KX19LHsyNDoyNH1dLDQ4OltmdW5jdGlvbihuLHQsZSl7dmFyIHI9XCJ1bmRlZmluZWRcIjtlLmdyPWZ1bmN0aW9uKG4sdCl7aWYodHlwZW9mIFhNTEh0dHBSZXF1ZXN0IT1yKXt2YXIgZT1uZXcgWE1MSHR0cFJlcXVlc3Q7ZS5vcGVuKFwiR0VUXCIsbiwhMCksZS5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXs0PT09ZS5yZWFkeVN0YXRlJiYodCYmdChlLnN0YXR1cyksZT1udWxsKX0sZS5zZW5kKCl9ZWxzZVwiZnVuY3Rpb25cIj09dHlwZW9mIHNldFRpbWVvdXQ/dCYmc2V0VGltZW91dCh0LDApOnQmJnQoKX0sZS5fcj1mdW5jdGlvbihuLHQsZSl7aWYodHlwZW9mIFhNTEh0dHBSZXF1ZXN0IT1yKXt2YXIgaT1uZXcgWE1MSHR0cFJlcXVlc3Q7aS5vcGVuKFwiUE9TVFwiLG4sITApLGkub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7ND09PWkucmVhZHlTdGF0ZSYmKGUmJmUoaS5zdGF0dXMpLGk9bnVsbCl9LGkuc2VuZCh0KX1lbHNlXCJmdW5jdGlvblwiPT10eXBlb2Ygc2V0VGltZW91dD9lJiZzZXRUaW1lb3V0KGUsMCk6ZSYmZSgpfX0se31dLDQ5OltmdW5jdGlvbihuLHQsZSl7dmFyIHI9XCJ1bmRlZmluZWRcIjtlLmRyPWZ1bmN0aW9uKG4sdCl7aWYodHlwZW9mIGF0diE9ciYmdHlwZW9mIFhNTEh0dHBSZXF1ZXN0IT1yKXt2YXIgZT1uZXcgWE1MSHR0cFJlcXVlc3Q7ZS5vcGVuKFwiR0VUXCIsbiwhMCksZS5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXs0PT1lLnJlYWR5U3RhdGUmJih0JiZ0KGUuc3RhdHVzKSxlPW51bGwpfSxlLnNlbmQoKX1lbHNlIHR5cGVvZiBhdHYhPXImJlwiZnVuY3Rpb25cIj09dHlwZW9mIGF0di5zZXRUaW1lb3V0P3QmJmF0di5zZXRUaW1lb3V0KHQsMCk6dCYmdCgpfSxlLmhyPWZ1bmN0aW9uKG4sdCxlKXtpZih0eXBlb2YgYXR2IT1yJiZ0eXBlb2YgWE1MSHR0cFJlcXVlc3QhPXIpe3ZhciBpPW5ldyBYTUxIdHRwUmVxdWVzdDtpLm9wZW4oXCJQT1NUXCIsbiwhMCksaS5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXs0PT09aS5yZWFkeVN0YXRlJiYoZSYmZShpLnN0YXR1cyksaT1udWxsKX0saS5zZW5kKHQpfWVsc2UgdHlwZW9mIGF0diE9ciYmXCJmdW5jdGlvblwiPT10eXBlb2YgYXR2LnNldFRpbWVvdXQ/ZSYmYXR2LnNldFRpbWVvdXQoZSwwKTplJiZlKCl9fSx7fV0sNTA6W2Z1bmN0aW9uKG4sdCxlKXt0LmV4cG9ydHM9ZnVuY3Rpb24obix0KXtpZihcInVuZGVmaW5lZFwiIT10eXBlb2YgSW1hZ2Upe3ZhciBlPW5ldyBJbWFnZTtlLm9ubG9hZD1mdW5jdGlvbigpe3QmJnQoMjAwKSxlPW51bGx9LGUub25lcnJvcj1mdW5jdGlvbigpe3QmJnQoKSxlPW51bGx9LGUuc3JjPW59ZWxzZVwiZnVuY3Rpb25cIj09dHlwZW9mIHNldFRpbWVvdXQ/dCYmc2V0VGltZW91dCh0LDApOnQmJnQoKX19LHt9XSw1MTpbZnVuY3Rpb24obix0LGUpe3QuZXhwb3J0cz1mdW5jdGlvbihuLHQpe1widW5kZWZpbmVkXCIhPXR5cGVvZiBlbmdpbmU/KGVuZ2luZS5jcmVhdGVIdHRwQ2xpZW50KCkuY3JlYXRlUmVxdWVzdChcIkdFVFwiLG4sbnVsbCkuc3RhcnQoKSx0JiZzZXRUaW1lb3V0KHQsMCkpOlwiZnVuY3Rpb25cIj09dHlwZW9mIHNldFRpbWVvdXQ/dCYmc2V0VGltZW91dCh0LDApOnQmJnQoKX19LHt9XSw1MjpbZnVuY3Rpb24obix0LGUpe3QuZXhwb3J0cy5Tcj1mdW5jdGlvbihuLHQpe1wiZnVuY3Rpb25cIj09dHlwZW9mIHNldFRpbWVvdXQ/dCYmc2V0VGltZW91dChmdW5jdGlvbigpe3QoMjAwKX0sMCk6dCYmdCgyMDApfSx0LmV4cG9ydHMubXI9ZnVuY3Rpb24obix0LGUpe1wiZnVuY3Rpb25cIj09dHlwZW9mIHNldFRpbWVvdXQ/ZSYmc2V0VGltZW91dChmdW5jdGlvbigpe2UoMjAwKX0sMCk6ZSYmZSgyMDApfX0se31dLDUzOltmdW5jdGlvbihuLHQsZSl7dmFyIGk9XCJ1bmRlZmluZWRcIjtlLndyPWZ1bmN0aW9uKG4sdCl7dHlwZW9mIFdpbkpTIT1pJiZ0eXBlb2YgV2luSlMueGhyIT1pP1dpbkpTLnhocih7dXJsOm59KS50aGVuKGZ1bmN0aW9uKG4pe3QmJnQobi5zdGF0dXMpfSxmdW5jdGlvbigpe3QmJnQoKX0pOlwiZnVuY3Rpb25cIj09dHlwZW9mIHNldFRpbWVvdXQ/dCYmc2V0VGltZW91dCh0LDApOnQmJnQoKX0sZS55cj1mdW5jdGlvbihuLHQsZSl7dHlwZW9mIFdpbkpTIT1pJiZ0eXBlb2YgV2luSlMueGhyIT1pP1dpbkpTLnhocih7dHlwZTpcInBvc3RcIix1cmw6bixkYXRhOnQsaGVhZGVyczp7XCJDb250ZW50LXR5cGVcIjpcImFwcGxpY2F0aW9uL3htbFwifX0pLnRoZW4oZnVuY3Rpb24obil7ZSYmZShuLnN0YXR1cyl9LGZ1bmN0aW9uKCl7ZSYmZSgpfSk6XCJmdW5jdGlvblwiPT10eXBlb2Ygc2V0VGltZW91dD9lJiZzZXRUaW1lb3V0KGUsMCk6ZSYmZSgpfX0se31dLDU0OltmdW5jdGlvbihuLHQsZSl7dmFyIG9uPW4oMjQpLHVuPW4oMTcpLHNuPW4oMjEpLGFuPW4oNjgpLGZuPW4oMjMpLGNuPTUwMCxsbj0xMDA7ZnVuY3Rpb24gaSgpe3ZhciB0LGUsSSxTLGkscixvLHUsUCxBLEMsayxzLGEsRSxULGYsTixMLGMsRCxSLE0sTyxXLFYseCxVLEIsRixqLGwsRyxLLG4scSxwLHYsZCxILGgsXyxnLFksbSx3LEoseSx6LFEsWCxaLCQsbm4sYix0bixlbj10aGlzLHJuPWNuO29uLmV4dGVuZChlbix7UHI6ZnVuY3Rpb24oKXtyZXR1cm4gdH0sQXI6ZnVuY3Rpb24obil7dD1ufSxzZXRQbGF5YmFja0ludGVydmFsTWVyZ2VUb2xlcmFuY2U6ZnVuY3Rpb24obil7cm49bn0sZ2V0UGxheWJhY2tJbnRlcnZhbE1lcmdlVG9sZXJhbmNlOmZ1bmN0aW9uKCl7cmV0dXJuIHJufSxDcjpmdW5jdGlvbihuLHQpe1Nbbl09dH0sa3I6ZnVuY3Rpb24obil7cmV0dXJuIFNbbl19LEVyOmZ1bmN0aW9uKG4pe3JldHVybiBudWxsIT1TW25dfSxzZXRMYWJlbHM6ZnVuY3Rpb24obil7biYmb24uZXh0ZW5kKGksbil9LGdldExhYmVsczpmdW5jdGlvbigpe3JldHVybiBpfSxzZXRMYWJlbDpmdW5jdGlvbihuLHQpe2lbbl09dH0sZ2V0TGFiZWw6ZnVuY3Rpb24obil7cmV0dXJuIGlbbl19LGR0OmZ1bmN0aW9uKG4pe3JldHVybiBuIGluIGl9LFRyOmZ1bmN0aW9uKCl7cmV0dXJuIHBhcnNlSW50KGVuLmtyKFwibnNfc3RfY25cIikpfSxOcjpmdW5jdGlvbihuKXtlbi5DcihcIm5zX3N0X2NuXCIsbitcIlwiKX0sTHI6ZnVuY3Rpb24oKXtyZXR1cm4gZW4uZHQoXCJuc19zdF9wblwiKT9wYXJzZUludChlbi5nZXRMYWJlbChcIm5zX3N0X3BuXCIpKTpwYXJzZUludChlbi5rcihcIm5zX3N0X3BuXCIpKX0sRHI6ZnVuY3Rpb24obix0LGUpe3ZhciBpPW4scj1wYXJzZUludChpLm5zX3N0X3BvKSxvPXNuLmp0KGkubnNfc3RfYXApP0Q6cGFyc2VJbnQoaS5uc19zdF9hcCk7ZSYmdG48MCYmMDxrLXI/KGkubnNfc3RfYXA9bytrLXIsaS5uc19zdF9kYXA9bytrLXItUik6ZSYmMDx0biYmMDxyLWs/KGkubnNfc3RfYXA9bytyLWssaS5uc19zdF9kYXA9bytyLWstUik6KGkubnNfc3RfYXA9byxpLm5zX3N0X2RhcD1vLVIpO3ZhciB1PXNuLmp0KGkubnNfc3RfcHQpP2VuLlJyKCk6cGFyc2VJbnQoaS5uc19zdF9wdCk7aS5uc19zdF9wdD11Kyhpc05hTihQKT8wOnQtUCkrXCJcIixpLm5zX3N0X2RwdD11Kyhpc05hTihQKT8wOnQtUCktQStcIlwiLGkubnNfc3RfaXB0PXUrKGlzTmFOKFApPzA6dC1QKS1DK1wiXCI7dmFyIHM9c24uanQoaS5uc19zdF9ldCk/ZW4uTXIoKTpwYXJzZUludChpLm5zX3N0X2V0KTtpLm5zX3N0X2V0PXMrKGlzTmFOKEUpPzA6dC1FKStcIlwiLGkubnNfc3RfZGV0PXMrKGlzTmFOKEUpPzA6dC1FKS1UK1wiXCI7dmFyIGE9c24uanQoaS5uc19zdF9idCk/ZW4uT3IoKTpwYXJzZUludChpLm5zX3N0X2J0KTtpLm5zX3N0X2J0PWErXCJcIixpLm5zX3N0X2RidD1hKyhpc05hTihHKT8wOnQtRyktSytcIlwiO3ZhciBmPU0sYz1PO2UmJihmPWFuLldyKGZuKE0pLHRuPDA/cjpXLHRuPDA/VzpyLHJuKSxjPWFuLldyKGZuKE8pLHRuPDA/cjpXLHRuPDA/VzpyLHJuKSk7Zm9yKHZhciBsLHA9MCx2PTAsZD0wO2Q8Zi5sZW5ndGg7ZCsrKXArPWw9TWF0aC5hYnMoZltkXS5lbmQtZltkXS5zdGFydCksdjxsJiYodj1sKTt2YXIgaD0wLF89MDtmb3IoZD0wO2Q8Yy5sZW5ndGg7ZCsrKWgrPWw9TWF0aC5hYnMoY1tkXS5lbmQtY1tkXS5zdGFydCksXzxsJiYoXz1sKTtpLm5zX3N0X3VwYz1wK1wiXCIsaS5uc19zdF9kdXBjPXAtVitcIlwiLGkubnNfc3RfaXVwYz1wLXgrXCJcIixpLm5zX3N0X2l1cGM9eDxwP3AteCtcIlwiOlwiMFwiLGkubnNfc3RfbHBjPXYrXCJcIixpLm5zX3N0X2RscGM9di1VK1wiXCIsaS5uc19zdF91cGE9aCtcIlwiLGkubnNfc3RfZHVwYT1oLUIrXCJcIixpLm5zX3N0X2l1cGE9RjxoP2gtRitcIlwiOlwiMFwiLGkubnNfc3RfbHBhPV8rXCJcIixpLm5zX3N0X2RscGE9Xy1qK1wiXCI7dmFyIGc9c24uanQoaS5uc19zdF9wYyk/ZW4uVnIoKTpwYXJzZUludChpLm5zX3N0X3BjKTtpLm5zX3N0X3BjPWcrXCJcIixpLm5zX3N0X2RwYz1nLUorXCJcIjt2YXIgbT1zbi5qdChpLm5zX3N0X3NrYyk/ZW4ueHIoKTpwYXJzZUludChpLm5zX3N0X3NrYyk7aS5uc19zdF9za2M9bStcIlwiLGkubnNfc3RfZHNrYz1tLXorXCJcIjt2YXIgdz1zbi5qdChpLm5zX3N0X2JjKT9lbi5VcigpOnBhcnNlSW50KGkubnNfc3RfYmMpO2kubnNfc3RfYmM9dytcIlwiLGkubnNfc3RfZGJjPXctcStcIlwiO3ZhciB5PXNuLmp0KGkubnNfc3Rfc2t0KT9lbi5CcigpOnBhcnNlSW50KGkubnNfc3Rfc2t0KTtpLm5zX3N0X3NrdD15K1wiXCIsaS5uc19zdF9kc2t0PXktSCtcIlwiO3ZhciBiPXNuLmp0KGkubnNfc3Rfc2thKT9lbi5GcigpOnBhcnNlSW50KGkubnNfc3Rfc2thKTtpLm5zX3N0X3NrYT1iK1wiXCIsaS5uc19zdF9kc2thPWItWStcIlwiLEkmJihpLm5zX3N0X3NwYz1RK1wiXCIsaS5uc19zdF9hcGM9WCtcIlwiLGkubnNfc3Rfc3E9WitcIlwiLGkubnNfc3RfYXNxPSQrXCJcIiksaS5uc19zdF9zYz1JfHwwIT1ubj9ubitcIlwiOlwiMVwiLGkubnNfc3RfcnQ9dG4rXCJcIixpLm5zX3N0X2xkdz1OLGkubnNfc3RfbGRvPUwsb24uZXh0ZW5kKGksUyl9LGpyOmZ1bmN0aW9uKG4pe0E9cGFyc2VJbnQobi5uc19zdF9wdCksUj1wYXJzZUludChuLm5zX3N0X2FwKSxUPXBhcnNlSW50KG4ubnNfc3RfZXQpLEs9cGFyc2VJbnQobi5uc19zdF9idCksVj1wYXJzZUludChuLm5zX3N0X3VwYyksVT1wYXJzZUludChuLm5zX3N0X2xwYyksQj1wYXJzZUludChuLm5zX3N0X3VwYSksaj1wYXJzZUludChuLm5zX3N0X2xwYSksSj1wYXJzZUludChuLm5zX3N0X3BjKSx6PXBhcnNlSW50KG4ubnNfc3Rfc2tjKSxxPXBhcnNlSW50KG4ubnNfc3RfYmMpLEg9cGFyc2VJbnQobi5uc19zdF9za3QpLFk9cGFyc2VJbnQobi5uc19zdF9za2EpLGVuLkdyKDApfSxLcjpmdW5jdGlvbihuKXtDPXBhcnNlSW50KG4ubnNfc3RfcHQpLHg9cGFyc2VJbnQobi5uc19zdF91cGMpLEY9cGFyc2VJbnQobi5uc19zdF91cGEpfSxxcjpmdW5jdGlvbigpe3JldHVybiBlbi5rcihcIm5zX3N0X3Z0XCIpfSxIcjpmdW5jdGlvbihuKXtlbi5DcihcIm5zX3N0X3Z0XCIsbitcIlwiKX0sWXI6ZnVuY3Rpb24oKXtyZXR1cm4gZW4ua3IoXCJuc19zdF9hdFwiKX0sSnI6ZnVuY3Rpb24obil7ZW4uQ3IoXCJuc19zdF9hdFwiLG4rXCJcIil9LHpyOmZ1bmN0aW9uKCl7cmV0dXJuIGVuLmtyKFwibnNfc3RfdHRcIil9LFFyOmZ1bmN0aW9uKG4pe2VuLkNyKFwibnNfc3RfdHRcIixuK1wiXCIpfSxYcjpmdW5jdGlvbigpe3JldHVybiBlbi5rcihcIm5zX3N0X2NkblwiKX0sWnI6ZnVuY3Rpb24obil7ZW4uQ3IoXCJuc19zdF9jZG5cIixuK1wiXCIpfSwkcjpmdW5jdGlvbigpe3JldHVybiBNfSxubzpmdW5jdGlvbihuKXtNPW59LHRvOmZ1bmN0aW9uKCl7cmV0dXJuIE99LGVvOmZ1bmN0aW9uKCl7dysrfSxpbzpmdW5jdGlvbigpe3krK30scm86ZnVuY3Rpb24oKXtaKyt9LG9vOmZ1bmN0aW9uKCl7cmV0dXJuIFp9LE9yOmZ1bmN0aW9uKCl7cmV0dXJuIGx9LHVvOmZ1bmN0aW9uKG4pe2w9bn0sc286ZnVuY3Rpb24obil7aWYoIWlzTmFOKEcpKXt2YXIgdD1lbi5PcigpO3QrPW4tRyxlbi51byh0KSxHPU5hTn19LGFvOmZ1bmN0aW9uKG4pe1c9cGFyc2VJbnQobil9LGZvOmZ1bmN0aW9uKCl7cmV0dXJuIFd9LGNvOmZ1bmN0aW9uKG4pe2lzTmFOKFcpfHxpc05hTihuKXx8KE09YW4uV3IoTSx0bjwwP246Vyx0bjwwP1c6bixybiksTz1hbi5XcihPLHRuPDA/bjpXLHRuPDA/VzpuLHJuKSxXPU5hTil9LE1yOmZ1bmN0aW9uKCl7cmV0dXJuIGF9LGxvOmZ1bmN0aW9uKG4pe2E9bn0scG86ZnVuY3Rpb24obil7aWYoIWlzTmFOKEUpKXt2YXIgdD1lbi5NcigpO3QrPW4tRSxlbi5sbyh0KSxFPU5hTn19LHZvOmZ1bmN0aW9uKCl7cmV0dXJuIEV9LGRvOmZ1bmN0aW9uKG4pe0U9bn0saG86ZnVuY3Rpb24obil7aXNOYU4oUCl8fCh1Kz1uLVAsUD1OYU4pfSxScjpmdW5jdGlvbigpe3JldHVybiB1fSxfbzpmdW5jdGlvbihuKXt2YXIgdD1rK2MtTDtyZXR1cm4hbyYmaXNOYU4oUCl8fCh0Kz1NYXRoLmZsb29yKChuLXMpKnRuLzEwMCkpLHR9LG1vOmZ1bmN0aW9uKG4sdCl7cmV0dXJuIG8/ay1uK01hdGguZmxvb3IoKHQtcykqdG4vMTAwKStjOjB9LHdvOmZ1bmN0aW9uKG4sdCl7az1uLHM9dH0seW86ZnVuY3Rpb24oKXtyZXR1cm4gUH0sYm86ZnVuY3Rpb24obil7UD1ufSxJbzpmdW5jdGlvbihuKXtBPW59LFNvOmZ1bmN0aW9uKCl7cmV0dXJuIEd9LFBvOmZ1bmN0aW9uKG4pe0c9bn0sVnI6ZnVuY3Rpb24oKXtyZXR1cm4gd30sQW86ZnVuY3Rpb24obil7dz1ufSx4cjpmdW5jdGlvbigpe3JldHVybiB5fSxDbzpmdW5jdGlvbihuKXt5PW59LGtvOmZ1bmN0aW9uKG4pe3A9bn0sRW86ZnVuY3Rpb24oKXtyZXR1cm4gcH0sVG86ZnVuY3Rpb24obil7Xz1ufSxObzpmdW5jdGlvbigpe3JldHVybiBffSxMbzpmdW5jdGlvbihuKXtlPW59LERvOmZ1bmN0aW9uKCl7cmV0dXJuIGV9LFJvOmZ1bmN0aW9uKG4pe0k9bn0sTW86ZnVuY3Rpb24oKXtyZXR1cm4gSX0sT286ZnVuY3Rpb24obil7dj1ufSxXbzpmdW5jdGlvbigpe3JldHVybiB2fSxWbzpmdW5jdGlvbihuKXtpZighaXNOYU4odikpe3ZhciB0PWVuLkJyKCk7dCs9bi12LGVuLnhvKHQpLHY9TmFOfX0sQnI6ZnVuY3Rpb24oKXtyZXR1cm4gZH0seG86ZnVuY3Rpb24obil7ZD1ufSxVbzpmdW5jdGlvbihuKXttPW59LEJvOmZ1bmN0aW9uKCl7cmV0dXJuIG19LEZvOmZ1bmN0aW9uKG4pe2g9bn0sam86ZnVuY3Rpb24oKXtyZXR1cm4gaH0sR286ZnVuY3Rpb24obil7Zz1ufSxGcjpmdW5jdGlvbigpe3JldHVybiBnfSxLbzpmdW5jdGlvbihuKXt2YXIgdCxlPWVuLkZyKCk7ZSs9TWF0aC5hYnMobi1oKSxlbi5HbyhlKSxoPT1uP3Q9MDpuPGg/dD0tMTpoPG4mJih0PTEpLGVuLkdyKHQpLGg9MH0scW86ZnVuY3Rpb24oKXtyZXR1cm4gcGFyc2VJbnQoZW4ua3IoXCJuc19zdF9za2RcIikpfSxHcjpmdW5jdGlvbihuKXtlbi5DcihcIm5zX3N0X3NrZFwiLG4rXCJcIil9LEhvOmZ1bmN0aW9uKCl7Tz1bXSx6PXk9WT1nPUg9ZD1UPWE9aj1GPUI9Wj1KPXc9cT1uPUs9bD1DPUE9dT1SPUQ9MH0sWW86ZnVuY3Rpb24oKXtRKyt9LEpvOmZ1bmN0aW9uKCl7bm4rK30sem86ZnVuY3Rpb24oKXtYKyt9LFFvOmZ1bmN0aW9uKCl7cmV0dXJuIFZ9LFhvOmZ1bmN0aW9uKG4pe1Y9bn0sWm86ZnVuY3Rpb24oKXtyZXR1cm4geH0sJG86ZnVuY3Rpb24obil7eD1ufSxudTpmdW5jdGlvbihuKXtVPW59LHR1OmZ1bmN0aW9uKCl7cmV0dXJuIFV9LGV1OmZ1bmN0aW9uKCl7Tz1bXSxqPUY9Qj0wfSxpdTpmdW5jdGlvbihuKXtRPW59LHJ1OmZ1bmN0aW9uKG4pe25uPW59LG91OmZ1bmN0aW9uKG4pe1g9bn0sdXU6ZnVuY3Rpb24obil7Zj1ufSxzdTpmdW5jdGlvbigpe3JldHVybiBRfSxhdTpmdW5jdGlvbigpe3JldHVybiBubn0sZnU6ZnVuY3Rpb24oKXtyZXR1cm4gWH0sY3U6ZnVuY3Rpb24oKXtyZXR1cm4gZn0sVXI6ZnVuY3Rpb24oKXtyZXR1cm4gbn0sbHU6ZnVuY3Rpb24oKXtuKyt9LHB1OmZ1bmN0aW9uKCl7cmV0dXJuIEt9LHZ1OmZ1bmN0aW9uKG4peyQ9bn0sZHU6ZnVuY3Rpb24oKXskKyt9LGh1OmZ1bmN0aW9uKCl7cmV0dXJuICR9LF91OmZ1bmN0aW9uKCl7cmV0dXJuIGJ9LGd1OmZ1bmN0aW9uKG4pe2I9bn0sbXU6ZnVuY3Rpb24obil7cj0hIW59LHd1OmZ1bmN0aW9uKCl7cmV0dXJuIHJ9LHl1OmZ1bmN0aW9uKCl7cmV0dXJuIHRufSxidTpmdW5jdGlvbihuKXt0bj1ufSxJdTpmdW5jdGlvbihuKXt0bjwwJiYwPGstbj9EKz1rLW46MDx0biYmMDxuLWsmJihEKz1uLWspfSxTdTpmdW5jdGlvbihuKXtOPW59LFB1OmZ1bmN0aW9uKCl7cmV0dXJuIE59LEF1OmZ1bmN0aW9uKG4pe0w9bn0sQ3U6ZnVuY3Rpb24oKXtyZXR1cm4gTH0sa3U6ZnVuY3Rpb24obil7Yz1ufSxFdTpmdW5jdGlvbihuKXtvPW59fSksKFM9e30pLm5zX3N0X2NsPVwiMFwiLFMubnNfc3RfcG49XCIxXCIsUy5uc19zdF90cD1cIjBcIixTLm5zX3N0X2NuPVwiMVwiLFMubnNfc3Rfc2tkPVwiMFwiLFMubnNfc3RfY2k9XCIwXCIsUy5jMz1cIipudWxsXCIsUy5jND1cIipudWxsXCIsUy5jNj1cIipudWxsXCIsUy5uc19zdF9zdD1cIipudWxsXCIsUy5uc19zdF9wdT1cIipudWxsXCIsUy5uc19zdF9wcj1cIipudWxsXCIsUy5uc19zdF9lcD1cIipudWxsXCIsUy5uc19zdF9zbj1cIipudWxsXCIsUy5uc19zdF9lbj1cIipudWxsXCIsUy5uc19zdF9jdD1cIipudWxsXCIsZT1JPSEoaT17fSksdD11bi5ELG89IShyPSEwKSxNPVtdLHY9Rz1XPUU9UD1OYU4sbm49JD1aPVg9UT16PXk9Sj13PVk9Zz1IPWQ9bT1oPXE9bj1LPWw9aj1GPUI9VT14PVY9Uj1EPWM9TD1OPUM9VD1mPWE9QT1rPXU9MCxiPV89cD0hKE89W10pLHRuPWxufWkuVHU9ZnVuY3Rpb24obix0LGUpe2Zvcih2YXIgaT1uLmdldExhYmVscygpLHI9e30sbz0wO2UmJm88ZS5sZW5ndGg7KytvKWkuaGFzT3duUHJvcGVydHkoZVtvXSkmJihyW2Vbb11dPWlbZVtvXV0pO3Quc2V0TGFiZWxzKHIpLHQuc2V0UGxheWJhY2tJbnRlcnZhbE1lcmdlVG9sZXJhbmNlKG4uZ2V0UGxheWJhY2tJbnRlcnZhbE1lcmdlVG9sZXJhbmNlKCkpfSx0LmV4cG9ydHM9aX0sezE3OjE3LDIxOjIxLDIzOjIzLDI0OjI0LDY4OjY4fV0sNTU6W2Z1bmN0aW9uKG4sdCxlKXt0LmV4cG9ydHM9e1BBR0VfTkFNRV9MQUJFTDpcIm5hbWVcIixIQVNIX0xBQkVMUzpbXCJuc19zdF9zdFwiLFwibnNfc3RfY2lcIixcIm5zX3N0X3ByXCIsXCJuc19zdF9zblwiLFwibnNfc3RfZW5cIixcIm5zX3N0X2VwXCIsXCJuc19zdF90eVwiLFwibnNfc3RfY3RcIixcIm5zX3N0X2xpXCIsXCJuc19zdF9hZFwiLFwibnNfc3RfYm5cIixcIm5zX3N0X3RiXCIsXCJuc19zdF9hblwiLFwibnNfc3RfdGFcIixcIm5zX3N0X3B1XCIsXCJjM1wiLFwiYzRcIixcImM2XCJdfX0se31dLDU2OltmdW5jdGlvbihuLHQsZSl7dmFyIGY9big3MykscD1uKDc0KSx2PW4oNzYpLGQ9big3NyksaD1uKDY5KSxnPW4oNzEpLG09big3Miksdz1uKDcwKSx5PW4oNzUpLFE9big3OCksWD1uKDc5KSxaPW4oODApLCQ9big4MSksbm49big1NSksdG49big2OCksZW49big2NSkscm49bigyMCksb249bigyNCksdW49bigxOSksc249big4MiksYW49big2MiksZm49big2MyksY249big1OCkuTnUsbG49big1OCkuTHUscG49big1OCkuRHUsdm49big2MSksZG49big2MCksaG49big1OSksX249bigxOCksZ249big2NiksbW49bigxNyksd249bigyKSx5bj1cInVuZGVmaW5lZFwiLGJuPVwiNi4yLjMuMTgwMzI4XCIsSW49XCI1LjEwXCIsU249XCJTVEFcIixQbj1cImpzX2FwaVwiLEFuPTUwMCxDbj01MDA7dC5leHBvcnRzPWZ1bmN0aW9uKGIpe3ZhciBJLFMsUCxBLEMsayxFLFQsTixMLEQsUixNLE8sdCxlLFcsVixpLHIsbyx4LFUscyxjLEIsRixqPXRoaXMsbj17fSx1PUFuLGE9Q24sXz17fSxsPSExLEc9ITAsSz0hMSxxPSExO2Z1bmN0aW9uIEgobil7dmFyIHQ9SS5NdSgpLlJ1KCk7aWYodD09Y24uSURMRXx8dD09Y24uUExBWUJBQ0tfTk9UX1NUQVJURUR8fHQ9PWNuLkJVRkZFUklOR19CRUZPUkVfUExBWUJBQ0t8fHQ9PWNuLlNFRUtJTkdfQkVGT1JFX1BMQVlCQUNLKXtpZihuPT1sbi5QTEFZKXJldHVybiEwfWVsc2UgaWYodD09Y24uUExBWUlORyl7aWYobj09bG4uRU5EfHxuPT1sbi5BRF9TS0lQfHxuPT1sbi5TRUVLX1NUQVJUfHxuPT1sbi5QQVVTRSlyZXR1cm4hMH1lbHNlIGlmKHQ9PWNuLlBBVVNFRHx8dD09Y24uQlVGRkVSSU5HX0RVUklOR19QQVVTRXx8dD09Y24uU0VFS0lOR19EVVJJTkdfUExBWUJBQ0t8fHQ9PWNuLlNFRUtJTkdfRFVSSU5HX0JVRkZFUklOR3x8dD09Y24uU0VFS0lOR19EVVJJTkdfUEFVU0Upe2lmKG49PWxuLkVORHx8bj09bG4uQURfU0tJUHx8bj09bG4uUExBWSlyZXR1cm4hMH1lbHNlIGlmKHQ9PWNuLkJVRkZFUklOR19EVVJJTkdfUExBWUJBQ0spe2lmKG49PWxuLlBBVVNFX09OX0JVRkZFUklOR3x8bj09bG4uRU5EfHxuPT1sbi5BRF9TS0lQfHxuPT1sbi5TRUVLX1NUQVJUfHxuPT1sbi5QQVVTRXx8bj09bG4uUExBWSlyZXR1cm4hMH1lbHNlIGlmKHQ9PWNuLkJVRkZFUklOR19EVVJJTkdfU0VFS0lORyl7aWYobj09bG4uRU5EfHxuPT1sbi5BRF9TS0lQfHxuPT1sbi5QQVVTRXx8bj09bG4uUExBWSlyZXR1cm4hMH1lbHNlIGlmKHQ9PWNuLlBBVVNFRF9EVVJJTkdfQlVGRkVSSU5HJiYobj09bG4uRU5EfHxuPT1sbi5BRF9TS0lQfHxuPT1sbi5CVUZGRVJfU1RPUHx8bj09bG4uUExBWSkpcmV0dXJuITA7cmV0dXJuITF9ZnVuY3Rpb24gWSgpe0t8fChLPSEwLHNuLk91KEopKX1mdW5jdGlvbiBKKG4pe0Y9bixxPSEwfWZ1bmN0aW9uIHooKXt2YXIgbj17fSx0PXRuLld1KG4pO2ouVnUobG4uRU5ELHQsbil9b24uZXh0ZW5kKGose2dldENvbmZpZ3VyYXRpb246ZnVuY3Rpb24oKXtyZXR1cm4gYnx8e319LERyOmZ1bmN0aW9uKG4sdCxlKXt2YXIgaT1JLmdldFBsYXliYWNrU2Vzc2lvbigpLHI9aS5nZXRBc3NldCgpLG89ITE7aWYobj09bG4uSEVBUlRCRUFUKXt2YXIgdT1pc05hTihWKT9XOlY7KChWPWUpPHV8fHEpJiYocT0hKG89ITApLGU8dT8oaS54dShcIjFcIiksSS5VdSgpLiR0KFwiU3lzdGVtIGNsb2NrIGp1bXAgZGV0ZWN0ZWRcIixcInRvIHRoZSBmYXIgcGFzdFwiKSk6Rj8oaS54dShcIjNcIiksSS5VdSgpLiR0KFwiU3lzdGVtIGNsb2NrIGp1bXAgZGV0ZWN0ZWRcIixcInRvIHRoZSBmdXR1cmVcIikpOihpLnh1KFwiMlwiKSxJLlV1KCkuJHQoXCJTeXN0ZW0gY2xvY2sganVtcCBkZXRlY3RlZFwiLFwidG8gdGhlIG5lYXIgcGFzdFwiKSksZT11KX12YXIgcz17fTtpZihsJiYocy5jMj1jKSx0eXBlb2YgZG9jdW1lbnQhPXluKXt2YXIgYT1kb2N1bWVudDtzLmM3PWEuVVJMLHMuYzg9YS50aXRsZSxzLmM5PWEucmVmZXJyZXJ9cy5uc190cz0rbmV3IERhdGUrXCJcIixzLm5zX3N0X2V2PWxuLnRvU3RyaW5nKG4pLHMubnNfc3RfbXA9UG4scy5uc19zdF9tdj1ibixzLm5zX3N0X3ViPVwiMFwiLHMubnNfc3RfYnI9XCIwXCIscy5uc19zdF9wbj1cIjFcIixzLm5zX3N0X3RwPVwiMFwiLHMubnNfc3RfaXQ9cG4udG9TdHJpbmcocG4uQnUpLHMubnNfc3Rfc3Y9Ym4scy5uc19zdF9zbXY9SW4scy5uc190eXBlPVwiaGlkZGVuXCIscy5uc19zdF9lYz1JLmp1KCkuRnUoKStcIlwiLHMubnNfc3Rfa2k9SS5TKCkuR3UoKStcIlwiLHQubnNfc3RfcG8/cy5uc19zdF9wbz10Lm5zX3N0X3BvK1wiXCI6ci53dSgpP3MubnNfc3RfcG89ci5fbyhlKStcIlwiOnMubnNfc3RfcG89QitcIlwiLEI9cGFyc2VJbnQocy5uc19zdF9wbyksaS5EcihzLGUpLGkuZ2V0QXNzZXQoKS5EcihzLGUsbj09bG4uSEVBUlRCRUFUKTt2YXIgZj17fTtyZXR1cm4gb24uZXh0ZW5kKGYsXyksb24uZXh0ZW5kKGYsaS5nZXRMYWJlbHMoKSksb24uZXh0ZW5kKGYsaS5nZXRBc3NldCgpLmdldExhYmVscygpKSxvbi5leHRlbmQoZix0KSxvJiYoci53byhCLFYpLGkuYm8oVi1wYXJzZUludChzLm5zX3N0X2RwdCkpLHIuYm8oVi1wYXJzZUludChzLm5zX3N0X2RwdCkpLHIuZG8oVi1wYXJzZUludChzLm5zX3N0X2RldCkpKSx7V3Q6bixVdDpzLEt1OmZ9fSxWdTpmdW5jdGlvbihuLHQsZSxpKXtqLnF1KCk7dmFyIHI9SS5NdSgpLlJ1KCksbz1JLk11KCkuSHUobik7aWYobnVsbCE9byYmbyE9cilpZighai5pc1Rocm90dGxpbmdFbmFibGVkKCl8fHIhPWNuLlBMQVlJTkcmJnIhPWNuLlBBVVNFRHx8byE9Y24uUExBWUlORyYmbyE9Y24uUEFVU0VEfHxpKXt2YXIgdSxzO2Iuc3lzdGVtQ2xvY2tKdW1wRGV0ZWN0aW9uJiYobz09Y24uSURMRT8oc24uWXUoSiksSz0hMSk6cj09Y24uSURMRSYmWSgpKSxHJiZ0bi5KdShyKSYmIXRuLkp1KG8pP2FuLnp1KHopOkcmJiF0bi5KdShyKSYmdG4uSnUobykmJmFuLlF1KHopO3ZhciBhPUkuZ2V0UGxheWJhY2tTZXNzaW9uKCksZj1hLmdldEFzc2V0KCksYz1pc05hTihWKT9XOlYsbD0hMTsoKFY9dCk8Y3x8cSkmJihxPSEobD0hMCksdDxjPyhhLnh1KFwiMVwiKSxJLlV1KCkuJHQoXCJTeXN0ZW0gY2xvY2sganVtcCBkZXRlY3RlZFwiLFwidG8gdGhlIGZhciBwYXN0XCIpKTpGPyhhLnh1KFwiM1wiKSxJLlV1KCkuJHQoXCJTeXN0ZW0gY2xvY2sganVtcCBkZXRlY3RlZFwiLFwidG8gdGhlIGZ1dHVyZVwiKSk6KGEueHUoXCIyXCIpLEkuVXUoKS4kdChcIlN5c3RlbSBjbG9jayBqdW1wIGRldGVjdGVkXCIsXCJ0byB0aGUgbmVhciBwYXN0XCIpKSx0PWMpLGUubnNfc3RfcG8/SS5NdSgpLlJ1KCk9PWNuLklETEU/Zi5BdShmLlB1KCktcGFyc2VJbnQoZS5uc19zdF9wbykpOmYuQXUoZi5tbyhwYXJzZUludChlLm5zX3N0X3BvKSx0KSk6Zi53dSgpP0kuTXUoKS5SdSgpPT1jbi5JRExFP2UubnNfc3RfcG89Zi5QdSgpLWYuQ3UoKStcIlwiOmUubnNfc3RfcG89Zi5fbyh0KStcIlwiOmUubnNfc3RfcG89QitcIlwiO3ZhciBwLHYsZCxoLF89cGFyc2VJbnQoZS5uc19zdF9wbyk7Qj1fLHA9bix2PXQsZD1lLGg9SS5NdSgpLlJ1KCkscD09bG4uQURfU0tJUCYmIWQuaGFzT3duUHJvcGVydHkoXCJuc19zdF91aVwiKSYmSChwKT9kLm5zX3N0X3VpPVwic2tpcFwiOnA9PWxuLlNFRUtfU1RBUlQmJiFkLmhhc093blByb3BlcnR5KFwibnNfc3RfdWlcIikmJkgocCkmJihkLm5zX3N0X3VpPVwic2Vla1wiKSxoPT1jbi5JRExFP3A9PWxuLkJVRkZFUj9TLlh1KHYsZCk6cD09bG4uU0VFS19TVEFSVD9TLlp1KHYsZCk6cD09bG4uUExBWSYmUy4kdSh2LGQpOmg9PWNuLlBMQVlCQUNLX05PVF9TVEFSVEVEP3A9PWxuLkVORHx8cD09bG4uQURfU0tJUD9BLm5zKHYsZCk6cD09bG4uU0VFS19TVEFSVD9BLlp1KHYsZCk6cD09bG4uUExBWT9BLiR1KHYsZCk6cD09bG4uQlVGRkVSJiZBLlh1KHYsZCk6aD09Y24uUExBWUlORz9wPT1sbi5FTkR8fHA9PWxuLkFEX1NLSVA/Qy5ucyh2LGQpOnA9PWxuLkJVRkZFUj9DLlh1KHYsZCk6cD09bG4uU0VFS19TVEFSVD9DLlp1KHYsZCk6cD09bG4uUEFVU0UmJkMudHModixkKTpoPT1jbi5QQVVTRUQ/cD09bG4uRU5EfHxwPT1sbi5BRF9TS0lQP1AubnModixkKTpwPT1sbi5QTEFZP1AuJHUodixkKTpwPT1sbi5CVUZGRVI/Ty5lcyh2LGQpOnA9PWxuLlNFRUtfU1RBUlQmJk8ucnModixkKTpoPT1jbi5CVUZGRVJJTkdfQkVGT1JFX1BMQVlCQUNLP3A9PWxuLkVORHx8cD09bG4uQURfU0tJUD9rLm5zKHYsZCk6cD09bG4uQlVGRkVSX1NUT1A/ay5vcyh2LGQpOnA9PWxuLlNFRUtfU1RBUlQ/ay5adSh2LGQpOnA9PWxuLlBBVVNFP2sudHModixkKTpwPT1sbi5QTEFZJiZrLiR1KHYsZCk6aD09Y24uQlVGRkVSSU5HX0RVUklOR19QTEFZQkFDSz9wPT1sbi5QQVVTRV9PTl9CVUZGRVJJTkc/RS51cyh2LGQpOnA9PWxuLkJVRkZFUl9TVE9QP08uc3ModixkKTpwPT1sbi5FTkR8fHA9PWxuLkFEX1NLSVA/RS5ucyh2LGQpOnA9PWxuLlNFRUtfU1RBUlQ/RS5adSh2LGQpOnA9PWxuLlBBVVNFP0UudHModixkKTpwPT1sbi5QTEFZJiZPLnNzKHYsZCk6aD09Y24uQlVGRkVSSU5HX0RVUklOR19TRUVLSU5HP3A9PWxuLkVORHx8cD09bG4uQURfU0tJUD9ULm5zKHYsZCk6cD09bG4uUEFVU0U/VC50cyh2LGQpOnA9PWxuLlBMQVk/VC4kdSh2LGQpOnA9PWxuLkJVRkZFUl9TVE9QJiZPLmFzKHYsZCk6aD09Y24uQlVGRkVSSU5HX0RVUklOR19QQVVTRT9wPT1sbi5FTkR8fHA9PWxuLkFEX1NLSVA/Ti5mcyh2LGQpOnA9PWxuLlBBVVNFP04udHModixkKTpwPT1sbi5QTEFZP04uJHUodixkKTpwPT1sbi5TRUVLX1NUQVJUP08ucnModixkKTpwPT1sbi5CVUZGRVJfU1RPUCYmTy5hcyh2LGQpOmg9PWNuLlNFRUtJTkdfQkVGT1JFX1BMQVlCQUNLP3A9PWxuLkVORHx8cD09bG4uQURfU0tJUD9ELm5zKHYsZCk6cD09bG4uUEFVU0U/RC50cyh2LGQpOnA9PWxuLlBMQVk/RC4kdSh2LGQpOnA9PWxuLkJVRkZFUiYmTy5lcyh2LGQpOmg9PWNuLlNFRUtJTkdfRFVSSU5HX1BMQVlCQUNLP3A9PWxuLkVORHx8cD09bG4uQURfU0tJUD9NLm5zKHYsZCk6cD09bG4uUExBWT9NLiR1KHYsZCk6cD09bG4uQlVGRkVSP08uZXModixkKTpwPT1sbi5QQVVTRSYmTy5jcyh2LGQpOmg9PWNuLlNFRUtJTkdfRFVSSU5HX0JVRkZFUklORz9wPT1sbi5QQVVTRT9SLnRzKHYsZCk6cD09bG4uQlVGRkVSP08uZXModixkKTpwPT1sbi5QTEFZP08ubHModixkKTpwPT1sbi5FTkR8fHA9PWxuLkFEX1NLSVA/Ty5wcyh2LGQpOnA9PWxuLkJVRkZFUl9TVE9QJiZPLnZzKHYsZCk6aD09Y24uUEFVU0VEX0RVUklOR19CVUZGRVJJTkc/cD09bG4uRU5EfHxwPT1sbi5BRF9TS0lQP0wubnModixkKTpwPT1sbi5CVUZGRVJfU1RPUD9MLmRzKHYsZCk6cD09bG4uU0VFS19TVEFSVD9MLlp1KHYsZCk6cD09bG4uUEFVU0U/TC50cyh2LGQpOnA9PWxuLlBMQVkmJkwuZHModixkKTpoPT1jbi5TRUVLSU5HX0RVUklOR19QQVVTRSYmKHA9PWxuLkJVRkZFUj9PLmVzKHYsZCk6cD09bG4uUExBWT9PLmxzKHYsZCk6cD09bG4uUEFVU0U/Ty5jcyh2LGQpOnA9PWxuLkVORHx8cD09bG4uQURfU0tJUD9PLnBzKHYsZCk6cD09bG4uQlVGRkVSX1NUT1AmJk8udnModixkKSksSChwKSYmSS5nZXRQbGF5YmFja1Nlc3Npb24oKS5ocyghMCksZi53byhfLHQpLGYua3UoZi5DdSgpKTt2YXIgZz0wO2lzTmFOKEkuTXUoKS5fcygpKXx8KGc9dC1JLk11KCkuX3MoKSksSS5NdSgpLlZ1KG4sdCksbCYmKGYud28oXyxWKSxvIT1jbi5JRExFJiZvIT1jbi5QTEFZQkFDS19OT1RfU1RBUlRFRCYmbyE9Y24uU0VFS0lOR19CRUZPUkVfUExBWUJBQ0smJm8hPWNuLkJVRkZFUklOR19CRUZPUkVfUExBWUJBQ0smJmYuZG8oViksbyE9Y24uQlVGRkVSSU5HX0JFRk9SRV9QTEFZQkFDSyYmbyE9Y24uQlVGRkVSSU5HX0RVUklOR19QQVVTRSYmbyE9Y24uQlVGRkVSSU5HX0RVUklOR19QTEFZQkFDSyYmbyE9Y24uQlVGRkVSSU5HX0RVUklOR19TRUVLSU5HJiZvIT1jbi5QQVVTRURfRFVSSU5HX0JVRkZFUklOR3x8KGEuUG8oViksZi5QbyhWKSksbz09Y24uUExBWUlORyYmKGEuYm8oViksZi5ibyhWKSksbyE9Y24uU0VFS0lOR19CRUZPUkVfUExBWUJBQ0smJm8hPWNuLlNFRUtJTkdfRFVSSU5HX0JVRkZFUklORyYmbyE9Y24uU0VFS0lOR19EVVJJTkdfUEFVU0UmJm8hPWNuLlNFRUtJTkdfRFVSSU5HX1BMQVlCQUNLJiZvIT1jbi5CVUZGRVJJTkdfRFVSSU5HX1NFRUtJTkd8fGYuT28oVikpLEkuVXUoKS5sb2coXCJUcmFuc2l0aW9uIGZyb21cIix0bi5ncyhyKSxcInRvXCIsdG4uZ3MobyksXCJkdWUgdG8gZXZlbnQ6XCIsbG4udG9TdHJpbmcobikpO2Zvcih2YXIgbT0wLHc9VS5sZW5ndGg7bTx3O20rKylVW21dKHIsbyxlLGcpfWVsc2V7SS5VdSgpLiR0KFwiVGhyb3R0bGVkIGV2ZW50OlwiLGxuLnRvU3RyaW5nKG4pLFwiZHVyaW5nIHN0YXRlXCIsdG4uZ3MociksZSxqLmdldFRocm90dGxpbmdEZWxheSgpLFwibXNcIik7dmFyIHk9KHU9bixzPWUsZnVuY3Rpb24oKXtqLlZ1KHUsdCxzLCEwKX0pO3g9ai5nZXRQbGF0Zm9ybUFQSSgpLnNldFRpbWVvdXQoeSxqLmdldFRocm90dGxpbmdEZWxheSgpKX1lbHNlIEkuVXUoKS4kdChcIklnbm9yZWQgZXZlbnQ6XCIsbG4udG9TdHJpbmcobiksXCJkdXJpbmcgc3RhdGVcIix0bi5ncyhyKSxlKX0sbXM6ZnVuY3Rpb24obix0LGUpe3ZhciBpPUkuTXUoKS5SdSgpO2lmKG4hPWxuLkxPQUQmJm4hPWxuLkVOR0FHRXx8aT09Y24uSURMRSl7bj09bG4uRVJST1ImJm51bGw9PWUubnNfc3RfZXImJihlLm5zX3N0X2VyPW1uLkQpLG49PWxuLlRSQU5TRkVSJiZudWxsPT1lLm5zX3N0X3JwJiYoZS5uc19zdF9ycD1tbi5EKTt2YXIgcixvLHUscyxhPSEwLGY9ITE7c3dpdGNoKG4pe2Nhc2UgbG4uQklUX1JBVEU6cj1cIm5zX3N0X2JyXCIsbz1cIm5zX3N0X3BiclwiO2JyZWFrO2Nhc2UgbG4uUExBWUJBQ0tfUkFURTpyPVwibnNfc3RfcnRcIixvPVwibnNfc3RfcHJ0XCI7YnJlYWs7Y2FzZSBsbi5WT0xVTUU6cj1cIm5zX3N0X3ZvXCIsbz1cIm5zX3N0X3B2b1wiO2JyZWFrO2Nhc2UgbG4uV0lORE9XX1NUQVRFOnI9XCJuc19zdF93c1wiLG89XCJuc19zdF9wd3NcIjticmVhaztjYXNlIGxuLkFVRElPOnI9XCJuc19zdF9hdFwiLG89XCJuc19zdF9wYXRcIjticmVhaztjYXNlIGxuLlZJREVPOnI9XCJuc19zdF92dFwiLG89XCJuc19zdF9wdnRcIjticmVhaztjYXNlIGxuLlNVQlM6cj1cIm5zX3N0X3R0XCIsbz1cIm5zX3N0X3B0dFwiO2JyZWFrO2Nhc2UgbG4uQ0ROOnI9XCJuc19zdF9jZG5cIixvPVwibnNfc3RfcGNkblwiO2JyZWFrO2RlZmF1bHQ6YT0hMX12YXIgYz1JLmdldFBsYXliYWNrU2Vzc2lvbigpLGw9Yy5nZXRBc3NldCgpO2lmKGEmJnIgaW4gZSlzd2l0Y2gocz1lW3JdLG4pe2Nhc2UgbG4uQklUX1JBVEU6Y2FzZSBsbi5WT0xVTUU6Y2FzZSBsbi5XSU5ET1dfU1RBVEU6ciBpbiBfJiYodT1fW3JdLGY9cz09KGVbb109dSkrXCJcIiksX1tyXT1lW3JdO2JyZWFrO2Nhc2UgbG4uQVVESU86Y2FzZSBsbi5WSURFTzpjYXNlIGxuLlNVQlM6Y2FzZSBsbi5DRE46bC5FcihyKSYmKHU9bC5rcihyKSxmPXM9PShlW29dPXUpK1wiXCIpLGwuQ3IocixlW3JdKTticmVhaztjYXNlIGxuLlBMQVlCQUNLX1JBVEU6dT1sLnl1KCksZVtvXT11K1wiXCJ9aWYoYSYmaSE9Y24uUExBWUlORyYmaSE9Y24uQlVGRkVSSU5HX0RVUklOR19QTEFZQkFDS3x8YSYmZilyZXR1cm4gbj09bG4uUExBWUJBQ0tfUkFURSYmbC5idShwYXJzZUludChlLm5zX3N0X3J0KSksdm9pZCBJLlV1KCkuJHQoXCJObyBtZWFzdXJlbWVudCBzZW5kIGZvciB0aGUgcHNldWRvLWV2ZW50OlwiLGxuLnRvU3RyaW5nKG4pLFwiZHVyaW5nIHN0YXRlXCIsdG4uZ3MoaSksZSk7dmFyIHA9aXNOYU4oVik/VzpWLHY9ITE7KChWPXQpPHB8fHEpJiYocT0hKHY9ITApLHQ8cD8oYy54dShcIjFcIiksSS5VdSgpLiR0KFwiU3lzdGVtIGNsb2NrIGp1bXAgZGV0ZWN0ZWRcIixcInRvIHRoZSBmYXIgcGFzdFwiKSk6Rj8oYy54dShcIjNcIiksSS5VdSgpLiR0KFwiU3lzdGVtIGNsb2NrIGp1bXAgZGV0ZWN0ZWRcIixcInRvIHRoZSBmdXR1cmVcIikpOihjLnh1KFwiMlwiKSxJLlV1KCkuJHQoXCJTeXN0ZW0gY2xvY2sganVtcCBkZXRlY3RlZFwiLFwidG8gdGhlIG5lYXIgcGFzdFwiKSksdD1wKSxlLm5zX3N0X3BvP2wuQXUobC5tbyhwYXJzZUludChlLm5zX3N0X3BvKSx0KSk6bC53dSgpP2UubnNfc3RfcG89bC5fbyh0KStcIlwiOmUubnNfc3RfcG89QitcIlwiO3ZhciBkPXBhcnNlSW50KGUubnNfc3RfcG8pO0I9ZCxJLmdldFBsYXliYWNrU2Vzc2lvbigpLmdldEFzc2V0KCkud28oZCx0KSxsLmt1KGwuQ3UoKSksaSE9Y24uSURMRSYmaSE9Y24uUExBWUJBQ0tfTk9UX1NUQVJURUQmJmkhPWNuLlNFRUtJTkdfQkVGT1JFX1BMQVlCQUNLJiZpIT1jbi5CVUZGRVJJTkdfQkVGT1JFX1BMQVlCQUNLJiYobC5wbyh0KSxsLmRvKHQpKSxpPT1jbi5QTEFZSU5HJiYoYy5obyh0KSxjLmJvKHQpLGwuaG8odCksbC5ibyh0KSxsLkl1KGQpLGwuY28ocGFyc2VJbnQoZS5uc19zdF9wbykpLGwuYW8ocGFyc2VJbnQoZS5uc19zdF9wbykpKSxpIT1jbi5CVUZGRVJJTkdfQkVGT1JFX1BMQVlCQUNLJiZpIT1jbi5CVUZGRVJJTkdfRFVSSU5HX1BBVVNFJiZpIT1jbi5CVUZGRVJJTkdfRFVSSU5HX1BMQVlCQUNLJiZpIT1jbi5CVUZGRVJJTkdfRFVSSU5HX1NFRUtJTkd8fChjLnNvKHQpLGMuUG8odCksbC5zbyh0KSxsLlBvKHQpKTt2YXIgaD1qLkRyKG4sZSx0KTtsLmpyKGguVXQpLGwuS3IoaC5VdCksSS5qdSgpLlZ1KGgpLG49PWxuLlBMQVlCQUNLX1JBVEUmJmwuYnUocGFyc2VJbnQoZS5uc19zdF9ydCkpLHYmJihsLndvKGQsViksaT09Y24uUExBWUlORyYmKGMuYm8oViksbC5ibyhWKSksaSE9Y24uSURMRSYmaSE9Y24uUExBWUJBQ0tfTk9UX1NUQVJURUQmJmkhPWNuLlNFRUtJTkdfQkVGT1JFX1BMQVlCQUNLJiZpIT1jbi5CVUZGRVJJTkdfQkVGT1JFX1BMQVlCQUNLJiZsLmRvKFYpLGkhPWNuLkJVRkZFUklOR19CRUZPUkVfUExBWUJBQ0smJmkhPWNuLkJVRkZFUklOR19EVVJJTkdfUEFVU0UmJmkhPWNuLkJVRkZFUklOR19EVVJJTkdfUExBWUJBQ0smJmkhPWNuLkJVRkZFUklOR19EVVJJTkdfU0VFS0lORyYmaSE9Y24uUEFVU0VEX0RVUklOR19CVUZGRVJJTkd8fChjLlBvKFYpLGwuUG8oVikpLGkhPWNuLlNFRUtJTkdfQkVGT1JFX1BMQVlCQUNLJiZpIT1jbi5TRUVLSU5HX0RVUklOR19CVUZGRVJJTkcmJmkhPWNuLlNFRUtJTkdfRFVSSU5HX1BBVVNFJiZpIT1jbi5TRUVLSU5HX0RVUklOR19QTEFZQkFDSyYmaSE9Y24uQlVGRkVSSU5HX0RVUklOR19TRUVLSU5HfHxsLk9vKFYpKX1lbHNlIEkuVXUoKS4kdChcIklnbm9yZWQgcHNldWRvLWV2ZW50OlwiLGxuLnRvU3RyaW5nKG4pLFwiZHVyaW5nIHN0YXRlXCIsdG4uZ3MoaSksZSl9LGdldFN0YXRlOmZ1bmN0aW9uKCl7cmV0dXJuIEkuTXUoKS5SdSgpfSxhZGRMaXN0ZW5lcjpmdW5jdGlvbihuKXtVLnB1c2gobil9LHJlbW92ZUxpc3RlbmVyOmZ1bmN0aW9uKG4pe1Uuc3BsaWNlKHVuLmluZGV4T2YobixVKSwxKX0sZ2V0TGFiZWw6ZnVuY3Rpb24obil7cmV0dXJuIF9bbl19LGdldExhYmVsczpmdW5jdGlvbigpe3JldHVybiBffSxzZXRMYWJlbDpmdW5jdGlvbihuLHQpe251bGw9PXQ/ZGVsZXRlIF9bbl06X1tuXT10fSxzZXRMYWJlbHM6ZnVuY3Rpb24obil7Zm9yKHZhciB0IGluIG4pbi5oYXNPd25Qcm9wZXJ0eSh0KSYmai5zZXRMYWJlbCh0LG5bdF0pfSxnZXRQbGF0Zm9ybUFQSTpmdW5jdGlvbigpe3JldHVybiBJLndzKCkuZ2V0UGxhdGZvcm1BUEkoKX0seXM6ZnVuY3Rpb24oKXtyZXR1cm4gbn0saXNQcm9wZXJseUluaXRpYWxpemVkOmZ1bmN0aW9uKCl7dmFyIG49SS53cygpLlduKCksdD1JLndzKCkuZygpLGU9SS53cygpLmdldFBpeGVsVVJMKCk7cmV0dXJuIG4mJmUmJnR9LHNldFRocm90dGxpbmdEZWxheTpmdW5jdGlvbihuKXthPW59LGdldFRocm90dGxpbmdEZWxheTpmdW5jdGlvbigpe3JldHVybiBhfSxpc1Rocm90dGxpbmdFbmFibGVkOmZ1bmN0aW9uKCl7cmV0dXJuIG99LHNldFRocm90dGxpbmdFbmFibGVkOmZ1bmN0aW9uKG4pe289bn0sYnM6ZnVuY3Rpb24oKXtyZXR1cm4gdH0sSXM6ZnVuY3Rpb24obil7dD1ufSxnZXRMb2FkVGltZU9mZnNldDpmdW5jdGlvbigpe3JldHVybiBlfSxzZXRMb2FkVGltZU9mZnNldDpmdW5jdGlvbihuKXtlPW59LFNzOmZ1bmN0aW9uKCl7cmV0dXJuIFd9LHNldFBhdXNlT25CdWZmZXJpbmdJbnRlcnZhbDpmdW5jdGlvbihuKXt1PW59LGdldFBhdXNlT25CdWZmZXJpbmdJbnRlcnZhbDpmdW5jdGlvbigpe3JldHVybiB1fSxpc1BhdXNlT25CdWZmZXJpbmdFbmFibGVkOmZ1bmN0aW9uKCl7cmV0dXJuIGl9LHNldFBhdXNlT25CdWZmZXJpbmdFbmFibGVkOmZ1bmN0aW9uKG4pe2k9bn0sc2V0RXhpdEVuZEV2ZW50RW5hYmxlZDpmdW5jdGlvbihuKXtpZihHIT1uKXt2YXIgdD1JLk11KCkuUnUoKTtufHx0bi5KdSh0KT9uJiYhdG4uSnUodCkmJmFuLnp1KHopOmFuLlF1KHopfUc9bn0saXNFeGl0RW5kRXZlbnRFbmFibGVkOmZ1bmN0aW9uKCl7cmV0dXJuIEd9LFBzOmZ1bmN0aW9uKG4saSl7ai5BcygpLHI9ai5nZXRQbGF0Zm9ybUFQSSgpLnNldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgbj17fSx0PXRuLld1KG4pLGU9cGFyc2VJbnQoaS5uc19zdF9wbyk7bi5uc19zdF9wbz1lK1wiXCIsai5WdShsbi5QQVVTRV9PTl9CVUZGRVJJTkcsdCxuKX0sdSl9LEFzOmZ1bmN0aW9uKCl7bnVsbCE9ciYmKGouZ2V0UGxhdGZvcm1BUEkoKS5jbGVhclRpbWVvdXQocikscj1udWxsKX0scXU6ZnVuY3Rpb24oKXt4JiYoai5nZXRQbGF0Zm9ybUFQSSgpLmNsZWFyVGltZW91dCh4KSx4PW51bGwpfSxzZXRMaXZlRW5kcG9pbnRVUkw6ZnVuY3Rpb24obil7aWYobnVsbD09bnx8MD09bi5sZW5ndGgpcmV0dXJuIG51bGw7dmFyIHQ9ZGVjb2RlVVJJQ29tcG9uZW50fHx1bmVzY2FwZSxlPW4uaW5kZXhPZihcIj9cIik7aWYoMDw9ZSl7aWYoZTxuLmxlbmd0aC0xKXtmb3IodmFyIGk9bi5zdWJzdHJpbmcoZSsxKS5zcGxpdChcIiZcIikscj0wLG89aS5sZW5ndGg7cjxvO3IrKyl7dmFyIHU9aVtyXS5zcGxpdChcIj1cIik7Mj09dS5sZW5ndGg/ai5zZXRMYWJlbCh1WzBdLHQodVsxXSkpOjE9PXUubGVuZ3RoJiZqLnNldExhYmVsKG5uLlBBR0VfTkFNRV9MQUJFTCx0KHVbMF0pKX1uPW4uc3Vic3RyaW5nKDAsZSsxKX19ZWxzZSBuKz1cIj9cIjtyZXR1cm4gcz1ufSxnZXRMaXZlRW5kcG9pbnRVUkw6ZnVuY3Rpb24oKXtyZXR1cm4gc3x8KHR5cGVvZiBuc19wIT09eW4mJlwic3RyaW5nXCI9PXR5cGVvZiBuc19wLnNyYz9zPW5zX3Auc3JjLnJlcGxhY2UoLyZhbXA7LyxcIiZcIikucmVwbGFjZSgvJm5zX190PVxcZCsvLFwiXCIpOlwic3RyaW5nXCI9PXR5cGVvZiBuc19waXhlbFVybD9zPW5zX3BpeGVsVXJsLnJlcGxhY2UoLyZhbXA7LyxcIiZcIikucmVwbGFjZSgvJm5zX190PVxcZCsvLFwiXCIpOm51bGwpfSxDczpmdW5jdGlvbigpe3JldHVybiBJfSxrczpmdW5jdGlvbihuKXt2YXIgdD1JLmdldFBsYXliYWNrU2Vzc2lvbigpO0kuRXMobmV3IGZuKEkpKSxmbi5rcyhJLHQsbil9LFRzOmZ1bmN0aW9uKCl7SS5OcygpLnBhdXNlKCk7dmFyIG49SS5OcygpLkxzKCk7SS5EcyhuZXcgZG4oSSkpLEkuTnMoKS5ScyhuKX0sZ2V0VmVyc2lvbjpmdW5jdGlvbigpe3JldHVybiBibn19KSxmdW5jdGlvbigpe2lmKChJPW5ldyBlbihqKSkuTXMod24uZ2V0Q29yZSgpKSxJLk9zKG5ldyB2bihJKSksSS5EcyhuZXcgZG4oSSkpLEkuV3MobmV3IGhuKEkpKSxJLlZzKG5ldyBnbiksSS54cyhuZXcgX24oU24sYi5kZWJ1ZykpLEkuRXMobmV3IGZuKEkpKSxTPW5ldyBmKEkpLFA9bmV3IHAoSSksQT1uZXcgdihJKSxDPW5ldyBkKEkpLGs9bmV3IGgoSSksRT1uZXcgZyhJKSxUPW5ldyBtKEkpLE49bmV3IHcoSSksTD1uZXcgeShJKSxEPW5ldyBRKEkpLFI9bmV3IFgoSSksTT1uZXcgWihJKSxPPW5ldyAkKEkpLHQ9ITEsZT0wLFc9K25ldyBEYXRlLG89IShpPSEwKSxVPVtdLGIucHVibGlzaGVySWQpe2w9ITAsYz1iLnB1Ymxpc2hlcklkK1wiXCI7dmFyIG49KChcInNlY3VyZVwiaW4gYj9iLnNlY3VyZTpJLndzKCkmJkkud3MoKS5pc1Byb3Blcmx5SW5pdGlhbGl6ZWQoKT9JLndzKCkuaXNTZWN1cmUoKTp0bi5mZSgpJiZybi5jZSgpKT9cImh0dHBzOi8vc2JcIjpcImh0dHA6Ly9iXCIpK1wiLnNjb3JlY2FyZHJlc2VhcmNoLmNvbS9wP2MxPTJcIjtqLnNldExpdmVFbmRwb2ludFVSTChuKX1iLmxpdmVFbmRwb2ludFVSTCYmai5zZXRMaXZlRW5kcG9pbnRVUkwoYi5saXZlRW5kcG9pbnRVUkwpLGIuc3lzdGVtQ2xvY2tKdW1wRGV0ZWN0aW9uJiYoc24uc2V0UGxhdGZvcm1BUEkoai5nZXRQbGF0Zm9ybUFQSSgpKSxiLnN5c3RlbUNsb2NrSnVtcERldGVjdGlvbkludGVydmFsP3NuLlVzKHBhcnNlSW50KGIuc3lzdGVtQ2xvY2tKdW1wRGV0ZWN0aW9uSW50ZXJ2YWwpLCEwKTpzbi5VcygpLGIuc3lzdGVtQ2xvY2tKdW1wRGV0ZWN0aW9uUHJlY2lzaW9uP3NuLkJzKHBhcnNlSW50KGIuc3lzdGVtQ2xvY2tKdW1wRGV0ZWN0aW9uUHJlY2lzaW9uKSwhMCk6c24uQnMoKSxZKCkpfSgpfX0sezE3OjE3LDE4OjE4LDE5OjE5LDI6MiwyMDoyMCwyNDoyNCw1NTo1NSw1ODo1OCw1OTo1OSw2MDo2MCw2MTo2MSw2Mjo2Miw2Mzo2Myw2NTo2NSw2Njo2Niw2ODo2OCw2OTo2OSw3MDo3MCw3MTo3MSw3Mjo3Miw3Mzo3Myw3NDo3NCw3NTo3NSw3Njo3Niw3Nzo3Nyw3ODo3OCw3OTo3OSw4MDo4MCw4MTo4MSw4Mjo4Mn1dLDU3OltmdW5jdGlvbihuLHQsZSl7dmFyIFMsUCxBPW4oMjApLEM9big0KSxrPVwidW5kZWZpbmVkXCI7QS5mZSgpPyhTPXdpbmRvdyxQPWRvY3VtZW50KTooUz17fSxQPXtsb2NhdGlvbjp7aHJlZjpcIlwifSx0aXRsZTpcIlwiLFVSTDpcIlwiLHJlZmVycmVyOlwiXCIsY29va2llOlwiXCJ9KSx0LmV4cG9ydHM9ZnVuY3Rpb24obix0KXtmb3IodmFyIGUsaT1TLmVuY29kZVVSSUNvbXBvbmVudHx8ZXNjYXBlLHI9W10sbz1DLmssdT1uLnNwbGl0KFwiP1wiKSxzPXVbMF0sYT11WzFdLnNwbGl0KFwiJlwiKSxmPTAsYz1hLmxlbmd0aDtmPGM7ZisrKXt2YXIgbD1hW2ZdLnNwbGl0KFwiPVwiKSxwPXVuZXNjYXBlKGxbMF0pLHY9dW5lc2NhcGUobFsxXSk7cCYmKHRbcF09dil9Zm9yKHZhciBkPXt9LGg9MCxfPW8ubGVuZ3RoO2g8XztoKyspe3ZhciBnPW9baF07aWYodC5oYXNPd25Qcm9wZXJ0eShnKSl7dmFyIG09dFtnXTt0eXBlb2YgbSE9PWsmJm51bGwhPW0mJihkW2ddPSEwLHIucHVzaChpKGcpK1wiPVwiK2kodFtnXSkpKX19Zm9yKHZhciB3IGluIHQpaWYodC5oYXNPd25Qcm9wZXJ0eSh3KSl7aWYoZFt3XSljb250aW51ZTt2YXIgeT10W3ddO3R5cGVvZiB5IT09ayYmbnVsbCE9eSYmci5wdXNoKGkodykrXCI9XCIraSh0W3ddKSl9ZT0oZT1zK1wiP1wiK3Iuam9pbihcIiZcIikpKyhlLmluZGV4T2YoXCImYzg9XCIpPDA/XCImYzg9XCIraShQLnRpdGxlKTpcIlwiKSsoZS5pbmRleE9mKFwiJmM3PVwiKTwwP1wiJmM3PVwiK2koUC5VUkwpOlwiXCIpKyhlLmluZGV4T2YoXCImYzk9XCIpPDA/XCImYzk9XCIraShQLnJlZmVycmVyKTpcIlwiKTt2YXIgYj1BLkp0KCk/Qy5BOkMuUDtpZihlLmxlbmd0aD5iJiYwPGUuaW5kZXhPZihcIiZcIikpe3ZhciBJPWUuc3Vic3RyKDAsYi04KS5sYXN0SW5kZXhPZihcIiZcIik7ZT0oZS5zdWJzdHJpbmcoMCxJKStcIiZuc19jdXQ9XCIraShlLnN1YnN0cmluZyhJKzEpKSkuc3Vic3RyKDAsYil9cmV0dXJuIGV9fSx7MjA6MjAsNDo0fV0sNTg6W2Z1bmN0aW9uKG4sdCxlKXt2YXIgaSxyLG89KGk9W1wicGxheVwiLFwicGF1c2VcIixcInBhdXNlLW9uLWJ1ZmZlcmluZ1wiLFwiZW5kXCIsXCJidWZmZXJcIixcImJ1ZmZlci1zdG9wXCIsXCJrZWVwLWFsaXZlXCIsXCJoYlwiLFwiY3VzdG9tXCIsXCJsb2FkXCIsXCJzdGFydFwiLFwic2tzdGFydFwiLFwiYWRza2lwXCIsXCJjdGFcIixcImVycm9yXCIsXCJ0cmFuc1wiLFwiZHJtZmFcIixcImRybWFwXCIsXCJkcm1kZVwiLFwiYml0cnRcIixcInBsYXlydFwiLFwidm9sdW1lXCIsXCJ3aW5kb3dcIixcImF1ZGlvXCIsXCJ2aWRlb1wiLFwic3Vic1wiLFwiY2RuXCJdLHtQTEFZOjAsUEFVU0U6MSxQQVVTRV9PTl9CVUZGRVJJTkc6MixFTkQ6MyxCVUZGRVI6NCxCVUZGRVJfU1RPUDo1LEtFRVBBTElWRTo2LEhFQVJUQkVBVDo3LENVU1RPTTo4LExPQUQ6OSxFTkdBR0U6MTAsU0VFS19TVEFSVDoxMSxBRF9TS0lQOjEyLENUQToxMyxFUlJPUjoxNCxUUkFOU0ZFUjoxNSxEUk1fRkFJTEVEOjE2LERSTV9BUFBST1ZFRDoxNyxEUk1fREVOSUVEOjE4LEJJVF9SQVRFOjE5LFBMQVlCQUNLX1JBVEU6MjAsVk9MVU1FOjIxLFdJTkRPV19TVEFURToyMixBVURJTzoyMyxWSURFTzoyNCxTVUJTOjI1LENETjoyNix0b1N0cmluZzpmdW5jdGlvbihuKXtyZXR1cm4gaVtuXX19KSx1PShyPVtcImNcIixcInNcIixcInJcIl0se0J1OjAsRnM6MSxqczoyLHRvU3RyaW5nOmZ1bmN0aW9uKG4pe3JldHVybiByW25dfX0pO3QuZXhwb3J0cy5MdT1vLHQuZXhwb3J0cy5OdT17SURMRTowLFBMQVlCQUNLX05PVF9TVEFSVEVEOjEsUExBWUlORzoyLFBBVVNFRDozLEJVRkZFUklOR19CRUZPUkVfUExBWUJBQ0s6NCxCVUZGRVJJTkdfRFVSSU5HX1BMQVlCQUNLOjUsQlVGRkVSSU5HX0RVUklOR19TRUVLSU5HOjYsQlVGRkVSSU5HX0RVUklOR19QQVVTRTo3LFNFRUtJTkdfQkVGT1JFX1BMQVlCQUNLOjgsU0VFS0lOR19EVVJJTkdfUExBWUJBQ0s6OSxTRUVLSU5HX0RVUklOR19CVUZGRVJJTkc6MTAsU0VFS0lOR19EVVJJTkdfUEFVU0U6MTEsUEFVU0VEX0RVUklOR19CVUZGRVJJTkc6MTJ9LHQuZXhwb3J0cy5EdT11fSx7fV0sNTk6W2Z1bmN0aW9uKG4sdCxlKXt2YXIgcz1uKDI0KSxhPW4oNTcpLGY9big1OCkuTHU7dC5leHBvcnRzPWZ1bmN0aW9uKGkpe3ZhciB0LHIsbz10aGlzLHU9W107cy5leHRlbmQodGhpcyx7VnU6ZnVuY3Rpb24obil7Zm9yKHZhciB0PXMuZXh0ZW5kKHt9LG4uVXQsbi5LdSksZT0wO2U8dS5sZW5ndGg7KytlKXVbZV0odCk7IWZ1bmN0aW9uKG4pe3I9cy5leHRlbmQoe30sbik7dmFyIHQ9aS5HcygpLmdldExpdmVFbmRwb2ludFVSTCgpO2kuR3MoKS5pc1Byb3Blcmx5SW5pdGlhbGl6ZWQoKT9pLndzKCkubnQobix0KTp0JiZpLkdzKCkuZ2V0UGxhdGZvcm1BUEkoKS5odHRwR2V0KGEodCxuKSl9KHQpLG4uV3QhPWYuSEVBUlRCRUFUJiZvLktzKCl9LGFkZE1lYXN1cmVtZW50TGlzdGVuZXI6ZnVuY3Rpb24obil7XCJmdW5jdGlvblwiPT10eXBlb2YgbiYmdS5wdXNoKG4pfSxyZW1vdmVNZWFzdXJlbWVudExpc3RlbmVyOmZ1bmN0aW9uKG4pe2Zvcih2YXIgdD1OYU4sZT0wO2U8dS5sZW5ndGg7KytlKWlmKHVbZV09PW4pe3Q9ZTticmVha31pc05hTih0KXx8dS5zcGxpY2UodCwxKX0sRnU6ZnVuY3Rpb24oKXtyZXR1cm4gdH0sS3M6ZnVuY3Rpb24oKXt0Kyt9LHFzOmZ1bmN0aW9uKG4pe3Q9bn0sSHM6ZnVuY3Rpb24oKXtyZXR1cm4gcn19KSx0PTF9fSx7MjQ6MjQsNTc6NTcsNTg6NTh9XSw2MDpbZnVuY3Rpb24obix0LGUpe3ZhciBjPW4oNTgpLkx1LGw9big2OCkscD1uKDI0KSx2PVt7WXM6NmU0LGludGVydmFsOjFlNH0se1lzOm51bGwsaW50ZXJ2YWw6NmU0fV07dC5leHBvcnRzPWZ1bmN0aW9uKGkpe3ZhciBlLHIsbyx1PXRoaXMscz12O2Z1bmN0aW9uIGEoKXtvKys7dmFyIG49e30sdD1sLld1KG4pO24ubnNfc3RfaGM9aS5OcygpLkpzKCkrXCJcIjt2YXIgZT1pLkdzKCkuRHIoYy5IRUFSVEJFQVQsbix0KTtpLmdldFBsYXliYWNrU2Vzc2lvbigpLmdldEFzc2V0KCkuS3IoZS5VdCksaS5qdSgpLlZ1KGUpLHI9MCx1LnJlc3VtZSgpfWZ1bmN0aW9uIGYoKXtudWxsIT1lJiYoaS5HcygpLmdldFBsYXRmb3JtQVBJKCkuY2xlYXJUaW1lb3V0KGUpLGU9bnVsbCl9cC5leHRlbmQodGhpcyx7SnM6ZnVuY3Rpb24oKXtyZXR1cm4gb30sUnM6ZnVuY3Rpb24obil7cz1ufSxHdTpmdW5jdGlvbihuKXt2YXIgdD0wO2lmKG51bGwhPXMpZm9yKHZhciBlPTA7ZTxzLmxlbmd0aDtlKyspe3ZhciBpPXNbZV0scj1pLllzO2lmKCFyfHxuPHIpe3Q9aS5pbnRlcnZhbDticmVha319cmV0dXJuIHR9LExzOmZ1bmN0aW9uKCl7cmV0dXJuIHN9LHJlc3VtZTpmdW5jdGlvbigpe2YoKTt2YXIgbj11Lkd1KGkuZ2V0UGxheWJhY2tTZXNzaW9uKCkuZ2V0QXNzZXQoKS5ScigpKygrbmV3IERhdGUtaS5nZXRQbGF5YmFja1Nlc3Npb24oKS5nZXRBc3NldCgpLnlvKCkpKTtpZigwPG4pe3ZhciB0PTA8cj9yOm47ZT1pLkdzKCkuZ2V0UGxhdGZvcm1BUEkoKS5zZXRUaW1lb3V0KGEsdCl9cj0wfSxwYXVzZTpmdW5jdGlvbigpe2YoKTt2YXIgbj11Lkd1KGkuZ2V0UGxheWJhY2tTZXNzaW9uKCkuZ2V0QXNzZXQoKS5ScigpKygrbmV3IERhdGUtaS5nZXRQbGF5YmFja1Nlc3Npb24oKS5nZXRBc3NldCgpLnlvKCkpKTtyPW4tKGkuZ2V0UGxheWJhY2tTZXNzaW9uKCkuZ2V0QXNzZXQoKS5ScigpKygrbmV3IERhdGUtaS5nZXRQbGF5YmFja1Nlc3Npb24oKS5nZXRBc3NldCgpLnlvKCkpKSVufX0pLG89cj0wfX0sezI0OjI0LDU4OjU4LDY4OjY4fV0sNjE6W2Z1bmN0aW9uKG4sdCxlKXt2YXIgdT1uKDU4KS5MdSxzPW4oMjQpLGE9big2OCksZj0xMmU1O3QuZXhwb3J0cz1mdW5jdGlvbihlKXt2YXIgbixpPXRoaXMsdD1mO2Z1bmN0aW9uIHIoKXt2YXIgbj17fSx0PWEuV3Uobik7ZS5HcygpLm1zKHUuS0VFUEFMSVZFLHQsbiksaS5zdGFydCgpfWZ1bmN0aW9uIG8oKXtudWxsIT1uJiYoZS5HcygpLmdldFBsYXRmb3JtQVBJKCkuY2xlYXJUaW1lb3V0KG4pLG49bnVsbCl9cy5leHRlbmQoaSx7c3RhcnQ6ZnVuY3Rpb24oKXtvKCksbj1lLkdzKCkuZ2V0UGxhdGZvcm1BUEkoKS5zZXRUaW1lb3V0KHIsdCl9LHN0b3A6byxzZXRJbnRlcnZhbDpmdW5jdGlvbihuKXt0PW59LEd1OmZ1bmN0aW9uKCl7cmV0dXJuIHR9fSl9fSx7MjQ6MjQsNTg6NTgsNjg6Njh9XSw2MjpbZnVuY3Rpb24obix0LGUpe3ZhciBpPW4oMjApLHI9W10sbz0hMTtmdW5jdGlvbiB1KCl7Zm9yKHZhciBuPTA7bjxyLmxlbmd0aDsrK24pcltuXSgpfXQuZXhwb3J0cz17enU6ZnVuY3Rpb24obil7ci5wdXNoKG4pLG98fGkuZmUoKSYmKHdpbmRvdy5hZGRFdmVudExpc3RlbmVyPyh3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInVubG9hZFwiLHUsITEpLG89ITApOndpbmRvdy5hdHRhY2hFdmVudCYmKHdpbmRvdy5hdHRhY2hFdmVudChcIm9udW5sb2FkXCIsdSksbz0hMCkpfSxRdTpmdW5jdGlvbihuKXtmb3IodmFyIHQ9MDt0PHIubGVuZ3RoOysrdClpZihyW3RdPT1uKXtyLnNwbGljZSh0LDEpO2JyZWFrfTA9PXIubGVuZ3RoJiZpLmZlKCkmJih3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcj8od2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ1bmxvYWRcIix1LCExKSxvPSExKTp3aW5kb3cuZGV0YWNoRXZlbnQmJih3aW5kb3cuZGV0YWNoRXZlbnQoXCJvbnVubG9hZFwiLHUpLG89ITEpKX19fSx7MjA6MjB9XSw2MzpbZnVuY3Rpb24obix0LGUpe3ZhciB3PW4oMjQpLHk9big1NCksYj1uKDY4KSxJPW4oMjEpLFM9big1NSkuSEFTSF9MQUJFTFMsUD1uKDU4KS5OdSxBPW4oNTgpLkx1O2Z1bmN0aW9uIGkoYyl7dmFyIHIsZSx0LG8sdSxpLHMsYSxmLGwscCx2LGQsaCxfLGcsbT10aGlzO3cuZXh0ZW5kKHRoaXMse1R1OmZ1bmN0aW9uKCl7dmFyIG49cjtyPW5ldyB5LHkuVHUobixyKX0senM6ZnVuY3Rpb24obil7cmV0dXJuIG51bGwhPWFbbl19LFFzOmZ1bmN0aW9uKG4pe2Fbbl09e319LFhzOmZ1bmN0aW9uKG4pe2RlbGV0ZSBhW25dfSxaczpmdW5jdGlvbigpe2Zvcih2YXIgbiBpbiBhKWlmKGEuaGFzT3duUHJvcGVydHkobikmJmFbbl0uJHM9PT1yLlRyKCkpe3cuZXh0ZW5kKGFbbl0se25hOnIuc3UoKSx0YTpyLmF1KCksZWE6ci5mdSgpLGlhOnIuY3UoKSxzZWVraW5nOnIuRW8oKSxyYTpyLkJvKCksb2E6ci5qbygpLHVhOnIuJHIoKSxzYTpyLnFyKCksYWE6ci5ZcigpLGZhOnIuenIoKSxjYTpyLlhyKCksbGE6ci5odSgpLHBhOnIuUW8oKSx2YTpyLlpvKCksZGE6ci50dSgpfSk7YnJlYWt9fSxoYTpmdW5jdGlvbihuKXtyZXR1cm4gYVtuXX0sVHI6ZnVuY3Rpb24obil7cmV0dXJuIGFbbl0uJHN9LF9hOmZ1bmN0aW9uKCl7cmV0dXJuIGZ9LGdhOmZ1bmN0aW9uKG4sdCl7YVtuXS4kcz10LGY8dCYmKGY9dCl9LHNldExhYmVsczpmdW5jdGlvbihuKXtudWxsIT1uJiZ3LmV4dGVuZChpLG4pfSxnZXRMYWJlbHM6ZnVuY3Rpb24oKXtyZXR1cm4gaX0sc2V0TGFiZWw6ZnVuY3Rpb24obix0KXt2YXIgZT17fTtlW25dPXQsbS5zZXRMYWJlbHMoZSl9LGdldExhYmVsOmZ1bmN0aW9uKG4pe3JldHVybiBpW25dfSxnZXRBc3NldDpmdW5jdGlvbigpe3JldHVybiByfSx4dTpmdW5jdGlvbihuKXtmb3IodmFyIHQ9MDt0PGcubGVuZ3RoOysrdClpZihnW3RdPT1uKXJldHVybjtnLnB1c2gobil9LERyOmZ1bmN0aW9uKG4sdCl7dmFyIGU9bixpPUkuanQoZS5uc19zdF9wYSk/bS5ScigpOnBhcnNlSW50KGUubnNfc3RfcGEpO2UubnNfc3RfcGE9aSsoaXNOYU4obyk/MDp0LW8pK1wiXCIsZS5uc19zdF9wcD1kK1wiXCIsZS5uc19zdF9zcD1oK1wiXCIsZS5uc19zdF9icD1fK1wiXCIsbHx8KGUubnNfc3RfcGI9bnVsbCE9ZS5uc19zdF9wYj9lLm5zX3N0X3BiOlwiMVwiKSxyLk1vKCkmJihlLm5zX3N0X3BwYz1wK1wiXCIsZS5uc19zdF9wc3E9ditcIlwiKSwwPGcubGVuZ3RoJiYoZS5uc19zdF9pZT0oZS5uc19zdF9pZT9lLm5zX3N0X2llK1wiO1wiOlwiXCIpK2cuam9pbihcIjtcIikpLHcuZXh0ZW5kKGUsdSl9LHJvOmZ1bmN0aW9uKCl7aCsrfSxlbzpmdW5jdGlvbigpe2QrK30saG86ZnVuY3Rpb24obil7aWYoIWlzTmFOKG8pKXt2YXIgdD1tLlJyKCk7dCs9bi1vLG0ubWEodCksbz1OYU59fSxzbzpmdW5jdGlvbihuKXtpZighaXNOYU4oZSkpe3ZhciB0PW0uT3IoKTt0Kz1uLWUsbS51byh0KSxlPU5hTn19LE9yOmZ1bmN0aW9uKCl7cmV0dXJuIF99LHVvOmZ1bmN0aW9uKG4pe189bn0sUnI6ZnVuY3Rpb24oKXtyZXR1cm4gdH0sUG86ZnVuY3Rpb24obil7ZT1ufSxTbzpmdW5jdGlvbigpe3JldHVybiBlfSxtYTpmdW5jdGlvbihuKXt0PW59LGJvOmZ1bmN0aW9uKG4pe289bn0seW86ZnVuY3Rpb24oKXtyZXR1cm4gb30sVnI6ZnVuY3Rpb24oKXtyZXR1cm4gZH0sQW86ZnVuY3Rpb24obil7ZD1ufSx3YTpmdW5jdGlvbigpe3JldHVybiBzfSx5YTpmdW5jdGlvbihuKXtzPW59LGJhOmZ1bmN0aW9uKCl7cmV0dXJuIHB9LElhOmZ1bmN0aW9uKCl7cCsrfSxoczpmdW5jdGlvbihuKXtsPW59LHZ1OmZ1bmN0aW9uKG4pe3Y9bn0sZHU6ZnVuY3Rpb24oKXt2Kyt9LFNhOmZ1bmN0aW9uKCl7cmV0dXJuIHUubnNfc3RfaWR9LHNldEFzc2V0OmZ1bmN0aW9uKG4sdCl7Yy5VdSgpLlp0KFwic2V0QXNzZXRcIixuLHQpLG49Yi5QYShuKTt2YXIgZT1jLk11KCkuUnUoKTtpZihlIT1QLklETEUpe2MuVXUoKS4kdChcIkVuZGluZyB0aGUgY3VycmVudCBDbGlwLiBJdCB3YXMgaW4gc3RhdGU6XCIsYi5ncyhlKSk7dmFyIGk9e307Yy5HcygpLlZ1KEEuRU5ELGIuV3UoaSksaSl9dmFyIHI9XCJcIixvPTA7aWYobnVsbCE9bi5uc19zdF9jbilyPW4ubnNfc3RfY247ZWxzZSBmb3IodmFyIHU9MDt1PFMubGVuZ3RoO3UrKyluW1NbdV1dJiYocis9U1t1XStcIjpcIituW1NbdV1dK1wiO1wiKTt2YXIgcz1tLGE9cy5nZXRBc3NldCgpO2EuRG8oKT8ocy56cyhhLlByKCkpfHwocy5RcyhhLlByKCkpLHMuZ2EoYS5QcigpLGEuVHIoKSkpLHMuWnMoKSxvPXMuenMocik/cy5UcihyKTpJLnRuKG4ubnNfc3RfY24pP3BhcnNlSW50KG4ubnNfc3RfY24pOnMuX2EoKSsxKTpvPXMuenMocik/cy5UcihyKTphLlRyKCkscy5UdSgpLChhPXMuZ2V0QXNzZXQoKSkuQXIociksYS5OcihvKSxhLnNldExhYmVscyhuKTt2YXIgZj1zLmhhKHIpO2YmJihhLkxvKCEwKSxhLml1KGYubmEpLGEucnUoZi50YSksYS5vdShmLmVhKSxhLnV1KGYuaWEpLGEua28oZi5zZWVraW5nKSxhLlVvKGYucmEpLGEuRm8oZi5vYSksYS5ubyhmLnVhKSxmLnNhJiZhLkhyKGYuc2EpLGYuYWEmJmEuSnIoZi5hYSksZi5mYSYmYS5RcihmLmZhKSxmLmNhJiZhLlpyKGYuY2EpLGEudnUoZi5sYSksYS5YbyhmLnBhKSxhLiRvKGYudmEpLGEubnUoZi5kYSkpLGEuSm8oKSxhLkRvKCkmJnQmJnMucm8oKSx0JiYocy52dSgwKSxhLmd1KCEwKSksIUkudG4obi5uc19zdF90cCkmJkkudG4obi5uc19zdF9hZCkmJkkubHQobi5uc19zdF9hZCkmJlwiMFwiIT09bi5uc19zdF9hZCYmYS5DcihcIm5zX3N0X3RwXCIsXCIxXCIpfX0pLHI9bmV3IHksKHU9e30pLm5zX3N0X2lkPStuZXcgRGF0ZStcIlwiLGk9e30sbz1lPU5hTixsPXM9IShhPXt9KSxoPTEsXz12PWQ9cD1mPXQ9MCxnPVtdfWkua3M9ZnVuY3Rpb24obix0LGUpe2Zvcih2YXIgaT10LmdldEFzc2V0KCkscj10LmdldExhYmVscygpLG89e30sdT0wO2UmJnU8ZS5sZW5ndGg7dSsrKXIuaGFzT3duUHJvcGVydHkoZVt1XSkmJihvW2VbdV1dPXJbZVt1XV0pO24uZ2V0UGxheWJhY2tTZXNzaW9uKCkuc2V0TGFiZWxzKG8pLHkuVHUoaSxuLmdldFBsYXliYWNrU2Vzc2lvbigpLmdldEFzc2V0KCksZSl9LHQuZXhwb3J0cz1pfSx7MjE6MjEsMjQ6MjQsNTQ6NTQsNTU6NTUsNTg6NTgsNjg6Njh9XSw2NDpbZnVuY3Rpb24obix0LGUpe3ZhciBwPXtMb25nRm9ybU9uRGVtYW5kOlwiMTJcIixTaG9ydEZvcm1PbkRlbWFuZDpcIjExXCIsTGl2ZTpcIjEzXCIsVXNlckdlbmVyYXRlZExvbmdGb3JtT25EZW1hbmQ6XCIyMlwiLFVzZXJHZW5lcmF0ZWRTaG9ydEZvcm1PbkRlbWFuZDpcIjIxXCIsVXNlckdlbmVyYXRlZExpdmU6XCIyM1wiLEJ1bXBlcjpcIjk5XCIsT3RoZXI6XCIwMFwifSx2PXtMaW5lYXJPbkRlbWFuZFByZVJvbGw6XCIxMVwiLExpbmVhck9uRGVtYW5kTWlkUm9sbDpcIjEyXCIsTGluZWFyT25EZW1hbmRQb3N0Um9sbDpcIjEzXCIsTGluZWFyTGl2ZTpcIjIxXCIsQnJhbmRlZE9uRGVtYW5kUHJlUm9sbDpcIjMxXCIsQnJhbmRlZE9uRGVtYW5kTWlkUm9sbDpcIjMyXCIsQnJhbmRlZE9uRGVtYW5kUG9zdFJvbGw6XCIzM1wiLEJyYW5kZWRPbkRlbWFuZENvbnRlbnQ6XCIzNFwiLEJyYW5kZWRPbkRlbWFuZExpdmU6XCIzNVwiLE90aGVyOlwiMDBcIn0sZD1uKDY3KSxoPW4oNTgpLk51LF89big1OCkuRHUsZz1uKDU1KS5IQVNIX0xBQkVMUyxtPW4oMjEpLHc9bigyNCkseT1uKDE4KSxpPWZ1bmN0aW9uKG4pe3ZhciBvPW51bGwsZT0wLGk9ITEscj1udWxsLHU9e0FhOjAsQ2E6MSxrYToyfSxzPXUuQWEsYT1uZXcgeShcIlRUU1RBXCIsKG58fHt9KS5kZWJ1Zyk7ZnVuY3Rpb24gZihuKXtyLmdldFBsYXliYWNrU2Vzc2lvbigpLnNldEFzc2V0KG4pLG89bixyLm5vdGlmeVBsYXkoKX1mdW5jdGlvbiBjKG4pe3ZhciB0PW58fHt9O3QubnNfc3RfYWQ9XCIxXCIsdC5uc19zdF9hbj0rK2UrXCJcIixyLmdldFBsYXliYWNrU2Vzc2lvbigpLnNldEFzc2V0KHQpLHIubm90aWZ5UGxheSgpLGk9ITF9ZnVuY3Rpb24gbChuLHQpe3M9PXUuQWEmJihzPXQpLGkmJnM9PXQ/IWZ1bmN0aW9uKG4pe2Zvcih2YXIgdCBpbiBnKWlmKGcuaGFzT3duUHJvcGVydHkodCkmJihlPWdbdF0saT1vLHI9biwhKG0udG4oZSkmJm0udG4oaSkmJm0udG4ocikmJihpLmhhc093blByb3BlcnR5KGUpJiZyLmhhc093blByb3BlcnR5KGUpJiZpW2VdPT09cltlXXx8IWkuaGFzT3duUHJvcGVydHkoZSkmJiFyLmhhc093blByb3BlcnR5KGUpKSkpKXJldHVybiExO3ZhciBlLGkscjtyZXR1cm4hMH0obik/ZihuKTooci5nZXRQbGF5YmFja1Nlc3Npb24oKS5nZXRBc3NldCgpLnNldExhYmVscyhuKSxyLmdldFN0YXRlKCkhPWguUExBWUlORyYmci5ub3RpZnlQbGF5KCkpOmYobiksaT0hMCxzPXR9dy5leHRlbmQodGhpcyx7cGxheVZpZGVvQWR2ZXJ0aXNlbWVudDpmdW5jdGlvbihuLHQpe2EuWnQoXCJwbGF5VmlkZW9BZHZlcnRpc2VtZW50XCIsbix0KTt2YXIgZT17bnNfc3RfY3Q6XCJ2YVwifTt0P2UubnNfc3RfY3Q9XCJ2YVwiK3Q6YS53YXJuKFwiQ2FsbGluZyAncGxheVZpZGVvQWR2ZXJ0aXNlbWVudCcgd2l0aG91dCBzcGVjaWZ5aW5nIHRoZSBtZWRpYSB0eXBlIGFzIGEgc2Vjb25kIHBhcmFtZXRlci5cIiksdCE9di5MaW5lYXJMaXZlJiZ0IT12LkJyYW5kZWRPbkRlbWFuZExpdmV8fChlLm5zX3N0X2xpPVwiMVwiKSxuJiZ3LmV4dGVuZChlLG4pLGMoZSl9LHBsYXlBdWRpb0FkdmVydGlzZW1lbnQ6ZnVuY3Rpb24obix0KXthLlp0KFwicGxheUF1ZGlvQWR2ZXJ0aXNlbWVudFwiLG4sdCk7dmFyIGU9e25zX3N0X2N0OlwiYWFcIn07dD9lLm5zX3N0X2N0PVwiYWFcIit0OmEud2FybihcIkNhbGxpbmcgJ3BsYXlBdWRpb0FkdmVydGlzZW1lbnQnIHdpdGhvdXQgc3BlY2lmeWluZyB0aGUgbWVkaWEgdHlwZSBhcyBhIHNlY29uZCBwYXJhbWV0ZXIuXCIpLHQhPXYuTGluZWFyTGl2ZSYmdCE9di5CcmFuZGVkT25EZW1hbmRMaXZlfHwoZS5uc19zdF9saT1cIjFcIiksbiYmdy5leHRlbmQoZSxuKSxjKGUpfSxwbGF5VmlkZW9Db250ZW50UGFydDpmdW5jdGlvbihuLHQpe2EuWnQoXCJwbGF5VmlkZW9Db250ZW50UGFydFwiLG4sdCk7dmFyIGU9e25zX3N0X2N0OlwidmNcIn07dD9lLm5zX3N0X2N0PVwidmNcIit0OmEud2FybihcIkNhbGxpbmcgJ3BsYXlWaWRlb0NvbnRlbnRQYXJ0JyB3aXRob3V0IHNwZWNpZnlpbmcgdGhlIG1lZGlhIHR5cGUgYXMgYSBzZWNvbmQgcGFyYW1ldGVyLlwiKSx0IT1wLkxpdmUmJnQhPXAuVXNlckdlbmVyYXRlZExpdmV8fChlLm5zX3N0X2xpPVwiMVwiKSxuJiZ3LmV4dGVuZChlLG4pLGwoZSx1LmthKX0scGxheUF1ZGlvQ29udGVudFBhcnQ6ZnVuY3Rpb24obix0KXthLlp0KFwicGxheUF1ZGlvQ29udGVudFBhcnRcIixuLHQpO3ZhciBlPXtuc19zdF9jdDpcImFjXCJ9O3Q/ZS5uc19zdF9jdD1cImFjXCIrdDphLndhcm4oXCJDYWxsaW5nICdwbGF5QXVkaW9Db250ZW50UGFydCcgd2l0aG91dCBzcGVjaWZ5aW5nIHRoZSBtZWRpYSB0eXBlIGFzIGEgc2Vjb25kIHBhcmFtZXRlci5cIiksdCE9cC5MaXZlJiZ0IT1wLlVzZXJHZW5lcmF0ZWRMaXZlfHwoZS5uc19zdF9saT1cIjFcIiksbiYmdy5leHRlbmQoZSxuKSxsKGUsdS5DYSl9LHN0b3A6ZnVuY3Rpb24oKXthLlp0KFwic3RvcFwiKSxyLm5vdGlmeVBhdXNlKCl9fSksKHI9bmV3IGQobikpLnNldExhYmVsKFwibnNfc3RfaXRcIixfLnRvU3RyaW5nKF8uanMpKX07aS5Db250ZW50VHlwZT1wLGkuQWRUeXBlPXYsdC5leHBvcnRzPWl9LHsxODoxOCwyMToyMSwyNDoyNCw1NTo1NSw1ODo1OCw2Nzo2N31dLDY1OltmdW5jdGlvbihuLHQsZSl7dmFyIGE9bigyNCk7dC5leHBvcnRzPWZ1bmN0aW9uKG4pe3ZhciB0LGUsaSxyLG8sdSxzO2EuZXh0ZW5kKHRoaXMse3dzOmZ1bmN0aW9uKCl7cmV0dXJuIHR9LEdzOmZ1bmN0aW9uKCl7cmV0dXJuIG59LGp1OmZ1bmN0aW9uKCl7cmV0dXJuIGV9LE11OmZ1bmN0aW9uKCl7cmV0dXJuIGl9LE5zOmZ1bmN0aW9uKCl7cmV0dXJuIHJ9LFM6ZnVuY3Rpb24oKXtyZXR1cm4gb30sZ2V0UGxheWJhY2tTZXNzaW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHV9LFV1OmZ1bmN0aW9uKCl7cmV0dXJuIHN9LE1zOmZ1bmN0aW9uKG4pe3Q9bn0sT3M6ZnVuY3Rpb24obil7bz1ufSxEczpmdW5jdGlvbihuKXtyPW59LFdzOmZ1bmN0aW9uKG4pe2U9bn0sVnM6ZnVuY3Rpb24obil7aT1ufSxFczpmdW5jdGlvbihuKXt1PW59LHhzOmZ1bmN0aW9uKG4pe3M9bn19KX19LHsyNDoyNH1dLDY2OltmdW5jdGlvbihuLHQsZSl7dmFyIHM9big1OCkuTnUsYT1uKDI0KSxmPW4oNTgpLkx1O3QuZXhwb3J0cz1mdW5jdGlvbihuKXt2YXIgaSxyLG8sdT10aGlzO2EuZXh0ZW5kKHUse0h1OmZ1bmN0aW9uKG4pe2lmKG89PXMuSURMRSl7aWYobj09Zi5QTEFZKXJldHVybiBzLlBMQVlJTkc7aWYobj09Zi5TRUVLX1NUQVJUKXJldHVybiBzLlNFRUtJTkdfQkVGT1JFX1BMQVlCQUNLO2lmKG49PWYuQlVGRkVSKXJldHVybiBzLkJVRkZFUklOR19CRUZPUkVfUExBWUJBQ0t9ZWxzZSBpZihvPT1zLlBMQVlCQUNLX05PVF9TVEFSVEVEKXtpZihuPT1mLlBMQVkpcmV0dXJuIHMuUExBWUlORztpZihuPT1mLlNFRUtfU1RBUlQpcmV0dXJuIHMuU0VFS0lOR19CRUZPUkVfUExBWUJBQ0s7aWYobj09Zi5CVUZGRVIpcmV0dXJuIHMuQlVGRkVSSU5HX0JFRk9SRV9QTEFZQkFDSztpZihuPT1mLkVORHx8bj09Zi5BRF9TS0lQKXJldHVybiBzLklETEV9ZWxzZSBpZihvPT1zLlBMQVlJTkcpe2lmKG49PWYuRU5EfHxuPT1mLkFEX1NLSVApcmV0dXJuIHMuSURMRTtpZihuPT1mLkJVRkZFUilyZXR1cm4gcy5CVUZGRVJJTkdfRFVSSU5HX1BMQVlCQUNLO2lmKG49PWYuUEFVU0UpcmV0dXJuIHMuUEFVU0VEO2lmKG49PWYuU0VFS19TVEFSVClyZXR1cm4gcy5TRUVLSU5HX0RVUklOR19QTEFZQkFDS31lbHNlIGlmKG89PXMuUEFVU0VEKXtpZihuPT1mLkVORHx8bj09Zi5BRF9TS0lQKXJldHVybiBzLklETEU7aWYobj09Zi5CVUZGRVIpcmV0dXJuIHMuQlVGRkVSSU5HX0RVUklOR19QQVVTRTtpZihuPT1mLlBMQVkpcmV0dXJuIHMuUExBWUlORztpZihuPT1mLlNFRUtfU1RBUlQpcmV0dXJuIHMuU0VFS0lOR19EVVJJTkdfUEFVU0V9ZWxzZSBpZihvPT1zLkJVRkZFUklOR19CRUZPUkVfUExBWUJBQ0spe2lmKG49PWYuRU5EfHxuPT1mLkFEX1NLSVApcmV0dXJuIHMuSURMRTtpZihuPT1mLlBBVVNFfHxuPT1mLkJVRkZFUl9TVE9QKXJldHVybiBzLlBMQVlCQUNLX05PVF9TVEFSVEVEO2lmKG49PWYuUExBWSlyZXR1cm4gcy5QTEFZSU5HO2lmKG49PWYuU0VFS19TVEFSVClyZXR1cm4gcy5TRUVLSU5HX0JFRk9SRV9QTEFZQkFDS31lbHNlIGlmKG89PXMuQlVGRkVSSU5HX0RVUklOR19QTEFZQkFDSyl7aWYobj09Zi5FTkR8fG49PWYuQURfU0tJUClyZXR1cm4gcy5JRExFO2lmKG49PWYuUExBWXx8bj09Zi5CVUZGRVJfU1RPUClyZXR1cm4gcy5QTEFZSU5HO2lmKG49PWYuUEFVU0VfT05fQlVGRkVSSU5HKXJldHVybiBzLlBBVVNFRF9EVVJJTkdfQlVGRkVSSU5HO2lmKG49PWYuU0VFS19TVEFSVClyZXR1cm4gcy5TRUVLSU5HX0RVUklOR19CVUZGRVJJTkc7aWYobj09Zi5QQVVTRSlyZXR1cm4gcy5QQVVTRUR9ZWxzZSBpZihvPT1zLkJVRkZFUklOR19EVVJJTkdfU0VFS0lORyl7aWYobj09Zi5FTkR8fG49PWYuQURfU0tJUClyZXR1cm4gcy5JRExFO2lmKG49PWYuUExBWSlyZXR1cm4gcy5QTEFZSU5HO2lmKG49PWYuQlVGRkVSX1NUT1ApcmV0dXJuIHMuU0VFS0lOR19EVVJJTkdfUExBWUJBQ0s7aWYobj09Zi5QQVVTRSlyZXR1cm4gcy5QQVVTRUR9ZWxzZSBpZihvPT1zLkJVRkZFUklOR19EVVJJTkdfUEFVU0Upe2lmKG49PWYuRU5EfHxuPT1mLkFEX1NLSVApcmV0dXJuIHMuSURMRTtpZihuPT1mLlBMQVkpcmV0dXJuIHMuUExBWUlORztpZihuPT1mLlNFRUtfU1RBUlQpcmV0dXJuIHMuU0VFS0lOR19EVVJJTkdfUEFVU0U7aWYobj09Zi5CVUZGRVJfU1RPUHx8bj09Zi5QQVVTRSlyZXR1cm4gcy5QQVVTRUR9ZWxzZSBpZihvPT1zLlNFRUtJTkdfQkVGT1JFX1BMQVlCQUNLKXtpZihuPT1mLkVORHx8bj09Zi5BRF9TS0lQKXJldHVybiBzLklETEU7aWYobj09Zi5QQVVTRSlyZXR1cm4gcy5QTEFZQkFDS19OT1RfU1RBUlRFRDtpZihuPT1mLlBMQVkpcmV0dXJuIHMuUExBWUlORztpZihuPT1mLkJVRkZFUilyZXR1cm4gcy5CVUZGRVJJTkdfQkVGT1JFX1BMQVlCQUNLfWVsc2UgaWYobz09cy5TRUVLSU5HX0RVUklOR19QTEFZQkFDSyl7aWYobj09Zi5FTkR8fG49PWYuQURfU0tJUClyZXR1cm4gcy5JRExFO2lmKG49PWYuUExBWSlyZXR1cm4gcy5QTEFZSU5HO2lmKG49PWYuUEFVU0UpcmV0dXJuIHMuUEFVU0VEO2lmKG49PWYuQlVGRkVSKXJldHVybiBzLkJVRkZFUklOR19EVVJJTkdfU0VFS0lOR31lbHNlIGlmKG89PXMuU0VFS0lOR19EVVJJTkdfQlVGRkVSSU5HKXtpZihuPT1mLkVORHx8bj09Zi5BRF9TS0lQKXJldHVybiBzLklETEU7aWYobj09Zi5QTEFZKXJldHVybiBzLlBMQVlJTkc7aWYobj09Zi5QQVVTRXx8bj09Zi5CVUZGRVJfU1RPUClyZXR1cm4gcy5QQVVTRUQ7aWYobj09Zi5CVUZGRVIpcmV0dXJuIHMuQlVGRkVSSU5HX0RVUklOR19TRUVLSU5HfWVsc2UgaWYobz09cy5TRUVLSU5HX0RVUklOR19QQVVTRSl7aWYobj09Zi5FTkR8fG49PWYuQURfU0tJUClyZXR1cm4gcy5JRExFO2lmKG49PWYuUExBWSlyZXR1cm4gcy5QTEFZSU5HO2lmKG49PWYuUEFVU0V8fG49PWYuQlVGRkVSX1NUT1ApcmV0dXJuIHMuUEFVU0VEO2lmKG49PWYuQlVGRkVSKXJldHVybiBzLkJVRkZFUklOR19EVVJJTkdfUEFVU0V9ZWxzZSBpZihvPT1zLlBBVVNFRF9EVVJJTkdfQlVGRkVSSU5HKXtpZihuPT1mLkVORHx8bj09Zi5BRF9TS0lQKXJldHVybiBzLklETEU7aWYobj09Zi5TRUVLX1NUQVJUKXJldHVybiBzLlNFRUtJTkdfRFVSSU5HX0JVRkZFUklORztpZihuPT1mLlBBVVNFKXJldHVybiBzLlBBVVNFRDtpZihuPT1mLlBMQVl8fG49PWYuQlVGRkVSX1NUT1ApcmV0dXJuIHMuUExBWUlOR31yZXR1cm4gbnVsbH0sUnU6ZnVuY3Rpb24oKXtyZXR1cm4gb30sVnU6ZnVuY3Rpb24obix0KXt2YXIgZT11Lkh1KG4pO28hPWUmJihyPW8sbz1lLGk9dCl9LEVhOmZ1bmN0aW9uKCl7cmV0dXJuIHJ9LF9zOmZ1bmN0aW9uKCl7cmV0dXJuIGl9fSksbz1zLklETEUscj1udWxsLGk9TmFOfX0sezI0OjI0LDU4OjU4fV0sNjc6W2Z1bmN0aW9uKG4sdCxlKXt2YXIgcj1uKDI0KSxvPW4oNjgpLHU9big1Nikscz1uKDU4KS5MdSxjPW4oNTgpLk51LGw9big2MyksaT1uKDU1KSxwPXtub3RpZnlQbGF5OnMuUExBWSxub3RpZnlQYXVzZTpzLlBBVVNFLG5vdGlmeUVuZDpzLkVORCxub3RpZnlCdWZmZXJTdGFydDpzLkJVRkZFUixub3RpZnlCdWZmZXJTdG9wOnMuQlVGRkVSX1NUT1Asbm90aWZ5TG9hZDpzLkxPQUQsbm90aWZ5RW5nYWdlOnMuRU5HQUdFLG5vdGlmeVNlZWtTdGFydDpzLlNFRUtfU1RBUlQsbm90aWZ5U2tpcEFkOnMuQURfU0tJUCxub3RpZnlDYWxsVG9BY3Rpb246cy5DVEEsbm90aWZ5RXJyb3I6cy5FUlJPUixub3RpZnlUcmFuc2ZlclBsYXliYWNrOnMuVFJBTlNGRVIsbm90aWZ5RHJtRmFpbDpzLkRSTV9GQUlMRUQsbm90aWZ5RHJtQXBwcm92ZTpzLkRSTV9BUFBST1ZFRCxub3RpZnlEcm1EZW55OnMuRFJNX0RFTklFRCxub3RpZnlDdXN0b21FdmVudDpzLkNVU1RPTX0sdj17bm90aWZ5Q2hhbmdlQml0cmF0ZTpbcy5CSVRfUkFURSxcIm5zX3N0X2JyXCJdLG5vdGlmeUNoYW5nZVBsYXliYWNrUmF0ZTpbcy5QTEFZQkFDS19SQVRFLFwibnNfc3RfcnRcIl0sbm90aWZ5Q2hhbmdlVm9sdW1lOltzLlZPTFVNRSxcIm5zX3N0X3ZvXCJdLG5vdGlmeUNoYW5nZVdpbmRvd1N0YXRlOltzLldJTkRPV19TVEFURSxcIm5zX3N0X3dzXCJdLG5vdGlmeUNoYW5nZUF1ZGlvVHJhY2s6W3MuQVVESU8sXCJuc19zdF9hdFwiXSxub3RpZnlDaGFuZ2VWaWRlb1RyYWNrOltzLlZJREVPLFwibnNfc3RfdnRcIl0sbm90aWZ5Q2hhbmdlU3VidGl0bGVUcmFjazpbcy5TVUJTLFwibnNfc3RfdHRcIl0sbm90aWZ5Q2hhbmdlQ2RuOltzLkNETixcIm5zX3N0X2NkblwiXX07ZnVuY3Rpb24gYShuKXt2YXIgYSxlPXRoaXM7ZnVuY3Rpb24gZihuLHQsZSl7aWYocy50b1N0cmluZyhuKSl7ZT1vLlBhKGUpO3ZhciBpPW8uV3UoZSk7ZS5uc19zdF9wb3x8aXNOYU4odCl8fChlLm5zX3N0X3BvPXBhcnNlSW50KHQpK1wiXCIpLG49PXMuUExBWXx8bj09cy5QQVVTRXx8bj09cy5CVUZGRVJ8fG49PXMuRU5EfHxuPT1zLlNFRUtfU1RBUlR8fG49PXMuQURfU0tJUHx8bj09cy5CVUZGRVJfU1RPUD9hLlZ1KG4saSxlKTphLm1zKG4saSxlKX19Zm9yKHZhciB0IGluIHIuZXh0ZW5kKGUse2lzUHJvcGVybHlJbml0aWFsaXplZDpmdW5jdGlvbigpe3JldHVybiBhLmlzUHJvcGVybHlJbml0aWFsaXplZCgpfSxyZXNldDpmdW5jdGlvbihuKXtmKHMuRU5EKTt2YXIgdD1hO3QuQ3MoKS5TKCkuc3RvcCgpLHQuQ3MoKS5OcygpLnBhdXNlKCksYT1uZXcgdSh0LmdldENvbmZpZ3VyYXRpb24oKSksbC5rcyhhLkNzKCksdC5DcygpLmdldFBsYXliYWNrU2Vzc2lvbigpLG4pfSxzZXRQYXVzZU9uQnVmZmVyaW5nSW50ZXJ2YWw6ZnVuY3Rpb24obil7YS5zZXRQYXVzZU9uQnVmZmVyaW5nSW50ZXJ2YWwobil9LGdldFBhdXNlT25CdWZmZXJpbmdJbnRlcnZhbDpmdW5jdGlvbigpe3JldHVybiBhLmdldFBhdXNlT25CdWZmZXJpbmdJbnRlcnZhbCgpfSxzZXRLZWVwQWxpdmVJbnRlcnZhbDpmdW5jdGlvbihuKXthLkNzKCkuUygpLnNldEludGVydmFsKG4pfSxnZXRLZWVwQWxpdmVJbnRlcnZhbDpmdW5jdGlvbigpe3JldHVybiBhLkNzKCkuUygpLkd1KCl9LHNldEhlYXJ0YmVhdEludGVydmFsczpmdW5jdGlvbihuKXthLkNzKCkuTnMoKS5ScyhuKX0sZ2V0TGFiZWxzOmZ1bmN0aW9uKCl7cmV0dXJuIGEuZ2V0TGFiZWxzKCl9LGdldFN0YXRlOmZ1bmN0aW9uKCl7cmV0dXJuIGEuQ3MoKS5NdSgpLlJ1KCl9LHNldExhYmVsczpmdW5jdGlvbihuKXthLnNldExhYmVscyhuKX0sZ2V0TGFiZWw6ZnVuY3Rpb24obil7cmV0dXJuIGEuZ2V0TGFiZWwobil9LHNldExhYmVsOmZ1bmN0aW9uKG4sdCl7YS5zZXRMYWJlbChuLHQpfSxnZXRMb2FkVGltZU9mZnNldDpmdW5jdGlvbigpe3JldHVybiBhLmdldExvYWRUaW1lT2Zmc2V0KCl9LHNldExvYWRUaW1lT2Zmc2V0OmZ1bmN0aW9uKG4pe2Euc2V0TG9hZFRpbWVPZmZzZXQobil9LHNldExpdmVFbmRwb2ludFVSTDpmdW5jdGlvbihuKXtyZXR1cm4gYS5zZXRMaXZlRW5kcG9pbnRVUkwobil9LGdldExpdmVFbmRwb2ludFVSTDpmdW5jdGlvbigpe3JldHVybiBhLmdldExpdmVFbmRwb2ludFVSTCgpfSxpc1BhdXNlT25CdWZmZXJpbmdFbmFibGVkOmZ1bmN0aW9uKCl7cmV0dXJuIGEuaXNQYXVzZU9uQnVmZmVyaW5nRW5hYmxlZCgpfSxzZXRQYXVzZU9uQnVmZmVyaW5nRW5hYmxlZDpmdW5jdGlvbihuKXthLnNldFBhdXNlT25CdWZmZXJpbmdFbmFibGVkKG4pfSxpc1Rocm90dGxpbmdFbmFibGVkOmZ1bmN0aW9uKCl7cmV0dXJuIGEuaXNUaHJvdHRsaW5nRW5hYmxlZCgpfSxzZXRUaHJvdHRsaW5nRW5hYmxlZDpmdW5jdGlvbihuKXthLnNldFRocm90dGxpbmdFbmFibGVkKG4pfSxzZXRUaHJvdHRsaW5nRGVsYXk6ZnVuY3Rpb24obil7YS5zZXRUaHJvdHRsaW5nRGVsYXkobil9LGdldFRocm90dGxpbmdEZWxheTpmdW5jdGlvbigpe3JldHVybiBhLmdldFRocm90dGxpbmdEZWxheSgpfSxzZXRQbGF5YmFja0ludGVydmFsTWVyZ2VUb2xlcmFuY2U6ZnVuY3Rpb24obil7YS5DcygpLmdldFBsYXliYWNrU2Vzc2lvbigpLmdldEFzc2V0KCkuc2V0UGxheWJhY2tJbnRlcnZhbE1lcmdlVG9sZXJhbmNlKG4pfSxnZXRQbGF5YmFja0ludGVydmFsTWVyZ2VUb2xlcmFuY2U6ZnVuY3Rpb24oKXtyZXR1cm4gYS5DcygpLmdldFBsYXliYWNrU2Vzc2lvbigpLmdldEFzc2V0KCkuZ2V0UGxheWJhY2tJbnRlcnZhbE1lcmdlVG9sZXJhbmNlKCl9LGNyZWF0ZVBsYXliYWNrU2Vzc2lvbjpmdW5jdGlvbihuKXthLkNzKCkuVXUoKS5adChcImNyZWF0ZVBsYXliYWNrU2Vzc2lvblwiLG4pLG49by5QYShuKTt2YXIgdD1hLkNzKCkuTXUoKS5SdSgpO3QhPWMuSURMRSYmKGEuQ3MoKS5VdSgpLiR0KFwiRW5kaW5nIHRoZSBjdXJyZW50IENsaXAuIEl0IHdhcyBpbiBzdGF0ZTpcIixvLmdzKHQpKSxlLm5vdGlmeUVuZCgpKSxhLkNzKCkuZ2V0UGxheWJhY2tTZXNzaW9uKCkud2EoKSYmYS5rcygpLGEuQ3MoKS5nZXRQbGF5YmFja1Nlc3Npb24oKS5zZXRMYWJlbHMobil9LGdldFZlcnNpb246ZnVuY3Rpb24oKXtyZXR1cm4gYS5nZXRWZXJzaW9uKCl9LGFkZExpc3RlbmVyOmZ1bmN0aW9uKG4pe2EuYWRkTGlzdGVuZXIobil9LHJlbW92ZUxpc3RlbmVyOmZ1bmN0aW9uKG4pe2EucmVtb3ZlTGlzdGVuZXIobil9LGFkZE1lYXN1cmVtZW50TGlzdGVuZXI6ZnVuY3Rpb24obil7YS5DcygpLmp1KCkuYWRkTWVhc3VyZW1lbnRMaXN0ZW5lcihuKX0scmVtb3ZlTWVhc3VyZW1lbnRMaXN0ZW5lcjpmdW5jdGlvbihuKXthLkNzKCkuanUoKS5yZW1vdmVNZWFzdXJlbWVudExpc3RlbmVyKG4pfSxnZXRQbGF5YmFja1Nlc3Npb246ZnVuY3Rpb24oKXtyZXR1cm4gYS5DcygpLmdldFBsYXliYWNrU2Vzc2lvbigpfSxzZXRFeGl0RW5kRXZlbnRFbmFibGVkOmZ1bmN0aW9uKG4pe2Euc2V0RXhpdEVuZEV2ZW50RW5hYmxlZCghIW4pfSxpc0V4aXRFbmRFdmVudEVuYWJsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gYS5pc0V4aXRFbmRFdmVudEVuYWJsZWQoKX0sc2V0RHZyV2luZG93TGVuZ3RoOmZ1bmN0aW9uKG4pe2EuQ3MoKS5nZXRQbGF5YmFja1Nlc3Npb24oKS5nZXRBc3NldCgpLlN1KG4pLGEuQ3MoKS5nZXRQbGF5YmFja1Nlc3Npb24oKS5nZXRBc3NldCgpLkV1KCEwKX0sc2V0RHZyV2luZG93T2Zmc2V0OmZ1bmN0aW9uKG4pe2EuQ3MoKS5nZXRQbGF5YmFja1Nlc3Npb24oKS5nZXRBc3NldCgpLkF1KG4pLGEuQ3MoKS5nZXRQbGF5YmFja1Nlc3Npb24oKS5nZXRBc3NldCgpLkV1KCEwKX0sZ2V0UGxhdGZvcm1BUEk6ZnVuY3Rpb24oKXtyZXR1cm4gYS5nZXRQbGF0Zm9ybUFQSSgpfSxfZ2V0TG9nSGlzdG9yeTpmdW5jdGlvbigpe3JldHVybiBhLkNzKCkuVXUoKS50ZSgpfX0pLHApIWZ1bmN0aW9uKHIsbyl7ZVtyXT1mdW5jdGlvbihuLHQpe2EuQ3MoKS5VdSgpLlp0KHIsbix0KTt2YXIgZT17fSxpPU5hTjtcIm9iamVjdFwiPT10eXBlb2Ygbj9lPW46XCJvYmplY3RcIj09dHlwZW9mIHQmJihlPXQpLFwibnVtYmVyXCI9PXR5cGVvZiBuP2k9bjpcIm51bWJlclwiPT10eXBlb2YgdCYmKGk9dCksZihvLGksZSl9fSh0LHBbdF0pO2Zvcih2YXIgaSBpbiB2KSFmdW5jdGlvbihvLHUscyl7ZVtvXT1mdW5jdGlvbihuLHQsZSl7aWYoYS5DcygpLlV1KCkuWnQobyxuLHQsZSksbnVsbCE9bil7dmFyIGk9e30scj1OYU47XCJvYmplY3RcIj09dHlwZW9mIHQ/aT10Olwib2JqZWN0XCI9PXR5cGVvZiBlJiYoaT1lKSxcIm51bWJlclwiPT10eXBlb2YgdD9yPXQ6XCJudW1iZXJcIj09dHlwZW9mIGUmJihyPWUpLGlbc109bitcIlwiLGYodSxyLGkpfX19KGksdltpXVswXSx2W2ldWzFdKTtuPXIuZXh0ZW5kKHt9LG4pLChhPW5ldyB1KG4pKS5DcygpLlV1KCkubG9nKFwiTmV3IFN0cmVhbWluZ0FuYWx5dGljcyBpbnN0YW5jZSB3aXRoIGNvbmZpZ3VyYXRpb25cIixuKX1hLlBsYXllckV2ZW50cz1zLGEuSW50ZXJuYWxTdGF0ZXM9YyxhLkNvbnN0YW50cz1pLHQuZXhwb3J0cz1hfSx7MjQ6MjQsNTU6NTUsNTY6NTYsNTg6NTgsNjM6NjMsNjg6Njh9XSw2ODpbZnVuY3Rpb24obix0LGUpe3ZhciBmPW4oMjMpLGk9big1OCkuTnUscj1cInVuZGVmaW5lZFwiO2UuUGE9ZnVuY3Rpb24obil7dmFyIHQ9e307Zm9yKHZhciBlIGluIG4pe3ZhciBpPW5bZV07dFtlXT1udWxsPT1pP2k6bltlXStcIlwifXJldHVybiB0fSxlLlRhPWZ1bmN0aW9uKG4sdCl7dmFyIGUsaT1bXTtmb3IoZSBpbiBuKXQmJiF0LnRlc3QoZSl8fCFuLmhhc093blByb3BlcnR5KGUpfHwoaVtpLmxlbmd0aF09ZSk7cmV0dXJuIGl9LGUuV3U9ZnVuY3Rpb24obil7aWYobi5uc190cylyZXR1cm4gcGFyc2VJbnQobi5uc190cyk7dmFyIHQ9K25ldyBEYXRlO3JldHVybiBuLm5zX3RzPXQrXCJcIix0fSxlLmZlPWZ1bmN0aW9uKCl7cmV0dXJuIHR5cGVvZiB3aW5kb3chPXImJnR5cGVvZiBkb2N1bWVudCE9cn0sZS5Xcj1mdW5jdGlvbihuLHQsZSxpKXt2YXIgcixvLHU9e307aWYoISh0PD1lKSlyZXR1cm4gZihuKTtpZih1LnN0YXJ0PXQsdS5lbmQ9ZSwwPT1uLmxlbmd0aClyZXR1cm4gbi5wdXNoKHUpLGYobik7Zm9yKHI9MDtyPG4ubGVuZ3RoO3IrKylpZih1LnN0YXJ0Pj1uW3JdLnN0YXJ0JiZ1LmVuZDw9bltyXS5lbmQpcmV0dXJuIGYobik7dmFyIHM9ITE7Zm9yKG89MDtvPG4ubGVuZ3RoO28rKylpZihvKzE9PT1uLmxlbmd0aCYmdS5zdGFydD49bltvXS5zdGFydHx8dS5zdGFydD49bltvXS5zdGFydCYmdS5zdGFydDxuW28rMV0uc3RhcnQpe24uc3BsaWNlKG8rMSwwLHUpLHM9ITA7YnJlYWt9c3x8bi5zcGxpY2UoMCwwLHUpO3ZhciBhPVtuWzBdXTtmb3Iocj0xO3I8bi5sZW5ndGg7cisrKWFbYS5sZW5ndGgtMV0uZW5kK2k8bltyXS5zdGFydD9hLnB1c2gobltyXSk6YVthLmxlbmd0aC0xXS5lbmQ8bltyXS5lbmQmJihhW2EubGVuZ3RoLTFdLmVuZD1uW3JdLmVuZCk7cmV0dXJuIGYoYSl9LGUuZ3M9ZnVuY3Rpb24obil7Zm9yKHZhciB0IGluIGkpaWYoaS5oYXNPd25Qcm9wZXJ0eSh0KSYmaVt0XT09bilyZXR1cm4gdH0sZS5KdT1mdW5jdGlvbihuKXtyZXR1cm4gbj09aS5JRExFfHxuPT1pLkJVRkZFUklOR19CRUZPUkVfUExBWUJBQ0t8fG49PWkuU0VFS0lOR19CRUZPUkVfUExBWUJBQ0t8fG49PWkuUExBWUJBQ0tfTk9UX1NUQVJURUR9fSx7MjM6MjMsNTg6NTh9XSw2OTpbZnVuY3Rpb24obix0LGUpe3ZhciBpPW4oMjQpLHI9bigyNikscz1uKDU4KS5MdTt0LmV4cG9ydHM9ZnVuY3Rpb24odSl7aS5leHRlbmQodGhpcyx7bnM6ZnVuY3Rpb24obix0KXt2YXIgZT11LmdldFBsYXliYWNrU2Vzc2lvbigpLGk9ZS5nZXRBc3NldCgpO2Uuc28obiksaS5zbyhuKSxpLkVvKCkmJmkuTm8oKSYmaS5VbyhuLWkuV28oKSksaS5IbygpLGkuUm8oITEpLHQuaGFzT3duUHJvcGVydHkoXCJuc19zdF9wZVwiKSYmci52cih0Lm5zX3N0X3BlLCExKSYmdS5HcygpLmtzKCl9LG9zOmZ1bmN0aW9uKG4sdCl7dmFyIGU9dS5nZXRQbGF5YmFja1Nlc3Npb24oKSxpPWUuZ2V0QXNzZXQoKTtlLnNvKG4pLGkuc28obiksaS5FbygpJiZpLk5vKCkmJihpLlZvKG4pLGkuVG8oITEpKX0sWnU6ZnVuY3Rpb24obix0KXt2YXIgZT11LmdldFBsYXliYWNrU2Vzc2lvbigpLGk9ZS5nZXRBc3NldCgpLHI9cGFyc2VJbnQodC5uc19zdF9wbyk7ZS5zbyhuKSxpLnNvKG4pLGkuRW8oKT9pLk5vKCl8fChpLk9vKG4pLGkuVG8oITApKTppLmlvKCksaS5FbygpfHwoaS5rbyghMCksaS5UbyghMCksaS5GbyhyKSxpLk9vKG4pKX0sdHM6ZnVuY3Rpb24obix0KXt2YXIgZT11LmdldFBsYXliYWNrU2Vzc2lvbigpLGk9ZS5nZXRBc3NldCgpO2Uuc28obiksaS5zbyhuKSxpLkVvKCkmJmkuTm8oKSYmKGkuVm8obiksaS5UbyghMSkpfSwkdTpmdW5jdGlvbihuLHQpe3ZhciBlPXUuZ2V0UGxheWJhY2tTZXNzaW9uKCksaT1lLmdldEFzc2V0KCkscj1wYXJzZUludCh0Lm5zX3N0X3BvKTtlLnNvKG4pLGkuc28obiksaS5FbygpJiYoaS5ObygpJiYoaS5WbyhuKSxpLlRvKCExKSksaS5LbyhyKSxpLmtvKCExKSksaS5SbyghMCksKGkuX3UoKXx8MD09ZS5iYSgpKSYmKGUuSWEoKSxpLmd1KCExKSksZS5kdSgpLGkuUm8oITApLGkuWW8oKSxpLnJvKCksZS5ibyhuKSxpLmJvKG4pLGkuZG8obiksaS5hbyhyKSwoMD09aS5jdSgpfHxpLkxyKCk8PWkuY3UoKSkmJihpLnV1KGkuTHIoKSksaS56bygpLGkudnUoMCksaS5ldSgpKSxpLmR1KCksdS5HcygpLmJzKCl8fCh0Lm5zX3N0X2x0PXUuR3MoKS5nZXRMb2FkVGltZU9mZnNldCgpK24tdS5HcygpLlNzKCkrXCJcIix1LkdzKCkuSXMoITApKSx1Lk5zKCkucmVzdW1lKCksdS5TKCkuc3RhcnQoKTt2YXIgbz11LkdzKCkuRHIocy5QTEFZLHQsbik7aS5qcihvLlV0KSxpLktyKG8uVXQpLHUuanUoKS5WdShvKX19KX19LHsyNDoyNCwyNjoyNiw1ODo1OH1dLDcwOltmdW5jdGlvbihuLHQsZSl7dmFyIGk9bigyNCksbz1uKDI2KSxzPW4oNTgpLkx1O3QuZXhwb3J0cz1mdW5jdGlvbih1KXtpLmV4dGVuZCh0aGlzLHtmczpmdW5jdGlvbihuLHQpe3ZhciBlPXUuZ2V0UGxheWJhY2tTZXNzaW9uKCksaT1lLmdldEFzc2V0KCk7dS5HcygpLlRzKCksdS5TKCkuc3RvcCgpLGUuc28obiksaS5zbyhuKSxpLnBvKG4pO3ZhciByPXUuR3MoKS5EcihzLkVORCx0LG4pO2kuanIoci5VdCksaS5LcihyLlV0KSx1Lmp1KCkuVnUociksaS5FbygpJiZpLk5vKCkmJihpLlVvKG4taS5XbygpKSxpLlRvKCExKSksZS5acygpLGkuSG8oKSxpLlJvKCExKSx0Lmhhc093blByb3BlcnR5KFwibnNfc3RfcGVcIikmJm8udnIodC5uc19zdF9wZSwhMSkmJnUuR3MoKS5rcygpfSx0czpmdW5jdGlvbihuLHQpe3ZhciBlPXUuZ2V0UGxheWJhY2tTZXNzaW9uKCksaT1lLmdldEFzc2V0KCk7ZS5zbyhuKSxpLnNvKG4pLGkucG8obiksaS5kbyhuKX0sJHU6ZnVuY3Rpb24obix0KXt2YXIgZT11LmdldFBsYXliYWNrU2Vzc2lvbigpLGk9ZS5nZXRBc3NldCgpLHI9cGFyc2VJbnQodC5uc19zdF9wbyk7ZS5kdSgpLGkuZHUoKSxpLnJvKCksZS5zbyhuKSxpLnNvKG4pLGkuRW8oKSYmKGkuTm8oKSYmKGkuVm8obiksaS5UbyghMSkpLGkuS28ociksaS5rbyghMSkpLGkucG8obiksaS5kbyhuKSxlLmJvKG4pLGkuYm8obiksaS5hbyhyKSx1Lk5zKCkucmVzdW1lKCksdS5TKCkuc3RhcnQoKTt2YXIgbz11LkdzKCkuRHIocy5QTEFZLHQsbik7aS5qcihvLlV0KSxpLktyKG8uVXQpLHUuanUoKS5WdShvKX19KX19LHsyNDoyNCwyNjoyNiw1ODo1OH1dLDcxOltmdW5jdGlvbihuLHQsZSl7dmFyIGk9bigyNCksbz1uKDI2KSxzPW4oNTgpLkx1O3QuZXhwb3J0cz1mdW5jdGlvbih1KXtpLmV4dGVuZCh0aGlzLHt1czpmdW5jdGlvbihuLHQpe3ZhciBlPXUuZ2V0UGxheWJhY2tTZXNzaW9uKCksaT1lLmdldEFzc2V0KCk7dS5HcygpLkFzKCksaS5wbyhuKSxpLmRvKG4pLGUuc28obiksaS5zbyhuKSxlLmVvKCksaS5lbygpO3ZhciByPXUuR3MoKS5EcihzLlBBVVNFLHQsbik7aS5qcihyLlV0KSxpLktyKHIuVXQpLHUuanUoKS5WdShyKSxlLlBvKG4pLGkuUG8obil9LG5zOmZ1bmN0aW9uKG4sdCl7dmFyIGU9dS5nZXRQbGF5YmFja1Nlc3Npb24oKSxpPWUuZ2V0QXNzZXQoKTt1LkdzKCkuQXMoKSx1LkdzKCkuVHMoKSx1LlMoKS5zdG9wKCksZS5zbyhuKSxpLnNvKG4pLGkucG8obik7dmFyIHI9dS5HcygpLkRyKHMuRU5ELHQsbik7aS5qcihyLlV0KSxpLktyKHIuVXQpLHUuanUoKS5WdShyKSxpLkhvKCksaS5SbyghMSksdC5oYXNPd25Qcm9wZXJ0eShcIm5zX3N0X3BlXCIpJiZvLnZyKHQubnNfc3RfcGUsITEpJiZ1LkdzKCkua3MoKX0sWnU6ZnVuY3Rpb24obix0KXt2YXIgZT11LmdldFBsYXliYWNrU2Vzc2lvbigpLGk9ZS5nZXRBc3NldCgpLHI9cGFyc2VJbnQodC5uc19zdF9wbyk7dS5HcygpLkFzKCksdS5OcygpLnBhdXNlKCksdS5TKCkuc3RvcCgpLGkucG8obiksaS5kbyhuKSxlLnNvKG4pLGkuc28obiksaS5pbygpLGkua28oITApLGkuVG8oITApLGkuRm8ociksaS5PbyhuKSxlLmVvKCksaS5lbygpO3ZhciBvPXUuR3MoKS5EcihzLlBBVVNFLHQsbik7aS5qcihvLlV0KSxpLktyKG8uVXQpLHUuanUoKS5WdShvKX0sdHM6ZnVuY3Rpb24obix0KXt2YXIgZT11LmdldFBsYXliYWNrU2Vzc2lvbigpLGk9ZS5nZXRBc3NldCgpO3UuR3MoKS5BcygpLGkucG8obiksaS5kbyhuKSxlLnNvKG4pLGkuc28obiksZS5lbygpLGkuZW8oKTt2YXIgcj11LkdzKCkuRHIocy5QQVVTRSx0LG4pO2kuanIoci5VdCksaS5LcihyLlV0KSx1Lmp1KCkuVnUocil9fSl9fSx7MjQ6MjQsMjY6MjYsNTg6NTh9XSw3MjpbZnVuY3Rpb24obix0LGUpe3ZhciBpPW4oMjQpLG89bigyNikscz1uKDU4KS5MdTt0LmV4cG9ydHM9ZnVuY3Rpb24odSl7aS5leHRlbmQodGhpcyx7bnM6ZnVuY3Rpb24obix0KXt2YXIgZT11LmdldFBsYXliYWNrU2Vzc2lvbigpLGk9ZS5nZXRBc3NldCgpO3UuR3MoKS5UcygpLHUuUygpLnN0b3AoKSx1LkdzKCkuQXMoKSxlLnNvKG4pLGkuc28obiksaS5wbyhuKTt2YXIgcj11LkdzKCkuRHIocy5FTkQsdCxuKTtpLmpyKHIuVXQpLGkuS3Ioci5VdCksdS5qdSgpLlZ1KHIpLGkuRW8oKSYmaS5ObygpJiYoaS5VbyhuLWkuV28oKSksaS5UbyghMSkpLGUuWnMoKSxpLkhvKCksaS5SbyghMSksdC5oYXNPd25Qcm9wZXJ0eShcIm5zX3N0X3BlXCIpJiZvLnZyKHQubnNfc3RfcGUsITEpJiZ1LkdzKCkua3MoKX0sdHM6ZnVuY3Rpb24obix0KXt2YXIgZT11LmdldFBsYXliYWNrU2Vzc2lvbigpLGk9ZS5nZXRBc3NldCgpO2Uuc28obiksaS5zbyhuKSxlLmVvKCksaS5lbygpLGkuRW8oKSYmaS5ObygpJiYoaS5WbyhuKSxpLlRvKCExKSksaS5wbyhuKSxpLmRvKG4pfSwkdTpmdW5jdGlvbihuLHQpe3ZhciBlPXUuZ2V0UGxheWJhY2tTZXNzaW9uKCksaT1lLmdldEFzc2V0KCkscj1wYXJzZUludCh0Lm5zX3N0X3BvKTtlLmR1KCksaS5kdSgpLGkucm8oKSxlLnNvKG4pLGkuc28obiksaS5FbygpJiYoaS5ObygpJiYoaS5WbyhuKSxpLlRvKCExKSksaS5LbyhyKSxpLmtvKCExKSksaS5wbyhuKSxpLmRvKG4pLGUuYm8obiksaS5ibyhuKSxpLmFvKHIpLHUuTnMoKS5yZXN1bWUoKSx1LlMoKS5zdGFydCgpO3ZhciBvPXUuR3MoKS5EcihzLlBMQVksdCxuKTtpLmpyKG8uVXQpLGkuS3Ioby5VdCksdS5qdSgpLlZ1KG8pfX0pfX0sezI0OjI0LDI2OjI2LDU4OjU4fV0sNzM6W2Z1bmN0aW9uKG4sdCxlKXt2YXIgaT1uKDI0KSxzPW4oNTgpLkx1O3QuZXhwb3J0cz1mdW5jdGlvbih1KXtpLmV4dGVuZCh0aGlzLHtYdTpmdW5jdGlvbihuLHQpe3ZhciBlPXUuZ2V0UGxheWJhY2tTZXNzaW9uKCksaT1lLmdldEFzc2V0KCk7ZS55YSghMCksaS5MbyghMCksaS5FbygpJiZpLnhvKGkuQm8oKSksZS5QbyhuKSxpLlBvKG4pfSxadTpmdW5jdGlvbihuLHQpe3ZhciBlPXUuZ2V0UGxheWJhY2tTZXNzaW9uKCksaT1lLmdldEFzc2V0KCkscj1wYXJzZUludCh0Lm5zX3N0X3BvKTtlLnlhKCEwKSxpLkxvKCEwKSxpLkVvKCkmJmkueG8oaS5CbygpKSxpLmlvKCksaS5rbyghMCksaS5UbyghMCksaS5GbyhyKSxpLk9vKG4pfSwkdTpmdW5jdGlvbihuLHQpe3ZhciBlPXUuZ2V0UGxheWJhY2tTZXNzaW9uKCksaT1lLmdldEFzc2V0KCkscj1wYXJzZUludCh0Lm5zX3N0X3BvKTtlLnlhKCEwKSxpLkxvKCEwKSwoaS5fdSgpfHwwPT1lLmJhKCkpJiYoZS5JYSgpLGkuZ3UoITEpKSxpLkVvKCkmJihpLnhvKGkuQm8oKSksaS5LbyhyKSxpLmtvKCExKSksZS5kdSgpLGkuUm8oITApLGkuWW8oKSwoMD09aS5jdSgpfHxpLkxyKCk8PWkuY3UoKSkmJihpLnV1KGkuTHIoKSksaS56bygpLGkudnUoMCksaS5ldSgpKSxpLmR1KCksaS5ybygpLGUuYm8obiksaS5ibyhuKSxpLmRvKG4pLGkuYW8ociksdS5HcygpLmJzKCl8fCh0Lm5zX3N0X2x0PXUuR3MoKS5nZXRMb2FkVGltZU9mZnNldCgpK24tdS5HcygpLlNzKCkrXCJcIix1LkdzKCkuSXMoITApKSx1Lk5zKCkucmVzdW1lKCksdS5TKCkuc3RhcnQoKTt2YXIgbz11LkdzKCkuRHIocy5QTEFZLHQsbik7aS5qcihvLlV0KSxpLktyKG8uVXQpLHUuanUoKS5WdShvKX19KX19LHsyNDoyNCw1ODo1OH1dLDc0OltmdW5jdGlvbihuLHQsZSl7dmFyIGk9bigyNCksbz1uKDI2KSxzPW4oNTgpLkx1O3QuZXhwb3J0cz1mdW5jdGlvbih1KXtpLmV4dGVuZCh0aGlzLHtuczpmdW5jdGlvbihuLHQpe3ZhciBlPXUuZ2V0UGxheWJhY2tTZXNzaW9uKCksaT1lLmdldEFzc2V0KCk7dS5HcygpLlRzKCksdS5TKCkuc3RvcCgpLGkucG8obik7dmFyIHI9dS5HcygpLkRyKHMuRU5ELHQsbik7aS5qcihyLlV0KSxpLktyKHIuVXQpLHUuanUoKS5WdShyKSxpLkVvKCkmJmkuTm8oKSYmKGkuVW8obi1pLldvKCkpLGkua28oITEpKSxlLlpzKCksaS5IbygpLGkuUm8oITEpLHQuaGFzT3duUHJvcGVydHkoXCJuc19zdF9wZVwiKSYmby52cih0Lm5zX3N0X3BlLCExKSYmdS5HcygpLmtzKCl9LCR1OmZ1bmN0aW9uKG4sdCl7dmFyIGU9dS5nZXRQbGF5YmFja1Nlc3Npb24oKSxpPWUuZ2V0QXNzZXQoKSxyPXBhcnNlSW50KHQubnNfc3RfcG8pO2UuZHUoKSxpLkVvKCkmJihpLk5vKCkmJihpLlZvKG4pLGkuVG8oITEpKSxpLktvKHIpLGkua28oITEpKSxpLnJvKCksaS5kdSgpLGUuYm8obiksaS5ibyhuKSxpLnBvKG4pLGkuZG8obiksaS5hbyhyKSx1Lk5zKCkucmVzdW1lKCksdS5TKCkuc3RhcnQoKTt2YXIgbz11LkdzKCkuRHIocy5QTEFZLHQsbik7aS5qcihvLlV0KSxpLktyKG8uVXQpLHUuanUoKS5WdShvKX19KX19LHsyNDoyNCwyNjoyNiw1ODo1OH1dLDc1OltmdW5jdGlvbihuLHQsZSl7dmFyIGk9bigyNCksbz1uKDI2KSxzPW4oNTgpLkx1O3QuZXhwb3J0cz1mdW5jdGlvbih1KXtpLmV4dGVuZCh0aGlzLHtuczpmdW5jdGlvbihuLHQpe3ZhciBlPXUuZ2V0UGxheWJhY2tTZXNzaW9uKCksaT1lLmdldEFzc2V0KCk7dS5HcygpLlRzKCksdS5TKCkuc3RvcCgpLGUuc28obiksaS5zbyhuKSxpLnBvKG4pLGkuRW8oKSYmaS5ObygpJiYoaS5VbyhuLWkuV28oKSksaS5UbyghMSkpO3ZhciByPXUuR3MoKS5EcihzLkVORCx0LG4pO2kuanIoci5VdCksaS5LcihyLlV0KSx1Lmp1KCkuVnUociksaS5IbygpLGkuUm8oITEpLHQuaGFzT3duUHJvcGVydHkoXCJuc19zdF9wZVwiKSYmby52cih0Lm5zX3N0X3BlLCExKSYmdS5HcygpLmtzKCl9LFp1OmZ1bmN0aW9uKG4sdCl7dmFyIGU9dS5nZXRQbGF5YmFja1Nlc3Npb24oKSxpPWUuZ2V0QXNzZXQoKSxyPXBhcnNlSW50KHQubnNfc3RfcG8pO2Uuc28obiksaS5zbyhuKSxpLkVvKCk/aS5ObygpfHwoaS5PbyhuKSxpLlRvKCEwKSk6aS5pbygpLGkuRW8oKXx8KGkua28oITApLGkuVG8oITApLGkuRm8ociksaS5PbyhuKSksaS5wbyhuKSxpLmRvKG4pfSx0czpmdW5jdGlvbihuLHQpe3ZhciBlPXUuZ2V0UGxheWJhY2tTZXNzaW9uKCksaT1lLmdldEFzc2V0KCk7ZS5zbyhuKSxpLnNvKG4pLGkucG8obiksaS5kbyhuKX0sZHM6ZnVuY3Rpb24obix0KXt2YXIgZT11LmdldFBsYXliYWNrU2Vzc2lvbigpLGk9ZS5nZXRBc3NldCgpLHI9cGFyc2VJbnQodC5uc19zdF9wbyk7ZS5kdSgpLGkuZHUoKSxlLnNvKG4pLGkuc28obiksaS5ybygpLGUuYm8obiksaS5ibyhuKSxpLnBvKG4pLGkuZG8obiksaS5hbyhyKSx1Lk5zKCkucmVzdW1lKCksdS5TKCkuc3RhcnQoKTt2YXIgbz11LkdzKCkuRHIocy5QTEFZLHQsbik7aS5qcihvLlV0KSxpLktyKG8uVXQpLHUuanUoKS5WdShvKX19KX19LHsyNDoyNCwyNjoyNiw1ODo1OH1dLDc2OltmdW5jdGlvbihuLHQsZSl7dmFyIGk9bigyNCkscj1uKDI2KSxzPW4oNTgpLkx1O3QuZXhwb3J0cz1mdW5jdGlvbih1KXtpLmV4dGVuZCh0aGlzLHtuczpmdW5jdGlvbihuLHQpe3ZhciBlPXUuZ2V0UGxheWJhY2tTZXNzaW9uKCksaT1lLmdldEFzc2V0KCk7aS5FbygpJiZpLk5vKCkmJihpLlVvKG4taS5XbygpKSxpLlRvKCExKSksZS5acygpLGkuSG8oKSxpLlJvKCExKSx0Lmhhc093blByb3BlcnR5KFwibnNfc3RfcGVcIikmJnIudnIodC5uc19zdF9wZSwhMSkmJnUuR3MoKS5rcygpfSxadTpmdW5jdGlvbihuLHQpe3ZhciBlPXUuZ2V0UGxheWJhY2tTZXNzaW9uKCkuZ2V0QXNzZXQoKSxpPXBhcnNlSW50KHQubnNfc3RfcG8pO2UuRW8oKT9lLk9vKG4pOmUuaW8oKSxlLkVvKCl8fChlLmtvKCEwKSxlLlRvKCEwKSxlLkZvKGkpLGUuT28obikpfSwkdTpmdW5jdGlvbihuLHQpe3ZhciBlPXUuZ2V0UGxheWJhY2tTZXNzaW9uKCksaT1lLmdldEFzc2V0KCkscj1wYXJzZUludCh0Lm5zX3N0X3BvKTtpLkVvKCkmJihpLktvKHIpLGkua28oITEpKSxlLnlhKCEwKSwoaS5fdSgpfHwwPT1lLmJhKCkpJiYoZS5JYSgpLGkuZ3UoITEpKSxlLmR1KCksaS5SbyghMCksaS5ZbygpLCgwPT1pLmN1KCl8fGkuTHIoKTw9aS5jdSgpKSYmKGkudXUoaS5McigpKSxpLnpvKCksaS52dSgwKSxpLmV1KCkpLGkuZHUoKSxpLnJvKCksZS5ibyhuKSxpLmJvKG4pLGkuZG8obiksaS5hbyhyKSx1LkdzKCkuYnMoKXx8KHQubnNfc3RfbHQ9dS5HcygpLmdldExvYWRUaW1lT2Zmc2V0KCkrbi11LkdzKCkuU3MoKStcIlwiLHUuR3MoKS5JcyghMCkpLHUuTnMoKS5yZXN1bWUoKSx1LlMoKS5zdGFydCgpO3ZhciBvPXUuR3MoKS5EcihzLlBMQVksdCxuKTtpLmpyKG8uVXQpLGkuS3Ioby5VdCksdS5qdSgpLlZ1KG8pfSxYdTpmdW5jdGlvbihuLHQpe3ZhciBlPXUuZ2V0UGxheWJhY2tTZXNzaW9uKCksaT1lLmdldEFzc2V0KCk7ZS5QbyhuKSxpLlBvKG4pfX0pfX0sezI0OjI0LDI2OjI2LDU4OjU4fV0sNzc6W2Z1bmN0aW9uKG4sdCxlKXt2YXIgaT1uKDI0KSxzPW4oMjYpLGE9big1OCkuTHU7dC5leHBvcnRzPWZ1bmN0aW9uKHUpe2kuZXh0ZW5kKHRoaXMse25zOmZ1bmN0aW9uKG4sdCl7dmFyIGU9dS5nZXRQbGF5YmFja1Nlc3Npb24oKSxpPWUuZ2V0QXNzZXQoKSxyPXBhcnNlSW50KHQubnNfc3RfcG8pO3UuR3MoKS5UcygpLHUuUygpLnN0b3AoKSxlLmhvKG4pLGkuaG8obiksaS5JdShyKSxpLnBvKG4pLGkuY28ocik7dmFyIG89dS5HcygpLkRyKGEuRU5ELHQsbik7aS5qcihvLlV0KSxpLktyKG8uVXQpLHUuanUoKS5WdShvKSxpLkhvKCksaS5SbyghMSksdC5oYXNPd25Qcm9wZXJ0eShcIm5zX3N0X3BlXCIpJiZzLnZyKHQubnNfc3RfcGUsITEpJiZ1LkdzKCkua3MoKX0sWHU6ZnVuY3Rpb24obix0KXt2YXIgZT11LmdldFBsYXliYWNrU2Vzc2lvbigpLGk9ZS5nZXRBc3NldCgpLHI9cGFyc2VJbnQodC5uc19zdF9wbyk7dS5OcygpLnBhdXNlKCksdS5TKCkuc3RvcCgpLGUuaG8obiksaS5obyhuKSxpLkl1KHIpLGkuY28ociksdS5HcygpLmlzUGF1c2VPbkJ1ZmZlcmluZ0VuYWJsZWQoKSYmdS5HcygpLlBzKG4sdCksaS5sdSgpLGUuUG8obiksaS5QbyhuKSxpLnBvKG4pLGkuZG8obil9LFp1OmZ1bmN0aW9uKG4sdCl7dmFyIGU9dS5nZXRQbGF5YmFja1Nlc3Npb24oKSxpPWUuZ2V0QXNzZXQoKSxyPXBhcnNlSW50KHQubnNfc3RfcG8pO3UuTnMoKS5wYXVzZSgpLHUuUygpLnN0b3AoKSxlLmhvKG4pLGkuaG8obiksaS5JdShyKSxpLmNvKHIpLGkuaW8oKSxpLmtvKCEwKSxpLlRvKCEwKSxpLkZvKHIpLGkuT28obiksaS5wbyhuKSxpLmRvKG4pLGUuZW8oKSxpLmVvKCk7dmFyIG89dS5HcygpLkRyKGEuUEFVU0UsdCxuKTtpLmpyKG8uVXQpLGkuS3Ioby5VdCksdS5qdSgpLlZ1KG8pfSx0czpmdW5jdGlvbihuLHQpe3ZhciBlPXUuZ2V0UGxheWJhY2tTZXNzaW9uKCksaT1lLmdldEFzc2V0KCkscj1wYXJzZUludCh0Lm5zX3N0X3BvKTt1Lk5zKCkucGF1c2UoKSx1LlMoKS5zdG9wKCksZS5obyhuKSxpLmhvKG4pLGkuSXUociksaS5jbyhyKSxpLnBvKG4pLGkuZG8obiksZS5lbygpLGkuZW8oKTt2YXIgbz11LkdzKCkuRHIoYS5QQVVTRSx0LG4pO2kuanIoby5VdCksaS5LcihvLlV0KSx1Lmp1KCkuVnUobyl9fSl9fSx7MjQ6MjQsMjY6MjYsNTg6NTh9XSw3ODpbZnVuY3Rpb24obix0LGUpe3ZhciBpPW4oMjQpLHI9bigyNikscz1uKDU4KS5MdTt0LmV4cG9ydHM9ZnVuY3Rpb24odSl7aS5leHRlbmQodGhpcyx7bnM6ZnVuY3Rpb24obix0KXt2YXIgZT11LmdldFBsYXliYWNrU2Vzc2lvbigpLGk9ZS5nZXRBc3NldCgpO2kuRW8oKSYmaS5ObygpJiYoaS5VbyhuLWkuV28oKSksaS5UbyghMSkpLGUuWnMoKSxpLkhvKCksaS5SbyghMSksdC5oYXNPd25Qcm9wZXJ0eShcIm5zX3N0X3BlXCIpJiZyLnZyKHQubnNfc3RfcGUsITEpJiZ1LkdzKCkua3MoKX0sdHM6ZnVuY3Rpb24obix0KXt2YXIgZT11LmdldFBsYXliYWNrU2Vzc2lvbigpLmdldEFzc2V0KCk7ZS5FbygpJiZlLk5vKCkmJihlLlZvKG4pLGUuVG8oITEpKX0sJHU6ZnVuY3Rpb24obix0KXt2YXIgZT11LmdldFBsYXliYWNrU2Vzc2lvbigpLGk9ZS5nZXRBc3NldCgpLHI9cGFyc2VJbnQodC5uc19zdF9wbyk7aS5FbygpJiYoaS5ObygpJiYoaS5WbyhuKSxpLlRvKCExKSksaS5LbyhyKSxpLmtvKCExKSksKGkuX3UoKXx8MD09ZS5iYSgpKSYmKGUuSWEoKSxpLmd1KCExKSksZS5kdSgpLGkuZHUoKSxpLnJvKCksaS5SbyghMCksaS5ZbygpLCgwPT1pLmN1KCl8fGkuTHIoKTw9aS5jdSgpKSYmKGkudXUoaS5McigpKSxpLnpvKCksaS52dSgwKSxpLmV1KCkpLGUuYm8obiksaS5ibyhuKSxpLmRvKG4pLGkuYW8ociksdS5HcygpLmJzKCl8fCh0Lm5zX3N0X2x0PXUuR3MoKS5nZXRMb2FkVGltZU9mZnNldCgpK24tdS5HcygpLlNzKCkrXCJcIix1LkdzKCkuSXMoITApKSx1Lk5zKCkucmVzdW1lKCksdS5TKCkuc3RhcnQoKTt2YXIgbz11LkdzKCkuRHIocy5QTEFZLHQsbik7aS5qcihvLlV0KSxpLktyKG8uVXQpLHUuanUoKS5WdShvKX19KX19LHsyNDoyNCwyNjoyNiw1ODo1OH1dLDc5OltmdW5jdGlvbihuLHQsZSl7dmFyIGk9bigyNCk7dC5leHBvcnRzPWZ1bmN0aW9uKHIpe2kuZXh0ZW5kKHRoaXMse3RzOmZ1bmN0aW9uKG4sdCl7dmFyIGU9ci5nZXRQbGF5YmFja1Nlc3Npb24oKSxpPWUuZ2V0QXNzZXQoKTtlLmVvKCksaS5lbygpLGkuRW8oKSYmaS5ObygpJiYoaS5WbyhuKSxpLlRvKCExKSksaS5wbyhuKSxpLmRvKG4pfX0pfX0sezI0OjI0fV0sODA6W2Z1bmN0aW9uKG4sdCxlKXt2YXIgaT1uKDI0KSxvPW4oMjYpLHM9big1OCkuTHU7dC5leHBvcnRzPWZ1bmN0aW9uKHUpe2kuZXh0ZW5kKHRoaXMse25zOmZ1bmN0aW9uKG4sdCl7dmFyIGU9dS5nZXRQbGF5YmFja1Nlc3Npb24oKSxpPWUuZ2V0QXNzZXQoKTt1LkdzKCkuVHMoKSx1LlMoKS5zdG9wKCksaS5wbyhuKTt2YXIgcj11LkdzKCkuRHIocy5FTkQsdCxuKTtpLmpyKHIuVXQpLGkuS3Ioci5VdCksdS5qdSgpLlZ1KHIpLGkuRW8oKSYmaS5ObygpJiYoaS5VbyhuLWkuV28oKSksaS5UbyghMSkpLGUuWnMoKSxpLkhvKCksaS5SbyghMSksdC5oYXNPd25Qcm9wZXJ0eShcIm5zX3N0X3BlXCIpJiZvLnZyKHQubnNfc3RfcGUsITEpJiZ1LkdzKCkua3MoKX0sJHU6ZnVuY3Rpb24obix0KXt2YXIgZT11LmdldFBsYXliYWNrU2Vzc2lvbigpLGk9ZS5nZXRBc3NldCgpLHI9cGFyc2VJbnQodC5uc19zdF9wbyk7ZS5kdSgpLGkuZHUoKSxpLnJvKCksaS5FbygpJiYoaS5ObygpJiYoaS5WbyhuKSxpLlRvKCExKSksaS5LbyhyKSxpLmtvKCExKSksaS5wbyhuKSxpLmRvKG4pLGUuYm8obiksaS5ibyhuKSxpLmFvKHIpLHUuR3MoKS5icygpfHwodC5uc19zdF9sdD11LkdzKCkuZ2V0TG9hZFRpbWVPZmZzZXQoKStuLXUuR3MoKS5TcygpK1wiXCIsdS5HcygpLklzKCEwKSksdS5OcygpLnJlc3VtZSgpLHUuUygpLnN0YXJ0KCk7dmFyIG89dS5HcygpLkRyKHMuUExBWSx0LG4pO2kuanIoby5VdCksaS5LcihvLlV0KSx1Lmp1KCkuVnUobyl9fSl9fSx7MjQ6MjQsMjY6MjYsNTg6NTh9XSw4MTpbZnVuY3Rpb24obix0LGUpe3ZhciBpPW4oMjQpLG89bigyNikscz1uKDU4KS5MdTt0LmV4cG9ydHM9ZnVuY3Rpb24odSl7aS5leHRlbmQodGhpcyx7cnM6ZnVuY3Rpb24obix0KXt2YXIgZT11LmdldFBsYXliYWNrU2Vzc2lvbigpLmdldEFzc2V0KCksaT1wYXJzZUludCh0Lm5zX3N0X3BvKTtlLkVvKCk/ZS5ObygpfHwoZS5PbyhuKSxlLlRvKCEwKSk6ZS5pbygpLGUuRW8oKXx8KGUua28oITApLGUuVG8oITApLGUuRm8oaSksZS5PbyhuKSksZS5wbyhuKSxlLmRvKG4pfSxlczpmdW5jdGlvbihuLHQpe3ZhciBlPXUuZ2V0UGxheWJhY2tTZXNzaW9uKCksaT1lLmdldEFzc2V0KCk7ZS5QbyhuKSxpLlBvKG4pLGkucG8obiksaS5kbyhuKX0sbHM6ZnVuY3Rpb24obix0KXt2YXIgZT11LmdldFBsYXliYWNrU2Vzc2lvbigpLGk9ZS5nZXRBc3NldCgpLHI9cGFyc2VJbnQodC5uc19zdF9wbyk7ZS5kdSgpLGkuZHUoKSxpLkVvKCkmJihpLk5vKCkmJihpLlZvKG4pLGkuVG8oITEpKSxpLktvKHIpLGkua28oITEpKSxpLnJvKCksZS5ibyhuKSxpLmJvKG4pLGkucG8obiksaS5kbyhuKSxpLmFvKHIpLHUuTnMoKS5yZXN1bWUoKSx1LlMoKS5zdGFydCgpO3ZhciBvPXUuR3MoKS5EcihzLlBMQVksdCxuKTtpLmpyKG8uVXQpLGkuS3Ioby5VdCksdS5qdSgpLlZ1KG8pfSxhczpmdW5jdGlvbihuLHQpe3ZhciBlPXUuZ2V0UGxheWJhY2tTZXNzaW9uKCksaT1lLmdldEFzc2V0KCk7ZS5zbyhuKSxpLnNvKG4pLGkucG8obiksaS5kbyhuKX0sY3M6ZnVuY3Rpb24obix0KXt2YXIgZT11LmdldFBsYXliYWNrU2Vzc2lvbigpLmdldEFzc2V0KCk7ZS5FbygpJiZlLk5vKCkmJihlLlZvKG4pLGUuVG8oITEpKSxlLnBvKG4pLGUuZG8obil9LHBzOmZ1bmN0aW9uKG4sdCl7dmFyIGU9dS5nZXRQbGF5YmFja1Nlc3Npb24oKSxpPWUuZ2V0QXNzZXQoKTt1LkdzKCkuVHMoKSx1LlMoKS5zdG9wKCksaS5wbyhuKTt2YXIgcj11LkdzKCkuRHIocy5FTkQsdCxuKTtpLmpyKHIuVXQpLGkuS3Ioci5VdCksdS5qdSgpLlZ1KHIpLGkuRW8oKSYmaS5ObygpJiYoaS5VbyhuLWkuV28oKSksaS5UbyghMSkpLGUuWnMoKSxpLkhvKCksaS5SbyghMSksdC5oYXNPd25Qcm9wZXJ0eShcIm5zX3N0X3BlXCIpJiZvLnZyKHQubnNfc3RfcGUsITEpJiZ1LkdzKCkua3MoKX0sdnM6ZnVuY3Rpb24obix0KXt2YXIgZT11LmdldFBsYXliYWNrU2Vzc2lvbigpLmdldEFzc2V0KCk7ZS5FbygpJiZlLk5vKCkmJihlLlZvKG4pLGUuVG8oITEpKSxlLnBvKG4pLGUuZG8obil9LHNzOmZ1bmN0aW9uKG4sdCl7dmFyIGU9dS5nZXRQbGF5YmFja1Nlc3Npb24oKSxpPWUuZ2V0QXNzZXQoKSxyPXBhcnNlSW50KHQubnNfc3RfcG8pO3UuR3MoKS5BcygpLGUuc28obiksaS5zbyhuKSxlLmJvKG4pLGkuYm8obiksaS5hbyhyKSxpLnBvKG4pLGkuZG8obiksdS5OcygpLnJlc3VtZSgpLHUuUygpLnN0YXJ0KCl9fSl9fSx7MjQ6MjQsMjY6MjYsNTg6NTh9XSw4MjpbZnVuY3Rpb24obix0LGUpe3ZhciB1LHMsaSxyPW51bGwsYT1bXSxvPTFlMyxmPTFlMztmdW5jdGlvbiBjKCl7dmFyIG89K25ldyBEYXRlO3I9aS5zZXRJbnRlcnZhbChmdW5jdGlvbigpe3ZhciBuPW8rdSx0PStuZXcgRGF0ZSxlPXQtbjtpZihvPXQsTWF0aC5hYnMoZSk+cylmb3IodmFyIGk9MDxlLHI9MDtyPGEubGVuZ3RoOysrcilhW3JdKGkpfSx1KX1mdW5jdGlvbiBsKCl7Y2xlYXJJbnRlcnZhbChyKSxyPW51bGx9dC5leHBvcnRzPXtPdTpmdW5jdGlvbihuKXthLnB1c2gobikscnx8YygpfSxZdTpmdW5jdGlvbihuKXtmb3IodmFyIHQ9MDt0PGEubGVuZ3RoOysrdClpZihhW3RdPT1uKXthLnNwbGljZSh0LDEpO2JyZWFrfWEubGVuZ3RofHxsKCl9LHNldFBsYXRmb3JtQVBJOmZ1bmN0aW9uKG4pe2k9bn0sVXM6ZnVuY3Rpb24obix0KXshdCYmdXx8KHU9bnx8byksKHImJnR8fCFyKSYmKGwoKSxjKCkpfSxCczpmdW5jdGlvbihuLHQpe3M9bnx8Zn19fSx7fV19LHt9LFsxNl0pKDE2KX0pO1xuIiwiLyoqIFNUQVJUIEJCQyBBRERJVElPTiAqKi9cbmRlZmluZSggZnVuY3Rpb24oKXtcbi8qKiBFTkQgQkJDIEFERElUSU9OICoqL1xuXG5mdW5jdGlvbiBTcHJpbmdTdHJlYW1zKGYpIHtcbiAgICB0aGlzLnZlcnNpb24gPSBcIjIuMC4wXCI7XG4gICAgdmFyIHAgPSBcIjJjbnQubmV0XCI7XG4gICAgdmFyIGUgPSAyMDA7XG4gICAgdmFyIG0gPSAyMDAwO1xuICAgIHZhciBQID0gXCJkZWZhdWx0XCI7XG4gICAgdmFyIEcgPSBuZXcgQXJyYXkoKTtcbiAgICB0aGlzLm5hbWVzcGFjZSA9IFwiY29tLmttYS5zcHJpbmdzdHJlYW1zXCI7XG4gICAgdGhpcy5zeW5jcmF0ZSA9IDIwO1xuICAgIHRoaXMucGF1c2VzeW5jID0gNjtcbiAgICB0aGlzLm1heHN0YXRlcyA9IDUwO1xuICAgIHZhciBhID0gdGhpcztcbiAgICB0aGlzLnBhZ2VDb250ZXh0O1xuICAgIHZhciBOO1xuICAgIEEobigpKTtcbiAgICBpZiAoZikge1xuICAgICAgICBQID0gZlxuICAgIH1cbiAgICB4KCk7XG5cbiAgICBmdW5jdGlvbiBuKCkge1xuICAgICAgICB2YXIgUSA9IHtcbiAgICAgICAgICAgIFwiMmNudC5uZXRcIjoge1xuICAgICAgICAgICAgICAgIHN5bmNyYXRlczogWzMsIDcsIDEwLCAxMCwgMTAsIDEwLCAxMCwgNjBdXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBRXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gQShSKSB7XG4gICAgICAgIHZhciBTO1xuICAgICAgICBpZiAoUikge1xuICAgICAgICAgICAgZm9yICh2YXIgUSBpbiBSKSB7XG4gICAgICAgICAgICAgICAgaWYgKFEgPT0gcCkge1xuICAgICAgICAgICAgICAgICAgICBTID0gUltRXVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChTKSB7XG4gICAgICAgICAgICAgICAgQyhTLnN5bmNyYXRlcylcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIEMoUSkge1xuICAgICAgICBpZiAoUSkge1xuICAgICAgICAgICAgTiA9IFFcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIEgoKSB7XG4gICAgICAgIHJldHVybiBOXG4gICAgfVxuICAgIHRoaXMuZ2V0U3luY1JhdGVzID0gSDtcblxuICAgIGZ1bmN0aW9uIHQoVCwgUiwgUSkge1xuICAgICAgICBpZiAoYS5wYWdlQ29udGV4dCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBhLnBhZ2VDb250ZXh0ID0gYS5kZWZhdWx0UGFnZUNvbnRleHRcbiAgICAgICAgfVxuICAgICAgICBpZiAoIVQpIHtcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICAgIHZhciBTID0gbmV3IHcodGhpcywgVCwgUiwgUSk7XG4gICAgICAgIEcucHVzaChTKTtcbiAgICAgICAgcmV0dXJuIFNcbiAgICB9XG4gICAgdGhpcy50cmFjayA9IHQ7XG5cbiAgICBmdW5jdGlvbiB4KCkge1xuICAgICAgICBzZXRJbnRlcnZhbChrLCBlKTtcbiAgICAgICAgc2V0SW50ZXJ2YWwociwgbSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBiKCkge1xuICAgICAgICBmb3IgKHZhciBRID0gMDsgUSA8IEcubGVuZ3RoOyArK1EpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgR1tRXS5zdG9wKClcbiAgICAgICAgICAgIH0gY2F0Y2ggKFIpIHtcbiAgICAgICAgICAgICAgICBEKFIpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgdGhpcy51bmxvYWQgPSBiO1xuXG4gICAgZnVuY3Rpb24gayhTKSB7XG4gICAgICAgIGZvciAodmFyIFEgPSAwOyBRIDwgRy5sZW5ndGg7ICsrUSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBHW1FdLnVwZGF0ZShTKVxuICAgICAgICAgICAgfSBjYXRjaCAoUikge1xuICAgICAgICAgICAgICAgIEQoUilcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmRvVXBkYXRlID0gaztcblxuICAgIGZ1bmN0aW9uIHIoUykge1xuICAgICAgICBmb3IgKHZhciBRID0gMDsgUSA8IEcubGVuZ3RoOyArK1EpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgR1tRXS5zeW5jKFMpXG4gICAgICAgICAgICB9IGNhdGNoIChSKSB7XG4gICAgICAgICAgICAgICAgRChSKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHRoaXMuZG9TeW5jID0gcjtcblxuICAgIGZ1bmN0aW9uIEQoUSkge1xuICAgICAgICBFKFwiXCIsIFEpXG4gICAgfVxuICAgIHRoaXMuZXJyb3IgPSBEO1xuXG4gICAgZnVuY3Rpb24gdShSLCBRKSB7XG4gICAgICAgIHJldHVybiB2KFtcbiAgICAgICAgICAgIFtSLCBRXVxuICAgICAgICBdKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIEYoUSkge1xuICAgICAgICBpZiAoUSAmJiBRLnNpdGUgIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gUS5zaXRlXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFBcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB5KFEpIHt9XG4gICAgdGhpcy5kZWJ1ZyA9IHk7XG5cbiAgICBmdW5jdGlvbiBsKCkge1xuICAgICAgICBpZiAoYS5wYWdlQ29udGV4dC5nZXRXaW5kb3dMb2NhdGlvblVSTCgpID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBcImh0dHA6Ly9cIlxuICAgICAgICB9XG4gICAgICAgIGlmIChcImh0dHBzXCIgPT0gYS5wYWdlQ29udGV4dC5nZXRXaW5kb3dMb2NhdGlvblVSTCgpLnNsaWNlKDAsIDUpKSB7XG4gICAgICAgICAgICByZXR1cm4gXCJodHRwczovL3NzbC1cIlxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFwiaHR0cDovL1wiXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBKKCkge1xuICAgICAgICBpZiAoIXRoaXMubmxzbykge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB2YXIgUSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgUSA9IGEucGFnZUNvbnRleHQuZ2V0TG9jYWxTdG9yYWdlSXRlbShcImkwMFwiKTtcbiAgICAgICAgICAgICAgICBpZiAoUSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCImYz1cIiArIFFcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgUiA9IFwiMDAwMFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgVCA9IFIgKyBNYXRoLmNlaWwoKG5ldyBEYXRlKCkpLmdldFRpbWUoKSAvIDEwMDApLnRvU3RyaW5nKDE2KSArICgzMjc2OCB8IE1hdGgucmFuZG9tKCkgKiA2NTUzNSkudG9TdHJpbmcoMTYpICsgUjtcbiAgICAgICAgICAgICAgICAgICAgYS5wYWdlQ29udGV4dC5zZXRMb2NhbFN0b3JhZ2VJdGVtKFwiaTAwXCIsIFQpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaCAoUykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZXJyb3JcIiArIFMpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFwiXCJcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBFKFMsIFIpIHtcbiAgICAgICAgdmFyIFEgPSBsKCkgKyBGKFIpICsgXCIuXCIgKyBwICsgXCIvajA9XCIgKyB1KFMsIFIpICsgXCI/bHQ9XCIgKyAobmV3IERhdGUoKSkuZ2V0VGltZSgpLnRvU3RyaW5nKDM2KSArIEooKTtcbiAgICAgICAgYS5wYWdlQ29udGV4dC5wcmVsb2FkSW1hZ2UoUSk7XG4gICAgICAgIHRoaXMuZGVidWcoUSlcbiAgICB9XG4gICAgdGhpcy5zZW5kID0gRTtcblxuICAgIGZ1bmN0aW9uIHYoVSkge1xuICAgICAgICB2YXIgUztcbiAgICAgICAgdmFyIFY7XG4gICAgICAgIHZhciBUO1xuICAgICAgICB2YXIgUjtcbiAgICAgICAgdmFyIFcgPSAvWysmLDs9fl0vZztcbiAgICAgICAgdmFyIFg7XG4gICAgICAgIHZhciBRO1xuICAgICAgICBzd2l0Y2ggKHR5cGVvZiBVKSB7XG4gICAgICAgICAgICBjYXNlIFwic3RyaW5nXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFcudGVzdChVKSA/IGVzY2FwZShVKS5yZXBsYWNlKFcsIGZ1bmN0aW9uKFkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIFogPSBRW1ldO1xuICAgICAgICAgICAgICAgICAgICBpZiAoWikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFpcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWVxuICAgICAgICAgICAgICAgIH0pIDogZXNjYXBlKFUpO1xuICAgICAgICAgICAgY2FzZSBcIm51bWJlclwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBpc0Zpbml0ZShVKSA/IFUudG9TdHJpbmcoKSA6IFwibnVsbFwiO1xuICAgICAgICAgICAgY2FzZSBcImJvb2xlYW5cIjpcbiAgICAgICAgICAgIGNhc2UgXCJudWxsXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFUudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIGNhc2UgXCJvYmplY3RcIjpcbiAgICAgICAgICAgICAgICBpZiAoIVUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwibnVsbFwiXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFMgPSBbXTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIFUubGVuZ3RoID09IFwibnVtYmVyXCIgJiYgIShVLnByb3BlcnR5SXNFbnVtZXJhYmxlKFwibGVuZ3RoXCIpKSkge1xuICAgICAgICAgICAgICAgICAgICBSID0gVS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoViA9IDA7IFYgPCBSOyBWICs9IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFMucHVzaCh2KFVbVl0pIHx8IFwibnVsbFwiKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIixcIiArIFMuam9pbihcIitcIikgKyBcIjtcIlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmb3IgKFQgaW4gVSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIFQgPT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFQgIT0gXCJzaXRlXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBYID0gdihVW1RdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoWCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTLnB1c2godihUKSArIFwiPVwiICsgWClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiLFwiICsgUy5qb2luKFwiK1wiKSArIFwiO1wiXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFwiXCJcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB3KGFtLCBhaiwgYW4sIGFpKSB7XG4gICAgICAgIHZhciBhZyA9IE1hdGgucm91bmQoKE1hdGgucmFuZG9tKCkgKiAxMDAwMDAwMDAwMCkpLnRvU3RyaW5nKDM2KTtcbiAgICAgICAgdmFyIFYgPSBNYXRoLnJvdW5kKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC8gMTAwMCk7XG4gICAgICAgIHZhciBhYztcbiAgICAgICAgdmFyIGFvO1xuICAgICAgICB2YXIgYWU7XG4gICAgICAgIHZhciBhYTtcbiAgICAgICAgdmFyIFcgPSBbMCwgMCwgVi50b1N0cmluZygzNildO1xuICAgICAgICB2YXIgWCA9IDA7XG4gICAgICAgIHZhciBhcCA9IDA7XG4gICAgICAgIHZhciBZID0gdHJ1ZTtcbiAgICAgICAgdmFyIFMgPSBmYWxzZTtcbiAgICAgICAgdmFyIGFmO1xuICAgICAgICB2YXIgVTtcbiAgICAgICAgdmFyIFI7XG4gICAgICAgIHZhciBRO1xuICAgICAgICBhYyA9IGFtO1xuICAgICAgICBhbyA9IGFqO1xuICAgICAgICBpZiAoYWkpIHtcbiAgICAgICAgICAgIGFmID0gYWlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGFmID0gYWMuSFRNTDVBZGFwdGVyXG4gICAgICAgIH1cbiAgICAgICAgYWEgPSBhaChhbik7XG4gICAgICAgIGFlID0gbmV3IEFycmF5KCk7XG4gICAgICAgIGFlLnB1c2goVyk7XG4gICAgICAgIFEgPSAwO1xuICAgICAgICBVID0gYW0uc3luY3JhdGU7XG4gICAgICAgIFIgPSBhbS5nZXRTeW5jUmF0ZXMoKTtcbiAgICAgICAgYWQoKTtcblxuICAgICAgICBmdW5jdGlvbiBhaChhdCkge1xuICAgICAgICAgICAgdmFyIGFxID0gbmV3IE9iamVjdCgpO1xuICAgICAgICAgICAgZm9yICh2YXIgYXIgaW4gYXQpIHtcbiAgICAgICAgICAgICAgICBhcVthcl0gPSBhdFthcl1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBhcVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gYWwoYXEpIHtcbiAgICAgICAgICAgIGlmIChhZS5sZW5ndGggPCBhYy5tYXhzdGF0ZXMpIHtcbiAgICAgICAgICAgICAgICBhZS5wdXNoKGFxKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gVChhcSkge1xuICAgICAgICAgICAgVyA9IFthcSwgYXEsIE1hdGgucm91bmQobmV3IERhdGUoKS5nZXRUaW1lKCkgLyAxMDAwKS50b1N0cmluZygzNildO1xuICAgICAgICAgICAgYWwoVyk7XG4gICAgICAgICAgICBZID0gdHJ1ZTtcbiAgICAgICAgICAgIFggPSAwXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBhZCgpIHtcbiAgICAgICAgICAgIGlmIChSICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBpZiAoUSA8IFIubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIFUgPSBSW1ErK107XG4gICAgICAgICAgICAgICAgICAgIGFjLmRlYnVnKFwic3dpdGNoIHN5bmNyYXRlIHRvIFwiICsgVSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBaKGF1KSB7XG4gICAgICAgICAgICBpZiAoUykge1xuICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGFxID0gV1sxXTtcbiAgICAgICAgICAgIHZhciBhciA9IGFxO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhciA9IE1hdGgucm91bmQoYWYuZ2V0UG9zaXRpb24oYW8pKVxuICAgICAgICAgICAgfSBjYXRjaCAoYXYpIHt9XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmIChhcSA9PSBhcikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoWCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBYKys7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoWCA9PSBhYy5wYXVzZXN5bmMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBZID0gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoWCA+PSBhYy5wYXVzZXN5bmMpIHtcbiAgICAgICAgICAgICAgICAgICAgVChhcilcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoYXEgPCBhciAtIDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFQoYXIpXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXEgPiBhcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFQoYXIpXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFdbMV0gPSBhcjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoV1sxXSAtIFdbMF0gPj0gVSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXIgLSBhcCA+PSBVKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBZID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBYID0gMFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaCAoYXQpIHtcbiAgICAgICAgICAgICAgICBEID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBhYy5lcnJvcihhdClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnVwZGF0ZSA9IFo7XG5cbiAgICAgICAgZnVuY3Rpb24gYWsoKSB7XG4gICAgICAgICAgICBpZiAoUykge1xuICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgWSA9IHRydWU7XG4gICAgICAgICAgICBTID0gdHJ1ZTtcbiAgICAgICAgICAgIGFiKG51bGwpXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdG9wID0gYWs7XG5cbiAgICAgICAgZnVuY3Rpb24gYWIoYXQpIHtcbiAgICAgICAgICAgIGlmIChZKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFvLndpZHRoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhYS5zeCA9IGFvLndpZHRoXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGFvLnZpZGVvV2lkdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFhLnN4ID0gYW8udmlkZW9XaWR0aFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChhby5oZWlnaHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFhLnN5ID0gYW8uaGVpZ2h0XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGFvLnZpZGVvSGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhYS5zeSA9IGFvLnZpZGVvSGVpZ2h0XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGNhdGNoIChhcikge31cbiAgICAgICAgICAgICAgICBpZiAoYS5wYWdlQ29udGV4dC5nZXREZXZpY2VJRCAhPT0gdW5kZWZpbmVkICYmIGEucGFnZUNvbnRleHQuZ2V0RGV2aWNlSUQoKSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGFhW2EucGFnZUNvbnRleHQuZ2V0RGV2aWNlSUQoKVtcImlkX25hbWVcIl1dID0gYS5wYWdlQ29udGV4dC5nZXREZXZpY2VJRCgpW1wiaWRfdmFsdWVcIl1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYWEudWlkID0gYWc7XG4gICAgICAgICAgICAgICAgYWEucHN0ID0gYWU7XG4gICAgICAgICAgICAgICAgdmFyIGFxO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghYWEuZHVyIHx8IGFhLmR1ciA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhYS5kdXIgPSBhZi5nZXREdXJhdGlvbihhbylcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGFyKSB7fVxuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGFxID0gYWYuZ2V0TWV0YShhbylcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChhcikge31cbiAgICAgICAgICAgICAgICBhYS52dCA9IChNYXRoLnJvdW5kKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC8gMTAwMCkpIC0gVjtcbiAgICAgICAgICAgICAgICBhYy5zZW5kKGFxLCBhYSk7XG4gICAgICAgICAgICAgICAgYXAgPSBXWzFdXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBZID0gZmFsc2VcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN5bmMgPSBhYlxuICAgIH1cbiAgICB0aGlzLmRlZmF1bHRQYWdlQ29udGV4dCA9IHtcbiAgICAgICAgZ2V0TG9jYWxTdG9yYWdlSXRlbTogaCxcbiAgICAgICAgc2V0TG9jYWxTdG9yYWdlSXRlbTogYyxcbiAgICAgICAgcHJlbG9hZEltYWdlOiB6LFxuICAgICAgICBnZXRXaW5kb3dMb2NhdGlvblVSTDogZCxcbiAgICB9O1xuICAgIHRoaXMuSFRNTDVBZGFwdGVyID0ge1xuICAgICAgICBnZXRNZXRhOiBCLFxuICAgICAgICBnZXRQb3NpdGlvbjogcSxcbiAgICAgICAgZ2V0RHVyYXRpb246IG9cbiAgICB9O1xuICAgIHRoaXMuRGVmYXVsdEFkYXB0ZXIgPSB7XG4gICAgICAgIGdldE1ldGE6IGosXG4gICAgICAgIGdldFBvc2l0aW9uOiBMLFxuICAgICAgICBnZXREdXJhdGlvbjogTVxuICAgIH07XG4gICAgdGhpcy5XTVN0cmVhbUFkYXB0ZXIgPSB7XG4gICAgICAgIGdldE1ldGE6IHMsXG4gICAgICAgIGdldFBvc2l0aW9uOiBpLFxuICAgICAgICBnZXREdXJhdGlvbjogZ1xuICAgIH07XG4gICAgdGhpcy5SVlN0cmVhbUFkYXB0ZXIgPSB7XG4gICAgICAgIGdldE1ldGE6IE8sXG4gICAgICAgIGdldFBvc2l0aW9uOiBLLFxuICAgICAgICBnZXREdXJhdGlvbjogSVxuICAgIH07XG5cbiAgICBmdW5jdGlvbiBCKFEpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHBsOiBcIkhUTUwgNSBWaWRlb1wiLFxuICAgICAgICAgICAgcHY6IFwiSFRNTCA1XCIsXG4gICAgICAgICAgICBzeDogc2NyZWVuLndpZHRoLFxuICAgICAgICAgICAgc3k6IHNjcmVlbi5oZWlnaHRcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIG8oUSkge1xuICAgICAgICByZXR1cm4gTWF0aC5yb3VuZChRLmR1cmF0aW9uKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHEoUSkge1xuICAgICAgICByZXR1cm4gUS5jdXJyZW50VGltZVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGooUSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcGw6IFwiREVGXCIsXG4gICAgICAgICAgICBwdjogdmVyc2lvbixcbiAgICAgICAgICAgIHN4OiBzY3JlZW4ud2lkdGgsXG4gICAgICAgICAgICBzeTogc2NyZWVuLmhlaWdodFxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gTChRKSB7XG4gICAgICAgIHJldHVybiBuZXcgRGF0ZSgpLmdldFRpbWUoKSAvIDEwMDBcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBNKFEpIHtcbiAgICAgICAgcmV0dXJuIDBcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzKFEpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHBsOiBcIk1TV01cIixcbiAgICAgICAgICAgIHBsdjogUS52ZXJzaW9uSW5mbyxcbiAgICAgICAgICAgIHN4OiBzY3JlZW4ud2lkdGgsXG4gICAgICAgICAgICBzeTogc2NyZWVuLmhlaWdodFxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaShRKSB7XG4gICAgICAgIGlmIChRLkN1cnJlbnRQb3NpdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuIFEuQ3VycmVudFBvc2l0aW9uXG4gICAgICAgIH1cbiAgICAgICAgaWYgKFEuY3VycmVudFBvc2l0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm4gUS5jdXJyZW50UG9zaXRpb25cbiAgICAgICAgfVxuICAgICAgICBpZiAoUS5jb250cm9scykge1xuICAgICAgICAgICAgaWYgKFEuY29udHJvbHMuY3VycmVudFBvc2l0aW9uKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFEuY29udHJvbHMuY3VycmVudFBvc2l0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFEuQ29udHJvbHMpIHtcbiAgICAgICAgICAgIGlmIChRLkNvbnRyb2xzLmN1cnJlbnRQb3NpdGlvbikge1xuICAgICAgICAgICAgICAgIHJldHVybiBRLkNvbnRyb2xzLmN1cnJlbnRQb3NpdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAwXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZyhRKSB7XG4gICAgICAgIGlmIChRLmN1cnJlbnRNZWRpYSkge1xuICAgICAgICAgICAgaWYgKFEuY3VycmVudE1lZGlhLkR1cmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFEuY3VycmVudE1lZGlhLkR1cmF0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoUS5jdXJyZW50TWVkaWEuZHVyYXRpb24pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUS5jdXJyZW50TWVkaWEuZHVyYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChRLkN1cnJlbnRNZWRpYSkge1xuICAgICAgICAgICAgICAgIGlmIChRLkN1cnJlbnRNZWRpYS5kdXJhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUS5DdXJyZW50TWVkaWEuZHVyYXRpb25cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKFEuQ3VycmVudE1lZGlhLkR1cmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBRLkN1cnJlbnRNZWRpYS5EdXJhdGlvblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIE8oUSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcGw6IFwiUlZcIixcbiAgICAgICAgICAgIHBsdjogUS5HZXRWZXJzaW9uSW5mbygpLFxuICAgICAgICAgICAgc3g6IHNjcmVlbi53aWR0aCxcbiAgICAgICAgICAgIHN5OiBzY3JlZW4uaGVpZ2h0XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBLKFEpIHtcbiAgICAgICAgcmV0dXJuIChRLkdldFBvc2l0aW9uKCkgLyAxMDAwKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIEkoUSkge1xuICAgICAgICByZXR1cm4gKFEuR2V0TGVuZ3RoKCkgLyAxMDAwKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGMoUSwgUikge1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShRLCBSKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGgoUSkge1xuICAgICAgICByZXR1cm4gbG9jYWxTdG9yYWdlLmdldEl0ZW0oUSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB6KFEpIHtcbiAgICAgICAgKG5ldyBJbWFnZSgpKS5zcmMgPSBRXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZCgpIHtcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50LmxvY2F0aW9uLmhyZWZcbiAgICB9XG59XG5TcHJpbmdTdHJlYW1zLnByb3RvdHlwZS5zZXRQYWdlQ29udGV4dCA9IGZ1bmN0aW9uKGEpIHtcbiAgICB0aGlzLnBhZ2VDb250ZXh0ID0gYVxufTtcblxuLyoqIFNUQVJUIEJCQyBBRERJVElPTiAqKi9cbnJldHVybiBTcHJpbmdTdHJlYW1zO1xufSk7XG4vKiogRU5EIEJCQyBBRERJVElPTiAqKi8iLCIvKiFcbiAqIEBvdmVydmlldyBlczYtcHJvbWlzZSAtIGEgdGlueSBpbXBsZW1lbnRhdGlvbiBvZiBQcm9taXNlcy9BKy5cbiAqIEBjb3B5cmlnaHQgQ29weXJpZ2h0IChjKSAyMDE0IFllaHVkYSBLYXR6LCBUb20gRGFsZSwgU3RlZmFuIFBlbm5lciBhbmQgY29udHJpYnV0b3JzIChDb252ZXJzaW9uIHRvIEVTNiBBUEkgYnkgSmFrZSBBcmNoaWJhbGQpXG4gKiBAbGljZW5zZSAgIExpY2Vuc2VkIHVuZGVyIE1JVCBsaWNlbnNlXG4gKiAgICAgICAgICAgIFNlZSBodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vc3RlZmFucGVubmVyL2VzNi1wcm9taXNlL21hc3Rlci9MSUNFTlNFXG4gKiBAdmVyc2lvbiAgIHY0LjIuNSs3ZjJiNTI2ZFxuICovXG5cbihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG5cdHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpIDpcblx0dHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKGZhY3RvcnkpIDpcblx0KGdsb2JhbC5FUzZQcm9taXNlID0gZmFjdG9yeSgpKTtcbn0odGhpcywgKGZ1bmN0aW9uICgpIHsgJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBvYmplY3RPckZ1bmN0aW9uKHgpIHtcbiAgdmFyIHR5cGUgPSB0eXBlb2YgeDtcbiAgcmV0dXJuIHggIT09IG51bGwgJiYgKHR5cGUgPT09ICdvYmplY3QnIHx8IHR5cGUgPT09ICdmdW5jdGlvbicpO1xufVxuXG5mdW5jdGlvbiBpc0Z1bmN0aW9uKHgpIHtcbiAgcmV0dXJuIHR5cGVvZiB4ID09PSAnZnVuY3Rpb24nO1xufVxuXG5cblxudmFyIF9pc0FycmF5ID0gdm9pZCAwO1xuaWYgKEFycmF5LmlzQXJyYXkpIHtcbiAgX2lzQXJyYXkgPSBBcnJheS5pc0FycmF5O1xufSBlbHNlIHtcbiAgX2lzQXJyYXkgPSBmdW5jdGlvbiAoeCkge1xuICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoeCkgPT09ICdbb2JqZWN0IEFycmF5XSc7XG4gIH07XG59XG5cbnZhciBpc0FycmF5ID0gX2lzQXJyYXk7XG5cbnZhciBsZW4gPSAwO1xudmFyIHZlcnR4TmV4dCA9IHZvaWQgMDtcbnZhciBjdXN0b21TY2hlZHVsZXJGbiA9IHZvaWQgMDtcblxudmFyIGFzYXAgPSBmdW5jdGlvbiBhc2FwKGNhbGxiYWNrLCBhcmcpIHtcbiAgcXVldWVbbGVuXSA9IGNhbGxiYWNrO1xuICBxdWV1ZVtsZW4gKyAxXSA9IGFyZztcbiAgbGVuICs9IDI7XG4gIGlmIChsZW4gPT09IDIpIHtcbiAgICAvLyBJZiBsZW4gaXMgMiwgdGhhdCBtZWFucyB0aGF0IHdlIG5lZWQgdG8gc2NoZWR1bGUgYW4gYXN5bmMgZmx1c2guXG4gICAgLy8gSWYgYWRkaXRpb25hbCBjYWxsYmFja3MgYXJlIHF1ZXVlZCBiZWZvcmUgdGhlIHF1ZXVlIGlzIGZsdXNoZWQsIHRoZXlcbiAgICAvLyB3aWxsIGJlIHByb2Nlc3NlZCBieSB0aGlzIGZsdXNoIHRoYXQgd2UgYXJlIHNjaGVkdWxpbmcuXG4gICAgaWYgKGN1c3RvbVNjaGVkdWxlckZuKSB7XG4gICAgICBjdXN0b21TY2hlZHVsZXJGbihmbHVzaCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNjaGVkdWxlRmx1c2goKTtcbiAgICB9XG4gIH1cbn07XG5cbmZ1bmN0aW9uIHNldFNjaGVkdWxlcihzY2hlZHVsZUZuKSB7XG4gIGN1c3RvbVNjaGVkdWxlckZuID0gc2NoZWR1bGVGbjtcbn1cblxuZnVuY3Rpb24gc2V0QXNhcChhc2FwRm4pIHtcbiAgYXNhcCA9IGFzYXBGbjtcbn1cblxudmFyIGJyb3dzZXJXaW5kb3cgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHVuZGVmaW5lZDtcbnZhciBicm93c2VyR2xvYmFsID0gYnJvd3NlcldpbmRvdyB8fCB7fTtcbnZhciBCcm93c2VyTXV0YXRpb25PYnNlcnZlciA9IGJyb3dzZXJHbG9iYWwuTXV0YXRpb25PYnNlcnZlciB8fCBicm93c2VyR2xvYmFsLldlYktpdE11dGF0aW9uT2JzZXJ2ZXI7XG52YXIgaXNOb2RlID0gdHlwZW9mIHNlbGYgPT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyAmJiB7fS50b1N0cmluZy5jYWxsKHByb2Nlc3MpID09PSAnW29iamVjdCBwcm9jZXNzXSc7XG5cbi8vIHRlc3QgZm9yIHdlYiB3b3JrZXIgYnV0IG5vdCBpbiBJRTEwXG52YXIgaXNXb3JrZXIgPSB0eXBlb2YgVWludDhDbGFtcGVkQXJyYXkgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBpbXBvcnRTY3JpcHRzICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgTWVzc2FnZUNoYW5uZWwgIT09ICd1bmRlZmluZWQnO1xuXG4vLyBub2RlXG5mdW5jdGlvbiB1c2VOZXh0VGljaygpIHtcbiAgLy8gbm9kZSB2ZXJzaW9uIDAuMTAueCBkaXNwbGF5cyBhIGRlcHJlY2F0aW9uIHdhcm5pbmcgd2hlbiBuZXh0VGljayBpcyB1c2VkIHJlY3Vyc2l2ZWx5XG4gIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vY3Vqb2pzL3doZW4vaXNzdWVzLzQxMCBmb3IgZGV0YWlsc1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBwcm9jZXNzLm5leHRUaWNrKGZsdXNoKTtcbiAgfTtcbn1cblxuLy8gdmVydHhcbmZ1bmN0aW9uIHVzZVZlcnR4VGltZXIoKSB7XG4gIGlmICh0eXBlb2YgdmVydHhOZXh0ICE9PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICB2ZXJ0eE5leHQoZmx1c2gpO1xuICAgIH07XG4gIH1cblxuICByZXR1cm4gdXNlU2V0VGltZW91dCgpO1xufVxuXG5mdW5jdGlvbiB1c2VNdXRhdGlvbk9ic2VydmVyKCkge1xuICB2YXIgaXRlcmF0aW9ucyA9IDA7XG4gIHZhciBvYnNlcnZlciA9IG5ldyBCcm93c2VyTXV0YXRpb25PYnNlcnZlcihmbHVzaCk7XG4gIHZhciBub2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJycpO1xuICBvYnNlcnZlci5vYnNlcnZlKG5vZGUsIHsgY2hhcmFjdGVyRGF0YTogdHJ1ZSB9KTtcblxuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIG5vZGUuZGF0YSA9IGl0ZXJhdGlvbnMgPSArK2l0ZXJhdGlvbnMgJSAyO1xuICB9O1xufVxuXG4vLyB3ZWIgd29ya2VyXG5mdW5jdGlvbiB1c2VNZXNzYWdlQ2hhbm5lbCgpIHtcbiAgdmFyIGNoYW5uZWwgPSBuZXcgTWVzc2FnZUNoYW5uZWwoKTtcbiAgY2hhbm5lbC5wb3J0MS5vbm1lc3NhZ2UgPSBmbHVzaDtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gY2hhbm5lbC5wb3J0Mi5wb3N0TWVzc2FnZSgwKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gdXNlU2V0VGltZW91dCgpIHtcbiAgLy8gU3RvcmUgc2V0VGltZW91dCByZWZlcmVuY2Ugc28gZXM2LXByb21pc2Ugd2lsbCBiZSB1bmFmZmVjdGVkIGJ5XG4gIC8vIG90aGVyIGNvZGUgbW9kaWZ5aW5nIHNldFRpbWVvdXQgKGxpa2Ugc2lub24udXNlRmFrZVRpbWVycygpKVxuICB2YXIgZ2xvYmFsU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGdsb2JhbFNldFRpbWVvdXQoZmx1c2gsIDEpO1xuICB9O1xufVxuXG52YXIgcXVldWUgPSBuZXcgQXJyYXkoMTAwMCk7XG5mdW5jdGlvbiBmbHVzaCgpIHtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkgKz0gMikge1xuICAgIHZhciBjYWxsYmFjayA9IHF1ZXVlW2ldO1xuICAgIHZhciBhcmcgPSBxdWV1ZVtpICsgMV07XG5cbiAgICBjYWxsYmFjayhhcmcpO1xuXG4gICAgcXVldWVbaV0gPSB1bmRlZmluZWQ7XG4gICAgcXVldWVbaSArIDFdID0gdW5kZWZpbmVkO1xuICB9XG5cbiAgbGVuID0gMDtcbn1cblxuZnVuY3Rpb24gYXR0ZW1wdFZlcnR4KCkge1xuICB0cnkge1xuICAgIHZhciB2ZXJ0eCA9IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCkucmVxdWlyZSgndmVydHgnKTtcbiAgICB2ZXJ0eE5leHQgPSB2ZXJ0eC5ydW5Pbkxvb3AgfHwgdmVydHgucnVuT25Db250ZXh0O1xuICAgIHJldHVybiB1c2VWZXJ0eFRpbWVyKCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gdXNlU2V0VGltZW91dCgpO1xuICB9XG59XG5cbnZhciBzY2hlZHVsZUZsdXNoID0gdm9pZCAwO1xuLy8gRGVjaWRlIHdoYXQgYXN5bmMgbWV0aG9kIHRvIHVzZSB0byB0cmlnZ2VyaW5nIHByb2Nlc3Npbmcgb2YgcXVldWVkIGNhbGxiYWNrczpcbmlmIChpc05vZGUpIHtcbiAgc2NoZWR1bGVGbHVzaCA9IHVzZU5leHRUaWNrKCk7XG59IGVsc2UgaWYgKEJyb3dzZXJNdXRhdGlvbk9ic2VydmVyKSB7XG4gIHNjaGVkdWxlRmx1c2ggPSB1c2VNdXRhdGlvbk9ic2VydmVyKCk7XG59IGVsc2UgaWYgKGlzV29ya2VyKSB7XG4gIHNjaGVkdWxlRmx1c2ggPSB1c2VNZXNzYWdlQ2hhbm5lbCgpO1xufSBlbHNlIGlmIChicm93c2VyV2luZG93ID09PSB1bmRlZmluZWQgJiYgdHlwZW9mIHJlcXVpcmUgPT09ICdmdW5jdGlvbicpIHtcbiAgc2NoZWR1bGVGbHVzaCA9IGF0dGVtcHRWZXJ0eCgpO1xufSBlbHNlIHtcbiAgc2NoZWR1bGVGbHVzaCA9IHVzZVNldFRpbWVvdXQoKTtcbn1cblxuZnVuY3Rpb24gdGhlbihvbkZ1bGZpbGxtZW50LCBvblJlamVjdGlvbikge1xuICB2YXIgcGFyZW50ID0gdGhpcztcblxuICB2YXIgY2hpbGQgPSBuZXcgdGhpcy5jb25zdHJ1Y3Rvcihub29wKTtcblxuICBpZiAoY2hpbGRbUFJPTUlTRV9JRF0gPT09IHVuZGVmaW5lZCkge1xuICAgIG1ha2VQcm9taXNlKGNoaWxkKTtcbiAgfVxuXG4gIHZhciBfc3RhdGUgPSBwYXJlbnQuX3N0YXRlO1xuXG5cbiAgaWYgKF9zdGF0ZSkge1xuICAgIHZhciBjYWxsYmFjayA9IGFyZ3VtZW50c1tfc3RhdGUgLSAxXTtcbiAgICBhc2FwKGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBpbnZva2VDYWxsYmFjayhfc3RhdGUsIGNoaWxkLCBjYWxsYmFjaywgcGFyZW50Ll9yZXN1bHQpO1xuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIHN1YnNjcmliZShwYXJlbnQsIGNoaWxkLCBvbkZ1bGZpbGxtZW50LCBvblJlamVjdGlvbik7XG4gIH1cblxuICByZXR1cm4gY2hpbGQ7XG59XG5cbi8qKlxuICBgUHJvbWlzZS5yZXNvbHZlYCByZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHdpbGwgYmVjb21lIHJlc29sdmVkIHdpdGggdGhlXG4gIHBhc3NlZCBgdmFsdWVgLiBJdCBpcyBzaG9ydGhhbmQgZm9yIHRoZSBmb2xsb3dpbmc6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBsZXQgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG4gICAgcmVzb2x2ZSgxKTtcbiAgfSk7XG5cbiAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAvLyB2YWx1ZSA9PT0gMVxuICB9KTtcbiAgYGBgXG5cbiAgSW5zdGVhZCBvZiB3cml0aW5nIHRoZSBhYm92ZSwgeW91ciBjb2RlIG5vdyBzaW1wbHkgYmVjb21lcyB0aGUgZm9sbG93aW5nOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgbGV0IHByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoMSk7XG5cbiAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAvLyB2YWx1ZSA9PT0gMVxuICB9KTtcbiAgYGBgXG5cbiAgQG1ldGhvZCByZXNvbHZlXG4gIEBzdGF0aWNcbiAgQHBhcmFtIHtBbnl9IHZhbHVlIHZhbHVlIHRoYXQgdGhlIHJldHVybmVkIHByb21pc2Ugd2lsbCBiZSByZXNvbHZlZCB3aXRoXG4gIFVzZWZ1bCBmb3IgdG9vbGluZy5cbiAgQHJldHVybiB7UHJvbWlzZX0gYSBwcm9taXNlIHRoYXQgd2lsbCBiZWNvbWUgZnVsZmlsbGVkIHdpdGggdGhlIGdpdmVuXG4gIGB2YWx1ZWBcbiovXG5mdW5jdGlvbiByZXNvbHZlJDEob2JqZWN0KSB7XG4gIC8qanNoaW50IHZhbGlkdGhpczp0cnVlICovXG4gIHZhciBDb25zdHJ1Y3RvciA9IHRoaXM7XG5cbiAgaWYgKG9iamVjdCAmJiB0eXBlb2Ygb2JqZWN0ID09PSAnb2JqZWN0JyAmJiBvYmplY3QuY29uc3RydWN0b3IgPT09IENvbnN0cnVjdG9yKSB7XG4gICAgcmV0dXJuIG9iamVjdDtcbiAgfVxuXG4gIHZhciBwcm9taXNlID0gbmV3IENvbnN0cnVjdG9yKG5vb3ApO1xuICByZXNvbHZlKHByb21pc2UsIG9iamVjdCk7XG4gIHJldHVybiBwcm9taXNlO1xufVxuXG52YXIgUFJPTUlTRV9JRCA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZygyKTtcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbnZhciBQRU5ESU5HID0gdm9pZCAwO1xudmFyIEZVTEZJTExFRCA9IDE7XG52YXIgUkVKRUNURUQgPSAyO1xuXG52YXIgVFJZX0NBVENIX0VSUk9SID0geyBlcnJvcjogbnVsbCB9O1xuXG5mdW5jdGlvbiBzZWxmRnVsZmlsbG1lbnQoKSB7XG4gIHJldHVybiBuZXcgVHlwZUVycm9yKFwiWW91IGNhbm5vdCByZXNvbHZlIGEgcHJvbWlzZSB3aXRoIGl0c2VsZlwiKTtcbn1cblxuZnVuY3Rpb24gY2Fubm90UmV0dXJuT3duKCkge1xuICByZXR1cm4gbmV3IFR5cGVFcnJvcignQSBwcm9taXNlcyBjYWxsYmFjayBjYW5ub3QgcmV0dXJuIHRoYXQgc2FtZSBwcm9taXNlLicpO1xufVxuXG5mdW5jdGlvbiBnZXRUaGVuKHByb21pc2UpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gcHJvbWlzZS50aGVuO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIFRSWV9DQVRDSF9FUlJPUi5lcnJvciA9IGVycm9yO1xuICAgIHJldHVybiBUUllfQ0FUQ0hfRVJST1I7XG4gIH1cbn1cblxuZnVuY3Rpb24gdHJ5VGhlbih0aGVuJCQxLCB2YWx1ZSwgZnVsZmlsbG1lbnRIYW5kbGVyLCByZWplY3Rpb25IYW5kbGVyKSB7XG4gIHRyeSB7XG4gICAgdGhlbiQkMS5jYWxsKHZhbHVlLCBmdWxmaWxsbWVudEhhbmRsZXIsIHJlamVjdGlvbkhhbmRsZXIpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIGU7XG4gIH1cbn1cblxuZnVuY3Rpb24gaGFuZGxlRm9yZWlnblRoZW5hYmxlKHByb21pc2UsIHRoZW5hYmxlLCB0aGVuJCQxKSB7XG4gIGFzYXAoZnVuY3Rpb24gKHByb21pc2UpIHtcbiAgICB2YXIgc2VhbGVkID0gZmFsc2U7XG4gICAgdmFyIGVycm9yID0gdHJ5VGhlbih0aGVuJCQxLCB0aGVuYWJsZSwgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICBpZiAoc2VhbGVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHNlYWxlZCA9IHRydWU7XG4gICAgICBpZiAodGhlbmFibGUgIT09IHZhbHVlKSB7XG4gICAgICAgIHJlc29sdmUocHJvbWlzZSwgdmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZnVsZmlsbChwcm9taXNlLCB2YWx1ZSk7XG4gICAgICB9XG4gICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgaWYgKHNlYWxlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBzZWFsZWQgPSB0cnVlO1xuXG4gICAgICByZWplY3QocHJvbWlzZSwgcmVhc29uKTtcbiAgICB9LCAnU2V0dGxlOiAnICsgKHByb21pc2UuX2xhYmVsIHx8ICcgdW5rbm93biBwcm9taXNlJykpO1xuXG4gICAgaWYgKCFzZWFsZWQgJiYgZXJyb3IpIHtcbiAgICAgIHNlYWxlZCA9IHRydWU7XG4gICAgICByZWplY3QocHJvbWlzZSwgZXJyb3IpO1xuICAgIH1cbiAgfSwgcHJvbWlzZSk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZU93blRoZW5hYmxlKHByb21pc2UsIHRoZW5hYmxlKSB7XG4gIGlmICh0aGVuYWJsZS5fc3RhdGUgPT09IEZVTEZJTExFRCkge1xuICAgIGZ1bGZpbGwocHJvbWlzZSwgdGhlbmFibGUuX3Jlc3VsdCk7XG4gIH0gZWxzZSBpZiAodGhlbmFibGUuX3N0YXRlID09PSBSRUpFQ1RFRCkge1xuICAgIHJlamVjdChwcm9taXNlLCB0aGVuYWJsZS5fcmVzdWx0KTtcbiAgfSBlbHNlIHtcbiAgICBzdWJzY3JpYmUodGhlbmFibGUsIHVuZGVmaW5lZCwgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICByZXR1cm4gcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7XG4gICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgcmV0dXJuIHJlamVjdChwcm9taXNlLCByZWFzb24pO1xuICAgIH0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIGhhbmRsZU1heWJlVGhlbmFibGUocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSwgdGhlbiQkMSkge1xuICBpZiAobWF5YmVUaGVuYWJsZS5jb25zdHJ1Y3RvciA9PT0gcHJvbWlzZS5jb25zdHJ1Y3RvciAmJiB0aGVuJCQxID09PSB0aGVuICYmIG1heWJlVGhlbmFibGUuY29uc3RydWN0b3IucmVzb2x2ZSA9PT0gcmVzb2x2ZSQxKSB7XG4gICAgaGFuZGxlT3duVGhlbmFibGUocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKHRoZW4kJDEgPT09IFRSWV9DQVRDSF9FUlJPUikge1xuICAgICAgcmVqZWN0KHByb21pc2UsIFRSWV9DQVRDSF9FUlJPUi5lcnJvcik7XG4gICAgICBUUllfQ0FUQ0hfRVJST1IuZXJyb3IgPSBudWxsO1xuICAgIH0gZWxzZSBpZiAodGhlbiQkMSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBmdWxmaWxsKHByb21pc2UsIG1heWJlVGhlbmFibGUpO1xuICAgIH0gZWxzZSBpZiAoaXNGdW5jdGlvbih0aGVuJCQxKSkge1xuICAgICAgaGFuZGxlRm9yZWlnblRoZW5hYmxlKHByb21pc2UsIG1heWJlVGhlbmFibGUsIHRoZW4kJDEpO1xuICAgIH0gZWxzZSB7XG4gICAgICBmdWxmaWxsKHByb21pc2UsIG1heWJlVGhlbmFibGUpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiByZXNvbHZlKHByb21pc2UsIHZhbHVlKSB7XG4gIGlmIChwcm9taXNlID09PSB2YWx1ZSkge1xuICAgIHJlamVjdChwcm9taXNlLCBzZWxmRnVsZmlsbG1lbnQoKSk7XG4gIH0gZWxzZSBpZiAob2JqZWN0T3JGdW5jdGlvbih2YWx1ZSkpIHtcbiAgICBoYW5kbGVNYXliZVRoZW5hYmxlKHByb21pc2UsIHZhbHVlLCBnZXRUaGVuKHZhbHVlKSk7XG4gIH0gZWxzZSB7XG4gICAgZnVsZmlsbChwcm9taXNlLCB2YWx1ZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gcHVibGlzaFJlamVjdGlvbihwcm9taXNlKSB7XG4gIGlmIChwcm9taXNlLl9vbmVycm9yKSB7XG4gICAgcHJvbWlzZS5fb25lcnJvcihwcm9taXNlLl9yZXN1bHQpO1xuICB9XG5cbiAgcHVibGlzaChwcm9taXNlKTtcbn1cblxuZnVuY3Rpb24gZnVsZmlsbChwcm9taXNlLCB2YWx1ZSkge1xuICBpZiAocHJvbWlzZS5fc3RhdGUgIT09IFBFTkRJTkcpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBwcm9taXNlLl9yZXN1bHQgPSB2YWx1ZTtcbiAgcHJvbWlzZS5fc3RhdGUgPSBGVUxGSUxMRUQ7XG5cbiAgaWYgKHByb21pc2UuX3N1YnNjcmliZXJzLmxlbmd0aCAhPT0gMCkge1xuICAgIGFzYXAocHVibGlzaCwgcHJvbWlzZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gcmVqZWN0KHByb21pc2UsIHJlYXNvbikge1xuICBpZiAocHJvbWlzZS5fc3RhdGUgIT09IFBFTkRJTkcpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgcHJvbWlzZS5fc3RhdGUgPSBSRUpFQ1RFRDtcbiAgcHJvbWlzZS5fcmVzdWx0ID0gcmVhc29uO1xuXG4gIGFzYXAocHVibGlzaFJlamVjdGlvbiwgcHJvbWlzZSk7XG59XG5cbmZ1bmN0aW9uIHN1YnNjcmliZShwYXJlbnQsIGNoaWxkLCBvbkZ1bGZpbGxtZW50LCBvblJlamVjdGlvbikge1xuICB2YXIgX3N1YnNjcmliZXJzID0gcGFyZW50Ll9zdWJzY3JpYmVycztcbiAgdmFyIGxlbmd0aCA9IF9zdWJzY3JpYmVycy5sZW5ndGg7XG5cblxuICBwYXJlbnQuX29uZXJyb3IgPSBudWxsO1xuXG4gIF9zdWJzY3JpYmVyc1tsZW5ndGhdID0gY2hpbGQ7XG4gIF9zdWJzY3JpYmVyc1tsZW5ndGggKyBGVUxGSUxMRURdID0gb25GdWxmaWxsbWVudDtcbiAgX3N1YnNjcmliZXJzW2xlbmd0aCArIFJFSkVDVEVEXSA9IG9uUmVqZWN0aW9uO1xuXG4gIGlmIChsZW5ndGggPT09IDAgJiYgcGFyZW50Ll9zdGF0ZSkge1xuICAgIGFzYXAocHVibGlzaCwgcGFyZW50KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBwdWJsaXNoKHByb21pc2UpIHtcbiAgdmFyIHN1YnNjcmliZXJzID0gcHJvbWlzZS5fc3Vic2NyaWJlcnM7XG4gIHZhciBzZXR0bGVkID0gcHJvbWlzZS5fc3RhdGU7XG5cbiAgaWYgKHN1YnNjcmliZXJzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciBjaGlsZCA9IHZvaWQgMCxcbiAgICAgIGNhbGxiYWNrID0gdm9pZCAwLFxuICAgICAgZGV0YWlsID0gcHJvbWlzZS5fcmVzdWx0O1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3Vic2NyaWJlcnMubGVuZ3RoOyBpICs9IDMpIHtcbiAgICBjaGlsZCA9IHN1YnNjcmliZXJzW2ldO1xuICAgIGNhbGxiYWNrID0gc3Vic2NyaWJlcnNbaSArIHNldHRsZWRdO1xuXG4gICAgaWYgKGNoaWxkKSB7XG4gICAgICBpbnZva2VDYWxsYmFjayhzZXR0bGVkLCBjaGlsZCwgY2FsbGJhY2ssIGRldGFpbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNhbGxiYWNrKGRldGFpbCk7XG4gICAgfVxuICB9XG5cbiAgcHJvbWlzZS5fc3Vic2NyaWJlcnMubGVuZ3RoID0gMDtcbn1cblxuZnVuY3Rpb24gdHJ5Q2F0Y2goY2FsbGJhY2ssIGRldGFpbCkge1xuICB0cnkge1xuICAgIHJldHVybiBjYWxsYmFjayhkZXRhaWwpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgVFJZX0NBVENIX0VSUk9SLmVycm9yID0gZTtcbiAgICByZXR1cm4gVFJZX0NBVENIX0VSUk9SO1xuICB9XG59XG5cbmZ1bmN0aW9uIGludm9rZUNhbGxiYWNrKHNldHRsZWQsIHByb21pc2UsIGNhbGxiYWNrLCBkZXRhaWwpIHtcbiAgdmFyIGhhc0NhbGxiYWNrID0gaXNGdW5jdGlvbihjYWxsYmFjayksXG4gICAgICB2YWx1ZSA9IHZvaWQgMCxcbiAgICAgIGVycm9yID0gdm9pZCAwLFxuICAgICAgc3VjY2VlZGVkID0gdm9pZCAwLFxuICAgICAgZmFpbGVkID0gdm9pZCAwO1xuXG4gIGlmIChoYXNDYWxsYmFjaykge1xuICAgIHZhbHVlID0gdHJ5Q2F0Y2goY2FsbGJhY2ssIGRldGFpbCk7XG5cbiAgICBpZiAodmFsdWUgPT09IFRSWV9DQVRDSF9FUlJPUikge1xuICAgICAgZmFpbGVkID0gdHJ1ZTtcbiAgICAgIGVycm9yID0gdmFsdWUuZXJyb3I7XG4gICAgICB2YWx1ZS5lcnJvciA9IG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN1Y2NlZWRlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgaWYgKHByb21pc2UgPT09IHZhbHVlKSB7XG4gICAgICByZWplY3QocHJvbWlzZSwgY2Fubm90UmV0dXJuT3duKCkpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB2YWx1ZSA9IGRldGFpbDtcbiAgICBzdWNjZWVkZWQgPSB0cnVlO1xuICB9XG5cbiAgaWYgKHByb21pc2UuX3N0YXRlICE9PSBQRU5ESU5HKSB7XG4gICAgLy8gbm9vcFxuICB9IGVsc2UgaWYgKGhhc0NhbGxiYWNrICYmIHN1Y2NlZWRlZCkge1xuICAgIHJlc29sdmUocHJvbWlzZSwgdmFsdWUpO1xuICB9IGVsc2UgaWYgKGZhaWxlZCkge1xuICAgIHJlamVjdChwcm9taXNlLCBlcnJvcik7XG4gIH0gZWxzZSBpZiAoc2V0dGxlZCA9PT0gRlVMRklMTEVEKSB7XG4gICAgZnVsZmlsbChwcm9taXNlLCB2YWx1ZSk7XG4gIH0gZWxzZSBpZiAoc2V0dGxlZCA9PT0gUkVKRUNURUQpIHtcbiAgICByZWplY3QocHJvbWlzZSwgdmFsdWUpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGluaXRpYWxpemVQcm9taXNlKHByb21pc2UsIHJlc29sdmVyKSB7XG4gIHRyeSB7XG4gICAgcmVzb2x2ZXIoZnVuY3Rpb24gcmVzb2x2ZVByb21pc2UodmFsdWUpIHtcbiAgICAgIHJlc29sdmUocHJvbWlzZSwgdmFsdWUpO1xuICAgIH0sIGZ1bmN0aW9uIHJlamVjdFByb21pc2UocmVhc29uKSB7XG4gICAgICByZWplY3QocHJvbWlzZSwgcmVhc29uKTtcbiAgICB9KTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJlamVjdChwcm9taXNlLCBlKTtcbiAgfVxufVxuXG52YXIgaWQgPSAwO1xuZnVuY3Rpb24gbmV4dElkKCkge1xuICByZXR1cm4gaWQrKztcbn1cblxuZnVuY3Rpb24gbWFrZVByb21pc2UocHJvbWlzZSkge1xuICBwcm9taXNlW1BST01JU0VfSURdID0gaWQrKztcbiAgcHJvbWlzZS5fc3RhdGUgPSB1bmRlZmluZWQ7XG4gIHByb21pc2UuX3Jlc3VsdCA9IHVuZGVmaW5lZDtcbiAgcHJvbWlzZS5fc3Vic2NyaWJlcnMgPSBbXTtcbn1cblxuZnVuY3Rpb24gdmFsaWRhdGlvbkVycm9yKCkge1xuICByZXR1cm4gbmV3IEVycm9yKCdBcnJheSBNZXRob2RzIG11c3QgYmUgcHJvdmlkZWQgYW4gQXJyYXknKTtcbn1cblxudmFyIEVudW1lcmF0b3IgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIEVudW1lcmF0b3IoQ29uc3RydWN0b3IsIGlucHV0KSB7XG4gICAgdGhpcy5faW5zdGFuY2VDb25zdHJ1Y3RvciA9IENvbnN0cnVjdG9yO1xuICAgIHRoaXMucHJvbWlzZSA9IG5ldyBDb25zdHJ1Y3Rvcihub29wKTtcblxuICAgIGlmICghdGhpcy5wcm9taXNlW1BST01JU0VfSURdKSB7XG4gICAgICBtYWtlUHJvbWlzZSh0aGlzLnByb21pc2UpO1xuICAgIH1cblxuICAgIGlmIChpc0FycmF5KGlucHV0KSkge1xuICAgICAgdGhpcy5sZW5ndGggPSBpbnB1dC5sZW5ndGg7XG4gICAgICB0aGlzLl9yZW1haW5pbmcgPSBpbnB1dC5sZW5ndGg7XG5cbiAgICAgIHRoaXMuX3Jlc3VsdCA9IG5ldyBBcnJheSh0aGlzLmxlbmd0aCk7XG5cbiAgICAgIGlmICh0aGlzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBmdWxmaWxsKHRoaXMucHJvbWlzZSwgdGhpcy5fcmVzdWx0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMubGVuZ3RoID0gdGhpcy5sZW5ndGggfHwgMDtcbiAgICAgICAgdGhpcy5fZW51bWVyYXRlKGlucHV0KTtcbiAgICAgICAgaWYgKHRoaXMuX3JlbWFpbmluZyA9PT0gMCkge1xuICAgICAgICAgIGZ1bGZpbGwodGhpcy5wcm9taXNlLCB0aGlzLl9yZXN1bHQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlamVjdCh0aGlzLnByb21pc2UsIHZhbGlkYXRpb25FcnJvcigpKTtcbiAgICB9XG4gIH1cblxuICBFbnVtZXJhdG9yLnByb3RvdHlwZS5fZW51bWVyYXRlID0gZnVuY3Rpb24gX2VudW1lcmF0ZShpbnB1dCkge1xuICAgIGZvciAodmFyIGkgPSAwOyB0aGlzLl9zdGF0ZSA9PT0gUEVORElORyAmJiBpIDwgaW5wdXQubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoaXMuX2VhY2hFbnRyeShpbnB1dFtpXSwgaSk7XG4gICAgfVxuICB9O1xuXG4gIEVudW1lcmF0b3IucHJvdG90eXBlLl9lYWNoRW50cnkgPSBmdW5jdGlvbiBfZWFjaEVudHJ5KGVudHJ5LCBpKSB7XG4gICAgdmFyIGMgPSB0aGlzLl9pbnN0YW5jZUNvbnN0cnVjdG9yO1xuICAgIHZhciByZXNvbHZlJCQxID0gYy5yZXNvbHZlO1xuXG5cbiAgICBpZiAocmVzb2x2ZSQkMSA9PT0gcmVzb2x2ZSQxKSB7XG4gICAgICB2YXIgX3RoZW4gPSBnZXRUaGVuKGVudHJ5KTtcblxuICAgICAgaWYgKF90aGVuID09PSB0aGVuICYmIGVudHJ5Ll9zdGF0ZSAhPT0gUEVORElORykge1xuICAgICAgICB0aGlzLl9zZXR0bGVkQXQoZW50cnkuX3N0YXRlLCBpLCBlbnRyeS5fcmVzdWx0KTtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIF90aGVuICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRoaXMuX3JlbWFpbmluZy0tO1xuICAgICAgICB0aGlzLl9yZXN1bHRbaV0gPSBlbnRyeTtcbiAgICAgIH0gZWxzZSBpZiAoYyA9PT0gUHJvbWlzZSQxKSB7XG4gICAgICAgIHZhciBwcm9taXNlID0gbmV3IGMobm9vcCk7XG4gICAgICAgIGhhbmRsZU1heWJlVGhlbmFibGUocHJvbWlzZSwgZW50cnksIF90aGVuKTtcbiAgICAgICAgdGhpcy5fd2lsbFNldHRsZUF0KHByb21pc2UsIGkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fd2lsbFNldHRsZUF0KG5ldyBjKGZ1bmN0aW9uIChyZXNvbHZlJCQxKSB7XG4gICAgICAgICAgcmV0dXJuIHJlc29sdmUkJDEoZW50cnkpO1xuICAgICAgICB9KSwgaSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3dpbGxTZXR0bGVBdChyZXNvbHZlJCQxKGVudHJ5KSwgaSk7XG4gICAgfVxuICB9O1xuXG4gIEVudW1lcmF0b3IucHJvdG90eXBlLl9zZXR0bGVkQXQgPSBmdW5jdGlvbiBfc2V0dGxlZEF0KHN0YXRlLCBpLCB2YWx1ZSkge1xuICAgIHZhciBwcm9taXNlID0gdGhpcy5wcm9taXNlO1xuXG5cbiAgICBpZiAocHJvbWlzZS5fc3RhdGUgPT09IFBFTkRJTkcpIHtcbiAgICAgIHRoaXMuX3JlbWFpbmluZy0tO1xuXG4gICAgICBpZiAoc3RhdGUgPT09IFJFSkVDVEVEKSB7XG4gICAgICAgIHJlamVjdChwcm9taXNlLCB2YWx1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9yZXN1bHRbaV0gPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5fcmVtYWluaW5nID09PSAwKSB7XG4gICAgICBmdWxmaWxsKHByb21pc2UsIHRoaXMuX3Jlc3VsdCk7XG4gICAgfVxuICB9O1xuXG4gIEVudW1lcmF0b3IucHJvdG90eXBlLl93aWxsU2V0dGxlQXQgPSBmdW5jdGlvbiBfd2lsbFNldHRsZUF0KHByb21pc2UsIGkpIHtcbiAgICB2YXIgZW51bWVyYXRvciA9IHRoaXM7XG5cbiAgICBzdWJzY3JpYmUocHJvbWlzZSwgdW5kZWZpbmVkLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIHJldHVybiBlbnVtZXJhdG9yLl9zZXR0bGVkQXQoRlVMRklMTEVELCBpLCB2YWx1ZSk7XG4gICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgcmV0dXJuIGVudW1lcmF0b3IuX3NldHRsZWRBdChSRUpFQ1RFRCwgaSwgcmVhc29uKTtcbiAgICB9KTtcbiAgfTtcblxuICByZXR1cm4gRW51bWVyYXRvcjtcbn0oKTtcblxuLyoqXG4gIGBQcm9taXNlLmFsbGAgYWNjZXB0cyBhbiBhcnJheSBvZiBwcm9taXNlcywgYW5kIHJldHVybnMgYSBuZXcgcHJvbWlzZSB3aGljaFxuICBpcyBmdWxmaWxsZWQgd2l0aCBhbiBhcnJheSBvZiBmdWxmaWxsbWVudCB2YWx1ZXMgZm9yIHRoZSBwYXNzZWQgcHJvbWlzZXMsIG9yXG4gIHJlamVjdGVkIHdpdGggdGhlIHJlYXNvbiBvZiB0aGUgZmlyc3QgcGFzc2VkIHByb21pc2UgdG8gYmUgcmVqZWN0ZWQuIEl0IGNhc3RzIGFsbFxuICBlbGVtZW50cyBvZiB0aGUgcGFzc2VkIGl0ZXJhYmxlIHRvIHByb21pc2VzIGFzIGl0IHJ1bnMgdGhpcyBhbGdvcml0aG0uXG5cbiAgRXhhbXBsZTpcblxuICBgYGBqYXZhc2NyaXB0XG4gIGxldCBwcm9taXNlMSA9IHJlc29sdmUoMSk7XG4gIGxldCBwcm9taXNlMiA9IHJlc29sdmUoMik7XG4gIGxldCBwcm9taXNlMyA9IHJlc29sdmUoMyk7XG4gIGxldCBwcm9taXNlcyA9IFsgcHJvbWlzZTEsIHByb21pc2UyLCBwcm9taXNlMyBdO1xuXG4gIFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKGZ1bmN0aW9uKGFycmF5KXtcbiAgICAvLyBUaGUgYXJyYXkgaGVyZSB3b3VsZCBiZSBbIDEsIDIsIDMgXTtcbiAgfSk7XG4gIGBgYFxuXG4gIElmIGFueSBvZiB0aGUgYHByb21pc2VzYCBnaXZlbiB0byBgYWxsYCBhcmUgcmVqZWN0ZWQsIHRoZSBmaXJzdCBwcm9taXNlXG4gIHRoYXQgaXMgcmVqZWN0ZWQgd2lsbCBiZSBnaXZlbiBhcyBhbiBhcmd1bWVudCB0byB0aGUgcmV0dXJuZWQgcHJvbWlzZXMnc1xuICByZWplY3Rpb24gaGFuZGxlci4gRm9yIGV4YW1wbGU6XG5cbiAgRXhhbXBsZTpcblxuICBgYGBqYXZhc2NyaXB0XG4gIGxldCBwcm9taXNlMSA9IHJlc29sdmUoMSk7XG4gIGxldCBwcm9taXNlMiA9IHJlamVjdChuZXcgRXJyb3IoXCIyXCIpKTtcbiAgbGV0IHByb21pc2UzID0gcmVqZWN0KG5ldyBFcnJvcihcIjNcIikpO1xuICBsZXQgcHJvbWlzZXMgPSBbIHByb21pc2UxLCBwcm9taXNlMiwgcHJvbWlzZTMgXTtcblxuICBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbihmdW5jdGlvbihhcnJheSl7XG4gICAgLy8gQ29kZSBoZXJlIG5ldmVyIHJ1bnMgYmVjYXVzZSB0aGVyZSBhcmUgcmVqZWN0ZWQgcHJvbWlzZXMhXG4gIH0sIGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgLy8gZXJyb3IubWVzc2FnZSA9PT0gXCIyXCJcbiAgfSk7XG4gIGBgYFxuXG4gIEBtZXRob2QgYWxsXG4gIEBzdGF0aWNcbiAgQHBhcmFtIHtBcnJheX0gZW50cmllcyBhcnJheSBvZiBwcm9taXNlc1xuICBAcGFyYW0ge1N0cmluZ30gbGFiZWwgb3B0aW9uYWwgc3RyaW5nIGZvciBsYWJlbGluZyB0aGUgcHJvbWlzZS5cbiAgVXNlZnVsIGZvciB0b29saW5nLlxuICBAcmV0dXJuIHtQcm9taXNlfSBwcm9taXNlIHRoYXQgaXMgZnVsZmlsbGVkIHdoZW4gYWxsIGBwcm9taXNlc2AgaGF2ZSBiZWVuXG4gIGZ1bGZpbGxlZCwgb3IgcmVqZWN0ZWQgaWYgYW55IG9mIHRoZW0gYmVjb21lIHJlamVjdGVkLlxuICBAc3RhdGljXG4qL1xuZnVuY3Rpb24gYWxsKGVudHJpZXMpIHtcbiAgcmV0dXJuIG5ldyBFbnVtZXJhdG9yKHRoaXMsIGVudHJpZXMpLnByb21pc2U7XG59XG5cbi8qKlxuICBgUHJvbWlzZS5yYWNlYCByZXR1cm5zIGEgbmV3IHByb21pc2Ugd2hpY2ggaXMgc2V0dGxlZCBpbiB0aGUgc2FtZSB3YXkgYXMgdGhlXG4gIGZpcnN0IHBhc3NlZCBwcm9taXNlIHRvIHNldHRsZS5cblxuICBFeGFtcGxlOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgbGV0IHByb21pc2UxID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICByZXNvbHZlKCdwcm9taXNlIDEnKTtcbiAgICB9LCAyMDApO1xuICB9KTtcblxuICBsZXQgcHJvbWlzZTIgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgIHJlc29sdmUoJ3Byb21pc2UgMicpO1xuICAgIH0sIDEwMCk7XG4gIH0pO1xuXG4gIFByb21pc2UucmFjZShbcHJvbWlzZTEsIHByb21pc2UyXSkudGhlbihmdW5jdGlvbihyZXN1bHQpe1xuICAgIC8vIHJlc3VsdCA9PT0gJ3Byb21pc2UgMicgYmVjYXVzZSBpdCB3YXMgcmVzb2x2ZWQgYmVmb3JlIHByb21pc2UxXG4gICAgLy8gd2FzIHJlc29sdmVkLlxuICB9KTtcbiAgYGBgXG5cbiAgYFByb21pc2UucmFjZWAgaXMgZGV0ZXJtaW5pc3RpYyBpbiB0aGF0IG9ubHkgdGhlIHN0YXRlIG9mIHRoZSBmaXJzdFxuICBzZXR0bGVkIHByb21pc2UgbWF0dGVycy4gRm9yIGV4YW1wbGUsIGV2ZW4gaWYgb3RoZXIgcHJvbWlzZXMgZ2l2ZW4gdG8gdGhlXG4gIGBwcm9taXNlc2AgYXJyYXkgYXJndW1lbnQgYXJlIHJlc29sdmVkLCBidXQgdGhlIGZpcnN0IHNldHRsZWQgcHJvbWlzZSBoYXNcbiAgYmVjb21lIHJlamVjdGVkIGJlZm9yZSB0aGUgb3RoZXIgcHJvbWlzZXMgYmVjYW1lIGZ1bGZpbGxlZCwgdGhlIHJldHVybmVkXG4gIHByb21pc2Ugd2lsbCBiZWNvbWUgcmVqZWN0ZWQ6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBsZXQgcHJvbWlzZTEgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgIHJlc29sdmUoJ3Byb21pc2UgMScpO1xuICAgIH0sIDIwMCk7XG4gIH0pO1xuXG4gIGxldCBwcm9taXNlMiA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgcmVqZWN0KG5ldyBFcnJvcigncHJvbWlzZSAyJykpO1xuICAgIH0sIDEwMCk7XG4gIH0pO1xuXG4gIFByb21pc2UucmFjZShbcHJvbWlzZTEsIHByb21pc2UyXSkudGhlbihmdW5jdGlvbihyZXN1bHQpe1xuICAgIC8vIENvZGUgaGVyZSBuZXZlciBydW5zXG4gIH0sIGZ1bmN0aW9uKHJlYXNvbil7XG4gICAgLy8gcmVhc29uLm1lc3NhZ2UgPT09ICdwcm9taXNlIDInIGJlY2F1c2UgcHJvbWlzZSAyIGJlY2FtZSByZWplY3RlZCBiZWZvcmVcbiAgICAvLyBwcm9taXNlIDEgYmVjYW1lIGZ1bGZpbGxlZFxuICB9KTtcbiAgYGBgXG5cbiAgQW4gZXhhbXBsZSByZWFsLXdvcmxkIHVzZSBjYXNlIGlzIGltcGxlbWVudGluZyB0aW1lb3V0czpcblxuICBgYGBqYXZhc2NyaXB0XG4gIFByb21pc2UucmFjZShbYWpheCgnZm9vLmpzb24nKSwgdGltZW91dCg1MDAwKV0pXG4gIGBgYFxuXG4gIEBtZXRob2QgcmFjZVxuICBAc3RhdGljXG4gIEBwYXJhbSB7QXJyYXl9IHByb21pc2VzIGFycmF5IG9mIHByb21pc2VzIHRvIG9ic2VydmVcbiAgVXNlZnVsIGZvciB0b29saW5nLlxuICBAcmV0dXJuIHtQcm9taXNlfSBhIHByb21pc2Ugd2hpY2ggc2V0dGxlcyBpbiB0aGUgc2FtZSB3YXkgYXMgdGhlIGZpcnN0IHBhc3NlZFxuICBwcm9taXNlIHRvIHNldHRsZS5cbiovXG5mdW5jdGlvbiByYWNlKGVudHJpZXMpIHtcbiAgLypqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi9cbiAgdmFyIENvbnN0cnVjdG9yID0gdGhpcztcblxuICBpZiAoIWlzQXJyYXkoZW50cmllcykpIHtcbiAgICByZXR1cm4gbmV3IENvbnN0cnVjdG9yKGZ1bmN0aW9uIChfLCByZWplY3QpIHtcbiAgICAgIHJldHVybiByZWplY3QobmV3IFR5cGVFcnJvcignWW91IG11c3QgcGFzcyBhbiBhcnJheSB0byByYWNlLicpKTtcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbmV3IENvbnN0cnVjdG9yKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHZhciBsZW5ndGggPSBlbnRyaWVzLmxlbmd0aDtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgQ29uc3RydWN0b3IucmVzb2x2ZShlbnRyaWVzW2ldKS50aGVuKHJlc29sdmUsIHJlamVjdCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cblxuLyoqXG4gIGBQcm9taXNlLnJlamVjdGAgcmV0dXJucyBhIHByb21pc2UgcmVqZWN0ZWQgd2l0aCB0aGUgcGFzc2VkIGByZWFzb25gLlxuICBJdCBpcyBzaG9ydGhhbmQgZm9yIHRoZSBmb2xsb3dpbmc6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBsZXQgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG4gICAgcmVqZWN0KG5ldyBFcnJvcignV0hPT1BTJykpO1xuICB9KTtcblxuICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpe1xuICAgIC8vIENvZGUgaGVyZSBkb2Vzbid0IHJ1biBiZWNhdXNlIHRoZSBwcm9taXNlIGlzIHJlamVjdGVkIVxuICB9LCBmdW5jdGlvbihyZWFzb24pe1xuICAgIC8vIHJlYXNvbi5tZXNzYWdlID09PSAnV0hPT1BTJ1xuICB9KTtcbiAgYGBgXG5cbiAgSW5zdGVhZCBvZiB3cml0aW5nIHRoZSBhYm92ZSwgeW91ciBjb2RlIG5vdyBzaW1wbHkgYmVjb21lcyB0aGUgZm9sbG93aW5nOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgbGV0IHByb21pc2UgPSBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJ1dIT09QUycpKTtcblxuICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpe1xuICAgIC8vIENvZGUgaGVyZSBkb2Vzbid0IHJ1biBiZWNhdXNlIHRoZSBwcm9taXNlIGlzIHJlamVjdGVkIVxuICB9LCBmdW5jdGlvbihyZWFzb24pe1xuICAgIC8vIHJlYXNvbi5tZXNzYWdlID09PSAnV0hPT1BTJ1xuICB9KTtcbiAgYGBgXG5cbiAgQG1ldGhvZCByZWplY3RcbiAgQHN0YXRpY1xuICBAcGFyYW0ge0FueX0gcmVhc29uIHZhbHVlIHRoYXQgdGhlIHJldHVybmVkIHByb21pc2Ugd2lsbCBiZSByZWplY3RlZCB3aXRoLlxuICBVc2VmdWwgZm9yIHRvb2xpbmcuXG4gIEByZXR1cm4ge1Byb21pc2V9IGEgcHJvbWlzZSByZWplY3RlZCB3aXRoIHRoZSBnaXZlbiBgcmVhc29uYC5cbiovXG5mdW5jdGlvbiByZWplY3QkMShyZWFzb24pIHtcbiAgLypqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi9cbiAgdmFyIENvbnN0cnVjdG9yID0gdGhpcztcbiAgdmFyIHByb21pc2UgPSBuZXcgQ29uc3RydWN0b3Iobm9vcCk7XG4gIHJlamVjdChwcm9taXNlLCByZWFzb24pO1xuICByZXR1cm4gcHJvbWlzZTtcbn1cblxuZnVuY3Rpb24gbmVlZHNSZXNvbHZlcigpIHtcbiAgdGhyb3cgbmV3IFR5cGVFcnJvcignWW91IG11c3QgcGFzcyBhIHJlc29sdmVyIGZ1bmN0aW9uIGFzIHRoZSBmaXJzdCBhcmd1bWVudCB0byB0aGUgcHJvbWlzZSBjb25zdHJ1Y3RvcicpO1xufVxuXG5mdW5jdGlvbiBuZWVkc05ldygpIHtcbiAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkZhaWxlZCB0byBjb25zdHJ1Y3QgJ1Byb21pc2UnOiBQbGVhc2UgdXNlIHRoZSAnbmV3JyBvcGVyYXRvciwgdGhpcyBvYmplY3QgY29uc3RydWN0b3IgY2Fubm90IGJlIGNhbGxlZCBhcyBhIGZ1bmN0aW9uLlwiKTtcbn1cblxuLyoqXG4gIFByb21pc2Ugb2JqZWN0cyByZXByZXNlbnQgdGhlIGV2ZW50dWFsIHJlc3VsdCBvZiBhbiBhc3luY2hyb25vdXMgb3BlcmF0aW9uLiBUaGVcbiAgcHJpbWFyeSB3YXkgb2YgaW50ZXJhY3Rpbmcgd2l0aCBhIHByb21pc2UgaXMgdGhyb3VnaCBpdHMgYHRoZW5gIG1ldGhvZCwgd2hpY2hcbiAgcmVnaXN0ZXJzIGNhbGxiYWNrcyB0byByZWNlaXZlIGVpdGhlciBhIHByb21pc2UncyBldmVudHVhbCB2YWx1ZSBvciB0aGUgcmVhc29uXG4gIHdoeSB0aGUgcHJvbWlzZSBjYW5ub3QgYmUgZnVsZmlsbGVkLlxuXG4gIFRlcm1pbm9sb2d5XG4gIC0tLS0tLS0tLS0tXG5cbiAgLSBgcHJvbWlzZWAgaXMgYW4gb2JqZWN0IG9yIGZ1bmN0aW9uIHdpdGggYSBgdGhlbmAgbWV0aG9kIHdob3NlIGJlaGF2aW9yIGNvbmZvcm1zIHRvIHRoaXMgc3BlY2lmaWNhdGlvbi5cbiAgLSBgdGhlbmFibGVgIGlzIGFuIG9iamVjdCBvciBmdW5jdGlvbiB0aGF0IGRlZmluZXMgYSBgdGhlbmAgbWV0aG9kLlxuICAtIGB2YWx1ZWAgaXMgYW55IGxlZ2FsIEphdmFTY3JpcHQgdmFsdWUgKGluY2x1ZGluZyB1bmRlZmluZWQsIGEgdGhlbmFibGUsIG9yIGEgcHJvbWlzZSkuXG4gIC0gYGV4Y2VwdGlvbmAgaXMgYSB2YWx1ZSB0aGF0IGlzIHRocm93biB1c2luZyB0aGUgdGhyb3cgc3RhdGVtZW50LlxuICAtIGByZWFzb25gIGlzIGEgdmFsdWUgdGhhdCBpbmRpY2F0ZXMgd2h5IGEgcHJvbWlzZSB3YXMgcmVqZWN0ZWQuXG4gIC0gYHNldHRsZWRgIHRoZSBmaW5hbCByZXN0aW5nIHN0YXRlIG9mIGEgcHJvbWlzZSwgZnVsZmlsbGVkIG9yIHJlamVjdGVkLlxuXG4gIEEgcHJvbWlzZSBjYW4gYmUgaW4gb25lIG9mIHRocmVlIHN0YXRlczogcGVuZGluZywgZnVsZmlsbGVkLCBvciByZWplY3RlZC5cblxuICBQcm9taXNlcyB0aGF0IGFyZSBmdWxmaWxsZWQgaGF2ZSBhIGZ1bGZpbGxtZW50IHZhbHVlIGFuZCBhcmUgaW4gdGhlIGZ1bGZpbGxlZFxuICBzdGF0ZS4gIFByb21pc2VzIHRoYXQgYXJlIHJlamVjdGVkIGhhdmUgYSByZWplY3Rpb24gcmVhc29uIGFuZCBhcmUgaW4gdGhlXG4gIHJlamVjdGVkIHN0YXRlLiAgQSBmdWxmaWxsbWVudCB2YWx1ZSBpcyBuZXZlciBhIHRoZW5hYmxlLlxuXG4gIFByb21pc2VzIGNhbiBhbHNvIGJlIHNhaWQgdG8gKnJlc29sdmUqIGEgdmFsdWUuICBJZiB0aGlzIHZhbHVlIGlzIGFsc28gYVxuICBwcm9taXNlLCB0aGVuIHRoZSBvcmlnaW5hbCBwcm9taXNlJ3Mgc2V0dGxlZCBzdGF0ZSB3aWxsIG1hdGNoIHRoZSB2YWx1ZSdzXG4gIHNldHRsZWQgc3RhdGUuICBTbyBhIHByb21pc2UgdGhhdCAqcmVzb2x2ZXMqIGEgcHJvbWlzZSB0aGF0IHJlamVjdHMgd2lsbFxuICBpdHNlbGYgcmVqZWN0LCBhbmQgYSBwcm9taXNlIHRoYXQgKnJlc29sdmVzKiBhIHByb21pc2UgdGhhdCBmdWxmaWxscyB3aWxsXG4gIGl0c2VsZiBmdWxmaWxsLlxuXG5cbiAgQmFzaWMgVXNhZ2U6XG4gIC0tLS0tLS0tLS0tLVxuXG4gIGBgYGpzXG4gIGxldCBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgLy8gb24gc3VjY2Vzc1xuICAgIHJlc29sdmUodmFsdWUpO1xuXG4gICAgLy8gb24gZmFpbHVyZVxuICAgIHJlamVjdChyZWFzb24pO1xuICB9KTtcblxuICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpIHtcbiAgICAvLyBvbiBmdWxmaWxsbWVudFxuICB9LCBmdW5jdGlvbihyZWFzb24pIHtcbiAgICAvLyBvbiByZWplY3Rpb25cbiAgfSk7XG4gIGBgYFxuXG4gIEFkdmFuY2VkIFVzYWdlOlxuICAtLS0tLS0tLS0tLS0tLS1cblxuICBQcm9taXNlcyBzaGluZSB3aGVuIGFic3RyYWN0aW5nIGF3YXkgYXN5bmNocm9ub3VzIGludGVyYWN0aW9ucyBzdWNoIGFzXG4gIGBYTUxIdHRwUmVxdWVzdGBzLlxuXG4gIGBgYGpzXG4gIGZ1bmN0aW9uIGdldEpTT04odXJsKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG4gICAgICBsZXQgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cbiAgICAgIHhoci5vcGVuKCdHRVQnLCB1cmwpO1xuICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGhhbmRsZXI7XG4gICAgICB4aHIucmVzcG9uc2VUeXBlID0gJ2pzb24nO1xuICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ0FjY2VwdCcsICdhcHBsaWNhdGlvbi9qc29uJyk7XG4gICAgICB4aHIuc2VuZCgpO1xuXG4gICAgICBmdW5jdGlvbiBoYW5kbGVyKCkge1xuICAgICAgICBpZiAodGhpcy5yZWFkeVN0YXRlID09PSB0aGlzLkRPTkUpIHtcbiAgICAgICAgICBpZiAodGhpcy5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgICAgcmVzb2x2ZSh0aGlzLnJlc3BvbnNlKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignZ2V0SlNPTjogYCcgKyB1cmwgKyAnYCBmYWlsZWQgd2l0aCBzdGF0dXM6IFsnICsgdGhpcy5zdGF0dXMgKyAnXScpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSk7XG4gIH1cblxuICBnZXRKU09OKCcvcG9zdHMuanNvbicpLnRoZW4oZnVuY3Rpb24oanNvbikge1xuICAgIC8vIG9uIGZ1bGZpbGxtZW50XG4gIH0sIGZ1bmN0aW9uKHJlYXNvbikge1xuICAgIC8vIG9uIHJlamVjdGlvblxuICB9KTtcbiAgYGBgXG5cbiAgVW5saWtlIGNhbGxiYWNrcywgcHJvbWlzZXMgYXJlIGdyZWF0IGNvbXBvc2FibGUgcHJpbWl0aXZlcy5cblxuICBgYGBqc1xuICBQcm9taXNlLmFsbChbXG4gICAgZ2V0SlNPTignL3Bvc3RzJyksXG4gICAgZ2V0SlNPTignL2NvbW1lbnRzJylcbiAgXSkudGhlbihmdW5jdGlvbih2YWx1ZXMpe1xuICAgIHZhbHVlc1swXSAvLyA9PiBwb3N0c0pTT05cbiAgICB2YWx1ZXNbMV0gLy8gPT4gY29tbWVudHNKU09OXG5cbiAgICByZXR1cm4gdmFsdWVzO1xuICB9KTtcbiAgYGBgXG5cbiAgQGNsYXNzIFByb21pc2VcbiAgQHBhcmFtIHtGdW5jdGlvbn0gcmVzb2x2ZXJcbiAgVXNlZnVsIGZvciB0b29saW5nLlxuICBAY29uc3RydWN0b3JcbiovXG5cbnZhciBQcm9taXNlJDEgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIFByb21pc2UocmVzb2x2ZXIpIHtcbiAgICB0aGlzW1BST01JU0VfSURdID0gbmV4dElkKCk7XG4gICAgdGhpcy5fcmVzdWx0ID0gdGhpcy5fc3RhdGUgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fc3Vic2NyaWJlcnMgPSBbXTtcblxuICAgIGlmIChub29wICE9PSByZXNvbHZlcikge1xuICAgICAgdHlwZW9mIHJlc29sdmVyICE9PSAnZnVuY3Rpb24nICYmIG5lZWRzUmVzb2x2ZXIoKTtcbiAgICAgIHRoaXMgaW5zdGFuY2VvZiBQcm9taXNlID8gaW5pdGlhbGl6ZVByb21pc2UodGhpcywgcmVzb2x2ZXIpIDogbmVlZHNOZXcoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgVGhlIHByaW1hcnkgd2F5IG9mIGludGVyYWN0aW5nIHdpdGggYSBwcm9taXNlIGlzIHRocm91Z2ggaXRzIGB0aGVuYCBtZXRob2QsXG4gIHdoaWNoIHJlZ2lzdGVycyBjYWxsYmFja3MgdG8gcmVjZWl2ZSBlaXRoZXIgYSBwcm9taXNlJ3MgZXZlbnR1YWwgdmFsdWUgb3IgdGhlXG4gIHJlYXNvbiB3aHkgdGhlIHByb21pc2UgY2Fubm90IGJlIGZ1bGZpbGxlZC5cbiAgIGBgYGpzXG4gIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbih1c2VyKXtcbiAgICAvLyB1c2VyIGlzIGF2YWlsYWJsZVxuICB9LCBmdW5jdGlvbihyZWFzb24pe1xuICAgIC8vIHVzZXIgaXMgdW5hdmFpbGFibGUsIGFuZCB5b3UgYXJlIGdpdmVuIHRoZSByZWFzb24gd2h5XG4gIH0pO1xuICBgYGBcbiAgIENoYWluaW5nXG4gIC0tLS0tLS0tXG4gICBUaGUgcmV0dXJuIHZhbHVlIG9mIGB0aGVuYCBpcyBpdHNlbGYgYSBwcm9taXNlLiAgVGhpcyBzZWNvbmQsICdkb3duc3RyZWFtJ1xuICBwcm9taXNlIGlzIHJlc29sdmVkIHdpdGggdGhlIHJldHVybiB2YWx1ZSBvZiB0aGUgZmlyc3QgcHJvbWlzZSdzIGZ1bGZpbGxtZW50XG4gIG9yIHJlamVjdGlvbiBoYW5kbGVyLCBvciByZWplY3RlZCBpZiB0aGUgaGFuZGxlciB0aHJvd3MgYW4gZXhjZXB0aW9uLlxuICAgYGBganNcbiAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgcmV0dXJuIHVzZXIubmFtZTtcbiAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgIHJldHVybiAnZGVmYXVsdCBuYW1lJztcbiAgfSkudGhlbihmdW5jdGlvbiAodXNlck5hbWUpIHtcbiAgICAvLyBJZiBgZmluZFVzZXJgIGZ1bGZpbGxlZCwgYHVzZXJOYW1lYCB3aWxsIGJlIHRoZSB1c2VyJ3MgbmFtZSwgb3RoZXJ3aXNlIGl0XG4gICAgLy8gd2lsbCBiZSBgJ2RlZmF1bHQgbmFtZSdgXG4gIH0pO1xuICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdGb3VuZCB1c2VyLCBidXQgc3RpbGwgdW5oYXBweScpO1xuICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdgZmluZFVzZXJgIHJlamVjdGVkIGFuZCB3ZSdyZSB1bmhhcHB5Jyk7XG4gIH0pLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgLy8gbmV2ZXIgcmVhY2hlZFxuICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgLy8gaWYgYGZpbmRVc2VyYCBmdWxmaWxsZWQsIGByZWFzb25gIHdpbGwgYmUgJ0ZvdW5kIHVzZXIsIGJ1dCBzdGlsbCB1bmhhcHB5Jy5cbiAgICAvLyBJZiBgZmluZFVzZXJgIHJlamVjdGVkLCBgcmVhc29uYCB3aWxsIGJlICdgZmluZFVzZXJgIHJlamVjdGVkIGFuZCB3ZSdyZSB1bmhhcHB5Jy5cbiAgfSk7XG4gIGBgYFxuICBJZiB0aGUgZG93bnN0cmVhbSBwcm9taXNlIGRvZXMgbm90IHNwZWNpZnkgYSByZWplY3Rpb24gaGFuZGxlciwgcmVqZWN0aW9uIHJlYXNvbnMgd2lsbCBiZSBwcm9wYWdhdGVkIGZ1cnRoZXIgZG93bnN0cmVhbS5cbiAgIGBgYGpzXG4gIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuICAgIHRocm93IG5ldyBQZWRhZ29naWNhbEV4Y2VwdGlvbignVXBzdHJlYW0gZXJyb3InKTtcbiAgfSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAvLyBuZXZlciByZWFjaGVkXG4gIH0pLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgLy8gbmV2ZXIgcmVhY2hlZFxuICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgLy8gVGhlIGBQZWRnYWdvY2lhbEV4Y2VwdGlvbmAgaXMgcHJvcGFnYXRlZCBhbGwgdGhlIHdheSBkb3duIHRvIGhlcmVcbiAgfSk7XG4gIGBgYFxuICAgQXNzaW1pbGF0aW9uXG4gIC0tLS0tLS0tLS0tLVxuICAgU29tZXRpbWVzIHRoZSB2YWx1ZSB5b3Ugd2FudCB0byBwcm9wYWdhdGUgdG8gYSBkb3duc3RyZWFtIHByb21pc2UgY2FuIG9ubHkgYmVcbiAgcmV0cmlldmVkIGFzeW5jaHJvbm91c2x5LiBUaGlzIGNhbiBiZSBhY2hpZXZlZCBieSByZXR1cm5pbmcgYSBwcm9taXNlIGluIHRoZVxuICBmdWxmaWxsbWVudCBvciByZWplY3Rpb24gaGFuZGxlci4gVGhlIGRvd25zdHJlYW0gcHJvbWlzZSB3aWxsIHRoZW4gYmUgcGVuZGluZ1xuICB1bnRpbCB0aGUgcmV0dXJuZWQgcHJvbWlzZSBpcyBzZXR0bGVkLiBUaGlzIGlzIGNhbGxlZCAqYXNzaW1pbGF0aW9uKi5cbiAgIGBgYGpzXG4gIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuICAgIHJldHVybiBmaW5kQ29tbWVudHNCeUF1dGhvcih1c2VyKTtcbiAgfSkudGhlbihmdW5jdGlvbiAoY29tbWVudHMpIHtcbiAgICAvLyBUaGUgdXNlcidzIGNvbW1lbnRzIGFyZSBub3cgYXZhaWxhYmxlXG4gIH0pO1xuICBgYGBcbiAgIElmIHRoZSBhc3NpbWxpYXRlZCBwcm9taXNlIHJlamVjdHMsIHRoZW4gdGhlIGRvd25zdHJlYW0gcHJvbWlzZSB3aWxsIGFsc28gcmVqZWN0LlxuICAgYGBganNcbiAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgcmV0dXJuIGZpbmRDb21tZW50c0J5QXV0aG9yKHVzZXIpO1xuICB9KS50aGVuKGZ1bmN0aW9uIChjb21tZW50cykge1xuICAgIC8vIElmIGBmaW5kQ29tbWVudHNCeUF1dGhvcmAgZnVsZmlsbHMsIHdlJ2xsIGhhdmUgdGhlIHZhbHVlIGhlcmVcbiAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgIC8vIElmIGBmaW5kQ29tbWVudHNCeUF1dGhvcmAgcmVqZWN0cywgd2UnbGwgaGF2ZSB0aGUgcmVhc29uIGhlcmVcbiAgfSk7XG4gIGBgYFxuICAgU2ltcGxlIEV4YW1wbGVcbiAgLS0tLS0tLS0tLS0tLS1cbiAgIFN5bmNocm9ub3VzIEV4YW1wbGVcbiAgIGBgYGphdmFzY3JpcHRcbiAgbGV0IHJlc3VsdDtcbiAgIHRyeSB7XG4gICAgcmVzdWx0ID0gZmluZFJlc3VsdCgpO1xuICAgIC8vIHN1Y2Nlc3NcbiAgfSBjYXRjaChyZWFzb24pIHtcbiAgICAvLyBmYWlsdXJlXG4gIH1cbiAgYGBgXG4gICBFcnJiYWNrIEV4YW1wbGVcbiAgIGBgYGpzXG4gIGZpbmRSZXN1bHQoZnVuY3Rpb24ocmVzdWx0LCBlcnIpe1xuICAgIGlmIChlcnIpIHtcbiAgICAgIC8vIGZhaWx1cmVcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gc3VjY2Vzc1xuICAgIH1cbiAgfSk7XG4gIGBgYFxuICAgUHJvbWlzZSBFeGFtcGxlO1xuICAgYGBgamF2YXNjcmlwdFxuICBmaW5kUmVzdWx0KCkudGhlbihmdW5jdGlvbihyZXN1bHQpe1xuICAgIC8vIHN1Y2Nlc3NcbiAgfSwgZnVuY3Rpb24ocmVhc29uKXtcbiAgICAvLyBmYWlsdXJlXG4gIH0pO1xuICBgYGBcbiAgIEFkdmFuY2VkIEV4YW1wbGVcbiAgLS0tLS0tLS0tLS0tLS1cbiAgIFN5bmNocm9ub3VzIEV4YW1wbGVcbiAgIGBgYGphdmFzY3JpcHRcbiAgbGV0IGF1dGhvciwgYm9va3M7XG4gICB0cnkge1xuICAgIGF1dGhvciA9IGZpbmRBdXRob3IoKTtcbiAgICBib29rcyAgPSBmaW5kQm9va3NCeUF1dGhvcihhdXRob3IpO1xuICAgIC8vIHN1Y2Nlc3NcbiAgfSBjYXRjaChyZWFzb24pIHtcbiAgICAvLyBmYWlsdXJlXG4gIH1cbiAgYGBgXG4gICBFcnJiYWNrIEV4YW1wbGVcbiAgIGBgYGpzXG4gICBmdW5jdGlvbiBmb3VuZEJvb2tzKGJvb2tzKSB7XG4gICB9XG4gICBmdW5jdGlvbiBmYWlsdXJlKHJlYXNvbikge1xuICAgfVxuICAgZmluZEF1dGhvcihmdW5jdGlvbihhdXRob3IsIGVycil7XG4gICAgaWYgKGVycikge1xuICAgICAgZmFpbHVyZShlcnIpO1xuICAgICAgLy8gZmFpbHVyZVxuICAgIH0gZWxzZSB7XG4gICAgICB0cnkge1xuICAgICAgICBmaW5kQm9vb2tzQnlBdXRob3IoYXV0aG9yLCBmdW5jdGlvbihib29rcywgZXJyKSB7XG4gICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgZmFpbHVyZShlcnIpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBmb3VuZEJvb2tzKGJvb2tzKTtcbiAgICAgICAgICAgIH0gY2F0Y2gocmVhc29uKSB7XG4gICAgICAgICAgICAgIGZhaWx1cmUocmVhc29uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSBjYXRjaChlcnJvcikge1xuICAgICAgICBmYWlsdXJlKGVycik7XG4gICAgICB9XG4gICAgICAvLyBzdWNjZXNzXG4gICAgfVxuICB9KTtcbiAgYGBgXG4gICBQcm9taXNlIEV4YW1wbGU7XG4gICBgYGBqYXZhc2NyaXB0XG4gIGZpbmRBdXRob3IoKS5cbiAgICB0aGVuKGZpbmRCb29rc0J5QXV0aG9yKS5cbiAgICB0aGVuKGZ1bmN0aW9uKGJvb2tzKXtcbiAgICAgIC8vIGZvdW5kIGJvb2tzXG4gIH0pLmNhdGNoKGZ1bmN0aW9uKHJlYXNvbil7XG4gICAgLy8gc29tZXRoaW5nIHdlbnQgd3JvbmdcbiAgfSk7XG4gIGBgYFxuICAgQG1ldGhvZCB0aGVuXG4gIEBwYXJhbSB7RnVuY3Rpb259IG9uRnVsZmlsbGVkXG4gIEBwYXJhbSB7RnVuY3Rpb259IG9uUmVqZWN0ZWRcbiAgVXNlZnVsIGZvciB0b29saW5nLlxuICBAcmV0dXJuIHtQcm9taXNlfVxuICAqL1xuXG4gIC8qKlxuICBgY2F0Y2hgIGlzIHNpbXBseSBzdWdhciBmb3IgYHRoZW4odW5kZWZpbmVkLCBvblJlamVjdGlvbilgIHdoaWNoIG1ha2VzIGl0IHRoZSBzYW1lXG4gIGFzIHRoZSBjYXRjaCBibG9jayBvZiBhIHRyeS9jYXRjaCBzdGF0ZW1lbnQuXG4gIGBgYGpzXG4gIGZ1bmN0aW9uIGZpbmRBdXRob3IoKXtcbiAgdGhyb3cgbmV3IEVycm9yKCdjb3VsZG4ndCBmaW5kIHRoYXQgYXV0aG9yJyk7XG4gIH1cbiAgLy8gc3luY2hyb25vdXNcbiAgdHJ5IHtcbiAgZmluZEF1dGhvcigpO1xuICB9IGNhdGNoKHJlYXNvbikge1xuICAvLyBzb21ldGhpbmcgd2VudCB3cm9uZ1xuICB9XG4gIC8vIGFzeW5jIHdpdGggcHJvbWlzZXNcbiAgZmluZEF1dGhvcigpLmNhdGNoKGZ1bmN0aW9uKHJlYXNvbil7XG4gIC8vIHNvbWV0aGluZyB3ZW50IHdyb25nXG4gIH0pO1xuICBgYGBcbiAgQG1ldGhvZCBjYXRjaFxuICBAcGFyYW0ge0Z1bmN0aW9ufSBvblJlamVjdGlvblxuICBVc2VmdWwgZm9yIHRvb2xpbmcuXG4gIEByZXR1cm4ge1Byb21pc2V9XG4gICovXG5cblxuICBQcm9taXNlLnByb3RvdHlwZS5jYXRjaCA9IGZ1bmN0aW9uIF9jYXRjaChvblJlamVjdGlvbikge1xuICAgIHJldHVybiB0aGlzLnRoZW4obnVsbCwgb25SZWplY3Rpb24pO1xuICB9O1xuXG4gIC8qKlxuICAgIGBmaW5hbGx5YCB3aWxsIGJlIGludm9rZWQgcmVnYXJkbGVzcyBvZiB0aGUgcHJvbWlzZSdzIGZhdGUganVzdCBhcyBuYXRpdmVcbiAgICB0cnkvY2F0Y2gvZmluYWxseSBiZWhhdmVzXG4gIFxuICAgIFN5bmNocm9ub3VzIGV4YW1wbGU6XG4gIFxuICAgIGBgYGpzXG4gICAgZmluZEF1dGhvcigpIHtcbiAgICAgIGlmIChNYXRoLnJhbmRvbSgpID4gMC41KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcigpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5ldyBBdXRob3IoKTtcbiAgICB9XG4gIFxuICAgIHRyeSB7XG4gICAgICByZXR1cm4gZmluZEF1dGhvcigpOyAvLyBzdWNjZWVkIG9yIGZhaWxcbiAgICB9IGNhdGNoKGVycm9yKSB7XG4gICAgICByZXR1cm4gZmluZE90aGVyQXV0aGVyKCk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIC8vIGFsd2F5cyBydW5zXG4gICAgICAvLyBkb2Vzbid0IGFmZmVjdCB0aGUgcmV0dXJuIHZhbHVlXG4gICAgfVxuICAgIGBgYFxuICBcbiAgICBBc3luY2hyb25vdXMgZXhhbXBsZTpcbiAgXG4gICAgYGBganNcbiAgICBmaW5kQXV0aG9yKCkuY2F0Y2goZnVuY3Rpb24ocmVhc29uKXtcbiAgICAgIHJldHVybiBmaW5kT3RoZXJBdXRoZXIoKTtcbiAgICB9KS5maW5hbGx5KGZ1bmN0aW9uKCl7XG4gICAgICAvLyBhdXRob3Igd2FzIGVpdGhlciBmb3VuZCwgb3Igbm90XG4gICAgfSk7XG4gICAgYGBgXG4gIFxuICAgIEBtZXRob2QgZmluYWxseVxuICAgIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gICAgQHJldHVybiB7UHJvbWlzZX1cbiAgKi9cblxuXG4gIFByb21pc2UucHJvdG90eXBlLmZpbmFsbHkgPSBmdW5jdGlvbiBfZmluYWxseShjYWxsYmFjaykge1xuICAgIHZhciBwcm9taXNlID0gdGhpcztcbiAgICB2YXIgY29uc3RydWN0b3IgPSBwcm9taXNlLmNvbnN0cnVjdG9yO1xuXG4gICAgaWYgKGlzRnVuY3Rpb24oY2FsbGJhY2spKSB7XG4gICAgICByZXR1cm4gcHJvbWlzZS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gY29uc3RydWN0b3IucmVzb2x2ZShjYWxsYmFjaygpKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH0pO1xuICAgICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgICByZXR1cm4gY29uc3RydWN0b3IucmVzb2x2ZShjYWxsYmFjaygpKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB0aHJvdyByZWFzb247XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHByb21pc2UudGhlbihjYWxsYmFjaywgY2FsbGJhY2spO1xuICB9O1xuXG4gIHJldHVybiBQcm9taXNlO1xufSgpO1xuXG5Qcm9taXNlJDEucHJvdG90eXBlLnRoZW4gPSB0aGVuO1xuUHJvbWlzZSQxLmFsbCA9IGFsbDtcblByb21pc2UkMS5yYWNlID0gcmFjZTtcblByb21pc2UkMS5yZXNvbHZlID0gcmVzb2x2ZSQxO1xuUHJvbWlzZSQxLnJlamVjdCA9IHJlamVjdCQxO1xuUHJvbWlzZSQxLl9zZXRTY2hlZHVsZXIgPSBzZXRTY2hlZHVsZXI7XG5Qcm9taXNlJDEuX3NldEFzYXAgPSBzZXRBc2FwO1xuUHJvbWlzZSQxLl9hc2FwID0gYXNhcDtcblxuLypnbG9iYWwgc2VsZiovXG5mdW5jdGlvbiBwb2x5ZmlsbCgpIHtcbiAgdmFyIGxvY2FsID0gdm9pZCAwO1xuXG4gIGlmICh0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJykge1xuICAgIGxvY2FsID0gZ2xvYmFsO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJykge1xuICAgIGxvY2FsID0gc2VsZjtcbiAgfSBlbHNlIHtcbiAgICB0cnkge1xuICAgICAgbG9jYWwgPSBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcigncG9seWZpbGwgZmFpbGVkIGJlY2F1c2UgZ2xvYmFsIG9iamVjdCBpcyB1bmF2YWlsYWJsZSBpbiB0aGlzIGVudmlyb25tZW50Jyk7XG4gICAgfVxuICB9XG5cbiAgdmFyIFAgPSBsb2NhbC5Qcm9taXNlO1xuXG4gIGlmIChQKSB7XG4gICAgdmFyIHByb21pc2VUb1N0cmluZyA9IG51bGw7XG4gICAgdHJ5IHtcbiAgICAgIHByb21pc2VUb1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChQLnJlc29sdmUoKSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgLy8gc2lsZW50bHkgaWdub3JlZFxuICAgIH1cblxuICAgIGlmIChwcm9taXNlVG9TdHJpbmcgPT09ICdbb2JqZWN0IFByb21pc2VdJyAmJiAhUC5jYXN0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9XG5cbiAgbG9jYWwuUHJvbWlzZSA9IFByb21pc2UkMTtcbn1cblxuLy8gU3RyYW5nZSBjb21wYXQuLlxuUHJvbWlzZSQxLnBvbHlmaWxsID0gcG9seWZpbGw7XG5Qcm9taXNlJDEuUHJvbWlzZSA9IFByb21pc2UkMTtcblxucmV0dXJuIFByb21pc2UkMTtcblxufSkpKTtcblxuXG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVzNi1wcm9taXNlLm1hcFxuIiwiLy8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG52YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307XG5cbi8vIGNhY2hlZCBmcm9tIHdoYXRldmVyIGdsb2JhbCBpcyBwcmVzZW50IHNvIHRoYXQgdGVzdCBydW5uZXJzIHRoYXQgc3R1YiBpdFxuLy8gZG9uJ3QgYnJlYWsgdGhpbmdzLiAgQnV0IHdlIG5lZWQgdG8gd3JhcCBpdCBpbiBhIHRyeSBjYXRjaCBpbiBjYXNlIGl0IGlzXG4vLyB3cmFwcGVkIGluIHN0cmljdCBtb2RlIGNvZGUgd2hpY2ggZG9lc24ndCBkZWZpbmUgYW55IGdsb2JhbHMuICBJdCdzIGluc2lkZSBhXG4vLyBmdW5jdGlvbiBiZWNhdXNlIHRyeS9jYXRjaGVzIGRlb3B0aW1pemUgaW4gY2VydGFpbiBlbmdpbmVzLlxuXG52YXIgY2FjaGVkU2V0VGltZW91dDtcbnZhciBjYWNoZWRDbGVhclRpbWVvdXQ7XG5cbmZ1bmN0aW9uIGRlZmF1bHRTZXRUaW1vdXQoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG5mdW5jdGlvbiBkZWZhdWx0Q2xlYXJUaW1lb3V0ICgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuKGZ1bmN0aW9uICgpIHtcbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIHNldFRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIGNsZWFyVGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICB9XG59ICgpKVxuZnVuY3Rpb24gcnVuVGltZW91dChmdW4pIHtcbiAgICBpZiAoY2FjaGVkU2V0VGltZW91dCA9PT0gc2V0VGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgLy8gaWYgc2V0VGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZFNldFRpbWVvdXQgPT09IGRlZmF1bHRTZXRUaW1vdXQgfHwgIWNhY2hlZFNldFRpbWVvdXQpICYmIHNldFRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9IGNhdGNoKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0IHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKG51bGwsIGZ1biwgMCk7XG4gICAgICAgIH0gY2F0Y2goZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvclxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbCh0aGlzLCBmdW4sIDApO1xuICAgICAgICB9XG4gICAgfVxuXG5cbn1cbmZ1bmN0aW9uIHJ1bkNsZWFyVGltZW91dChtYXJrZXIpIHtcbiAgICBpZiAoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgLy8gaWYgY2xlYXJUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBkZWZhdWx0Q2xlYXJUaW1lb3V0IHx8ICFjYWNoZWRDbGVhclRpbWVvdXQpICYmIGNsZWFyVGltZW91dCkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfSBjYXRjaCAoZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgIHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwobnVsbCwgbWFya2VyKTtcbiAgICAgICAgfSBjYXRjaCAoZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvci5cbiAgICAgICAgICAgIC8vIFNvbWUgdmVyc2lvbnMgb2YgSS5FLiBoYXZlIGRpZmZlcmVudCBydWxlcyBmb3IgY2xlYXJUaW1lb3V0IHZzIHNldFRpbWVvdXRcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbCh0aGlzLCBtYXJrZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG5cblxufVxudmFyIHF1ZXVlID0gW107XG52YXIgZHJhaW5pbmcgPSBmYWxzZTtcbnZhciBjdXJyZW50UXVldWU7XG52YXIgcXVldWVJbmRleCA9IC0xO1xuXG5mdW5jdGlvbiBjbGVhblVwTmV4dFRpY2soKSB7XG4gICAgaWYgKCFkcmFpbmluZyB8fCAhY3VycmVudFF1ZXVlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBxdWV1ZSA9IGN1cnJlbnRRdWV1ZS5jb25jYXQocXVldWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICB9XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBkcmFpblF1ZXVlKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkcmFpblF1ZXVlKCkge1xuICAgIGlmIChkcmFpbmluZykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciB0aW1lb3V0ID0gcnVuVGltZW91dChjbGVhblVwTmV4dFRpY2spO1xuICAgIGRyYWluaW5nID0gdHJ1ZTtcblxuICAgIHZhciBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgd2hpbGUobGVuKSB7XG4gICAgICAgIGN1cnJlbnRRdWV1ZSA9IHF1ZXVlO1xuICAgICAgICBxdWV1ZSA9IFtdO1xuICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7XG4gICAgICAgICAgICBpZiAoY3VycmVudFF1ZXVlKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFF1ZXVlW3F1ZXVlSW5kZXhdLnJ1bigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIH1cbiAgICBjdXJyZW50UXVldWUgPSBudWxsO1xuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgcnVuQ2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xufVxuXG5wcm9jZXNzLm5leHRUaWNrID0gZnVuY3Rpb24gKGZ1bikge1xuICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHF1ZXVlLnB1c2gobmV3IEl0ZW0oZnVuLCBhcmdzKSk7XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHtcbiAgICAgICAgcnVuVGltZW91dChkcmFpblF1ZXVlKTtcbiAgICB9XG59O1xuXG4vLyB2OCBsaWtlcyBwcmVkaWN0aWJsZSBvYmplY3RzXG5mdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHtcbiAgICB0aGlzLmZ1biA9IGZ1bjtcbiAgICB0aGlzLmFycmF5ID0gYXJyYXk7XG59XG5JdGVtLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5mdW4uYXBwbHkobnVsbCwgdGhpcy5hcnJheSk7XG59O1xucHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJztcbnByb2Nlc3MuYnJvd3NlciA9IHRydWU7XG5wcm9jZXNzLmVudiA9IHt9O1xucHJvY2Vzcy5hcmd2ID0gW107XG5wcm9jZXNzLnZlcnNpb24gPSAnJzsgLy8gZW1wdHkgc3RyaW5nIHRvIGF2b2lkIHJlZ2V4cCBpc3N1ZXNcbnByb2Nlc3MudmVyc2lvbnMgPSB7fTtcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbnByb2Nlc3Mub24gPSBub29wO1xucHJvY2Vzcy5hZGRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLm9uY2UgPSBub29wO1xucHJvY2Vzcy5vZmYgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG5wcm9jZXNzLmVtaXQgPSBub29wO1xucHJvY2Vzcy5wcmVwZW5kTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5wcmVwZW5kT25jZUxpc3RlbmVyID0gbm9vcDtcblxucHJvY2Vzcy5saXN0ZW5lcnMgPSBmdW5jdGlvbiAobmFtZSkgeyByZXR1cm4gW10gfVxuXG5wcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5cbnByb2Nlc3MuY3dkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJy8nIH07XG5wcm9jZXNzLmNoZGlyID0gZnVuY3Rpb24gKGRpcikge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xucHJvY2Vzcy51bWFzayA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gMDsgfTtcbiIsIihmdW5jdGlvbihnbG9iYWwsIGZhY3RvcnkpIHtcbiAgaWYgKHR5cGVvZiBkZWZpbmUgPT09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kKSB7XG4gICAgcmV0dXJuIGRlZmluZShmYWN0b3J5KTtcbiAgfSBlbHNlIHtcbiAgICBpZiAodHlwZW9mIGdsb2JhbC5iYmNzc2MgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIGdsb2JhbC5iYmNzc2MgPSB7fTtcbiAgICB9XG4gICAgZ2xvYmFsLmJiY3NzYy5TU0NIZWxwZXIgPSBmYWN0b3J5KCk7XG4gIH1cbn0odGhpcywgZnVuY3Rpb24oKSB7XG5cbiAgdmFyIHNzY1BlcmZvcm1hbmNlQ29va2llTmFtZTtcbiAgdmFyIHNzY05lY2Vzc2FyeUNvb2tpZU5hbWU7XG4gIHZhciBzMUNvb2tpZU5hbWU7XG4gIHZhciB1aWRQZXJmb3JtYW5jZUNvb2tpZU5hbWU7XG4gIHZhciB1aWROZWNlc3NhcnlDb29raWVOYW1lO1xuICB2YXIgc3NjQ29Va0hvc3RuYW1lO1xuICB2YXIgc3NjQ29tSG9zdG5hbWU7XG4gIHZhciBzY29yZWNhcmRyZXNlYXJjaEh0dHBIb3N0bmFtZTtcbiAgdmFyIHNjb3JlY2FyZHJlc2VhcmNoSHR0cHNIb3N0bmFtZTtcblxuICBzc2NQZXJmb3JtYW5jZUNvb2tpZU5hbWUgPSBcImNrcGZfc3NjaWRcIjtcbiAgc3NjTmVjZXNzYXJ5Q29va2llTmFtZSA9IFwiY2tuc19zc2NpZFwiO1xuICBzMUNvb2tpZU5hbWUgPSBcInMxXCI7XG4gIHVpZFBlcmZvcm1hbmNlQ29va2llTmFtZSA9IFwiY2twZl91aWRcIjtcbiAgdWlkTmVjZXNzYXJ5Q29va2llTmFtZSA9IFwiY2tuc191aWRcIjtcbiAgc3NjQ29Va0hvc3RuYW1lID0gXCJzc2MuYXBpLmJiYy5jby51a1wiO1xuICBzc2NDb21Ib3N0bmFtZSA9IFwic3NjLmFwaS5iYmMuY29tXCI7XG4gIHNjb3JlY2FyZHJlc2VhcmNoSHR0cEhvc3RuYW1lID0gXCJiLnNjb3JlY2FyZHJlc2VhcmNoLmNvbVwiO1xuICBzY29yZWNhcmRyZXNlYXJjaEh0dHBzSG9zdG5hbWUgPSBcInNiLnNjb3JlY2FyZHJlc2VhcmNoLmNvbVwiO1xuXG4gIC8qKlxuICAgKiBAY29uc3RydWN0b3JcbiAgICovXG4gIGZ1bmN0aW9uIFNTQ0hlbHBlcihvcHRpb25zKSB7IFxuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgIHRoaXMuYWx3YXlzVXNlSHR0cHMgPSB0cnVlID09PSBvcHRpb25zLmFsd2F5c1VzZUh0dHBzIHx8IGZhbHNlO1xuICAgIHRoaXMuZm9yY2VCQkNIb3N0ID0gZmFsc2U7XG4gICAgdGhpcy5fc3NjQ29va2llSWQgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fczFDb29raWVJZCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLl91aWRDb29raWVJZCA9IHVuZGVmaW5lZDtcbiAgICBpZiAoXCIuY28udWtcIiA9PT0gb3B0aW9ucy5mb3JjZUJCQ0hvc3QpIHtcbiAgICAgIHRoaXMuZm9yY2VCQkNIb3N0ID0gXCIuY28udWtcIjtcbiAgICB9IGVsc2UgaWYgKFwiLmNvbVwiID09PSBvcHRpb25zLmZvcmNlQkJDSG9zdCkge1xuICAgICAgdGhpcy5mb3JjZUJCQ0hvc3QgPSBcIi5jb21cIjtcbiAgICB9XG4gIH1cblxuICAgLyoqXG4gICAgKiBHZXQgYSBjb29raWUgdmFsdWUgYnkga2V5XG4gICAgKlxuICAgICogQHBhcmFtIHtTdHJpbmd9IGtleVxuICAgICpcbiAgICAqIEByZXR1cm4geyp9XG4gICAgKi9cbiAgU1NDSGVscGVyLnByb3RvdHlwZS5nZXRDb29raWUgPSBmdW5jdGlvbihrZXkpIHtcbiAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KFxuICAgICAgZG9jdW1lbnQuY29va2llLnJlcGxhY2UoXG4gICAgICAgIG5ldyBSZWdFeHAoXG4gICAgICAgICAgXCIoPzooPzpefC4qOylcXFxccypcIiArXG4gICAgICAgICAgZW5jb2RlVVJJQ29tcG9uZW50KGtleSkucmVwbGFjZSgvW1xcLVxcLlxcK1xcKl0vZywgXCJcXFxcJCZcIikgK1xuICAgICAgICAgIFwiXFxcXHMqXFxcXD1cXFxccyooW147XSopLiokKXxeLiokXCJcbiAgICAgICAgKSxcbiAgICAgICAgXCIkMVwiXG4gICAgICApXG4gICAgKSB8fCBudWxsO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSB3aW5kb3cgbG9jYXRpb24uIFxuICAgKlxuICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgKi9cbiAgU1NDSGVscGVyLnByb3RvdHlwZS5nZXRMb2NhdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB3aW5kb3cubG9jYXRpb247XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIG1vc3QgcHJlY2VkZW50IElELlxuICAgKiBNYXkgYmUgb25lIG9mIGNrcGZfc3NjaWQgb3IgczEgZGVwZW5kaW5nIG9uIGNvbmZpZ3VyYXRpb24uXG4gICAqXG4gICAqIEByZXR1cm4ge1N0cmluZ3xudWxsfVxuICAgKi9cbiAgU1NDSGVscGVyLnByb3RvdHlwZS5nZXRDb29raWVJZCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBpZDtcbiAgICB2YXIgc3NjSG9zdG5hbWU7XG4gICAgdmFyIGxvY2F0aW9uO1xuICAgIHZhciBpc0NvVUtTU0NIb3N0bmFtZUFuZFBhZ2U7XG4gICAgdmFyIGlzQ29tU1NDSG9zdG5hbWVBbmRQYWdlO1xuXG4gICAgc3NjSG9zdG5hbWUgPSB0aGlzLmdldFNTQ0hvc3RuYW1lKCk7XG4gICAgbG9jYXRpb24gPSB0aGlzLmdldExvY2F0aW9uKCk7XG5cbiAgICAvKipcbiAgICAgKiBFbnN1cmUgdGhhdCB0aGUgcGFnZSBob3N0bmFtZSBpcyBpbiB0aGUgc2FtZSBzY29wZSBhcyB0aGUgY29va2llIHNlcnZlci5cbiAgICAgKiBXZSBkbyBub3Qgd2FudCB0byB1c2UgdGhlIC5jby51ayBwYWdlIGNvb2tpZSBpZiByZXBvcnRpbmcgdG8gdGhlIC5jb20gXG4gICAgICogU1NDIHNlcnZlci5cbiAgICAgKi9cbiAgICBpc0NvVUtTU0NIb3N0bmFtZUFuZFBhZ2UgPSBzc2NIb3N0bmFtZSA9PT0gc3NjQ29Va0hvc3RuYW1lICYmIC0xICE9PSBsb2NhdGlvbi5ob3N0bmFtZS5zZWFyY2goL2JiYy5jby51ayQvKTtcbiAgICBpc0NvbVNTQ0hvc3RuYW1lQW5kUGFnZSA9IHNzY0hvc3RuYW1lID09PSBzc2NDb21Ib3N0bmFtZSAmJiAtMSAhPT0gbG9jYXRpb24uaG9zdG5hbWUuc2VhcmNoKC9iYmMuY29tJC8pO1xuICAgIGlmIChpc0NvVUtTU0NIb3N0bmFtZUFuZFBhZ2UgfHwgaXNDb21TU0NIb3N0bmFtZUFuZFBhZ2UpIHtcbiAgICAgIGlkID0gdGhpcy5nZXRTU0NDb29raWVJZCgpO1xuICAgICAgaWYgKG51bGwgPT09IGlkIHx8IHVuZGVmaW5lZCA9PT0gaWQpIHtcbiAgICAgICAgaWYgKGlzQ29VS1NTQ0hvc3RuYW1lQW5kUGFnZSkge1xuICAgICAgICAgIGlkID0gdGhpcy5nZXRTMUNvb2tpZUlkKCk7XG4gICAgICAgIH0gZWxzZSBpZiAoaXNDb21TU0NIb3N0bmFtZUFuZFBhZ2UpIHtcbiAgICAgICAgICBpZCA9IHRoaXMuZ2V0VWlkQ29va2llSWQoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBpZDtcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgczEgY29va2llIElEXG4gICAqXG4gICAqIEByZXR1cm4ge1N0cmluZ3xudWxsfVxuICAgKi9cbiAgU1NDSGVscGVyLnByb3RvdHlwZS5nZXRTMUNvb2tpZUlkID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGNvb2tpZUlkO1xuICAgIGlmICh1bmRlZmluZWQgPT09IHRoaXMuX3MxQ29va2llVmFsdWUpIHtcbiAgICAgIC8vIHJldHVybnMgYSBzdHJpbmcgb3IgbnVsbFxuICAgICAgdGhpcy5fczFDb29raWVWYWx1ZSA9IHRoaXMuZ2V0Q29va2llKHMxQ29va2llTmFtZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX3MxQ29va2llVmFsdWU7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGNrcGZfdWlkIGNvb2tpZSBJRFxuICAgKlxuICAgKiBAcmV0dXJuIHtTdHJpbmd8bnVsbH1cbiAgICovXG4gIFNTQ0hlbHBlci5wcm90b3R5cGUuZ2V0VWlkQ29va2llSWQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgY29va2llSWQ7XG4gICAgaWYgKHVuZGVmaW5lZCA9PT0gdGhpcy5fdWlkQ29va2llVmFsdWUpIHtcbiAgICAgIC8vIHJldHVybnMgYSBzdHJpbmcgZnJvbSB0aGUgbmVjZXNzYXJ5IGNvb2tpZSBvciBudWxsXG4gICAgICB0aGlzLl91aWRDb29raWVWYWx1ZSA9IHRoaXMuZ2V0Q29va2llKHVpZE5lY2Vzc2FyeUNvb2tpZU5hbWUpO1xuICAgICAgaWYgKHRoaXMuX3VpZENvb2tpZVZhbHVlID09PSBudWxsKSB7XG4gICAgICAgIC8vIHJldHVybnMgYSBzdHJpbmcgZnJvbSB0aGUgcGVyZm9ybWFuY2UgY29va2llIG9yIG51bGxcbiAgICAgICAgdGhpcy5fdWlkQ29va2llVmFsdWUgPSB0aGlzLmdldENvb2tpZSh1aWRQZXJmb3JtYW5jZUNvb2tpZU5hbWUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzLl91aWRDb29raWVWYWx1ZTtcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgU1NDIGNvb2tpZSBJRFxuICAgKlxuICAgKiBAcmV0dXJuIHtTdHJpbmd8bnVsbH1cbiAgICovXG4gIFNTQ0hlbHBlci5wcm90b3R5cGUuZ2V0U1NDQ29va2llSWQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgY29va2llSWQ7XG4gICAgLyoqXG4gICAgICogVGhpcyBsb2dpYyBwcmV2ZW50IHRoZSBjb29raWUgdmFsdWUgYmVpbmcgY2hlY2tlZCBtb3JlIHRoYW4gXG4gICAgICogb25jZSBwZXIgaW5zdGFuY2UuIE9uIGEgdXNlcnMgZmlyc3QgcGFnZSBpbXByZXNzaW9uIGl0IFxuICAgICAqIG1heSBiZSBkZXNpcmFibGUgdG8gY2hlY2sgPiAxIHRpbWUgYXMgdGhlIGNvb2tpZSBtYXkgYmUgc2V0IFxuICAgICAqIG9uIHRoZSBzZWNvbmQgY2hlY2sgaW4gd2hpY2ggY2FzZSB3ZSBjb3VsZCByZXBvcnQgZGlyZWN0bHlcbiAgICAgKiB0byBzY29yZWNhcmRyZXNlYXJjaC5jb20gYXZvaWRpbmcgYSByZWRpcmVjdC5cbiAgICAgKi9cbiAgICBpZiAodW5kZWZpbmVkID09PSB0aGlzLl9zc2NDb29raWVWYWx1ZSkge1xuICAgICAgLy8gcmV0dXJucyBhIHN0cmluZyBmcm9tIHRoZSBuZWNlc3NhcnkgY29va2llIG9yIG51bGxcbiAgICAgIHRoaXMuX3NzY0Nvb2tpZVZhbHVlID0gdGhpcy5nZXRDb29raWUoc3NjTmVjZXNzYXJ5Q29va2llTmFtZSk7XG4gICAgICBpZiAodGhpcy5fc3NjQ29va2llVmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgLy8gcmV0dXJucyBhIHN0cmluZyBmcm9tIHRoZSBwZXJmb3JtYW5jZSBjb29raWUgb3IgbnVsbFxuICAgICAgICB0aGlzLl9zc2NDb29raWVWYWx1ZSA9IHRoaXMuZ2V0Q29va2llKHNzY1BlcmZvcm1hbmNlQ29va2llTmFtZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX3NzY0Nvb2tpZVZhbHVlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAdG9kbyB0ZXN0IHRoaXNcbiAgICpcbiAgICogVmFsaWRhdGUgdGhhdCBhIHN0cmluZyBpcyBhIHZhbGlkIElkLiBBbiBJRCBtYXkgYmVcbiAgICogLSBhIGxlZ2FjeSBTMSBjb29raWUgZWcgNjEuMTYyLjE1NjU0MkExNjAwQzU5MjAxRDU4REUzMjk4NVxuICAgKiAtIGEgUkNGIDQxMjIgdjQgVVVJRCBlZyBjYzZiMDJjMy0zMTNlLTQyOGItYTc2MC0xYjQ4MmY1ODk5ZDdcbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGlkIHRoZSB2YWx1ZSB0byB0ZXN0XG4gICAqXG4gICAqIEByZXR1cm4gQm9vbGVhbiBpcyB0aGUgdmFsdWUgdmFsaWRcbiAgICovXG4gIFNTQ0hlbHBlci5wcm90b3R5cGUuaXNWYWxpZElkID0gZnVuY3Rpb24oaWQpIHtcbiAgICB2YXIgbWF0Y2hlcztcbiAgICB2YXIgaXNWYWxpZDtcbiAgICBpc1ZhbGlkID0gZmFsc2U7XG4gICAgLyoqXG4gICAgICogY29tc2NvcmUgbGFiZWxzIGNhbiBjb250YWluIGFueSBjaGFyYWN0ZXIgZXhjbHVkaW5nIDwgYW5kID5cbiAgICAgKiB0aGUgcmVnZXggbWF0Y2hlcyBhbnkgc3RyaW5nIHRoYXQgZG9lcyBub3QgY29udGFpbiBhIDwsID4gb3Igc3BhY2VcbiAgICAgKi9cbiAgICBpZiAoXCJzdHJpbmdcIiA9PT0gdHlwZW9mIGlkICYmIC0xICE9PSBpZC5zZWFyY2goL15bXig/ITw+XFxzKV0rJC8pKSB7XG4gICAgICBpc1ZhbGlkID0gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGlzVmFsaWQ7XG4gIH07ICBcblxuICAvKipcbiAgICogUmV0dXJucyBhbiBvYmplY3QgZGVzY3JpYmluZyB0aGUgYW5hbHl0aWNzIHJlcXVlc3QgbG9jYXRpb25cbiAgICpcbiAgICogQHBhcmFtICB7U3RyaW5nfSBzZWFyY2ggQW4gb3B0aW9uYWwgcXVlcnkgc3RyaW5nXG4gICAqIEBwYXJhbSAge1N0cmluZ30gaWQgT3B0aW9uYWwgSUQgdG8gdXNlIGZvciBuc19hbGlhc1xuICAgKlxuICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgKi9cbiAgU1NDSGVscGVyLnByb3RvdHlwZS5nZXRBbmFseXRpY3NMb2NhdGlvbiA9IGZ1bmN0aW9uKHNlYXJjaCwgaWQpIHtcbiAgICB2YXIgcmVzdWx0O1xuICAgIHZhciBsb2NhdGlvbjtcbiAgICB2YXIgdXNlQkJDRG90Q29tSG9zdDtcbiAgICB2YXIgc3NjSG9zdG5hbWU7XG4gICAgdmFyIGlzQ29VS1NTQ0hvc3RuYW1lQW5kUGFnZTtcbiAgICB2YXIgcXVlcnlTdHJpbmdQb3NpdGlvbjtcbiAgICB2YXIgc2VhcmNoQ29udGFpbnNOc0FsaWFzUGFyYW1ldGVyO1xuICAgIHZhciBpc1ZhbGlkSWQ7XG4gICAgc3NjSG9zdG5hbWUgPSB0aGlzLmdldFNTQ0hvc3RuYW1lKCk7XG4gICAgbG9jYXRpb24gPSB0aGlzLmdldExvY2F0aW9uKCk7XG5cbiAgICByZXN1bHQgPSB7XG4gICAgICBzc2NJZDogdW5kZWZpbmVkXG4gICAgfTtcblxuICAgIGlmIChcInN0cmluZ1wiICE9PSB0eXBlb2Ygc2VhcmNoKSB7XG4gICAgICBzZWFyY2ggPSBcIlwiO1xuICAgIH1cblxuICAgIGlmICh1bmRlZmluZWQgPT09IGlkIHx8IGZhbHNlID09PSB0aGlzLmlzVmFsaWRJZChpZCkpIHtcbiAgICAgIGlkID0gdGhpcy5nZXRDb29raWVJZCgpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmFsd2F5c1VzZUh0dHBzIHx8IGxvY2F0aW9uLnByb3RvY29sID09PSBcImh0dHBzOlwiKSB7XG4gICAgICByZXN1bHQucHJvdG9jb2wgPSBcImh0dHBzOlwiO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXN1bHQucHJvdG9jb2wgPSBcImh0dHA6XCI7XG4gICAgfVxuXG4gICAgc2VhcmNoQ29udGFpbnNOc0FsaWFzUGFyYW1ldGVyID0gLTEgIT09IHNlYXJjaC5zZWFyY2goL25zX2FsaWFzPS8pO1xuICAgIGlzVmFsaWRJZCA9IHRoaXMuaXNWYWxpZElkKGlkKTtcbiAgICBpZiAoc2VhcmNoQ29udGFpbnNOc0FsaWFzUGFyYW1ldGVyIHx8IGlzVmFsaWRJZCkge1xuICAgICAgcmVzdWx0Lmhvc3RuYW1lID0gdGhpcy5nZXRTY29yZWNhcmRyZXNlYXJjaEhvc3RuYW1lKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc3VsdC5ob3N0bmFtZSA9IHRoaXMuZ2V0U1NDSG9zdG5hbWUoKTtcbiAgICB9XG5cbiAgICBpZiAoaXNWYWxpZElkKSB7XG4gICAgICBpZiAoc2VhcmNoID09PSBcIlwiKSB7XG4gICAgICAgIHNlYXJjaCA9IFwiP25zX2FsaWFzPVwiICsgaWQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvKipcbiAgICAgICAgICogV2UgYWx3YXlzIGluc2VydCBuc19hbGlhcyBhdCB0aGUgc3RhcnQgb2YgdGhlIHF1ZXJ5IHN0cmluZyBcbiAgICAgICAgICogYmVmb3JlIGFuZCBvdGhlciBsYWJlbHMuXG4gICAgICAgICAqL1xuICAgICAgICBxdWVyeVN0cmluZ1Bvc2l0aW9uID0gc2VhcmNoLnNlYXJjaCgvXFw/LykgKyAxO1xuICAgICAgICBzZWFyY2ggPSBbXG4gICAgICAgICAgc2VhcmNoLnNsaWNlKDAsIHF1ZXJ5U3RyaW5nUG9zaXRpb24pLCBcbiAgICAgICAgICBcIm5zX2FsaWFzPVwiICsgaWQgKyBcIiZcIiwgXG4gICAgICAgICAgc2VhcmNoLnNsaWNlKHF1ZXJ5U3RyaW5nUG9zaXRpb24pXG4gICAgICAgIF0uam9pbihcIlwiKTtcbiAgICAgIH1cbiAgICAgIHJlc3VsdC5zc2NJZCA9IGlkO1xuICAgIH1cbiAgICByZXN1bHQuc2VhcmNoID0gc2VhcmNoO1xuXG4gICAgaWYgKC0xICE9PSByZXN1bHQuaG9zdG5hbWUuc2VhcmNoKC9zY29yZWNhcmRyZXNlYXJjaC5jb20kLykpIHtcbiAgICAgIHJlc3VsdC5wYXRobmFtZSA9IFwiL3BcIjsgIFxuICAgIH0gZWxzZSB7XG4gICAgICByZXN1bHQucGF0aG5hbWUgPSBcIi9cIjsgIFxuICAgIH1cblxuICAgIHJlc3VsdC5ocmVmID0gcmVzdWx0LnByb3RvY29sICsgXCIvL1wiICsgcmVzdWx0Lmhvc3RuYW1lICsgcmVzdWx0LnBhdGhuYW1lICsgcmVzdWx0LnNlYXJjaDtcblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGFwcHJvcHJpYXRlIFNTQyBzZXJ2ZXIgaG9zdG5hbWUuXG4gICAqXG4gICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAqL1xuICBTU0NIZWxwZXIucHJvdG90eXBlLmdldFNTQ0hvc3RuYW1lID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGhvc3RuYW1lO1xuICAgIHZhciBsb2NhdGlvbjtcbiAgICBsb2NhdGlvbiA9IHRoaXMuZ2V0TG9jYXRpb24oKTtcblxuICAgIGlmIChcbiAgICAgIHRoaXMuZm9yY2VCQkNIb3N0ICE9PSBcIi5jb21cIiAmJlxuICAgICAgKFxuICAgICAgICB0aGlzLmZvcmNlQkJDSG9zdCA9PT0gXCIuY28udWtcIiB8fCAtMSAhPT0gbG9jYXRpb24uaG9zdG5hbWUuc2VhcmNoKC9iYmNcXC5jb1xcLnVrJC8pXG4gICAgICApXG4gICAgKSB7XG4gICAgICBob3N0bmFtZSA9IHNzY0NvVWtIb3N0bmFtZTtcbiAgICB9IGVsc2Uge1xuICAgICAgaG9zdG5hbWUgPSBzc2NDb21Ib3N0bmFtZTtcbiAgICB9XG5cbiAgICByZXR1cm4gaG9zdG5hbWU7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGFwcHJvcHJpYXRlIHNjb3JlY2FyZHJlc2VhcmNoIHNlcnZlciBob3N0bmFtZS5cbiAgICpcbiAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICovXG4gIFNTQ0hlbHBlci5wcm90b3R5cGUuZ2V0U2NvcmVjYXJkcmVzZWFyY2hIb3N0bmFtZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBob3N0bmFtZTtcbiAgICB2YXIgbG9jYXRpb247XG4gICAgbG9jYXRpb24gPSB0aGlzLmdldExvY2F0aW9uKCk7XG5cbiAgICBpZiAobG9jYXRpb24ucHJvdG9jb2wgPT09IFwiaHR0cHM6XCIpIHtcbiAgICAgIGhvc3RuYW1lID0gc2NvcmVjYXJkcmVzZWFyY2hIdHRwc0hvc3RuYW1lO1xuICAgIH0gZWxzZSB7XG4gICAgICBob3N0bmFtZSA9IHNjb3JlY2FyZHJlc2VhcmNoSHR0cEhvc3RuYW1lO1xuICAgIH1cblxuICAgIHJldHVybiBob3N0bmFtZTtcbiAgfTtcblxuICByZXR1cm4gU1NDSGVscGVyO1xuXG59KSk7XG4iLCJ2YXIgZztcblxuLy8gVGhpcyB3b3JrcyBpbiBub24tc3RyaWN0IG1vZGVcbmcgPSAoZnVuY3Rpb24oKSB7XG5cdHJldHVybiB0aGlzO1xufSkoKTtcblxudHJ5IHtcblx0Ly8gVGhpcyB3b3JrcyBpZiBldmFsIGlzIGFsbG93ZWQgKHNlZSBDU1ApXG5cdGcgPSBnIHx8IG5ldyBGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCk7XG59IGNhdGNoIChlKSB7XG5cdC8vIFRoaXMgd29ya3MgaWYgdGhlIHdpbmRvdyByZWZlcmVuY2UgaXMgYXZhaWxhYmxlXG5cdGlmICh0eXBlb2Ygd2luZG93ID09PSBcIm9iamVjdFwiKSBnID0gd2luZG93O1xufVxuXG4vLyBnIGNhbiBzdGlsbCBiZSB1bmRlZmluZWQsIGJ1dCBub3RoaW5nIHRvIGRvIGFib3V0IGl0Li4uXG4vLyBXZSByZXR1cm4gdW5kZWZpbmVkLCBpbnN0ZWFkIG9mIG5vdGhpbmcgaGVyZSwgc28gaXQnc1xuLy8gZWFzaWVyIHRvIGhhbmRsZSB0aGlzIGNhc2UuIGlmKCFnbG9iYWwpIHsgLi4ufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGc7XG4iLCJkZWZpbmUoWycuL2VjaG8vYm9vdHN0cmFwJ10sIGZ1bmN0aW9uKGJvb3RzdHJhcCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGlmICh3aW5kb3cgJiYgd2luZG93LmJiY2Nvb2tpZXMpIHtcbiAgICAgIGJvb3RzdHJhcC5FbnZpcm9ubWVudC5zZXRPcmJDb29raWVzKHdpbmRvdy5iYmNjb29raWVzKTtcbiAgICB9XG5cbiAgICByZXR1cm4gYm9vdHN0cmFwO1xuICB9XG4pO1xuIiwiZGVmaW5lKGZ1bmN0aW9uKHJlcXVpcmUpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIC8qKlxuICAgKiBFeHBvcnRzIHRoZSBFY2hvQ2xpZW50IGNsYXNzLCB1c2VkIGZvciBzZW5kaW5nIHVzYWdlIGV2ZW50c1xuICAgKiBAZXhwb3J0cyBFY2hvXG4gICAqIEBhdXRob3IgSmFtZXMgU2tpbm5lciA8amFtZXMuc2tpbm5lcjFAYmJjLmNvLnVrPlxuICAgKiBAZXhhbXBsZVxuICByZXF1aXJlKFsnZWNobyddLGZ1bmN0aW9uKEVjaG8pe1xuICAgIHZhciBNZWRpYSA9IEVjaG8uTWVkaWEsICAgICAgICAgICAgIC8vIE1lZGlhIGNsYXNzXG4gICAgICBFY2hvQ2xpZW50ID0gRWNoby5FY2hvQ2xpZW50LCAgIC8vIEVjaG8gQ2xpZW50IGNsYXNzXG4gICAgICBFbnVtcyA9IEVjaG8uRW51bXMsICAgICAgICAgICAgIC8vIEVudW1zXG4gICAgICBDb25maWdLZXlzID0gRWNoby5Db25maWdLZXlzLCAgIC8vIEtleSBuYW1lcyB0byB1c2UgaW4gY29uZmlnXG4gICAgICBFbnZpcm9ubWVudCA9IEVjaG8uRW52aXJvbm1lbnQ7XG5cbiAgICAvLyAqKiBFbmFibGUgRGVidWcgbW9kZSAoZm9yIHRlc3RpbmcpXG4gICAgRWNoby5EZWJ1Zy5lbmFibGUoKTtcbiAgfSk7XG5cbiAqL1xuICB2YXIgbWV0YSA9IHJlcXVpcmUoJy4vbWV0YScpO1xuXG4gIHZhciBFbnZpcm9ubWVudCA9IHJlcXVpcmUoJy4vZW52aXJvbm1lbnQnKTtcblxuICB2YXIgZXhwb3J0cyA9IHtcbiAgICAvKiogRWNob0NsaWVudCBjbGFzcyAqL1xuICAgIEVjaG9DbGllbnQ6IHJlcXVpcmUoJy4vY2xpZW50JyksXG4gICAgLyoqIE1lZGlhIGNsYXNzICovXG4gICAgTWVkaWE6IHJlcXVpcmUoJy4vbWVkaWEnKSxcbiAgICAvKiogTWVkaWEgSWQgY2xhc3MgKi9cbiAgICBNZWRpYUlkOiByZXF1aXJlKCcuL21lZGlhLWlkJyksXG4gICAgLyoqIEVudmlyb25tZW50IGNsYXNzICovXG4gICAgRW52aXJvbm1lbnQ6IEVudmlyb25tZW50LFxuICAgIC8qKiBFbnVtZXJhdGlvbnMgKi9cbiAgICBFbnVtczogcmVxdWlyZSgnLi9lbnVtZXJhdGlvbnMnKSxcbiAgICAvKiogS2V5cyB0byB1c2UgaW4gY29uZmlnIGZvciBFY2hvQ2xpZW50ICovXG4gICAgQ29uZmlnS2V5czogcmVxdWlyZSgnLi9jb25maWcva2V5cycpLFxuICAgIC8qKiBVc2VkIHRvIHR1cm4gZGVidWdnaW5nIG9uICovXG4gICAgRGVidWc6IHJlcXVpcmUoJy4vdXRpbC9kZWJ1ZycpLFxuXG4gICAgZ2V0SW1wbGVtZW50YXRpb25WZXJzaW9uOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBtZXRhLlZFUlNJT047XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBleHBvcnRzO1xufSk7XG4iLCIvKipcbiAqIEV4cG9ydHMgdGhlIEVjaG9DbGllbnQgY2xhc3MsIHVzZWQgZm9yIHNlbmRpbmcgdXNhZ2UgZXZlbnRzXG4gKiBAZXhwb3J0cyBFY2hvL0VjaG9DbGllbnRcbiAqL1xuZGVmaW5lKGZ1bmN0aW9uIChyZXF1aXJlKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICB2YXIgREVCVUcgPSByZXF1aXJlKCcuL3V0aWwvZGVidWcnKTtcbiAgdmFyIFV0aWwgPSByZXF1aXJlKCcuL3V0aWwvbWV0aG9kcycpO1xuXG4gIC8vIHNvbWUgY29uZGl0aW9ucyB0aGF0IGFyZSBpbGxlZ2FsIGZyb20gZWNobydzIHZpZXdwb2ludCAoZS5nLiBzZWVrIGFmdGVyIGVuZCBldmVudClcbiAgLy8gYXJlIGNvbnNpZGVyZWVkIGxlZ2FsIGZyb20gdGhlIHBsYXllcidzIHZpZXdwb2ludFxuICAvLyBzZXR0aW5nIHRoZSBmbGFnIHRvIGZhbHNlIHdpbGwgdGhyb3cgYW4gZXJyb3IgaW5zdGVhZCBvZiBsb2dnaW5nIGZvciB0aGVzZSBjYXNlc1xuICAvLyBodHRwczovL2ppcmEuZGV2LmJiYy5jby51ay9icm93c2UvTVlTVEFUUy0yODYzXG4gIHZhciBGYWlsU2lsZW50bHkgPSB0cnVlO1xuXG4gIHZhciBDb25maWdLZXlzID0gcmVxdWlyZSgnLi9jb25maWcva2V5cycpO1xuICB2YXIgRGVzdGluYXRpb25zID0gcmVxdWlyZSgnLi9jb25maWcvZGVzdGluYXRpb25zJyk7XG4gIHZhciBQcm9kdWNlcnMgPSByZXF1aXJlKCcuL2NvbmZpZy9wcm9kdWNlcnMnKTtcbiAgdmFyIEVudW1zID0gcmVxdWlyZSgnLi9lbnVtZXJhdGlvbnMnKTtcbiAgdmFyIExpdmVCcm9rZXIgPSByZXF1aXJlKCcuL2xpdmUtYnJva2VyJyk7XG4gIHZhciBPbkRlbWFuZEJyb2tlciA9IHJlcXVpcmUoJy4vb24tZGVtYW5kLWJyb2tlcicpO1xuICB2YXIgQ1NLZXlzID0gcmVxdWlyZSgnLi9kZWxlZ2F0ZS9jb21zY29yZS9sYWJlbC1rZXlzJyk7XG4gIHZhciBTY2hlZHVsZSA9IHJlcXVpcmUoJy4vc2NoZWR1bGUnKTtcbiAgdmFyIENvb2tpZUhlbHBlciA9IHJlcXVpcmUoJy4vdXRpbC9jb29raWVzJyk7XG5cbiAgdmFyIHNhSG9zdG5hbWUgPSAnc2EuYmJjLmNvLnVrJztcbiAgdmFyIG9sZEVjaG9EZXZpY2VJZENvb2tpZU5hbWUgPSAnY2twZl9lY2hvX2RldmljZV9pZCc7XG4gIHZhciBlY2hvRGV2aWNlSWRDb29raWVOYW1lID0gJ2NrbnNfZWNob19kZXZpY2VfaWQnO1xuXG4gIHZhciBPcmJpdFZhcmlhYmxlcyA9IHJlcXVpcmUoJy4vZGVsZWdhdGUvYXRpL29yYml0LXZhcmlhYmxlcycpO1xuICB2YXIgUHJvbWlzZSA9IHJlcXVpcmUoJ2VzNi1wcm9taXNlJykuUHJvbWlzZTtcblxuICAvKipcbiAgICogSW5pdGlhbGlzZSBhbiBFY2hvQ2xpZW50IG9iamVjdFxuICAgKiBAY29uc3RydWN0b3JcbiAgICogQHBhcmFtIHtzdHJpbmd9IGFwcE5hbWUgQXBwbGljYXRpb24gTmFtZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gYXBwVHlwZSBBcHBsaWNhdGlvbiBUeXBlIChvbmUgb2YgRW51bXMuQXBsaWNhdGlvblR5cGUpXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBbY29uZmlnXSBjb25maWcga2V5LXZhbHVlIHBhaXJzIHRvIG92ZXJyaWRlIGRlZmF1bHQgY29uZmlnXG4gICAqIEBwYXJhbSB7RW52aXJvbm1lbnR9IFtlbnZdIEVudmlyb25tZW50IGluc3RhbmNlXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIHZhciBlY2hvID0gbmV3IEVjaG9DbGllbnQoJ015QXBwJyxBcHBsaWNhdGlvblR5cGUuV0VCLFwiYWJjZGVmZmVkY2JhXCIpO1xuICAgKi9cbiAgZnVuY3Rpb24gRWNob0NsaWVudChhcHBOYW1lLCBhcHBUeXBlLCBjb25maWcsIGVudiwgY2FsbGJhY2spIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICBjb25maWcgPSBjb25maWcgfHwge307XG5cbiAgICBVdGlsLmFzc2VydENvbnRhaW5zVmFsdWUoRW51bXMuQXBwbGljYXRpb25UeXBlLCBhcHBUeXBlLFxuICAgICAgJ2FwcFR5cGUgc2hvdWxkIGJlIG9uZSBvZiBFbnVtcy5BcHBsaWNhdGlvblR5cGUsIGdvdCBcIicgK1xuICAgICAgYXBwVHlwZSArICdcIicpO1xuXG4gICAgLy8gQ3JlYXRlIHNwYWNlIHRvIGhvbGQgc3RhdGUgZm9yIHRoZSBBcHBsaWNhdGlvblxuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBjb3VudGVyTmFtZVNldDogZmFsc2VcbiAgICB9O1xuXG4gICAgdmFyIGMgPSBFY2hvQ2xpZW50LkNvbmZpZ0dlbmVyYXRvci5nZW5lcmF0ZShjb25maWcpO1xuXG4gICAgdGhpcy5fZW52ID0gZW52ICE9PSB1bmRlZmluZWQgPyBlbnYgOiBuZXcgRWNob0NsaWVudC5FbnZpcm9ubWVudCgpO1xuXG4gICAgLy8gc2V0IGRldmljZWlkIGFuZCBjbGVhbiBvZiBhbnkgd2hpdGVzcGFjZVxuICAgIHZhciBkZXZpY2VJZDtcbiAgICBpZiAoYyAmJiB0eXBlb2YgY1tDb25maWdLZXlzLkVDSE9fREVWSUNFX0lEXSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGRldmljZUlkID0gVXRpbC50cmltKGNbQ29uZmlnS2V5cy5FQ0hPX0RFVklDRV9JRF0pO1xuICAgICAgaWYgKGRldmljZUlkLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY1tDb25maWdLZXlzLkVDSE9fREVWSUNFX0lEXSA9IGRldmljZUlkO1xuICAgICAgICB0aGlzLl9kZXZpY2VJZCAgPSBkZXZpY2VJZDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNbQ29uZmlnS2V5cy5FQ0hPX0RFVklDRV9JRF0gPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gaWYgcmVwb3J0aW5nIHNhLmJiYy5jby51ayBhbmQgdGhlIGNrcGZfZWNob19kZXZpY2VfaWQgY29va2llIGlzIHByZXNlbnRcbiAgICAvLyB1c2UgaXQgYXMgdGhlIGRldmljZSBJRCB0byBvdmVycmlkZSB0aGUgczEgY29va2llLiBTZWUgTVlTVEFUUy0yNjg0XG4gICAgaWYgKGMgJiYgY1tDb25maWdLZXlzLkNPTVNDT1JFX0hPU1RdID09PSBzYUhvc3RuYW1lICYmICFjW0NvbmZpZ0tleXMuRUNIT19ERVZJQ0VfSURdKSB7XG4gICAgICBkZXZpY2VJZCA9IENvb2tpZUhlbHBlci5nZXRDb29raWVWYWx1ZUJ5TmFtZShlY2hvRGV2aWNlSWRDb29raWVOYW1lKTtcbiAgICAgIGlmICghZGV2aWNlSWQpIHtcbiAgICAgICAgZGV2aWNlSWQgPSBDb29raWVIZWxwZXIuZ2V0Q29va2llVmFsdWVCeU5hbWUob2xkRWNob0RldmljZUlkQ29va2llTmFtZSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChkZXZpY2VJZCkge1xuICAgICAgICB0aGlzLl9kZXZpY2VJZCA9IGRldmljZUlkO1xuICAgICAgICBjW0NvbmZpZ0tleXMuRUNIT19ERVZJQ0VfSURdID0gZGV2aWNlSWQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGMgJiYgY1tDb25maWdLZXlzLkVDSE9fQVVUT19TVEFSVF0gPT09IGZhbHNlKSB7XG4gICAgICB0aGlzLl9hdXRvU3RhcnQgPSBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fYXV0b1N0YXJ0ID0gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyBDcmVhdGUgc2V0IG9mICdjb25zdW1lcnMnXG4gICAgdGhpcy5fc2V0Q29uc3VtZXJzKGFwcE5hbWUsIGFwcFR5cGUsIGMsIHRoaXMuX2Vudik7XG5cbiAgICBpZiAoYyAmJiBjW0NvbmZpZ0tleXMuVVNFX0VTU10pIHtcbiAgICAgIHRoaXMuX2Vzc0VuYWJsZWQgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9lc3NFbmFibGVkID0gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKGMgJiYgY1tDb25maWdLZXlzLkVTU19IT1NUTkFNRV0pIHtcbiAgICAgIFNjaGVkdWxlLmVzc0hvc3QgPSBjW0NvbmZpZ0tleXMuRVNTX0hPU1ROQU1FXTtcbiAgICB9XG5cbiAgICBpZiAoYyAmJiBjW0NvbmZpZ0tleXMuRUNIT19FTkFCTEVEXSA9PT0gZmFsc2UpIHtcbiAgICAgIHRoaXMuX2lzRW5hYmxlZCA9IGZhbHNlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9pc0VuYWJsZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIGlmIChjICYmIGNbQ29uZmlnS2V5cy5ERUJVR19NT0RFXSA9PT0gdHJ1ZSkge1xuICAgICAgREVCVUcuZW5hYmxlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIERFQlVHLmRpc2FibGUoKTtcbiAgICB9XG5cbiAgICB0aGlzLl9saXZlQnJva2VyID0gbnVsbDtcbiAgICB0aGlzLl9vbkRlbWFuZEJyb2tlciA9IG51bGw7XG5cbiAgICB0aGlzLl9zdXBwcmVzc2luZ1BsYXlFdmVudCA9IGZhbHNlO1xuICAgIHRoaXMuX3N1cHByZXNzZWRQbGF5RXZlbnRMYWJlbHMgPSBudWxsO1xuXG4gICAgdGhpcy5hZGRMYWJlbCgnYmJjX2lkX3dhaXQnLCAnMScpO1xuICAgIEVjaG9DbGllbnQuRW52aXJvbm1lbnQuZ2V0T3JiSWRDdGEoZnVuY3Rpb24ob3JiSWRDdGEpIHtcbiAgICAgIHNlbGYucmVtb3ZlTGFiZWwoJ2JiY19pZF93YWl0Jyk7XG4gICAgICBpZiAob3JiSWRDdGEgJiYgdHlwZW9mIG9yYklkQ3RhLmdldElTdGF0c0xhYmVscyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBzZWxmLmFkZExhYmVscyh7XG4gICAgICAgICAgYmJjX2lkZW50aXR5OiBvcmJJZEN0YS5nZXRJU3RhdHNMYWJlbHMoKS5iYmNfaWRlbnRpdHksXG4gICAgICAgICAgYmJjX2hpZDogZW5jb2RlVVJJQ29tcG9uZW50KG9yYklkQ3RhLmdldElTdGF0c0xhYmVscygpLmJiY19oaWQgfHwgJ3VuaWRlbnRpZmllZC11c2VyJylcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpZiAoYyAmJiBjW0NvbmZpZ0tleXMuRUNIT19DQUNIRV9NT0RFXSkge1xuICAgICAgdGhpcy5fY2FjaGVNb2RlID0gY1tDb25maWdLZXlzLkVDSE9fQ0FDSEVfTU9ERV07XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2lzRW5hYmxlZCAmJiB0aGlzLl9hdXRvU3RhcnQpIHtcbiAgICAgIHRoaXMuc3RhcnQoKS50aGVuKGNhbGxiYWNrKTtcbiAgICB9XG4gIH1cblxuICBFY2hvQ2xpZW50LnByb3RvdHlwZS5nZXREZWJ1Z01vZGUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gREVCVUcuZ2V0U3RhdGUoKTtcbiAgfTtcblxuICBFY2hvQ2xpZW50LnByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLl9pc0VuYWJsZWQgJiYgIXRoaXMuX2hhc1N0YXJ0ZWQpIHtcbiAgICAgIHRoaXMuX2hhc1N0YXJ0ZWQgPSB0cnVlO1xuICAgICAgcmV0dXJuIE9yYml0VmFyaWFibGVzLmdldCgpLnRoZW4oKGZ1bmN0aW9uIChvcmJpdFZhcnMpIHtcbiAgICAgICAgdGhpcy5fZGVsZWdhdGUoJ3N0YXJ0JywgW29yYml0VmFyc10pO1xuICAgICAgICBpZiAob3JiaXRWYXJzLnBhZ2VOYW1lICYmXG4gICAgICAgICAgICBvcmJpdFZhcnMucGFnZU5hbWUgIT09ICcnICYmXG4gICAgICAgICAgICBvcmJpdFZhcnMucGFnZU5hbWUgIT09ICdvcmIucGFnZScpIHtcbiAgICAgICAgICB0aGlzLnNldENvdW50ZXJOYW1lKG9yYml0VmFycy5wYWdlTmFtZSk7XG4gICAgICAgIH1cbiAgICAgIH0pLmJpbmQodGhpcykpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoKTtcbiAgICB9XG4gIH07XG5cbiAgRWNob0NsaWVudC5wcm90b3R5cGUuZW5hYmxlID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKCF0aGlzLl9pc0VuYWJsZWQpIHtcbiAgICAgIHRoaXMuX2lzRW5hYmxlZCA9IHRydWU7XG4gICAgICB0aGlzLl9kZWxlZ2F0ZSgnZW5hYmxlJyk7XG5cbiAgICAgIGlmICh0aGlzLl9hdXRvU3RhcnQgJiYgIXRoaXMuX2hhc1N0YXJ0ZWQpIHtcbiAgICAgICAgdGhpcy5zdGFydCgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIEVjaG9DbGllbnQucHJvdG90eXBlLmRpc2FibGUgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5faXNFbmFibGVkKSB7XG4gICAgICB0aGlzLl9jbGVhck1lZGlhKCk7XG4gICAgICB0aGlzLl9pc0VuYWJsZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuX2RlbGVnYXRlKCdkaXNhYmxlJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgRWNob0NsaWVudC5wcm90b3R5cGUuaXNFbmFibGVkID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lzRW5hYmxlZDtcbiAgfTtcblxuICAvKipcbiAgICogQHJldHVybiB7U3RyaW5nfG51bGx9XG4gICAqL1xuICBFY2hvQ2xpZW50LnByb3RvdHlwZS5nZXRDb21TY29yZURldmljZUlkID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGRlbGVnYXRlO1xuXG4gICAgaWYgKHRoaXMuY29uc3VtZXJzW0VjaG9DbGllbnQuQ29uc3VtZXJzLkNPTVNDT1JFXSkge1xuICAgICAgZGVsZWdhdGUgPSB0aGlzLmNvbnN1bWVyc1tFY2hvQ2xpZW50LkNvbnN1bWVycy5DT01TQ09SRV07XG4gICAgICBpZiAoXG4gICAgICAgIGRlbGVnYXRlIGluc3RhbmNlb2YgRWNob0NsaWVudC5Db21TY29yZURlbGVnYXRlICYmXG4gICAgICAgIHR5cGVvZiBkZWxlZ2F0ZS5nZXREZXZpY2VJZCA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgKSB7XG4gICAgICAgIHJldHVybiBkZWxlZ2F0ZS5nZXREZXZpY2VJZCgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9O1xuXG4gIC8qKlxuICAqIEByZXR1cm4ge1N0cmluZ3xudWxsfVxuICAqL1xuICBFY2hvQ2xpZW50LnByb3RvdHlwZS5nZXRBdGlEZXZpY2VJZCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBkZWxlZ2F0ZTtcblxuICAgIGlmICh0aGlzLmNvbnN1bWVyc1tFY2hvQ2xpZW50LkNvbnN1bWVycy5BVEldKSB7XG4gICAgICBkZWxlZ2F0ZSA9IHRoaXMuY29uc3VtZXJzW0VjaG9DbGllbnQuQ29uc3VtZXJzLkFUSV07XG4gICAgICBpZiAoXG4gICAgICAgIGRlbGVnYXRlIGluc3RhbmNlb2YgRWNob0NsaWVudC5BdGlEZWxlZ2F0ZSAmJlxuICAgICAgICB0eXBlb2YgZGVsZWdhdGUuZ2V0RGV2aWNlSWQgPT09ICdmdW5jdGlvbidcbiAgICAgICkge1xuICAgICAgICByZXR1cm4gZGVsZWdhdGUuZ2V0RGV2aWNlSWQoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfTtcblxuICAvKipcbiAgICogU2V0IHRoZSB0cmFjZSBpZGVudGlmaWVyLiBUaGlzIGNhbiB0aGVuIGJlIHVzZWQgdG8gcmV0cmlldmUgdGhlIGV2ZW50c1xuICAgKiB1bmRlciB0ZXN0LlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gaWRcbiAgICovXG4gIEVjaG9DbGllbnQucHJvdG90eXBlLnNldFRyYWNlSWQgPSBmdW5jdGlvbihpZCkge1xuICAgIHRoaXMuX2RlbGVnYXRlKCdzZXRUcmFjZUlkJywgW2lkXSk7XG4gIH07XG5cbiAgLy8gRGVwZW5kZW5jaWVzLCBzYXZlZCBoZXJlIHNvIHdlIGNhbiBtb2NrIHRoZW1cbiAgRWNob0NsaWVudC5Db25maWdHZW5lcmF0b3IgPSByZXF1aXJlKCcuL2NvbmZpZy9nZW5lcmF0b3InKTtcbiAgRWNob0NsaWVudC5MYWJlbENsZWFuc2VyID0gcmVxdWlyZSgnLi91dGlsL2NsZWFuc2luZy9sYWJlbC1jbGVhbnNlcicpO1xuICBFY2hvQ2xpZW50LlV0aWwgPSByZXF1aXJlKCcuL3V0aWwvbWV0aG9kcycpO1xuICBFY2hvQ2xpZW50LkNvbVNjb3JlRGVsZWdhdGUgPSByZXF1aXJlKFxuICAgICcuL2RlbGVnYXRlL2NvbXNjb3JlL2NvbXNjb3JlLWRlbGVnYXRlJ1xuICApO1xuICBFY2hvQ2xpZW50LlNwcmluZ0RlbGVnYXRlID0gcmVxdWlyZSgnLi9kZWxlZ2F0ZS9zcHJpbmcvc3ByaW5nLWRlbGVnYXRlJyk7XG4gIEVjaG9DbGllbnQuQXRpRGVsZWdhdGUgPSByZXF1aXJlKCcuL2RlbGVnYXRlL2F0aS9hdGktZGVsZWdhdGUnKTtcbiAgRWNob0NsaWVudC5FbnZpcm9ubWVudCA9IHJlcXVpcmUoJy4vZW52aXJvbm1lbnQnKTtcblxuICAvKiAqXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqIFByaXZhdGUgTWV0aG9kc1xuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKiAqL1xuXG4gIEVjaG9DbGllbnQucHJvdG90eXBlLl9ldmVudHNFbmFibGVkID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lzRW5hYmxlZCAmJiB0aGlzLl9oYXNTdGFydGVkO1xuICB9O1xuXG4gIEVjaG9DbGllbnQucHJvdG90eXBlLl9zZXRDb25zdW1lcnMgPSBmdW5jdGlvbiAoYXBwTmFtZSwgYXBwVHlwZSwgY29uZiwgZW52KSB7XG4gICAgdGhpcy5jb25zdW1lcnMgPSB7fTtcbiAgICB2YXIgY2xlYW5BcHBOYW1lID0gRWNob0NsaWVudC5MYWJlbENsZWFuc2VyLmNsZWFuTGFiZWxWYWx1ZShcbiAgICAgICdhcHBfbmFtZScsIGFwcE5hbWVcbiAgICApO1xuXG4gICAgaWYgKGNvbmYgJiYgY29uZltDb25maWdLZXlzLkNPTVNDT1JFX0VOQUJMRURdKSB7XG4gICAgICB0aGlzLmNvbnN1bWVyc1tFY2hvQ2xpZW50LkNvbnN1bWVycy5DT01TQ09SRV0gPVxuICAgICAgICBuZXcgRWNob0NsaWVudC5Db21TY29yZURlbGVnYXRlKGNsZWFuQXBwTmFtZSwgYXBwVHlwZSwgY29uZiwgZW52KTtcbiAgICB9XG5cbiAgICBpZiAoY29uZiAmJiBjb25mW0NvbmZpZ0tleXMuQVRJX0VOQUJMRURdKSB7XG4gICAgICB0aGlzLmNvbnN1bWVyc1tFY2hvQ2xpZW50LkNvbnN1bWVycy5BVEldID1cbiAgICAgICAgbmV3IEVjaG9DbGllbnQuQXRpRGVsZWdhdGUoY2xlYW5BcHBOYW1lLCBhcHBUeXBlLCBjb25mLCBlbnYpO1xuICAgIH1cblxuICAgIGlmIChjb25mICYmIGNvbmZbQ29uZmlnS2V5cy5CQVJCX0VOQUJMRURdKSB7XG4gICAgICB0aGlzLmNvbnN1bWVyc1tFY2hvQ2xpZW50LkNvbnN1bWVycy5CQVJCXSA9XG4gICAgICAgIG5ldyBFY2hvQ2xpZW50LlNwcmluZ0RlbGVnYXRlKGNsZWFuQXBwTmFtZSwgYXBwVHlwZSwgY29uZiwgZW52KTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogQ2FsbCB0aGUgc3BlY2lmaWVkIGZ1bmN0aW9uIG9uIGFsbCBvYmplY3RzIGluIHRoaXMuY29uc3VtZXJzXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBmTmFtZSBOYW1lIG9mIHRoZSBmdW5jdGlvblxuICAgKiBAcGFyYW0ge0FycmF5fSBhcmdzIEFyZ3VtZW50c1xuICAgKiBAcGFyYW0ge0FycmF5fSBjbGVhbkFyZ3MgQ2xlYW5zZWQgYXJndW1lbnRzIHRvIGJlIHVzZWQgaWYgdGhlIGNvbnN1bWVyIHJlcXVpcmVzIGxhYmVsIGNsZWFuc2luZ1xuICAgKi9cbiAgRWNob0NsaWVudC5wcm90b3R5cGUuX2RlbGVnYXRlID0gZnVuY3Rpb24oZk5hbWUsIGFyZ3MsIGNsZWFuQXJncykge1xuICAgIHZhciBpbmRleDtcbiAgICB2YXIgY29uc3VtZXI7XG4gICAgdmFyIHByb21pc2VzID0gW107XG5cbiAgICBmb3IgKGluZGV4IGluIHRoaXMuY29uc3VtZXJzKSB7XG4gICAgICBpZiAoaW5kZXgpIHtcbiAgICAgICAgY29uc3VtZXIgPSB0aGlzLmNvbnN1bWVyc1tpbmRleF07XG5cbiAgICAgICAgaWYgKGNsZWFuQXJncyAmJiBjb25zdW1lci5yZXF1aXJlc0xhYmVsQ2xlYW5zaW5nKCkpIHtcbiAgICAgICAgICBwcm9taXNlcy5wdXNoKGNvbnN1bWVyW2ZOYW1lXS5hcHBseShjb25zdW1lciwgY2xlYW5BcmdzKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcHJvbWlzZXMucHVzaChjb25zdW1lcltmTmFtZV0uYXBwbHkoY29uc3VtZXIsIGFyZ3MpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcyk7XG4gIH07XG5cbiAgLyogKlxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKiBBcHBsaWNhdGlvbiBzdGF0ZSBNZXRob2RzXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqICovXG5cbiAgLyoqXG4gICAqIEFkZCBsYWJlbHMgdG8gYmUgc2VudCB3aXRoIGV2ZXJ5IGV2ZW50LiBNdWx0aXBsZSBjYWxscyB0b1xuICAgKiB0aGlzIGZ1bmN0aW9uIHdpbGwgYXBwZW5kIGxhYmVscyB0byB0aGUgY3VycmVudCBsaXN0LlxuICAgKiBMYWJlbCBrZXlzIG11c3Qgb25seSBjb250YWluIHRoZSBmb2xsb3dpbmcgY2hhcnMgOiBbYS16MC05Xy0uXVxuICAgKiBMYWJlbCB2YWx1ZXMgbXVzdCBiZSBhIHN0cmluZyBvciBudW1iZXJcbiAgICogQHBhcmFtIHtvYmplY3R9IGxhYmVscyBLZXktdmFsdWUgcGFpcnNcbiAgICogQHJldHVybnMge0VjaG9DbGllbnR9IGB0aGlzYFxuICAgKiBAZXhhbXBsZVxuICAgKiAvLyBzZXQgYSBsYWJlbFxuICAgKiBlY2hvLmFkZExhYmVscyh7YnVuOidjaW5uYW1vbid9KTtcbiAgICogLy8gVXBkYXRlIGl0IGFuZCBzZXQgYW5vdGhlclxuICAgKiBlY2hvLmFkZExhYmVscyh7YnVuOidzdGlja3knLHByaW5jZXNzOidob3Rkb2cnfSk7XG4gICAqL1xuICBFY2hvQ2xpZW50LnByb3RvdHlwZS5hZGRMYWJlbHMgPSBmdW5jdGlvbihsYWJlbHMpIHtcbiAgICB0aGlzLl9kZWxlZ2F0ZSgnYWRkTGFiZWxzJywgW0VjaG9DbGllbnQuTGFiZWxDbGVhbnNlci5jbGVhbkxhYmVscyhsYWJlbHMpXSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIEFkZCBhIHNpbmdsZSBsYWJlbFxuICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5XG4gICAqIEBwYXJhbSB7c3RyaW5nfGludH0gdmFsdWVcbiAgICogQHJldHVybnMge0VjaG9DbGllbnR9IGB0aGlzYFxuICAgKi9cbiAgRWNob0NsaWVudC5wcm90b3R5cGUuYWRkTGFiZWwgPSBmdW5jdGlvbihrZXksIHZhbHVlKSB7XG4gICAgaWYgKHR5cGVvZiBrZXkgIT09ICdzdHJpbmcnKSB7XG4gICAgICBERUJVRy5lcnJvcignTGFiZWwga2V5IG11c3QgYmUgYSBzdHJpbmcnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodmFsdWUgPT09IG51bGwgfHwgdHlwZW9mIHZhbHVlID09PSAndW5kZWZpbmVkJykge1xuICAgICAgREVCVUcuZXJyb3IoJ0xhYmVsIGNhbm5vdCBiZSBudWxsL3VuZGVmaW5lZCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBsYWJlbHMgPSB7fTtcbiAgICBsYWJlbHNba2V5XSA9IHZhbHVlO1xuXG4gICAgcmV0dXJuIHRoaXMuYWRkTGFiZWxzKGxhYmVscyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEFkZCBhIHNpbmdsZSBsYWJlbCB0aGF0IGlzIGtub3duIGJ5IEVjaG9cbiAgICogQHBhcmFtIHtzdHJpbmd9IGtleVxuICAgKiBAcGFyYW0ge3N0cmluZ3xpbnR9IHZhbHVlXG4gICAqIEByZXR1cm5zIHt0aGlzfSBgdGhpc2BcbiAgICovXG4gIEVjaG9DbGllbnQucHJvdG90eXBlLmFkZE1hbmFnZWRMYWJlbCA9IGZ1bmN0aW9uKGtleSwgdmFsdWUpIHtcbiAgICB0aGlzLl9kZWxlZ2F0ZSgnYWRkTWFuYWdlZExhYmVsJywgW1xuICAgICAgRWNob0NsaWVudC5MYWJlbENsZWFuc2VyLmNsZWFuTGFiZWxLZXkoa2V5KSxcbiAgICAgIEVjaG9DbGllbnQuTGFiZWxDbGVhbnNlci5jbGVhbkxhYmVsVmFsdWUoa2V5LCB2YWx1ZSlcbiAgICBdKTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZW1vdmUgdGhlIHNwZWNpZmllZCBsYWJlbHNcbiAgICogQHBhcmFtIHthcnJheX0gbGFiZWxzIEEgbGlzdCBvZiBsYWJlbCBuYW1lcyAoa2V5cykgdGhhdCBuZWVkIHJlbW92aW5nXG4gICAqIEByZXR1cm5zIHt0aGlzfSBgdGhpc2BcbiAgICovXG4gIEVjaG9DbGllbnQucHJvdG90eXBlLnJlbW92ZUxhYmVscyA9IGZ1bmN0aW9uKGxhYmVscykge1xuICAgIHZhciBjbGVhbkxhYmVscyA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwLCBqID0gbGFiZWxzLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuICAgICAgY2xlYW5MYWJlbHMucHVzaChFY2hvQ2xpZW50LkxhYmVsQ2xlYW5zZXIuY2xlYW5MYWJlbEtleShsYWJlbHNbaV0pKTtcbiAgICB9XG5cbiAgICB0aGlzLl9kZWxlZ2F0ZSgncmVtb3ZlTGFiZWxzJywgW2NsZWFuTGFiZWxzXSk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogUmVtb3ZlIGEgc2luZ2xlIGxhYmVsXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBsYWJlbFxuICAgKiBAcmV0dXJucyB7dGhpc30gYHRoaXNgXG4gICAqL1xuICBFY2hvQ2xpZW50LnByb3RvdHlwZS5yZW1vdmVMYWJlbCA9IGZ1bmN0aW9uKGxhYmVsKSB7XG4gICAgcmV0dXJuIHRoaXMucmVtb3ZlTGFiZWxzKFtsYWJlbF0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTZXQgd2hldGhlciBhIHByb2R1Y3QgdXNlciBhcyBsb2dnZWQgaW50byB0aGUgYmJjXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBoaWRcbiAgICogQHJldHVybnMge3RoaXN9IGB0aGlzYFxuICAgKi9cbiAgRWNob0NsaWVudC5wcm90b3R5cGUuc2V0TG9nZ2VkSW5Ub0JCQ0lkID0gZnVuY3Rpb24oaGlkKSB7XG4gICAgdGhpcy5fZGVsZWdhdGUoJ3NldExvZ2dlZEluVG9CQkNJZCcsIFtoaWRdKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogU2V0IHdoZXRoZXIgYSBwcm9kdWN0IHVzZXIgaXMgbG9nZ2VkIGludG8gdGhlIGJiYyBvciBub3RcbiAgICogQHJldHVybnMge3RoaXN9IGB0aGlzYFxuICAgKi9cbiAgRWNob0NsaWVudC5wcm90b3R5cGUuc2V0TG9nZ2VkT3V0T2ZCQkNJZCA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuX2RlbGVnYXRlKCdzZXRMb2dnZWRPdXRPZkJCQ0lkJyk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgdmVyc2lvbiBvZiB0aGUgYXBwbGljYXRpb24gKHRoaXMgaXMgb3B0aW9uYWwpXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB2ZXJzaW9uIFRoZSB2ZXJzaW9uIHN0cmluZyBmb3IgdGhlIGFwcGxpY2F0aW9uXG4gICAqIEByZXR1cm5zIHt0aGlzfSBgdGhpc2BcbiAgICovXG4gIEVjaG9DbGllbnQucHJvdG90eXBlLnNldEFwcFZlcnNpb24gPSBmdW5jdGlvbih2ZXJzaW9uKSB7XG4gICAgdGhpcy5fZGVsZWdhdGUoJ3NldEFwcFZlcnNpb24nLCBbdmVyc2lvbl0pO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIEVjaG9DbGllbnQucHJvdG90eXBlLnNldERlc3RpbmF0aW9uID0gZnVuY3Rpb24oZGVzdGluYXRpb25Db2RlKSB7XG4gICAgdGhpcy5fZGVsZWdhdGUoJ3NldERlc3RpbmF0aW9uJywgW0Rlc3RpbmF0aW9ucy5nZXQoZGVzdGluYXRpb25Db2RlKV0pO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIEVjaG9DbGllbnQucHJvdG90eXBlLnNldFByb2R1Y2VyID0gZnVuY3Rpb24ocHJvZHVjZXJDb2RlKSB7XG4gICAgdmFyIHByb2R1Y2VySWQ7XG4gICAgaWYgKHByb2R1Y2VyQ29kZSkge1xuICAgICAgcHJvZHVjZXJJZCA9IFByb2R1Y2Vycy5nZXRJZChwcm9kdWNlckNvZGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBUaGUgcHJvZHVjZXIgSUQgc2hvdWxkIGJlIHNldCB0byAwIHNvIHRoYXQgaXQgaXMgcmVtb3ZlZCBieSBBVElcbiAgICAgIHByb2R1Y2VySWQgPSAnMCc7XG4gICAgfVxuXG4gICAgaWYgKHByb2R1Y2VySWQpIHtcbiAgICAgIHRoaXMuX2RlbGVnYXRlKCdzZXRQcm9kdWNlcicsIFtwcm9kdWNlcklkXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIERFQlVHLmluZm8oJ1Byb2R1Y2VyIFsnICsgcHJvZHVjZXJDb2RlICsgJ10gbm90IHJlY29nbmlzZWQnKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBFY2hvQ2xpZW50LnByb3RvdHlwZS5zZXRQcm9kdWNlckJ5SWQgPSBmdW5jdGlvbihwcm9kdWNlcklkKSB7XG4gICAgaWYgKCFwcm9kdWNlcklkIHx8ICFQcm9kdWNlcnMuaGFzSWQocHJvZHVjZXJJZCkpIHtcbiAgICAgIC8vIFVzZSBCQkMgYXMgdGhlIGRlZmF1bHQgcHJvZHVjZXJcbiAgICAgIHByb2R1Y2VySWQgPSBQcm9kdWNlcnMuQkJDO1xuICAgIH0gZWxzZSB7XG4gICAgICBwcm9kdWNlcklkID0gcGFyc2VJbnQocHJvZHVjZXJJZCwgMTApO1xuICAgIH1cblxuICAgIHRoaXMuX2RlbGVnYXRlKCdzZXRQcm9kdWNlcicsIFtwcm9kdWNlcklkXSk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogU2V0IHRoZSBjb3VudGVybmFtZSBmb3IgdGhpcyBwYWdlLCB0aGlzIGNhbiBhbHNvIGJlIHNldCB3aGVuXG4gICAqIGEgdmlld0V2ZW50IGlzIHNlbnQuIFRoaXMgbWV0aG9kIHByb3ZpZGVzIGEgd2F5IG9mIHNldHRpbmcgdGhlXG4gICAqIGNvdW50ZXJuYW1lIHdpdGhvdXQgc2VuZGluZyBhIHZpZXcgZXZlbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBjb3VudGVybmFtZSBUaGUgY291bnRlcm5hbWVcbiAgICpcbiAgICogQHJldHVybnMge3RoaXN9IGB0aGlzYFxuICAgKi9cbiAgRWNob0NsaWVudC5wcm90b3R5cGUuc2V0Q291bnRlck5hbWUgPSBmdW5jdGlvbihjb3VudGVybmFtZSkge1xuICAgIHZhciBjbGVhbkNvdW50ZXJOYW1lID0gRWNob0NsaWVudC5MYWJlbENsZWFuc2VyLmNsZWFuQ291bnRlck5hbWUoY291bnRlcm5hbWUpO1xuXG4gICAgdmFyIHJldHVyblZhbHVlID0gdGhpcy5fZGVsZWdhdGUoJ3NldENvdW50ZXJOYW1lJywgW2NvdW50ZXJuYW1lXSwgW2NsZWFuQ291bnRlck5hbWVdKTtcbiAgICB0aGlzLnN0YXRlLmNvdW50ZXJOYW1lU2V0ID0gdHJ1ZTtcblxuICAgIHJldHVybiByZXR1cm5WYWx1ZTtcbiAgfTtcblxuICAvKipcbiAgICogU2V0IHRoZSBsYW5ndWFnZSBvZiB0aGUgY29udGVudCBiZWluZyBkaXNwbGF5ZWQsIGFzIG9wcG9zZWQgdG9cbiAgICogdGhlIGxvY2FsZSBsYW5ndWFnZSAod2hpY2ggY2FuIGJlIHNldCBvbiB0aGUgRW52aXJvbm1lbnQgb2JqZWN0KVxuICAgKiB0aGUgZm9ybWF0IGZvciB0aGUgdGFnIHN0aWxsIG5lZWRzIGd1aWRhbmNlIGZyb20gTSZBLCB0aG91Z2ggSSBzdXNwZWN0XG4gICAqIHRoYXQgZm9sbG93aW5nIHRoZXNlXG4gICAqIFtpbnN0cnVjdGlvbnNdKGh0dHA6Ly93d3cudzMub3JnL0ludGVybmF0aW9uYWwvcXVlc3Rpb25zL3FhLWNob29zaW5nLWxhbmd1YWdlLXRhZ3MpXG4gICAqIHdpbGwgd29yayBvdXQgZmluZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gbGFuZ3VhZ2UgVGhlIGxhbmd1YWdlIChjb2RlKSBvZiB0aGUgY29udGVudFxuICAgKiBAcmV0dXJucyB7dGhpc30gYHRoaXNgXG4gICAqL1xuICBFY2hvQ2xpZW50LnByb3RvdHlwZS5zZXRDb250ZW50TGFuZ3VhZ2UgPSBmdW5jdGlvbihsYW5ndWFnZSkge1xuICAgIHRoaXMuX2RlbGVnYXRlKCdzZXRDb250ZW50TGFuZ3VhZ2UnLCBbbGFuZ3VhZ2VdKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogU2V0cyB0aGUgY2FjaGUgbW9kZSBmb3Igb2ZmbGluZS1lbmFibGVkIGFwcHNcbiAgICogQHBhcmFtIHtzdHJpbmd9IG1vZGUgVGhlIGNhY2hlIG1vZGVcbiAgICogQHJldHVybnMge3RoaXN9IGB0aGlzYFxuICAgKi9cbiAgRWNob0NsaWVudC5wcm90b3R5cGUuc2V0Q2FjaGVNb2RlID0gZnVuY3Rpb24obW9kZSkge1xuICAgIHRoaXMuX2RlbGVnYXRlKCdzZXRDYWNoZU1vZGUnLCBbbW9kZV0pO1xuICAgIHRoaXMuX2NhY2hlTW9kZSA9IG1vZGU7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgRWNob0NsaWVudC5wcm90b3R5cGUuZ2V0Q2FjaGVNb2RlID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX2NhY2hlTW9kZTtcbiAgfTtcblxuICBFY2hvQ2xpZW50LnByb3RvdHlwZS5jbGVhckNhY2hlID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKCF0aGlzLl9pc0VuYWJsZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9kZWxlZ2F0ZSgnY2xlYXJDYWNoZScpO1xuICB9O1xuXG4gIEVjaG9DbGllbnQucHJvdG90eXBlLmZsdXNoQ2FjaGUgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoIXRoaXMuX2lzRW5hYmxlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX2RlbGVnYXRlKCdmbHVzaENhY2hlJyk7XG4gIH07XG5cbiAgLyogKlxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICogQmFzaWMgQW5hbHl0aWNzIE1ldGhvZHNcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqICovXG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVyIGEgJ3ZpZXcgZXZlbnQnLiBUaGlzIGluZGljYXRlcyBhIG5ldyAncGFnZScgaGFzIGJlZW4gZGlzcGxheWVkLlxuICAgKiBTZWVcbiAgICogW2hlcmVdKGh0dHBzOi8vY29uZmx1ZW5jZS5kZXYuYmJjLmNvLnVrL2Rpc3BsYXkvZWNoby9FY2hvK0NsaWVudCtmb3IrUHJvZHVjdCtNYW5hZ2VycyNFY2hvQ2xpZW50Zm9yUHJvZHVjdE1hbmFnZXJzLUNvdW50ZXJuYW1lcylcbiAgICogZm9yIGd1aWRhbmNlIG9uIHNldHRpbmcgdGhlIGNvdW50ZXJuYW1lLiBUaGUgJy5wYWdlJyBzdWZmaXggd2lsbCBiZSBhZGRlZFxuICAgKiBhdXRvbWF0aWNhbGx5IGlmIG5vdCBwcm92aWRlZC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGNvdW50ZXJuYW1lIFRoZSBjb3VudGVybmFtZSBmb3IgdGhpcyBwYWdlXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBldmVudExhYmVsc1xuICAgKiBAcmV0dXJucyB7dGhpc30gYHRoaXNgXG4gICAqIEBleGFtcGxlXG4gICAqIGVjaG8udmlld0V2ZW50KCduZXdzLnNjb3RsYW5kLnBhZ2UnLHtsYWJlbDFLZXk6J2xhYmVsMVZhbHVlJ30pO1xuICAgKi9cbiAgRWNob0NsaWVudC5wcm90b3R5cGUudmlld0V2ZW50ID0gZnVuY3Rpb24oY291bnRlcm5hbWUsIGV2ZW50TGFiZWxzKSB7XG4gICAgaWYgKCF0aGlzLl9ldmVudHNFbmFibGVkKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgY2xlYW5Db3VudGVyTmFtZSA9IEVjaG9DbGllbnQuTGFiZWxDbGVhbnNlci5jbGVhbkNvdW50ZXJOYW1lKGNvdW50ZXJuYW1lKTtcbiAgICB2YXIgY2xlYW5FdmVudExhYmVscyA9IEVjaG9DbGllbnQuTGFiZWxDbGVhbnNlci5jbGVhbkxhYmVscyhldmVudExhYmVscyk7XG5cbiAgICAvLyBOb3RlIGRvd24gdGhhdCB3ZSBoYXZlIGV2ZW50ZWQgdG8gY29tU2NvcmUgYXQgbGVhc3Qgb25jZVxuICAgIGlmICh0aGlzLmNvbnN1bWVyc1tFY2hvQ2xpZW50LkNvbnN1bWVycy5DT01TQ09SRV0pIHtcbiAgICAgIHRoaXMuc3RhdGUuY29tc2NvcmVFdmVudFNlbnQgPSB0cnVlO1xuICAgIH1cblxuICAgIHZhciByZXR1cm5WYWx1ZSA9IHRoaXMuX2RlbGVnYXRlKCd2aWV3RXZlbnQnLCBbY291bnRlcm5hbWUsIGV2ZW50TGFiZWxzXSwgW2NsZWFuQ291bnRlck5hbWUsIGNsZWFuRXZlbnRMYWJlbHNdKTtcbiAgICB0aGlzLnN0YXRlLmNvdW50ZXJOYW1lU2V0ID0gdHJ1ZTtcblxuICAgIGlmICh0aGlzLmNvbnN1bWVyc1tFY2hvQ2xpZW50LkNvbnN1bWVycy5DT01TQ09SRV0pIHtcbiAgICAgIHRoaXMuc3RhdGUuY29tc2NvcmVFdmVudFNlbnQgPSB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiByZXR1cm5WYWx1ZTtcbiAgfTtcblxuICAvKipcbiAgICogUmVnaXN0ZXIgYSBiZXNwb2tlIGV2ZW50LlxuICAgKiBTZWVcbiAgICogW2hlcmVdKGh0dHBzOi8vY29uZmx1ZW5jZS5kZXYuYmJjLmNvLnVrL2Rpc3BsYXkvZWNoby9FY2hvK0NsaWVudCtmb3IrUHJvZHVjdCtNYW5hZ2VycyNFY2hvQ2xpZW50Zm9yUHJvZHVjdE1hbmFnZXJzLVVzZXJhY3Rpb250eXBlc2FuZG5hbWVzKVxuICAgKiBmb3IgYWR2aWNlIG9uIHNldHRpbmcgdGhlIGFjdGlvblR5cGUgYW5kIGFjdGlvbk5hbWUgdmFsdWVzXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBhY3Rpb25UeXBlIFRoZSB0eXBlIG9mIHRoZSBldmVudCAoZS5nLiAnY2xpY2snKVxuICAgKiBAcGFyYW0ge3N0cmluZ30gYWN0aW9uTmFtZSBBIGRlc2NyaXB0aW9uIG9mIHRoZSBldmVudCAoZS5nLiAnQnV0dG9uIFonKVxuICAgKiBAcGFyYW0ge29iamVjdH0gW2V2ZW50TGFiZWxzXSBBZGRpdGlvbmFsIGxhYmVsc1xuICAgKiBAcmV0dXJucyB7dGhpc30gYHRoaXNgXG4gICAqIEBleGFtcGxlXG4gICAqIFJlZ2lzdGVyIGEgVXNlckFjdGlvbiBldmVudCAoc2VudCB0byBBbmFseXRpY3MgKENvbVNjb3JlKSBvbmx5KVxuICAgKiBlY2hvLnVzZXJBY3Rpb25FdmVudCgnY2xpY2snLCdtYXNzaXZlIGJ1dHRvbicse2luZm86J3NvbXJ0aGluZyd9KTtcbiAgICogUmVnaXN0ZXIgYSBVc2VyQWN0aW9uIGV2ZW50IGFsc29cbiAgICogZWNoby51c2VyQWN0aW9uRXZlbnQoJ2NsaWNrJywnbWFzc2l2ZSBidXR0b24nLHtpbmZvOidzb21ydGhpbmcnfSxcbiAgICogIEVjaG9DbGllbnQuUm91dGluZy5BTkFMWVRJQ1MgfCBFY2hvQ2xpZW50LlJvdXRpbmcuQkJDKTtcbiAgICovXG4gIEVjaG9DbGllbnQucHJvdG90eXBlLnVzZXJBY3Rpb25FdmVudCA9IGZ1bmN0aW9uKFxuICAgIGFjdGlvblR5cGUsXG4gICAgYWN0aW9uTmFtZSxcbiAgICBldmVudExhYmVsc1xuICApIHtcbiAgICBpZiAoIXRoaXMuX2V2ZW50c0VuYWJsZWQoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5zdGF0ZS5jb3VudGVyTmFtZVNldCkge1xuICAgICAgREVCVUcuZXJyb3IoJ3VzZXJBY3Rpb25FdmVudCBub3QgYXZhaWxhYmxlIGJlZm9yZSBhIGNhbGwgdG8gJyArXG4gICAgICAgICd2aWV3RXZlbnQgKHRvIHNldCBjb3VudGVyIG5hbWUpLicpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLy8gQnkgZGVmYXVsdCBvbmx5IHNlbmQgdGhpcyB0byBhbmFseXRpY3NcbiAgICB0aGlzLl9kZWxlZ2F0ZSgndXNlckFjdGlvbkV2ZW50JywgW2FjdGlvblR5cGUsIGFjdGlvbk5hbWUsXG4gICAgICBFY2hvQ2xpZW50LkxhYmVsQ2xlYW5zZXIuY2xlYW5MYWJlbHMoZXZlbnRMYWJlbHMpXG4gICAgXSk7XG5cbiAgICAvLyBOb3RlIGRvd24gdGhhdCB3ZSBoYXZlIGV2ZW50ZWQgdG8gY29tU2NvcmUgYXQgbGVhc3Qgb25jZVxuICAgIGlmICh0aGlzLmNvbnN1bWVyc1tFY2hvQ2xpZW50LkNvbnN1bWVycy5DT01TQ09SRV0pIHtcbiAgICAgIHRoaXMuc3RhdGUuY29tc2NvcmVFdmVudFNlbnQgPSB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZWdpc3RlciBhbiBlcnJvciBldmVudFxuICAgKlxuICAgKiBAcGFyYW0ge0Vycm9yfSBbZXJyb3JdIEFuIEVycm9yIG9iamVjdCAob3IgYW55IG9iamVjdCB3aXRoIGF0XG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgbGVhc3QgXCJuYW1lXCIgYW5kIFwibWVzc2FnZVwiIHByb3BlcnRpZXMpXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBbZXZlbnRMYWJlbHNdIExhYmVscyB0byBzZW5kIHdpdGggdGhpcyBldmVudFxuICAgKiBAcmV0dXJucyB7dGhpc30gYHRoaXNgXG4gICAqL1xuICBFY2hvQ2xpZW50LnByb3RvdHlwZS5lcnJvckV2ZW50ID0gZnVuY3Rpb24oZXJyb3IsIGV2ZW50TGFiZWxzKSB7XG4gICAgaWYgKCF0aGlzLl9ldmVudHNFbmFibGVkKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9kZWxlZ2F0ZShcbiAgICAgICdlcnJvckV2ZW50JywgW2Vycm9yLCBFY2hvQ2xpZW50LkxhYmVsQ2xlYW5zZXIuY2xlYW5MYWJlbHMoZXZlbnRMYWJlbHMpXVxuICAgICk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKiAqXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKiBNZWRpYSBQbGF5ZXIgQXR0cmlidXRlc1xuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICogKi9cblxuICAvKipcbiAgICogU2V0IHRoZSBuYW1lIG9mIHRoZSBBViBNZWRpYSBQbGF5ZXIgYmVpbmcgdXNlZFxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICAgKiBAcmV0dXJucyB7dGhpc30gYHRoaXNgXG4gICAqL1xuICBFY2hvQ2xpZW50LnByb3RvdHlwZS5zZXRQbGF5ZXJOYW1lID0gZnVuY3Rpb24obmFtZSkge1xuICAgIFV0aWwuYXNzZXJ0KHR5cGVvZiBuYW1lID09PSAnc3RyaW5nJyAmJiBuYW1lLmxlbmd0aCA+IDAsXG4gICAgICAnc2V0UGxheWVyTmFtZTogbmFtZSBtdXN0IGJlIHN0cmluZyB3aXRoIGxlbmd0aCwgZ290IFwiJyArIG5hbWUgKyAnXCInKTtcblxuICAgIHZhciBjbGVhbk5hbWUgPSBFY2hvQ2xpZW50LkxhYmVsQ2xlYW5zZXIuY2xlYW5MYWJlbFZhbHVlKFxuICAgICAgJ3BsYXllcl9uYW1lJywgbmFtZSk7XG5cbiAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUoJ3NldFBsYXllck5hbWUnLCBbbmFtZV0sIFtjbGVhbk5hbWVdKTtcbiAgfTtcblxuICAvKipcbiAgICogU2V0IHRoZSB2ZXJzaW9uIG9mIHRoZSBBViBNZWRpYSBQbGF5ZXJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHZlcnNpb24gVGhlIHZlcnNpb24gc3RyaW5nXG4gICAqIEByZXR1cm5zIHt0aGlzfSBgdGhpc2BcbiAgICovXG4gIEVjaG9DbGllbnQucHJvdG90eXBlLnNldFBsYXllclZlcnNpb24gPSBmdW5jdGlvbih2ZXJzaW9uKSB7XG4gICAgVXRpbC5hc3NlcnQodHlwZW9mIHZlcnNpb24gPT09ICdzdHJpbmcnICYmIHZlcnNpb24ubGVuZ3RoID4gMCxcbiAgICAgICdzZXRQbGF5ZXJWZXJzaW9uOiB2ZXJzaW9uIG11c3QgYmUgc3RyaW5nIHdpdGggbGVuZ3RoLCBnb3QgXCInICtcbiAgICAgIHZlcnNpb24gKyAnXCInKTtcblxuICAgIHZhciBjbGVhblZlcnNpb24gPSBFY2hvQ2xpZW50LkxhYmVsQ2xlYW5zZXIuY2xlYW5MYWJlbFZhbHVlKFxuICAgICAgJ3BsYXllcl92ZXJzaW9uJywgdmVyc2lvbik7XG5cbiAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUoJ3NldFBsYXllclZlcnNpb24nLCBbdmVyc2lvbl0sIFtjbGVhblZlcnNpb25dKTtcbiAgfTtcblxuICAvKipcbiAgICogU3BlY2lmeSBpZiB0aGUgcGxheWVyIGhhcyBwb3BwZWQgb3V0IHRvIGEgbmV3IHdpbmRvd1xuICAgKiAqTm90ZTogQ2hhbmdpbmcgdGhpcyB2YWx1ZSB3aWxsIG5vdCBnZW5lcmF0ZSBhbiBldmVudCxcbiAgICogYnV0IHdpbGwgY2hhbmdlIHRoZSB2YWx1ZSBzZW50IHdpdGggYWxsIHN1YnNlcXVlbnQgQVYgZXZlbnRzKlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGlzUG9wcGVkXG4gICAqIEByZXR1cm5zIHt0aGlzfSBgdGhpc2BcbiAgICovXG4gIEVjaG9DbGllbnQucHJvdG90eXBlLnNldFBsYXllcklzUG9wcGVkID0gZnVuY3Rpb24oaXNQb3BwZWQpIHtcbiAgICBVdGlsLmFzc2VydChcbiAgICAgIHR5cGVvZiBpc1BvcHBlZCA9PT0gJ2Jvb2xlYW4nLFxuICAgICAgJ3NldFBsYXllcklzUG9wcGVkOiBpc1BvcHBlZCBtdXN0IGJlIGJvb2xlYW4sIGdvdCBcIicgKyBpc1BvcHBlZCArICdcIidcbiAgICApO1xuICAgIHRoaXMuX2RlbGVnYXRlKCdzZXRQbGF5ZXJJc1BvcHBlZCcsIFtpc1BvcHBlZF0pO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTZXQgdGhlIE1lZGlhIFBsYXllciB3aW5kb3cgc3RhdGVcbiAgICogKk5vdGU6IENoYW5naW5nIHRoaXMgdmFsdWUgd2lsbCBub3QgZ2VuZXJhdGUgYW4gZXZlbnQsXG4gICAqIGJ1dCB3aWxsIGNoYW5nZSB0aGUgdmFsdWUgc2VudCB3aXRoIGFsbCBzdWJzZXF1ZW50IEFWIGV2ZW50cypcbiAgICogQHBhcmFtIHtzdHJpbmd9IHN0YXRlIFNob3VsZCBiZSBvbmUgb2YgRWNoby5XaW5kb3dTdGF0ZSwgY2FuIGJlIGFueSBzdHJpbmdcbiAgICogQHJldHVybnMge3RoaXN9IGB0aGlzYFxuICAgKiBAZXhhbXBsZVxuICAgKiBlY2hvLnNldFBsYXllcldpbmRvd1N0YXRlKEVjaG8uV2luZG93U3RhdGUuRlVMTCk7XG4gICAqL1xuICBFY2hvQ2xpZW50LnByb3RvdHlwZS5zZXRQbGF5ZXJXaW5kb3dTdGF0ZSA9IGZ1bmN0aW9uKHN0YXRlKSB7XG4gICAgVXRpbC5hc3NlcnRDb250YWluc1ZhbHVlKEVudW1zLldpbmRvd1N0YXRlLCBzdGF0ZSxcbiAgICAgICdUaGUgd2luZG93IHN0YXRlIG11c3QgYmUgc2V0IGFzIGEgbWVtYmVyJyArXG4gICAgICAnIG9mIEVudW1zLldpbmRvd1N0YXRlLCBnb3QgXCInICsgc3RhdGUgKyAnXCInKTtcbiAgICB0aGlzLl9kZWxlZ2F0ZSgnc2V0UGxheWVyV2luZG93U3RhdGUnLCBbc3RhdGVdKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogU2V0IHRoZSB2b2x1bWVcbiAgICogKk5vdGU6IENoYW5naW5nIHRoaXMgdmFsdWUgd2lsbCBub3QgZ2VuZXJhdGUgYW4gZXZlbnQsXG4gICAqIGJ1dCB3aWxsIGNoYW5nZSB0aGUgdmFsdWUgc2VudCB3aXRoIGFsbCBzdWJzZXF1ZW50IEFWIGV2ZW50cypcbiAgICogQHBhcmFtIHtpbnRlZ2VyfSB2b2x1bWUgU2hvdWxkIGJlIGFuIGludGVnZXIgaW4gdGhlIHJhbmdlIDAtMTAwXG4gICAqIEByZXR1cm5zIHt0aGlzfSBgdGhpc2BcbiAgICovXG4gIEVjaG9DbGllbnQucHJvdG90eXBlLnNldFBsYXllclZvbHVtZSA9IGZ1bmN0aW9uKHZvbHVtZSkge1xuICAgIFV0aWwuYXNzZXJ0KFxuICAgICAgdm9sdW1lIDw9IDEwMCAmJiB2b2x1bWUgPj0gMCxcbiAgICAgICd2b2x1bWUgbXVzdCBiZSAwLTEwMCwgZ290OiAnICsgdm9sdW1lXG4gICAgKTtcblxuICAgIGlmICgodm9sdW1lIDw9IDEwMCkgJiYgKHZvbHVtZSA+PSAwKSkge1xuICAgICAgdGhpcy5fZGVsZWdhdGUoXG4gICAgICAgICdzZXRQbGF5ZXJWb2x1bWUnLCBbdm9sdW1lXVxuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogSW5kaWNhdGUgd2hldGhlciBzdWJ0aXRsZXMgYXJlIHR1cm5lZCBvbi9vZmZcbiAgICogKk5vdGU6IENoYW5naW5nIHRoaXMgdmFsdWUgd2lsbCBub3QgZ2VuZXJhdGUgYW4gZXZlbnQsXG4gICAqIGJ1dCB3aWxsIGNoYW5nZSB0aGUgdmFsdWUgc2VudCB3aXRoIGFsbCBzdWJzZXF1ZW50IEFWIGV2ZW50cypcbiAgICogQHBhcmFtIHtib29sZWFufSBpc1N1YnRpdGxlZCAodHJ1ZSBmb3Igc3VidGl0bGVzIG9uKVxuICAgKiBAcmV0dXJucyB7dGhpc30gYHRoaXNgXG4gICAqL1xuICBFY2hvQ2xpZW50LnByb3RvdHlwZS5zZXRQbGF5ZXJJc1N1YnRpdGxlZCA9IGZ1bmN0aW9uKGlzU3VidGl0bGVkKSB7XG4gICAgVXRpbC5hc3NlcnQoXG4gICAgICB0eXBlb2YgaXNTdWJ0aXRsZWQgPT09ICdib29sZWFuJyxcbiAgICAgICdzZXRQbGF5ZXJJc1N1YnRpdGxlZDogaXNTdWJ0aXRsZWQgbXVzdCBiZSBhIGJvb2xlYW4sIGdvdCBcIicgK1xuICAgICAgaXNTdWJ0aXRsZWQgKyAnXCInXG4gICAgKTtcblxuICAgIHRoaXMuX2RlbGVnYXRlKCdzZXRQbGF5ZXJJc1N1YnRpdGxlZCcsIFtpc1N1YnRpdGxlZF0pO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBUaGUgcGxheWVyIGRlbGVnYXRlIGlzIHJlc3BvbnNpYmxlIGZvciByZXBvcnRpbmcgdGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlXG4gICAqIHBsYXllci4gWW91IG11c3QgaW1wbGVtZW50IHRoZSBmb2xsb3dpbmcgbWV0aG9kcy5cbiAgICpcbiAgICogLSBnZXRUaW1lc3RhbXAge0Z1bmN0aW9ufSB0aGF0IHJldHVybnMgYSBudW1iZXIgZGVub3RpbmcgdGhlIHBsYXllcnNcbiAgICogdGltZXN0YW1wIGV4cHJlc3NlZCBpbiBVbml4IEVwb2NoIGFuZCBpbiBtaWxsaXNlY29uZHNcbiAgICogLSBnZXRQb3NpdGlvbiB7RnVuY3Rpb259IHRoZSBjdXJyZW50IHBvc2l0aW9uIHRoYXQgdGhlIHBsYXllciBpcyBhdFxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gZGVsZWdhdGVcbiAgICogQHJldHVybiBFY2hvQ2xpZW50XG4gICAqL1xuICBFY2hvQ2xpZW50LnByb3RvdHlwZS5zZXRQbGF5ZXJEZWxlZ2F0ZSA9IGZ1bmN0aW9uKGRlbGVnYXRlKSB7XG4gICAgZGVsZWdhdGUgPSBkZWxlZ2F0ZSB8fCB7fTtcblxuICAgIC8vIHJlcXVpcmVkIGZ1bmN0aW9uc1xuICAgIHZhciBmdW5jdGlvbnMgPSBbJ2dldFRpbWVzdGFtcCcsICdnZXRQb3NpdGlvbiddO1xuICAgIHZhciBtZXRob2ROYW1lO1xuICAgIHZhciBpO1xuICAgIHZhciB2YWxpZDtcblxuICAgIC8vIGZhaWxlZCB0byBpbml0aWFsaXNlIHRoZSBlY2hvIGNsaWVudCBhcyBpbnRlcmZhY2UgaXMgbm90IG1ldFxuICAgIHZhciBmYWlsID0gZmFsc2U7XG5cbiAgICAvLyBjaGVjayB0aGF0IHRoZSBgZGVsZWdhdGVgIGNvbnRhaW5zIHRoZSBjb3JyZWN0IGZ1bmN0aW9ucyBhbmQgbG9nIHRvXG4gICAgLy8gY29uc29sZSBpZiBpbiBkZWJ1ZyBtb2RlLlxuICAgIGZvciAoaSA9IDA7IGkgPCBmdW5jdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIG1ldGhvZE5hbWUgPSBmdW5jdGlvbnNbaV07XG5cbiAgICAgIC8vIGNoZWNrIGRlbGVnYXRlIGhhcyB0aGUgbWV0aG9kIGFuZCB0aGF0IGl0IGlzIGEgZnVuY3Rpb25cbiAgICAgIHZhbGlkID0gKFxuICAgICAgICBkZWxlZ2F0ZS5oYXNPd25Qcm9wZXJ0eShtZXRob2ROYW1lKSAmJlxuICAgICAgICB0eXBlb2YgZGVsZWdhdGVbbWV0aG9kTmFtZV0gPT09ICdmdW5jdGlvbidcbiAgICAgICk7XG5cbiAgICAgIFV0aWwuYXNzZXJ0KFxuICAgICAgICB2YWxpZCxcbiAgICAgICAgJ1RoZSBwbGF5ZXIgZGVsZWdhdGUgbXVzdCBpbXBsZW1lbnQgXCInICsgbWV0aG9kTmFtZSArICdcIidcbiAgICAgICk7XG5cbiAgICAgIGlmICghdmFsaWQpIHtcbiAgICAgICAgZmFpbCA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFmYWlsKSB7XG4gICAgICB0aGlzLl9wbGF5ZXJEZWxlZ2F0ZSA9IGRlbGVnYXRlO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qICpcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqIE1lZGlhIEF0dHJpYnV0ZXNcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqICovXG5cbiAgLyoqXG4gICAqIFNldCBkZXRhaWxzIG9mIHRoZSBtZWRpYSB3aGljaCB0aGUgcGxheWVyIGlzIGFib3V0IHRvIHBsYXkuXG4gICAqXG4gICAqICoqV0FSTklORzogQW55IHVwZGF0ZXMgbWFkZSB0byB0aGUgTWVkaWEgb2JqZWN0IGFmdGVyIGl0IGlzIHBhc3NlZCBpbiB0b1xuICAgKiBFY2hvIHdpbGwgTk9UIGhhdmUgYW55IGVmZmVjdC4qKlxuICAgKlxuICAgKiBUaGlzIG1ldGhvZCBzaG91bGQgYmUgdGhlIGZpcnN0IG1ldGhvZCBjYWxsZWQgd2hlbiB0aGUgdXNlciByZXF1ZXN0cyBhXG4gICAqIG5ldyBwaWVjZSBvZiBjb250ZW50IGFuZCBtdXN0IGJlIGNhbGxlZCBiZWZvcmUgdGhlIGF2RXZlbnQgbWV0aG9kcyBhcmVcbiAgICogY2FsbGVkLiBBViBldmVudCBtZXNzYWdlcyB3aWxsIGluY2x1ZGUgYWxsIG9mIHRoZSBhdHRyaWJ1dGVzIG9mIHRoZSBtZWRpYVxuICAgKiBvYmplY3QgcGFzc2VkIHZpYSAodGhlIG1vc3QgcmVjZW50IGNhbGwgdG8pIHRoaXMgbWV0aG9kLlxuICAgKlxuICAgKiBUaGlzIG1ldGhvZCBzaG91bGQgb25seSBiZSBjYWxsZWQgd2hlbiB0aGUgcGxheWVyIGlzIGluIGEgc3RvcHBlZCBzdGF0ZSxcbiAgICogaS5lLiBiZWZvcmUgYSBwbGF5IGV2ZW50IG9yIGFmdGVyIGFuIGVuZCBldmVudC5cbiAgICpcbiAgICogQHBhcmFtIHtNZWRpYX0gbWVkaWEgQSBNZWRpYSBvYmplY3QgZGVmaW5pbmcgdGhlIGNvbnRlbnQgYmVpbmcgY29uc3VtZWQuXG4gICAqIEByZXR1cm5zIHt0aGlzfSBgdGhpc2BcbiAgICovXG4gIEVjaG9DbGllbnQucHJvdG90eXBlLnNldE1lZGlhID0gZnVuY3Rpb24obWVkaWEpIHtcbiAgICBpZiAoIXRoaXMuX2V2ZW50c0VuYWJsZWQoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX2NsZWFyTWVkaWEoKTtcblxuICAgIHZhciBjbG9uZWRNZWRpYSA9IG1lZGlhLmdldENsb25lKCk7XG5cbiAgICBpZiAoIXRoaXMuc3RhdGUuY291bnRlck5hbWVTZXQpIHtcbiAgICAgIERFQlVHLmVycm9yKFxuICAgICAgICAnc2V0TWVkaWE6IE11c3QgaGF2ZSBhIGNvdW50ZXJuYW1lIHNldCAnICtcbiAgICAgICAgJ29yIHZpZXcgZXZlbnQgc2VudCBmaXJzdCdcbiAgICAgICk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5tZWRpYSA9IGNsb25lZE1lZGlhO1xuXG4gICAgdGhpcy5hZGRMYWJlbChDU0tleXMuRVNTX0VOQUJMRUQsIHRoaXMuX2Vzc0VuYWJsZWQgPyAndHJ1ZScgOiAnZmFsc2UnKTtcblxuICAgIHZhciBsaXZlID0gRW51bXMuTWVkaWFDb25zdW1wdGlvbk1vZGUuTElWRTtcbiAgICBpZiAodGhpcy5tZWRpYS5nZXRNZWRpYUNvbnN1bXB0aW9uTW9kZSgpID09PSBsaXZlKSB7XG4gICAgICB0aGlzLl9pbml0TGl2ZUJyb2tlcigpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9pbml0T25EZW1hbmRCcm9rZXIoKTtcbiAgICB9XG5cbiAgICB0aGlzLl9kZWxlZ2F0ZSgnc2V0TWVkaWEnLCBbdGhpcy5tZWRpYV0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBJbnZva2VkIGZyb20gdGhlIExpdmVCcm9rZXIgd2hlbiBhIGJyb2FkY2FzdCBoYXMgYmVlbiBkZXRlY3RlZC5cbiAgICpcbiAgICogQHBhcmFtIHtNZWRpYX0gbmV3TWVkaWFcbiAgICogQHBhcmFtIHtOdW1iZXJ9IG5ld1Bvc2l0aW9uIHRoZSBwcmV2aW91cyBwb3NpdGlvbiBvZiB0aGUgcGxheWVyXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBvbGRQb3NpdGlvbiB0aGUgbmV3IHBvc2l0aW9uXG4gICAqL1xuICBFY2hvQ2xpZW50LnByb3RvdHlwZS5saXZlTWVkaWFVcGRhdGUgPSBmdW5jdGlvbihcbiAgICBuZXdNZWRpYSxcbiAgICBuZXdQb3NpdGlvbixcbiAgICBvbGRQb3NpdGlvblxuICApIHtcbiAgICBpZiAoIXRoaXMuX2V2ZW50c0VuYWJsZWQoKSB8fCAhdGhpcy5fYXZFdmVudHNFbmFibGVkKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIW5ld01lZGlhKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5fc3VwcHJlc3NpbmdQbGF5RXZlbnQgPSBmYWxzZTtcblxuICAgIHRoaXMubWVkaWEgPSBuZXdNZWRpYTtcbiAgICB0aGlzLl9kZWxlZ2F0ZSgnbGl2ZU1lZGlhVXBkYXRlJywgW25ld01lZGlhLCBuZXdQb3NpdGlvbiwgb2xkUG9zaXRpb25dKTtcbiAgfTtcblxuICAvKipcbiAgICogU2V0IHRoZSBsZW5ndGggb2YgdGhlIG1lZGlhIChpbiBtaWxsaXNlY29uZHMpLlxuICAgKlxuICAgKiBNZWRpYSBsZW5ndGggY2FuIGJlIHNwZWNpZmllZCBvbiB0aGUgTWVkaWEgb2JqZWN0IHByaW9yIHRvIHBhc3NpbmcgaXQgdG9cbiAgICogRWNobyBpZiB0aGUgbGVuZ3RoIGlzIGtub3duIHVwIGZyb250LiBUaGlzIG1ldGhvZCBpcyBwcm92aWRlZCB0byBhbGxvd1xuICAgKiBwbGF5ZXJzIHdoaWNoIGRvIG5vdCBrbm93IHRoZSBsZW5ndGggb2YgcGllY2Ugb2YgY29udGVudCBiZWZvcmUgaXQgc3RhcnRzXG4gICAqIHBsYXlpbmcgdG8gcmVwb3J0IHRoZSBsZW5ndGggb25jZSBpdCBiZWNvbWVzIGF2YWlsYWJsZS5cbiAgICpcbiAgICogRm9yIG9uLWRlbWFuZCBjb250ZW50LCB0aGlzIFRoaXMgbWV0aG9kIG11c3QgYmUgY2FsbGVkIHdpdGhpbiB0aGUgZmlyc3RcbiAgICogNjAgc2Vjb25kcyBvZiBwbGF5YmFjayAoaWYgdGhlIGxlbmd0aCBoYXMgbm90IGFscmVhZHkgYmVlbiBwYXNzZWQgdG8gRWNob1xuICAgKiB2aWEgdGhlIE1lZGlhIG9iamVjdCkuIEZhaWx1cmUgdG8gZG8gc28gd2lsbCByZXN1bHQgaW4gaW5hY2N1cmF0ZVxuICAgKiBjb25zdW1wdGlvbiBzdGF0aXN0aWNzIGZvciB0aGUgY29udGVudC4gVGhpcyBtZXRob2Qgc2hvdWxkIGJlIGNhbGxlZCBhdFxuICAgKiBtb3N0IG9uY2UgZm9yIGVhY2ggbmV3IHBpZWNlIG9mIG1lZGlhIHBhc3NlZCB0byBFY2hvLlxuICAgKlxuICAgKiBUaGlzIG1ldGhvZCBpcyBub3QgZXhwZWN0ZWQgdG8gYmUgY2FsbGVkIGZvciBsaXZlIGNvbnRlbnQgYXMgYSBsZW5ndGggb2ZcbiAgICogemVybyBzaG91bGQgaGF2ZSBiZWVuIHNwZWNpZmllZCBvbiB0aGUgTWVkaWEgb2JqZWN0IHBhc3NlZCB0byBFY2hvLlxuICAgKlxuICAgKiBAcGFyYW0ge2ludGVnZXJ9IGxlbmd0aCBUaGUgbGVuZ3RoIG9mIHRoZSBtZWRpYSBpbiBtcy5cbiAgICogQHJldHVybnMge3RoaXN9IGB0aGlzYFxuICAgKi9cbiAgRWNob0NsaWVudC5wcm90b3R5cGUuc2V0TWVkaWFMZW5ndGggPSBmdW5jdGlvbihsZW5ndGgpIHtcbiAgICBpZiAoIXRoaXMubWVkaWEpIHtcbiAgICAgIERFQlVHLmVycm9yKCdzZXRNZWRpYUxlbmd0aDogTXVzdCBjYWxsIHNldE1lZGlhIGZpcnN0Jyk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9IGVsc2UgaWYgKCF0aGlzLm1lZGlhLmlzT25EZW1hbmQoKSkge1xuICAgICAgREVCVUcuZXJyb3IoXG4gICAgICAgICdzZXRNZWRpYUxlbmd0aDogTGVuZ3RoIHNob3VsZCBiZSBzZXQgdG8gemVybyBwcmlvciB0byAnICtcbiAgICAgICAgJ3Bhc3NpbmcgdGhlIG1lZGlhIG9iamVjdCB0byBFY2hvIGZvciBsaXZlIG1lZGlhJ1xuICAgICAgKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIGxlbmd0aCA9IHRoaXMuX2NsZWFuUG9zaXRpb24obGVuZ3RoKTtcblxuICAgIGlmICh0eXBlb2YgbGVuZ3RoICE9PSAnbnVtYmVyJykge1xuICAgICAgREVCVUcuZXJyb3IoXG4gICAgICAgICdzZXRNZWRpYUxlbmd0aDogTGVuZ3RoIG11c3QgYmUgYSBwb3NpdGl2ZSBudW1iZXInXG4gICAgICApO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgdGhpcy5fZGVsZWdhdGUoJ3NldE1lZGlhTGVuZ3RoJywgW2xlbmd0aF0pO1xuICAgIHRoaXMubWVkaWEuc2V0TGVuZ3RoKGxlbmd0aCk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogQGRlcHJlY2F0ZWQgRmllbGQgaXMgbm8gbG9uZ2VyIHVzZWRcbiAgICovXG4gIEVjaG9DbGllbnQucHJvdG90eXBlLnNldE1lZGlhQml0cmF0ZSA9IGZ1bmN0aW9uKCkge1xuICB9O1xuXG4gIC8qKlxuICAgKiBAZGVwcmVjYXRlZCBGaWVsZCBpcyBubyBsb25nZXIgdXNlZFxuICAgKi9cbiAgRWNob0NsaWVudC5wcm90b3R5cGUuc2V0TWVkaWFDb2RlYyA9IGZ1bmN0aW9uKCkge1xuICB9O1xuXG4gIC8qKlxuICAgKiBAZGVwcmVjYXRlZCBGaWVsZCBpcyBubyBsb25nZXIgdXNlZFxuICAgKi9cbiAgRWNob0NsaWVudC5wcm90b3R5cGUuc2V0TWVkaWFDRE4gPSBmdW5jdGlvbigpIHtcbiAgfTtcblxuICBFY2hvQ2xpZW50LnByb3RvdHlwZS5zZXRFc3NTdWNjZXNzID0gZnVuY3Rpb24oaXNTdWNjZXNzKSB7XG4gICAgdGhpcy5hZGRMYWJlbChDU0tleXMuRVNTX1NVQ0NFU1MsIGlzU3VjY2VzcyA/ICd0cnVlJyA6ICdmYWxzZScpO1xuICB9O1xuXG4gIEVjaG9DbGllbnQucHJvdG90eXBlLnNldEVzc0Vycm9yID0gZnVuY3Rpb24oZXJyb3IsIGNvZGUpIHtcbiAgICB0aGlzLmFkZExhYmVsKENTS2V5cy5FU1NfRVJST1IsIGVycm9yLnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKSk7XG5cbiAgICBpZiAoZXJyb3IudG9TdHJpbmcoKSA9PT0gRW51bXMuRXNzRXJyb3IuU1RBVFVTX0NPREUudG9TdHJpbmcoKSkge1xuICAgICAgdGhpcy5hZGRMYWJlbChDU0tleXMuRVNTX1NUQVRVU19DT0RFLCBjb2RlKTtcbiAgICB9XG5cbiAgICB0aGlzLl9kZWxlZ2F0ZSgnbGl2ZUVucmljaG1lbnRGYWlsZWQnKTtcbiAgfTtcblxuICAvKiAqXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKiBNZWRpYSBFdmVudHNcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqICovXG5cbiAgLyoqXG4gICAqIEJvdGggY29udGVudCBJZCBhbmQgQVYgVHlwZSBtdXN0IGhhdmUgYmVlbiBzZXQgYmVmb3JlIHRyeWluZyB0byB1c2UgdGhlXG4gICAqIEFWIGV2ZW50IG1ldGhvZHMuXG4gICAqXG4gICAqIFRoaXMgbWV0aG9kIHRocm93cyBhbiBleGNlcHRpb24gaW4gZGVidWcgbW9kZSBpZiBib3RoIG9mIHRoZXNlIGF0dHJpYnV0ZXNcbiAgICogaGF2ZSBub3QgYmVlbiBzZXQuIEl0IHJldHVybnMgZmFsc2UgaW4gbm9uLWRlYnVnIG1vZGUgaWYgYm90aCBvZiB0aGVzZVxuICAgKiBhdHRyaWJ1dGVzIGhhdmUgbm90IGJlZW4gc2V0LlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcmV0dXJucyB7Qm9vbGVhbn0gVHJ1ZSBpZiB0aGUgYXBwcm9wcmlhdGUgc3RhdGUgaXMgc2V0IHVwIHRvIHVzZSB0aGUgYXZcbiAgICogICAgICAgICBldmVuIG1ldGhvZHMuIFJldHVybnMgZmFsc2UgaWYgc3RhdGUgaXMgbm90IHNldCB1cCBpbiBub24tZGVidWdcbiAgICogICAgICAgICBtb2RlIG9yIHRocm93cyBhbiBleGNlcHRpb24gaW4gZGVidWcgbW9kZS5cbiAgICovXG4gIEVjaG9DbGllbnQucHJvdG90eXBlLl9hdkV2ZW50c0VuYWJsZWQgPSBmdW5jdGlvbigpIHtcblxuICAgIHJldHVybiAoXG4gICAgICBVdGlsLmFzc2VydChcbiAgICAgICAgQm9vbGVhbih0aGlzLm1lZGlhKSwgJ3NldE1lZGlhKCkgbXVzdCBiZSBjYWxsZWQgcHJpb3IgdG8gdGhpcyBtZXRob2QnLCBGYWlsU2lsZW50bHlcbiAgICAgICkgJiZcbiAgICAgIFV0aWwuYXNzZXJ0KFxuICAgICAgICBCb29sZWFuKHRoaXMuX3BsYXllckRlbGVnYXRlKSxcbiAgICAgICAgJ3NldFBsYXllckRlbGVnYXRlIG5vdCBjYWxsZWQgb3Igbm90IGNvbmZpZ3VyZWQgY29ycmVjdGx5JywgRmFpbFNpbGVudGx5XG4gICAgICApXG4gICAgKTtcbiAgfTtcblxuICAvKipcbiAgICogR2V0IHRoZSBsaXZlIGJyb2tlci5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgRWNob0NsaWVudC5wcm90b3R5cGUuZ2V0TGl2ZUJyb2tlciA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl9saXZlQnJva2VyO1xuICB9O1xuXG4gIC8qKlxuICAgKiBJbml0IHRoZSBMaXZlIGJyb2tlci5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICovXG4gIEVjaG9DbGllbnQucHJvdG90eXBlLl9pbml0TGl2ZUJyb2tlciA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICghdGhpcy5fYXZFdmVudHNFbmFibGVkKCkgfHxcbiAgICAgIHRoaXMubWVkaWEuZ2V0TWVkaWFDb25zdW1wdGlvbk1vZGUoKSAhPT0gRW51bXMuTWVkaWFDb25zdW1wdGlvbk1vZGUuTElWRVxuICAgICkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX2xpdmVCcm9rZXIgPSBuZXcgTGl2ZUJyb2tlcihcbiAgICAgIHRoaXMuX3BsYXllckRlbGVnYXRlLCB0aGlzLm1lZGlhLCB0aGlzLCB0aGlzLl9lbnYsIHRoaXMuX2Vzc0VuYWJsZWRcbiAgICApO1xuICAgIHRoaXMuX2RlbGVnYXRlKCdzZXRCcm9rZXInLCBbdGhpcy5fbGl2ZUJyb2tlcl0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQgdGhlIE9uLWRlbWFuZCBicm9rZXIuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIEVjaG9DbGllbnQucHJvdG90eXBlLmdldE9uRGVtYW5kQnJva2VyID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX29uRGVtYW5kQnJva2VyO1xuICB9O1xuXG4gIC8qKlxuICAgKiBJbml0IHRoZSBPbi1kZW1hbmQgYnJva2VyLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgRWNob0NsaWVudC5wcm90b3R5cGUuX2luaXRPbkRlbWFuZEJyb2tlciA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICghdGhpcy5fYXZFdmVudHNFbmFibGVkKCkgfHxcbiAgICAgIHRoaXMubWVkaWEuZ2V0TWVkaWFDb25zdW1wdGlvbk1vZGUoKSA9PT0gRW51bXMuTWVkaWFDb25zdW1wdGlvbk1vZGUuTElWRVxuICAgICkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX29uRGVtYW5kQnJva2VyID0gbmV3IE9uRGVtYW5kQnJva2VyKFxuICAgICAgdGhpcy5fcGxheWVyRGVsZWdhdGUsXG4gICAgICB0aGlzLm1lZGlhLFxuICAgICAgdGhpc1xuICAgICk7XG4gICAgdGhpcy5fZGVsZWdhdGUoJ3NldEJyb2tlcicsIFt0aGlzLl9vbkRlbWFuZEJyb2tlcl0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDbGVhbiBhIHBvc2l0aW9uIHZhbHVlLlxuICAgKlxuICAgKiBAcGFyYW0ge051bWJlcnxzdHJpbmd9IHZhbHVlIFRoZSB2YWx1ZSB0byBjbGVhblxuICAgKiBAcmV0dXJucyB7aW50ZWdlcnxmYWxzZX1cbiAgICovXG4gIEVjaG9DbGllbnQucHJvdG90eXBlLl9jbGVhblBvc2l0aW9uID0gZnVuY3Rpb24odmFsdWUpIHtcblxuICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkICYmIHZhbHVlICE9PSBudWxsKSB7XG4gICAgICB2YWx1ZSA9IE1hdGguZmxvb3IodmFsdWUpO1xuICAgIH1cblxuICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkIHx8IGlzTmFOKHZhbHVlKSB8fCAhaXNGaW5pdGUodmFsdWUpIHx8IHZhbHVlIDwgMCkge1xuICAgICAgdmFsdWUgPSAwO1xuICAgIH1cblxuICAgIHJldHVybiB2YWx1ZTtcbiAgfTtcblxuICAvKipcbiAgICogUmVnaXN0ZXIgYW4gQVYgUGxheSBldmVudFxuICAgKlxuICAgKiBAcGFyYW0ge2ludGVnZXJ9IHBvc2l0aW9uIFBvc2l0aW9uIHRocm91Z2ggdGhlIG1lZGlhIGluIG1zXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBbZXZlbnRMYWJlbHNdIEN1c3RvbSBsYWJlbHMgdG8gc2V0IGZvciB0aGlzIGV2ZW50XG4gICAqIEByZXR1cm5zIHt0aGlzfSBgdGhpc2BcbiAgICovXG4gIEVjaG9DbGllbnQucHJvdG90eXBlLmF2UGxheUV2ZW50ID0gZnVuY3Rpb24ocG9zaXRpb24sIGV2ZW50TGFiZWxzKSB7XG4gICAgaWYgKCF0aGlzLl9ldmVudHNFbmFibGVkKCkgfHwgIXRoaXMuX2F2RXZlbnRzRW5hYmxlZCgpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGlzTGl2ZSA9IHRoaXMubWVkaWEuaXNMaXZlKCk7XG5cbiAgICB0aGlzLl9pc1BsYXlpbmcgPSB0cnVlO1xuXG4gICAgaWYgKGlzTGl2ZSAmJiB0aGlzLl9saXZlQnJva2VyKSB7XG4gICAgICBwb3NpdGlvbiA9IHRoaXMuX2xpdmVCcm9rZXIuZ2V0UG9zaXRpb24oKTtcbiAgICAgIHRoaXMuX2xpdmVCcm9rZXIuc3RhcnQoKTtcbiAgICB9IGVsc2UgaWYgKCFpc0xpdmUgJiYgdGhpcy5fb25EZW1hbmRCcm9rZXIpIHtcbiAgICAgIHBvc2l0aW9uID0gdGhpcy5fY2xlYW5Qb3NpdGlvbihwb3NpdGlvbik7XG4gICAgICB0aGlzLl9wcmV2aW91c1BsYXlQb3NpdGlvbiA9IHBvc2l0aW9uO1xuXG4gICAgICBpZiAodGhpcy5fcG9zaXRpb25FeGNlZWRzTWVkaWFMZW5ndGgocG9zaXRpb24pKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdGhpcy5fb25EZW1hbmRCcm9rZXIuc2V0UG9zaXRpb24ocG9zaXRpb24pO1xuICAgICAgdGhpcy5fb25EZW1hbmRCcm9rZXIuc3RhcnQoKTtcbiAgICB9XG5cbiAgICBpZiAoaXNMaXZlICYmIHRoaXMubWVkaWEuaXNFc3NFbnJpY2hlZCgpICYmIHRoaXMuX3N1cHByZXNzaW5nUGxheUV2ZW50KSB7XG4gICAgICB0aGlzLl9zdXBwcmVzc2VkUGxheUV2ZW50TGFiZWxzID0gZXZlbnRMYWJlbHM7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2RlbGVnYXRlKFxuICAgICAgICAnYXZQbGF5RXZlbnQnLFxuICAgICAgICBbcG9zaXRpb24sIEVjaG9DbGllbnQuTGFiZWxDbGVhbnNlci5jbGVhbkxhYmVscyhldmVudExhYmVscyldXG4gICAgICApO1xuICAgICAgdGhpcy5tZWRpYS5zZXRCdWZmZXJpbmcoZmFsc2UpO1xuICAgICAgdGhpcy5tZWRpYS5zZXRQbGF5aW5nKHRydWUpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmNvbnN1bWVyc1tFY2hvQ2xpZW50LkNvbnN1bWVycy5DT01TQ09SRV0pIHtcbiAgICAgIHRoaXMuc3RhdGUuY29tc2NvcmVFdmVudFNlbnQgPSB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBQZXJmb3JtIGNvbW1vbiBhdiBldmVudCBhY3Rpb25zLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gIG1ldGhvZFRvRGVsZWdhdGUgVGhlIG1ldGhvZCB0byBkZWxlZ2F0ZVxuICAgKiBAcGFyYW0ge2ludGVnZXJ9IHBvc2l0aW9uIFBvc2l0aW9uIHRocm91Z2ggdGhlIG1lZGlhIGluIG1zXG4gICAqIEBwYXJhbSB7b2JqZWN0fSAgZXZlbnRMYWJlbHMgT3B0aW9uYWwgb2JqZWN0IG9mIGxhYmVsc1xuICAgKiBAcGFyYW0ge2ludGVnZXJ9IHJhdGUgT3B0aW9uYWwgcmF0ZSBmb3IgcndkL2Zmd2RcbiAgICogQHJldHVybnMge3RoaXN9IGB0aGlzYFxuICAgKi9cbiAgRWNob0NsaWVudC5wcm90b3R5cGUuX2F2TmF2aWdhdGlvbkV2ZW50ID0gZnVuY3Rpb24oXG4gICAgbWV0aG9kVG9EZWxlZ2F0ZSwgcG9zaXRpb24sIGV2ZW50TGFiZWxzLCByYXRlXG4gICkge1xuXG4gICAgaWYgKCF0aGlzLl9hdkV2ZW50c0VuYWJsZWQoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX2lzUGxheWluZyA9IGZhbHNlO1xuXG4gICAgaWYgKHRoaXMubWVkaWEuaXNMaXZlKCkpIHtcbiAgICAgIGlmICh0aGlzLl9saXZlQnJva2VyKSB7XG4gICAgICAgIHRoaXMuX2xpdmVCcm9rZXIuc3RvcCgpO1xuICAgICAgICBwb3NpdGlvbiA9IHRoaXMuX2xpdmVCcm9rZXIuZ2V0UG9zaXRpb24oKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMubWVkaWEuaXNFc3NFbnJpY2hlZCgpICYmICF0aGlzLl9zdXBwcmVzc2luZ1BsYXlFdmVudCkge1xuICAgICAgICB0aGlzLl9zdXBwcmVzc2luZ1BsYXlFdmVudCA9IHRydWU7XG4gICAgICB9XG5cbiAgICB9IGVsc2UgaWYgKHRoaXMuX29uRGVtYW5kQnJva2VyKSB7XG4gICAgICBwb3NpdGlvbiA9IHRoaXMuX2NsZWFuUG9zaXRpb24ocG9zaXRpb24pO1xuICAgICAgcG9zaXRpb24gPSB0aGlzLl9wcmV2ZW50UG9zaXRpb25FeGNlZWRpbmdNZWRpYUxlbmd0aChwb3NpdGlvbik7XG4gICAgICB0aGlzLl9vbkRlbWFuZEJyb2tlci5zdG9wKCk7XG4gICAgfVxuXG4gICAgaWYgKG1ldGhvZFRvRGVsZWdhdGUgPT09ICdhdlJld2luZEV2ZW50JyB8fCBtZXRob2RUb0RlbGVnYXRlID09PSAnYXZGYXN0Rm9yd2FyZEV2ZW50Jykge1xuICAgICAgdGhpcy5fZGVsZWdhdGUoXG4gICAgICAgIG1ldGhvZFRvRGVsZWdhdGUsXG4gICAgICAgIFtwb3NpdGlvbiwgcmF0ZSwgRWNob0NsaWVudC5MYWJlbENsZWFuc2VyLmNsZWFuTGFiZWxzKGV2ZW50TGFiZWxzKV1cbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2RlbGVnYXRlKFxuICAgICAgICBtZXRob2RUb0RlbGVnYXRlLFxuICAgICAgICBbcG9zaXRpb24sIEVjaG9DbGllbnQuTGFiZWxDbGVhbnNlci5jbGVhbkxhYmVscyhldmVudExhYmVscyldXG4gICAgICApO1xuICAgIH1cblxuICB9O1xuXG4gIC8qKlxuICAgKiBSZWdpc3RlciBhbiBBViBQYXVzZSBldmVudFxuICAgKlxuICAgKiBAcGFyYW0ge051bWJlcn0gcG9zaXRpb24gUG9zaXRpb24gdGhyb3VnaCB0aGUgbWVkaWEgaW4gbXNcbiAgICogQHBhcmFtIHtvYmplY3R9IFtldmVudExhYmVsc10gQ3VzdG9tIGxhYmVscyB0byBzZXQgZm9yIHRoaXMgZXZlbnRcbiAgICogQHJldHVybnMge3RoaXN9IGB0aGlzYFxuICAgKi9cbiAgRWNob0NsaWVudC5wcm90b3R5cGUuYXZQYXVzZUV2ZW50ID0gZnVuY3Rpb24ocG9zaXRpb24sIGV2ZW50TGFiZWxzKSB7XG4gICAgaWYgKCF0aGlzLl9ldmVudHNFbmFibGVkKCkgfHwgIXRoaXMuX2F2RXZlbnRzRW5hYmxlZCgpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5tZWRpYS5zZXRQbGF5aW5nKGZhbHNlKTtcbiAgICB0aGlzLl9hdk5hdmlnYXRpb25FdmVudCgnYXZQYXVzZUV2ZW50JywgcG9zaXRpb24sIGV2ZW50TGFiZWxzKTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZWdpc3RlciBhbiBBViBCdWZmZXIgZXZlbnRcbiAgICpcbiAgICogQHBhcmFtIHtpbnRlZ2VyfSBwb3NpdGlvbiBQb3NpdGlvbiB0aHJvdWdoIHRoZSBtZWRpYSBpbiBtc1xuICAgKiBAcGFyYW0ge29iamVjdH0gW2V2ZW50TGFiZWxzXSBDdXN0b20gbGFiZWxzIHRvIHNldCBmb3IgdGhpcyBldmVudFxuICAgKiBAcmV0dXJucyB7dGhpc30gYHRoaXNgXG4gICAqL1xuICBFY2hvQ2xpZW50LnByb3RvdHlwZS5hdkJ1ZmZlckV2ZW50ID0gZnVuY3Rpb24ocG9zaXRpb24sIGV2ZW50TGFiZWxzKSB7XG4gICAgaWYgKCF0aGlzLl9ldmVudHNFbmFibGVkKCkgfHwgIXRoaXMuX2F2RXZlbnRzRW5hYmxlZCgpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5tZWRpYS5zZXRQbGF5aW5nKGZhbHNlKTtcbiAgICB0aGlzLl9hdk5hdmlnYXRpb25FdmVudCgnYXZCdWZmZXJFdmVudCcsIHBvc2l0aW9uLCBldmVudExhYmVscyk7XG4gICAgdGhpcy5tZWRpYS5zZXRCdWZmZXJpbmcodHJ1ZSk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogUmVnaXN0ZXIgYW4gQVYgRW5kIGV2ZW50XG4gICAqXG4gICAqIEBwYXJhbSB7aW50ZWdlcn0gcG9zaXRpb24gUG9zaXRpb24gdGhyb3VnaCB0aGUgbWVkaWEgaW4gbXNcbiAgICogQHBhcmFtIHtvYmplY3R9IFtldmVudExhYmVsc10gQ3VzdG9tIGxhYmVscyB0byBzZXQgZm9yIHRoaXMgZXZlbnRcbiAgICogQHJldHVybnMge3RoaXN9IGB0aGlzYFxuICAgKi9cbiAgRWNob0NsaWVudC5wcm90b3R5cGUuYXZFbmRFdmVudCA9IGZ1bmN0aW9uKHBvc2l0aW9uLCBldmVudExhYmVscykge1xuICAgIGlmICghdGhpcy5fZXZlbnRzRW5hYmxlZCgpIHx8ICF0aGlzLl9hdkV2ZW50c0VuYWJsZWQoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMubWVkaWEuc2V0UGxheWluZyhmYWxzZSk7XG4gICAgdGhpcy5fYXZOYXZpZ2F0aW9uRXZlbnQoJ2F2RW5kRXZlbnQnLCBwb3NpdGlvbiwgZXZlbnRMYWJlbHMpO1xuXG4gICAgdGhpcy5tZWRpYSA9IG51bGw7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogUmVnaXN0ZXIgYW4gQVYgUmV3aW5kIGV2ZW50XG4gICAqXG4gICAqIEBwYXJhbSB7aW50ZWdlcn0gcG9zaXRpb24gUG9zaXRpb24gdGhyb3VnaCB0aGUgbWVkaWEgaW4gbXNcbiAgICogQHBhcmFtIHtpbnRlZ2VyfSByYXRlIFRoZSByYXRlIG9mIHRoZSByZXdpbmQgKGkuZS4gMiA9IGRvdWJsZS1zcGVlZClcbiAgICogQHBhcmFtIHtvYmplY3R9IFtldmVudExhYmVsc10gQ3VzdG9tIGxhYmVscyB0byBzZXQgZm9yIHRoaXMgZXZlbnRcbiAgICogQHJldHVybnMge3RoaXN9IGB0aGlzYFxuICAgKi9cbiAgRWNob0NsaWVudC5wcm90b3R5cGUuYXZSZXdpbmRFdmVudCA9IGZ1bmN0aW9uKHBvc2l0aW9uLCByYXRlLCBldmVudExhYmVscykge1xuICAgIGlmICghdGhpcy5fZXZlbnRzRW5hYmxlZCgpIHx8ICF0aGlzLl9hdkV2ZW50c0VuYWJsZWQoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX2F2TmF2aWdhdGlvbkV2ZW50KCdhdlJld2luZEV2ZW50JywgcG9zaXRpb24sIGV2ZW50TGFiZWxzLCByYXRlKTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZWdpc3RlciBhbiBBViBGYXN0IEZvcndhcmQgZXZlbnRcbiAgICpcbiAgICogQHBhcmFtIHtpbnRlZ2VyfSBwb3NpdGlvbiBQb3NpdGlvbiB0aHJvdWdoIHRoZSBtZWRpYSBpbiBtc1xuICAgKiBAcGFyYW0ge2ludGVnZXJ9IHJhdGUgVGhlIHJhdGUgb2YgdGhlIGZhc3QtZm9yd2FyZCAoaS5lLiAyID0gZG91YmxlLXNwZWVkKVxuICAgKiBAcGFyYW0ge29iamVjdH0gW2V2ZW50TGFiZWxzXSBDdXN0b20gbGFiZWxzIHRvIHNldCBmb3IgdGhpcyBldmVudFxuICAgKiBAcmV0dXJucyB7dGhpc30gYHRoaXNgXG4gICAqL1xuICBFY2hvQ2xpZW50LnByb3RvdHlwZS5hdkZhc3RGb3J3YXJkRXZlbnQgPSBmdW5jdGlvbihcbiAgICBwb3NpdGlvbixcbiAgICByYXRlLFxuICAgIGV2ZW50TGFiZWxzXG4gICkge1xuICAgIGlmICghdGhpcy5fZXZlbnRzRW5hYmxlZCgpIHx8ICF0aGlzLl9hdkV2ZW50c0VuYWJsZWQoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX2F2TmF2aWdhdGlvbkV2ZW50KCdhdkZhc3RGb3J3YXJkRXZlbnQnLCBwb3NpdGlvbiwgZXZlbnRMYWJlbHMsIHJhdGUpO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVyIGFuIEFWIFNlZWsgZXZlbnRcbiAgICpcbiAgICogQHBhcmFtIHtpbnRlZ2VyfSBwb3NpdGlvbiBQb3NpdGlvbiB0aHJvdWdoIHRoZSBtZWRpYSBpbiBtc1xuICAgKiBAcGFyYW0ge29iamVjdH0gW2V2ZW50TGFiZWxzXSBDdXN0b20gbGFiZWxzIHRvIHNldCBmb3IgdGhpcyBldmVudFxuICAgKiBAcmV0dXJucyB7dGhpc30gYHRoaXNgXG4gICAqL1xuICBFY2hvQ2xpZW50LnByb3RvdHlwZS5hdlNlZWtFdmVudCA9IGZ1bmN0aW9uKHBvc2l0aW9uLCBldmVudExhYmVscykge1xuICAgIGlmICghdGhpcy5fZXZlbnRzRW5hYmxlZCgpIHx8ICF0aGlzLl9hdkV2ZW50c0VuYWJsZWQoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX2F2TmF2aWdhdGlvbkV2ZW50KCdhdlNlZWtFdmVudCcsIHBvc2l0aW9uLCBldmVudExhYmVscyk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogUmVnaXN0ZXIgYSBjdXN0b20gQVYgZXZlbnRcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGFjdGlvblR5cGUgVGhlIHR5cGUgb2YgYWN0aW9uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBhY3Rpb25OYW1lIFRoZSBuYW1lIG9mIHRoZSBhY3Rpb25cbiAgICogQHBhcmFtIHtpbnRlZ2VyfSBwb3NpdGlvbiBQb3NpdGlvbiBpbiBtZWRpYSBpbiBtcyAoMCBmb3Igc2ltdWxjYXN0KVxuICAgKiBAcGFyYW0ge29iamVjdH0gW2V2ZW50TGFiZWxzXSBDdXN0b20gbGFiZWxzIHRvIHNldCBmb3IgdGhpcyBldmVudFxuICAgKiBAcmV0dXJucyB7dGhpc30gYHRoaXNgXG4gICAqIEBleGFtcGxlXG4gICAqIGVjaG8uYXZVc2VyQWN0aW9uRXZlbnQoJ2NsaWNrJywnYXZfcmVsYXRlZF9idXR0b24nLDUwMDApO1xuICAgKi9cbiAgRWNob0NsaWVudC5wcm90b3R5cGUuYXZVc2VyQWN0aW9uRXZlbnQgPSBmdW5jdGlvbihcbiAgICBhY3Rpb25UeXBlLFxuICAgIGFjdGlvbk5hbWUsXG4gICAgcG9zaXRpb24sXG4gICAgZXZlbnRMYWJlbHNcbiAgKSB7XG4gICAgaWYgKCF0aGlzLl9ldmVudHNFbmFibGVkKCkgfHwgIXRoaXMuX2F2RXZlbnRzRW5hYmxlZCgpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2xpdmVCcm9rZXIpIHtcbiAgICAgIHBvc2l0aW9uID0gdGhpcy5fbGl2ZUJyb2tlci5nZXRQb3NpdGlvbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICBwb3NpdGlvbiA9IHRoaXMuX2NsZWFuUG9zaXRpb24ocG9zaXRpb24pO1xuICAgICAgcG9zaXRpb24gPSB0aGlzLl9wcmV2ZW50UG9zaXRpb25FeGNlZWRpbmdNZWRpYUxlbmd0aChwb3NpdGlvbik7XG4gICAgfVxuXG4gICAgdmFyIGNsZWFuTGFiZWxzID0gRWNob0NsaWVudC5MYWJlbENsZWFuc2VyLmNsZWFuTGFiZWxzKGV2ZW50TGFiZWxzKTtcbiAgICB0aGlzLl9kZWxlZ2F0ZShcbiAgICAgICdhdlVzZXJBY3Rpb25FdmVudCcsXG4gICAgICBbYWN0aW9uVHlwZSwgYWN0aW9uTmFtZSwgcG9zaXRpb24sIGNsZWFuTGFiZWxzXVxuICAgICk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlbGVhc2UgYSBzdXBwcmVzc2VkIHBsYXkgZXZlbnRcbiAgICpcbiAgICogQHJldHVybnMge3RoaXN9IGB0aGlzYFxuICAgKi9cbiAgRWNob0NsaWVudC5wcm90b3R5cGUucmVsZWFzZVN1cHByZXNzZWRQbGF5ID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKCF0aGlzLl9ldmVudHNFbmFibGVkKCkgfHwgIXRoaXMuX2F2RXZlbnRzRW5hYmxlZCgpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX3N1cHByZXNzaW5nUGxheUV2ZW50KSB7XG4gICAgICB0aGlzLl9zdXBwcmVzc2luZ1BsYXlFdmVudCA9IGZhbHNlO1xuICAgICAgdGhpcy5hdlBsYXlFdmVudCh0aGlzLl9saXZlQnJva2VyLmdldFBvc2l0aW9uKCksXG4gICAgICAgIHRoaXMuX3N1cHByZXNzZWRQbGF5RXZlbnRMYWJlbHMpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgRWNob0NsaWVudC5wcm90b3R5cGUuX2NsZWFyTWVkaWEgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnJlbW92ZUxhYmVsKENTS2V5cy5NRURJQV9USU1FU1RBTVApO1xuICAgIHRoaXMucmVtb3ZlTGFiZWwoQ1NLZXlzLkVTU19FTkFCTEVEKTtcbiAgICB0aGlzLnJlbW92ZUxhYmVsKENTS2V5cy5FU1NfRU5SSUNIRUQpO1xuICAgIHRoaXMucmVtb3ZlTGFiZWwoQ1NLZXlzLkVTU19TVUNDRVNTKTtcbiAgICB0aGlzLnJlbW92ZUxhYmVsKENTS2V5cy5FU1NfRVJST1IpO1xuICAgIHRoaXMucmVtb3ZlTGFiZWwoQ1NLZXlzLkVTU19TVEFUVVNfQ09ERSk7XG5cbiAgICBpZiAodGhpcy5tZWRpYSAhPT0gbnVsbCkge1xuICAgICAgdGhpcy5tZWRpYSA9IG51bGw7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2xpdmVCcm9rZXIgaW5zdGFuY2VvZiBMaXZlQnJva2VyKSB7XG4gICAgICB0aGlzLl9saXZlQnJva2VyLnN0b3AoKTtcbiAgICAgIHRoaXMuX2xpdmVCcm9rZXIgPSBudWxsO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9vbkRlbWFuZEJyb2tlciBpbnN0YW5jZW9mIE9uRGVtYW5kQnJva2VyKSB7XG4gICAgICB0aGlzLl9vbkRlbWFuZEJyb2tlci5zdG9wKCk7XG4gICAgICB0aGlzLl9vbkRlbWFuZEJyb2tlciA9IG51bGw7XG4gICAgfVxuXG4gICAgdGhpcy5faXNQbGF5aW5nID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX3ByZXZpb3VzUGxheVBvc2l0aW9uID0gdW5kZWZpbmVkO1xuICB9O1xuXG4gIC8qKlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgRWNob0NsaWVudC5wcm90b3R5cGUuX3Bvc2l0aW9uRXhjZWVkc01lZGlhTGVuZ3RoID0gZnVuY3Rpb24ocG9zaXRpb24pIHtcblxuICAgIGlmICh0aGlzLm1lZGlhICYmIHRoaXMubWVkaWEubGVuZ3RoID4gMCAmJiBwb3NpdGlvbiA+PSAodGhpcy5tZWRpYS5sZW5ndGggLSAxMDAwKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG4gIC8qKlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgRWNob0NsaWVudC5wcm90b3R5cGUuX3ByZXZlbnRQb3NpdGlvbkV4Y2VlZGluZ01lZGlhTGVuZ3RoID0gZnVuY3Rpb24ocG9zaXRpb24pIHtcblxuICAgIGlmICh0aGlzLl9wb3NpdGlvbkV4Y2VlZHNNZWRpYUxlbmd0aChwb3NpdGlvbikpIHtcbiAgICAgIHJldHVybiB0aGlzLm1lZGlhLmxlbmd0aDtcbiAgICB9XG5cbiAgICByZXR1cm4gcG9zaXRpb247XG4gIH07XG5cbiAgRWNob0NsaWVudC5Db25zdW1lcnMgPSB7IC8vTk9URTogbXVzdCBiZSBwb3dlcnMgb2YgMlxuICAgIENPTVNDT1JFOiAxIDw8IDAsXG4gICAgQkFSQjogMSA8PCAxLFxuICAgIEFUSTogMSA8PCAyXG4gIH07XG5cbiAgcmV0dXJuIEVjaG9DbGllbnQ7XG59KTtcbiIsImRlZmluZShmdW5jdGlvbigpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIHZhciBQcm9kdWNlcnMgPSByZXF1aXJlKCcuL3Byb2R1Y2VycycpO1xuXG4gIHZhciBkZXN0aW5hdGlvbnMgPSB7XG4gICAgLy8gUGVybWl0dGVkIHZhbHVlcyBmb3Igc2V0dGluZyBEZXN0aW5hdGlvbiBzaXRlIGlkc1xuICAgIERFRkFVTFQ6IHtcbiAgICAgIGlkOiAnNTk2MDY4JywgZGVmYXVsdFByb2R1Y2VyOiBQcm9kdWNlcnMuQkJDLCBpc1Rlc3Q6IHRydWVcbiAgICB9LFxuICAgIEFDQ09VTlQ6IHtcbiAgICAgIGlkOiAnNTk4MjUwJywgZGVmYXVsdFByb2R1Y2VyOiBQcm9kdWNlcnMuQUNDT1VOVCwgaXNUZXN0OiBmYWxzZVxuICAgIH0sXG4gICAgQUNDT1VOVF9URVNUOiB7XG4gICAgICBpZDogJzU5ODI1MicsIGRlZmF1bHRQcm9kdWNlcjogUHJvZHVjZXJzLkFDQ09VTlQsIGlzVGVzdDogdHJ1ZVxuICAgIH0sXG4gICAgQVVESUVOQ0VfUE9SVEFMOiB7XG4gICAgICBpZDogJzYwMjEzNicsIGRlZmF1bHRQcm9kdWNlcjogUHJvZHVjZXJzLkFVRElFTkNFX1NFUlZJQ0VTLCBpc1Rlc3Q6IGZhbHNlXG4gICAgfSxcbiAgICBBVURJRU5DRV9QT1JUQUxfVEVTVDoge1xuICAgICAgaWQ6ICc2MDIxMzcnLCBkZWZhdWx0UHJvZHVjZXI6IFByb2R1Y2Vycy5BVURJRU5DRV9TRVJWSUNFUywgaXNUZXN0OiB0cnVlXG4gICAgfSxcbiAgICBBVURJRU5DRV9TRVJWSUNFU19QUzoge1xuICAgICAgaWQ6ICc2MDIxNjcnLCBkZWZhdWx0UHJvZHVjZXI6IFByb2R1Y2Vycy5BVURJRU5DRV9TRVJWSUNFUywgaXNUZXN0OiBmYWxzZVxuICAgIH0sXG4gICAgQVVESUVOQ0VfU0VSVklDRVNfUFNfVEVTVDoge1xuICAgICAgaWQ6ICc2MDIxNjgnLCBkZWZhdWx0UHJvZHVjZXI6IFByb2R1Y2Vycy5BVURJRU5DRV9TRVJWSUNFUywgaXNUZXN0OiB0cnVlXG4gICAgfSxcbiAgICBCQkNfQ09SUE9SQVRFX1BTOiB7XG4gICAgICBpZDogJzYwMzU1MCcsIGRlZmF1bHRQcm9kdWNlcjogUHJvZHVjZXJzLkJCQywgaXNUZXN0OiBmYWxzZVxuICAgIH0sXG4gICAgQkJDX0NPUlBPUkFURV9QU19URVNUOiB7XG4gICAgICBpZDogJzYwMzU1MScsIGRlZmF1bHRQcm9kdWNlcjogUHJvZHVjZXJzLkJCQywgaXNUZXN0OiB0cnVlXG4gICAgfSxcbiAgICBCQkNfU0hPUDoge1xuICAgICAgaWQ6ICc1OTgyNTMnLCBkZWZhdWx0UHJvZHVjZXI6IFByb2R1Y2Vycy5CQkNfU0hPUCwgaXNUZXN0OiBmYWxzZVxuICAgIH0sXG4gICAgQkJDX1NIT1BfVEVTVDoge1xuICAgICAgaWQ6ICc1OTgyNTQnLCBkZWZhdWx0UHJvZHVjZXI6IFByb2R1Y2Vycy5CQkNfU0hPUCwgaXNUZXN0OiB0cnVlXG4gICAgfSxcbiAgICBCQkNfU1lORElDQVRJT046IHtcbiAgICAgIGlkOiAnNjAxNzE4JywgZGVmYXVsdFByb2R1Y2VyOiBQcm9kdWNlcnMuQkJDLCBpc1Rlc3Q6IGZhbHNlXG4gICAgfSxcbiAgICBCQkNfU1lORElDQVRJT05fVEVTVDoge1xuICAgICAgaWQ6ICc2MDE3MTknLCBkZWZhdWx0UHJvZHVjZXI6IFByb2R1Y2Vycy5CQkMsIGlzVGVzdDogdHJ1ZVxuICAgIH0sXG4gICAgQkJDX1RIUkVFOiB7XG4gICAgICBpZDogJzU5ODI1NScsIGRlZmF1bHRQcm9kdWNlcjogUHJvZHVjZXJzLkJCQ19USFJFRSwgaXNUZXN0OiBmYWxzZVxuICAgIH0sXG4gICAgQkJDX1RIUkVFX1RFU1Q6IHtcbiAgICAgIGlkOiAnNTk4MjU2JywgZGVmYXVsdFByb2R1Y2VyOiBQcm9kdWNlcnMuQkJDX1RIUkVFLCBpc1Rlc3Q6IHRydWVcbiAgICB9LFxuICAgIEJJVEVTSVpFOiB7XG4gICAgICBpZDogJzU5ODI1NycsIGRlZmF1bHRQcm9kdWNlcjogUHJvZHVjZXJzLkJJVEVTSVpFLCBpc1Rlc3Q6IGZhbHNlXG4gICAgfSxcbiAgICBCSVRFU0laRV9URVNUOiB7XG4gICAgICBpZDogJzU5ODI1OCcsIGRlZmF1bHRQcm9kdWNlcjogUHJvZHVjZXJzLkJJVEVTSVpFLCBpc1Rlc3Q6IHRydWVcbiAgICB9LFxuICAgIEJMT0dTX1BTOiB7XG4gICAgICBpZDogJzYwMzU0NicsIGRlZmF1bHRQcm9kdWNlcjogUHJvZHVjZXJzLkJCQywgaXNUZXN0OiBmYWxzZVxuICAgIH0sXG4gICAgQkxPR1NfUFNfVEVTVDoge1xuICAgICAgaWQ6ICc2MDM1NDcnLCBkZWZhdWx0UHJvZHVjZXI6IFByb2R1Y2Vycy5CQkMsIGlzVGVzdDogdHJ1ZVxuICAgIH0sXG4gICAgQlJJVEJPWDoge1xuICAgICAgaWQ6ICc1OTgyNTknLCBkZWZhdWx0UHJvZHVjZXI6IFByb2R1Y2Vycy5CUklUQk9YLCBpc1Rlc3Q6IGZhbHNlXG4gICAgfSxcbiAgICBCUklUQk9YX1RFU1Q6IHtcbiAgICAgIGlkOiAnNTk4MjYwJywgZGVmYXVsdFByb2R1Y2VyOiBQcm9kdWNlcnMuQlJJVEJPWCwgaXNUZXN0OiB0cnVlXG4gICAgfSxcbiAgICBDQkJDOiB7XG4gICAgICBpZDogJzU5ODI2MScsIGRlZmF1bHRQcm9kdWNlcjogUHJvZHVjZXJzLkNCQkMsIGlzVGVzdDogZmFsc2VcbiAgICB9LFxuICAgIENCQkNfVEVTVDoge1xuICAgICAgaWQ6ICc1OTgyNjInLCBkZWZhdWx0UHJvZHVjZXI6IFByb2R1Y2Vycy5DQkJDLCBpc1Rlc3Q6IHRydWVcbiAgICB9LFxuICAgIENCRUVCSUVTOiB7XG4gICAgICBpZDogJzU5ODI2MycsIGRlZmF1bHRQcm9kdWNlcjogUHJvZHVjZXJzLkNCRUVCSUVTLCBpc1Rlc3Q6IGZhbHNlXG4gICAgfSxcbiAgICBDQkVFQklFU19URVNUOiB7XG4gICAgICBpZDogJzU5ODI2NCcsIGRlZmF1bHRQcm9kdWNlcjogUHJvZHVjZXJzLkNCRUVCSUVTLCBpc1Rlc3Q6IHRydWVcbiAgICB9LFxuICAgIEZFQVRVUkVfU0lURVNfR05MOiB7XG4gICAgICBpZDogJzU5ODI2NScsIGRlZmF1bHRQcm9kdWNlcjogUHJvZHVjZXJzLkdOTF9IT01FUEFHRSwgaXNUZXN0OiBmYWxzZVxuICAgIH0sXG4gICAgRkVBVFVSRV9TSVRFU19HTkxfVEVTVDoge1xuICAgICAgaWQ6ICc1OTgyNjYnLCBkZWZhdWx0UHJvZHVjZXI6IFByb2R1Y2Vycy5HTkxfSE9NRVBBR0UsIGlzVGVzdDogdHJ1ZVxuICAgIH0sXG4gICAgRk9PRDoge1xuICAgICAgaWQ6ICc1OTgyNjcnLCBkZWZhdWx0UHJvZHVjZXI6IFByb2R1Y2Vycy5CQkNfRk9PRCwgaXNUZXN0OiBmYWxzZVxuICAgIH0sXG4gICAgRk9PRF9URVNUOiB7XG4gICAgICBpZDogJzU5ODI2OCcsIGRlZmF1bHRQcm9kdWNlcjogUHJvZHVjZXJzLkJCQ19GT09ELCBpc1Rlc3Q6IHRydWVcbiAgICB9LFxuICAgIEdBTUVTX1BTOiB7XG4gICAgICBpZDogJzU5OTQ1MicsIGRlZmF1bHRQcm9kdWNlcjogUHJvZHVjZXJzLkJCQywgaXNUZXN0OiBmYWxzZVxuICAgIH0sXG4gICAgR0FNRVNfUFNfVEVTVDoge1xuICAgICAgaWQ6ICc1OTk0NTQnLCBkZWZhdWx0UHJvZHVjZXI6IFByb2R1Y2Vycy5CQkMsIGlzVGVzdDogdHJ1ZVxuICAgIH0sXG4gICAgR0FURVdBWToge1xuICAgICAgaWQ6ICc1OTgyNjknLCBkZWZhdWx0UHJvZHVjZXI6IFByb2R1Y2Vycy5HQVRFV0FZLCBpc1Rlc3Q6IGZhbHNlXG4gICAgfSxcbiAgICBHQVRFV0FZX1RFU1Q6IHtcbiAgICAgIGlkOiAnNTk4MjcwJywgZGVmYXVsdFByb2R1Y2VyOiBQcm9kdWNlcnMuR0FURVdBWSwgaXNUZXN0OiB0cnVlXG4gICAgfSxcbiAgICBIT01FUEFHRV9HTkw6IHtcbiAgICAgIGlkOiAnNTk4MjcxJywgZGVmYXVsdFByb2R1Y2VyOiBQcm9kdWNlcnMuR05MX0hPTUVQQUdFLCBpc1Rlc3Q6IGZhbHNlXG4gICAgfSxcbiAgICBIT01FUEFHRV9HTkxfVEVTVDoge1xuICAgICAgaWQ6ICc1OTgyNzInLCBkZWZhdWx0UHJvZHVjZXI6IFByb2R1Y2Vycy5HTkxfSE9NRVBBR0UsIGlzVGVzdDogdHJ1ZVxuICAgIH0sXG4gICAgSE9NRVBBR0VfUFM6IHtcbiAgICAgIGlkOiAnNTk4MjczJywgZGVmYXVsdFByb2R1Y2VyOiBQcm9kdWNlcnMuUFNfSE9NRVBBR0UsIGlzVGVzdDogZmFsc2VcbiAgICB9LFxuICAgIEhPTUVQQUdFX1BTX1RFU1Q6IHtcbiAgICAgIGlkOiAnNTk4Mjc0JywgZGVmYXVsdFByb2R1Y2VyOiBQcm9kdWNlcnMuUFNfSE9NRVBBR0UsIGlzVGVzdDogdHJ1ZVxuICAgIH0sXG4gICAgSURFQVM6IHtcbiAgICAgIGlkOiAnNTk4Mjc1JywgZGVmYXVsdFByb2R1Y2VyOiBQcm9kdWNlcnMuQkJDLCBpc1Rlc3Q6IGZhbHNlXG4gICAgfSxcbiAgICBJREVBU19URVNUOiB7XG4gICAgICBpZDogJzU5ODI3NicsIGRlZmF1bHRQcm9kdWNlcjogUHJvZHVjZXJzLkJCQywgaXNUZXN0OiB0cnVlXG4gICAgfSxcbiAgICBJUExBWUVSOiB7XG4gICAgICBpZDogJzU5ODI3NycsIGRlZmF1bHRQcm9kdWNlcjogUHJvZHVjZXJzLklQTEFZRVIsIGlzVGVzdDogZmFsc2VcbiAgICB9LFxuICAgIElQTEFZRVJfVEVTVDoge1xuICAgICAgaWQ6ICc1OTgyNzgnLCBkZWZhdWx0UHJvZHVjZXI6IFByb2R1Y2Vycy5JUExBWUVSLCBpc1Rlc3Q6IHRydWVcbiAgICB9LFxuICAgIE1FRElBX0FDVElPTjoge1xuICAgICAgaWQ6ICc1OTgyNzknLCBkZWZhdWx0UHJvZHVjZXI6IFByb2R1Y2Vycy5NRURJQV9BQ1RJT04sIGlzVGVzdDogZmFsc2VcbiAgICB9LFxuICAgIE1FRElBX0FDVElPTl9URVNUOiB7XG4gICAgICBpZDogJzU5ODI4MCcsIGRlZmF1bHRQcm9kdWNlcjogUHJvZHVjZXJzLk1FRElBX0FDVElPTiwgaXNUZXN0OiB0cnVlXG4gICAgfSxcbiAgICBNT05JVE9SSU5HOiB7XG4gICAgICBpZDogJzU5ODI4MScsIGRlZmF1bHRQcm9kdWNlcjogUHJvZHVjZXJzLk1PTklUT1JJTkcsIGlzVGVzdDogZmFsc2VcbiAgICB9LFxuICAgIE1PTklUT1JJTkdfVEVTVDoge1xuICAgICAgaWQ6ICc1OTgyODInLCBkZWZhdWx0UHJvZHVjZXI6IFByb2R1Y2Vycy5NT05JVE9SSU5HLCBpc1Rlc3Q6IHRydWVcbiAgICB9LFxuICAgIE1VU0lDOiB7XG4gICAgICBpZDogJzU5ODI4MycsIGRlZmF1bHRQcm9kdWNlcjogUHJvZHVjZXJzLkJCQ19NVVNJQywgaXNUZXN0OiBmYWxzZVxuICAgIH0sXG4gICAgTVVTSUNfVEVTVDoge1xuICAgICAgaWQ6ICc1OTgyODQnLCBkZWZhdWx0UHJvZHVjZXI6IFByb2R1Y2Vycy5CQkNfTVVTSUMsIGlzVGVzdDogdHJ1ZVxuICAgIH0sXG4gICAgTkVXU19QUzoge1xuICAgICAgaWQ6ICc1OTgyODUnLCBkZWZhdWx0UHJvZHVjZXI6IFByb2R1Y2Vycy5ORVdTLCBpc1Rlc3Q6IGZhbHNlXG4gICAgfSxcbiAgICBORVdTX1BTX1RFU1Q6IHtcbiAgICAgIGlkOiAnNTk4Mjg2JywgZGVmYXVsdFByb2R1Y2VyOiBQcm9kdWNlcnMuTkVXUywgaXNUZXN0OiB0cnVlXG4gICAgfSxcbiAgICBORVdTX0dOTDoge1xuICAgICAgaWQ6ICc1OTgyODcnLCBkZWZhdWx0UHJvZHVjZXI6IFByb2R1Y2Vycy5ORVdTLCBpc1Rlc3Q6IGZhbHNlXG4gICAgfSxcbiAgICBORVdTX0dOTF9URVNUOiB7XG4gICAgICBpZDogJzU5ODI4OCcsIGRlZmF1bHRQcm9kdWNlcjogUHJvZHVjZXJzLk5FV1MsIGlzVGVzdDogdHJ1ZVxuICAgIH0sXG4gICAgTkVXU19MQU5HVUFHRVNfR05MOiB7XG4gICAgICBpZDogJzU5ODI4OScsIGRlZmF1bHRQcm9kdWNlcjogUHJvZHVjZXJzLk5FV1MsIGlzVGVzdDogZmFsc2VcbiAgICB9LFxuICAgIE5FV1NfTEFOR1VBR0VTX0dOTF9URVNUOiB7XG4gICAgICBpZDogJzU5ODI5MCcsIGRlZmF1bHRQcm9kdWNlcjogUHJvZHVjZXJzLk5FV1MsIGlzVGVzdDogdHJ1ZVxuICAgIH0sXG4gICAgTkVXU19MQU5HVUFHRVNfUFM6IHtcbiAgICAgIGlkOiAnNTk4MjkxJywgZGVmYXVsdFByb2R1Y2VyOiBQcm9kdWNlcnMuTkVXUywgaXNUZXN0OiBmYWxzZVxuICAgIH0sXG4gICAgTkVXU19MQU5HVUFHRVNfUFNfVEVTVDoge1xuICAgICAgaWQ6ICc1OTgyOTInLCBkZWZhdWx0UHJvZHVjZXI6IFByb2R1Y2Vycy5ORVdTLCBpc1Rlc3Q6IHRydWVcbiAgICB9LFxuICAgIE5FV1NST1VORDoge1xuICAgICAgaWQ6ICc1OTgyOTMnLCBkZWZhdWx0UHJvZHVjZXI6IFByb2R1Y2Vycy5ORVdTUk9VTkQsIGlzVGVzdDogZmFsc2VcbiAgICB9LFxuICAgIE5FV1NST1VORF9URVNUOiB7XG4gICAgICBpZDogJzU5ODI5NCcsIGRlZmF1bHRQcm9kdWNlcjogUHJvZHVjZXJzLk5FV1NST1VORCwgaXNUZXN0OiB0cnVlXG4gICAgfSxcbiAgICBPVEhFUjoge1xuICAgICAgaWQ6ICc1OTgyOTUnLCBkZWZhdWx0UHJvZHVjZXI6IFByb2R1Y2Vycy5PVEhFUiwgaXNUZXN0OiBmYWxzZVxuICAgIH0sXG4gICAgT1RIRVJfVEVTVDoge1xuICAgICAgaWQ6ICc1OTgyOTcnLCBkZWZhdWx0UHJvZHVjZXI6IFByb2R1Y2Vycy5PVEhFUiwgaXNUZXN0OiB0cnVlXG4gICAgfSxcbiAgICBPV05fSVQ6IHtcbiAgICAgIGlkOiAnNTk4Mjk4JywgZGVmYXVsdFByb2R1Y2VyOiBQcm9kdWNlcnMuQ0JCQywgaXNUZXN0OiBmYWxzZVxuICAgIH0sXG4gICAgT1dOX0lUX1RFU1Q6IHtcbiAgICAgIGlkOiAnNTk4Mjk5JywgZGVmYXVsdFByb2R1Y2VyOiBQcm9kdWNlcnMuQ0JCQywgaXNUZXN0OiB0cnVlXG4gICAgfSxcbiAgICBQUk9HUkFNTUVTX1BTOiB7XG4gICAgICBpZDogJzU5ODMwMCcsIGRlZmF1bHRQcm9kdWNlcjogUHJvZHVjZXJzLlBST0dSQU1NRVMsIGlzVGVzdDogZmFsc2VcbiAgICB9LFxuICAgIFBST0dSQU1NRVNfUFNfVEVTVDoge1xuICAgICAgaWQ6ICc1OTgzMDEnLCBkZWZhdWx0UHJvZHVjZXI6IFByb2R1Y2Vycy5QUk9HUkFNTUVTLCBpc1Rlc3Q6IHRydWVcbiAgICB9LFxuICAgIFJFRF9CVVRUT05fUFM6IHtcbiAgICAgIGlkOiAnNjAxMTkyJywgZGVmYXVsdFByb2R1Y2VyOiBQcm9kdWNlcnMuQkJDLCBpc1Rlc3Q6IGZhbHNlXG4gICAgfSxcbiAgICBSRURfQlVUVE9OX1BTX1RFU1Q6IHtcbiAgICAgIGlkOiAnNjAxMTkzJywgZGVmYXVsdFByb2R1Y2VyOiBQcm9kdWNlcnMuQkJDLCBpc1Rlc3Q6IHRydWVcbiAgICB9LFxuICAgIFJFV0lORF9QUzoge1xuICAgICAgaWQ6ICc2MDM1NTInLCBkZWZhdWx0UHJvZHVjZXI6IFByb2R1Y2Vycy5CQkMsIGlzVGVzdDogZmFsc2VcbiAgICB9LFxuICAgIFJFV0lORF9QU19URVNUOiB7XG4gICAgICBpZDogJzYwMzU1MycsIGRlZmF1bHRQcm9kdWNlcjogUHJvZHVjZXJzLkJCQywgaXNUZXN0OiB0cnVlXG4gICAgfSxcbiAgICBTRUFSQ0hfR05MOiB7XG4gICAgICBpZDogJzU5ODMwMicsIGRlZmF1bHRQcm9kdWNlcjogUHJvZHVjZXJzLlNFQVJDSCwgaXNUZXN0OiBmYWxzZVxuICAgIH0sXG4gICAgU0VBUkNIX0dOTF9URVNUOiB7XG4gICAgICBpZDogJzU5ODMwMycsIGRlZmF1bHRQcm9kdWNlcjogUHJvZHVjZXJzLlNFQVJDSCwgaXNUZXN0OiB0cnVlXG4gICAgfSxcbiAgICBTRUFSQ0hfUFM6IHtcbiAgICAgIGlkOiAnNTk4MzA0JywgZGVmYXVsdFByb2R1Y2VyOiBQcm9kdWNlcnMuU0VBUkNILCBpc1Rlc3Q6IGZhbHNlXG4gICAgfSxcbiAgICBTRUFSQ0hfUFNfVEVTVDoge1xuICAgICAgaWQ6ICc1OTgzMDUnLCBkZWZhdWx0UHJvZHVjZXI6IFByb2R1Y2Vycy5TRUFSQ0gsIGlzVGVzdDogdHJ1ZVxuICAgIH0sXG4gICAgU09VTkRTOiB7XG4gICAgICBpZDogJzU5ODMwNicsIGRlZmF1bHRQcm9kdWNlcjogUHJvZHVjZXJzLlNPVU5EUywgaXNUZXN0OiBmYWxzZVxuICAgIH0sXG4gICAgU09VTkRTX1RFU1Q6IHtcbiAgICAgIGlkOiAnNTk4MzA3JywgZGVmYXVsdFByb2R1Y2VyOiBQcm9kdWNlcnMuU09VTkRTLCBpc1Rlc3Q6IHRydWVcbiAgICB9LFxuICAgIFNQT1JUX0dOTDoge1xuICAgICAgaWQ6ICc1OTgzMDgnLCBkZWZhdWx0UHJvZHVjZXI6IFByb2R1Y2Vycy5TUE9SVCwgaXNUZXN0OiBmYWxzZVxuICAgIH0sXG4gICAgU1BPUlRfR05MX1RFU1Q6IHtcbiAgICAgIGlkOiAnNTk4MzA5JywgZGVmYXVsdFByb2R1Y2VyOiBQcm9kdWNlcnMuU1BPUlQsIGlzVGVzdDogdHJ1ZVxuICAgIH0sXG4gICAgU1BPUlRfUFM6IHtcbiAgICAgIGlkOiAnNTk4MzEwJywgZGVmYXVsdFByb2R1Y2VyOiBQcm9kdWNlcnMuU1BPUlQsIGlzVGVzdDogZmFsc2VcbiAgICB9LFxuICAgIFNQT1JUX1BTX1RFU1Q6IHtcbiAgICAgIGlkOiAnNTk4MzExJywgZGVmYXVsdFByb2R1Y2VyOiBQcm9kdWNlcnMuU1BPUlQsIGlzVGVzdDogdHJ1ZVxuICAgIH0sXG4gICAgU1RPUllXT1JLU19HTkw6IHtcbiAgICAgIGlkOiAnNTk4MzEyJywgZGVmYXVsdFByb2R1Y2VyOiBQcm9kdWNlcnMuR05MX1NUT1JZV09SS1MsIGlzVGVzdDogZmFsc2VcbiAgICB9LFxuICAgIFNUT1JZV09SS1NfR05MX1RFU1Q6IHtcbiAgICAgIGlkOiAnNTk4MzEzJywgZGVmYXVsdFByb2R1Y2VyOiBQcm9kdWNlcnMuR05MX1NUT1JZV09SS1MsIGlzVGVzdDogdHJ1ZVxuICAgIH0sXG4gICAgU1VCVElUTEVTX1BTOiB7XG4gICAgICBpZDogJzYwMzU0OCcsIGRlZmF1bHRQcm9kdWNlcjogUHJvZHVjZXJzLlBST0dSQU1NRVMsIGlzVGVzdDogZmFsc2VcbiAgICB9LFxuICAgIFNVQlRJVExFU19QU19URVNUOiB7XG4gICAgICBpZDogJzYwMzU0OScsIGRlZmF1bHRQcm9kdWNlcjogUHJvZHVjZXJzLlBST0dSQU1NRVMsIGlzVGVzdDogdHJ1ZVxuICAgIH0sXG4gICAgU1lORElDQVRJT05fUEFSVE5FUlNfR05MOiB7XG4gICAgICBpZDogJzU5ODMxNCcsIGRlZmF1bHRQcm9kdWNlcjogUHJvZHVjZXJzLldTX1BBUlRORVJTX0IyQiwgaXNUZXN0OiBmYWxzZVxuICAgIH0sXG4gICAgU1lORElDQVRJT05fUEFSVE5FUlNfR05MX1RFU1Q6IHtcbiAgICAgIGlkOiAnNTk4MzE1JywgZGVmYXVsdFByb2R1Y2VyOiBQcm9kdWNlcnMuV1NfUEFSVE5FUlNfQjJCLCBpc1Rlc3Q6IHRydWVcbiAgICB9LFxuICAgIFRBU1RFUjoge1xuICAgICAgaWQ6ICc1OTgzMTYnLCBkZWZhdWx0UHJvZHVjZXI6IFByb2R1Y2Vycy5UQVNURVIsIGlzVGVzdDogZmFsc2VcbiAgICB9LFxuICAgIFRBU1RFUl9URVNUOiB7XG4gICAgICBpZDogJzU5ODMxNycsIGRlZmF1bHRQcm9kdWNlcjogUHJvZHVjZXJzLlRBU1RFUiwgaXNUZXN0OiB0cnVlXG4gICAgfSxcbiAgICBURUFDSDoge1xuICAgICAgaWQ6ICc1OTgzMTgnLCBkZWZhdWx0UHJvZHVjZXI6IFByb2R1Y2Vycy5CQkMsIGlzVGVzdDogZmFsc2VcbiAgICB9LFxuICAgIFRFQUNIX1RFU1Q6IHtcbiAgICAgIGlkOiAnNTk4MzIwJywgZGVmYXVsdFByb2R1Y2VyOiBQcm9kdWNlcnMuQkJDLCBpc1Rlc3Q6IHRydWVcbiAgICB9LFxuICAgIFZPSUNFOiB7XG4gICAgICBpZDogJzU5ODMyNicsIGRlZmF1bHRQcm9kdWNlcjogUHJvZHVjZXJzLlZPSUNFLCBpc1Rlc3Q6IGZhbHNlXG4gICAgfSxcbiAgICBWT0lDRV9URVNUOiB7XG4gICAgICBpZDogJzU5ODMyOCcsIGRlZmF1bHRQcm9kdWNlcjogUHJvZHVjZXJzLlZPSUNFLCBpc1Rlc3Q6IHRydWVcbiAgICB9LFxuICAgIFdFQVRIRVJfR05MOiB7XG4gICAgICBpZDogJzU5ODMzMCcsIGRlZmF1bHRQcm9kdWNlcjogUHJvZHVjZXJzLldFQVRIRVIsIGlzVGVzdDogZmFsc2VcbiAgICB9LFxuICAgIFdFQVRIRVJfR05MX1RFU1Q6IHtcbiAgICAgIGlkOiAnNTk4MzMyJywgZGVmYXVsdFByb2R1Y2VyOiBQcm9kdWNlcnMuV0VBVEhFUiwgaXNUZXN0OiB0cnVlXG4gICAgfSxcbiAgICBXRUFUSEVSX1BTOiB7XG4gICAgICBpZDogJzU5ODMzOCcsIGRlZmF1bHRQcm9kdWNlcjogUHJvZHVjZXJzLldFQVRIRVIsIGlzVGVzdDogZmFsc2VcbiAgICB9LFxuICAgIFdFQVRIRVJfUFNfVEVTVDoge1xuICAgICAgaWQ6ICc1OTgzMzknLCBkZWZhdWx0UHJvZHVjZXI6IFByb2R1Y2Vycy5XRUFUSEVSLCBpc1Rlc3Q6IHRydWVcbiAgICB9LFxuICAgIFdTX0xFQVJOSU5HX0VOR0xJU0g6IHtcbiAgICAgIGlkOiAnNTk4MzQwJywgZGVmYXVsdFByb2R1Y2VyOiBQcm9kdWNlcnMuV1NfTEVBUk5JTkdfRU5HTElTSCwgaXNUZXN0OiBmYWxzZVxuICAgIH0sXG4gICAgV1NfTEVBUk5JTkdfRU5HTElTSF9URVNUOiB7XG4gICAgICBpZDogJzU5ODM0MScsIGRlZmF1bHRQcm9kdWNlcjogUHJvZHVjZXJzLldTX0xFQVJOSU5HX0VOR0xJU0gsIGlzVGVzdDogdHJ1ZVxuICAgIH0sXG4gICAgV1NfTkVXU19MQU5HVUFHRVM6IHtcbiAgICAgIGlkOiAnNTk4MzQyJywgZGVmYXVsdFByb2R1Y2VyOiBQcm9kdWNlcnMuQkJDX1dPUkxEX05FV1MsIGlzVGVzdDogZmFsc2VcbiAgICB9LFxuICAgIFdTX05FV1NfTEFOR1VBR0VTX1RFU1Q6IHtcbiAgICAgIGlkOiAnNTk4MzQzJywgZGVmYXVsdFByb2R1Y2VyOiBQcm9kdWNlcnMuQkJDX1dPUkxEX05FV1MsIGlzVGVzdDogdHJ1ZVxuICAgIH0sXG4gICAgV1NfUEFSVE5FUlNfQjJCOiB7XG4gICAgICBpZDogJzU5ODgyMCcsIGRlZmF1bHRQcm9kdWNlcjogUHJvZHVjZXJzLldTX1BBUlRORVJTX0IyQiwgaXNUZXN0OiBmYWxzZVxuICAgIH0sXG4gICAgV1NfUEFSVE5FUlNfQjJCX1RFU1Q6IHtcbiAgICAgIGlkOiAnNTk4ODIzJywgZGVmYXVsdFByb2R1Y2VyOiBQcm9kdWNlcnMuV1NfUEFSVE5FUlNfQjJCLCBpc1Rlc3Q6IHRydWVcbiAgICB9LFxuICAgIFdTX1BST0dSQU1NRVM6IHtcbiAgICAgIGlkOiAnNTk4MzQ0JywgZGVmYXVsdFByb2R1Y2VyOiBQcm9kdWNlcnMuUFJPR1JBTU1FUywgaXNUZXN0OiBmYWxzZVxuICAgIH0sXG4gICAgV1NfUFJPR1JBTU1FU19URVNUOiB7XG4gICAgICBpZDogJzU5ODM0NScsIGRlZmF1bHRQcm9kdWNlcjogUHJvZHVjZXJzLlBST0dSQU1NRVMsIGlzVGVzdDogdHJ1ZVxuICAgIH0sXG4gICAgV1NfU1lORElDQVRJT05fUEFSVE5FUlM6IHtcbiAgICAgIGlkOiAnNTk4MzQ2JywgZGVmYXVsdFByb2R1Y2VyOiBQcm9kdWNlcnMuV1NfUEFSVE5FUlNfQjJCLCBpc1Rlc3Q6IGZhbHNlXG4gICAgfSxcbiAgICBXU19TWU5ESUNBVElPTl9QQVJUTkVSU19URVNUOiB7XG4gICAgICBpZDogJzU5ODM0NycsIGRlZmF1bHRQcm9kdWNlcjogUHJvZHVjZXJzLldTX1BBUlRORVJTX0IyQiwgaXNUZXN0OiB0cnVlXG4gICAgfSxcblxuICAgIGdldDogZnVuY3Rpb24oZGVzdGluYXRpb25Db2RlKSB7XG4gICAgICB2YXIgZGVzdGluYXRpb247XG4gICAgICBpZiAoZGVzdGluYXRpb25Db2RlKSB7XG4gICAgICAgIGRlc3RpbmF0aW9uID0gdGhpc1tkZXN0aW5hdGlvbkNvZGUudG9VcHBlckNhc2UoKV07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBkZXN0aW5hdGlvbjtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIGRlc3RpbmF0aW9ucztcbn0pO1xuIiwiLyoqXG4gKiBXcmFwcGVyIGZvciB0aGUgY29uZmlnIGZvciBlYWNoIGNvbnN1bWVyXG4gKiBUaGlzIGFwcHJvYWNoIGNvdWxkIGNoYW5nZSwgbWlnaHQgcHVzaCB0aGlzIGFsbFxuICogaW50byB0aGUgZGVsZWdhdGVzLi4uXG4gKi9cbmRlZmluZShmdW5jdGlvbihyZXF1aXJlKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICB2YXIgREVCVUcgPSByZXF1aXJlKCcuLi91dGlsL2RlYnVnJyk7XG4gIHZhciBFbnVtcyA9IHJlcXVpcmUoJy4uL2VudW1lcmF0aW9ucycpO1xuICB2YXIgVXRpbHMgPSByZXF1aXJlKCcuLi91dGlsL21ldGhvZHMnKTtcbiAgdmFyIG1ldGEgPSByZXF1aXJlKCcuLi9tZXRhJyk7XG4gIHZhciBLRVlTID0gcmVxdWlyZSgnLi9rZXlzJyk7XG5cbiAgdmFyIGRlZmF1bHRDb25maWcgPSB7fTtcblxuICAvLyBFY2hvXG4gIGRlZmF1bHRDb25maWdbS0VZUy5FQ0hPX0VOQUJMRURdID0gdHJ1ZTtcbiAgZGVmYXVsdENvbmZpZ1tLRVlTLkVDSE9fQVVUT19TVEFSVF0gPSB0cnVlO1xuICBkZWZhdWx0Q29uZmlnW0tFWVMuRUNIT19ERVZJQ0VfSURdID0gbnVsbDtcbiAgZGVmYXVsdENvbmZpZ1tLRVlTLlJFUE9SVElOR19QUk9GSUxFXSA9ICdQVUJMSUNfU0VSVklDRSc7XG4gIGRlZmF1bHRDb25maWdbS0VZUy5FQ0hPX0NBQ0hFX01PREVdID0gJ09GRkxJTkUnO1xuXG4gIC8vIENvbVNjb3JlXG4gIGRlZmF1bHRDb25maWdbS0VZUy5DT01TQ09SRV9FTkFCTEVEXSA9IGZhbHNlO1xuXG4gIC8vIEFUIEludGVybmV0XG4gIGRlZmF1bHRDb25maWdbS0VZUy5BVElfRU5BQkxFRF0gPSB0cnVlO1xuXG4gIC8vIEJBUkJcbiAgZGVmYXVsdENvbmZpZ1tLRVlTLkJBUkJfRU5BQkxFRF0gPSBmYWxzZTtcbiAgZGVmYXVsdENvbmZpZ1tLRVlTLkJBUkJfREVCVUddID0gZmFsc2U7XG4gIGRlZmF1bHRDb25maWdbS0VZUy5CQVJCX1NJVEVfQ09ERV0gPSAnYmJjZG90Y29tJztcblxuICAvLyBFY2hvIGNoYW1iZXJcbiAgZGVmYXVsdENvbmZpZ1tLRVlTLlRFU1RfU0VSVklDRV9FTkFCTEVEXSA9IGZhbHNlO1xuXG4gIC8vIEVTU1xuICBkZWZhdWx0Q29uZmlnW0tFWVMuVVNFX0VTU10gPSBmYWxzZTtcbiAgZGVmYXVsdENvbmZpZ1tLRVlTLkVTU19IT1NUTkFNRV0gPSAnZXNzLmFwaS5iYmNpLmNvLnVrJztcblxuICAvLyBTU0NcbiAgZGVmYXVsdENvbmZpZ1tLRVlTLlVTRV9TU0NdID0gZmFsc2U7XG4gIGRlZmF1bHRDb25maWdbS0VZUy5TU0NfSE9TVE5BTUVdID0gbnVsbDtcblxuICAvLyBDb25maWcgdmFsdWVzIHRoYXQgd2UgZG8gbm90IHdhbnQgdGhlIHVzZXIgdG8gb3ZlcndyaXRlXG4gIHZhciBmaXhlZENvbmZpZyA9IHt9O1xuICBmaXhlZENvbmZpZ1tLRVlTLkVDSE9fTkFNRV0gPSBtZXRhLk5BTUU7XG4gIGZpeGVkQ29uZmlnW0tFWVMuRUNIT19WRVJTSU9OXSA9IG1ldGEuVkVSU0lPTjtcblxuICBmdW5jdGlvbiBoYXNMZW5ndGgodmFsKSB7XG4gICAgcmV0dXJuICh0eXBlb2YgdmFsID09PSAnc3RyaW5nJyAmJiB2YWwubGVuZ3RoID4gMCk7XG4gIH1cblxuICBmdW5jdGlvbiBpc1N0cmluZ1dpdGhOb1BhcmFtcyhzdHIpIHtcbiAgICByZXR1cm4gc3RyLm1hdGNoKC9bYS16QS1aXSsvKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGlzVmFsaWRSZXBvcnRpbmdQcm9maWxlKHByb2ZpbGVJZCkge1xuICAgIGlmICh0eXBlb2YgcHJvZmlsZUlkID09PSAnc3RyaW5nJykge1xuICAgICAgcHJvZmlsZUlkID0gcHJvZmlsZUlkLnRvVXBwZXJDYXNlKCk7XG4gICAgICByZXR1cm4gRW51bXMuUmVwb3J0aW5nUHJvZmlsZXMuaGFzT3duUHJvcGVydHkocHJvZmlsZUlkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGlzVmFsaWRDYWNoZU1vZGUobW9kZSkge1xuICAgIGlmICh0eXBlb2YgbW9kZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIG1vZGUgPSBtb2RlLnRvVXBwZXJDYXNlKCk7XG4gICAgICByZXR1cm4gRW51bXMuRWNob0NhY2hlTW9kZS5oYXNPd25Qcm9wZXJ0eShtb2RlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHZhbGlkYXRlKGNvbmYpIHtcbiAgICBpZiAoIWlzVmFsaWRDYWNoZU1vZGUoY29uZltLRVlTLkVDSE9fQ0FDSEVfTU9ERV0pKSB7XG4gICAgICBERUJVRy5lcnJvcignQ29uZmlnIEVycm9yOiBLRVlTLkVDSE9fQ0FDSEVfTU9ERSBJbnZhbGlkJyArXG4gICAgICAgICcgY2FjaGUgbW9kZSBzcGVjaWZpZWQnKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gVXRpbHMuYXNzZXJ0KFxuICAgICAgdHlwZW9mIGNvbmZbS0VZUy5FQ0hPX0VOQUJMRURdID09PSAnYm9vbGVhbicsXG4gICAgICAnQ29uZmlnOiBcImVuYWJsZWRcIiBtdXN0IGJlIGJvb2xlYW4sIGdvdCAnICtcbiAgICAgIGNvbmZbS0VZUy5FQ0hPX0VOQUJMRURdXG4gICAgKSAmJiBVdGlscy5hc3NlcnQoXG4gICAgICB0eXBlb2YgY29uZltLRVlTLkVDSE9fQVVUT19TVEFSVF0gPT09ICdib29sZWFuJyxcbiAgICAgICdDb25maWc6IFwiYXV0b19zdGFydFwiIG11c3QgYmUgYm9vbGVhbiwgZ290ICcgK1xuICAgICAgY29uZltLRVlTLkVDSE9fQVVUT19TVEFSVF1cbiAgICApICYmIFV0aWxzLmFzc2VydChcbiAgICAgIGNvbmZbS0VZUy5FQ0hPX0RFVklDRV9JRF0gPT09IG51bGwgfHxcbiAgICAgICh0eXBlb2YgY29uZltLRVlTLkVDSE9fREVWSUNFX0lEXSA9PT0gJ3N0cmluZycgJiZcbiAgICAgIGNvbmZbS0VZUy5FQ0hPX0RFVklDRV9JRF0ubGVuZ3RoKSxcbiAgICAgICdFQ0hPLkRFVklDRV9JRCBtdXN0IGJlIGFuIG5vbi1lbXB0eSBzdHJpbmcnXG4gICAgKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHZhbGlkYXRlQ29tU2NvcmUoY29uZmlnKSB7XG4gICAgLy8gRG9uJ3QgYm90aGVyIHZhbGlkYXRpbmcgaWYgZGlzYWJsZWRcbiAgICBpZiAoY29uZmlnW0tFWVMuQ09NU0NPUkVfRU5BQkxFRF0gPT09IGZhbHNlKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAoIWhhc0xlbmd0aChjb25maWdbS0VZUy5SRVBPUlRJTkdfUFJPRklMRV0pKSB7XG4gICAgICBpZiAoIWhhc0xlbmd0aChjb25maWdbS0VZUy5DT01TQ09SRV9IT1NUXSkpIHtcbiAgICAgICAgREVCVUcuZXJyb3IoJ0NvbmZpZyBFcnJvcjogTXVzdCBoYXZlIGNvbmZpZyB2YWx1ZSBmb3IgQ09NU0NPUkVfSE9TVCcgK1xuICAgICAgICAgICcgb3IgUkVQT1JUSU5HX1BST0ZJTEUnXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGNvbmZpZ1tLRVlTLkNPTVNDT1JFX0hPU1RdICE9PSAnc2NvcmVjYXJkcmVzZWFyY2guY29tJyAmJlxuICAgICAgICBjb25maWdbS0VZUy5DT01TQ09SRV9IT1NUXSAhPT0gJ3NhLmJiYy5jby51aycpIHtcbiAgICAgICAgREVCVUcuZXJyb3IoJ0NvbmZpZyBFcnJvcjogS0VZUy5DT01TQ09SRV9IT1NUIFNob3VsZCBiZSBvbmUgb2YgJyArXG4gICAgICAgICAgJ3Njb3JlY2FyZHJlc2VhcmNoLmNvbSBvciBzYS5iYmMuY28udWsnKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghaXNWYWxpZFJlcG9ydGluZ1Byb2ZpbGUoY29uZmlnW0tFWVMuUkVQT1JUSU5HX1BST0ZJTEVdKSkge1xuICAgICAgREVCVUcuZXJyb3IoJ0NvbmZpZyBFcnJvcjogS0VZUy5SRVBPUlRJTkdfUFJPRklMRSBJbnZhbGlkJyArXG4gICAgICAgICcgcmVwb3J0aW5nIHByb2ZpbGUgc3BlY2lmaWVkJyk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIFV0aWxzLmFzc2VydChcbiAgICAgIHR5cGVvZiBjb25maWdbS0VZUy5DT01TQ09SRV9FTkFCTEVEXSA9PT0gJ2Jvb2xlYW4nLFxuICAgICAgJ0NvbVNjb3JlIGNvbmZpZzogXCJFTkFCTEVEXCIgbXVzdCBiZSBib29sZWFuJ1xuICAgICk7XG4gIH1cblxuICBmdW5jdGlvbiB2YWxpZGF0ZVNwcmluZyhjb25maWcpIHtcbiAgICAvLyBEb24ndCBib3RoZXIgdmFsaWRhdGluZyBpZiBkaXNhYmxlZFxuICAgIGlmIChjb25maWdbS0VZUy5CQVJCX0VOQUJMRURdID09PSBmYWxzZSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgaWYgKCFoYXNMZW5ndGgoY29uZmlnW0tFWVMuQkFSQl9TSVRFX0NPREVdKSkge1xuICAgICAgREVCVUcuZXJyb3IoJ0NvbmZpZyBFcnJvcjogS0VZUy5CQVJCX1NJVEVfQ09ERSBtdXN0IGhhdmUgYSB2YWx1ZScpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmICghaXNTdHJpbmdXaXRoTm9QYXJhbXMoY29uZmlnW0tFWVMuQkFSQl9TSVRFX0NPREVdKSkge1xuICAgICAgREVCVUcuZXJyb3IoJ0NvbmZpZyBFcnJvcjogS0VZUy5CQVJCX1NJVEVfQ09ERSBtdXN0IG1hdGNoIFthLXpBLVpdJyk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBjb25maWdbS0VZUy5CQVJCX0RFQlVHXSAhPT0gJ2Jvb2xlYW4nKSB7XG4gICAgICBERUJVRy5lcnJvcignQ29uZmlnIEVycm9yOiBLRVlTLkJBUkJfREVCVUcgbXVzdCBiZSBhIGJvb2xlYW4nKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHZhbGlkYXRlU3NjQ29uZmlnKGNvbmZpZykge1xuXG4gICAgdmFyIGhvc3RuYW1lID0gY29uZmlnW0tFWVMuU1NDX0hPU1ROQU1FXTtcblxuICAgIGlmICh0eXBlb2YgY29uZmlnW0tFWVMuVVNFX1NTQ10gIT09ICdib29sZWFuJykge1xuICAgICAgREVCVUcuZXJyb3IoJ0NvbmZpZyBFcnJvcjogS0VZUy5VU0VfU1NDIG11c3QgYmUgYm9vbGVhbicpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmIChob3N0bmFtZSAhPT0gbnVsbCAmJiBob3N0bmFtZSAhPT0gJy5jb20nICYmIGhvc3RuYW1lICE9PSAnLmNvLnVrJykge1xuICAgICAgREVCVUcuZXJyb3IoXG4gICAgICAgICdDb25maWcgRXJyb3I6IFNTQ19IT1NUTkFNRSBtdXN0IGJlIG9uZSBvZiAuY29tLCAuY28udWsgb3IgbnVsbCdcbiAgICAgICk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRSZXBvcnRpbmdQcm9maWxlKHByb2ZpbGVJZCkge1xuICAgIGlmICh0eXBlb2YgcHJvZmlsZUlkID09PSAnc3RyaW5nJykge1xuICAgICAgcHJvZmlsZUlkID0gcHJvZmlsZUlkLnRvVXBwZXJDYXNlKCk7XG4gICAgICBpZiAoRW51bXMuUmVwb3J0aW5nUHJvZmlsZXMuaGFzT3duUHJvcGVydHkocHJvZmlsZUlkKSkge1xuICAgICAgICByZXR1cm4gRW51bXMuUmVwb3J0aW5nUHJvZmlsZXNbcHJvZmlsZUlkXTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldENhY2hlTW9kZShtb2RlKSB7XG4gICAgaWYgKHR5cGVvZiBtb2RlID09PSAnc3RyaW5nJykge1xuICAgICAgbW9kZSA9IG1vZGUudG9VcHBlckNhc2UoKTtcbiAgICAgIGlmIChFbnVtcy5FY2hvQ2FjaGVNb2RlLmhhc093blByb3BlcnR5KG1vZGUpKSB7XG4gICAgICAgIHJldHVybiBFbnVtcy5FY2hvQ2FjaGVNb2RlW21vZGVdO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLy8gY29tYmluZSBhbmQgdmFsaWRhdGUgdGhlIGNvbmZpZyB3aXRoIGVhY2hcbiAgLy8gY29uc3VtZXJcbiAgZnVuY3Rpb24gY29tYmluZVdpdGhCYXNlQ29uZmlnKHVzZXJDb25maWcpIHtcblxuICAgIHZhciByZXBvcnRpbmdQcm9maWxlO1xuICAgIHZhciBjYWNoZU1vZGU7XG5cbiAgICB1c2VyQ29uZmlnID0gdXNlckNvbmZpZyB8fCB7fTtcblxuICAgIGlmICh1c2VyQ29uZmlnW0tFWVMuUkVQT1JUSU5HX1BST0ZJTEVdKSB7XG4gICAgICByZXBvcnRpbmdQcm9maWxlID0gZ2V0UmVwb3J0aW5nUHJvZmlsZSh1c2VyQ29uZmlnW0tFWVMuUkVQT1JUSU5HX1BST0ZJTEVdKTtcbiAgICB9XG5cbiAgICBpZiAoIXJlcG9ydGluZ1Byb2ZpbGUpIHtcbiAgICAgIHJlcG9ydGluZ1Byb2ZpbGUgPSBnZXRSZXBvcnRpbmdQcm9maWxlKCdQVUJMSUNfU0VSVklDRScpO1xuICAgIH1cblxuICAgIGlmICh1c2VyQ29uZmlnW0tFWVMuRUNIT19DQUNIRV9NT0RFXSkge1xuICAgICAgY2FjaGVNb2RlID0gZ2V0Q2FjaGVNb2RlKHVzZXJDb25maWdbS0VZUy5FQ0hPX0NBQ0hFX01PREVdKTtcbiAgICB9XG5cbiAgICBpZiAoIWNhY2hlTW9kZSkge1xuICAgICAgY2FjaGVNb2RlID0gZ2V0Q2FjaGVNb2RlKCdPRkZMSU5FJyk7XG4gICAgfVxuXG4gICAgdmFyIGNvbmYgPSBVdGlscy5leHRlbmQoZGVmYXVsdENvbmZpZywgdHJ1ZSwgcmVwb3J0aW5nUHJvZmlsZSwgdXNlckNvbmZpZyB8fCB7fSwgZml4ZWRDb25maWcpO1xuICAgIGlmIChcbiAgICAgICEodmFsaWRhdGUoY29uZikgJiYgdmFsaWRhdGVDb21TY29yZShjb25mKSAmJlxuICAgICAgdmFsaWRhdGVTcHJpbmcoY29uZikgJiYgdmFsaWRhdGVTc2NDb25maWcoY29uZikpXG4gICAgKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICByZXR1cm4gY29uZjtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgZGVmYXVsdENvbmZpZzogZGVmYXVsdENvbmZpZyxcbiAgICBmaXhlZENvbmZpZzogZml4ZWRDb25maWcsXG4gICAgZ2VuZXJhdGU6IGNvbWJpbmVXaXRoQmFzZUNvbmZpZ1xuICB9O1xufSk7XG4iLCIvKipcbiAqIEtleXMgZm9yIHBhc3NpbmcgaW4gY29uZmlnIHZhbHVlcy4gQXZhaWxhYmxlIHZpYSBFY2hvLkNvbmZpZ0tleXMuXG4gKiBUaGVzZSB2YWx1c2Ugc2hvdWQgYmUgdXNlZCBhcyB0aGUga2V5cyBpbiB0aGUgY29uZmlnIG9iamVjdCBwYXNzZWRcbiAqIHRvIHRoZSBgRWNob0NsaWVudGAgY29uc3RydWN0b3JcbiAqIEBleHBvcnRzIEVjaG8vQ29uZmlnS2V5c1xuICogQGV4YW1wbGVcbiAqIC8vRXhhbXBsZSBjb25maWcgZm9yIHRlc3RpbmdcbiAqIHZhciBFbnVtcyA9IEVjaG8uRW51bXMsXG4gKiAgICAgY29uZiA9IHt9O1xuICpcbiAqIC8vIEFkZCBhIFwidHJhY2VcIiBzbyB3ZSBjYW4gZmluZCB0aGUgdmVudHMgd2UgZ2VuZXJhdGVcbiAqIGNvbmZbRW51bXMuRUNITy5UUkFDRV0gPSAnbXl0ZXN0YWJjZCc7XG4gKiAvL1BvaW50IHRoZSBDb21TY29yZSBldmVudHMgYXQgdGhlIENvbVNjb3JlIHRlc3Qgc2l0ZSAoc28gd2UgZG9uJ3RcbiAqIC8vZGlsdXRlIHRoZSBsaXZlIGRhdGEgKGFsc28gaXQncyB1bnNhbXBsZWQpXG4gKiBjb25mW0VudW1zLkNPTVNDT1JFLlVSTF0gPSAnaHR0cDovL3NhLmJiYy5jby51ay9iYmMvdGVzdC9zJztcbiAqXG4gKiAvLy4uLm5vdyB3ZSBjYW4gcGFzcyBjb25mIGludG8gbmV3IEVjaG9DbGllbnQoKTtcbiAqL1xuZGVmaW5lKGZ1bmN0aW9uKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgdmFyIGV4cG9ydHMgPSB7XG4gICAgLyoqXG4gICAgICogR2VuZXJhbCBFY2hvIGNvbmZpZ1xuICAgICAqIEBwcm9wZXJ0eSBbRU5BQkxFRD10cnVlXSBTZXQgdG8gZmFsc2UgdG8gc3dpdGNoIG9mZiBldmVudGluZyBpbiBFY2hvXG4gICAgICogQHByb3BlcnR5IFtUUkFDRV0gRm9yIHRlc3RpbmcgcHVycG9zZXMgeW91IGNhbiBzZXQgdGhpcyB0byBhIHVuaXF1ZSBJRFxuICAgICAqIGZvciB5b3VyIGluc3RhbmNlIHNvIGV2ZW50cyBjYW4gYmUgZWFzaWx5IGZvdW5kIGxhdGVyIG9uXG4gICAgICogQHByb3BlcnR5IFtERVZJQ0VfSURdIFVzZSB0byBzZXQgdGhlIGRldmljZSBJRCwgdGhpcyBjYW4gYWxzbyBiZSBzZXQgdmlhXG4gICAgICogYSBtZXRob2QgY2FsbCBvbiB0aGUgRWNob0NsaWVudCBpbnN0YW5jZS4gVGhpcyB2YWx1ZSB3aWxsIG92ZXJyaWRlIHRoZSBzMVxuICAgICAqIGNvb2tpZSBpbiBEQXhcbiAgICAgKi9cbiAgICBFQ0hPX0VOQUJMRUQ6ICdlbmFibGVkJyxcbiAgICBFQ0hPX0FVVE9fU1RBUlQ6ICdhdXRvX3N0YXJ0JyxcbiAgICBFQ0hPX1RSQUNFOiAndHJhY2UnLFxuICAgIEVDSE9fREVWSUNFX0lEOiAnZGV2aWNlX2lkJyxcbiAgICBSRVBPUlRJTkdfUFJPRklMRTogJ3JlcG9ydGluZ19wcm9maWxlJyxcbiAgICBFQ0hPX0NBQ0hFX01PREU6ICdjYWNoZV9tb2RlJyxcbiAgICBERUJVR19NT0RFOiAnZGlzYWJsZWQnLFxuXG4gICAgLy8gVGhlc2UgYXJlIG1hbmFnZWQgaW50ZXJuYWxseSBhbmQgc2hvdWxkIG5vdCBiZSBzZXQgbWFudWFsbHlcbiAgICBFQ0hPX05BTUU6ICdsaWJfbmFtZScsXG4gICAgRUNIT19WRVJTSU9OOiAnbGliX3ZlcnNpb24nLFxuXG4gICAgLy8gU1NDXG4gICAgVVNFX1NTQzogJ3VzZV9zc2MnLFxuICAgIFNTQ19IT1NUTkFNRTogJ3NzY19ob3N0bmFtZScsXG5cbiAgICAvKipcbiAgICAgKiBDb21TY29yZSBzcGVjaWZpYyBjb25maWdcbiAgICAgKiBAcHJvcGVydHkgW0VOQUJMRUQ9YHRydWVgXSBTZXQgdG8gYGZhbHNlYCB0byBkaXNhYmxlIGV2ZW50aW5nIHRvIENvbVNjb3JlXG4gICAgICogQHByb3BlcnR5IFtIT1NUPSdzYS5iYmMuY28udWsnXVxuICAgICAqIFRoZSBkb21haW4gZm9yIENvbVNjb3JlIGV2ZW50cy5cbiAgICAgKiBSZXN1bHRzIGluIGEgY29tc2NvcmUgZW5kcG9pbnQgb2YgJ2h0dHA6Ly9zYS5iYmMuY28udWsvYmJjL2JiYy9zJyBieVxuICAgICAqIGRlZmF1bHRcbiAgICAgKi9cbiAgICBDT01TQ09SRV9FTkFCTEVEOiAnY29tc2NvcmUuZW5hYmxlZCcsXG4gICAgQ09NU0NPUkVfSE9TVDogJ2NvbXNjb3JlLmhvc3QnLFxuICAgIENPTVNDT1JFX1NJVEU6ICdjb21zY29yZS5zaXRlJyxcblxuICAgIENPTVNDT1JFX0NVU1RPTUVSX0lEOiAnY29tc2NvcmUuY3VzdG9tZXJfaWQnLFxuICAgIENPTVNDT1JFX1BVQkxJU0hFUl9TRUNSRVQ6ICdjb21zY29yZS5wdWJsaXNoZXJfc2VjcmV0JyxcblxuICAgIC8qKlxuICAgICAqIEFUIEludGVybmV0IHNwZWNpZmljIGNvbmZpZ1xuICAgICAqIEBwcm9wZXJ0eSBbRU5BQkxFRD1gdHJ1ZWBdIFNldCB0byBgZmFsc2VgIHRvIGRpc2FibGUgZXZlbnRpbmcgdG8gQVQgSW50ZXJuZXRcbiAgICAgKiBAcHJvcGVydHkgW1NJVEU9YDU5NjA2OGBdIFRoZSBBVEkgc2l0ZSBjb2RlXG4gICAgICogQHByb3BlcnR5IFtMT0c9YGxvZ3czNjNgXSBUaGUgc3ViZG9tYWluIGZvciB0aGUgQVRJIFVSTFxuICAgICAqIEBwcm9wZXJ0eSBbRE9NQUlOPWBhdGktaG9zdC5uZXRgXSBUaGUgZG9tYWluIGZvciB0aGUgQVRJIFVSTFxuICAgICAqIEBwcm9wZXJ0eSBbUElYRUxfUEFUSD1gaGl0LnhpdGlgXSBUaGUgQVRJIHBpeGVsIHBhdGhcbiAgICAgKiBAcHJvcGVydHkgW0ZPUkNFX0hUVFBTPWBmYWxzZWBdIFdoZXRoZXIgaHR0cHMgaXMgZm9yY2VkXG4gICAgICovXG4gICAgQVRJX0VOQUJMRUQ6ICdhdGkuZW5hYmxlZCcsXG4gICAgQVRJX0xPRzogJ2F0aS5sb2cnLFxuICAgIEFUSV9TU0xfTE9HOiAnYXRpLnNzbF9sb2cnLFxuICAgIEFUSV9ET01BSU46ICdhdGkuZG9tYWluJyxcbiAgICBBVElfUElYRUxfUEFUSDogJ2F0aS5waXhlbF9wYXRoJyxcbiAgICBBVElfRk9SQ0VfSFRUUFM6ICdhdGkuZm9yY2VfaHR0cHMnLFxuICAgIEFUSV9DQUNIRV9NT0RFX0FMV0FZUzogJ2Fsd2F5cycsXG4gICAgQVRJX0NBQ0hFX01PREVfUkVRVUlSRUQ6ICdyZXF1aXJlZCcsXG4gICAgQVBQX0NBVEVHT1JZOiAnYXBwX2NhdGVnb3J5JyxcbiAgICBLRUVQQUxJVkVfRFVSQVRJT046ICdrZWVwYWxpdmVfZHVyYXRpb24nLFxuXG4gICAgLyoqXG4gICAgKiBTZXQgdGhlIGRlc3RpbmF0aW9uIGxhYmVsIGZvciByZXBvcnRpbmdcbiAgICAqL1xuICAgIERFU1RJTkFUSU9OOiAnYmJjX2Rlc3RpbmF0aW9uJyxcblxuICAgIC8qKlxuICAgICogU2V0IHRoZSBwcm9kdWNlciBsYWJlbCBmb3IgcmVwb3J0aW5nXG4gICAgKi9cbiAgICBQUk9EVUNFUjogJ2JiY19wcm9kdWNlcicsXG5cbiAgICAvKipcbiAgICAgKiA8cD5cbiAgICAgKiBUaGUgVVJMIGZvciB0aGUgdGVzdCBzZXJ2aWNlIGVuZCBwb2ludC5cbiAgICAgKiA8L3A+XG4gICAgICovXG4gICAgVEVTVF9TRVJWSUNFX0VOQUJMRUQ6ICd0ZXN0LmVuYWJsZWQnLFxuICAgIFRFU1RfU0VSVklDRV9VUkw6ICd0ZXN0LnVybCcsXG5cbiAgICAvKipcbiAgICAgKiBTcHJpbmctc3BlY2lmaWMgY29uZmlnIChmb3IgQkFSQiByZXBvcnRpbmcpLlxuICAgICAqIFRoZXJlIGFyZSBubyBjb25maWd1cmFibGUgdmFsdWVzIGhlbHBcbiAgICAgKi9cbiAgICBCQVJCX0VOQUJMRUQ6ICdiYXJiLmVuYWJsZWQnLFxuICAgIEJBUkJfU0lURV9DT0RFOiAnYmFyYi5zaXRlX2NvZGUnLFxuXG4gICAgLy8gU2V0IHRvIHRydWUgdG8gdHVybiBvbiBkZWJ1ZyBzdGF0ZW1lbnRzIGluIHRoZSBzcHJpbmcgbGliXG4gICAgQkFSQl9ERUJVRzogJ2JhcmIuZGVidWcnLFxuXG4gICAgLyoqXG4gICAgICogRVNTXG4gICAgICovXG4gICAgVVNFX0VTUzogJ3VzZV9lc3MnLFxuICAgIEVTU19IT1NUTkFNRTogJ2Vzcy5ob3N0bmFtZSdcbiAgfTtcblxuICByZXR1cm4gZXhwb3J0cztcbn0pO1xuIiwiZGVmaW5lKGZ1bmN0aW9uKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgdmFyIHByb2R1Y2VycyA9IHtcbiAgICAvLyBQZXJtaXR0ZWQgdmFsdWVzIGZvciBzZXR0aW5nIHRoZSBQcm9kdWNlciBOYW1lXG4gICAgQUNDT1VOVDogMSxcbiAgICBBRkFBTl9PUk9NT086IDIsXG4gICAgQUZSSVFVRTogMyxcbiAgICBBTUhBUklDOiA0LFxuICAgIEFSQUJJQzogNSxcbiAgICBBWkVSSTogNixcbiAgICBCQkM6IDcsXG4gICAgQkJDX0FMQkE6IDgsXG4gICAgQkJDX0FSVFM6IDksXG4gICAgQkJDX0FTSUFOX05FVFdPUks6IDEwLFxuICAgIEJCQ19GT09EOiAxMSxcbiAgICBCQkNfRk9VUjogMTIsXG4gICAgQkJDX0hEOiAxMyxcbiAgICBCQkNfTVVTSUM6IDE0LFxuICAgIEJCQ19ORVdTX0NIQU5ORUw6IDE1LFxuICAgIEJCQ19PTkU6IDE2LFxuICAgIEJCQ19QQVJMSUFNRU5UX0NIQU5ORUw6IDE3LFxuICAgIEJCQ19SQURJTzogMTgsXG4gICAgQkJDX1JBRElPXzE6IDE5LFxuICAgIEJCQ19SQURJT18xWFRSQTogMjAsXG4gICAgQkJDX1JBRElPXzI6IDIxLFxuICAgIEJCQ19SQURJT18zOiAyMixcbiAgICBCQkNfUkFESU9fNDogMjMsXG4gICAgQkJDX1JBRElPXzRfRVhUUkE6IDI0LFxuICAgIEJCQ19SQURJT181X0xJVkU6IDI1LFxuICAgIEJCQ19SQURJT182X01VU0lDOiAyNixcbiAgICBCQkNfU0NPVExBTkQ6IDEyMCxcbiAgICBCQkNfU0VORDogMTIxLFxuICAgIEJCQ19TSE9QOiAyNyxcbiAgICBCQkNfVEhSRUU6IDI4LFxuICAgIEJCQ19UV086IDI5LFxuICAgIEJCQ19XT1JMRF9ORVdTOiAzMCxcbiAgICBCRU5HQUxJOiAzMSxcbiAgICBCSVRFU0laRTogMzIsXG4gICAgQlJBU0lMOiAzMyxcbiAgICBCUklUQk9YOiAzNCxcbiAgICBCVVJNRVNFOiAzNSxcbiAgICBDQkJDOiAzNixcbiAgICBDQkVFQklFUzogMzcsXG4gICAgQ0hJTkVTRTogMzgsXG4gICAgRU5HTElTSF9SRUdJT05TOiAzOSxcbiAgICBHQUhVWkE6IDQwLFxuICAgIEdBVEVXQVk6IDQxLFxuICAgIEdOTF9BVVRPUzogNDIsXG4gICAgR05MX0NBUElUQUw6IDQzLFxuICAgIEdOTF9DVUxUVVJFOiA0NCxcbiAgICBHTkxfRUFSVEg6IDQ1LFxuICAgIEdOTF9GVVRVUkU6IDQ2LFxuICAgIEdOTF9IT01FUEFHRTogNDcsXG4gICAgR05MX1NUT1JZV09SS1M6IDQ4LFxuICAgIEdOTF9UUkFWRUw6IDQ5LFxuICAgIEdVSkFSQVRJOiA1MCxcbiAgICBIQVVTQTogNTEsXG4gICAgSElOREk6IDUyLFxuICAgIElHQk86IDUzLFxuICAgIElORE9ORVNJQU46IDU0LFxuICAgIElQTEFZRVI6IDU1LFxuICAgIEpBUEFORVNFOiA1NixcbiAgICBLT1JFQU46IDU3LFxuICAgIEtZUkdZWjogNTgsXG4gICAgTUFSQVRISTogNTksXG4gICAgTUVESUFfQUNUSU9OOiA2MCxcbiAgICBNT05JVE9SSU5HOiA2MSxcbiAgICBNVU5ETzogNjIsXG4gICAgTkVQQUxJOiA2MyxcbiAgICBORVdTOiA2NCxcbiAgICBORVdTUk9VTkQ6IDY1LFxuICAgIE5PUlRIRVJOX0lSRUxBTkQ6IDY2LFxuICAgIE9USEVSOiA2NyxcbiAgICBPV05fSVQ6IDExOCxcbiAgICBQQVNIVE86IDY4LFxuICAgIFBFUlNJQU46IDY5LFxuICAgIFBJREdJTjogNzAsXG4gICAgUFJPR1JBTU1FUzogNzEsXG4gICAgUFNfSE9NRVBBR0U6IDcyLFxuICAgIFBVTkpBQkk6IDczLFxuICAgIFJFRUw6IDc0LFxuICAgIFJVU1NJQU46IDc1LFxuICAgIFM0QzogNzYsXG4gICAgU0NIT09MX1JBRElPOiA3NyxcbiAgICBTQ0hPT0xfUkVQT1JUOiA3OCxcbiAgICBTQ09UTEFORDogNzksXG4gICAgU0VBUkNIOiA4MCxcbiAgICBTRVJCSUFOOiA4MSxcbiAgICBTSU5IQUxBOiA4MixcbiAgICBTT01BTEk6IDgzLFxuICAgIFNPVU5EUzogODQsXG4gICAgU1BPUlQ6IDg1LFxuICAgIFNXQUhJTEk6IDg2LFxuICAgIFRBTUlMOiA4NyxcbiAgICBUQVNURVI6IDg4LFxuICAgIFRFQUNIOiAxMTksXG4gICAgVEVMVUdVOiA4OSxcbiAgICBUSEFJOiA5MCxcbiAgICBUSUdSSU5ZQTogOTEsXG4gICAgVFVSS0lTSDogOTIsXG4gICAgVUtfQ0hJTkE6IDkzLFxuICAgIFVLUkFJTklBTjogOTQsXG4gICAgVVJEVTogOTUsXG4gICAgVVpCRUs6IDk2LFxuICAgIFZJRVROQU1FU0U6IDk3LFxuICAgIFZPSUNFOiA5OCxcbiAgICBWT0lDRV9GSVJTVF9GT1JNQVRTOiA5OSxcbiAgICBXQUxFUzogMTAwLFxuICAgIFdFQVRIRVI6IDEwMSxcbiAgICBXRUFUSEVSX1dBVENIRVJTOiAxMDIsXG4gICAgV09STERfU0VSVklDRV9FTkdMSVNIOiAxMDMsXG4gICAgV09SS0xJRkU6IDEwNCxcbiAgICBXU19MRUFSTklOR19FTkdMSVNIOiAxMDUsXG4gICAgV1NfUEFSVE5FUlNfQjJCOiAxMDYsXG4gICAgWU9SVUJBOiAxMDcsXG4gICAgTkVXU19FTkdMSVNIX1JFR0lPTlM6IDEwOCxcbiAgICBTUE9SVF9FTkdMSVNIX1JFR0lPTlM6IDEwOSxcbiAgICBORVdTX1NDT1RMQU5EOiAxMTAsXG4gICAgU1BPUlRfU0NPVExBTkQ6IDExMSxcbiAgICBORVdTX1dBTEVTOiAxMTIsXG4gICAgU1BPUlRfV0FMRVM6IDExMyxcbiAgICBORVdTX05PUlRIRVJOX0lSRUxBTkQ6IDExNCxcbiAgICBTUE9SVF9OT1JUSEVSTl9JUkVMQU5EOiAxMTUsXG4gICAgQVVESUVOQ0VfU0VSVklDRVM6IDExNixcbiAgICBXT1JMRF9ORVdTX1BST0dSQU1NRVM6IDExNyxcblxuICAgIC8vIFJldHVybnMgdGhlIElEIGFzc29jaWF0ZWQgd2l0aCBhIGdpdmVuIHByb2R1Y2VyIGNvZGVcbiAgICAvLyAoZS5nLiBwYXNzaW5nIGluICdXT1JMRF9ORVdTX1BST0dSQU1NRVMnIHJldHVybnMgMTE3LlxuICAgIGdldElkOiBmdW5jdGlvbihwcm9kdWNlckNvZGUpIHtcbiAgICAgIHZhciBpZDtcbiAgICAgIGlmIChwcm9kdWNlckNvZGUpIHtcbiAgICAgICAgaWQgPSB0aGlzW3Byb2R1Y2VyQ29kZS50b1VwcGVyQ2FzZSgpXTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGlkO1xuICAgIH0sXG5cbiAgICAvLyBSZXR1cm5zIGEgYm9vbGVhbiBpbmRpY2F0aW5nIHdoZXRoZXIgb3Igbm90IGhlcmUgaXMgYSBQcm9kdWNlciB3aXRoIHRoZSBJRCBwYXNzZWQgaW5cbiAgICAvLyAoZS5nLiBwYXNzaW5nIGluIDExNyByZXR1cm5zIHRydWUsIDk5OSByZXR1cm5zIGZhbHNlKS5cbiAgICBoYXNJZDogZnVuY3Rpb24ocHJvZHVjZXJJZCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICBpZiAocHJvZHVjZXJJZCkge1xuICAgICAgICBwcm9kdWNlcklkID0gcHJvZHVjZXJJZC50b1N0cmluZygpO1xuICAgICAgfVxuXG4gICAgICB2YXIga2V5cyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRoaXMpO1xuXG4gICAgICBmdW5jdGlvbiBmaW5kUHJvZHVjZXIoa2V5KSB7XG4gICAgICAgIHJldHVybiBzZWxmW2tleV0udG9TdHJpbmcoKSA9PT0gcHJvZHVjZXJJZDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIEJvb2xlYW4oa2V5cy5maWx0ZXIoZmluZFByb2R1Y2VyKS5sZW5ndGgpO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gcHJvZHVjZXJzO1xufSk7XG4iLCJkZWZpbmUoZnVuY3Rpb24ocmVxdWlyZSkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgdmFyIFNtYXJ0VGFnID0gcmVxdWlyZSgnc21hcnQtdGFnJyk7XG5cbiAgdmFyIE9yYml0VmFyaWFibGVzID0gcmVxdWlyZSgnLi9vcmJpdC12YXJpYWJsZXMnKTtcblxuICB2YXIgQVRJTGFiZWxLZXlzID0gcmVxdWlyZSgnLi9sYWJlbC1rZXlzJyk7XG4gIHZhciBDb25maWdLZXlzID0gcmVxdWlyZSgnLi4vLi4vY29uZmlnL2tleXMnKTtcbiAgdmFyIEN1c3RvbUV2ZW50ID0gcmVxdWlyZSgnLi9jdXN0b20tZXZlbnQnKTtcbiAgdmFyIEN1c3RvbVZhcmlhYmxlcyA9IHJlcXVpcmUoJy4vY3VzdG9tLXZhcmlhYmxlcycpO1xuICB2YXIgTWVkaWFUaGVtZXMgPSByZXF1aXJlKCcuL21lZGlhLXRoZW1lcycpO1xuICB2YXIgTWVkaWFFdmVudCA9IHJlcXVpcmUoJy4vbWVkaWEtZXZlbnQnKTtcbiAgdmFyIFVzZXJBY3Rpb25FdmVudCA9IHJlcXVpcmUoJy4vdXNlci1hY3Rpb24tZXZlbnQnKTtcblxuICB2YXIgRGVzdGluYXRpb25zID0gcmVxdWlyZSgnLi4vLi4vY29uZmlnL2Rlc3RpbmF0aW9ucycpO1xuICB2YXIgUHJvZHVjZXJzID0gcmVxdWlyZSgnLi4vLi4vY29uZmlnL3Byb2R1Y2VycycpO1xuXG4gIHZhciBVdGlscyA9IHJlcXVpcmUoJy4uLy4uL3V0aWwvbWV0aG9kcycpO1xuICB2YXIgREVCVUcgPSByZXF1aXJlKCcuLi8uLi91dGlsL2RlYnVnJyk7XG4gIHZhciBMYWJlbENsZWFuc2VyID0gcmVxdWlyZSgnLi4vLi4vdXRpbC9jbGVhbnNpbmcvbGFiZWwtY2xlYW5zZXInKTtcbiAgdmFyIEVudW1zID0gcmVxdWlyZSgnLi4vLi4vZW51bWVyYXRpb25zJyk7XG4gIHZhciBFbnZpcm9ubWVudCA9IHJlcXVpcmUoJy4uLy4uL2Vudmlyb25tZW50Jyk7XG4gIHZhciBDb29raWVIZWxwZXIgPSByZXF1aXJlKCcuLi8uLi91dGlsL2Nvb2tpZXMnKTtcblxuICB2YXIgSU5WQUxJRF9EQVRBX1NUUklORyA9ICdpbnZhbGlkLWRhdGEnO1xuXG4gIHZhciBBVl9FVkVOVF9UWVBFUyA9IHtcbiAgICBJTkZPOiAnaW5mbycsXG4gICAgTU9WRTogJ21vdmUnLFxuICAgIFBBVVNFOiAncGF1c2UnLFxuICAgIFBMQVk6ICdwbGF5JyxcbiAgICBTVE9QOiAnc3RvcCdcbiAgfTtcblxuICB2YXIgQlJPQURDQVNUX01PREUgPSB7XG4gICAgQ0xJUDogJ2NsaXAnLFxuICAgIExJVkU6ICdsaXZlJ1xuICB9O1xuXG4gIHZhciBDT0xMRUNUSU9OX0RPTUFJTiA9IHtcbiAgICB0ZXN0SG9zdDogJ2F0aS1ob3N0Lm5ldCcsXG4gICAgdGVzdDogJ2xvZ3czNjMuYXRpLWhvc3QubmV0JyxcbiAgICB0ZXN0U1NMOiAnbG9nd3MxMzYzLmF0aS1ob3N0Lm5ldCcsXG4gICAgbGl2ZUhvc3Q6ICdhcGkuYmJjLmNvLnVrJyxcbiAgICBsaXZlOiAnYTEuYXBpLmJiYy5jby51aycsXG4gICAgbGl2ZVNTTDogJ2ExLmFwaS5iYmMuY28udWsnXG4gIH07XG5cbiAgdmFyIEtFRVBBTElWRV9EVVJBVElPTl9ERUZBVUxUID0gMzAwMDAwO1xuICB2YXIgS0VFUEFMSVZFX0NPVU5URVJOQU1FID0gJ2tlZXBhbGl2ZSc7XG5cbiAgLy9mdW5jdGlvbiB0byB1c2Ugd2hlbiB3ZSBhcmUgaWdub3JpbmcgYSBmdW5jdGlvblxuICBmdW5jdGlvbiBkdW1teSgpIHtcbiAgICByZXR1cm4gLTE7XG4gIH1cblxuICBmdW5jdGlvbiBBdGlEZWxlZ2F0ZShhcHBOYW1lLCBhcHBUeXBlLCBjb25maWcsIGVudikgeyAvLyBqc2hpbnQgaWdub3JlOmxpbmVcbiAgICB0aGlzLl90YWcgPSBudWxsO1xuICAgIHRoaXMuX2Jyb2tlciA9IG51bGw7XG4gICAgdGhpcy5fbWVkaWEgPSBudWxsO1xuICAgIHRoaXMuX21lZGlhTGVuZ3RoID0gbnVsbDtcbiAgICB0aGlzLl9jb21tb25NZWRpYVBhcmFtcyA9IG51bGw7XG4gICAgdGhpcy5fZW52ID0gZW52O1xuICAgIHRoaXMuX3BhZ2VWYWx1ZXMgPSB7fTtcbiAgICB0aGlzLl9jdXN0b21QYXJhbXMgPSB7fTtcbiAgICB0aGlzLl9hcHBOYW1lID0gYXBwTmFtZTtcbiAgICB0aGlzLl9hcHBUeXBlID0gYXBwVHlwZTtcbiAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XG4gICAgdGhpcy5fYmJjX2hpZCA9IG51bGw7XG4gICAgdGhpcy5fbGFzdEhpdFVybCA9IG51bGw7XG4gICAgdGhpcy5fbGFzdFBsYXlIaXRVcmwgPSBudWxsO1xuICAgIHRoaXMuX2xhc3RQYWdlID0gbnVsbDtcblxuICAgIC8vIHNldCBkZXZpY2UgaWQgZnJvbSBjb25maWcgdmFsdWVcbiAgICB0aGlzLl9kZXZpY2VJZCA9IGNvbmZpZ1tDb25maWdLZXlzLkVDSE9fREVWSUNFX0lEXSB8fCB1bmRlZmluZWQ7XG5cbiAgICAvLyBvciBmcm9tIDNyZCBwYXJ0eSBjb29raWVcbiAgICBpZiAoIXRoaXMuX2RldmljZUlkKSB7XG4gICAgICB0aGlzLl9kZXZpY2VJZCA9IENvb2tpZUhlbHBlci5nZXRDb29raWVWYWx1ZUJ5TmFtZSgnaWRyeHZyJyk7XG4gICAgfVxuXG4gICAgLy8gb3IgZnJvbSAxc3QgcGFydHkgY29va2llXG4gICAgaWYgKCF0aGlzLl9kZXZpY2VJZCkge1xuICAgICAgdmFyIGNvb2tpZVZhbHVlID0gQ29va2llSGVscGVyLmdldENvb2tpZVZhbHVlQnlOYW1lKCdhdHVzZXJpZCcpO1xuICAgICAgaWYgKGNvb2tpZVZhbHVlKSB7XG4gICAgICAgIHRoaXMuX2RldmljZUlkID0gSlNPTi5wYXJzZShkZWNvZGVVUklDb21wb25lbnQoY29va2llVmFsdWUpKS52YWw7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGNvbmZpZ1tDb25maWdLZXlzLkVDSE9fVFJBQ0VdKSB7XG4gICAgICB0aGlzLnNldFRyYWNlSWQoY29uZmlnW0NvbmZpZ0tleXMuRUNIT19UUkFDRV0pO1xuICAgIH1cblxuICAgIHRoaXMuX2lzRW5hYmxlZCA9IChjb25maWcgJiYgY29uZmlnW0NvbmZpZ0tleXMuRUNIT19FTkFCTEVEXSk7XG5cbiAgICBpZiAoY29uZmlnICYmIGNvbmZpZ1tDb25maWdLZXlzLktFRVBBTElWRV9EVVJBVElPTl0pIHtcbiAgICAgIHRoaXMuX2tlZXBBbGl2ZUR1cmF0aW9uID0gTnVtYmVyKGNvbmZpZ1tDb25maWdLZXlzLktFRVBBTElWRV9EVVJBVElPTl0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9rZWVwQWxpdmVEdXJhdGlvbiA9IEtFRVBBTElWRV9EVVJBVElPTl9ERUZBVUxUO1xuICAgIH1cbiAgfVxuXG4gIEF0aURlbGVnYXRlLlNtYXJ0VGFnID0gU21hcnRUYWc7XG5cbiAgQXRpRGVsZWdhdGUucHJvdG90eXBlLl9nZXRIdHRwR2V0TWV0aG9kID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX2Vudi5nZXRIdHRwR2V0KCkgfHwgRW52aXJvbm1lbnQuX2RlZmF1bHRIdHRwR2V0O1xuICB9O1xuXG4gIC8vIFByb3ZpZGUgYWJpbGl0eSB0byB1c2UgYSBjdXN0b20gSFRUUCBHRVQgbWV0aG9kIHNvIHRoYXQgY3Jvc3MtZG9tYWluIGNsaWVudHMgY2FuIHVzZSBhbm90aGVyIG1ldGhvZCBpbnN0ZWFkIChlLmcuIEpTT05QKVxuICBBdGlEZWxlZ2F0ZS5wcm90b3R5cGUuX3NldEhUVFBHZXRNZXRob2QgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgIHZhciBodHRwR2V0ID0gdGhpcy5fZ2V0SHR0cEdldE1ldGhvZCgpO1xuXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgLy8gT3ZlcnJpZGUgdGhlIEFUSSBzZW5kVXJsIG1ldGhvZCBzbyB0aGF0IGl0IHVzZXMgdGhlIGN1c3RvbSBHRVQgbWV0aG9kLiBUaGlzIGltcGxlbWVudGF0aW9uIHByZXNlcnZlcyB0aGUgQVRJIGV2ZW50IGNhY2hpbmcgZmVhdHVyZVxuICAgIC8vIHdoaWxzdCBzdGlsbCBhbGxvd2luZyB0aGUgY3VzdG9tIEdFVCBtZXRob2QgdG8gYmUgdXNlZFxuICAgIHNlbGYuX3RhZy5zZW5kVXJsID0gZnVuY3Rpb24oaGl0LCB0YWdDYWxsYmFjaykge1xuXG4gICAgICB2YXIgbWFrZVRyaWdnZXJDYWxsYmFjayA9IGZ1bmN0aW9uICh0cmlnZ2VyLCBoaXQsIGxldmVsKSB7XG4gICAgICAgIHJldHVybiAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoZXZ0KSB7XG5cbiAgICAgICAgICAgIHNlbGYuX3RhZy5lbWl0KHRyaWdnZXIsIHtcbiAgICAgICAgICAgICAgbHZsOiBsZXZlbCxcbiAgICAgICAgICAgICAgZGV0YWlsczoge1xuICAgICAgICAgICAgICAgIGhpdDogaGl0LFxuICAgICAgICAgICAgICAgIGV2ZW50OiBldnRcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmICh0YWdDYWxsYmFjayAmJiB0eXBlb2YgdGFnQ2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgdGFnQ2FsbGJhY2soKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGNhbGxiYWNrICYmIHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG4gICAgICAgIH0pKCk7XG4gICAgICB9O1xuXG4gICAgICBoaXQgPSBzZWxmLl9hZGRMZW5ndGhUb01lZGlhSGl0KGhpdCk7XG5cbiAgICAgIHZhciBvblN1Y2Nlc3MgPSBtYWtlVHJpZ2dlckNhbGxiYWNrKCdUcmFja2VyOkhpdDpTZW50Ok9rJywgaGl0LCAnSU5GTycpO1xuICAgICAgdmFyIG9uRXJyb3IgPSBtYWtlVHJpZ2dlckNhbGxiYWNrKCdUcmFja2VyOkhpdDpTZW50OkVycm9yJywgaGl0LCAnRVJST1InKTtcblxuICAgICAgaHR0cEdldChoaXQsIG9uU3VjY2Vzcywgb25FcnJvcik7XG4gICAgfTtcbiAgfTtcblxuICBBdGlEZWxlZ2F0ZS5wcm90b3R5cGUuX2dldERlc3RpbmF0aW9uID0gZnVuY3Rpb24oY29uZmlnLCBvcmJpdFZhcnMpIHtcbiAgICB2YXIgZGVzdGluYXRpb247XG5cbiAgICBpZiAoY29uZmlnKSB7XG4gICAgICBkZXN0aW5hdGlvbiA9IERlc3RpbmF0aW9ucy5nZXQoY29uZmlnW0NvbmZpZ0tleXMuREVTVElOQVRJT05dKTtcbiAgICB9XG5cbiAgICBpZiAoIWRlc3RpbmF0aW9uICYmIG9yYml0VmFycykge1xuICAgICAgZGVzdGluYXRpb24gPSBEZXN0aW5hdGlvbnMuZ2V0KG9yYml0VmFycy5kZXN0aW5hdGlvbik7XG4gICAgfVxuXG4gICAgaWYgKCFkZXN0aW5hdGlvbikge1xuICAgICAgLy8gTG9nIHRoZSBmYWN0IHRoYXQgdGhlIGRlZmF1bHQgRGVzdGluYXRpb24gaXMgYmVpbmcgdXNlZCBpbnN0ZWFkXG4gICAgICBERUJVRy5pbmZvKCdEZXN0aW5hdGlvbiBub3QgZm91bmQsIHVzaW5nIGRlZmF1bHQgc2l0ZScpO1xuXG4gICAgICAvLyBTZXQgdG8gdGhlIGRlZmF1bHQgQVRJIHNpdGVcbiAgICAgIGRlc3RpbmF0aW9uID0gRGVzdGluYXRpb25zLkRFRkFVTFQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIGRlc3RpbmF0aW9uO1xuICB9O1xuXG4gIEF0aURlbGVnYXRlLnByb3RvdHlwZS5fZ2V0UHJvZHVjZXIgPSBmdW5jdGlvbihjb25maWcsIG9yYml0VmFycywgZGVzdGluYXRpb24pIHtcbiAgICB2YXIgcHJvZHVjZXI7XG5cbiAgICBpZiAoY29uZmlnKSB7XG4gICAgICBwcm9kdWNlciA9IFByb2R1Y2Vycy5nZXRJZChjb25maWdbQ29uZmlnS2V5cy5QUk9EVUNFUl0pO1xuICAgIH1cblxuICAgIGlmICghcHJvZHVjZXIgJiYgb3JiaXRWYXJzKSB7XG4gICAgICBwcm9kdWNlciA9IFByb2R1Y2Vycy5nZXRJZChvcmJpdFZhcnMucHJvZHVjZXIpO1xuICAgIH1cblxuICAgIGlmICghcHJvZHVjZXIgJiYgZGVzdGluYXRpb24pIHtcbiAgICAgIERFQlVHLmluZm8oJ1Byb2R1Y2VyIG5vdCBmb3VuZCwgdXNpbmcgZGVmYXVsdCBwcm9kdWNlcicpO1xuICAgICAgcHJvZHVjZXIgPSBkZXN0aW5hdGlvbi5kZWZhdWx0UHJvZHVjZXI7XG4gICAgfVxuXG4gICAgcmV0dXJuIHByb2R1Y2VyO1xuICB9O1xuXG4gIEF0aURlbGVnYXRlLnByb3RvdHlwZS5zZXREZXN0aW5hdGlvbiA9IGZ1bmN0aW9uKGRlc3RpbmF0aW9uKSB7XG4gICAgaWYgKCFkZXN0aW5hdGlvbikge1xuICAgICAgLy8gVXNlIHRoZSBkZWZhdWx0IGRlc3RpbmF0aW9uIGlmIHRoZSBwYXNzZWQgaW4gZGVzdGluYXRpb24gY29kZSB3YXMgbm90IGZvdW5kIG9yIGVtcHR5XG4gICAgICBkZXN0aW5hdGlvbiA9IERlc3RpbmF0aW9ucy5ERUZBVUxUO1xuXG4gICAgICAvLyBMb2cgdGhlIGZhY3QgdGhhdCB0aGUgZGVmYXVsdCBEZXN0aW5hdGlvbiBpcyBiZWluZyB1c2VkIGluc3RlYWRcbiAgICAgIERFQlVHLmluZm8oJ0Rlc3RpbmF0aW9uIG5vdCBmb3VuZCwgdXNpbmcgZGVmYXVsdCBzaXRlIGluc3RlYWQnKTtcbiAgICB9XG5cbiAgICBpZiAoZGVzdGluYXRpb24pIHtcbiAgICAgIHRoaXMuc2V0UHJvZHVjZXIoZGVzdGluYXRpb24uZGVmYXVsdFByb2R1Y2VyKTtcbiAgICAgIHRoaXMuX3NldERvbWFpbihkZXN0aW5hdGlvbi5pc1Rlc3QpO1xuICAgICAgdGhpcy5fdGFnLnNldENvbmZpZyhBVElMYWJlbEtleXMuTEVWRUxfMV9TSVRFLCBkZXN0aW5hdGlvbi5pZCk7XG4gICAgfVxuICB9O1xuXG4gIEF0aURlbGVnYXRlLnByb3RvdHlwZS5zZXRQcm9kdWNlciA9IGZ1bmN0aW9uKHByb2R1Y2VySWQpIHtcbiAgICB0aGlzLmFkZExhYmVsKEFUSUxhYmVsS2V5cy5MRVZFTF8yX1NJVEUsIHByb2R1Y2VySWQpO1xuICB9O1xuXG4gIEF0aURlbGVnYXRlLnByb3RvdHlwZS5fZ2V0Q29va2llRG9tYWluID0gZnVuY3Rpb24od2luZG93KSB7XG4gICAgdmFyIGNvb2tpZURvbWFpbjtcblxuICAgIC8vIExvb2sgZm9yIC5iYmMuY29tIGF0IHRoZSBlbmQgb2YgdGhlIGhvc3RuYW1lXG4gICAgaWYgKHdpbmRvdyAmJiB3aW5kb3cubG9jYXRpb24gJiYgd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lICYmIHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZS5tYXRjaCgvLmJiYy5jb20kLykpIHtcbiAgICAgIGNvb2tpZURvbWFpbiA9ICdiYmMuY29tJztcbiAgICB9IGVsc2Uge1xuICAgICAgY29va2llRG9tYWluID0gJ2JiYy5jby51ayc7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNvb2tpZURvbWFpbjtcbiAgfTtcblxuICBBdGlEZWxlZ2F0ZS5wcm90b3R5cGUuX3NldERvbWFpbiA9IGZ1bmN0aW9uKGlzVGVzdCkge1xuICAgIGlmIChpc1Rlc3QpIHtcbiAgICAgIHRoaXMuX3RhZy5zZXRDb25maWcoJ2RvbWFpbicsIENPTExFQ1RJT05fRE9NQUlOLnRlc3RIb3N0KTtcbiAgICAgIHRoaXMuX3RhZy5zZXRDb25maWcoJ2NvbGxlY3REb21haW4nLCBDT0xMRUNUSU9OX0RPTUFJTi50ZXN0KTtcbiAgICAgIHRoaXMuX3RhZy5zZXRDb25maWcoJ2NvbGxlY3REb21haW5TU0wnLCBDT0xMRUNUSU9OX0RPTUFJTi50ZXN0U1NMKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fdGFnLnNldENvbmZpZygnZG9tYWluJywgQ09MTEVDVElPTl9ET01BSU4ubGl2ZUhvc3QpO1xuICAgICAgdGhpcy5fdGFnLnNldENvbmZpZygnY29sbGVjdERvbWFpbicsIENPTExFQ1RJT05fRE9NQUlOLmxpdmUpO1xuICAgICAgdGhpcy5fdGFnLnNldENvbmZpZygnY29sbGVjdERvbWFpblNTTCcsIENPTExFQ1RJT05fRE9NQUlOLmxpdmVTU0wpO1xuICAgIH1cbiAgfTtcblxuICBBdGlEZWxlZ2F0ZS5wcm90b3R5cGUuX3NldFNlY3Rpb24gPSBmdW5jdGlvbihjbG9uZWRMYWJlbHMsIGV2ZW50VmFsdWVzLCBvcmJpdFZhcnMpIHtcbiAgICBpZiAoIWV2ZW50VmFsdWVzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGNsb25lZExhYmVscyAmJiBjbG9uZWRMYWJlbHNbQVRJTGFiZWxLZXlzLlNFQ1RJT05dKSB7XG4gICAgICAvLyBVc2UgdGhlIGxhYmVsIHZhbHVlIGZvciB0aGUgc2VjdGlvbiBpZiBpdCBpcyBwcm92aWRlZFxuICAgICAgZXZlbnRWYWx1ZXNbQVRJTGFiZWxLZXlzLkNIQVBURVJfMV0gPSBMYWJlbENsZWFuc2VyLmNsZWFuQ3VzdG9tVmFyaWFibGUoY2xvbmVkTGFiZWxzW0FUSUxhYmVsS2V5cy5TRUNUSU9OXSk7XG5cbiAgICAgIGlmIChldmVudFZhbHVlcy5jdXN0b21PYmplY3QpIHtcbiAgICAgICAgZGVsZXRlIGV2ZW50VmFsdWVzLmN1c3RvbU9iamVjdFtBVElMYWJlbEtleXMuU0VDVElPTl07XG4gICAgICB9XG5cbiAgICB9IGVsc2UgaWYgKG9yYml0VmFycyAmJiBvcmJpdFZhcnMuc2VjdGlvbikge1xuICAgICAgLy8gT3RoZXJ3aXNlLCBkZWZhdWx0IHRvIHRoZSBPcmJpdCBzZWN0aW9uIChpZiB0aGVyZSBpcyBvbmUpXG4gICAgICBldmVudFZhbHVlc1tBVElMYWJlbEtleXMuQ0hBUFRFUl8xXSA9IExhYmVsQ2xlYW5zZXIuY2xlYW5DdXN0b21WYXJpYWJsZShvcmJpdFZhcnMuc2VjdGlvbik7XG4gICAgfVxuICB9O1xuXG4gIEF0aURlbGVnYXRlLnByb3RvdHlwZS5fY3JlYXRlQXRpT3B0aW9ucyA9IGZ1bmN0aW9uKGNvbmZpZywgZGVzdGluYXRpb24pIHtcbiAgICB2YXIgYXRpT3B0cztcbiAgICBpZiAoY29uZmlnKSB7XG4gICAgICBhdGlPcHRzID0ge1xuICAgICAgICBjb2xsZWN0RG9tYWluOiBkZXN0aW5hdGlvbi5pc1Rlc3QgPyBDT0xMRUNUSU9OX0RPTUFJTi50ZXN0IDogQ09MTEVDVElPTl9ET01BSU4ubGl2ZSxcbiAgICAgICAgY29sbGVjdERvbWFpblNTTDogZGVzdGluYXRpb24uaXNUZXN0ID8gQ09MTEVDVElPTl9ET01BSU4udGVzdFNTTCA6IENPTExFQ1RJT05fRE9NQUlOLmxpdmVTU0wsXG4gICAgICAgIGNvb2tpZURvbWFpbjogdGhpcy5fZ2V0Q29va2llRG9tYWluKHdpbmRvdyksXG4gICAgICAgIGRvbWFpbjogZGVzdGluYXRpb24uaXNUZXN0ID8gQ09MTEVDVElPTl9ET01BSU4udGVzdEhvc3QgOiBDT0xMRUNUSU9OX0RPTUFJTi5saXZlSG9zdCxcbiAgICAgICAgcGl4ZWxQYXRoOiBjb25maWdbQ29uZmlnS2V5cy5BVElfUElYRUxfUEFUSF0gfHwgJy9oaXQueGl0aScsXG4gICAgICAgIHNlY3VyZTogY29uZmlnW0NvbmZpZ0tleXMuQVRJX0ZPUkNFX0hUVFBTXSA9PT0gZmFsc2UgPyBmYWxzZSA6IHRydWUsXG4gICAgICAgIHNpdGU6IGRlc3RpbmF0aW9uLmlkXG4gICAgICB9O1xuXG4gICAgICBpZiAoY29uZmlnW0NvbmZpZ0tleXMuQVRJX0xPR10pIHtcbiAgICAgICAgYXRpT3B0cy5sb2cgPSBjb25maWdbQ29uZmlnS2V5cy5BVElfTE9HXTtcbiAgICAgIH1cblxuICAgICAgaWYgKGNvbmZpZ1tDb25maWdLZXlzLkFUSV9TU0xfTE9HXSkge1xuICAgICAgICBhdGlPcHRzLmxvZ1NTTCA9IGNvbmZpZ1tDb25maWdLZXlzLkFUSV9TU0xfTE9HXTtcbiAgICAgIH1cblxuICAgICAgaWYgKGNvbmZpZ1tDb25maWdLZXlzLkVDSE9fREVWSUNFX0lEXSkge1xuICAgICAgICBhdGlPcHRzLkNsaWVudFNpZGVVc2VySWQgPSB7XG4gICAgICAgICAgY2xpZW50U2lkZU1vZGU6ICdyZXF1aXJlZCcsXG4gICAgICAgICAgdXNlcklkQ29va2llRHVyYXRpb246IDM5NyxcbiAgICAgICAgICB1c2VySWRFeHBpcmF0aW9uTW9kZTogJ2ZpeGVkJ1xuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICAvLyBDb25maWd1cmUgdGhlIGNhY2hlIG1vZGVcbiAgICAgIHN3aXRjaCAoY29uZmlnW0NvbmZpZ0tleXMuRUNIT19DQUNIRV9NT0RFXSkge1xuICAgICAgICBjYXNlIEVudW1zLkVjaG9DYWNoZU1vZGUuQUxMOlxuICAgICAgICAgIGF0aU9wdHMuT2ZmbGluZSA9IHtcbiAgICAgICAgICAgIHN0b3JhZ2VNb2RlOiBDb25maWdLZXlzLkFUSV9DQUNIRV9NT0RFX0FMV0FZU1xuICAgICAgICAgIH07XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgYXRpT3B0cy5PZmZsaW5lID0ge1xuICAgICAgICAgICAgc3RvcmFnZU1vZGU6IENvbmZpZ0tleXMuQVRJX0NBQ0hFX01PREVfUkVRVUlSRURcbiAgICAgICAgICB9O1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBhdGlPcHRzO1xuICB9O1xuXG4gIC8vIFBSSVZBVEVcbiAgQXRpRGVsZWdhdGUucHJvdG90eXBlLl9jcmVhdGVUYWcgPSBmdW5jdGlvbihhdGlPcHRzKSB7XG4gICAgcmV0dXJuIG5ldyBBdGlEZWxlZ2F0ZS5TbWFydFRhZy5UcmFja2VyLlRhZyhhdGlPcHRzKTtcbiAgfTtcblxuICBBdGlEZWxlZ2F0ZS5wcm90b3R5cGUuX2luaXRUYWcgPSBmdW5jdGlvbihvcmJpdFZhcnMpIHtcbiAgICBpZiAodGhpcy5fdGFnKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGNvbmZpZyA9IHRoaXMuX2NvbmZpZztcblxuICAgIHZhciBkZXN0aW5hdGlvbiA9IHRoaXMuX2dldERlc3RpbmF0aW9uKGNvbmZpZywgb3JiaXRWYXJzKTtcbiAgICB2YXIgYXRpT3B0cyA9IHRoaXMuX2NyZWF0ZUF0aU9wdGlvbnMoY29uZmlnLCBkZXN0aW5hdGlvbik7XG5cbiAgICB0aGlzLl90YWcgPSB0aGlzLl9jcmVhdGVUYWcoYXRpT3B0cyk7XG4gICAgdGhpcy5fdGFnLm9uVHJpZ2dlcignVHJhY2tlcjpIaXQ6U2VudDpPaycsIHRoaXMuX29uSGl0U2VudC5iaW5kKHRoaXMpKTtcblxuICAgIGlmICh0aGlzLl9kZWJ1Zykge1xuICAgICAgdGhpcy5fdGFnLmRlYnVnID0gZnVuY3Rpb24oaW5mbykge1xuICAgICAgICBERUJVRy5pbmZvKCdBVEkgREVCVUc6ICcgKyBpbmZvKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2RldmljZUlkKSB7XG4gICAgICB0aGlzLl90YWcuY2xpZW50U2lkZVVzZXJJZC5zZXQodGhpcy5fZGV2aWNlSWQpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9iYmNfaGlkKSB7XG4gICAgICB0aGlzLl90YWcuc2V0UGFyYW0oQVRJTGFiZWxLZXlzLkhBU0hFRF9JRCwgdGhpcy5fYmJjX2hpZCwgeyBoaXRUeXBlOiBbJ2FsbCddLCBwZXJtYW5lbnQ6IHRydWUgfSk7XG4gICAgfVxuXG4gICAgdmFyIHByb2R1Y2VyID0gdGhpcy5fZ2V0UHJvZHVjZXIoY29uZmlnLCBvcmJpdFZhcnMsIGRlc3RpbmF0aW9uKTtcbiAgICB0aGlzLnNldFByb2R1Y2VyKHByb2R1Y2VyKTtcblxuICAgIGlmIChjb25maWcgJiYgY29uZmlnW0NvbmZpZ0tleXMuQVBQX0NBVEVHT1JZXSkge1xuICAgICAgdGhpcy5hZGRMYWJlbChBVElMYWJlbEtleXMuQVBQX0NBVEVHT1JZLCBjb25maWdbQ29uZmlnS2V5cy5BUFBfQ0FURUdPUlldKTtcbiAgICB9XG5cbiAgICAvLyBQcm92aWRlIGN1c3RvbSBHRVQgbWV0aG9kIGlmIHNwZWNpZmllZFxuICAgIHRoaXMuX3NldEhUVFBHZXRNZXRob2QoKTtcbiAgfTtcblxuICBBdGlEZWxlZ2F0ZS5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbihvcmJpdFZhcnMpIHtcbiAgICBpZiAodGhpcy5faXNFbmFibGVkICYmICF0aGlzLl9oYXNTdGFydGVkKSB7XG4gICAgICB0aGlzLl9oYXNTdGFydGVkID0gdHJ1ZTtcbiAgICAgIHJldHVybiB0aGlzLl9pbml0VGFnKG9yYml0VmFycyk7XG4gICAgfVxuICB9O1xuXG4gIEF0aURlbGVnYXRlLnByb3RvdHlwZS5lbmFibGUgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoIXRoaXMuX2lzRW5hYmxlZCkge1xuICAgICAgdGhpcy5faXNFbmFibGVkID0gdHJ1ZTtcbiAgICB9XG4gIH07XG5cbiAgQXRpRGVsZWdhdGUucHJvdG90eXBlLmRpc2FibGUgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5faXNFbmFibGVkKSB7XG4gICAgICB0aGlzLl9pc0VuYWJsZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuY2xlYXJNZWRpYSgpO1xuICAgIH1cbiAgfTtcblxuICBBdGlEZWxlZ2F0ZS5wcm90b3R5cGUuX29uSGl0U2VudCA9IGZ1bmN0aW9uKHRyaWdnZXIsIGhpdCkge1xuICAgIGlmIChoaXQgJiYgaGl0LmRldGFpbHMgJiYgaGl0LmRldGFpbHMuaGl0KSB7XG4gICAgICB0aGlzLl9zZXRMYXN0SGl0VXJsKGhpdC5kZXRhaWxzLmhpdCk7XG4gICAgfVxuICB9O1xuXG4gIEF0aURlbGVnYXRlLnByb3RvdHlwZS5fYWRkTGVuZ3RoVG9NZWRpYUhpdCA9IGZ1bmN0aW9uKGhpdFVybCkge1xuICAgIC8vSWYgdGhlIGhpdCBpcyBhIHJpY2ggbWVkaWEgZXZlbnQsIG1ha2Ugc3VyZSB3ZSBoYXZlIHRoZSBtb3N0IHJlY2VudCBtZWRpYSBsZW5ndGggKG0xKVxuICAgIGlmIChoaXRVcmwgJiYgdHlwZW9mIGhpdFVybCA9PT0gJ3N0cmluZycgJiYgaGl0VXJsLm1hdGNoKC9hXFw9KHBsYXl8cGF1c2V8c3RvcHxpbmZvfHJlZnJlc2h8bW92ZSkvKSkge1xuICAgICAgaWYgKHRoaXMuX21lZGlhTGVuZ3RoKSB7XG4gICAgICAgIHZhciBsZW5ndGggPSAnbTE9JyArIE1hdGguY2VpbCh0aGlzLl9tZWRpYUxlbmd0aCAvIDEwMDApO1xuICAgICAgICBoaXRVcmwgPSBoaXRVcmwucmVwbGFjZSgvbTFcXD1cXGQrL2csIGxlbmd0aCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGhpdFVybDtcbiAgfTtcblxuICBBdGlEZWxlZ2F0ZS5wcm90b3R5cGUuX3NldExhc3RIaXRVcmwgPSBmdW5jdGlvbihoaXRVcmwpIHtcbiAgICBpZiAoaGl0VXJsICYmIHR5cGVvZiBoaXRVcmwgPT09ICdzdHJpbmcnICYmIGhpdFVybC5tYXRjaCgvYVxcPXBsYXkvKSkge1xuICAgICAgdGhpcy5fbGFzdFBsYXlIaXRVcmwgPSBoaXRVcmw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2xhc3RIaXRVcmwgPSBoaXRVcmw7XG4gICAgfVxuICB9O1xuXG4gIEF0aURlbGVnYXRlLnByb3RvdHlwZS5zZXRUcmFjZUlkID0gZnVuY3Rpb24oaWQpIHtcbiAgICB0aGlzLmFkZExhYmVsKENvbmZpZ0tleXMuRUNIT19UUkFDRSwgaWQpO1xuICB9O1xuXG4gIC8vIEFwcGxpY2F0aW9uIFN0YXRlIE1ldGhvZHNcbiAgQXRpRGVsZWdhdGUucHJvdG90eXBlLmFkZExhYmVscyA9IGZ1bmN0aW9uKGxhYmVscykge1xuICAgIGlmICh0eXBlb2YgbGFiZWxzID09PSAnb2JqZWN0Jykge1xuICAgICAgaWYgKGxhYmVscy5iYmNfaWRlbnRpdHkpIHtcblxuICAgICAgICB0aGlzLnNldEJCQ1VzZXIoe1xuICAgICAgICAgIGJiY19oaWQ6IGxhYmVscy5iYmNfaGlkLFxuICAgICAgICAgIHNpZ25lZF9pbjogbGFiZWxzLmJiY19pZGVudGl0eSA9PT0gJzEnXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGRlbGV0ZSBsYWJlbHMuYmJjX2hpZDtcbiAgICAgICAgZGVsZXRlIGxhYmVscy5iYmNfaWRlbnRpdHk7XG4gICAgICB9XG5cbiAgICAgIGZvciAodmFyIGxhYmVsIGluIGxhYmVscykge1xuICAgICAgICBpZiAobGFiZWxzLmhhc093blByb3BlcnR5KGxhYmVsKSkge1xuICAgICAgICAgIHRoaXMuYWRkTGFiZWwobGFiZWwsIGxhYmVsc1tsYWJlbF0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIEF0aURlbGVnYXRlLnByb3RvdHlwZS5hZGRMYWJlbCA9IGZ1bmN0aW9uKGxhYmVsLCB2YWx1ZSkge1xuICAgIC8vIGlmICh0aGlzLl9pc0V4Y2x1ZGVkTGFiZWwobGFiZWwpID09PSB0cnVlKSB7XG4gICAgLy8gICByZXR1cm47XG4gICAgLy8gfVxuXG4gICAgLy8gYWRkIGtub3duIGxhYmVscyB0byBBVEkgcGFnZSB2YWx1ZXMsIHVua25vd24gdG8gY3VzdG9tT2JqZWN0XG4gICAgaWYgKGxhYmVsID09PSBBVElMYWJlbEtleXMuQkJDX0NPVU5URVJfTkFNRSB8fCBsYWJlbCA9PT0gQVRJTGFiZWxLZXlzLkxFVkVMXzJfU0lURSkge1xuICAgICAgdGhpcy5fcGFnZVZhbHVlc1tsYWJlbF0gPSB2YWx1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fY3VzdG9tUGFyYW1zW2xhYmVsXSA9IHZhbHVlO1xuICAgIH1cbiAgfTtcblxuICBBdGlEZWxlZ2F0ZS5wcm90b3R5cGUuc2V0TG9nZ2VkSW5Ub0JCQ0lkID0gZnVuY3Rpb24oaGlkKSB7XG4gICAgdGhpcy5zZXRCQkNVc2VyKHtcbiAgICAgIGJiY19oaWQ6IGhpZCxcbiAgICAgIHNpZ25lZF9pbjogdHJ1ZVxuICAgIH0pO1xuICB9O1xuXG4gIEF0aURlbGVnYXRlLnByb3RvdHlwZS5zZXRMb2dnZWRPdXRPZkJCQ0lkID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMuX3RhZykge1xuICAgICAgdGhpcy5fdGFnLmRlbFBhcmFtKEFUSUxhYmVsS2V5cy5IQVNIRURfSUQpO1xuICAgIH1cblxuICAgIHRoaXMuX2JiY19oaWQgPSBudWxsO1xuICB9O1xuXG4gIEF0aURlbGVnYXRlLnByb3RvdHlwZS5zZXRBcHBWZXJzaW9uID0gZnVuY3Rpb24gKHZlcnNpb24pIHtcbiAgICBpZiAodmVyc2lvbiAmJiB0aGlzLl90YWcpIHtcbiAgICAgIHRoaXMuX3RhZy5zZXRQYXJhbShBVElMYWJlbEtleXMuQVBQX1ZFUlNJT04sICdbJyArIHZlcnNpb24gKyAnXScsIHsgaGl0VHlwZTogWydhbGwnXSwgcGVybWFuZW50OiB0cnVlIH0pO1xuICAgIH1cbiAgfTtcblxuICBBdGlEZWxlZ2F0ZS5wcm90b3R5cGUuc2V0QkJDVXNlciA9IGZ1bmN0aW9uKHVzZXJJbmZvKSB7XG4gICAgaWYgKHVzZXJJbmZvLmJiY19oaWQpIHtcbiAgICAgIHRoaXMuX2JiY19oaWQgPSB1c2VySW5mby5iYmNfaGlkO1xuICAgIH0gZWxzZSBpZiAodXNlckluZm8uc2lnbmVkX2luKSB7XG4gICAgICB0aGlzLl9iYmNfaGlkID0gJ3VuaWRlbnRpZmllZC11c2VyJztcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fdGFnICYmICF0aGlzLl9jdXN0b21QYXJhbXMuYmJjX2lkX3dhaXQpIHtcbiAgICAgIHRoaXMuX3RhZy5zZXRQYXJhbShBVElMYWJlbEtleXMuSEFTSEVEX0lELCB0aGlzLl9iYmNfaGlkLCB7IGhpdFR5cGU6IFsnYWxsJ10sIHBlcm1hbmVudDogdHJ1ZSB9KTtcbiAgICB9XG4gIH07XG5cbiAgQXRpRGVsZWdhdGUucHJvdG90eXBlLmFkZE1hbmFnZWRMYWJlbCA9IGR1bW15O1xuXG4gIEF0aURlbGVnYXRlLnByb3RvdHlwZS5yZW1vdmVMYWJlbHMgPSBmdW5jdGlvbihrZXlzQXJyYXkpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgbGVuID0ga2V5c0FycmF5Lmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICB0aGlzLnJlbW92ZUxhYmVsKGtleXNBcnJheVtpXSk7XG4gICAgfVxuICB9O1xuXG4gIEF0aURlbGVnYXRlLnByb3RvdHlwZS5yZW1vdmVMYWJlbCA9IGZ1bmN0aW9uKGxhYmVsKSB7XG4gICAgaWYgKGxhYmVsID09PSBBVElMYWJlbEtleXMuQkJDX0NPVU5URVJfTkFNRSB8fCBsYWJlbCA9PT0gQVRJTGFiZWxLZXlzLkxFVkVMXzJfU0lURSkge1xuICAgICAgZGVsZXRlIHRoaXMuX3BhZ2VWYWx1ZXNbbGFiZWxdO1xuICAgIH0gZWxzZSB7XG4gICAgICBkZWxldGUgdGhpcy5fY3VzdG9tUGFyYW1zW2xhYmVsXTtcbiAgICB9XG4gIH07XG5cbiAgQXRpRGVsZWdhdGUucHJvdG90eXBlLnNldENvdW50ZXJOYW1lID0gZnVuY3Rpb24gKGNvdW50ZXJOYW1lKSB7XG4gICAgdGhpcy5fdGFnLnBhZ2Uuc2V0KHtcbiAgICAgIG5hbWU6IGNvdW50ZXJOYW1lLFxuICAgICAgbGV2ZWwyOiB0aGlzLl9wYWdlVmFsdWVzW0FUSUxhYmVsS2V5cy5MRVZFTF8yX1NJVEVdXG4gICAgfSk7XG4gIH07XG5cbiAgQXRpRGVsZWdhdGUucHJvdG90eXBlLnNldENvbnRlbnRMYW5ndWFnZSA9IGR1bW15O1xuICBBdGlEZWxlZ2F0ZS5wcm90b3R5cGUuc2V0Q2FjaGVNb2RlID0gZHVtbXk7XG5cbiAgQXRpRGVsZWdhdGUucHJvdG90eXBlLmNsZWFyQ2FjaGUgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLl90YWcub2ZmbGluZS5yZW1vdmUoKTtcbiAgfTtcblxuICBBdGlEZWxlZ2F0ZS5wcm90b3R5cGUuZmx1c2hDYWNoZSA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuX3RhZy5vZmZsaW5lLnNlbmQoKTtcbiAgfTtcblxuICBBdGlEZWxlZ2F0ZS5wcm90b3R5cGUuc2V0RVNTRW5hYmxlZCA9IGR1bW15O1xuXG4gIC8vIEFuYWx5dGljcyBNZXRob2RzXG4gIEF0aURlbGVnYXRlLnByb3RvdHlwZS52aWV3RXZlbnQgPSBmdW5jdGlvbihjb3VudGVyTmFtZSwgZXZlbnRMYWJlbHMpIHtcbiAgICBpZiAoIXRoaXMuX2V2ZW50c0VuYWJsZWQoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFNldCBjb3VudGVybmFtZSBhcyBhIHBlcnNpc3RlbnQgbGFiZWwgc28gaXQncyBpbmNsdWRlZCBvbiBhbGwgc3Vic2VxdWVudCBldmVudHMuXG4gICAgdGhpcy5hZGRMYWJlbChBVElMYWJlbEtleXMuQkJDX0NPVU5URVJfTkFNRSwgY291bnRlck5hbWUpO1xuXG4gICAgdGhpcy5jb3VudGVyTmFtZSA9IGNvdW50ZXJOYW1lO1xuXG4gICAgcmV0dXJuIE9yYml0VmFyaWFibGVzLmdldCgpLnRoZW4oKGZ1bmN0aW9uIChvcmJpdFZhcnMpIHtcblxuICAgICAgdmFyIGNsb25lZEN1c3RvbVBhcmFtcyA9ICBVdGlscy5jbG9uZSh0aGlzLl9jdXN0b21QYXJhbXMpO1xuICAgICAgdmFyIGN1c3RvbVZhcnMgPSBDdXN0b21WYXJpYWJsZXMuY3JlYXRlKHRoaXMuX2FwcE5hbWUsIHRoaXMuX2FwcFR5cGUsIGNsb25lZEN1c3RvbVBhcmFtcywgZXZlbnRMYWJlbHMsIG9yYml0VmFycywgZG9jdW1lbnQpO1xuXG4gICAgICAvLyBUaGlzIHNldHMgY3VzdG9tL2V2ZW50IGxhYmVscyB0byB0aGUgY3VzdG9tT2JqZWN0XG4gICAgICB2YXIgY2xvbmVkTGFiZWxzID0gVXRpbHMuZXh0ZW5kKFxuICAgICAgICBldmVudExhYmVscywgdHJ1ZSxcbiAgICAgICAgQVRJTGFiZWxLZXlzLkVDSE9fRVZFTlRfTkFNRSwgJ3ZpZXcnXG4gICAgICApO1xuXG4gICAgICB2YXIgY3VzdG9tT2JqZWN0ID0gVXRpbHMuY29tYmluZU9iamVjdHMoY2xvbmVkQ3VzdG9tUGFyYW1zLCBjbG9uZWRMYWJlbHMsIGZhbHNlKTtcbiAgICAgIHZhciBldmVudFZhbHVlcyA9IFV0aWxzLmNsb25lKHRoaXMuX3BhZ2VWYWx1ZXMpO1xuICAgICAgZXZlbnRWYWx1ZXMuY3VzdG9tT2JqZWN0ID0gY3VzdG9tT2JqZWN0O1xuICAgICAgaWYgKGN1c3RvbVZhcnMpIHtcbiAgICAgICAgZXZlbnRWYWx1ZXMuY3VzdG9tVmFycyA9IGN1c3RvbVZhcnM7XG4gICAgICB9XG5cbiAgICAgIC8vIFNldCB0aGUgc2VjdGlvblxuICAgICAgdGhpcy5fc2V0U2VjdGlvbihjbG9uZWRMYWJlbHMsIGV2ZW50VmFsdWVzLCBvcmJpdFZhcnMpO1xuXG4gICAgICB0aGlzLl90YWcucGFnZS5zZW5kKGV2ZW50VmFsdWVzKTtcbiAgICAgIHRoaXMuX2xhc3RQYWdlID0gZXZlbnRWYWx1ZXM7XG5cbiAgICB9KS5iaW5kKHRoaXMpKTtcbiAgfTtcblxuICBBdGlEZWxlZ2F0ZS5wcm90b3R5cGUuZXJyb3JFdmVudCA9IGR1bW15O1xuXG4gIEF0aURlbGVnYXRlLnByb3RvdHlwZS51c2VyQWN0aW9uRXZlbnQgPSBmdW5jdGlvbihhY3Rpb25UeXBlLCBhY3Rpb25OYW1lLCBldmVudExhYmVscykge1xuICAgIGlmICghdGhpcy5fZXZlbnRzRW5hYmxlZCgpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gVGhpcyBzZXRzIGN1c3RvbS9ldmVudCBsYWJlbHMgdG8gdGhlIGN1c3RvbU9iamVjdFxuICAgIHZhciBjbG9uZWRMYWJlbHMgPSBVdGlscy5leHRlbmQoXG4gICAgICBldmVudExhYmVscywgdHJ1ZSxcbiAgICAgIEFUSUxhYmVsS2V5cy5FQ0hPX0VWRU5UX05BTUUsICd1c2VyQWN0J1xuICAgICk7XG5cbiAgICB2YXIgY3VzdG9tT2JqZWN0ID0gVXRpbHMuY29tYmluZU9iamVjdHModGhpcy5fY3VzdG9tUGFyYW1zLCBjbG9uZWRMYWJlbHMsIGZhbHNlKTtcbiAgICB2YXIgZXZlbnRWYWx1ZXMgPSBVdGlscy5jbG9uZSh0aGlzLl9wYWdlVmFsdWVzKTtcblxuICAgIGlmIChldmVudFZhbHVlcykge1xuICAgICAgZXZlbnRWYWx1ZXMuYWN0aW9uTmFtZSA9IGFjdGlvbk5hbWU7XG4gICAgICBldmVudFZhbHVlcy5hY3Rpb25UeXBlID0gYWN0aW9uVHlwZTtcbiAgICAgIGV2ZW50VmFsdWVzLnVzZXIgPSB0aGlzLl9iYmNfaGlkO1xuICAgICAgZXZlbnRWYWx1ZXNbQVRJTGFiZWxLZXlzLkJCQ19DT1VOVEVSX05BTUVdID0gdGhpcy5jb3VudGVyTmFtZTtcbiAgICAgIGV2ZW50VmFsdWVzLmN1c3RvbU9iamVjdCA9IGN1c3RvbU9iamVjdDtcblxuICAgICAgdmFyIGlzQmFja2dyb3VuZEV2ZW50ID0gQm9vbGVhbihldmVudFZhbHVlcy5jdXN0b21PYmplY3RbQVRJTGFiZWxLZXlzLklTX0JBQ0tHUk9VTkRdKTtcblxuICAgICAgaWYgKGlzQmFja2dyb3VuZEV2ZW50KSB7XG4gICAgICAgIFVzZXJBY3Rpb25FdmVudC5zZW5kSW1wcmVzc2lvbkV2ZW50KHRoaXMuX3RhZywgZXZlbnRWYWx1ZXMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgVXNlckFjdGlvbkV2ZW50LnNlbmRDbGlja0V2ZW50KHRoaXMuX3RhZywgZXZlbnRWYWx1ZXMpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICAvLyBNZWRpYSBQbGF5ZXIgYXR0cmlidXRlc1xuICBBdGlEZWxlZ2F0ZS5wcm90b3R5cGUuc2V0UGxheWVyTmFtZSA9IGZ1bmN0aW9uKG1lZGlhUGxheWVyTmFtZSkge1xuICAgIHRoaXMuX21lZGlhUGxheWVyTmFtZSA9IG1lZGlhUGxheWVyTmFtZTtcbiAgfTtcblxuICBBdGlEZWxlZ2F0ZS5wcm90b3R5cGUuc2V0UGxheWVyVmVyc2lvbiA9IGZ1bmN0aW9uKG1lZGlhUGxheWVyVmVyc2lvbikge1xuICAgIHRoaXMuX21lZGlhUGxheWVyVmVyc2lvbiA9IG1lZGlhUGxheWVyVmVyc2lvbjtcbiAgfTtcblxuICBBdGlEZWxlZ2F0ZS5wcm90b3R5cGUuc2V0UGxheWVySXNQb3BwZWQgPSBkdW1teTtcbiAgQXRpRGVsZWdhdGUucHJvdG90eXBlLnNldFBsYXllcldpbmRvd1N0YXRlID0gZHVtbXk7XG4gIEF0aURlbGVnYXRlLnByb3RvdHlwZS5zZXRQbGF5ZXJWb2x1bWUgPSBkdW1teTtcbiAgQXRpRGVsZWdhdGUucHJvdG90eXBlLnNldFBsYXllcklzU3VidGl0bGVkID0gZHVtbXk7XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIGJyb2tlci5cbiAgICpcbiAgICogVGhpcyBtZXRob2Qgc2hvdWxkIG9ubHkgYmUgY2FsbGVkIGJ5IHRoZSBFY2hvQ2xpZW50IGNsYXNzIHRvXG4gICAqIGVuc3VyZSB0aGUgaW50ZXJmYWNlIGlzIGltcGxlbWVudGVkLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gYnJva2VyIEFuIG9iamVjdCBjb25mb3JtaW5nIHRvIHRoZSBicm9rZXIgaW50ZXJmYWNlLlxuICAgKlxuICAgKiBAcmV0dXJuIHtBdGlEZWxlZ2F0ZX1cbiAgICovXG4gIEF0aURlbGVnYXRlLnByb3RvdHlwZS5zZXRCcm9rZXIgPSBmdW5jdGlvbihicm9rZXIpIHtcbiAgICB0aGlzLl9icm9rZXIgPSBicm9rZXI7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLy8gTWVkaWEgQXR0cmlidXRlc1xuICBBdGlEZWxlZ2F0ZS5wcm90b3R5cGUuc2V0TWVkaWEgPSBmdW5jdGlvbihtZWRpYSkge1xuICAgIGlmICghdGhpcy5fZXZlbnRzRW5hYmxlZCgpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gSWYgdGhlIG1lZGlhIHBsYXllciBuYW1lIGhhcyBwcmV2aW91c2x5IHByb3ZpZGVkIGFuZCBpc24ndCBzZXQgaW4gdGhpcyBtZWRpYSBvYmplY3RcbiAgICAvLyB0aGVuIHVzZSB0aGUgcHJldmlvdXNseSBwcm92aWRlZCB2YWx1ZVxuICAgIGlmICh0aGlzLl9tZWRpYVBsYXllck5hbWUgJiYgIW1lZGlhLmdldE1lZGlhUGxheWVyTmFtZSgpKSB7XG4gICAgICBtZWRpYS5zZXRNZWRpYVBsYXllck5hbWUodGhpcy5fbWVkaWFQbGF5ZXJOYW1lKTtcbiAgICB9XG5cbiAgICAvLyBJZiB0aGUgbWVkaWEgcGxheWVyIHZlcnNpb24gaGFzIHByZXZpb3VzbHkgcHJvdmlkZWQgYW5kIGlzbid0IHNldCBpbiB0aGlzIG1lZGlhIG9iamVjdFxuICAgIC8vIHRoZW4gdXNlIHRoZSBwcmV2aW91c2x5IHByb3ZpZGVkIHZhbHVlXG4gICAgaWYgKHRoaXMuX21lZGlhUGxheWVyVmVyc2lvbiAmJiAhbWVkaWEuZ2V0TWVkaWFQbGF5ZXJWZXJzaW9uKCkpIHtcbiAgICAgIG1lZGlhLnNldE1lZGlhUGxheWVyVmVyc2lvbih0aGlzLl9tZWRpYVBsYXllclZlcnNpb24pO1xuICAgIH1cblxuICAgIHRoaXMuY2xlYXJNZWRpYSgpO1xuICAgIHRoaXMuX21lZGlhID0gbWVkaWE7XG4gICAgdGhpcy5hZGRNZWRpYSh0aGlzLl9tZWRpYSk7XG4gIH07XG5cbiAgQXRpRGVsZWdhdGUucHJvdG90eXBlLnNldE1lZGlhTGVuZ3RoID0gZnVuY3Rpb24obGVuZ3RoKSB7XG4gICAgdGhpcy5fbWVkaWFMZW5ndGggPSBsZW5ndGg7XG4gICAgdGhpcy5fbWVkaWEuc2V0TGVuZ3RoKGxlbmd0aCk7XG4gIH07XG5cbiAgQXRpRGVsZWdhdGUucHJvdG90eXBlLnNldE1lZGlhQml0cmF0ZSA9IGR1bW15O1xuICBBdGlEZWxlZ2F0ZS5wcm90b3R5cGUuc2V0TWVkaWFDb2RlYyA9IGR1bW15O1xuICBBdGlEZWxlZ2F0ZS5wcm90b3R5cGUuc2V0TWVkaWFDRE4gPSBkdW1teTtcblxuICAvKipcbiAgICogSGFuZGxlcyBhbiB1cGRhdGVkIGNsaXAgZnJvbSB0aGUgTGl2ZUJyb2tlclxuICAgKlxuICAgKiBAcGFyYW0ge01lZGlhfSBuZXdNZWRpYVxuICAgKiBAcGFyYW0ge051bWJlcn0gbmV3UG9zaXRpb25cbiAgICogQHBhcmFtIHtOdW1iZXJ9IG9sZFBvc2l0aW9uXG4gICAqL1xuICBBdGlEZWxlZ2F0ZS5wcm90b3R5cGUubGl2ZU1lZGlhVXBkYXRlID0gZnVuY3Rpb24obmV3TWVkaWEsIG5ld1Bvc2l0aW9uLCBvbGRQb3NpdGlvbikge1xuXG4gICAgVXRpbHMuYXNzZXJ0KFxuICAgICAgdHlwZW9mIG5ld1Bvc2l0aW9uID09PSAnbnVtYmVyJyxcbiAgICAgICduZXdQb3NpdGlvbiBtdXN0IGJlIGEgbnVtYmVyJ1xuICAgICk7XG5cbiAgICBVdGlscy5hc3NlcnQoXG4gICAgICB0eXBlb2Ygb2xkUG9zaXRpb24gPT09ICdudW1iZXInLFxuICAgICAgJ29sZFBvc2l0aW9uIG11c3QgYmUgYSBudW1iZXInXG4gICAgKTtcbiAgICBuZXdNZWRpYS5zZXRQcm9kdWNlckJ5SWQodGhpcy5fbWVkaWEuZ2V0UHJvZHVjZXIoKSk7XG5cbiAgICAvLyBzdG9wIHBsYXliYWNrXG4gICAgdGhpcy5fc2VuZE1lZGlhRXZlbnQoQVZfRVZFTlRfVFlQRVMuU1RPUCk7XG4gICAgdGhpcy5fbWVkaWEgPSBuZXdNZWRpYTtcbiAgICB0aGlzLmFkZE1lZGlhKHRoaXMuX21lZGlhKTtcblxuICAgIHRoaXMuX3NlbmRNZWRpYUV2ZW50KEFWX0VWRU5UX1RZUEVTLlBMQVkpO1xuICB9O1xuXG4gIEF0aURlbGVnYXRlLnByb3RvdHlwZS5saXZlRW5yaWNobWVudEZhaWxlZCA9IGR1bW15O1xuXG4gIEF0aURlbGVnYXRlLnByb3RvdHlwZS5fZ2V0SWRPYmplY3RWYWx1ZSA9IGZ1bmN0aW9uKF9pZE9iamVjdCkge1xuICAgIGlmIChfaWRPYmplY3QgIT09IG51bGwgJiYgX2lkT2JqZWN0LmlzVmFsdWVWYWxpZCgpKSB7XG4gICAgICByZXR1cm4gX2lkT2JqZWN0LmdldFZhbHVlKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIElOVkFMSURfREFUQV9TVFJJTkc7XG4gIH07XG5cbiAgQXRpRGVsZWdhdGUucHJvdG90eXBlLl9nZXRNb3N0UHJlY2VkZW50SWRPYmplY3QgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgdmVyc2lvbklkID0gdGhpcy5fbWVkaWEuZ2V0VmVyc2lvbklkT2JqZWN0KCk7XG4gICAgdmFyIGVwaXNvZGVJZCA9IHRoaXMuX21lZGlhLmdldEVwaXNvZGVJZE9iamVjdCgpO1xuICAgIHZhciBjbGlwSWQgICAgPSB0aGlzLl9tZWRpYS5nZXRDbGlwSWRPYmplY3QoKTtcbiAgICB2YXIgdnBJZCAgICAgID0gdGhpcy5fbWVkaWEuZ2V0VnBJZE9iamVjdCgpO1xuICAgIHZhciBzZXJ2aWNlSWQgPSB0aGlzLl9tZWRpYS5nZXRTZXJ2aWNlSWRPYmplY3QoKTtcblxuICAgIGlmICh2ZXJzaW9uSWQuaXNWYWx1ZVZhbGlkKCkpIHtcbiAgICAgIHJldHVybiB2ZXJzaW9uSWQ7XG4gICAgfSBlbHNlIGlmIChlcGlzb2RlSWQuaXNWYWx1ZVZhbGlkKCkpIHtcbiAgICAgIHJldHVybiBlcGlzb2RlSWQ7XG4gICAgfSBlbHNlIGlmIChjbGlwSWQuaXNWYWx1ZVZhbGlkKCkpIHtcbiAgICAgIHJldHVybiBjbGlwSWQ7XG4gICAgfSBlbHNlIGlmICh2cElkLmlzVmFsdWVWYWxpZCgpKSB7XG4gICAgICByZXR1cm4gdnBJZDtcbiAgICB9IGVsc2UgaWYgKHNlcnZpY2VJZC5pc1ZhbHVlVmFsaWQoKSkge1xuICAgICAgcmV0dXJuIHNlcnZpY2VJZDtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfTtcblxuICBBdGlEZWxlZ2F0ZS5wcm90b3R5cGUuX2V2ZW50c0VuYWJsZWQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5faXNFbmFibGVkICYmIHRoaXMuX2hhc1N0YXJ0ZWQ7XG4gIH07XG5cbiAgQXRpRGVsZWdhdGUucHJvdG90eXBlLmFkZE1lZGlhID0gZnVuY3Rpb24obWVkaWEpIHtcbiAgICBpZiAodGhpcy5fdGFnICYmIHRoaXMuX3RhZy5yaWNoTWVkaWEpIHtcblxuICAgICAgLy8gQnVpbGQgdGhlIHNldCBvZiBjb21tb24gbWVkaWEgcGFyYW1zIHRoYXQgYXJlIHNlbnQgd2l0aCBldmVyeSBldmVudFxuICAgICAgdGhpcy5fY29tbW9uTWVkaWFQYXJhbXMgPSB7XG4gICAgICAgIHBsYXllcklkOiBtZWRpYS5nZXRQbGF5ZXJJZCgpLFxuICAgICAgICBtZWRpYUxhYmVsOiB0aGlzLl9nZXRJZE9iamVjdFZhbHVlKHRoaXMuX2dldE1vc3RQcmVjZWRlbnRJZE9iamVjdCgpKSxcbiAgICAgICAgbWVkaWFUaGVtZTE6IE1lZGlhVGhlbWVzLmNvbnN0cnVjdFRoZW1lT25lKG1lZGlhKSxcbiAgICAgICAgbWVkaWFUaGVtZTI6IE1lZGlhVGhlbWVzLmNvbnN0cnVjdFRoZW1lVHdvKG1lZGlhKSxcbiAgICAgICAgbWVkaWFUaGVtZTM6IE1lZGlhVGhlbWVzLmNvbnN0cnVjdFRoZW1lVGhyZWUobWVkaWEpXG4gICAgICB9O1xuXG4gICAgICB2YXIgcmljaE1lZGlhUGFyYW1zID0ge1xuICAgICAgICBtZWRpYVR5cGU6IG1lZGlhLmdldEF2VHlwZSgpLFxuICAgICAgICBwbGF5ZXJJZDogdGhpcy5fY29tbW9uTWVkaWFQYXJhbXMucGxheWVySWQsXG4gICAgICAgIGR1cmF0aW9uOiAoIW1lZGlhIHx8ICFtZWRpYS5nZXRMZW5ndGgoKSkgP1xuICAgICAgICAgIDAgOiBNYXRoLmNlaWwobWVkaWEuZ2V0TGVuZ3RoKCkgLyAxMDAwKSxcbiAgICAgICAgbWVkaWFMYWJlbDogdGhpcy5fY29tbW9uTWVkaWFQYXJhbXMubWVkaWFMYWJlbCxcbiAgICAgICAgbWVkaWFUaGVtZTE6IHRoaXMuX2NvbW1vbk1lZGlhUGFyYW1zLm1lZGlhVGhlbWUxLFxuICAgICAgICBtZWRpYVRoZW1lMjogdGhpcy5fY29tbW9uTWVkaWFQYXJhbXMubWVkaWFUaGVtZTIsXG4gICAgICAgIG1lZGlhVGhlbWUzOiB0aGlzLl9jb21tb25NZWRpYVBhcmFtcy5tZWRpYVRoZW1lMyxcbiAgICAgICAgaXNFbWJlZGRlZDogbWVkaWEuaXNFbWJlZGRlZCgpLFxuICAgICAgICBicm9hZGNhc3RNb2RlOiBtZWRpYS5nZXRNZWRpYUNvbnN1bXB0aW9uTW9kZSgpID09PSBCUk9BRENBU1RfTU9ERS5MSVZFID8gQlJPQURDQVNUX01PREUuTElWRSA6IEJST0FEQ0FTVF9NT0RFLkNMSVAsXG4gICAgICAgIHJlZnJlc2hEdXJhdGlvbjoge1xuICAgICAgICAgIDA6IDEwLFxuICAgICAgICAgIDE6IDYwXG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBpZiAobWVkaWEuZ2V0UHJvZHVjZXIoKSkge1xuICAgICAgICByaWNoTWVkaWFQYXJhbXMubWVkaWFMZXZlbDIgPSBtZWRpYS5nZXRQcm9kdWNlcigpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl90YWcucmljaE1lZGlhLmFkZChyaWNoTWVkaWFQYXJhbXMpO1xuICAgIH1cbiAgfTtcblxuICAvLyBNZWRpYSBFdmVudHNcblxuICBBdGlEZWxlZ2F0ZS5wcm90b3R5cGUuX3NlbmRNZWRpYUV2ZW50ID0gZnVuY3Rpb24oYWN0aW9uLCBhZGRpdGlvbmFsRXZlbnRBcmdzKSB7XG4gICAgaWYgKHRoaXMuX2NvbW1vbk1lZGlhUGFyYW1zKSB7XG4gICAgICBNZWRpYUV2ZW50LnNlbmRFdmVudCh0aGlzLl90YWcsIHRoaXMuX2NvbW1vbk1lZGlhUGFyYW1zLCBhY3Rpb24sIGFkZGl0aW9uYWxFdmVudEFyZ3MpO1xuICAgIH1cbiAgfTtcblxuICBBdGlEZWxlZ2F0ZS5wcm90b3R5cGUuYXZQbGF5RXZlbnQgPSBmdW5jdGlvbihwb3NpdGlvbiwgZXZlbnRMYWJlbHMpIHsgLy8ganNoaW50IGlnbm9yZTpsaW5lXG4gICAgaWYgKCF0aGlzLl9ldmVudHNFbmFibGVkKCkgfHwgdGhpcy5fbWVkaWEuZ2V0UGxheWluZygpKSB7XG4gICAgICAvLyByZXR1cm4gaWYgZXZlbnRzIGRpc2FibGVkIG9yIGFscmVhZHkgcGxheWluZ1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9tZWRpYS5nZXRCdWZmZXJpbmcoKSkge1xuICAgICAgdGhpcy5fc2VuZE1lZGlhRXZlbnQoQVZfRVZFTlRfVFlQRVMuSU5GTywge1xuICAgICAgICBpc0J1ZmZlcmluZzogZmFsc2VcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9zZW5kTWVkaWFFdmVudChBVl9FVkVOVF9UWVBFUy5QTEFZKTtcbiAgICAgIHRoaXMuX2FkZEtlZXBBbGl2ZUV2ZW50U2NoZWR1bGUoKTtcbiAgICB9XG4gIH07XG5cbiAgQXRpRGVsZWdhdGUucHJvdG90eXBlLl9hZGRLZWVwQWxpdmVFdmVudFNjaGVkdWxlID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKCF0aGlzLl9ldmVudHNFbmFibGVkKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuX2tlZXBBbGl2ZUludGVydmFsSWQpIHtcbiAgICAgIHRoaXMuX2tlZXBBbGl2ZUludGVydmFsSWQgPSBzZXRJbnRlcnZhbChcbiAgICAgICAgdGhpcy5fc2VuZEtlZXBBbGl2ZUV2ZW50LmJpbmQodGhpcyksXG4gICAgICAgIHRoaXMuX2tlZXBBbGl2ZUR1cmF0aW9uKTtcbiAgICB9XG4gIH07XG5cbiAgQXRpRGVsZWdhdGUucHJvdG90eXBlLl9yZW1vdmVLZWVwQWxpdmVFdmVudFNjaGVkdWxlID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMuX2tlZXBBbGl2ZUludGVydmFsSWQpIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5fa2VlcEFsaXZlSW50ZXJ2YWxJZCk7XG4gICAgICB0aGlzLl9rZWVwQWxpdmVJbnRlcnZhbElkID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfTtcblxuICBBdGlEZWxlZ2F0ZS5wcm90b3R5cGUuX3NlbmRLZWVwQWxpdmVFdmVudCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICghdGhpcy5fZXZlbnRzRW5hYmxlZCgpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIHByb2R1Y2VySWQgPSAgKHRoaXMuX21lZGlhICYmIHRoaXMuX21lZGlhLmdldFByb2R1Y2VyKCkpID8gdGhpcy5fbWVkaWEuZ2V0UHJvZHVjZXIoKSA6IDA7XG5cbiAgICB2YXIgZXZlbnQgPSB7XG4gICAgICBuYW1lOiBLRUVQQUxJVkVfQ09VTlRFUk5BTUUsXG4gICAgICBsZXZlbDI6IHByb2R1Y2VySWRcbiAgICB9O1xuXG4gICAgdGhpcy5fdGFnLnBhZ2Uuc2VuZChldmVudCk7XG5cbiAgICAvL3JlLWFkZCB0aGUgcHJldmlvdXMgcGFnZSBzbyBzdWJzZXF1ZW50IGV2ZW50cyBhcmUgY29ycmVjdGx5IGF0dHJpYnV0ZWRcbiAgICBpZiAodGhpcy5fbGFzdFBhZ2UpIHtcbiAgICAgIHRoaXMuX3RhZy5wYWdlLnNldCh0aGlzLl9sYXN0UGFnZSk7XG4gICAgfVxuICB9O1xuXG4gIEF0aURlbGVnYXRlLnByb3RvdHlwZS5hdlBhdXNlRXZlbnQgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoIXRoaXMuX2V2ZW50c0VuYWJsZWQoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX3NlbmRNZWRpYUV2ZW50KEFWX0VWRU5UX1RZUEVTLlBBVVNFKTtcbiAgfTtcblxuICBBdGlEZWxlZ2F0ZS5wcm90b3R5cGUuYXZCdWZmZXJFdmVudCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICghdGhpcy5fZXZlbnRzRW5hYmxlZCgpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5fc2VuZE1lZGlhRXZlbnQoQVZfRVZFTlRfVFlQRVMuSU5GTywge1xuICAgICAgaXNCdWZmZXJpbmc6IHRydWVcbiAgICB9KTtcbiAgfTtcblxuICBBdGlEZWxlZ2F0ZS5wcm90b3R5cGUuYXZFbmRFdmVudCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICghdGhpcy5fZXZlbnRzRW5hYmxlZCgpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5faXNNZWRpYUxvYWRlZCA9IGZhbHNlO1xuXG4gICAgdGhpcy5fcmVtb3ZlS2VlcEFsaXZlRXZlbnRTY2hlZHVsZSgpO1xuXG4gICAgdGhpcy5fc2VuZE1lZGlhRXZlbnQoQVZfRVZFTlRfVFlQRVMuU1RPUCk7XG5cbiAgICBpZiAodGhpcy5pc1ZhbGlkTWVkaWEoKSkge1xuICAgICAgdGhpcy5jbGVhck1lZGlhKCk7XG4gICAgfVxuICB9O1xuXG4gIEF0aURlbGVnYXRlLnByb3RvdHlwZS5hdlJld2luZEV2ZW50ID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKCF0aGlzLl9ldmVudHNFbmFibGVkKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9zZW5kTWVkaWFFdmVudChBVl9FVkVOVF9UWVBFUy5NT1ZFKTtcbiAgfTtcblxuICBBdGlEZWxlZ2F0ZS5wcm90b3R5cGUuYXZGYXN0Rm9yd2FyZEV2ZW50ID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKCF0aGlzLl9ldmVudHNFbmFibGVkKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9zZW5kTWVkaWFFdmVudChBVl9FVkVOVF9UWVBFUy5NT1ZFKTtcbiAgfTtcblxuICBBdGlEZWxlZ2F0ZS5wcm90b3R5cGUuYXZTZWVrRXZlbnQgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoIXRoaXMuX2V2ZW50c0VuYWJsZWQoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX3NlbmRNZWRpYUV2ZW50KEFWX0VWRU5UX1RZUEVTLk1PVkUpO1xuICB9O1xuXG4gIEF0aURlbGVnYXRlLnByb3RvdHlwZS5hdlVzZXJBY3Rpb25FdmVudCA9IGZ1bmN0aW9uKGFjdGlvblR5cGUsIGFjdGlvbk5hbWUsIHBvc2l0aW9uLCBldmVudExhYmVscykgeyAvLyBqc2hpbnQgaWdub3JlOmxpbmVcbiAgICBpZiAoYWN0aW9uVHlwZSA9PT0gJ2VjaG9faGInICYmIGFjdGlvbk5hbWUgPT09ICdlY2hvX2hiXzUnKSB7XG4gICAgICB2YXIgaGl0VXJsID0gdGhpcy5fYWRkTGVuZ3RoVG9NZWRpYUhpdCh0aGlzLl9sYXN0UGxheUhpdFVybCk7XG4gICAgICBDdXN0b21FdmVudC5zZW5kUmVmcmVzaEV2ZW50KHRoaXMuX3RhZywgdGhpcy5fZ2V0SHR0cEdldE1ldGhvZCgpLCBoaXRVcmwpO1xuICAgIH1cbiAgfTtcblxuICBBdGlEZWxlZ2F0ZS5wcm90b3R5cGUuY2xlYXJNZWRpYSA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLmlzVmFsaWRNZWRpYSgpKSB7XG4gICAgICBpZiAodGhpcy5faXNNZWRpYUxvYWRlZCkge1xuICAgICAgICB0aGlzLmF2RW5kRXZlbnQoKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5fc3RyZWFtID0gbnVsbDtcbiAgICAgIHRoaXMuX21lZGlhID0gbnVsbDtcbiAgICAgIHRoaXMuX2NvbW1vbk1lZGlhUGFyYW1zID0gbnVsbDtcbiAgICAgIHRoaXMuX3RhZy5yaWNoTWVkaWEucmVtb3ZlQWxsKCk7XG4gICAgfVxuICB9O1xuXG4gIEF0aURlbGVnYXRlLnByb3RvdHlwZS5pc1ZhbGlkTWVkaWEgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5fbWVkaWEgIT09IG51bGwgJiYgdGhpcy5fbWVkaWEuYXZUeXBlID09PSBFbnVtcy5BdlR5cGUuVklERU87XG4gIH07XG5cbiAgQXRpRGVsZWdhdGUucHJvdG90eXBlLmlzVmFsaWRMaXZlTWVkaWEgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkTWVkaWEoKSAmJiB0aGlzLl9tZWRpYS5pc0xpdmUoKTtcbiAgfTtcblxuICAvKipcbiAgICogR2V0cyB0aGUgZGV2aWNlIElEIHRoYXQgd2FzIHVzZWQgdG8gcmVwb3J0IHRvIEFUSS5cbiAgICpcbiAgICogQHJldHVybnMge1N0cmluZ3xudWxsfVxuICAgKi9cbiAgQXRpRGVsZWdhdGUucHJvdG90eXBlLmdldERldmljZUlkID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX2RldmljZUlkO1xuICB9O1xuXG4gIEF0aURlbGVnYXRlLnByb3RvdHlwZS5yZXF1aXJlc0xhYmVsQ2xlYW5zaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH07XG5cbiAgcmV0dXJuIEF0aURlbGVnYXRlO1xufSk7XG4iLCJkZWZpbmUoZnVuY3Rpb24oKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICBmdW5jdGlvbiBDdXN0b21FdmVudCgpIHt9XG5cbiAgQ3VzdG9tRXZlbnQuc2VuZFJlZnJlc2hFdmVudCA9IGZ1bmN0aW9uKHRhZywgaHR0cEdldCwgbGFzdFBsYXlIaXRVcmwpIHtcbiAgICBpZiAobGFzdFBsYXlIaXRVcmwpIHtcbiAgICAgIHZhciByZWZyZXNoSGl0VXJsID0gbGFzdFBsYXlIaXRVcmw7XG4gICAgICByZWZyZXNoSGl0VXJsID0gcmVmcmVzaEhpdFVybC5yZXBsYWNlKC9hXFw9cGxheS9nLCAnYT1yZWZyZXNoJyk7XG4gICAgICByZWZyZXNoSGl0VXJsID0gcmVmcmVzaEhpdFVybC5yZXBsYWNlKC90c1xcPVswLTlcXC5dKy9nLCAndHM9JyArIG5ldyBEYXRlKCkuZ2V0VGltZSgpKTtcbiAgICAgIHJlZnJlc2hIaXRVcmwgPSByZWZyZXNoSGl0VXJsLnJlcGxhY2UoLyhwcmljaFxcPXxzMnJpY2hcXD0pLio/KCZ8JCkvZywgJycpO1xuXG4gICAgICBodHRwR2V0KHJlZnJlc2hIaXRVcmwsIGZ1bmN0aW9uKCkge1xuICAgICAgICB0YWcuZW1pdCgnVHJhY2tlcjpIaXQ6U2VudDpPaycsIHJlZnJlc2hIaXRVcmwpO1xuICAgICAgfS5iaW5kKHRhZykpO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gQ3VzdG9tRXZlbnQ7XG59KTtcbiIsImRlZmluZShmdW5jdGlvbihyZXF1aXJlKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICB2YXIgQVRJTGFiZWxLZXlzID0gcmVxdWlyZSgnLi9sYWJlbC1rZXlzJyk7XG4gIHZhciBMYWJlbENsZWFuc2VyID0gcmVxdWlyZSgnLi4vLi4vdXRpbC9jbGVhbnNpbmcvbGFiZWwtY2xlYW5zZXInKTtcbiAgdmFyIExpYnJhcnlJbmZvID0gcmVxdWlyZSgnLi4vLi4vdXRpbC9saWJyYXJ5LWluZm8nKTtcblxuICB2YXIgY3VzdG9tVmFyaWFibGVzID0ge1xuXG4gICAgQVBQX05BTUU6IHVuZGVmaW5lZCxcbiAgICBBUFBfQ0FURUdPUlk6IHVuZGVmaW5lZCxcblxuICAgIC8vIE5CIC0gVGhlc2UgY3VzdG9tIHZhcmlhYmxlIGtleXMgYXJlIGRlZmluZWQgYXMgc3RyaW5nIHZhbHVlcyBpbiBsYWJlbC1rZXkuanNcbiAgICBiYmNfY29udGVudF9pZDogMSxcbiAgICBiYmNfYXBwX3R5cGU6IDIsXG4gICAgYmJjX2FwcF9uYW1lOiAzLFxuICAgIGxhbmd1YWdlOiA0LFxuICAgIGJiY191cmw6IDUsXG4gICAgYmJjX3JlZmVycmVyX3VybDogNixcbiAgICBiYmNfY29udGVudF90eXBlOiA3LFxuICAgIGJiY19saWJyYXJ5X3ZlcnNpb246IDgsXG4gICAgcGFnZV90aXRsZTogOSxcblxuICAgIGN1c3RvbV92YXJfMTogMTEsXG4gICAgY3VzdG9tX3Zhcl8yOiAxMixcbiAgICBjdXN0b21fdmFyXzM6IDEzLFxuICAgIGN1c3RvbV92YXJfNDogMTQsXG4gICAgY3VzdG9tX3Zhcl81OiAxNSxcbiAgICBjdXN0b21fdmFyXzY6IDE2LFxuICAgIGN1c3RvbV92YXJfNzogMTcsXG4gICAgY3VzdG9tX3Zhcl84OiAxOCxcbiAgICBjdXN0b21fdmFyXzk6IDE5LFxuICAgIGN1c3RvbV92YXJfMTA6IDIwLFxuXG4gICAgLy8gQ3JlYXRlcyBhIGN1c3RvbSB2YXJpYWJsZXMgb2JqZWN0XG4gICAgY3JlYXRlOiBmdW5jdGlvbihhcHBOYW1lLCBhcHBUeXBlLCBjdXN0b21QYXJhbXMsIGV2ZW50TGFiZWxzLCBvcmJpdFZhcnMsIGRvY3VtZW50KSB7XG4gICAgICB2YXIgY3VzdG9tVmFycztcbiAgICAgIHRoaXMuQVBQX05BTUUgPSBhcHBOYW1lO1xuXG4gICAgICBpZiAoY3VzdG9tUGFyYW1zICYmIGN1c3RvbVBhcmFtc1tBVElMYWJlbEtleXMuQVBQX0NBVEVHT1JZXSkge1xuICAgICAgICB0aGlzLkFQUF9DQVRFR09SWSA9IGN1c3RvbVBhcmFtc1tBVElMYWJlbEtleXMuQVBQX0NBVEVHT1JZXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuQVBQX0NBVEVHT1JZID0gJyc7XG4gICAgICB9XG5cbiAgICAgIC8vIFRoZSBfc2V0Q3VzdG9tVmFyaWFibGUgbWV0aG9kIHdpbGwgbGF6aWx5IGluaXRpYWxpZSB0aGUgY3VzdG9tIHZhcmlhYmxlcyBvYmplY3QgYW5kIHJldHVybiB0aGVcbiAgICAgIC8vIGNvbXBsZXRlIHNldCBvZiBjdXN0b20gdmFyaWFibGVzIGFkZGVkIHNvIGZhclxuICAgICAgY3VzdG9tVmFycyA9IHRoaXMuX3NldEN1c3RvbVZhcmlhYmxlKGN1c3RvbVZhcnMsIEFUSUxhYmVsS2V5cy5BUFBfVFlQRSwgYXBwVHlwZSk7XG4gICAgICBjdXN0b21WYXJzID0gdGhpcy5fc2V0Q3VzdG9tVmFyaWFibGUoY3VzdG9tVmFycywgQVRJTGFiZWxLZXlzLkFQUF9OQU1FLCBhcHBOYW1lKTtcblxuICAgICAgY3VzdG9tVmFycyA9IHRoaXMuX3NldEN1c3RvbVZhcmlhYmxlKGN1c3RvbVZhcnMsIEFUSUxhYmVsS2V5cy5MSUJSQVJZX1ZFUlNJT04sIExpYnJhcnlJbmZvLmdldExpYnJhcnlOYW1lKCkgKyAnLScgKyBMaWJyYXJ5SW5mby5nZXRMaWJyYXJ5VmVyc2lvbigpKTtcblxuICAgICAgaWYgKGRvY3VtZW50KSB7XG4gICAgICAgIGN1c3RvbVZhcnMgPSB0aGlzLl9zZXREb2N1bWVudEN1c3RvbVZhcmlhYmxlcyhjdXN0b21WYXJzLCBkb2N1bWVudCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChvcmJpdFZhcnMpIHtcbiAgICAgICAgY3VzdG9tVmFycyA9IHRoaXMuX3NldE9yYml0Q3VzdG9tVmFyaWFibGVzKGN1c3RvbVZhcnMsIG9yYml0VmFycyk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX2FwcGx5TGFiZWxzKGN1c3RvbVZhcnMsIGN1c3RvbVBhcmFtcyk7XG4gICAgICB0aGlzLl9hcHBseUxhYmVscyhjdXN0b21WYXJzLCBldmVudExhYmVscyk7XG5cbiAgICAgIHJldHVybiBjdXN0b21WYXJzO1xuICAgIH0sXG5cbiAgICAvLyBJbml0aWFsaXNlcyBhIGN1c3RvbSB2YXJpYWJsZXMgb2JqZWN0IHJlYWR5IGZvciBjdXN0b20gdmFyaWFibGVzIHRvIGJlIGFkZGVkXG4gICAgX2luaXRpYWxpc2U6IGZ1bmN0aW9uKCkge1xuICAgICAgLy8gSW5pdGlhbGlzZSB0aGUgY3VzdG9tIHZhcmlhYmxlcyBvYmplY3RcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHNpdGU6IHt9XG4gICAgICB9O1xuICAgIH0sXG5cbiAgICAvLyBJdGVyYXRlcyB0aHJvdWdoIHRoZSBsYWJlbHMgYW5kIGFkZHMgcmVjb2duaXNlZCBjdXN0b20gdmFyaWFibGVzXG4gICAgX2FwcGx5TGFiZWxzOiBmdW5jdGlvbihjdXN0b21WYXJzLCBsYWJlbHMpIHtcbiAgICAgIGlmIChsYWJlbHMpIHtcbiAgICAgICAgdmFyIGFwcE5hbWUgPSB0aGlzLl9nZXRBcHBOYW1lKGxhYmVscyk7XG4gICAgICAgIGlmIChsYWJlbHNbQVRJTGFiZWxLZXlzLkFQUF9DQVRFR09SWV0pIHtcbiAgICAgICAgICBjdXN0b21WYXJzID0gdGhpcy5fc2V0Q3VzdG9tVmFyaWFibGUoY3VzdG9tVmFycywgQVRJTGFiZWxLZXlzLkFQUF9OQU1FLCBhcHBOYW1lKTtcbiAgICAgICAgICBkZWxldGUgbGFiZWxzW0FUSUxhYmVsS2V5cy5BUFBfQ0FURUdPUlldO1xuICAgICAgICB9XG5cbiAgICAgICAgT2JqZWN0LmtleXMobGFiZWxzKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuICAgICAgICAgIGlmICh0aGlzLl9pc0N1c3RvbVZhcmlhYmxlKGtleSkpIHtcbiAgICAgICAgICAgIGlmIChrZXkgPT09IEFUSUxhYmVsS2V5cy5BUFBfTkFNRSkge1xuICAgICAgICAgICAgICBsYWJlbHNba2V5XSA9IGFwcE5hbWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGN1c3RvbVZhcnMgPSB0aGlzLl9zZXRDdXN0b21WYXJpYWJsZShjdXN0b21WYXJzLCBrZXksIGxhYmVsc1trZXldKTtcblxuICAgICAgICAgICAgLy8gUmVtb3ZlIHRoZSBsYWJlbCBhcyBpdCBoYXMgYmVlbiBhZGRlZCB0byB0aGUgY3VzdG9tIHZhcmlhYmxlc1xuICAgICAgICAgICAgZGVsZXRlIGxhYmVsc1trZXldO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgdGhpcyk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIC8vIEZldGNoIHRoZSBhcHAgY2F0ZWdvcnkgYW5kIGFwcCBuYW1lIGZyb20gdGhlIHByb3ZpZGVkIGxhYmVscywgYXBwIGNhdGVnb3J5IHByZXBlbmRlZCB0byBhcHAgbmFtZVxuICAgIF9nZXRBcHBOYW1lOiBmdW5jdGlvbihsYWJlbHMpIHtcblxuICAgICAgdmFyIGFwcE5hbWUgPSAnJztcbiAgICAgIGlmIChsYWJlbHNbQVRJTGFiZWxLZXlzLkFQUF9DQVRFR09SWV0pIHtcbiAgICAgICAgYXBwTmFtZSA9IGxhYmVsc1tBVElMYWJlbEtleXMuQVBQX0NBVEVHT1JZXSArICctJztcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5BUFBfQ0FURUdPUlkpIHtcbiAgICAgICAgYXBwTmFtZSA9IHRoaXMuQVBQX0NBVEVHT1JZICsgJy0nO1xuICAgICAgfVxuXG4gICAgICBpZiAobGFiZWxzW0FUSUxhYmVsS2V5cy5BUFBfTkFNRV0pIHtcbiAgICAgICAgYXBwTmFtZSArPSBsYWJlbHNbQVRJTGFiZWxLZXlzLkFQUF9OQU1FXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFwcE5hbWUgKz0gdGhpcy5BUFBfTkFNRTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGFwcE5hbWU7XG4gICAgfSxcblxuICAgIC8vIFRlc3RzIHdoZXRoZXIgdGhlIGxhYmVsIHBhc3NlZCBpbiByZXByZXNlbnRzIHRoZSBrZXkgb2YgYSBjdXN0b20gdmFyaWFibGVcbiAgICBfaXNDdXN0b21WYXJpYWJsZTogZnVuY3Rpb24obGFiZWwpIHtcbiAgICAgIHJldHVybiAodGhpc1tsYWJlbF0gIT09IHVuZGVmaW5lZCAmJiB0aGlzLmhhc093blByb3BlcnR5KGxhYmVsKSAmJiB0eXBlb2YgdGhpc1tsYWJlbF0gIT09ICdmdW5jdGlvbicpO1xuICAgIH0sXG5cbiAgICAvLyBMYXppbHkgaW5pdGlhbGllcyB0aGUgY3VzdG9tIHZhcmlhYmxlcyBvYmplY3QgYW5kIHJldHVybnMgdGhlIGN1c3RvbSB2YXJpYWJsZXMgb2JqZWN0IGNvbnRhaW5pbmcgdGhlIGNvbXBsZXRlXG4gICAgLy8gc2V0IG9mIGN1c3RvbSB2YXJpYWJsZXMgYWRkZWQgc28gZmFyXG4gICAgX3NldEN1c3RvbVZhcmlhYmxlOiBmdW5jdGlvbihjdXN0b21WYXJzLCBrZXksIHZhbHVlKSB7XG4gICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgaWYgKCFjdXN0b21WYXJzKSB7XG4gICAgICAgICAgY3VzdG9tVmFycyA9IHRoaXMuX2luaXRpYWxpc2UoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBub25TZW5zaXRpdmUgPSBMYWJlbENsZWFuc2VyLnJlbW92ZVNlbnNpdGl2ZUluZm8odmFsdWUpO1xuICAgICAgICB2YXIgY2xlYW5zZWRWYWx1ZSA9IExhYmVsQ2xlYW5zZXIuY2xlYW5DdXN0b21WYXJpYWJsZShub25TZW5zaXRpdmUpO1xuXG4gICAgICAgIHZhciBzaXRlS2V5ID0gdGhpc1trZXldO1xuICAgICAgICBjdXN0b21WYXJzLnNpdGVbc2l0ZUtleV0gPSAnWycgKyBlbmNvZGVVUklDb21wb25lbnQoY2xlYW5zZWRWYWx1ZSkgKyAnXSc7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBjdXN0b21WYXJzO1xuICAgIH0sXG5cbiAgICAvLyBTZXRzIHRoZSBkb2N1bWVudC1iYXNlZCBwcm9wZXJ0aWVzIG9uIHRoZSBjdXN0b20gdmFyaWFibGVzIG9iamVjdFxuICAgIF9zZXREb2N1bWVudEN1c3RvbVZhcmlhYmxlczogZnVuY3Rpb24oY3VzdG9tVmFycywgZG9jdW1lbnQpIHtcbiAgICAgIGlmIChkb2N1bWVudCkge1xuICAgICAgICBjdXN0b21WYXJzID0gdGhpcy5fc2V0Q3VzdG9tVmFyaWFibGUoY3VzdG9tVmFycywgQVRJTGFiZWxLZXlzLlVSTCwgZG9jdW1lbnQuVVJMKTtcbiAgICAgICAgY3VzdG9tVmFycyA9IHRoaXMuX3NldEN1c3RvbVZhcmlhYmxlKGN1c3RvbVZhcnMsIEFUSUxhYmVsS2V5cy5SRUZFUlJFUl9VUkwsIGRvY3VtZW50LnJlZmVycmVyKTtcbiAgICAgICAgY3VzdG9tVmFycyA9IHRoaXMuX3NldEN1c3RvbVZhcmlhYmxlKGN1c3RvbVZhcnMsIEFUSUxhYmVsS2V5cy5QQUdFX1RJVExFLCBkb2N1bWVudC50aXRsZSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBjdXN0b21WYXJzO1xuICAgIH0sXG5cbiAgICAvLyBTZXRzIHRoZSBPcmJpdC1iYXNlZCBwcm9wZXJ0aWVzIG9uIHRoZSBjdXN0b20gdmFyaWFibGVzIG9iamVjdCAoaWYgYXZhaWxhYmxlKVxuICAgIF9zZXRPcmJpdEN1c3RvbVZhcmlhYmxlczogZnVuY3Rpb24oY3VzdG9tVmFycywgb3JiaXRWYXJzKSB7XG4gICAgICBpZiAob3JiaXRWYXJzKSB7XG4gICAgICAgIGN1c3RvbVZhcnMgPSB0aGlzLl9zZXRDdXN0b21WYXJpYWJsZShjdXN0b21WYXJzLCBBVElMYWJlbEtleXMuQ09OVEVOVF9JRCwgb3JiaXRWYXJzLmNvbnRlbnRJZCk7XG4gICAgICAgIGN1c3RvbVZhcnMgPSB0aGlzLl9zZXRDdXN0b21WYXJpYWJsZShjdXN0b21WYXJzLCBBVElMYWJlbEtleXMuQ09OVEVOVF9UWVBFLCBvcmJpdFZhcnMuY29udGVudFR5cGUpO1xuICAgICAgICBjdXN0b21WYXJzID0gdGhpcy5fc2V0Q3VzdG9tVmFyaWFibGUoY3VzdG9tVmFycywgQVRJTGFiZWxLZXlzLkxBTkdVQUdFLCBvcmJpdFZhcnMubGFuZ3VhZ2UpO1xuICAgICAgICBjdXN0b21WYXJzID0gdGhpcy5fc2V0UHJvZHVjdEN1c3RvbVZhcmlhYmxlcyhjdXN0b21WYXJzLCBvcmJpdFZhcnMuYWRkaXRpb25hbFByb3BlcnRpZXMpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gY3VzdG9tVmFycztcbiAgICB9LFxuXG4gICAgX3NldFByb2R1Y3RDdXN0b21WYXJpYWJsZXM6IGZ1bmN0aW9uKGN1c3RvbVZhcnMsIHByb2R1Y3RWYXJzKSB7XG4gICAgICBpZiAocHJvZHVjdFZhcnMpIHtcbiAgICAgICAgaWYgKHByb2R1Y3RWYXJzLmFwcF9jYXRlZ29yeSkge1xuICAgICAgICAgIGN1c3RvbVZhcnMgPSB0aGlzLl9zZXRDdXN0b21WYXJpYWJsZShjdXN0b21WYXJzLCBBVElMYWJlbEtleXMuQVBQX05BTUUsIHRoaXMuX2dldEFwcE5hbWUocHJvZHVjdFZhcnMpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwcm9kdWN0VmFycy5jb250ZW50X2xhbmd1YWdlKSB7XG4gICAgICAgICAgY3VzdG9tVmFycyA9IHRoaXMuX3NldEN1c3RvbVZhcmlhYmxlKGN1c3RvbVZhcnMsIEFUSUxhYmVsS2V5cy5MQU5HVUFHRSwgcHJvZHVjdFZhcnMuY29udGVudF9sYW5ndWFnZSk7XG4gICAgICAgIH1cblxuICAgICAgICBjdXN0b21WYXJzID0gdGhpcy5fc2V0Q3VzdG9tVmFyaWFibGUoY3VzdG9tVmFycywgQVRJTGFiZWxLZXlzLkNVU1RPTV9WQVJfMSwgcHJvZHVjdFZhcnMuY3VzdG9tX3Zhcl8xKTtcbiAgICAgICAgY3VzdG9tVmFycyA9IHRoaXMuX3NldEN1c3RvbVZhcmlhYmxlKGN1c3RvbVZhcnMsIEFUSUxhYmVsS2V5cy5DVVNUT01fVkFSXzIsIHByb2R1Y3RWYXJzLmN1c3RvbV92YXJfMik7XG4gICAgICAgIGN1c3RvbVZhcnMgPSB0aGlzLl9zZXRDdXN0b21WYXJpYWJsZShjdXN0b21WYXJzLCBBVElMYWJlbEtleXMuQ1VTVE9NX1ZBUl8zLCBwcm9kdWN0VmFycy5jdXN0b21fdmFyXzMpO1xuICAgICAgICBjdXN0b21WYXJzID0gdGhpcy5fc2V0Q3VzdG9tVmFyaWFibGUoY3VzdG9tVmFycywgQVRJTGFiZWxLZXlzLkNVU1RPTV9WQVJfNCwgcHJvZHVjdFZhcnMuY3VzdG9tX3Zhcl80KTtcbiAgICAgICAgY3VzdG9tVmFycyA9IHRoaXMuX3NldEN1c3RvbVZhcmlhYmxlKGN1c3RvbVZhcnMsIEFUSUxhYmVsS2V5cy5DVVNUT01fVkFSXzUsIHByb2R1Y3RWYXJzLmN1c3RvbV92YXJfNSk7XG4gICAgICAgIGN1c3RvbVZhcnMgPSB0aGlzLl9zZXRDdXN0b21WYXJpYWJsZShjdXN0b21WYXJzLCBBVElMYWJlbEtleXMuQ1VTVE9NX1ZBUl82LCBwcm9kdWN0VmFycy5jdXN0b21fdmFyXzYpO1xuICAgICAgICBjdXN0b21WYXJzID0gdGhpcy5fc2V0Q3VzdG9tVmFyaWFibGUoY3VzdG9tVmFycywgQVRJTGFiZWxLZXlzLkNVU1RPTV9WQVJfNywgcHJvZHVjdFZhcnMuY3VzdG9tX3Zhcl83KTtcbiAgICAgICAgY3VzdG9tVmFycyA9IHRoaXMuX3NldEN1c3RvbVZhcmlhYmxlKGN1c3RvbVZhcnMsIEFUSUxhYmVsS2V5cy5DVVNUT01fVkFSXzgsIHByb2R1Y3RWYXJzLmN1c3RvbV92YXJfOCk7XG4gICAgICAgIGN1c3RvbVZhcnMgPSB0aGlzLl9zZXRDdXN0b21WYXJpYWJsZShjdXN0b21WYXJzLCBBVElMYWJlbEtleXMuQ1VTVE9NX1ZBUl85LCBwcm9kdWN0VmFycy5jdXN0b21fdmFyXzkpO1xuICAgICAgICBjdXN0b21WYXJzID0gdGhpcy5fc2V0Q3VzdG9tVmFyaWFibGUoY3VzdG9tVmFycywgQVRJTGFiZWxLZXlzLkNVU1RPTV9WQVJfMTAsIHByb2R1Y3RWYXJzLmN1c3RvbV92YXJfMTApO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gY3VzdG9tVmFycztcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIGN1c3RvbVZhcmlhYmxlcztcbn0pO1xuIiwiZGVmaW5lKHtcbiAgQkJDX0NPVU5URVJfTkFNRTogJ25hbWUnLFxuICBFQ0hPX0VWRU5UX05BTUU6ICdlY2hvX2V2ZW50JyxcbiAgQVBQX1ZFUlNJT046ICdhcHZyJyxcbiAgSEFTSEVEX0lEOiAnYXQnLFxuXG4gIC8vIFBhZ2UgdmFyaWFibGVzXG4gIExFVkVMXzFfU0lURTogJ3NpdGUnLFxuICBMRVZFTF8yX1NJVEU6ICdsZXZlbDInLFxuICBTRUNUSU9OOiAnc2VjdGlvbicsXG4gIENIQVBURVJfMTogJ2NoYXB0ZXIxJyxcblxuICAvLyBDdXN0b20gc2l0ZSB2YXJpYWJsZXNcbiAgQ09OVEVOVF9JRDogJ2JiY19jb250ZW50X2lkJyxcbiAgQVBQX1RZUEU6ICdiYmNfYXBwX3R5cGUnLFxuICBBUFBfTkFNRTogJ2JiY19hcHBfbmFtZScsXG4gIEFQUF9DQVRFR09SWTogJ2FwcF9jYXRlZ29yeScsXG4gIExBTkdVQUdFOiAnbGFuZ3VhZ2UnLFxuICBVUkw6ICdiYmNfdXJsJyxcbiAgUkVGRVJSRVJfVVJMOiAnYmJjX3JlZmVycmVyX3VybCcsXG4gIENPTlRFTlRfVFlQRTogJ2JiY19jb250ZW50X3R5cGUnLFxuICBMSUJSQVJZX1ZFUlNJT046ICdiYmNfbGlicmFyeV92ZXJzaW9uJyxcbiAgUEFHRV9USVRMRTogJ3BhZ2VfdGl0bGUnLFxuICBDVVNUT01fVkFSXzE6ICdjdXN0b21fdmFyXzEnLFxuICBDVVNUT01fVkFSXzI6ICdjdXN0b21fdmFyXzInLFxuICBDVVNUT01fVkFSXzM6ICdjdXN0b21fdmFyXzMnLFxuICBDVVNUT01fVkFSXzQ6ICdjdXN0b21fdmFyXzQnLFxuICBDVVNUT01fVkFSXzU6ICdjdXN0b21fdmFyXzUnLFxuICBDVVNUT01fVkFSXzY6ICdjdXN0b21fdmFyXzYnLFxuICBDVVNUT01fVkFSXzc6ICdjdXN0b21fdmFyXzcnLFxuICBDVVNUT01fVkFSXzg6ICdjdXN0b21fdmFyXzgnLFxuICBDVVNUT01fVkFSXzk6ICdjdXN0b21fdmFyXzknLFxuICBDVVNUT01fVkFSXzEwOiAnY3VzdG9tX3Zhcl8xMCcsXG5cbiAgTUVESUFfUExBWUVSOiAnYmJjX21lZGlhX3BsYXllcicsXG5cbiAgTE9HR0VEX0lOOiAnYmJjX2lkZW50aXR5JyxcbiAgQkJDX0hJRDogJ2JiY19oaWQnLFxuXG4gIE1FRElBX0JSQU5EOiAnYnJhbmQnLFxuICBNRURJQV9TRVJJRVM6ICdzZXJpZXMnLFxuXG4gIC8vIFNldCB0byBkZXRlcm1pbmUgaWYgdGhlIHVzZXIgYWN0aW9uIGlzIGFuIGludGVyYWN0aW9uIG9yIGEgYmFja2dyb3VuZCBldmVudFxuICBJU19CQUNLR1JPVU5EOiAnaXNfYmFja2dyb3VuZCcsXG5cbiAgLy8gU2V0IHRoZSBhZGRpdGlvbmFsIHNvdXJjZSBkZXRhaWxzIGZvciB0aGUgZXZlbnRcbiAgU09VUkNFOiAnc291cmNlJyxcblxuICAvLyBTZXQgdGhlIGNvbnRhaW5lciBhcyB0aGUgZmlyc3QgbGV2ZWwgb2YgdGhlIGRhdGEgaGllcmFyY2h5IGZvciByZXBvcnRpbmdcbiAgQ09OVEFJTkVSOiAnY29udGFpbmVyJyxcblxuICAvLyBTZXQgbWV0YWRhdGEgdG8gYWRkIGFkZGl0aW9uYWwgZGV0YWlsIHRvIGV2ZW50cyBmb3IgcmVwb3J0aW5nXG4gIE1FVEFEQVRBOiAnbWV0YWRhdGEnLFxuXG4gIC8vIFNldCBwZXJzb25hbGlzYXRpb24gZm9yIHJlcG9ydGluZ1xuICBQRVJTT05BTElTQVRJT046ICdwZXJzb25hbGlzYXRpb24nLFxuXG4gIC8vIFNldCByZXN1bHQgb2Ygd2hhdCB5b3Ugd291bGQgbGlrZSB0byB0cmFja1xuICBSRVNVTFQ6ICdyZXN1bHQnXG59KTtcbiIsImRlZmluZShmdW5jdGlvbigpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGZ1bmN0aW9uIE1lZGlhRXZlbnQoKSB7fVxuXG4gIE1lZGlhRXZlbnQuc2VuZEV2ZW50ID0gZnVuY3Rpb24odGFnLCBjb21tb25NZWRpYVBhcmFtcywgYWN0aW9uLCBhZGRpdGlvbmFsRXZlbnRBcmdzKSB7XG4gICAgaWYgKGNvbW1vbk1lZGlhUGFyYW1zKSB7XG4gICAgICB2YXIgZXZlbnQgPSB7XG4gICAgICAgIGFjdGlvbjogYWN0aW9uLFxuICAgICAgICBwbGF5ZXJJZDogY29tbW9uTWVkaWFQYXJhbXMucGxheWVySWQsXG4gICAgICAgIG1lZGlhTGFiZWw6IGNvbW1vbk1lZGlhUGFyYW1zLm1lZGlhTGFiZWwsXG4gICAgICAgIG1lZGlhVGhlbWUxOiBjb21tb25NZWRpYVBhcmFtcy5tZWRpYVRoZW1lMSxcbiAgICAgICAgbWVkaWFUaGVtZTI6IGNvbW1vbk1lZGlhUGFyYW1zLm1lZGlhVGhlbWUyLFxuICAgICAgICBtZWRpYVRoZW1lMzogY29tbW9uTWVkaWFQYXJhbXMubWVkaWFUaGVtZTNcbiAgICAgIH07XG5cbiAgICAgIC8vIE1lcmdlIGluIGFueSBhZGRpdGlvbmFsIGV2ZW50IGFyZ3VtZW50c1xuICAgICAgZm9yICh2YXIga2V5IGluIGFkZGl0aW9uYWxFdmVudEFyZ3MpIHtcbiAgICAgICAgaWYgKGFkZGl0aW9uYWxFdmVudEFyZ3MuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgIGV2ZW50W2tleV0gPSBhZGRpdGlvbmFsRXZlbnRBcmdzW2tleV07XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGFnLnJpY2hNZWRpYS5zZW5kKGV2ZW50KTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIE1lZGlhRXZlbnQ7XG59KTtcbiIsImRlZmluZShmdW5jdGlvbigpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIHZhciBMaWJyYXJ5SW5mbyA9IHJlcXVpcmUoJy4uLy4uL3V0aWwvbGlicmFyeS1pbmZvJyk7XG5cbiAgdmFyIFNFUEFSQVRPUl9DSEFSID0gJ34nO1xuXG4gIHZhciBrZXlzID0ge1xuICAgIFRIRU1FX09ORToge1xuICAgICAgQlJBTkQ6ICdicmFuZCcsXG4gICAgICBTRVJJRVM6ICdzZXJpZXMnLFxuICAgICAgRVBJU09ERTogJ2VwaXNvZGUnLFxuICAgICAgQ0xJUDogJ2NsaXAnLFxuICAgICAgTkFNRTogJ25hbWUnLFxuICAgICAgVFlQRTogJ3R5cGUnLFxuICAgICAgUExJU1Q6ICdwTGlzdCdcbiAgICB9LFxuICAgIFRIRU1FX1RXTzoge1xuICAgICAgUkVUUklFVkFMX1RZUEU6ICdyZXRUeXBlJyxcbiAgICAgIElOSVRBVElPTl9UWVBFOiAnaW5pdCcsXG4gICAgICBBRFNfRU5BQkxFRDogJ2FkRW5hJ1xuICAgIH0sXG4gICAgVEhFTUVfVEhSRUU6IHtcbiAgICAgIFBMQVlFUl9OQU1FOiAnbXBOJyxcbiAgICAgIFBMQVlFUl9WRVJTSU9OOiAnbXBWJyxcbiAgICAgIFRSQU5TUE9SVF9NT0RFOiAndE1vZCcsXG4gICAgICBMSUJSQVJZX05BTUU6ICdtbE4nLFxuICAgICAgTElCUkFSWV9WRVJTSU9OOiAnbWxWJ1xuICAgIH1cbiAgfTtcblxuICBmdW5jdGlvbiBudWxsVG9TdHIodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgPyB2YWx1ZSA6ICcnO1xuICB9XG5cbiAgdmFyIG1lZGlhVGhlbWVzID0ge1xuXG4gICAgYnVpbGRUaGVtZTogZnVuY3Rpb24oa2V5LCB2YWx1ZSwgb21pdFNlcGFyYXRvcikge1xuICAgICAgcmV0dXJuIGtleSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudChudWxsVG9TdHIodmFsdWUpKSArIChvbWl0U2VwYXJhdG9yID8gJycgOiBTRVBBUkFUT1JfQ0hBUik7XG4gICAgfSxcblxuICAgIGNvbnN0cnVjdFRoZW1lT25lOiBmdW5jdGlvbihtZWRpYSkge1xuICAgICAgdmFyIHRoZW1lT25lID0gJyc7XG4gICAgICBpZiAobWVkaWEpIHtcbiAgICAgICAgdGhlbWVPbmUgPSB0aGlzLmJ1aWxkVGhlbWUoa2V5cy5USEVNRV9PTkUuQlJBTkQsIG1lZGlhLmdldEJyYW5kSWQoKSk7XG4gICAgICAgIHRoZW1lT25lICs9IHRoaXMuYnVpbGRUaGVtZShrZXlzLlRIRU1FX09ORS5TRVJJRVMsIG1lZGlhLmdldFNlcmllc0lkKCkpO1xuICAgICAgICB0aGVtZU9uZSArPSB0aGlzLmJ1aWxkVGhlbWUoa2V5cy5USEVNRV9PTkUuRVBJU09ERSwgbWVkaWEuZ2V0RXBpc29kZUlkKCkpO1xuICAgICAgICB0aGVtZU9uZSArPSB0aGlzLmJ1aWxkVGhlbWUoa2V5cy5USEVNRV9PTkUuQ0xJUCwgbWVkaWEuZ2V0Q2xpcElkKCkpO1xuICAgICAgICB0aGVtZU9uZSArPSB0aGlzLmJ1aWxkVGhlbWUoa2V5cy5USEVNRV9PTkUuTkFNRSwgbWVkaWEuZ2V0TmFtZSgpKTtcbiAgICAgICAgdGhlbWVPbmUgKz0gdGhpcy5idWlsZFRoZW1lKGtleXMuVEhFTUVfT05FLlRZUEUsIG1lZGlhLmdldFR5cGUoKSk7XG4gICAgICAgIGlmIChtZWRpYS5pc0xpdmUoKSkge1xuICAgICAgICAgIHRoZW1lT25lICs9IHRoaXMuYnVpbGRUaGVtZShrZXlzLlRIRU1FX09ORS5QTElTVCwgbWVkaWEuZ2V0U2VydmljZUlkKCksIHRydWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoZW1lT25lICs9IHRoaXMuYnVpbGRUaGVtZShrZXlzLlRIRU1FX09ORS5QTElTVCwgbWVkaWEuZ2V0UGxheWxpc3QoKSwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoZW1lT25lO1xuICAgIH0sXG5cbiAgICBjb25zdHJ1Y3RUaGVtZVR3bzogZnVuY3Rpb24obWVkaWEpIHtcbiAgICAgIHZhciB0aGVtZVR3byA9ICcnO1xuICAgICAgaWYgKG1lZGlhKSB7XG4gICAgICAgIHRoZW1lVHdvID0gdGhpcy5idWlsZFRoZW1lKGtleXMuVEhFTUVfVFdPLlJFVFJJRVZBTF9UWVBFLCBtZWRpYS5nZXRSZXRyaWV2YWxUeXBlKCkpO1xuICAgICAgICB0aGVtZVR3byArPSB0aGlzLmJ1aWxkVGhlbWUoa2V5cy5USEVNRV9UV08uSU5JVEFUSU9OX1RZUEUsIG1lZGlhLmdldEluaXRpYXRpb25UeXBlKCkpO1xuICAgICAgICB0aGVtZVR3byArPSB0aGlzLmJ1aWxkVGhlbWUoa2V5cy5USEVNRV9UV08uQURTX0VOQUJMRUQsIG1lZGlhLmlzQWRzRW5hYmxlZCgpID8gJzEnIDogJzAnLCB0cnVlKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoZW1lVHdvO1xuICAgIH0sXG5cbiAgICBjb25zdHJ1Y3RUaGVtZVRocmVlOiBmdW5jdGlvbihtZWRpYSkge1xuICAgICAgdmFyIHRoZW1lVGhyZWUgPSAnJztcbiAgICAgIGlmIChtZWRpYSkge1xuICAgICAgICB0aGVtZVRocmVlID0gdGhpcy5idWlsZFRoZW1lKGtleXMuVEhFTUVfVEhSRUUuUExBWUVSX05BTUUsIG1lZGlhLmdldE1lZGlhUGxheWVyTmFtZSgpKTtcbiAgICAgICAgdGhlbWVUaHJlZSArPSB0aGlzLmJ1aWxkVGhlbWUoa2V5cy5USEVNRV9USFJFRS5QTEFZRVJfVkVSU0lPTiwgbWVkaWEuZ2V0TWVkaWFQbGF5ZXJWZXJzaW9uKCkpO1xuICAgICAgICB0aGVtZVRocmVlICs9IHRoaXMuYnVpbGRUaGVtZShrZXlzLlRIRU1FX1RIUkVFLlRSQU5TUE9SVF9NT0RFLCBtZWRpYS5nZXRUcmFuc3BvcnRNb2RlKCkpO1xuICAgICAgICB0aGVtZVRocmVlICs9IHRoaXMuYnVpbGRUaGVtZShrZXlzLlRIRU1FX1RIUkVFLkxJQlJBUllfTkFNRSwgTGlicmFyeUluZm8uZ2V0TGlicmFyeU5hbWUoKSk7XG4gICAgICAgIHRoZW1lVGhyZWUgKz0gdGhpcy5idWlsZFRoZW1lKGtleXMuVEhFTUVfVEhSRUUuTElCUkFSWV9WRVJTSU9OLCBMaWJyYXJ5SW5mby5nZXRMaWJyYXJ5VmVyc2lvbigpLCB0cnVlKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoZW1lVGhyZWU7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBtZWRpYVRoZW1lcztcbn0pO1xuIiwiZGVmaW5lKGZ1bmN0aW9uKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgdmFyIFByb21pc2UgPSByZXF1aXJlKCdlczYtcHJvbWlzZScpLlByb21pc2U7XG5cbiAgZnVuY3Rpb24gT3JiaXRWYXJpYWJsZXMoKSB7fVxuXG4gIE9yYml0VmFyaWFibGVzLmdldCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh3aW5kb3cgJiYgd2luZG93LmJiY3BhZ2UpIHtcblxuICAgICAgLy8gQWxsb3dzIHRoZSBwYXNzZWQgaW4gbWV0aG9kIHRvIGJlIGNhbGxlZCwgZXZlbiB0aG91Z2ggaXQgbWlnaHQgbm90IGV4aXN0IG9uIHRoZSB3aW5kb3cuYmJjcGFnZSBvYmplY3RcbiAgICAgIC8vIENhbGwgdGhlIG1ldGhvZCBpZiBpdCBleGlzdHMsIG90aGVyd2lzZSByZXR1cm4gYSByZXNvbHZlZCBwcm9taXNlIGluc3RlYWRcbiAgICAgIHZhciB3cmFwTWV0aG9kID0gZnVuY3Rpb24obWV0aG9kTmFtZSkge1xuICAgICAgICByZXR1cm4gd2luZG93LmJiY3BhZ2VbbWV0aG9kTmFtZV0gJiYgdHlwZW9mIHdpbmRvdy5iYmNwYWdlW21ldGhvZE5hbWVdID09PSAnZnVuY3Rpb24nID8gd2luZG93LmJiY3BhZ2VbbWV0aG9kTmFtZV0oKSA6IFByb21pc2UucmVzb2x2ZShudWxsKTtcbiAgICAgIH07XG5cbiAgICAgIC8vIENhbGwgYWxsIG9mIHRoZXNlIGFzeW5jIG1ldGhvZHMgaW4gcGFyYWxsZWxcbiAgICAgIHJldHVybiBQcm9taXNlLmFsbChbXG4gICAgICAgICdnZXREZXN0aW5hdGlvbicsXG4gICAgICAgICdnZXRQcm9kdWNlcicsXG4gICAgICAgICdnZXRTZWN0aW9uJyxcbiAgICAgICAgJ2dldENvbnRlbnRJZCcsXG4gICAgICAgICdnZXRDb250ZW50VHlwZScsXG4gICAgICAgICdnZXRMYW5ndWFnZScsXG4gICAgICAgICdnZXRBZGRpdGlvbmFsUHJvcGVydGllcycsXG4gICAgICAgICdnZXROYW1lJ1xuICAgICAgXVxuXG4gICAgICAgIC8vIEhhbmRsZSB0aGUgZmFjdCB0aGF0IHRoZSBhc3luYyBtYXRob2RzIG1heSBub3QgZXhpc3Qgb24gdGhlIHdpbmRvdy5iYmNwYWdlIG9iamVjdFxuICAgICAgICAubWFwKGZ1bmN0aW9uKG1ldGhvZE5hbWUpIHtcbiAgICAgICAgICByZXR1cm4gd3JhcE1ldGhvZChtZXRob2ROYW1lKTtcbiAgICAgICAgfSkpXG5cbiAgICAgICAgLy8gQnVpbGQgdGhlIHJldHVybmVkIHJlc3VsdCBvYmplY3RcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKG9yYml0VmFycykge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBkZXN0aW5hdGlvbjogb3JiaXRWYXJzWzBdLFxuICAgICAgICAgICAgcHJvZHVjZXI6IG9yYml0VmFyc1sxXSxcbiAgICAgICAgICAgIHNlY3Rpb246IG9yYml0VmFyc1syXSxcbiAgICAgICAgICAgIGNvbnRlbnRJZDogb3JiaXRWYXJzWzNdLFxuICAgICAgICAgICAgY29udGVudFR5cGU6IG9yYml0VmFyc1s0XSxcbiAgICAgICAgICAgIGxhbmd1YWdlOiBvcmJpdFZhcnNbNV0sXG4gICAgICAgICAgICBhZGRpdGlvbmFsUHJvcGVydGllczogb3JiaXRWYXJzWzZdLFxuICAgICAgICAgICAgcGFnZU5hbWU6IG9yYml0VmFyc1s3XVxuICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHVuZGVmaW5lZCk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBPcmJpdFZhcmlhYmxlcztcbn0pO1xuIiwiZGVmaW5lKGZ1bmN0aW9uKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgdmFyIEFUSUxhYmVsS2V5cyA9IHJlcXVpcmUoJy4vbGFiZWwta2V5cycpO1xuICB2YXIgTGFiZWxDbGVhbnNlciA9IHJlcXVpcmUoJy4uLy4uL3V0aWwvY2xlYW5zaW5nL2xhYmVsLWNsZWFuc2VyJyk7XG5cbiAgdmFyIFNFUEFSQVRPUl9DSEFSID0gJ34nO1xuXG4gIHZhciBFdmVudERlZmF1bHRzID0ge1xuICAgIEFDVElPTl9OQU1FOiAndW5rbm93bicsXG4gICAgQ0FNUEFJR05fSUQ6ICdQYWdlJyxcbiAgICBWQVJJQU5UOiAnJyxcbiAgICBGT1JNQVQ6ICcnLFxuICAgIEdFTkVSQUxfUExBQ0VNRU5UOiAndW5rbm93bicsXG4gICAgREVUQUlMRURfUExBQ0VNRU5UOiAnJyxcbiAgICBBRFZFUlRJU0VSX0lEOiAnJyxcbiAgICBVUkw6ICd1bmtub3duJ1xuICB9O1xuXG4gIHZhciBFdmVudFR5cGUgPSB7XG4gICAgQ0xJQ0s6ICdjbGljaycsXG4gICAgSU1QUkVTU0lPTjogJ2ltcHJlc3Npb24nXG4gIH07XG5cbiAgZnVuY3Rpb24gVXNlckFjdGlvbkV2ZW50KCkge31cblxuICBVc2VyQWN0aW9uRXZlbnQuc2VuZENsaWNrRXZlbnQgPSBmdW5jdGlvbih0YWcsIGV2ZW50VmFsdWVzKSB7XG4gICAgdGhpcy5fc2VuZEV2ZW50KHRhZywgZXZlbnRWYWx1ZXMsIEV2ZW50VHlwZS5DTElDSyk7XG4gIH07XG5cbiAgVXNlckFjdGlvbkV2ZW50LnNlbmRJbXByZXNzaW9uRXZlbnQgPSBmdW5jdGlvbih0YWcsIGV2ZW50VmFsdWVzKSB7XG4gICAgdGhpcy5fc2VuZEV2ZW50KHRhZywgZXZlbnRWYWx1ZXMsIEV2ZW50VHlwZS5JTVBSRVNTSU9OKTtcbiAgfTtcblxuICBVc2VyQWN0aW9uRXZlbnQuX3NlbmRFdmVudCA9IGZ1bmN0aW9uKHRhZywgZXZlbnRWYWx1ZXMsIGV2ZW50VHlwZSkge1xuICAgIGlmICghZXZlbnRWYWx1ZXMpIHtcbiAgICAgIGV2ZW50VmFsdWVzID0ge1xuICAgICAgICBjdXN0b21PYmplY3Q6IHt9XG4gICAgICB9O1xuICAgIH1cblxuICAgIGlmICghZXZlbnRWYWx1ZXMuY3VzdG9tT2JqZWN0KSB7XG4gICAgICBldmVudFZhbHVlcy5jdXN0b21PYmplY3QgPSB7fTtcbiAgICB9XG5cbiAgICB2YXIgZXZlbnRQYXlsb2FkID0ge1xuICAgICAgY3JlYXRpb246ICAgICAgICAgICB0aGlzLl9mb3JtYXRFdmVudFZhbHVlKFVzZXJBY3Rpb25FdmVudC5fYnVpbGRDcmVhdGlvbihldmVudFZhbHVlcykpLFxuICAgICAgY2FtcGFpZ25JZDogICAgICAgICB0aGlzLl9mb3JtYXRFdmVudFZhbHVlKGV2ZW50VmFsdWVzLmN1c3RvbU9iamVjdFtBVElMYWJlbEtleXMuQ09OVEFJTkVSXSB8fCBFdmVudERlZmF1bHRzLkNBTVBBSUdOX0lEKSxcbiAgICAgIHZhcmlhbnQ6ICAgICAgICAgICAgdGhpcy5fZm9ybWF0RXZlbnRWYWx1ZShldmVudFZhbHVlcy5jdXN0b21PYmplY3RbQVRJTGFiZWxLZXlzLlBFUlNPTkFMSVNBVElPTl0gfHwgRXZlbnREZWZhdWx0cy5WQVJJQU5UKSxcbiAgICAgIGZvcm1hdDogICAgICAgICAgICAgdGhpcy5fZm9ybWF0RXZlbnRWYWx1ZShldmVudFZhbHVlcy5jdXN0b21PYmplY3RbQVRJTGFiZWxLZXlzLk1FVEFEQVRBXSB8fCBFdmVudERlZmF1bHRzLkZPUk1BVCksXG4gICAgICBnZW5lcmFsUGxhY2VtZW50OiAgIHRoaXMuX2Zvcm1hdEV2ZW50VmFsdWUoZXZlbnRWYWx1ZXNbQVRJTGFiZWxLZXlzLkJCQ19DT1VOVEVSX05BTUVdIHx8IEV2ZW50RGVmYXVsdHMuR0VORVJBTF9QTEFDRU1FTlQpLFxuICAgICAgZGV0YWlsZWRQbGFjZW1lbnQ6ICB0aGlzLl9mb3JtYXRFdmVudFZhbHVlKGV2ZW50VmFsdWVzLnVzZXIgfHwgRXZlbnREZWZhdWx0cy5ERVRBSUxFRF9QTEFDRU1FTlQpLFxuICAgICAgYWR2ZXJ0aXNlcklkOiAgICAgICB0aGlzLl9mb3JtYXRFdmVudFZhbHVlKGV2ZW50VmFsdWVzLmN1c3RvbU9iamVjdFtBVElMYWJlbEtleXMuU09VUkNFXSB8fCBFdmVudERlZmF1bHRzLkFEVkVSVElTRVJfSUQpLFxuICAgICAgdXJsOiAgICAgICAgICAgICAgICB0aGlzLl9mb3JtYXRFdmVudFZhbHVlKGV2ZW50VmFsdWVzLmN1c3RvbU9iamVjdFtBVElMYWJlbEtleXMuUkVTVUxUXSB8fCBFdmVudERlZmF1bHRzLlVSTClcbiAgICB9O1xuXG4gICAgdmFyIGV2ZW50ID0ge307XG4gICAgaWYgKGV2ZW50VHlwZSA9PT0gRXZlbnRUeXBlLkNMSUNLKSB7XG4gICAgICBldmVudC5jbGljayA9IGV2ZW50UGF5bG9hZDtcbiAgICB9IGVsc2Uge1xuICAgICAgZXZlbnQuaW1wcmVzc2lvbiA9IGV2ZW50UGF5bG9hZDtcbiAgICB9XG5cbiAgICBpZiAodGFnKSB7XG4gICAgICB0YWcucHVibGlzaGVyLnNlbmQoZXZlbnQpO1xuICAgIH1cbiAgfTtcblxuICBVc2VyQWN0aW9uRXZlbnQuX2J1aWxkQ3JlYXRpb24gPSBmdW5jdGlvbihldmVudFZhbHVlcykge1xuICAgIHZhciBjcmVhdGlvbiA9IChldmVudFZhbHVlcyAmJiBldmVudFZhbHVlcy5hY3Rpb25OYW1lKSB8fCBFdmVudERlZmF1bHRzLkFDVElPTl9OQU1FO1xuICAgIGlmIChldmVudFZhbHVlcyAmJiBldmVudFZhbHVlcy5hY3Rpb25UeXBlKSB7XG4gICAgICBjcmVhdGlvbiArPSAoU0VQQVJBVE9SX0NIQVIgKyBldmVudFZhbHVlcy5hY3Rpb25UeXBlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gY3JlYXRpb247XG4gIH07XG5cbiAgVXNlckFjdGlvbkV2ZW50Ll9mb3JtYXRFdmVudFZhbHVlID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICByZXR1cm4gJ1snICsgTGFiZWxDbGVhbnNlci5jbGVhbkN1c3RvbVZhcmlhYmxlKHZhbHVlKSArICddJztcbiAgfTtcblxuICByZXR1cm4gVXNlckFjdGlvbkV2ZW50O1xufSk7XG4iLCIvKipcbiAqIFRoaXMgbW9kdWxlIGlzIG1lYW50IGFzIGEgcmVwbGFjZW1lbnQgZm9yIGNvbVNjb3JlJ3MgVURNIHRhZ1xuICogSXQgZXh0ZW5kcyB0aGUgdWRtIGJ5OlxuICogIC0gYWRkaW5nIHRoZSBvcHRpb24gdG8gZGVmaW5lIHRoZSBodHRwR2V0IG1ldGhvZFxuICogIC0gbWFuYWdpbmcgcGVyc2lzdGFudCBsYWJlbHNcbiAqL1xuXG4vKipcbiAqIFRPRE9cbiAqICogVGVzdHNcbiAqICogXCJjb21TY29yZT1cIiBjb29raWVcbiAqL1xuXG5kZWZpbmUoWycuL2xhYmVsLWtleXMnXSwgZnVuY3Rpb24oQ1NMYWJlbEtleXMpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGZ1bmN0aW9uIEFwcFRhZyhjdXN0b21IdHRwR2V0LCBpc0FwcCwgaXNTY29yZWNhcmREb21haW4pIHtcbiAgICAvLyBpbml0IHBlcnNpc3RlbnQgbGFiZWxzXG4gICAgdGhpcy5fcGVyc2lzdGFudExhYmVscyA9IHt9O1xuICAgIHRoaXMuX3VybFBhcmFtcyA9ICcnO1xuICAgIHRoaXMuX2N1dCA9ICcnO1xuICAgIHRoaXMuX2h0dHBHZXQgPSBjdXN0b21IdHRwR2V0O1xuICAgIHRoaXMuX2V2ZW50Q291bnQgPSAwO1xuICAgIHRoaXMuX2lzQXBwID0gaXNBcHA7XG4gICAgdGhpcy5faXNTY29yZWNhcmREb21haW4gPSAoaXNTY29yZWNhcmREb21haW4gPT09IHRydWUpO1xuICAgIHRoaXMuX2hhc1N0YXJ0ZWQgPSBmYWxzZTtcbiAgfVxuXG4gIEFwcFRhZy5JU19FQ0hPX0FQUF9UQUcgPSB0cnVlO1xuICBBcHBUYWcuVVJMX0xJTUlUID0gMjA0ODtcblxuICBBcHBUYWcucHJvdG90eXBlLnNldFBpeGVsVVJMID0gZnVuY3Rpb24ocGl4ZWxVUkwpIHtcbiAgICB0aGlzLl91cmwgPSB0aGlzLl9tYWtlQmFzZVVybChwaXhlbFVSTCk7XG4gIH07XG5cbiAgQXBwVGFnLnByb3RvdHlwZS5zZXRDdXN0b21lckMyID0gZnVuY3Rpb24oY3VzdG9tZXJDMikge1xuICAgIHRoaXMuc2V0TGFiZWwoQ1NMYWJlbEtleXMuQ09NU0NPUkVfQ1VTVE9NRVIsIGN1c3RvbWVyQzIpO1xuICB9O1xuXG4gIEFwcFRhZy5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoIXRoaXMuX2hhc1N0YXJ0ZWQpIHtcbiAgICAgIHRoaXMuX2hhc1N0YXJ0ZWQgPSB0cnVlO1xuICAgIH1cbiAgfTtcblxuICAvKiogUHVibGljICoqL1xuXG4gIC8qKlxuICAgKiBTZXQgc2luZ2xlIHBlcnNpc3RhbnQgbGFiZWxcbiAgICovXG4gIEFwcFRhZy5wcm90b3R5cGUuc2V0TGFiZWwgPSBmdW5jdGlvbihrZXksIHZhbCkge1xuICAgIGlmICh2YWwgPT09IG51bGwpIHtcbiAgICAgIHRoaXMucmVtb3ZlTGFiZWwoa2V5KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fcGVyc2lzdGFudExhYmVsc1trZXldID0gdmFsO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogRGVsZXRlIHBlcnNpc3RhbnQgTGFiZWxzXG4gICAqL1xuICBBcHBUYWcucHJvdG90eXBlLnJlbW92ZUxhYmVscyA9IGZ1bmN0aW9uKGtleXMpIHtcbiAgICBmb3IgKHZhciBpIGluIGtleXMpIHtcbiAgICAgIGlmICh0eXBlb2YgdGhpcy5fcGVyc2lzdGFudExhYmVsc1trZXlzW2ldXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgZGVsZXRlIHRoaXMuX3BlcnNpc3RhbnRMYWJlbHNba2V5c1tpXV07XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBEZWxldGUgc2luZ2xlIHBlcnNpc3RhbnQgbGFiZWxcbiAgICovXG4gIEFwcFRhZy5wcm90b3R5cGUucmVtb3ZlTGFiZWwgPSBmdW5jdGlvbihsYWJlbCkge1xuICAgIGlmICh0eXBlb2YgdGhpcy5fcGVyc2lzdGFudExhYmVsc1tsYWJlbF0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBkZWxldGUgdGhpcy5fcGVyc2lzdGFudExhYmVsc1tsYWJlbF07XG4gICAgfVxuICB9O1xuXG4gIEFwcFRhZy5wcm90b3R5cGUudmlldyA9IGZ1bmN0aW9uKGV2ZW50TGFiZWxzKSB7XG4gICAgdGhpcy5zZW5kKCd2aWV3JywgZXZlbnRMYWJlbHMpO1xuICB9O1xuXG4gIEFwcFRhZy5wcm90b3R5cGUuaGlkZGVuID0gZnVuY3Rpb24oZXZlbnRMYWJlbHMpIHtcbiAgICB0aGlzLnNlbmQoJ2hpZGRlbicsIGV2ZW50TGFiZWxzKTtcbiAgfTtcblxuICAvKipcbiAgICogU2VuZCBhbiBldmVudCxcbiAgICogdHlwZSBzaG91bGQgYmUgXCJoaWRkZW5cIiBvciBcInZpZXdcIlxuICAgKi9cbiAgQXBwVGFnLnByb3RvdHlwZS5zZW5kID0gZnVuY3Rpb24odHlwZSwgZXZlbnRMYWJlbHMsIGNhbGxiYWNrKSB7XG4gICAgdmFyIHBMYWJlbHMgPSB0aGlzLl9wZXJzaXN0YW50TGFiZWxzO1xuICAgIHZhciBhbGxMYWJlbHMgPSB7fTtcbiAgICB2YXIgZmluYWxVcmw7XG4gICAgdmFyIGs7XG5cbiAgICBpZiAoIXRoaXMuX2hhc1N0YXJ0ZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9ldmVudENvdW50Kys7XG5cbiAgICBmb3IgKGsgaW4gcExhYmVscykge1xuICAgICAgYWxsTGFiZWxzW2tdID0gcExhYmVsc1trXTtcbiAgICB9XG5cbiAgICBmb3IgKGsgaW4gZXZlbnRMYWJlbHMpIHtcbiAgICAgIGFsbExhYmVsc1trXSA9IGV2ZW50TGFiZWxzW2tdO1xuICAgIH1cblxuICAgIC8qIGpzaGludCBpZ25vcmU6c3RhcnQgKi9cbiAgICBhbGxMYWJlbHMubnNfdHlwZSA9IHR5cGU7XG4gICAgaWYgKHRoaXMuX2lzQXBwKSB7IC8vIEVDSE8tNTZcbiAgICAgIGFsbExhYmVscy5uc19hcF9ldiA9IHR5cGU7XG4gICAgICBhbGxMYWJlbHMubnNfYXBfZWMgPSB0aGlzLl9ldmVudENvdW50O1xuICAgIH1cbiAgICAvKiBqc2hpbnQgaWdub3JlOmVuZCAqL1xuXG4gICAgLy8gRUNITy01NlxuICAgIGFsbExhYmVsc1t0aGlzLl9pc0FwcCA/ICduc190cycgOiAnbnNfX3QnXSA9ICgrbmV3IERhdGUoKSk7XG5cbiAgICBmaW5hbFVybCA9IHRoaXMuX2NyZWF0ZVVybChhbGxMYWJlbHMpO1xuXG4gICAgdGhpcy5faHR0cEdldChmaW5hbFVybCwgY2FsbGJhY2spO1xuICB9O1xuXG4gIC8qKiBQcml2YXRlICoqL1xuXG4gIC8qKlxuICAgKiBUdXJuIGt2IHBhaXJzIChpbiBhbiBvYmplY3QpIGludG8gYSB1cmwgcGFyYW0gc3RyaW5nXG4gICAqIGlmIHRoZSBzdHJpbmcgaXMgdG8gZXhjZWVkIGxpbWl0LCB0aGUgcGFyYW1zIGFyZVxuICAgKiBlbmNvZGVkIGFuZCBhZGRlZCBhZ2FpbnN0IHRoZSBcIm5zX2N1dD1cIiBrZXlcbiAgICovXG4gIEFwcFRhZy5wcm90b3R5cGUuX2NyZWF0ZVVybCA9IGZ1bmN0aW9uKHBhcmFtcykge1xuICAgIHZhciBlbmNvZGUgPSB3aW5kb3cuZW5jb2RlVVJJQ29tcG9uZW50IHx8IGVzY2FwZTsgLy8ganNoaW50IGlnbm9yZTpsaW5lXG4gICAgdmFyIHVybCA9IHRoaXMuX3VybDtcbiAgICB2YXIgaztcblxuICAgIHRoaXMuX3VybFBhcmFtcyA9ICcnO1xuICAgIHRoaXMuX2N1dCA9ICcnO1xuXG4gICAgLy8gTmFtZSAqbXVzdCogYmUgZmlyc3QgcGFyYW0gaW4gdXJsXG4gICAgaWYgKHBhcmFtcy5oYXNPd25Qcm9wZXJ0eSgnbmFtZScpKSB7XG4gICAgICB0aGlzLl9hZGRVcmxQYXJhbSgnbmFtZScsIHBhcmFtcy5uYW1lKTtcbiAgICB9XG5cbiAgICBmb3IgKGsgaW4gcGFyYW1zKSB7XG4gICAgICBpZiAoayAhPT0gJ25hbWUnICYmIGsgIT09ICduc19yZWZlcnJlcicpIHtcbiAgICAgICAgdGhpcy5fYWRkVXJsUGFyYW0oaywgcGFyYW1zW2tdKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBuc19yZWZlcnJlciAqbXVzdCogYmUgbGFzdCBwYXJhbSBpbiB1cmxcbiAgICBpZiAocGFyYW1zLmhhc093blByb3BlcnR5KCduc19yZWZlcnJlcicpKSB7XG4gICAgICAvLyBTaG91bGQgdXMgYzkgd2hlbiByZXBvcnRpbmcgdG8gc2NvcmVjYXJkIHJlc2VhcmNoIE1ZU1RBVFMtMTQyN1xuICAgICAgdGhpcy5fYWRkVXJsUGFyYW0oXG4gICAgICAgIHRoaXMuX2lzU2NvcmVjYXJkRG9tYWluID8gQ1NMYWJlbEtleXMuRU5WX1JFRkVSUkVSIDogJ25zX3JlZmVycmVyJyxcbiAgICAgICAgcGFyYW1zLm5zX3JlZmVycmVyIC8vIGpzaGludCBpZ25vcmU6bGluZVxuICAgICAgKTtcbiAgICB9XG5cbiAgICB1cmwgKz0gdGhpcy5fdXJsUGFyYW1zO1xuXG4gICAgaWYgKHRoaXMuX2N1dC5sZW5ndGgpIHtcbiAgICAgIHVybCArPSAnbnNfY3V0PScgKyBlbmNvZGUodGhpcy5fY3V0LnJlcGxhY2UoLyYkLywgJycpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdXJsID0gdXJsLnJlcGxhY2UoLyYkLywgJycpO1xuICAgIH1cblxuICAgIHJldHVybiB1cmw7XG4gIH07XG5cbiAgQXBwVGFnLnByb3RvdHlwZS5fYWRkVXJsUGFyYW0gPSBmdW5jdGlvbihrZXksIHZhbCkge1xuICAgIHZhciBlbmNvZGUgPSB3aW5kb3cuZW5jb2RlVVJJQ29tcG9uZW50IHx8IGVzY2FwZTsgLy8ganNoaW50IGlnbm9yZTpsaW5lXG4gICAgdmFyIGt2ID0gZW5jb2RlKGtleSkgKyAnPScgKyBlbmNvZGUodmFsKSArICcmJztcbiAgICB2YXIgbGltaXQgPSBBcHBUYWcuVVJMX0xJTUlUIC0gODtcblxuICAgIGlmICgodGhpcy5fdXJsLmxlbmd0aCArIHRoaXMuX3VybFBhcmFtcy5sZW5ndGggKyBrdi5sZW5ndGgpIDwgbGltaXQpIHtcbiAgICAgIHRoaXMuX3VybFBhcmFtcyArPSBrdjtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fY3V0ICs9IGt2O1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogSWYgdGhlIHVybCBkb2VzIG5vdCBoYXZlIGEgdHJhaWxpbmcgJz8nIG9yICcmJywgYWRkIG9uZVxuICAgKi9cbiAgQXBwVGFnLnByb3RvdHlwZS5fbWFrZUJhc2VVcmwgPSBmdW5jdGlvbih1cmwpIHtcbiAgICB2YXIgbWFyayA9IC0xO1xuICAgIHZhciBsYXN0ID0gdXJsLmNoYXJBdCh1cmwubGVuZ3RoIC0gMSk7XG5cbiAgICBmb3IgKHZhciBpID0gMCwgaiA9IHVybC5sZW5ndGg7IGkgPCBqOyBpKyspIHtcbiAgICAgIGlmICh1cmwuY2hhckF0KGkpID09PSAnPycpIHtcbiAgICAgICAgbWFyayA9IGk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKG1hcmsgPT09IC0xKSB7XG4gICAgICB1cmwgKz0gJz8nO1xuICAgIH0gZWxzZSBpZiAobGFzdCAhPT0gJz8nICYmIGxhc3QgIT09ICcmJykge1xuICAgICAgdXJsICs9ICcmJztcbiAgICB9XG5cbiAgICByZXR1cm4gdXJsO1xuICB9O1xuXG4gIHJldHVybiBBcHBUYWc7XG59KTtcbiIsImRlZmluZShmdW5jdGlvbihyZXF1aXJlKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICB2YXIgQ1NMYWJlbEtleXMgPSByZXF1aXJlKCcuL2xhYmVsLWtleXMnKTtcbiAgdmFyIENvbmZpZ0tleXMgPSByZXF1aXJlKCcuLi8uLi9jb25maWcva2V5cycpO1xuICB2YXIgUGxheWVyU3RhdGUgPSByZXF1aXJlKCcuL3BsYXllci1zdGF0ZS5qcycpO1xuICB2YXIgRW52aXJvbm1lbnQgPSByZXF1aXJlKCcuLi8uLi9lbnZpcm9ubWVudCcpO1xuICB2YXIgVXRpbHMgPSByZXF1aXJlKCcuLi8uLi91dGlsL21ldGhvZHMnKTtcbiAgdmFyIExhYmVsVmFsaWRhdG9yID0gcmVxdWlyZSgnLi4vLi4vdXRpbC9jbGVhbnNpbmcvbGFiZWwtdmFsaWRhdG9yLmpzJyk7XG4gIHZhciBFbnVtcyA9IHJlcXVpcmUoJy4uLy4uL2VudW1lcmF0aW9ucycpO1xuICB2YXIgSU5WQUxJRF9EQVRBX1NUUklORyA9ICdpbnZhbGlkLWRhdGEnO1xuICB2YXIgU1NDSGVscGVyID0gcmVxdWlyZSgnc3NjLWpzJyk7XG4gIHZhciBDb29raWVIZWxwZXIgPSByZXF1aXJlKCcuLi8uLi91dGlsL2Nvb2tpZXMnKTtcblxuICB2YXIgRE9NQUlOX1NBID0gJ3NhLmJiYy5jby51ay9iYmMnO1xuICB2YXIgRE9NQUlOX1NDUiA9ICdzY29yZWNhcmRyZXNlYXJjaC5jb20nO1xuXG4gIHZhciBXRUJfVFlQRVMgPSBbXG4gICAgRW51bXMuQXBwbGljYXRpb25UeXBlLldFQixcbiAgICBFbnVtcy5BcHBsaWNhdGlvblR5cGUuTU9CSUxFX1dFQixcbiAgICBFbnVtcy5BcHBsaWNhdGlvblR5cGUuUkVTUE9OU0lWRVxuICBdO1xuXG4gIC8vIGEgbGlzdCBvZiBsYWJlbHMgdGhhdCBzaG91bGQgbm90IGJlIHNlbnQgdG8gY29tc2NvcmUvc3NjXG4gIHZhciBzc2NFeGNsdWRlZExhYmVscyA9IFtcbiAgICBDU0xhYmVsS2V5cy5OT19DT09LSUVTXG4gIF07XG5cbiAgLy8gc3BlY2lhbCBsYWJlbHMgdGhhdCBhcmUgb3ZlcnJpZGRlbiBieSBzdHJlYW1zZW5zZSB3aXRoIGVhY2ggbmV3IGFzc2V0IChjbGlwKVxuICB2YXIgQVNTRVRfTEFCRUxTID0gW1xuICAgICduc19zdF9wcicsICduc19zdF9zbicsICduc19zdF9lbicsICduc19zdF9lcCcsXG4gICAgJ25zX3N0X3R5JywgJ25zX3N0X2N0JywgJ25zX3N0X3N0JywgJ25zX3N0X3B1J1xuICBdO1xuXG4gIC8qXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKiBQcml2YXRlIEhlbHBlcnNcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqL1xuXG4gIGZ1bmN0aW9uIGR1bW15KCkge1xuICAgIHJldHVybiAtMTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9nZXRTY29yZUNhcmRVcmwocHJvdG9jb2wpIHtcbiAgICB2YXIgcHJvdG9jb2xQcmVmaXggPSAocHJvdG9jb2wgPT09ICdodHRwczonKSA/ICdzJyA6ICcnO1xuXG4gICAgcmV0dXJuIHByb3RvY29sICsgJy8vJyArIHByb3RvY29sUHJlZml4ICsgJ2IuJyArIERPTUFJTl9TQ1IgKyAnL3A/JztcbiAgfVxuXG4gIGZ1bmN0aW9uIF9nZXRTQVVybChwcm90b2NvbCwgY3NTaXRlKSB7XG4gICAgcmV0dXJuIHByb3RvY29sICsgJy8vJyArIERPTUFJTl9TQSArICcvJyArIGNzU2l0ZSArICcvcyc7XG4gIH1cblxuICBmdW5jdGlvbiBfZ2V0Q1NFbmRwb2ludChjb21zY29yZUhvc3QsIGVudlByb3RvY29sLCBjc1NpdGUpIHtcbiAgICBpZiAoY29tc2NvcmVIb3N0ID09PSBET01BSU5fU0NSKSB7XG4gICAgICByZXR1cm4gX2dldFNjb3JlQ2FyZFVybChlbnZQcm90b2NvbCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIF9nZXRTQVVybChlbnZQcm90b2NvbCwgY3NTaXRlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF92YWxpZGF0ZUNsaXBMYWJlbChfY2xpcExhYmVsKSB7XG4gICAgdmFyIGNoZWNrZWRMYWJlbCA9XG4gICAgICAoX2NsaXBMYWJlbCA9PT0gbnVsbCkgP1xuICAgICAgSU5WQUxJRF9EQVRBX1NUUklORyA6XG4gICAgICBfY2xpcExhYmVsO1xuXG4gICAgcmV0dXJuIGNoZWNrZWRMYWJlbDtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9nZXRJZE9iamVjdFZhbHVlKF9pZE9iamVjdCkge1xuICAgIGlmIChfaWRPYmplY3QgIT09IG51bGwgJiYgX2lkT2JqZWN0LmlzVmFsdWVWYWxpZCgpKSB7XG4gICAgICByZXR1cm4gX2lkT2JqZWN0LmdldFZhbHVlKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIElOVkFMSURfREFUQV9TVFJJTkc7XG4gIH1cblxuICBmdW5jdGlvbiBfZ2V0TW9zdFByZWNlZGVudElkT2JqZWN0KG1lZGlhKSB7XG5cbiAgICB2YXIgY29uc3VtcHRpb25Nb2RlID0gbWVkaWEuZ2V0TWVkaWFDb25zdW1wdGlvbk1vZGUoKTtcblxuICAgIHZhciBzZXJ2aWNlSWRPYmplY3QgPSBtZWRpYS5nZXRTZXJ2aWNlSWRPYmplY3QoKTtcbiAgICB2YXIgdmVyc2lvbklkT2JqZWN0ID0gbWVkaWEuZ2V0VmVyc2lvbklkT2JqZWN0KCk7XG4gICAgdmFyIGNsaXBJZE9iamVjdCA9IG1lZGlhLmdldENsaXBJZE9iamVjdCgpO1xuICAgIHZhciBlcGlzb2RlSWRPYmplY3QgPSBtZWRpYS5nZXRFcGlzb2RlSWRPYmplY3QoKTtcbiAgICB2YXIgdnBJZE9iamVjdCA9IG1lZGlhLmdldFZwSWRPYmplY3QoKTtcbiAgICB2YXIgbm9uUGlwc0NvbnRlbnRJZE9iamVjdCA9IG1lZGlhLmdldE5vblBpcHNDb250ZW50SWRPYmplY3QoKTtcblxuICAgIC8vIE9yZGVyIG9mIGlmIHN0YXRlbWVudCBpcyBpbXBvcnRhbnQgZm9yIHRoaXMgZnVuY3Rpb25cbiAgICAvLyBTZXJ2aWNlIGlmIGNvbnN1bXB0aW9uIG1vZGUgaXMgbGl2ZVxuICAgIGlmIChjb25zdW1wdGlvbk1vZGUgPT09IEVudW1zLk1lZGlhQ29uc3VtcHRpb25Nb2RlLkxJVkUgJiZcbiAgICAgICAgbWVkaWEuaXNFc3NFbnJpY2hlZCgpID09PSB0cnVlICYmXG4gICAgICAgIHZlcnNpb25JZE9iamVjdC5pc1ZhbHVlVmFsaWQoKVxuICAgICkge1xuICAgICAgcmV0dXJuIHZlcnNpb25JZE9iamVjdDtcbiAgICB9IGVsc2UgaWYgKFxuICAgICAgY29uc3VtcHRpb25Nb2RlID09PSBFbnVtcy5NZWRpYUNvbnN1bXB0aW9uTW9kZS5MSVZFICYmXG4gICAgICBzZXJ2aWNlSWRPYmplY3QuaXNWYWx1ZVZhbGlkKClcbiAgICApIHtcbiAgICAgIHJldHVybiBzZXJ2aWNlSWRPYmplY3Q7XG5cbiAgICAgIC8vIE5vbiBQaXBzIENvbnRlbnQgSWRcbiAgICB9IGVsc2UgaWYgKG5vblBpcHNDb250ZW50SWRPYmplY3QuaXNWYWx1ZVZhbGlkKCkpIHtcbiAgICAgIHJldHVybiBub25QaXBzQ29udGVudElkT2JqZWN0O1xuXG4gICAgICAvLyBWZXJzaW9uIElkXG4gICAgfSBlbHNlIGlmICh2ZXJzaW9uSWRPYmplY3QuaXNWYWx1ZVZhbGlkKCkpIHtcbiAgICAgIHJldHVybiB2ZXJzaW9uSWRPYmplY3Q7XG5cbiAgICAgIC8vIENsaXBJZFxuICAgIH0gZWxzZSBpZiAoY2xpcElkT2JqZWN0LmlzVmFsdWVWYWxpZCgpKSB7XG4gICAgICByZXR1cm4gY2xpcElkT2JqZWN0O1xuXG4gICAgICAvLyBFcGlzb2RlIElkXG4gICAgfSBlbHNlIGlmIChlcGlzb2RlSWRPYmplY3QuaXNWYWx1ZVZhbGlkKCkpIHtcbiAgICAgIHJldHVybiBlcGlzb2RlSWRPYmplY3Q7XG5cbiAgICAgIC8vIHZQaWRcbiAgICB9IGVsc2UgaWYgKHZwSWRPYmplY3QuaXNWYWx1ZVZhbGlkKCkpIHtcbiAgICAgIHJldHVybiB2cElkT2JqZWN0O1xuXG4gICAgICAvLyBTZXJ2aWNlIGlkIGlzIGxhc3QgaWYgbm90IGxpdmVcbiAgICB9IGVsc2UgaWYgKHNlcnZpY2VJZE9iamVjdC5pc1ZhbHVlVmFsaWQoKSkge1xuICAgICAgcmV0dXJuIHNlcnZpY2VJZE9iamVjdDtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9oYXNBbWJpZ3VvdXNQcmVjZWRlbnRJZChtZWRpYSkge1xuICAgIHZhciBwcmVjZWRlbnRPYmplY3QgPSBfZ2V0TW9zdFByZWNlZGVudElkT2JqZWN0KG1lZGlhKTtcbiAgICB2YXIgdmVyc2lvbklkID0gbWVkaWEuZ2V0VmVyc2lvbklkT2JqZWN0KCk7XG4gICAgdmFyIGVwaXNvZGVJZCA9IG1lZGlhLmdldEVwaXNvZGVJZE9iamVjdCgpO1xuICAgIHZhciBjbGlwSWQgPSBtZWRpYS5nZXRDbGlwSWRPYmplY3QoKTtcblxuICAgIGlmIChwcmVjZWRlbnRPYmplY3QgIT09IG51bGwpIHtcbiAgICAgIHZhciBpZFR5cGUgPSBwcmVjZWRlbnRPYmplY3QuZ2V0SWRUeXBlKCk7XG5cbiAgICAgIGlmIChtZWRpYS5pc0xpdmUoKSkge1xuXG4gICAgICAgIGlmIChpZFR5cGUgPT09IEVudW1zLk1lZGlhSWRUeXBlLlNFUlZJQ0UgfHwgbWVkaWEuaXNFc3NFbnJpY2hlZCgpKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKFxuICAgICAgICBpZFR5cGUgPT09IEVudW1zLk1lZGlhSWRUeXBlLlNFUlZJQ0UgJiZcbiAgICAgICAgIXZlcnNpb25JZC5pc1ZhbHVlU2V0KCkgJiZcbiAgICAgICAgIWVwaXNvZGVJZC5pc1ZhbHVlU2V0KCkgJiZcbiAgICAgICAgIWNsaXBJZC5pc1ZhbHVlU2V0KClcbiAgICAgICkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0gZWxzZSBpZiAoaWRUeXBlICE9PSBFbnVtcy5NZWRpYUlkVHlwZS5WUElEKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9idWlsZFN0cmVhbVNlbnNlUGxheWxpc3QobWVkaWEpIHtcbiAgICB2YXIgcGxheWxpc3QgPSB7fTtcbiAgICB2YXIgcHJlY2VkZW50T2JqZWN0ID0gX2dldE1vc3RQcmVjZWRlbnRJZE9iamVjdChtZWRpYSk7XG5cbiAgICAvLyBQbGF5bGlzdCBsYWJlbHM6XG4gICAgcGxheWxpc3RbQ1NMYWJlbEtleXMuUExBWUxJU1RfTkFNRV0gPVxuICAgICAgKHByZWNlZGVudE9iamVjdCA9PT0gbnVsbCkgP1xuICAgICAgSU5WQUxJRF9EQVRBX1NUUklORyA6XG4gICAgICBwcmVjZWRlbnRPYmplY3QuZ2V0VmFsdWUoKTtcblxuICAgIHJldHVybiBwbGF5bGlzdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBCdWlsZCBhIHNldCBvZiBsYWJlbHMgZnJvbSBhIG1lZGlhIG9iamVjdC5cbiAgICpcbiAgICogQHBhcmFtIHtNZWRpYX0gbWVkaWFcbiAgICogQHJldHVybnMge09iamVjdH1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGZ1bmN0aW9uIF9idWlsZFN0cmVhbVNlbnNlQ2xpcChtZWRpYSkge1xuXG4gICAgdmFyIGNsaXAgPSB7fTtcbiAgICB2YXIgcHJlY2VkZW50T2JqZWN0ID0gX2dldE1vc3RQcmVjZWRlbnRJZE9iamVjdChtZWRpYSk7XG5cbiAgICB2YXIgYXZUeXBlID0gX3ZhbGlkYXRlQ2xpcExhYmVsKG1lZGlhLmdldEF2VHlwZSgpKTtcbiAgICB2YXIgbGVuZ3RoID0gX3ZhbGlkYXRlQ2xpcExhYmVsKG1lZGlhLmdldExlbmd0aCgpKTtcbiAgICB2YXIgcmV0cmlldmFsVHlwZSA9IF92YWxpZGF0ZUNsaXBMYWJlbChtZWRpYS5nZXRSZXRyaWV2YWxUeXBlKCkpO1xuXG4gICAgLy8gQ2xpcCBsYWJlbHM6XG4gICAgY2xpcFtDU0xhYmVsS2V5cy5NRURJQV9QQVJUX05VTUJFUl0gPSAxO1xuICAgIGNsaXBbQ1NMYWJlbEtleXMuTUVESUFfVE9UQUxfUEFSVFNdID0gMTtcbiAgICBjbGlwW0NTTGFiZWxLZXlzLk1FRElBX0xFTkdUSF0gPSBsZW5ndGg7XG4gICAgY2xpcFtDU0xhYmVsS2V5cy5NRURJQV9NRURJVU1dID0gYXZUeXBlO1xuICAgIGNsaXBbQ1NMYWJlbEtleXMuTUVESUFfUkVUUklFVkFMX1RZUEVdID0gcmV0cmlldmFsVHlwZTtcblxuICAgIHZhciBjb25zdW1lTW9kZSA9IG1lZGlhLmdldE1lZGlhQ29uc3VtcHRpb25Nb2RlKCk7XG5cbiAgICBpZiAoY29uc3VtZU1vZGUgPT09IG51bGwpIHtcbiAgICAgIGNsaXBbQ1NMYWJlbEtleXMuTUVESUFfU1RSRUFNX1RZUEVdID0gSU5WQUxJRF9EQVRBX1NUUklORztcbiAgICAgIGNsaXBbQ1NMYWJlbEtleXMuTUVESUFfTElWRV9PUl9PTkRFTUFORF0gPSBJTlZBTElEX0RBVEFfU1RSSU5HO1xuICAgIH0gZWxzZSBpZiAoIW1lZGlhLmlzTGl2ZSgpICYmIGF2VHlwZSA9PT0gSU5WQUxJRF9EQVRBX1NUUklORykge1xuICAgICAgY2xpcFtDU0xhYmVsS2V5cy5NRURJQV9TVFJFQU1fVFlQRV0gPSBJTlZBTElEX0RBVEFfU1RSSU5HO1xuICAgIH0gZWxzZSBpZiAobWVkaWEuaXNPbkRlbWFuZCgpIHx8IG1lZGlhLmlzRG93bmxvYWQoKSkge1xuICAgICAgLy9PbiBEZW1hbmQgTWVkaWFcbiAgICAgIGNsaXBbQ1NMYWJlbEtleXMuTUVESUFfU1RSRUFNX1RZUEVdID0gbWVkaWEuaXNWaWRlbygpID8gJ3ZvZCcgOiAnYW9kJztcbiAgICAgIGNsaXBbQ1NMYWJlbEtleXMuTUVESUFfTElWRV9PUl9PTkRFTUFORF0gPSAnb24tZGVtYW5kJztcbiAgICB9IGVsc2Uge1xuICAgICAgLy9MaXZlIG1lZGlhXG4gICAgICBpZiAobWVkaWEuaXNFc3NFbnJpY2hlZCgpKSB7XG4gICAgICAgIGNsaXBbQ1NMYWJlbEtleXMuRVNTX0VOUklDSEVEXSA9ICd0cnVlJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNsaXBbQ1NMYWJlbEtleXMuRVNTX0VOUklDSEVEXSA9ICdmYWxzZSc7XG4gICAgICAgIGNsaXBbQ1NMYWJlbEtleXMuTUVESUFfSVNfTElWRV0gPSAnMSc7XG4gICAgICB9XG5cbiAgICAgIGNsaXBbQ1NMYWJlbEtleXMuTUVESUFfU1RSRUFNX1RZUEVdID0gJ2xpdmUnO1xuICAgICAgY2xpcFtDU0xhYmVsS2V5cy5NRURJQV9MSVZFX09SX09OREVNQU5EXSA9ICdsaXZlJztcbiAgICB9XG5cbiAgICB2YXIgdmVyc2lvbklkID0gbWVkaWEuZ2V0VmVyc2lvbklkT2JqZWN0KCk7XG4gICAgdmFyIHNlcnZpY2VJZCA9IG1lZGlhLmdldFNlcnZpY2VJZE9iamVjdCgpO1xuICAgIHZhciBjbGlwSWQgPSBtZWRpYS5nZXRDbGlwSWRPYmplY3QoKTtcbiAgICB2YXIgZXBpc29kZUlkID0gbWVkaWEuZ2V0RXBpc29kZUlkT2JqZWN0KCk7XG4gICAgdmFyIG5vblBpcHNDb250ZW50SWQgPSBtZWRpYS5nZXROb25QaXBzQ29udGVudElkT2JqZWN0KCk7XG5cbiAgICBjbGlwW0NTTGFiZWxLZXlzLk1FRElBX1BJRF0gPSBfZ2V0SWRPYmplY3RWYWx1ZShwcmVjZWRlbnRPYmplY3QpO1xuXG4gICAgLy8gaWYgY29uc3VtcHRpb24gbW9kZSBpcyBsaXZlIGFuZCBlc3MgaGFzIG5vdCBlbnJpY2hlZCB0aGUgbWVkaWEgb2JqZWN0XG4gICAgLy8gdGhlbiB3ZSBuZWVkIHRvIHByZWZpeCB0aGUgY29udGVudCBpZCBpZiB3ZSBhcmUgbm90IHVzaW5nIHRoZSBzZXJ2aWNlIGlkXG4gICAgaWYgKG1lZGlhLmlzTGl2ZSgpICYmXG4gICAgICAgICFtZWRpYS5nZXRTZXJ2aWNlSWQoKSAmJlxuICAgICAgICBtZWRpYS5pc0Vzc0VucmljaGVkKCkgPT09IGZhbHNlICYmXG4gICAgICAgIChtZWRpYS5nZXRWZXJzaW9uSWQoKSB8fCBtZWRpYS5nZXRWcElkKCkpXG4gICAgKSB7XG4gICAgICB2YXIgY29udGVudElkID0gbWVkaWEuZ2V0VmVyc2lvbklkKCkgfHwgbWVkaWEuZ2V0VnBJZCgpO1xuICAgICAgY2xpcFtDU0xhYmVsS2V5cy5NRURJQV9QSURdID0gJ3VudmVyaWZpZWRfJyArIGNvbnRlbnRJZDtcbiAgICB9XG5cbiAgICBpZiAobm9uUGlwc0NvbnRlbnRJZC5pc1ZhbHVlU2V0KCkpIHtcbiAgICAgIGNsaXBbQ1NMYWJlbEtleXMuTUVESUFfTk9OX1BJUFNfQ09OVEVOVF9JRF0gPSBfZ2V0SWRPYmplY3RWYWx1ZShub25QaXBzQ29udGVudElkKTtcbiAgICB9XG5cbiAgICBpZiAodmVyc2lvbklkLmlzVmFsdWVTZXQoKSkge1xuICAgICAgY2xpcFtDU0xhYmVsS2V5cy5NRURJQV9WRVJTSU9OX0lEXSA9IF9nZXRJZE9iamVjdFZhbHVlKHZlcnNpb25JZCk7XG4gICAgfVxuXG4gICAgaWYgKHNlcnZpY2VJZC5pc1ZhbHVlU2V0KCkpIHtcbiAgICAgIGNsaXBbQ1NMYWJlbEtleXMuTUVESUFfU0VSVklDRV9JRF0gPSBfZ2V0SWRPYmplY3RWYWx1ZShzZXJ2aWNlSWQpO1xuICAgIH1cblxuICAgIGlmIChjbGlwSWQuaXNWYWx1ZVNldCgpKSB7XG4gICAgICBjbGlwW0NTTGFiZWxLZXlzLk1FRElBX0NMSVBfSURdID0gX2dldElkT2JqZWN0VmFsdWUoY2xpcElkKTtcbiAgICB9XG5cbiAgICBpZiAoZXBpc29kZUlkLmlzVmFsdWVTZXQoKSkge1xuICAgICAgY2xpcFtDU0xhYmVsS2V5cy5NRURJQV9FUElTT0RFX0lEXSA9IF9nZXRJZE9iamVjdFZhbHVlKGVwaXNvZGVJZCk7XG4gICAgfVxuXG4gICAgaWYgKF9oYXNBbWJpZ3VvdXNQcmVjZWRlbnRJZChtZWRpYSkpIHtcbiAgICAgIGNsaXBbQ1NMYWJlbEtleXMuTUVESUFfQU1CSUdVT1VTX0lEXSA9ICcxJztcbiAgICB9XG5cbiAgICByZXR1cm4gY2xpcDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb21zY29yZSBkZWxlZ2F0ZS5cbiAgICogQG5hbWVzcGFjZSBDb21TY29yZURlbGVnYXRlXG4gICAqIEBjb25zdHJ1Y3RvclxuICAgKlxuICAgKi9cbiAgZnVuY3Rpb24gQ29tU2NvcmVEZWxlZ2F0ZShhcHBOYW1lLCBhcHBUeXBlLCBjb25maWcsIGVudmlyb25tZW50KSB7XG4gICAgdmFyIGNzU2l0ZSA9IGNvbmZpZ1tDb25maWdLZXlzLkNPTVNDT1JFX1NJVEVdO1xuICAgIHZhciBlbmRwb2ludDtcbiAgICB2YXIgb2ZmbGluZUVuZHBvaW50O1xuICAgIHZhciBkZXJpdmVkRW5kcG9pbnQ7XG4gICAgdmFyIGlzU2NvcmVjYXJkRG9tYWluO1xuICAgIHZhciBjc0hvc3Q7XG4gICAgdmFyIGN1c3RvbUdldDtcbiAgICB2YXIgc3NjSGVscGVyO1xuICAgIHZhciBvcmJDb29raWVzUG9saWN5O1xuICAgIHZhciBjb29raWVQb2xpY3k7XG4gICAgdGhpcy5fZGV2aWNlSWQgPSBudWxsO1xuICAgIHRoaXMuX2Jyb2tlciA9IG51bGw7XG4gICAgdGhpcy5tZWRpYSA9IG51bGw7XG4gICAgdGhpcy5TU1BsYXllckV2ZW50ID0gQ29tU2NvcmVEZWxlZ2F0ZS5TdHJlYW1TZW5zZS5QbGF5ZXJFdmVudHM7XG4gICAgdGhpcy5TU1BsYXllclN0YXRlID0gQ29tU2NvcmVEZWxlZ2F0ZS5TdHJlYW1TZW5zZS5JbnRlcm5hbFN0YXRlcztcbiAgICB0aGlzLl9jbGlwcyA9IFtdO1xuICAgIHRoaXMuX2lzRW5hYmxlZCA9IHRydWU7XG4gICAgdGhpcy5faGFzU3RhcnRlZEFwcFRhZyA9IGZhbHNlO1xuICAgIHRoaXMuX2hhc0NyZWF0ZWRBc3NldCA9IGZhbHNlO1xuICAgIHRoaXMuX3N0b3JlZEFzc2V0TGFiZWxzID0ge307XG5cbiAgICBjc0hvc3QgPSBjb25maWdbQ29uZmlnS2V5cy5DT01TQ09SRV9IT1NUXTtcbiAgICBjc1NpdGUgPSBjb25maWdbQ29uZmlnS2V5cy5DT01TQ09SRV9TSVRFXTtcblxuICAgIC8vIFNTQyBzZXR0aW5nc1xuICAgIHRoaXMudXNlU3NjID0gKGNvbmZpZ1tDb25maWdLZXlzLlVTRV9TU0NdID09PSB0cnVlKSAmJlxuICAgICAgKGNzSG9zdCAhPT0gJ3NhLmJiYy5jby51aycpO1xuXG4gICAgLy8gc2V0IGRldmljZSBpZFxuICAgIHRoaXMuX2RldmljZUlkID0gY29uZmlnW0NvbmZpZ0tleXMuRUNIT19ERVZJQ0VfSURdIHx8IHVuZGVmaW5lZDtcblxuICAgIC8vIGlmIFNTQyBpcyBlbmFibGVkIGFuZCBkZXZpY2UgaWQgaXMgbm90IHNldCwgYXR0ZW1wdCB0byBnZXQgaXQgZnJvbVxuICAgIC8vIHRoZSBjb29raWUgdXNpbmcgdGhlIFNTQyBoZWxwZXIuXG4gICAgaWYgKHRoaXMudXNlU3NjID09PSB0cnVlICYmICF0aGlzLl9kZXZpY2VJZCkge1xuICAgICAgc3NjSGVscGVyID0gQ29tU2NvcmVEZWxlZ2F0ZS5fY3JlYXRlU3NjSGVscGVyKHtcbiAgICAgICAgZm9yY2VCQkNIb3N0OiBjb25maWdbQ29uZmlnS2V5cy5TU0NfSE9TVE5BTUVdXG4gICAgICB9KTtcbiAgICAgIHRoaXMuX2RldmljZUlkID0gc3NjSGVscGVyLmdldENvb2tpZUlkKCk7XG4gICAgfVxuXG4gICAgaWYgKCFVdGlscy5jb250YWluc1ZhbHVlKEVudW1zLkFwcGxpY2F0aW9uVHlwZSwgYXBwVHlwZSkpIHtcbiAgICAgIGFwcFR5cGUgPSBJTlZBTElEX0RBVEFfU1RSSU5HO1xuICAgIH1cblxuICAgIGVuZHBvaW50ID0gX2dldENTRW5kcG9pbnQoY3NIb3N0LCBlbnZpcm9ubWVudC5nZXRQcm90b2NvbCgpLCBjc1NpdGUpO1xuXG4gICAgaWYgKHRoaXMudXNlU3NjID09PSB0cnVlICYmICF0aGlzLl9kZXZpY2VJZCkge1xuICAgICAgZW5kcG9pbnQgPSBzc2NIZWxwZXIuZ2V0TG9jYXRpb24oKS5wcm90b2NvbCArXG4gICAgICAgICcvLycgKyBzc2NIZWxwZXIuZ2V0U1NDSG9zdG5hbWUoKTtcbiAgICB9XG5cbiAgICAvLyBpZiB1c2luZyB0ZXN0IHNlcnZpY2UsIHNhdmUgdGhlIGVuZHBvaW50IHRoZW4gcmVwbGFjZSB3aXRoIHRlc3QgdXJsXG4gICAgaWYgKGNvbmZpZ1tDb25maWdLZXlzLlRFU1RfU0VSVklDRV9FTkFCTEVEXSA9PT0gdHJ1ZSkge1xuICAgICAgZGVyaXZlZEVuZHBvaW50ID0gZW5kcG9pbnQ7XG4gICAgICBlbmRwb2ludCA9IGNvbmZpZ1tDb25maWdLZXlzLlRFU1RfU0VSVklDRV9VUkxdICsgJy9jb21zY29yZSc7XG4gICAgICBpZiAodGhpcy5faXNVc2luZ0NvbXNjb3JlT1RUTGlicmFyeSkge1xuICAgICAgICBvZmZsaW5lRW5kcG9pbnQgPSBjb25maWdbQ29uZmlnS2V5cy5URVNUX1NFUlZJQ0VfVVJMXSArICcvb2ZmbGluZSc7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQXJlIHdlIGFuIEFwcCAoYXMgQ29tU2NvcmUgZGVmaW5lcyBpdCwgd2hpY2ggaXMsIG5vdCBhIHdlYiBwYWdlP1xuICAgIC8vIChFQ0hPLTU2KVxuICAgIHRoaXMuX2lzQXBwID0gIVV0aWxzLmNvbnRhaW5zVmFsdWUoV0VCX1RZUEVTLCBhcHBUeXBlKTtcblxuICAgIGN1c3RvbUdldCA9IGVudmlyb25tZW50LmdldEh0dHBHZXQoKTtcbiAgICBpc1Njb3JlY2FyZERvbWFpbiA9IChjc0hvc3QgPT09IERPTUFJTl9TQ1IpO1xuXG4gICAgLy8gdGVybmFyeSBvcGVyYXRvciBlbnN1cmVzIHRoaXMgaXMgYSBiaW5hcnkgdmFsdWUgYW5kIG5vdFxuICAgIC8vIHVuZGVmaW5lZFxuICAgIHRoaXMuX2lzVXNpbmdDb21zY29yZU9UVExpYnJhcnkgPVxuICAgICAgKENvbVNjb3JlRGVsZWdhdGUuQXBwVGFnICYmIENvbVNjb3JlRGVsZWdhdGUuQXBwVGFnLm5zXykgPyB0cnVlIDogZmFsc2U7XG5cbiAgICBpZiAodGhpcy5faXNVc2luZ0NvbXNjb3JlT1RUTGlicmFyeSkge1xuICAgICAgdGhpcy5hcHBUYWcgPSBDb21TY29yZURlbGVnYXRlLkFwcFRhZy5uc18uY29tU2NvcmU7XG4gICAgICB0aGlzLmFwcFRhZy5zZXRQbGF0Zm9ybUFQSShDb21TY29yZURlbGVnYXRlLkFwcFRhZy5uc18uUGxhdGZvcm1BUElzLmh0bWw1KTtcbiAgICAgIGlmIChjdXN0b21HZXQpIHtcbiAgICAgICAgdGhpcy5hcHBUYWcuZ2V0UGxhdGZvcm1BUEkoKS5odHRwR2V0ID0gY3VzdG9tR2V0O1xuICAgICAgfVxuXG4gICAgICB0aGlzLmFwcFRhZy5zZXRQdWJsaXNoZXJTZWNyZXQoY29uZmlnW0NvbmZpZ0tleXMuQ09NU0NPUkVfUFVCTElTSEVSX1NFQ1JFVF0pO1xuICAgICAgdGhpcy5hcHBUYWcuc2V0QXBwQ29udGV4dCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmFwcFRhZyA9IG5ldyBDb21TY29yZURlbGVnYXRlLkFwcFRhZyhcbiAgICAgICAgY3VzdG9tR2V0IHx8IEVudmlyb25tZW50Ll9kZWZhdWx0SHR0cEdldCxcbiAgICAgICAgdGhpcy5faXNBcHAsXG4gICAgICAgIGlzU2NvcmVjYXJkRG9tYWluXG4gICAgICApO1xuICAgIH1cblxuICAgIHRoaXMuc3MgPSBuZXcgQ29tU2NvcmVEZWxlZ2F0ZS5TdHJlYW1TZW5zZS5TdHJlYW1pbmdBbmFseXRpY3MoXG4gICAgICB7IGxpdmVFbmRwb2ludFVSTDogZW5kcG9pbnQsIHN5c3RlbUNsb2NrSnVtcERldGVjdGlvbjogdHJ1ZSB9KTtcbiAgICBpZiAoY3VzdG9tR2V0KSB7XG4gICAgICB0aGlzLnNzLmdldFBsYXRmb3JtQVBJKCkuaHR0cEdldCA9IGN1c3RvbUdldDtcbiAgICB9XG5cbiAgICAvLyBzZXQgQzEgYW5kIEMyIGlmIGhvc3QgaXMgU0NSXG4gICAgaWYgKGlzU2NvcmVjYXJkRG9tYWluKSB7XG4gICAgICB0aGlzLmFwcFRhZy5zZXRDdXN0b21lckMyKGNvbmZpZ1tDb25maWdLZXlzLkNPTVNDT1JFX0NVU1RPTUVSX0lEXSk7XG4gICAgICB0aGlzLnNzLnNldExhYmVsKENTTGFiZWxLZXlzLkNPTVNDT1JFX0NVU1RPTUVSLCBjb25maWdbQ29uZmlnS2V5cy5DT01TQ09SRV9DVVNUT01FUl9JRF0pO1xuICAgICAgdGhpcy5hZGRMYWJlbChDU0xhYmVsS2V5cy5DT01TQ09SRV9DMSwgJzInKTtcbiAgICAgIHRoaXMuYWRkTGFiZWwoQ1NMYWJlbEtleXMuQ09NU0NPUkVfU0lURSwgY3NTaXRlKTtcbiAgICB9XG5cbiAgICB0aGlzLmFwcFRhZy5zZXRQaXhlbFVSTChlbmRwb2ludCk7XG5cbiAgICBpZiAodGhpcy5fZGV2aWNlSWQpIHtcbiAgICAgIHRoaXMuYWRkTGFiZWwoQ1NMYWJlbEtleXMuREVWSUNFX0lELCB0aGlzLl9kZXZpY2VJZCk7XG4gICAgfSBlbHNlIGlmICghdGhpcy51c2VTc2MgJiYgY3NIb3N0ID09PSAnc2EuYmJjLmNvLnVrJykge1xuICAgICAgdGhpcy5fZGV2aWNlSWQgPSBDb29raWVIZWxwZXIuZ2V0Q29va2llVmFsdWVCeU5hbWUoJ3MxJyk7XG4gICAgfVxuXG4gICAgaWYgKGNvbmZpZ1tDb25maWdLZXlzLlRFU1RfU0VSVklDRV9FTkFCTEVEXSA9PT0gdHJ1ZSkge1xuICAgICAgdGhpcy5hZGRMYWJlbChDU0xhYmVsS2V5cy5DT01TQ09SRV9FTkRQT0lOVCwgZGVyaXZlZEVuZHBvaW50KTtcbiAgICAgIGlmICh0aGlzLl9pc1VzaW5nQ29tc2NvcmVPVFRMaWJyYXJ5KSB7XG4gICAgICAgIHRoaXMuYXBwVGFnLnNldE9mZmxpbmVVUkwob2ZmbGluZUVuZHBvaW50KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmFkZExhYmVsKENTTGFiZWxLZXlzLkJCQ19BUFBMSUNBVElPTl9OQU1FLCBhcHBOYW1lKTtcbiAgICB0aGlzLmFkZExhYmVsKENTTGFiZWxLZXlzLkJCQ19BUFBMSUNBVElPTl9UWVBFLCBhcHBUeXBlKTtcbiAgICB0aGlzLnNldENhY2hlTW9kZShjb25maWdbQ29uZmlnS2V5cy5FQ0hPX0NBQ0hFX01PREVdKTtcbiAgICB0aGlzLmFkZExhYmVsKFxuICAgICAgQ1NMYWJlbEtleXMuQkJDX01FQVNVUkVNRU5UX0xJQl9OQU1FLFxuICAgICAgY29uZmlnW0NvbmZpZ0tleXMuRUNIT19OQU1FXVxuICAgICk7XG4gICAgdGhpcy5hZGRMYWJlbChcbiAgICAgIENTTGFiZWxLZXlzLkJCQ19NRUFTVVJFTUVOVF9MSUJfVkVSU0lPTixcbiAgICAgIGNvbmZpZ1tDb25maWdLZXlzLkVDSE9fVkVSU0lPTl1cbiAgICApO1xuXG4gICAgLy8gTGFiZWxzIHRvIHNldCBmb3IgXCJBcHBzXCIgb25seVxuICAgIGlmICh0aGlzLl9pc0FwcCkge1xuXG4gICAgICBpZiAodGhpcy5faXNVc2luZ0NvbXNjb3JlT1RUTGlicmFyeSkge1xuICAgICAgICB0aGlzLmFwcFRhZy5zZXRBcHBOYW1lKGFwcE5hbWUpO1xuICAgICAgfSAgZWxzZSB7XG4gICAgICAgIHRoaXMuYWRkTGFiZWwoQ1NMYWJlbEtleXMuQVBQX05BTUUsIGFwcE5hbWUpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmFkZExhYmVsKFxuICAgICAgICBDU0xhYmVsS2V5cy5BUFBfUExBVEZPUk1fTkFNRSxcbiAgICAgICAgZW52aXJvbm1lbnQuZ2V0UGxhdGZvcm1OYW1lKClcbiAgICAgICk7XG4gICAgICB0aGlzLmFkZExhYmVsKFxuICAgICAgICBDU0xhYmVsS2V5cy5BUFBfUExBVEZPUk1fUlVOVElNRSxcbiAgICAgICAgZW52aXJvbm1lbnQuZ2V0UGxhdGZvcm1SdW50aW1lRW52aXJvbm1lbnQoKVxuICAgICAgKTtcbiAgICAgIHRoaXMuYWRkTGFiZWwoXG4gICAgICAgIENTTGFiZWxLZXlzLkFQUF9PU19WRVJTSU9OLFxuICAgICAgICBlbnZpcm9ubWVudC5nZXRQbGF0Zm9ybU9TVmVyc2lvbigpXG4gICAgICApO1xuICAgICAgdGhpcy5hZGRMYWJlbChDU0xhYmVsS2V5cy5BUFBfREVWSUNFX05BTUUsIGVudmlyb25tZW50LmdldERldmljZU5hbWUoKSk7XG4gICAgICB0aGlzLmFkZExhYmVsKENTTGFiZWxLZXlzLkFQUF9TQ1JFRU5fUkVTT0xVVElPTixcbiAgICAgICAgZW52aXJvbm1lbnQuZ2V0U2NyZWVuUmVzb2x1dGlvbigpKTtcbiAgICAgIHRoaXMuYWRkTGFiZWwoQ1NMYWJlbEtleXMuQVBQX0xBTkdVQUdFLCBlbnZpcm9ubWVudC5nZXRMYW5ndWFnZSgpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5hZGRMYWJlbChcbiAgICAgICAgQ1NMYWJlbEtleXMuV0VCX1NDUkVFTl9SRVMsXG4gICAgICAgIGVudmlyb25tZW50LmdldFNjcmVlblJlc29sdXRpb24oKVxuICAgICAgKTtcbiAgICB9XG5cbiAgICB0aGlzLmFkZExhYmVsKENTTGFiZWxLZXlzLkVOVl9DSEFSX1NFVCwgZW52aXJvbm1lbnQuZ2V0Q2hhclNldCgpKTtcbiAgICB0aGlzLmFkZExhYmVsKENTTGFiZWxLZXlzLkVOVl9USVRMRSwgZW52aXJvbm1lbnQuZ2V0VGl0bGUoKSk7XG4gICAgdGhpcy5hZGRMYWJlbChDU0xhYmVsS2V5cy5FTlZfUkVGRVJSRVIsIGVudmlyb25tZW50LmdldFJlZmVycmVyKCkpO1xuXG4gICAgLy8gaGlkZSBmaWxlIHBhdGhzIGluIGM3XG4gICAgaWYgKGVudmlyb25tZW50LmdldFVSTCgpLmluZGV4T2YoJ2ZpbGU6JywgMCkgPT09IC0xKSB7XG4gICAgICB0aGlzLmFkZExhYmVsKENTTGFiZWxLZXlzLkVOVl9VUkwsIGVudmlyb25tZW50LmdldFVSTCgpKTtcbiAgICB9XG5cbiAgICBpZiAoY29uZmlnW0NvbmZpZ0tleXMuRUNIT19UUkFDRV0pIHtcbiAgICAgIHRoaXMuc2V0VHJhY2VJZChjb25maWdbQ29uZmlnS2V5cy5FQ0hPX1RSQUNFXSk7XG4gICAgfVxuXG4gICAgb3JiQ29va2llc1BvbGljeSA9IEVudmlyb25tZW50LmdldE9yYkNvb2tpZXNQb2xpY3koKTtcbiAgICBpZiAob3JiQ29va2llc1BvbGljeSkge1xuICAgICAgY29va2llUG9saWN5ID1cbiAgICAgICAgJ2FkJyArIChvcmJDb29raWVzUG9saWN5LmFkcyA/ICcxJyA6ICcwJykgK1xuICAgICAgICAncHMnICsgKG9yYkNvb2tpZXNQb2xpY3kucGVyc29uYWxpc2F0aW9uID8gJzEnIDogJzAnKSArXG4gICAgICAgICdwZicgKyAob3JiQ29va2llc1BvbGljeS5wZXJmb3JtYW5jZSA/ICcxJyA6ICcwJyk7XG5cbiAgICAgIHRoaXMuYWRkTGFiZWwoQ1NMYWJlbEtleXMuQ09PS0lFX1BPTElDWSwgY29va2llUG9saWN5KTtcbiAgICB9XG5cbiAgICAvLyBEZWZhdWx0IGlzIHRvIHNlbmQgaW52YWxpZC1kYXRhIGZvciBzaXRlXG4gICAgdGhpcy5hZGRMYWJlbChFbnVtcy5NYW5hZ2VkTGFiZWxzLkJCQ19TSVRFLCBJTlZBTElEX0RBVEFfU1RSSU5HKTtcblxuICAgIHRoaXMuX21lZGlhSXNMaXZlID0gbnVsbDtcblxuICAgIGlmIChjb25maWcgJiYgY29uZmlnW0NvbmZpZ0tleXMuRUNIT19FTkFCTEVEXSA9PT0gZmFsc2UpIHtcbiAgICAgIHRoaXMuX2lzRW5hYmxlZCA9IGZhbHNlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9pc0VuYWJsZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIENvbVNjb3JlRGVsZWdhdGUucHJvdG90eXBlLnN0YXJ0ID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMuX2lzRW5hYmxlZCAmJiAhdGhpcy5faGFzU3RhcnRlZEFwcFRhZykge1xuICAgICAgdGhpcy5hcHBUYWcuc3RhcnQoKTtcbiAgICAgIHRoaXMuX2hhc1N0YXJ0ZWRBcHBUYWcgPSB0cnVlO1xuICAgIH1cbiAgfTtcblxuICBDb21TY29yZURlbGVnYXRlLnByb3RvdHlwZS5lbmFibGUgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoIXRoaXMuX2lzRW5hYmxlZCkge1xuICAgICAgdGhpcy5faXNFbmFibGVkID0gdHJ1ZTtcbiAgICB9XG4gIH07XG5cbiAgQ29tU2NvcmVEZWxlZ2F0ZS5wcm90b3R5cGUuZGlzYWJsZSA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLl9pc0VuYWJsZWQpIHtcbiAgICAgIHRoaXMuY2xlYXJNZWRpYSgpO1xuICAgICAgdGhpcy5faXNFbmFibGVkID0gZmFsc2U7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBkZXZpY2UgSUQgdGhhdCB3YXMgdXNlZCB0byByZXBvcnQgdG8gQ29tU2NvcmUuXG4gICAqXG4gICAqIEByZXR1cm5zIHtTdHJpbmd8bnVsbH1cbiAgICovXG4gIENvbVNjb3JlRGVsZWdhdGUucHJvdG90eXBlLmdldERldmljZUlkID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX2RldmljZUlkO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge01lZGlhfSBtZWRpYVxuICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBDb21TY29yZURlbGVnYXRlLnByb3RvdHlwZS5fYnVpbGRTdHJlYW1TZW5zZUNsaXAgPSBmdW5jdGlvbihtZWRpYSkge1xuXG4gICAgdmFyIGk7XG4gICAgdmFyIGNsaXAgPSBfYnVpbGRTdHJlYW1TZW5zZUNsaXAobWVkaWEpO1xuICAgIHZhciBjbGlwUGlkID0gY2xpcFtDU0xhYmVsS2V5cy5NRURJQV9QSURdO1xuXG4gICAgZm9yIChpID0gMDsgaSA8IHRoaXMuX2NsaXBzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAodGhpcy5fY2xpcHNbaV1bQ1NMYWJlbEtleXMuTUVESUFfUElEXSA9PT0gY2xpcFBpZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY2xpcHNbaV07XG4gICAgICB9XG4gICAgfVxuXG4gICAgY2xpcFtDU0xhYmVsS2V5cy5NRURJQV9DTElQX05VTUJFUl0gPSB0aGlzLl9jbGlwcy5sZW5ndGggKyAxO1xuICAgIHRoaXMuX2NsaXBzLnB1c2goY2xpcCk7XG5cbiAgICByZXR1cm4gY2xpcDtcbiAgfTtcblxuICBDb21TY29yZURlbGVnYXRlLnByb3RvdHlwZS5zZXRUcmFjZUlkID0gZnVuY3Rpb24oaWQpIHtcbiAgICB0aGlzLmFkZExhYmVsKENvbmZpZ0tleXMuRUNIT19UUkFDRSwgaWQpO1xuICB9O1xuXG4gIENvbVNjb3JlRGVsZWdhdGUuX2NyZWF0ZVNzY0hlbHBlciA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IFNTQ0hlbHBlcihvcHRpb25zIHx8IHt9KTtcbiAgfTtcblxuICBDb21TY29yZURlbGVnYXRlLlN0cmVhbVNlbnNlID0gcmVxdWlyZSgnc3RyZWFtc2Vuc2UnKTtcbiAgQ29tU2NvcmVEZWxlZ2F0ZS5BcHBUYWcgPSByZXF1aXJlKCdhcHAtdGFnJyk7XG5cbiAgLypcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqIEFwcGxpY2F0aW9uIFN0YXRlIE1ldGhvZHNcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqL1xuXG4gIC8vIHByb2R1Y2VzIGEgc3RyaW5nIG91dCBvZiBhIGxpc3Qgb2YgbGFiZWxzIHRoYXQgaXMgZWFzeSB0byBwYXNzIGEgcmVnZXhcbiAgLy8gcGF0dGVybiBvdmVyIGUuZy4gZ2l2ZW4gdGhlIGxhYmVscyBbJ2ZvbycsICdiYXInXSB0aGUgc3RyaW5nIHdpbGwgYmVcbiAgLy8gPGZvbz48YmFyPlxuICB2YXIgc3NjRXhjbHVkZWRTdHJpbmcgPSAnPCcgKyBzc2NFeGNsdWRlZExhYmVscy5qb2luKCc+PCcpICsgJz4nO1xuXG4gIC8qKlxuICAgKiBDaGVjayB0byBzZWUgaWYgYSBsYWJlbCBzaG91bGQgYmUgZXhjbHVkZWQgZnJvbSBiZWluZyBzZXQuIFRoaXMgd2lsbCBjaGVja1xuICAgKiBmb3IgbGFiZWxzIHRoYXQgc2hvdWxkIG5vdCBiZSBzZW50IHRvIGNvbXNjb3JlIHdoZW4gc3NjIGlzIGVuYWJsZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBsYWJlbFxuICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgKi9cbiAgQ29tU2NvcmVEZWxlZ2F0ZS5wcm90b3R5cGUuX2lzRXhjbHVkZWRMYWJlbCA9IGZ1bmN0aW9uKGxhYmVsKSB7XG4gICAgaWYgKHRoaXMudXNlU3NjID09PSB0cnVlKSB7XG4gICAgICByZXR1cm4gISFzc2NFeGNsdWRlZFN0cmluZy5tYXRjaChuZXcgUmVnRXhwKCc8JyArIGxhYmVsICsgJz4nKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTZXQgbXVsdGlwbGUgcGVyc2lzdGVudCBsYWJlbHMuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBsYWJlbHNcbiAgICovXG4gIENvbVNjb3JlRGVsZWdhdGUucHJvdG90eXBlLmFkZExhYmVscyA9IGZ1bmN0aW9uKGxhYmVscykge1xuXG4gICAgaWYgKHR5cGVvZiBsYWJlbHMgPT09ICdvYmplY3QnKSB7XG4gICAgICBmb3IgKHZhciBsYWJlbCBpbiBsYWJlbHMpIHtcbiAgICAgICAgaWYgKGxhYmVscy5oYXNPd25Qcm9wZXJ0eShsYWJlbCkpIHtcbiAgICAgICAgICB0aGlzLmFkZExhYmVsKGxhYmVsLCBsYWJlbHNbbGFiZWxdKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICB9O1xuXG4gIC8qKlxuICAgKiBTZXQgYSBwZXJzaXN0ZW50IGxhYmVsXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBsYWJlbFxuICAgKiBAcGFyYW0geyp9IHZhbHVlXG4gICAqL1xuICBDb21TY29yZURlbGVnYXRlLnByb3RvdHlwZS5hZGRMYWJlbCA9IGZ1bmN0aW9uKGxhYmVsLCB2YWx1ZSkge1xuXG4gICAgaWYgKHRoaXMuX2lzRXhjbHVkZWRMYWJlbChsYWJlbCkgPT09IHRydWUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLmFwcFRhZy5zZXRMYWJlbChsYWJlbCwgdmFsdWUpO1xuXG4gICAgLy8gaXMgdGhpcyBsYWJlbCBhbiBhc3NldCBsYWJlbD9cbiAgICBpZiAoQVNTRVRfTEFCRUxTLmluZGV4T2YobGFiZWwpID4gLTEpIHtcbiAgICAgIC8vIHNldCBsYWJlbCBvbiBzdHJlYW1zZW5zZSBhc3NldCBpZiBpdCdzIGNyZWF0ZWQsIG9yIHNhdmUgZm9yIGxhdGVyXG4gICAgICBpZiAodGhpcy5faGFzQ3JlYXRlZEFzc2V0KSB7XG4gICAgICAgIHRoaXMuc3MuZ2V0UGxheWJhY2tTZXNzaW9uKCkuZ2V0QXNzZXQoKS5zZXRMYWJlbChsYWJlbCwgdmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fc3RvcmVkQXNzZXRMYWJlbHNbbGFiZWxdID0gdmFsdWU7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIG5vdCBhbiBhc3NldCBsYWJlbCBzbyBzZXQgaXQgaW4gdGhlIHVzdWFsIHdheVxuICAgICAgdGhpcy5zcy5zZXRMYWJlbChsYWJlbCwgdmFsdWUpO1xuICAgIH1cblxuICB9O1xuXG4gIENvbVNjb3JlRGVsZWdhdGUucHJvdG90eXBlLmFkZE1hbmFnZWRMYWJlbCA9IGZ1bmN0aW9uKGxhYmVsLCB2YWx1ZSkge1xuICAgIHZhciBsYWJlbElzVmFsaWQgPSBMYWJlbFZhbGlkYXRvci5pc1ZhbGlkTWFuYWdlZExhYmVsKGxhYmVsLCB2YWx1ZSk7XG4gICAgdmFyIHZhbHVlVG9Vc2UgPSBsYWJlbElzVmFsaWQgPyB2YWx1ZSA6IElOVkFMSURfREFUQV9TVFJJTkc7XG5cbiAgICBmb3IgKHZhciBrZXkgaW4gRW51bXMuTWFuYWdlZExhYmVscykge1xuICAgICAgaWYgKEVudW1zLk1hbmFnZWRMYWJlbHNba2V5XSA9PT0gbGFiZWwpIHtcbiAgICAgICAgdGhpcy5hZGRMYWJlbChsYWJlbCwgdmFsdWVUb1VzZSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIENvbVNjb3JlRGVsZWdhdGUucHJvdG90eXBlLnJlbW92ZUxhYmVscyA9IGZ1bmN0aW9uKGtleXNBcnJheSkge1xuICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBrZXlzQXJyYXkubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIHRoaXMucmVtb3ZlTGFiZWwoa2V5c0FycmF5W2ldKTtcbiAgICB9XG4gIH07XG5cbiAgQ29tU2NvcmVEZWxlZ2F0ZS5wcm90b3R5cGUucmVtb3ZlTGFiZWwgPSBmdW5jdGlvbihsYWJlbCkge1xuICAgIHRoaXMuYXBwVGFnLnNldExhYmVsKGxhYmVsLCBudWxsKTtcblxuICAgIC8vIGlzIHRoaXMgbGFiZWwgYW4gYXNzZXQgbGFiZWw/XG4gICAgaWYgKEFTU0VUX0xBQkVMUy5pbmRleE9mKGxhYmVsKSA+IC0xKSB7XG4gICAgICAvLyBzZXQgbGFiZWwgb24gc3RyZWFtc2Vuc2UgYXNzZXQgaWYgaXQncyBjcmVhdGVkLCBvciBzYXZlIGZvciBsYXRlclxuICAgICAgaWYgKHRoaXMuX2hhc0NyZWF0ZWRBc3NldCkge1xuICAgICAgICB0aGlzLnNzLmdldFBsYXliYWNrU2Vzc2lvbigpLmdldEFzc2V0KCkuc2V0TGFiZWwobGFiZWwsIG51bGwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGVsZXRlIHRoaXMuX3N0b3JlZEFzc2V0TGFiZWxzW2xhYmVsXTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gbm90IGFuIGFzc2V0IGxhYmVsIHNvIHNldCBpdCBpbiB0aGUgdXN1YWwgd2F5XG4gICAgICB0aGlzLnNzLnNldExhYmVsKGxhYmVsLCBudWxsKTtcbiAgICB9XG5cbiAgfTtcblxuICBDb21TY29yZURlbGVnYXRlLnByb3RvdHlwZS5zZXRMb2dnZWRJblRvQkJDSWQgPSBmdW5jdGlvbihoaWQpIHtcbiAgICB0aGlzLmFkZExhYmVsKENTTGFiZWxLZXlzLkJCQ19JRF9MT0dHRURfSU4sICcxJyk7XG4gICAgaWYgKGhpZCAmJiBoaWQubGVuZ3RoID4gMCkge1xuICAgICAgdGhpcy5hZGRNYW5hZ2VkTGFiZWwoRW51bXMuTWFuYWdlZExhYmVscy5CQkNfSEFTSEVEX0lELCBoaWQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJlbW92ZUxhYmVsKEVudW1zLk1hbmFnZWRMYWJlbHMuQkJDX0hBU0hFRF9JRCk7XG4gICAgfVxuICB9O1xuXG4gIENvbVNjb3JlRGVsZWdhdGUucHJvdG90eXBlLnNldExvZ2dlZE91dE9mQkJDSWQgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnJlbW92ZUxhYmVscyhbXG4gICAgICBDU0xhYmVsS2V5cy5CQkNfSURfTE9HR0VEX0lOLFxuICAgICAgRW51bXMuTWFuYWdlZExhYmVscy5CQkNfSEFTSEVEX0lEXG4gICAgXSk7XG4gIH07XG5cbiAgQ29tU2NvcmVEZWxlZ2F0ZS5wcm90b3R5cGUuc2V0QXBwVmVyc2lvbiA9IGZ1bmN0aW9uICh2ZXJzaW9uKSB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLmFwcFRhZy5zZXRBcHBWZXJzaW9uID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0aGlzLmFwcFRhZy5zZXRBcHBWZXJzaW9uKHZlcnNpb24pO1xuICAgIH0gZWxzZSBpZiAodmVyc2lvbiAmJiB0aGlzLl9pc0FwcCkge1xuICAgICAgdGhpcy5hZGRMYWJlbChDU0xhYmVsS2V5cy5BUFBfVkVSU0lPTiwgdmVyc2lvbi50b1N0cmluZygpKTtcbiAgICB9IGVsc2UgaWYgKHZlcnNpb24pIHtcbiAgICAgIHRoaXMuYWRkTGFiZWwoQ1NMYWJlbEtleXMuQkJDX0FQUExJQ0FUSU9OX1ZFUlNJT04sIHZlcnNpb24udG9TdHJpbmcoKSk7XG4gICAgfVxuICB9O1xuXG4gIENvbVNjb3JlRGVsZWdhdGUucHJvdG90eXBlLnNldENvdW50ZXJOYW1lID0gZnVuY3Rpb24obmFtZSkge1xuICAgIGlmICghdGhpcy5faXNFbmFibGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5hZGRMYWJlbChDU0xhYmVsS2V5cy5CQkNfQ09VTlRFUl9OQU1FLCBuYW1lKTtcbiAgfTtcblxuICBDb21TY29yZURlbGVnYXRlLnByb3RvdHlwZS5zZXREZXN0aW5hdGlvbiA9IGZ1bmN0aW9uKGRlc3RpbmF0aW9uSWQpIHtcbiAgICB0aGlzLmFkZExhYmVsKENTTGFiZWxLZXlzLkRFU1RJTkFUSU9OLCBkZXN0aW5hdGlvbklkKTtcbiAgfTtcblxuICBDb21TY29yZURlbGVnYXRlLnByb3RvdHlwZS5zZXRQcm9kdWNlciA9IGZ1bmN0aW9uKHByb2R1Y2VySWQpIHtcbiAgICB0aGlzLmFkZExhYmVsKENTTGFiZWxLZXlzLlBST0RVQ0VSLCBwcm9kdWNlcklkKTtcbiAgfTtcblxuICBDb21TY29yZURlbGVnYXRlLnByb3RvdHlwZS5zZXRDb250ZW50TGFuZ3VhZ2UgPSBmdW5jdGlvbihsYW5ndWFnZSkge1xuICAgIHRoaXMuYWRkTGFiZWwoQ1NMYWJlbEtleXMuQkJDX0xBTkdVQUdFLCBsYW5ndWFnZSk7XG4gIH07XG5cbiAgQ29tU2NvcmVEZWxlZ2F0ZS5wcm90b3R5cGUuc2V0Q2FjaGVNb2RlID0gZnVuY3Rpb24obW9kZSkge1xuICAgIGlmICghdGhpcy5faXNVc2luZ0NvbXNjb3JlT1RUTGlicmFyeSB8fCBtb2RlID09PSB0aGlzLl9jYWNoZU1vZGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBzd2l0Y2ggKG1vZGUpIHtcbiAgICAgIGNhc2UgRW51bXMuRWNob0NhY2hlTW9kZS5BTEw6XG4gICAgICAgIHRoaXMuYXBwVGFnLmFsbG93TGl2ZVRyYW5zbWlzc2lvbih0aGlzLmFwcFRhZy5UcmFuc21pc3Npb25Nb2RlLk5FVkVSKTtcbiAgICAgICAgdGhpcy5hcHBUYWcuYWxsb3dPZmZsaW5lVHJhbnNtaXNzaW9uKHRoaXMuYXBwVGFnLlRyYW5zbWlzc2lvbk1vZGUuTkVWRVIpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgRW51bXMuRWNob0NhY2hlTW9kZS5PRkZMSU5FOlxuICAgICAgICB0aGlzLmFwcFRhZy5hbGxvd0xpdmVUcmFuc21pc3Npb24odGhpcy5hcHBUYWcuVHJhbnNtaXNzaW9uTW9kZS5ERUZBVUxUKTtcbiAgICAgICAgdGhpcy5hcHBUYWcuYWxsb3dPZmZsaW5lVHJhbnNtaXNzaW9uKHRoaXMuYXBwVGFnLlRyYW5zbWlzc2lvbk1vZGUuREVGQVVMVCk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIHRoaXMuX2NhY2hlTW9kZSA9IG1vZGU7XG4gIH07XG5cbiAgQ29tU2NvcmVEZWxlZ2F0ZS5wcm90b3R5cGUuZmx1c2hDYWNoZSA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICghdGhpcy5faXNVc2luZ0NvbXNjb3JlT1RUTGlicmFyeSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuYXBwVGFnLmZsdXNoQ2FjaGUoKTtcbiAgfTtcblxuICBDb21TY29yZURlbGVnYXRlLnByb3RvdHlwZS5jbGVhckNhY2hlID0gZHVtbXk7XG5cbiAgLypcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqIEJhc2ljIEFuYWx5dGljcyBNZXRob2RzXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKi9cblxuICBDb21TY29yZURlbGVnYXRlLnByb3RvdHlwZS52aWV3RXZlbnQgPSBmdW5jdGlvbihjb3VudGVyTmFtZSwgZXZlbnRMYWJlbHMpIHtcbiAgICBpZiAoIXRoaXMuX2V2ZW50c0VuYWJsZWQoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8qXG4gICAgICogU2V0IGNvdW50ZXJuYW1lIGFzIGEgcGVyc2lzdGVudCBsYWJlbCBzbyBpdCdzIGluY2x1ZGVkIG9uIGFsbFxuICAgICAqIHN1YnNlcXVlbnQgZXZlbnRzLlxuICAgICAqL1xuICAgIHRoaXMuYWRkTGFiZWwoQ1NMYWJlbEtleXMuQkJDX0NPVU5URVJfTkFNRSwgY291bnRlck5hbWUpO1xuICAgIHZhciBjbG9uZWRMYWJlbHMgPSBVdGlscy5leHRlbmQoXG4gICAgICBldmVudExhYmVscywgdHJ1ZSxcbiAgICAgIENTTGFiZWxLZXlzLkVDSE9fRVZFTlRfTkFNRSwgJ3ZpZXcnXG4gICAgKTtcblxuICAgIGNsb25lZExhYmVscy5uYW1lID0gY291bnRlck5hbWU7XG4gICAgdGhpcy5hcHBUYWcudmlldyhjbG9uZWRMYWJlbHMpO1xuICB9O1xuXG4gIENvbVNjb3JlRGVsZWdhdGUucHJvdG90eXBlLmVycm9yRXZlbnQgPSBkdW1teTtcblxuICBDb21TY29yZURlbGVnYXRlLnByb3RvdHlwZS51c2VyQWN0aW9uRXZlbnQgPVxuICBmdW5jdGlvbihhY3Rpb25UeXBlLCBhY3Rpb25OYW1lLCBldmVudExhYmVscykge1xuICAgIGlmICghdGhpcy5fZXZlbnRzRW5hYmxlZCgpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGNsb25lZExhYmVscyA9IFV0aWxzLmV4dGVuZChcbiAgICAgIGV2ZW50TGFiZWxzLCB0cnVlLFxuICAgICAgQ1NMYWJlbEtleXMuVVNFUl9BQ1RJT05fVFlQRSwgYWN0aW9uVHlwZSxcbiAgICAgIENTTGFiZWxLZXlzLlVTRVJfQUNUSU9OX05BTUUsIGFjdGlvbk5hbWUsXG4gICAgICBDU0xhYmVsS2V5cy5FQ0hPX0VWRU5UX05BTUUsICd1c2VyQWN0J1xuICAgICk7XG5cbiAgICB0aGlzLmFwcFRhZy5oaWRkZW4oY2xvbmVkTGFiZWxzKTtcbiAgfTtcblxuICAvKlxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICogTWVkaWEgUGxheWVyIEF0dHJpYnV0ZXNcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqL1xuXG4gIC8qKlxuICAgKiBNZWRpYSBwbGF5ZXIgaW5mb3JtYXRpb24gY29udmVydGVkIHRvIEFwcGxpY2F0aW9uIGkuZS4gUGVyc2lzdGVudCBsYWJlbHNcbiAgICogb24gU3RyZWFtIFNlbnNlLiBJbmNsdWRlZCBpbiBhbGwgbWVhc3VyZW1lbnQgZXZlbnRzIHNlbnRcbiAgICovXG4gIENvbVNjb3JlRGVsZWdhdGUucHJvdG90eXBlLnNldFBsYXllck5hbWUgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgdGhpcy5hZGRMYWJlbChDU0xhYmVsS2V5cy5QTEFZRVJfTkFNRSwgbmFtZSk7XG4gIH07XG5cbiAgQ29tU2NvcmVEZWxlZ2F0ZS5wcm90b3R5cGUuc2V0UGxheWVyVmVyc2lvbiA9IGZ1bmN0aW9uKHZlcnNpb24pIHtcbiAgICB0aGlzLmFkZExhYmVsKENTTGFiZWxLZXlzLlBMQVlFUl9WRVJTSU9OLCB2ZXJzaW9uKTtcbiAgfTtcblxuICBDb21TY29yZURlbGVnYXRlLnByb3RvdHlwZS5zZXRQbGF5ZXJJc1BvcHBlZCA9IGZ1bmN0aW9uKGlzUG9wcGVkKSB7XG4gICAgdGhpcy5zcy5zZXRMYWJlbChDU0xhYmVsS2V5cy5QTEFZRVJfUE9QUEVELCBpc1BvcHBlZCA/IDEgOiAwKTtcbiAgfTtcblxuICBDb21TY29yZURlbGVnYXRlLnByb3RvdHlwZS5zZXRQbGF5ZXJXaW5kb3dTdGF0ZSA9IGZ1bmN0aW9uKHdpbmRvd1N0YXRlKSB7XG4gICAgdGhpcy5zcy5zZXRMYWJlbChDU0xhYmVsS2V5cy5QTEFZRVJfV0lORE9XX1NUQVRFLCB3aW5kb3dTdGF0ZSk7XG4gIH07XG5cbiAgQ29tU2NvcmVEZWxlZ2F0ZS5wcm90b3R5cGUuc2V0UGxheWVyVm9sdW1lID0gZnVuY3Rpb24odm9sdW1lKSB7XG4gICAgdGhpcy5zcy5zZXRMYWJlbChDU0xhYmVsS2V5cy5QTEFZRVJfVk9MVU1FLCB2b2x1bWUpO1xuICB9O1xuXG4gIENvbVNjb3JlRGVsZWdhdGUucHJvdG90eXBlLnNldFBsYXllcklzU3VidGl0bGVkID0gZnVuY3Rpb24oaXNTdWJ0aXRsZWQpIHtcbiAgICB0aGlzLnNzLnNldExhYmVsKENTTGFiZWxLZXlzLlBMQVlFUl9TVUJUSVRMRUQsIGlzU3VidGl0bGVkID8gMSA6IDApO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBicm9rZXIuXG4gICAqXG4gICAqIFRoaXMgbWV0aG9kIHNob3VsZCBvbmx5IGJlIGNhbGxlZCBieSB0aGUgRWNob0NsaWVudCBjbGFzcyB0b1xuICAgKiBlbnN1cmUgdGhlIGludGVyZmFjZSBpcyBpbXBsZW1lbnRlZC5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IGJyb2tlciBBbiBvYmplY3QgY29uZm9ybWluZyB0byB0aGUgYnJva2VyIGludGVyZmFjZS5cbiAgICpcbiAgICogQHJldHVybiB7Q29tU2NvcmVEZWxlZ2F0ZX1cbiAgICovXG4gIENvbVNjb3JlRGVsZWdhdGUucHJvdG90eXBlLnNldEJyb2tlciA9IGZ1bmN0aW9uKGJyb2tlcikge1xuICAgIHRoaXMuX2Jyb2tlciA9IGJyb2tlcjtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKlxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICogTWVkaWEgQXR0cmlidXRlc1xuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICovXG4gIENvbVNjb3JlRGVsZWdhdGUucHJvdG90eXBlLnNldE1lZGlhID0gZnVuY3Rpb24obWVkaWEpIHtcbiAgICBpZiAoIXRoaXMuX2V2ZW50c0VuYWJsZWQoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuY2xlYXJNZWRpYSgpO1xuXG4gICAgaWYgKG1lZGlhKSB7XG4gICAgICB0aGlzLm1lZGlhID0gbWVkaWE7XG4gICAgICB2YXIgY2xpcCA9IHRoaXMuX2J1aWxkU3RyZWFtU2Vuc2VDbGlwKHRoaXMubWVkaWEpO1xuICAgICAgdmFyIHBsYXlMaXN0ID0gX2J1aWxkU3RyZWFtU2Vuc2VQbGF5bGlzdCh0aGlzLm1lZGlhKTtcbiAgICAgIHRoaXMuX21lZGlhSXNMaXZlID0gbWVkaWEuaXNPbkRlbWFuZCgpID8gZmFsc2UgOiB0cnVlO1xuICAgICAgdGhpcy5zcy5jcmVhdGVQbGF5YmFja1Nlc3Npb24ocGxheUxpc3QpO1xuXG4gICAgICAvLyBQdXQgdGhlIGNsaXAgb24gU3RyZWFtU2Vuc2VcbiAgICAgIGlmICh0aGlzLnNzLmdldFBsYXliYWNrU2Vzc2lvbigpKSB7XG4gICAgICAgIHRoaXMuc3MuZ2V0UGxheWJhY2tTZXNzaW9uKCkuc2V0QXNzZXQoY2xpcCk7XG4gICAgICAgIHRoaXMuX2hhc0NyZWF0ZWRBc3NldCA9IHRydWU7XG5cbiAgICAgICAgLy8gYWRkIHByZXZpb3VzbHkgc3RvcmVkIGxhYmVsc1xuICAgICAgICB0aGlzLnNzLmdldFBsYXliYWNrU2Vzc2lvbigpLmdldEFzc2V0KCkuc2V0TGFiZWxzKHRoaXMuX3N0b3JlZEFzc2V0TGFiZWxzKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgfTtcblxuICAvKipcbiAgICogSGFuZGxlcyBhbiB1cGRhdGVkIGNsaXAgZnJvbSB0aGUgTGl2ZUJyb2tlclxuICAgKlxuICAgKiBAcGFyYW0ge01lZGlhfSBuZXdNZWRpYVxuICAgKiBAcGFyYW0ge051bWJlcn0gbmV3UG9zaXRpb25cbiAgICogQHBhcmFtIHtOdW1iZXJ9IG9sZFBvc2l0aW9uXG4gICAqL1xuICBDb21TY29yZURlbGVnYXRlLnByb3RvdHlwZS5saXZlTWVkaWFVcGRhdGUgPSBmdW5jdGlvbihcbiAgICBuZXdNZWRpYSxcbiAgICBuZXdQb3NpdGlvbixcbiAgICBvbGRQb3NpdGlvblxuICApIHtcblxuICAgIFV0aWxzLmFzc2VydChcbiAgICAgIHR5cGVvZiBuZXdQb3NpdGlvbiA9PT0gJ251bWJlcicsXG4gICAgICAnbmV3UG9zaXRpb24gbXVzdCBiZSBhIG51bWJlcidcbiAgICApO1xuXG4gICAgVXRpbHMuYXNzZXJ0KFxuICAgICAgdHlwZW9mIG9sZFBvc2l0aW9uID09PSAnbnVtYmVyJyxcbiAgICAgICdvbGRQb3NpdGlvbiBtdXN0IGJlIGEgbnVtYmVyJ1xuICAgICk7XG5cbiAgICB0aGlzLm1lZGlhID0gbmV3TWVkaWE7XG5cbiAgICB2YXIgY2xpcCA9IHRoaXMuX2J1aWxkU3RyZWFtU2Vuc2VDbGlwKG5ld01lZGlhKTtcblxuICAgIC8vIHN0b3AgcGxheWJhY2tcbiAgICB0aGlzLnNzLm5vdGlmeUVuZChvbGRQb3NpdGlvbik7XG4gICAgdGhpcy5zcy5nZXRQbGF5YmFja1Nlc3Npb24oKS5zZXRBc3NldChjbGlwKTtcblxuICAgIC8vIGFkZCBwcmV2aW91c2x5IHN0b3JlZCBsYWJlbHNcbiAgICB0aGlzLnNzLmdldFBsYXliYWNrU2Vzc2lvbigpLmdldEFzc2V0KCkuc2V0TGFiZWxzKHRoaXMuX3N0b3JlZEFzc2V0TGFiZWxzKTtcbiAgICB0aGlzLnNzLm5vdGlmeVBsYXkobmV3UG9zaXRpb24pO1xuICB9O1xuXG4gIENvbVNjb3JlRGVsZWdhdGUucHJvdG90eXBlLmxpdmVFbnJpY2htZW50RmFpbGVkID0gZHVtbXk7XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSB0aGUgbWVkaWEgbGVuZ3RoIG9mIHRoZSBjbGlwIGFuZCBwbGF5bGlzdC5cbiAgICpcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGxlbmd0aFxuICAgKi9cbiAgQ29tU2NvcmVEZWxlZ2F0ZS5wcm90b3R5cGUuc2V0TWVkaWFMZW5ndGggPSBmdW5jdGlvbihsZW5ndGgpIHtcbiAgICBpZiAoIXRoaXMuX2V2ZW50c0VuYWJsZWQoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLm1lZGlhID09IG51bGwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIWxlbmd0aCB8fCBsZW5ndGggPCAwKSB7XG4gICAgICBsZW5ndGggPSAwO1xuICAgIH1cblxuICAgIHRoaXMuc3MuZ2V0UGxheWJhY2tTZXNzaW9uKCkuZ2V0QXNzZXQoKS5zZXRMYWJlbChDU0xhYmVsS2V5cy5NRURJQV9MRU5HVEgsIGxlbmd0aCk7XG4gIH07XG5cbiAgLypcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqIE1lZGlhIEV2ZW50c1xuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICovXG4gIC8qXG4gICAqIFVzZXMgdGhlIGFkZExhYmVsIG1ldGhvZCB0byBhZGQgdG8gYm90aCBhdiBhbmQgbm9uLWF2IGV2ZW50c1xuICAgKi9cbiAgQ29tU2NvcmVEZWxlZ2F0ZS5wcm90b3R5cGUuYXZQbGF5RXZlbnQgPSBmdW5jdGlvbihwb3NpdGlvbiwgZXZlbnRMYWJlbHMpIHsgLy8ganNoaW50IGlnbm9yZTpsaW5lXG4gICAgaWYgKCF0aGlzLl9ldmVudHNFbmFibGVkKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgY2xvbmVkTGFiZWxzID0gVXRpbHMuZXh0ZW5kKFxuICAgICAgZXZlbnRMYWJlbHMsIHRydWUsXG4gICAgICBDU0xhYmVsS2V5cy5FQ0hPX0VWRU5UX05BTUUsICdhdlBsYXknXG4gICAgKTtcblxuICAgIGlmICh0aGlzLm1lZGlhLmlzTGl2ZSgpICYmIHRoaXMubWVkaWEuaXNFc3NFbnJpY2hlZCgpID09PSBmYWxzZSkge1xuICAgICAgcG9zaXRpb24gPSAwO1xuICAgIH1cblxuICAgIHRoaXMuc3Mubm90aWZ5UGxheShjbG9uZWRMYWJlbHMsIHBvc2l0aW9uKTtcbiAgfTtcblxuICBDb21TY29yZURlbGVnYXRlLnByb3RvdHlwZS5hdlBhdXNlRXZlbnQgPSBmdW5jdGlvbihwb3NpdGlvbiwgZXZlbnRMYWJlbHMpIHtcbiAgICBpZiAoIXRoaXMuX2V2ZW50c0VuYWJsZWQoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBjbG9uZWRMYWJlbHMgPSBVdGlscy5leHRlbmQoXG4gICAgICBldmVudExhYmVscywgdHJ1ZSxcbiAgICAgIENTTGFiZWxLZXlzLkVDSE9fRVZFTlRfTkFNRSwgJ2F2UGF1c2UnXG4gICAgKTtcbiAgICB2YXIgaXNMaXZlID0gdGhpcy5tZWRpYS5pc0xpdmUoKTtcblxuICAgIGlmIChpc0xpdmUgJiYgdGhpcy5tZWRpYS5pc0Vzc0VucmljaGVkKCkgPT09IGZhbHNlKSB7XG4gICAgICBwb3NpdGlvbiA9IDA7XG4gICAgfSBlbHNlIGlmICghaXNMaXZlICYmIHRoaXMuX2Jyb2tlciAmJiBwb3NpdGlvbiA9PT0gMCkge1xuICAgICAgcG9zaXRpb24gPSB0aGlzLl9icm9rZXIuZ2V0Q3VycmVudEludGVydmFsTWF4UG9zaXRpb24oKTtcbiAgICB9XG5cbiAgICB0aGlzLnNzLm5vdGlmeVBhdXNlKGNsb25lZExhYmVscywgcG9zaXRpb24pO1xuICB9O1xuXG4gIENvbVNjb3JlRGVsZWdhdGUucHJvdG90eXBlLmF2QnVmZmVyRXZlbnQgPSBmdW5jdGlvbihwb3NpdGlvbiwgZXZlbnRMYWJlbHMpIHsvLyBqc2hpbnQgaWdub3JlOmxpbmVcbiAgICBpZiAoIXRoaXMuX2V2ZW50c0VuYWJsZWQoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLm1lZGlhLmlzTGl2ZSgpICYmIHRoaXMubWVkaWEuaXNFc3NFbnJpY2hlZCgpID09PSBmYWxzZSkge1xuICAgICAgcG9zaXRpb24gPSAwO1xuICAgIH1cblxuICAgIHRoaXMuc3Mubm90aWZ5QnVmZmVyU3RhcnQocG9zaXRpb24pO1xuICB9O1xuXG4gIENvbVNjb3JlRGVsZWdhdGUucHJvdG90eXBlLmF2RW5kRXZlbnQgPSBmdW5jdGlvbihwb3NpdGlvbiwgZXZlbnRMYWJlbHMpIHtcbiAgICBpZiAoIXRoaXMuX2V2ZW50c0VuYWJsZWQoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBjbG9uZWRMYWJlbHMgPSBVdGlscy5leHRlbmQoXG4gICAgICBldmVudExhYmVscywgdHJ1ZSxcbiAgICAgIENTTGFiZWxLZXlzLkVDSE9fRVZFTlRfTkFNRSwgJ2F2RW5kJyxcbiAgICAgIENTTGFiZWxLZXlzLlBMQVlMSVNUX0VORCwgMVxuICAgICk7XG5cbiAgICBpZiAodGhpcy5tZWRpYS5pc0xpdmUoKSAmJiB0aGlzLm1lZGlhLmlzRXNzRW5yaWNoZWQoKSA9PT0gZmFsc2UpIHtcbiAgICAgIHBvc2l0aW9uID0gMDtcbiAgICB9XG5cbiAgICB0aGlzLnNzLm5vdGlmeUVuZChwb3NpdGlvbiwgY2xvbmVkTGFiZWxzKTtcblxuICAgIHRoaXMuY2xlYXJNZWRpYSgpO1xuICB9O1xuXG4gIENvbVNjb3JlRGVsZWdhdGUucHJvdG90eXBlLmF2UmV3aW5kRXZlbnQgPSBmdW5jdGlvbihcbiAgICBwb3NpdGlvbiwgcmF0ZSwgZXZlbnRMYWJlbHNcbiAgKSB7XG4gICAgaWYgKCF0aGlzLl9ldmVudHNFbmFibGVkKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvKlxuICAgICAqIFdlIGFzc3VtZSByZXdpbmQsIGZmIGFuZCBzZWVrIGFyZSBhbHdheXMgdXNlciBpbnRlcmFjdGlvbiB0cmlnZ2VyZWQuXG4gICAgICogU2VlIFBnIDE4IFN0cmVhbVNlbnNlIGRvY3MuXG4gICAgICovXG4gICAgdmFyIGNsb25lZExhYmVscyA9IFV0aWxzLmV4dGVuZChcbiAgICAgIGV2ZW50TGFiZWxzLCB0cnVlLFxuICAgICAgQ1NMYWJlbEtleXMuRUNIT19FVkVOVF9OQU1FLCAnYXZSVycsXG4gICAgICBDU0xhYmVsS2V5cy5FVkVOVF9UUklHR0VSRURfQllfVVNFUiwgJ3Jld2luZCcsXG4gICAgICBDU0xhYmVsS2V5cy5SRVdJTkRfRkZfUkFURSwgcmF0ZVxuICAgICk7XG5cbiAgICBpZiAodGhpcy5tZWRpYS5pc0xpdmUoKSAmJiB0aGlzLm1lZGlhLmlzRXNzRW5yaWNoZWQoKSA9PT0gZmFsc2UpIHtcbiAgICAgIHBvc2l0aW9uID0gMDtcbiAgICB9XG5cbiAgICAvLyBDb21zY29yZSByZXF1aXJlIGEgcGF1c2Ugd2hlbiB0aGUgY29udGVudCBzdG9wcyBwbGF5aW5nXG4gICAgdGhpcy5zcy5ub3RpZnlQYXVzZShwb3NpdGlvbiwgY2xvbmVkTGFiZWxzKTtcbiAgfTtcblxuICBDb21TY29yZURlbGVnYXRlLnByb3RvdHlwZS5hdkZhc3RGb3J3YXJkRXZlbnQgPSBmdW5jdGlvbihcbiAgICBwb3NpdGlvbiwgcmF0ZSwgZXZlbnRMYWJlbHNcbiAgKSB7XG4gICAgaWYgKCF0aGlzLl9ldmVudHNFbmFibGVkKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvKlxuICAgICAqIFdlIGFzc3VtZSByZXdpbmQsIGZmIGFuZCBzZWVrIGFyZSBhbHdheXMgdXNlciBpbnRlcmFjdGlvbiB0cmlnZ2VyZWQuXG4gICAgICogU2VlIFBnIDE4IFN0cmVhbVNlbnNlIGRvY3MuXG4gICAgICovXG4gICAgdmFyIGNsb25lZExhYmVscyA9IFV0aWxzLmV4dGVuZChcbiAgICAgIGV2ZW50TGFiZWxzLCB0cnVlLFxuICAgICAgQ1NMYWJlbEtleXMuRUNIT19FVkVOVF9OQU1FLCAnYXZGRicsXG4gICAgICBDU0xhYmVsS2V5cy5FVkVOVF9UUklHR0VSRURfQllfVVNFUiwgJ2Zhc3Rmb3J3YXJkJyxcbiAgICAgIENTTGFiZWxLZXlzLlJFV0lORF9GRl9SQVRFLCByYXRlXG4gICAgKTtcblxuICAgIGlmICh0aGlzLm1lZGlhLmlzTGl2ZSgpICYmIHRoaXMubWVkaWEuaXNFc3NFbnJpY2hlZCgpID09PSBmYWxzZSkge1xuICAgICAgcG9zaXRpb24gPSAwO1xuICAgIH1cblxuICAgIC8vIENvbXNjb3JlIHJlcXVpcmUgYSBwYXVzZSB3aGVuIHRoZSBjb250ZW50IHN0b3BzIHBsYXlpbmdcbiAgICB0aGlzLnNzLm5vdGlmeVBhdXNlKGNsb25lZExhYmVscywgcG9zaXRpb24pO1xuICB9O1xuXG4gIENvbVNjb3JlRGVsZWdhdGUucHJvdG90eXBlLmF2U2Vla0V2ZW50ID0gZnVuY3Rpb24ocG9zaXRpb24sIGV2ZW50TGFiZWxzKSB7XG4gICAgaWYgKCF0aGlzLl9ldmVudHNFbmFibGVkKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvKlxuICAgICAqIFdlIGFzc3VtZSByZXdpbmQsIGZmIGFuZCBzZWVrIGFyZSBhbHdheXMgdXNlciBpbnRlcmFjdGlvbiB0cmlnZ2VyZWQuXG4gICAgICogU2VlIFBnIDE4IFN0cmVhbVNlbnNlIGRvY3MuXG4gICAgICovXG4gICAgdmFyIGNsb25lZExhYmVscyA9IFV0aWxzLmV4dGVuZChcbiAgICAgIGV2ZW50TGFiZWxzLCB0cnVlLFxuICAgICAgQ1NMYWJlbEtleXMuRUNIT19FVkVOVF9OQU1FLCAnYXZTZWVrJyxcbiAgICAgIENTTGFiZWxLZXlzLkVWRU5UX1RSSUdHRVJFRF9CWV9VU0VSLCAnc2VlaydcbiAgICApO1xuXG4gICAgaWYgKHRoaXMubWVkaWEuaXNMaXZlKCkgJiYgdGhpcy5tZWRpYS5pc0Vzc0VucmljaGVkKCkgPT09IGZhbHNlKSB7XG4gICAgICBwb3NpdGlvbiA9IDA7XG4gICAgfVxuXG4gICAgLy8gQ29tc2NvcmUgcmVxdWlyZSBhIHBhdXNlIHdoZW4gdGhlIGNvbnRlbnQgc3RvcHMgcGxheWluZ1xuICAgIHRoaXMuc3Mubm90aWZ5UGF1c2UocG9zaXRpb24sIGNsb25lZExhYmVscyk7XG4gIH07XG5cbiAgQ29tU2NvcmVEZWxlZ2F0ZS5wcm90b3R5cGUuYXZVc2VyQWN0aW9uRXZlbnQgPSBmdW5jdGlvbihcbiAgICAgIGFjdGlvblR5cGUsIGFjdGlvbk5hbWUsIHBvc2l0aW9uLCBldmVudExhYmVsc1xuICAgICkge1xuICAgIGlmICghdGhpcy5fZXZlbnRzRW5hYmxlZCgpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGNsb25lZExhYmVscyA9IFV0aWxzLmV4dGVuZChcbiAgICAgIGV2ZW50TGFiZWxzLCB0cnVlLFxuICAgICAgQ1NMYWJlbEtleXMuRUNIT19FVkVOVF9OQU1FLCAnYXZVc2VyQWN0JyxcbiAgICAgIENTTGFiZWxLZXlzLlNUUkVBTVNFTlNFX0NVU1RPTV9FVkVOVF9UWVBFLCBhY3Rpb25UeXBlLFxuICAgICAgQ1NMYWJlbEtleXMuVVNFUl9BQ1RJT05fVFlQRSwgYWN0aW9uVHlwZSxcbiAgICAgIENTTGFiZWxLZXlzLlVTRVJfQUNUSU9OX05BTUUsIGFjdGlvbk5hbWVcbiAgICApO1xuXG4gICAgaWYgKHRoaXMubWVkaWEuaXNMaXZlKCkgJiYgdGhpcy5tZWRpYS5pc0Vzc0VucmljaGVkKCkgPT09IGZhbHNlKSB7XG4gICAgICBwb3NpdGlvbiA9IDA7XG4gICAgfVxuXG4gICAgdGhpcy5zcy5ub3RpZnlDdXN0b21FdmVudChwb3NpdGlvbiwgY2xvbmVkTGFiZWxzKTtcbiAgfTtcblxuICBDb21TY29yZURlbGVnYXRlLnByb3RvdHlwZS5jbGVhck1lZGlhID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKCF0aGlzLl9ldmVudHNFbmFibGVkKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9jbGlwcyA9IFtdO1xuICAgIHRoaXMuX2hhc0NyZWF0ZWRBc3NldCA9IGZhbHNlO1xuXG4gICAgaWYgKHRoaXMubWVkaWEgIT09IG51bGwpIHtcbiAgICAgIC8vIElmIHRoZSBzdHJlYW0gaXMgc3RpbGwgYWN0aXZlIHdlIG5lZWQgdG8gc2VuZCBhbiBhdkVuZEV2ZW50XG4gICAgICAvLyBEZWJ1ZyBtb2RlIHNob3VsZCB3YXJuIHRoaXNcbiAgICAgIGlmICh0aGlzLnNzLmdldFN0YXRlKCkgPT09IFBsYXllclN0YXRlLlBMQVlJTkcpIHtcbiAgICAgICAgdGhpcy5hdkVuZEV2ZW50KDApO1xuICAgICAgfVxuXG4gICAgICB0aGlzLm1lZGlhID0gbnVsbDtcbiAgICB9XG4gIH07XG5cbiAgQ29tU2NvcmVEZWxlZ2F0ZS5wcm90b3R5cGUucmVxdWlyZXNMYWJlbENsZWFuc2luZyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9O1xuXG4gIENvbVNjb3JlRGVsZWdhdGUucHJvdG90eXBlLl9ldmVudHNFbmFibGVkID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lzRW5hYmxlZCAmJiB0aGlzLl9oYXNTdGFydGVkQXBwVGFnO1xuICB9O1xuXG4gIHJldHVybiBDb21TY29yZURlbGVnYXRlO1xufSk7XG4iLCJkZWZpbmUoe1xuICBCQkNfQVBQTElDQVRJT05fTkFNRTogJ2FwcF9uYW1lJywgLy8gTGVnYWN5IEJCQyBsYWJlbFxuICBCQkNfQVBQTElDQVRJT05fVFlQRTogJ2FwcF90eXBlJywgLy8gTGVnYWN5IEJCQyBsYWJlbFxuICBCQkNfQVBQTElDQVRJT05fVkVSU0lPTjogJ2FwcF92ZXJzaW9uJywgLy8gTGVnYWN5IEJCQyBsYWJlbFxuICBCQkNfQ09VTlRFUl9OQU1FOiAnbmFtZScsIC8vIExlZ2FjeSBCQkMgbGFiZWxcbiAgREVTVElOQVRJT046ICdiYmNfZGVzdGluYXRpb24nLCAvLyBMZXZlbCAxIHNpdGVcbiAgUFJPRFVDRVI6ICdiYmNfcHJvZHVjZXInLCAgLy8gTGV2ZWwgMiBzaXRlXG4gIEJCQ19MQU5HVUFHRTogJ2xhbmd1YWdlJywgLy9FQ0hPLTE1MVxuICBERVZJQ0VfSUQ6ICduc19hbGlhcycsIC8vIE92ZXJyaWRlcyB1c2luZyBzMVxuICBDT01TQ09SRV9DMTogJ2MxJyxcbiAgQ09NU0NPUkVfQzc6ICdjNycsXG5cbiAgQkJDX01FQVNVUkVNRU5UX0xJQl9OQU1FOiAnbWxfbmFtZScsXG4gIEJCQ19NRUFTVVJFTUVOVF9MSUJfVkVSU0lPTjogJ21sX3ZlcnNpb24nLFxuICBFQ0hPX1RSQUNFOiAndHJhY2UnLFxuICBFQ0hPX0VWRU5UX05BTUU6ICdlY2hvX2V2ZW50JyxcblxuICAvLyBFdmVudCB3YXMgdHJpZ2dlcmVkIGJ5IHVzZXIgaW50ZXJhY3Rpb25cbiAgRVZFTlRfVFJJR0dFUkVEX0JZX1VTRVI6ICduc19zdF91aScsIC8vQ29tU2NvcmUgbGFiZWxcblxuICAvLyBTZWUgaHR0cHM6Ly9jb25mbHVlbmNlLmRldi5iYmMuY28udWsvZGlzcGxheS9pU3RhdHMvTWVhc3VyZW1lbnQrRXZlbnRzXG4gIFNUUkVBTVNFTlNFX0NVU1RPTV9FVkVOVF9UWVBFOiAnbnNfc3RfZXYnLCAvL0NvbVNjb3JlIGxhYmVsXG4gIFVTRVJfQUNUSU9OX1RZUEU6ICdhY3Rpb25fdHlwZScsIC8vIExlZ2FjeSBCQkMgbGFiZWxcbiAgVVNFUl9BQ1RJT05fTkFNRTogJ2FjdGlvbl9uYW1lJywgLy8gTGVnYWN5IEJCQyBsYWJlbFxuICBQTEFZTElTVF9FTkQ6ICduc19zdF9wZScsIC8vQ29tU2NvcmUgbGFiZWxcblxuICBSRVdJTkRfRkZfUkFURTogJ2ZmcndfcmF0ZScsIC8vIEJCQyBsYWJlbCAtIG1hZGUgdXAgYnkgRWNobyB0ZWFtXG5cbiAgLy9TaXRlIGtleVxuICBDT01TQ09SRV9TSVRFOiAnbnNfc2l0ZScsIC8vQ29tU2NvcmUgbGFiZWxcbiAgQ09NU0NPUkVfQ1VTVE9NRVI6ICdjMicsIC8vQ29tU2NvcmUgbGFiZWxcblxuICAvLyBUZXN0IHNlcnZpY2UgbGFiZWwga2V5c1xuICBDT01TQ09SRV9FTkRQT0lOVDogJ2NvbXNjb3JlX2VuZHBvaW50JywgLy9Db21TY29yZSBlbmRwb2ludFxuXG4gIC8vIFBsYXllciBLZXlzXG4gIFBMQVlFUl9OQU1FOiAnbnNfc3RfbXAnLCAvL0NvbVNjb3JlIGxhYmVsXG4gIFBMQVlFUl9WRVJTSU9OOiAnbnNfc3RfbXYnLCAvL0NvbVNjb3JlIGxhYmVsXG4gIFBMQVlFUl9XSU5ET1dfU1RBVEU6ICduc19zdF93cycsIC8vQ29tU2NvcmUgbGFiZWxcbiAgUExBWUVSX1ZPTFVNRTogJ25zX3N0X3ZvJywgLy9Db21TY29yZSBsYWJlbFxuICBQTEFZRVJfUE9QUEVEOiAnYmJjX3N0X3BvcCcsXG4gIFBMQVlFUl9TVUJUSVRMRUQ6ICdiYmNfc3Rfc3ViJyxcblxuICAvLyBQbGF5bGlzdCBLZXlzXG4gIFBMQVlMSVNUX05BTUU6ICduc19zdF9wbCcsIC8vQ29tU2NvcmUgbGFiZWxcbiAgUExBWUxJU1RfQ0xJUF9DT1VOVDogJ25zX3N0X2NwJywgLy9Db21TY29yZSBsYWJlbFxuICBQTEFZTElTVF9MRU5HVEg6ICduc19zdF9jYScsIC8vQ29tU2NvcmUgbGFiZWxcblxuICAvLyBNZWRpYSBLZXlzXG4gIE1FRElBX1BJRDogJ25zX3N0X2NpJywgLy9Db21TY29yZSBsYWJlbFxuICBNRURJQV9MRU5HVEg6ICduc19zdF9jbCcsIC8vQ29tU2NvcmUgbGFiZWxcbiAgTUVESUFfU1RSRUFNX1RZUEU6ICduc19zdF90eScsIC8vQ29tU2NvcmUgbGFiZWxcbiAgTUVESUFfSVNfTElWRTogJ25zX3N0X2xpJywgLy9Db21TY29yZSBsYWJlbFxuICBNRURJQV9FUElTT0RFX0lEOiAnZXBpc29kZV9pZCcsIC8vTGVnYWN5IEJCQyBsYWJlbFxuICBNRURJQV9DTElQX0lEOiAnY2xpcF9pZCcsIC8vTGVnYWN5IEJCQyBsYWJlbFxuICBNRURJQV9DTElQX05VTUJFUjogJ25zX3N0X2NuJywgLy9Db21TY29yZSBsYWJlbFxuICBNRURJQV9QQVJUX05VTUJFUjogJ25zX3N0X3BuJywgLy9Db21TY29yZSBsYWJlbFxuICBNRURJQV9UT1RBTF9QQVJUUzogJ25zX3N0X3RwJywgLy9Db21TY29yZSBsYWJlbFxuICBNRURJQV9NRURJVU06ICdiYmNfc3RfbWVkJywgLy9OZXcgQkJDIGxhYmVsIGZyb20gRWNob1xuICBNRURJQV9MSVZFX09SX09OREVNQU5EOiAnYmJjX3N0X2xvZCcsIC8vTmV3IEJCQyBsYWJlbCBmcm9tIEVjaG9cbiAgTUVESUFfRk9STTogJ2JiY19zdF9tZicsIC8vTmV3IEJCQyBsYWJlbCBmcm9tIEVjaG9cbiAgTUVESUFfUkVUUklFVkFMX1RZUEU6ICdiYmNfc3RfcmV0JywgLy9OZXcgQkJDIGxhYmVsIGZyb20gRWNob1xuICBNRURJQV9TQ0hFRFVMRV9JTkRJQ0FUT1I6ICdiYmNfc3Rfc2NoJywgLy9OZXcgQkJDIGxhYmVsIGZyb20gRWNob1xuICBNRURJQV9WRVJTSU9OX0lEOiAndmVyc2lvbl9pZCcsIC8vTktEQVRBLTQ2N1xuICBNRURJQV9TRVJWSUNFX0lEOiAnc2VydmljZV9pZCcsIC8vTktEQVRBLTQ2N1xuICBNRURJQV9OT05fUElQU19DT05URU5UX0lEOiAnbm9uX3BpcHNfY29udGVudF9pZCcsIC8vTVlTVEFUUy0xNTEzXG4gIE1FRElBX0FNQklHVU9VU19JRDogJ2FtYmlnX2NpJywgLy8gTVlTVEFUUy04OTFcbiAgTUVESUFfVElNRVNUQU1QOiAnYmJjX3N0X2xpdmVfdHMnLCAvLyBNWVNUQVRFQ0hPLTM2IGxpdmUgdGltZXN0YW1wXG4gIEVTU19TVUNDRVNTOiAnZXNzX3N1Y2Nlc3MnLFxuICBFU1NfRVJST1I6ICdlc3NfZXJyb3InLFxuICBFU1NfU1RBVFVTX0NPREU6ICdlc3Nfc3RhdHVzX2NvZGUnLFxuXG4gIC8vIEFwcCBUYWcgU0RLIGNvbXBhdGliaWxpdHlcbiAgQVBQX1BMQVRGT1JNX05BTUU6ICduc19hcF9wbicsXG4gIEFQUF9QTEFURk9STV9SVU5USU1FOiAnbnNfYXBfcGZtJyxcbiAgQVBQX09TX1ZFUlNJT046ICduc19hcF9wZnYnLFxuICBBUFBfREVWSUNFX05BTUU6ICduc19hcF9kZXZpY2UnLFxuICBBUFBfU0NSRUVOX1JFU09MVVRJT046ICduc19hcF9yZXMnLFxuICBBUFBfTEFOR1VBR0U6ICduc19hcF9sYW5nJyxcbiAgRU5WX0NIQVJfU0VUOiAnbnNfYycsXG4gIEVOVl9USVRMRTogJ2M4JyxcbiAgRU5WX1VSTDogJ2M3JyxcbiAgRU5WX1JFRkVSUkVSOiAnYzknLFxuXG4gIEFQUF9OQU1FOiAnbnNfYXBfYW4nLFxuICBBUFBfVkVSU0lPTjogJ25zX2FwX3ZlcicsXG4gIE5PX0NPT0tJRVM6ICduc19uYycsXG4gIENPT0tJRV9QT0xJQ1k6ICdiYmNfbWMnLFxuICBCQkNfSURfTE9HR0VEX0lOOiAnYmJjX2lkZW50aXR5JyxcblxuICAvLyBXRUIgaXN0YXRzIGNvbXBhdGliaWxpdHlcbiAgV0VCX1NDUkVFTl9SRVM6ICdzY3JlZW5fcmVzb2x1dGlvbicsXG5cbiAgRVNTX0VOQUJMRUQ6ICdlc3NfZW5hYmxlZCcsXG4gIEVTU19FTlJJQ0hFRDogJ2Vzc19lbnJpY2hlZCdcbn0pO1xuIiwiZGVmaW5lKHtcbiAgSURMRTogMCxcbiAgUExBWUJBQ0tfTk9UX1NUQVJURUQ6IDEsXG4gIFBMQVlJTkc6IDIsXG4gIFBBVVNFRDogMyxcbiAgQlVGRkVSSU5HX0JFRk9SRV9QTEFZQkFDSzogNCxcbiAgQlVGRkVSSU5HX0RVUklOR19QTEFZQkFDSzogNSxcbiAgQlVGRkVSSU5HX0RVUklOR19TRUVLSU5HOiA2LFxuICBCVUZGRVJJTkdfRFVSSU5HX1BBVVNFOiA3LFxuICBTRUVLSU5HX0JFRk9SRV9QTEFZQkFDSzogOCxcbiAgU0VFS0lOR19EVVJJTkdfUExBWUJBQ0s6IDksXG4gIFNFRUtJTkdfRFVSSU5HX0JVRkZFUklORzogMTAsXG4gIFNFRUtJTkdfRFVSSU5HX1BBVVNFOiAxMSxcbiAgUEFVU0VEX0RVUklOR19CVUZGRVJJTkc6IDEyXG59KTtcbiIsImRlZmluZSh7XG4gIFNUUkVBTTogJ3N0cmVhbScsXG4gIFBJRDogJ2NxJyxcbiAgV0lEVEg6ICdzeCcsXG4gIEhFSUdIVDogJ3N5JyxcbiAgUExBWUVSX0RFU0M6ICdwbCcsXG4gIFBMQVlFUl9WRVJTSU9OOiAncGx2J1xufSk7XG4iLCJkZWZpbmUoZnVuY3Rpb24oKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICBmdW5jdGlvbiBQYWdlQ29udGV4dChuYW1lc3BhY2UsIGVudikge1xuICAgIHRoaXMubmFtZXNwYWNlID0gbmFtZXNwYWNlO1xuICAgIHRoaXMuZW52ID0gZW52O1xuICB9XG5cbiAgUGFnZUNvbnRleHQucHJvdG90eXBlLnByZWxvYWRJbWFnZSA9IGZ1bmN0aW9uIChzKSB7XG4gICAgdmFyIGh0dHBHZXQgPSB0aGlzLmVudi5nZXRIdHRwR2V0KCk7XG4gICAgcmV0dXJuIGh0dHBHZXQocyk7XG4gIH07XG5cbiAgUGFnZUNvbnRleHQucHJvdG90eXBlLmdldExvY2FsU3RvcmFnZUl0ZW0gPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgdmFyIGdldExvY2FsU3RvcmFnZUl0ZW0gPSB0aGlzLmVudi5nZXRHZXRMb2NhbFN0b3JhZ2VJdGVtKCk7XG4gICAgcmV0dXJuIGdldExvY2FsU3RvcmFnZUl0ZW0oa2V5KTtcbiAgfTtcblxuICBQYWdlQ29udGV4dC5wcm90b3R5cGUuc2V0TG9jYWxTdG9yYWdlSXRlbSA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG4gICAgdmFyIHNldExvY2FsU3RvcmFnZUl0ZW0gPSB0aGlzLmVudi5nZXRTZXRMb2NhbFN0b3JhZ2VJdGVtKCk7XG4gICAgcmV0dXJuIHNldExvY2FsU3RvcmFnZUl0ZW0oa2V5LCB2YWx1ZSk7XG4gIH07XG5cbiAgUGFnZUNvbnRleHQucHJvdG90eXBlLmdldFdpbmRvd0xvY2F0aW9uVVJMID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLmVudi5nZXRVUkwoKTtcbiAgfTtcblxuICByZXR1cm4gUGFnZUNvbnRleHQ7XG59KTtcbiIsImRlZmluZShmdW5jdGlvbihyZXF1aXJlKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICB2YXIgS2V5cyA9IHJlcXVpcmUoJy4vbGFiZWwta2V5cycpO1xuICB2YXIgQ29uZmlnS2V5cyA9IHJlcXVpcmUoJy4uLy4uL2NvbmZpZy9rZXlzJyk7XG4gIHZhciBERUJVRyA9IHJlcXVpcmUoJy4uLy4uL3V0aWwvZGVidWcnKTtcbiAgdmFyIEVudW1zID0gcmVxdWlyZSgnLi4vLi4vZW51bWVyYXRpb25zJyk7XG4gIHZhciBQYWdlQ29udGV4dCA9IHJlcXVpcmUoJy4vcGFnZS1jb250ZXh0Jyk7XG5cbiAgLy9mdW5jdGlvbiB0byB1c2Ugd2hlbiB3ZSBhcmUgaWdub3JpbmcgYSBmdW5jdGlvblxuICBmdW5jdGlvbiBkdW1teSgpIHtcbiAgICByZXR1cm4gLTE7XG4gIH1cblxuICBmdW5jdGlvbiBTcHJpbmdEZWxlZ2F0ZShhcHBOYW1lLCBhcHBUeXBlLCBjb25maWcsIGVudikgeyAvLyBqc2hpbnQgaWdub3JlOmxpbmVcblxuICAgIC8vIE5vIHBvaW50IGluIGluaXRpYWxpc2luZyB0aGlzIHVudGlsIHdlIGtub3dcbiAgICAvLyB3ZSBhcmUgZ29pbmcgdG8gcGxheSBzb21lIG1lZGlhXG4gICAgdGhpcy5fc2Vuc29ycyA9IG51bGw7XG4gICAgdGhpcy5fYnJva2VyID0gbnVsbDtcbiAgICB0aGlzLl9tZWRpYSA9IG51bGw7XG4gICAgdGhpcy5fbWV0YSA9IHt9O1xuICAgIHRoaXMuX3N0cmVhbSA9IG51bGw7XG4gICAgdGhpcy5fZW52ID0gZW52O1xuICAgIHRoaXMuX3NpdGVDb2RlID0gY29uZmlnW0NvbmZpZ0tleXMuQkFSQl9TSVRFX0NPREVdO1xuICAgIHRoaXMuX2RlYnVnID0gY29uZmlnW0NvbmZpZ0tleXMuQkFSQl9ERUJVR107XG4gICAgdGhpcy5fdHJhY2VJZCA9IG51bGw7XG4gICAgdGhpcy5faXNQbGF5aW5nID0gZmFsc2U7XG4gICAgdGhpcy5faXNFc3NFbmFibGVkID0gZmFsc2U7XG4gICAgdGhpcy5faXNFbmFibGVkID0gdHJ1ZTtcbiAgICB0aGlzLl9oYXNTdGFydGVkID0gZmFsc2U7XG5cbiAgICBpZiAoY29uZmlnW0NvbmZpZ0tleXMuRUNIT19UUkFDRV0pIHtcbiAgICAgIHRoaXMuc2V0VHJhY2VJZChjb25maWdbQ29uZmlnS2V5cy5FQ0hPX1RSQUNFXSk7XG4gICAgfVxuXG4gICAgaWYgKGNvbmZpZ1tDb25maWdLZXlzLlVTRV9FU1NdKSB7XG4gICAgICB0aGlzLl9pc0Vzc0VuYWJsZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIGlmIChjb25maWcgJiYgY29uZmlnW0NvbmZpZ0tleXMuRUNIT19FTkFCTEVEXSA9PT0gZmFsc2UpIHtcbiAgICAgIHRoaXMuX2lzRW5hYmxlZCA9IGZhbHNlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9pc0VuYWJsZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIFNwcmluZ0RlbGVnYXRlLnByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICghdGhpcy5faGFzU3RhcnRlZCkge1xuICAgICAgdGhpcy5faGFzU3RhcnRlZCA9IHRydWU7XG4gICAgfVxuICB9O1xuXG4gIFNwcmluZ0RlbGVnYXRlLnByb3RvdHlwZS5lbmFibGUgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoIXRoaXMuX2lzRW5hYmxlZCkge1xuICAgICAgdGhpcy5faXNFbmFibGVkID0gdHJ1ZTtcbiAgICB9XG4gIH07XG5cbiAgU3ByaW5nRGVsZWdhdGUucHJvdG90eXBlLmRpc2FibGUgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5faXNFbmFibGVkKSB7XG4gICAgICB0aGlzLl9pc0VuYWJsZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuY2xlYXJNZWRpYSgpO1xuICAgIH1cbiAgfTtcblxuICBTcHJpbmdEZWxlZ2F0ZS5wcm90b3R5cGUuc2V0VHJhY2VJZCA9IGZ1bmN0aW9uKGlkKSB7XG4gICAgdGhpcy5fdHJhY2VJZCA9IGlkO1xuICB9O1xuXG4gIFNwcmluZ0RlbGVnYXRlLlNwcmluZ1N0cmVhbXMgPSByZXF1aXJlKCdzcHJpbmdzdHJlYW1zJyk7XG5cbiAgLy8gQXBwbGljYXRpb24gU3RhdGUgTWV0aG9kc1xuICBTcHJpbmdEZWxlZ2F0ZS5wcm90b3R5cGUuYWRkTGFiZWxzID0gZHVtbXk7XG4gIFNwcmluZ0RlbGVnYXRlLnByb3RvdHlwZS5hZGRMYWJlbCA9IGR1bW15O1xuICBTcHJpbmdEZWxlZ2F0ZS5wcm90b3R5cGUuYWRkTWFuYWdlZExhYmVsID0gZHVtbXk7XG4gIFNwcmluZ0RlbGVnYXRlLnByb3RvdHlwZS5yZW1vdmVMYWJlbHMgPSBkdW1teTtcbiAgU3ByaW5nRGVsZWdhdGUucHJvdG90eXBlLnJlbW92ZUxhYmVsID0gZHVtbXk7XG4gIFNwcmluZ0RlbGVnYXRlLnByb3RvdHlwZS5zZXRMb2dnZWRJblRvQkJDSWQgPSBkdW1teTtcbiAgU3ByaW5nRGVsZWdhdGUucHJvdG90eXBlLnNldExvZ2dlZE91dE9mQkJDSWQgPSBkdW1teTtcbiAgU3ByaW5nRGVsZWdhdGUucHJvdG90eXBlLnNldEFwcFZlcnNpb24gPSBkdW1teTtcbiAgU3ByaW5nRGVsZWdhdGUucHJvdG90eXBlLnNldENvdW50ZXJOYW1lID0gZHVtbXk7XG4gIFNwcmluZ0RlbGVnYXRlLnByb3RvdHlwZS5zZXRDb250ZW50TGFuZ3VhZ2UgPSBkdW1teTtcbiAgU3ByaW5nRGVsZWdhdGUucHJvdG90eXBlLnNldENhY2hlTW9kZSA9IGR1bW15O1xuICBTcHJpbmdEZWxlZ2F0ZS5wcm90b3R5cGUuY2xlYXJDYWNoZSA9IGR1bW15O1xuICBTcHJpbmdEZWxlZ2F0ZS5wcm90b3R5cGUuZmx1c2hDYWNoZSA9IGR1bW15O1xuICBTcHJpbmdEZWxlZ2F0ZS5wcm90b3R5cGUuc2V0RVNTRW5hYmxlZCA9IGR1bW15O1xuXG4gIC8vIEFuYWx5dGljcyBNZXRob2RzXG4gIFNwcmluZ0RlbGVnYXRlLnByb3RvdHlwZS52aWV3RXZlbnQgPSBkdW1teTtcbiAgU3ByaW5nRGVsZWdhdGUucHJvdG90eXBlLmVycm9yRXZlbnQgPSBkdW1teTtcbiAgU3ByaW5nRGVsZWdhdGUucHJvdG90eXBlLnVzZXJBY3Rpb25FdmVudCA9IGR1bW15O1xuXG4gIC8vIE1lZGlhIFBsYXllciBhdHRyaWJ1dGVzXG4gIFNwcmluZ0RlbGVnYXRlLnByb3RvdHlwZS5zZXRQbGF5ZXJOYW1lID0gZnVuY3Rpb24obmFtZSkge1xuICAgIHRoaXMuX21ldGFbS2V5cy5QTEFZRVJfREVTQ10gPSBuYW1lO1xuICB9O1xuXG4gIFNwcmluZ0RlbGVnYXRlLnByb3RvdHlwZS5zZXRQbGF5ZXJWZXJzaW9uID0gZnVuY3Rpb24odmVyc2lvbikge1xuICAgIHRoaXMuX21ldGFbS2V5cy5QTEFZRVJfVkVSU0lPTl0gPSB2ZXJzaW9uO1xuICB9O1xuXG4gIFNwcmluZ0RlbGVnYXRlLnByb3RvdHlwZS5zZXRQbGF5ZXJJc1BvcHBlZCA9IGR1bW15O1xuICBTcHJpbmdEZWxlZ2F0ZS5wcm90b3R5cGUuc2V0UGxheWVyV2luZG93U3RhdGUgPSBkdW1teTtcbiAgU3ByaW5nRGVsZWdhdGUucHJvdG90eXBlLnNldFBsYXllclZvbHVtZSA9IGR1bW15O1xuICBTcHJpbmdEZWxlZ2F0ZS5wcm90b3R5cGUuc2V0UGxheWVySXNTdWJ0aXRsZWQgPSBkdW1teTtcblxuICBTcHJpbmdEZWxlZ2F0ZS5wcm90b3R5cGUuc2V0RGVzdGluYXRpb24gPSBkdW1teTtcbiAgU3ByaW5nRGVsZWdhdGUucHJvdG90eXBlLnNldFByb2R1Y2VyID0gZHVtbXk7XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIGJyb2tlci5cbiAgICpcbiAgICogVGhpcyBtZXRob2Qgc2hvdWxkIG9ubHkgYmUgY2FsbGVkIGJ5IHRoZSBFY2hvQ2xpZW50IGNsYXNzIHRvXG4gICAqIGVuc3VyZSB0aGUgaW50ZXJmYWNlIGlzIGltcGxlbWVudGVkLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gYnJva2VyIEFuIG9iamVjdCBjb25mb3JtaW5nIHRvIHRoZSBicm9rZXIgaW50ZXJmYWNlLlxuICAgKlxuICAgKiBAcmV0dXJuIHtTcHJpbmdEZWxlZ2F0ZX1cbiAgICovXG4gIFNwcmluZ0RlbGVnYXRlLnByb3RvdHlwZS5zZXRCcm9rZXIgPSBmdW5jdGlvbihicm9rZXIpIHtcbiAgICB0aGlzLl9icm9rZXIgPSBicm9rZXI7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLy8gTWVkaWEgQXR0cmlidXRlc1xuICBTcHJpbmdEZWxlZ2F0ZS5wcm90b3R5cGUuc2V0TWVkaWEgPSBmdW5jdGlvbihtZWRpYSkge1xuICAgIGlmICghdGhpcy5fZXZlbnRzRW5hYmxlZCgpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5jbGVhck1lZGlhKCk7XG4gICAgdGhpcy5fbWVkaWEgPSBtZWRpYS5nZXRDbG9uZSgpO1xuICB9O1xuXG4gIFNwcmluZ0RlbGVnYXRlLnByb3RvdHlwZS5zZXRNZWRpYUxlbmd0aCA9IGZ1bmN0aW9uKGxlbmd0aCkge1xuICAgIHRoaXMuX21lZGlhLnNldExlbmd0aChsZW5ndGgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBIYW5kbGVzIGFuIHVwZGF0ZWQgY2xpcCBmcm9tIHRoZSBMaXZlQnJva2VyXG4gICAqXG4gICAqIEBwYXJhbSB7TWVkaWF9IG5ld01lZGlhXG4gICAqL1xuICBTcHJpbmdEZWxlZ2F0ZS5wcm90b3R5cGUubGl2ZU1lZGlhVXBkYXRlID0gZnVuY3Rpb24obmV3TWVkaWEpIHtcbiAgICB0aGlzLl9tZWRpYSA9IG5ld01lZGlhLmdldENsb25lKCk7XG5cbiAgICBpZiAodGhpcy5faXNQbGF5aW5nKSB7XG4gICAgICB0aGlzLl9zdGFydFRyYWNraW5nKCk7XG4gICAgfVxuICB9O1xuXG4gIFNwcmluZ0RlbGVnYXRlLnByb3RvdHlwZS5saXZlRW5yaWNobWVudEZhaWxlZCA9IGZ1bmN0aW9uKCkge1xuXG4gICAgaWYgKCF0aGlzLl9tZWRpYS5nZXRTZXJ2aWNlSWQoKSkge1xuICAgICAgdGhpcy5fbWVkaWEuc2V0U2VydmljZUlkKCduby1zZXJ2aWNlLWlkLWZvdW5kJyk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2lzUGxheWluZykge1xuICAgICAgdGhpcy5fc3RhcnRUcmFja2luZygpO1xuICAgIH1cbiAgfTtcblxuICAvLyBNZWRpYSBFdmVudHNcbiAgU3ByaW5nRGVsZWdhdGUucHJvdG90eXBlLmF2UGxheUV2ZW50ID0gZnVuY3Rpb24ocG9zaXRpb24sIGV2ZW50TGFiZWxzKSB7IC8vIGpzaGludCBpZ25vcmU6bGluZVxuICAgIGlmICghdGhpcy5fZXZlbnRzRW5hYmxlZCgpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaXNWYWxpZE1lZGlhKCkgJiYgdGhpcy5fYnJva2VyKSB7XG5cbiAgICAgIHRoaXMuX2luaXRTZW5zb3JzKCk7XG5cbiAgICAgIHRoaXMuX2lzUGxheWluZyA9IHRydWU7XG5cbiAgICAgIGlmICh0aGlzLl9tZWRpYS5pc0xpdmUoKSAmJiAhdGhpcy5fbWVkaWEuZ2V0U2VydmljZUlkKCkpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9pc0Vzc0VuYWJsZWQgfHwgKCF0aGlzLl9tZWRpYS5nZXRWZXJzaW9uSWQoKSAmJiAhdGhpcy5fbWVkaWEuZ2V0VnBJZCgpKSkge1xuICAgICAgICAgIHRoaXMuX21lZGlhLnNldFNlcnZpY2VJZCgnaW52YWxpZC1kYXRhJyk7XG4gICAgICAgICAgdGhpcy5fc3RhcnRUcmFja2luZygpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9zdGFydFRyYWNraW5nKCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8vIFBSSVZBVEVcbiAgU3ByaW5nRGVsZWdhdGUucHJvdG90eXBlLl9pbml0U2Vuc29ycyA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLl9zZW5zb3JzID09PSBudWxsKSB7XG4gICAgICB0aGlzLl9zZW5zb3JzID0gbmV3IFNwcmluZ0RlbGVnYXRlLlNwcmluZ1N0cmVhbXModGhpcy5fc2l0ZUNvZGUpO1xuXG4gICAgICBpZiAodGhpcy5fZW52LmdldFNldExvY2FsU3RvcmFnZUl0ZW0oKSAhPT0gbnVsbCAmJlxuICAgICAgICB0aGlzLl9lbnYuZ2V0R2V0TG9jYWxTdG9yYWdlSXRlbSgpICE9PSBudWxsICYmXG4gICAgICAgIHRoaXMuX2Vudi5nZXRIdHRwR2V0KCkgIT09IG51bGwpIHtcbiAgICAgICAgREVCVUcuaW5mbygnVXNpbmcgY3VzdG9tIFBhZ2VDb250ZXh0IGZvciBCQVJCJyk7XG4gICAgICAgIHZhciBwYWdlQ29udGV4dCA9IG5ldyBQYWdlQ29udGV4dCgnY29tLmttYS5zcHJpbmdzdHJlYW1zJywgdGhpcy5fZW52KTtcbiAgICAgICAgdGhpcy5fc2Vuc29ycy5zZXRQYWdlQ29udGV4dChwYWdlQ29udGV4dCk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLl9kZWJ1Zykge1xuICAgICAgICB0aGlzLl9zZW5zb3JzLmRlYnVnID0gZnVuY3Rpb24oeCkge1xuICAgICAgICAgIERFQlVHLmluZm8oJ1NwcmluZyBERUJVRzogJyArIHgpO1xuICAgICAgICB9O1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBTcHJpbmdEZWxlZ2F0ZS5wcm90b3R5cGUuX3N0YXJ0VHJhY2tpbmcgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5fc3RyZWFtID09PSBudWxsKSB7XG4gICAgICB2YXIgYXR0ciA9IHRoaXMuX2dldEF0dHJpYnV0ZXMoKTtcbiAgICAgIHZhciBpZCA9IGF0dHJbS2V5cy5QSURdIHx8ICcgJztcblxuICAgICAgLy8gU3RhcnQgdG8gdHJhY2sgdGhlIG1lZGlhXG4gICAgICB0aGlzLl9zdHJlYW0gPSB0aGlzLl9zZW5zb3JzLnRyYWNrKGlkLCBhdHRyLCB0aGlzLl9nZXRBZGFwdG9yKCkpO1xuICAgIH1cblxuICB9O1xuXG4gIFNwcmluZ0RlbGVnYXRlLnByb3RvdHlwZS5fZ2V0TW9zdFByZWNlZGVudElkT2JqZWN0ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHZlcnNpb25JZCA9IHRoaXMuX21lZGlhLmdldFZlcnNpb25JZE9iamVjdCgpO1xuICAgIHZhciBlcGlzb2RlSWQgPSB0aGlzLl9tZWRpYS5nZXRFcGlzb2RlSWRPYmplY3QoKTtcbiAgICB2YXIgY2xpcElkICAgID0gdGhpcy5fbWVkaWEuZ2V0Q2xpcElkT2JqZWN0KCk7XG4gICAgdmFyIHZwSWQgICAgICA9IHRoaXMuX21lZGlhLmdldFZwSWRPYmplY3QoKTtcbiAgICB2YXIgc2VydmljZUlkID0gdGhpcy5fbWVkaWEuZ2V0U2VydmljZUlkT2JqZWN0KCk7XG5cbiAgICBpZiAodmVyc2lvbklkLmlzVmFsdWVWYWxpZCgpKSB7XG4gICAgICByZXR1cm4gdmVyc2lvbklkO1xuICAgIH0gZWxzZSBpZiAoZXBpc29kZUlkLmlzVmFsdWVWYWxpZCgpKSB7XG4gICAgICByZXR1cm4gZXBpc29kZUlkO1xuICAgIH0gZWxzZSBpZiAoY2xpcElkLmlzVmFsdWVWYWxpZCgpKSB7XG4gICAgICByZXR1cm4gY2xpcElkO1xuICAgIH0gZWxzZSBpZiAodnBJZC5pc1ZhbHVlVmFsaWQoKSkge1xuICAgICAgcmV0dXJuIHZwSWQ7XG4gICAgfSBlbHNlIGlmIChzZXJ2aWNlSWQuaXNWYWx1ZVZhbGlkKCkpIHtcbiAgICAgIHJldHVybiBzZXJ2aWNlSWQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH07XG5cbiAgU3ByaW5nRGVsZWdhdGUucHJvdG90eXBlLl9nZXRBdHRyaWJ1dGVzID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG1lZGlhID0gdGhpcy5fbWVkaWE7XG5cbiAgICAvLyBDcmVhdGUgZGVzYyBvYmplY3RcbiAgICB2YXIgZGVzYyA9IHt9O1xuXG4gICAgaWYgKHRoaXMuX3RyYWNlSWQpIHtcbiAgICAgIGRlc2NbQ29uZmlnS2V5cy5FQ0hPX1RSQUNFXSA9IHRoaXMuX3RyYWNlSWQ7XG4gICAgfVxuXG4gICAgaWYgKCFtZWRpYS5pc0xpdmUoKSkge1xuICAgICAgdmFyIHByZWNlZGVudElkID0gdGhpcy5fZ2V0TW9zdFByZWNlZGVudElkT2JqZWN0KCk7XG5cbiAgICAgIGlmIChwcmVjZWRlbnRJZCAhPT0gbnVsbCkge1xuICAgICAgICBkZXNjW0tleXMuUElEXSA9IHByZWNlZGVudElkLmdldFZhbHVlKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKG1lZGlhLmlzT25EZW1hbmQoKSkge1xuICAgICAgZGVzY1tLZXlzLlNUUkVBTV0gPSAnb2QnO1xuICAgIH0gZWxzZSBpZiAobWVkaWEuaXNEb3dubG9hZCgpKSB7XG4gICAgICBkZXNjW0tleXMuU1RSRUFNXSA9ICdkd24nO1xuICAgIH0gZWxzZSBpZiAobWVkaWEuaXNMaXZlKCkpIHtcbiAgICAgIGlmIChtZWRpYS5nZXRTZXJ2aWNlSWRPYmplY3QoKS5pc1ZhbHVlVmFsaWQoKSkge1xuICAgICAgICBkZXNjW0tleXMuU1RSRUFNXSA9ICdsaXZlLycgKyBtZWRpYS5nZXRTZXJ2aWNlSWQoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZGVzYztcbiAgfTtcblxuICBTcHJpbmdEZWxlZ2F0ZS5wcm90b3R5cGUuX2dldEFkYXB0b3IgPSBmdW5jdGlvbigpIHtcbiAgICAvLyBDcmVhdGUgYWRhcHRvclxuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgcG9zaXRpb25HZXR0ZXI7XG5cbiAgICBpZiAodGhpcy5fbWVkaWEuaXNMaXZlKCkpIHtcbiAgICAgIHBvc2l0aW9uR2V0dGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBzZWxmLl9icm9rZXIuZ2V0VGltZXN0YW1wKCk7XG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICBwb3NpdGlvbkdldHRlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gc2VsZi5fYnJva2VyLmdldFBvc2l0aW9uKCk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBnZXRNZXRhOiBmdW5jdGlvbihpZCkgeyAvLyBqc2hpbnQgaWdub3JlOmxpbmVcbiAgICAgICAgcmV0dXJuIHNlbGYuX21ldGE7XG4gICAgICB9LFxuXG4gICAgICBnZXREdXJhdGlvbjogZnVuY3Rpb24oaWQpIHsgLy8ganNoaW50IGlnbm9yZTpsaW5lXG4gICAgICAgIHZhciBzZWNzID0gMDtcblxuICAgICAgICBpZiAoIXNlbGYuX21lZGlhLmlzTGl2ZSgpKSB7XG4gICAgICAgICAgc2VjcyA9IE1hdGguZmxvb3Ioc2VsZi5fbWVkaWEuZ2V0TGVuZ3RoKCkgLyAxMDAwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBzZWNzO1xuICAgICAgfSxcblxuICAgICAgZ2V0UG9zaXRpb246IGZ1bmN0aW9uKGlkKSB7IC8vIGpzaGludCBpZ25vcmU6bGluZVxuICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihwb3NpdGlvbkdldHRlcigpIC8gMTAwMCk7XG4gICAgICB9XG4gICAgfTtcbiAgfTtcblxuICBTcHJpbmdEZWxlZ2F0ZS5wcm90b3R5cGUuX2V2ZW50c0VuYWJsZWQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5faXNFbmFibGVkICYmIHRoaXMuX2hhc1N0YXJ0ZWQ7XG4gIH07XG5cbiAgU3ByaW5nRGVsZWdhdGUucHJvdG90eXBlLmF2UGF1c2VFdmVudCA9IGZ1bmN0aW9uKCkge1xuICB9O1xuXG4gIFNwcmluZ0RlbGVnYXRlLnByb3RvdHlwZS5hdkJ1ZmZlckV2ZW50ID0gZnVuY3Rpb24oKSB7XG4gIH07XG5cbiAgU3ByaW5nRGVsZWdhdGUucHJvdG90eXBlLmF2RW5kRXZlbnQgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoIXRoaXMuX2V2ZW50c0VuYWJsZWQoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX2lzUGxheWluZyA9IGZhbHNlO1xuXG4gICAgaWYgKHRoaXMuaXNWYWxpZE1lZGlhKCkpIHtcbiAgICAgIHRoaXMuY2xlYXJNZWRpYSgpO1xuICAgIH1cbiAgfTtcblxuICBTcHJpbmdEZWxlZ2F0ZS5wcm90b3R5cGUuYXZSZXdpbmRFdmVudCA9IGZ1bmN0aW9uKCkge1xuICB9O1xuXG4gIFNwcmluZ0RlbGVnYXRlLnByb3RvdHlwZS5hdkZhc3RGb3J3YXJkRXZlbnQgPSBmdW5jdGlvbigpIHtcbiAgfTtcblxuICBTcHJpbmdEZWxlZ2F0ZS5wcm90b3R5cGUuYXZTZWVrRXZlbnQgPSBmdW5jdGlvbigpIHtcbiAgfTtcblxuICBTcHJpbmdEZWxlZ2F0ZS5wcm90b3R5cGUuYXZVc2VyQWN0aW9uRXZlbnQgID0gZHVtbXk7XG5cbiAgU3ByaW5nRGVsZWdhdGUucHJvdG90eXBlLmNsZWFyTWVkaWEgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5pc1ZhbGlkTWVkaWEoKSkge1xuICAgICAgaWYgKHRoaXMuX3N0cmVhbSkge1xuICAgICAgICB0aGlzLl9zdHJlYW0uc3RvcCgpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9zdHJlYW0gPSBudWxsO1xuICAgICAgdGhpcy5fbWVkaWEgPSBudWxsO1xuICAgIH1cbiAgfTtcblxuICBTcHJpbmdEZWxlZ2F0ZS5wcm90b3R5cGUuaXNWYWxpZE1lZGlhID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX21lZGlhICE9PSBudWxsICYmIHRoaXMuX21lZGlhLmF2VHlwZSA9PT0gRW51bXMuQXZUeXBlLlZJREVPO1xuICB9O1xuXG4gIFNwcmluZ0RlbGVnYXRlLnByb3RvdHlwZS5pc1ZhbGlkTGl2ZU1lZGlhID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZE1lZGlhKCkgJiYgdGhpcy5fbWVkaWEuaXNMaXZlKCk7XG4gIH07XG5cbiAgU3ByaW5nRGVsZWdhdGUucHJvdG90eXBlLnJlcXVpcmVzTGFiZWxDbGVhbnNpbmcgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfTtcblxuICByZXR1cm4gU3ByaW5nRGVsZWdhdGU7XG59KTtcbiIsIi8qKlxuICogRU5VTSB2YWx1ZXMuIEF2YWlsYWJsZSB2aWEgRWNoby5FbnVtcy4gVGhlc2UgdmFsdWVzIGFyZSB1c2VkIHRvIHBhc3MgaW4gdG9cbiAqIHZhcmlvdXMgbWV0aG9kcyBpbiBgRWNob0NsaWVudGAgYW5kIGBNZWRpYWBcbiAqIEBleHBvcnRzIEVjaG8vRW51bXNcbiAqL1xuZGVmaW5lKGZ1bmN0aW9uKHJlcXVpcmUpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIHZhciBDb25maWdLZXlzID0gcmVxdWlyZSgnLi9jb25maWcva2V5cycpO1xuICB2YXIgQVRJTGFiZWxLZXlzID0gcmVxdWlyZSgnLi9kZWxlZ2F0ZS9hdGkvbGFiZWwta2V5cycpO1xuXG4gIC8vIENyZWF0ZSBhIGxpc3Qgb2YgZGVzdGluYXRpb25zIHRoYXQgY2FuIGJlIHVzZWQgYXMgYW4gZW51bWVyYXRpb25cbiAgdmFyIGRlc3RpbmF0aW9ucyA9IHt9O1xuICB2YXIgb3JpZ0Rlc3RpbmF0aW9ucyA9IHJlcXVpcmUoJy4vY29uZmlnL2Rlc3RpbmF0aW9ucycpO1xuICBPYmplY3Qua2V5cyhvcmlnRGVzdGluYXRpb25zKS5tYXAoZnVuY3Rpb24oa2V5KSB7XG4gICAgZGVzdGluYXRpb25zW2tleV0gPSBrZXk7XG4gIH0pO1xuXG4gIC8vIENyZWF0ZSBhIGxpc3Qgb2YgcHJvZHVjZXJzIHRoYXQgY2FuIGJlIHVzZWQgYXMgYW4gZW51bWVyYXRpb25cbiAgdmFyIHByb2R1Y2VycyA9IHt9O1xuICB2YXIgb3JpZ1Byb2R1Y2VycyA9IHJlcXVpcmUoJy4vY29uZmlnL3Byb2R1Y2VycycpO1xuICBPYmplY3Qua2V5cyhvcmlnUHJvZHVjZXJzKS5tYXAoZnVuY3Rpb24oa2V5KSB7XG4gICAgcHJvZHVjZXJzW2tleV0gPSBrZXk7XG4gIH0pO1xuXG4gIHZhciBjb21zY29yZUN1c3RvbWVySWQgPSB7XG4gICAgUFVCTElDX1NFUlZJQ0U6ICcxNjA2MDUwMScsXG4gICAgR05MOiAnMTkyOTM4NzQnLFxuICAgIFdPUkxEX1NFUlZJQ0U6ICcxOTk5OTcwMScsXG4gICAgV09STERXSURFX0ZFQVRVUkVTOiAnMTk3NzQ0NjcnLFxuICAgIFNUT1JFX05PTkNPTU1FUkNJQUw6ICcxOTc3NDQ3NCcsXG4gICAgU1RPUkVfQ09NTUVSQ0lBTDogJzE5Nzc0NDcyJyxcbiAgICBBRkZJTElBVEVTX0FDQ0VQVEFOQ0U6ICcxODg5NzYxMicsXG4gICAgQlJJVEJPWDogJzIzMjM5NzE1JyxcbiAgICBCUklUQk9YX0FDQ0VQVEFOQ0U6ICcxODg5NzYxMidcbiAgfTtcblxuICBmdW5jdGlvbiBjcmVhdGVSZXBvcnRpbmdQcm9maWxlKGNvbXNjb3JlQ3VzdG9tZXJJZCwgY29tc2NvcmVTaXRlLCBjb21zY29yZUhvc3QsIHNzY0hvc3QpIHtcbiAgICB2YXIgcHJvZmlsZSA9IHt9O1xuICAgIHByb2ZpbGVbQ29uZmlnS2V5cy5DT01TQ09SRV9DVVNUT01FUl9JRF0gPSBjb21zY29yZUN1c3RvbWVySWQ7XG4gICAgcHJvZmlsZVtDb25maWdLZXlzLkNPTVNDT1JFX1NJVEVdID0gY29tc2NvcmVTaXRlO1xuICAgIHByb2ZpbGVbQ29uZmlnS2V5cy5DT01TQ09SRV9IT1NUXSA9IGNvbXNjb3JlSG9zdDtcbiAgICBwcm9maWxlW0NvbmZpZ0tleXMuU1NDX0hPU1ROQU1FXSA9IHNzY0hvc3Q7XG4gICAgcmV0dXJuIHByb2ZpbGU7XG4gIH1cblxuICBmdW5jdGlvbiBjcmVhdGVQdWJsaWNTZXJ2aWNlUmVwb3J0aW5nUHJvZmlsZShjb21zY29yZVNpdGUpIHtcbiAgICByZXR1cm4gY3JlYXRlUmVwb3J0aW5nUHJvZmlsZShcbiAgICAgIGNvbXNjb3JlQ3VzdG9tZXJJZC5QVUJMSUNfU0VSVklDRSxcbiAgICAgIGNvbXNjb3JlU2l0ZSxcbiAgICAgICdzYS5iYmMuY28udWsnLFxuICAgICAgJy5jby51aydcbiAgICApO1xuICB9XG5cbiAgZnVuY3Rpb24gY3JlYXRlQWZmaWxpYXRlUmVwb3J0aW5nUHJvZmlsZShjb21zY29yZUN1c3RvbWVySWQsIGNvbXNjb3JlU2l0ZSkge1xuICAgIHJldHVybiBjcmVhdGVSZXBvcnRpbmdQcm9maWxlKFxuICAgICAgY29tc2NvcmVDdXN0b21lcklkLFxuICAgICAgY29tc2NvcmVTaXRlLFxuICAgICAgJ3Njb3JlY2FyZHJlc2VhcmNoLmNvbScsXG4gICAgICAnLmNvbSdcbiAgICApO1xuICB9XG5cbiAgdmFyIHJlcG9ydGluZ1Byb2ZpbGVzID0ge307XG4gIHJlcG9ydGluZ1Byb2ZpbGVzLlBVQkxJQ19TRVJWSUNFID0gY3JlYXRlUHVibGljU2VydmljZVJlcG9ydGluZ1Byb2ZpbGUoJ2JiYycpO1xuICByZXBvcnRpbmdQcm9maWxlcy5QVUJMSUNfU0VSVklDRV9TVEFHRSA9IGNyZWF0ZVB1YmxpY1NlcnZpY2VSZXBvcnRpbmdQcm9maWxlKCdzdGFnZScpO1xuICByZXBvcnRpbmdQcm9maWxlcy5QVUJMSUNfU0VSVklDRV9URVNUID0gY3JlYXRlUHVibGljU2VydmljZVJlcG9ydGluZ1Byb2ZpbGUoJ3Rlc3QnKTtcbiAgcmVwb3J0aW5nUHJvZmlsZXMuUFVCTElDX1NFUlZJQ0VfSU5UID0gY3JlYXRlUHVibGljU2VydmljZVJlcG9ydGluZ1Byb2ZpbGUoJ2ludCcpO1xuICByZXBvcnRpbmdQcm9maWxlcy5QVUJMSUNfU0VSVklDRV9JTlRSQU5FVCA9IGNyZWF0ZVB1YmxpY1NlcnZpY2VSZXBvcnRpbmdQcm9maWxlKCdpbnRyYW5ldCcpO1xuXG4gIHJlcG9ydGluZ1Byb2ZpbGVzLkdOTCA9IGNyZWF0ZUFmZmlsaWF0ZVJlcG9ydGluZ1Byb2ZpbGUoXG4gICAgY29tc2NvcmVDdXN0b21lcklkLkdOTCwgJ2JiYydcbiAgKTtcbiAgcmVwb3J0aW5nUHJvZmlsZXMuR05MX0FDQ0VQVEFOQ0UgPSBjcmVhdGVBZmZpbGlhdGVSZXBvcnRpbmdQcm9maWxlKFxuICAgIGNvbXNjb3JlQ3VzdG9tZXJJZC5BRkZJTElBVEVTX0FDQ0VQVEFOQ0UsICdnbmwtdGVzdCdcbiAgKTtcbiAgcmVwb3J0aW5nUHJvZmlsZXMuV09STERfU0VSVklDRSA9IGNyZWF0ZUFmZmlsaWF0ZVJlcG9ydGluZ1Byb2ZpbGUoXG4gICAgY29tc2NvcmVDdXN0b21lcklkLldPUkxEX1NFUlZJQ0UsICdiYmMnXG4gICk7XG4gIHJlcG9ydGluZ1Byb2ZpbGVzLldPUkxEX1NFUlZJQ0VfQUNDRVBUQU5DRSA9IGNyZWF0ZUFmZmlsaWF0ZVJlcG9ydGluZ1Byb2ZpbGUoXG4gICAgY29tc2NvcmVDdXN0b21lcklkLkFGRklMSUFURVNfQUNDRVBUQU5DRSwgJ3dzLXRlc3QnXG4gICk7XG4gIHJlcG9ydGluZ1Byb2ZpbGVzLldPUkxEV0lERV9GRUFUVVJFUyA9IGNyZWF0ZUFmZmlsaWF0ZVJlcG9ydGluZ1Byb2ZpbGUoXG4gICAgY29tc2NvcmVDdXN0b21lcklkLldPUkxEV0lERV9GRUFUVVJFUywgJ2JiYydcbiAgKTtcbiAgcmVwb3J0aW5nUHJvZmlsZXMuV09STERXSURFX0ZFQVRVUkVTX0FDQ0VQVEFOQ0UgPSBjcmVhdGVBZmZpbGlhdGVSZXBvcnRpbmdQcm9maWxlKFxuICAgIGNvbXNjb3JlQ3VzdG9tZXJJZC5BRkZJTElBVEVTX0FDQ0VQVEFOQ0UsICdmZWF0dXJlcy10ZXN0J1xuICApO1xuICByZXBvcnRpbmdQcm9maWxlcy5TVE9SRV9OT05DT01NRVJDSUFMID0gY3JlYXRlQWZmaWxpYXRlUmVwb3J0aW5nUHJvZmlsZShcbiAgICBjb21zY29yZUN1c3RvbWVySWQuU1RPUkVfTk9OQ09NTUVSQ0lBTCwgJ2JiYydcbiAgKTtcbiAgcmVwb3J0aW5nUHJvZmlsZXMuU1RPUkVfQ09NTUVSQ0lBTCA9IGNyZWF0ZUFmZmlsaWF0ZVJlcG9ydGluZ1Byb2ZpbGUoXG4gICAgY29tc2NvcmVDdXN0b21lcklkLlNUT1JFX0NPTU1FUkNJQUwsICdiYmMnXG4gICk7XG4gIHJlcG9ydGluZ1Byb2ZpbGVzLkJSSVRCT1hfQUNDRVBUQU5DRSA9IGNyZWF0ZUFmZmlsaWF0ZVJlcG9ydGluZ1Byb2ZpbGUoXG4gICAgY29tc2NvcmVDdXN0b21lcklkLkJSSVRCT1hfQUNDRVBUQU5DRSwgJ2JiYy1nbG9iYWwtdGVzdCdcbiAgKTtcbiAgcmVwb3J0aW5nUHJvZmlsZXMuQlJJVEJPWCA9IGNyZWF0ZUFmZmlsaWF0ZVJlcG9ydGluZ1Byb2ZpbGUoXG4gICAgY29tc2NvcmVDdXN0b21lcklkLkJSSVRCT1gsICdiYmMnXG4gICk7XG5cbiAgdmFyIGV4cG9ydHMgPSB7XG4gICAgLyoqIENPTVNDT1JFIENPTkZJRyAqKi9cblxuICAgIC8qKiBFQ0hPIENMSUVOVCAqKi9cbiAgICAvKipcbiAgICAgKiBUeXBlIG9mIGFwcGxpY2F0aW9uLCB1c2VkIGluIHRoZSBjb25zdHJ1Y3Rpb24gb2YgYW4gYEVjaG9DbGllbnRgIG9iamVjdFxuICAgICAqIEBwcm9wZXJ0eSBXRUIgU3RhbmRhcmQgZGVza3RvcCB3ZWIgc2l0ZXNcbiAgICAgKiBAcHJvcGVydHkgTU9CSUxFX1dFQiBNb2JpbGUgc2l0ZXNcbiAgICAgKiBAcHJvcGVydHkgUkVTUE9OU0lWRSBSZXNwb25zaXZlIHNpdGVzXG4gICAgICogQHByb3BlcnR5IE1PQklMRV9BUFAgTmF0aXZlIG1vYmlsZSBhcHBsaWNhdGlvbnNcbiAgICAgKiBAcHJvcGVydHkgQklHU0NSRUVOX0hUTUwgQ29ubmVjdGVkIFR2J3MgYW5kIFNUQidzXG4gICAgICogQHByb3BlcnR5IEJJR1NDUkVFTl9GTEFTSCBDb25uZWN0ZWQgVHYncyBhbmQgU1RCJ3NcbiAgICAgKiBAcHJvcGVydHkgQklHU0NSRUVOX0FQUCBUaVZvIFhib3ggV2lpIGV0Yy5cbiAgICAgKiBAcHJvcGVydHkgQklHU0NSRUVOX0NBU1QgQ2hyb21lY2FzdCBBbmFseWl0aWNzLlxuICAgICAqIEBwcm9wZXJ0eSBERVNLVE9QX0FQUCBEZXNrdG9wIGFwcHMsIGVnIGlwbGF5ZXIgZG93bmxvYWRlclxuICAgICAqL1xuICAgIEFwcGxpY2F0aW9uVHlwZToge1xuICAgICAgV0VCOiAnd2ViJyxcbiAgICAgIE1PQklMRV9XRUI6ICdtb2JpbGUtd2ViJyxcbiAgICAgIFJFU1BPTlNJVkU6ICdyZXNwb25zaXZlJyxcbiAgICAgIE1PQklMRV9BUFA6ICdtb2JpbGUtYXBwJyxcbiAgICAgIEJJR1NDUkVFTl9IVE1MOiAnYmlnc2NyZWVuLWh0bWwnLFxuICAgICAgQklHU0NSRUVOX0ZMQVNIOiAnYmlnc2NyZWVuLWZsYXNoJyxcbiAgICAgIEJJR1NDUkVFTl9BUFA6ICdiaWdzY3JlZW4tYXBwJyxcbiAgICAgIEJJR1NDUkVFTl9DQVNUOiAnYmlnc2NyZWVuLWNhc3QnLFxuICAgICAgREVTS1RPUF9BUFA6ICdkZXNrdG9wLWFwcCdcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogV2luZG93IHN0YXRlcywgdXNlZCBhcyBhbiBhcmd1bWVudCB0byB0aGUgRWNob0NsaWVudCBtZXRob2RcbiAgICAgKiBgc2V0UGxheWVyV2luZG93U3RhdGUoKWBcbiAgICAgKiBAcHJvcGVydHkgRlVMTFxuICAgICAqIEBwcm9wZXJ0eSBOT1JNQUxcbiAgICAgKiBAcHJvcGVydHkgTUlOSU1JU0VEXG4gICAgICogQHByb3BlcnR5IE1BWElNSVNFRFxuICAgICAqIEBwcm9wZXJ0eSBQSUNUVVJFSU5QSUNUVVJFXG4gICAgICovXG4gICAgV2luZG93U3RhdGU6IHtcbiAgICAgIEZVTEw6ICdmdWxsJyxcbiAgICAgIE5PUk1BTDogJ25vcm0nLFxuICAgICAgTUlOSU1JU0VEOiAnbWluJyxcbiAgICAgIE1BWElNSVNFRDogJ21heCcsXG4gICAgICBQSUNUVVJFSU5QSUNUVVJFOiAncGljdHVyZS1pbi1waWN0dXJlJ1xuICAgIH0sXG5cbiAgICAvKiogTUVESUEgKiovXG5cbiAgICAvKipcbiAgICAgKiBUeXBlIG9mIE1lZGlhSWQgdXNlZCBieSBNZWRpYUlEXG4gICAgICpcbiAgICAgKi9cbiAgICBNZWRpYUlkVHlwZToge1xuICAgICAgVkVSU0lPTjogJ3ZlcnNpb24nLFxuICAgICAgQ0xJUDogJ2NsaXAnLFxuICAgICAgRVBJU09ERTogJ2VwaXNvZGUnLFxuICAgICAgU0VSVklDRTogJ3NlcnZpY2UnLFxuICAgICAgVlBJRDogJ3ZwaWQnLFxuICAgICAgTk9OUElQU0NPTlRFTlRJRDogJ25vbnBpcHNjb250ZW50aWQnLFxuICAgICAgUFJPRFVDRVI6ICdwcm9kdWNlcicsXG4gICAgICBCUkFORDogJ2JyYW5kJyxcbiAgICAgIFNFUklFUzogJ3NlcmllcydcbiAgICB9LFxuXG4gICAgTWVkaWFDbGlwVHlwZToge1xuICAgICAgVU5ERUZJTkVEOiB1bmRlZmluZWQsXG4gICAgICBDTElQOiAnY2xpcCcsXG4gICAgICBFUElTT0RFOiAnZXBpc29kZSdcbiAgICB9LFxuXG4gICAgTWVkaWFJbml0aWF0aW9uVHlwZToge1xuICAgICAgVU5ERUZJTkVEOiB1bmRlZmluZWQsXG4gICAgICBVU0VSOiAndXNlcicsXG4gICAgICBBVVRPOiAnYXV0bydcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogVHlwZSBvZiBBViBjb250ZW50LiBVc2VkIGluIHRoZSBjb25zdHJ1Y3Rpb24gb2YgYSBgTWVkaWFgIG9iamVjdFxuICAgICAqIEBwcm9wZXJ0eSBBVURJTyBBdWRpbyBjb250ZW50XG4gICAgICogQHByb3BlcnR5IFZJREVPIFZpZGVvIGNvbnRlbnRcbiAgICAgKi9cbiAgICBBdlR5cGU6IHtcbiAgICAgIEFVRElPOiAnYXVkaW8nLFxuICAgICAgVklERU86ICd2aWRlbydcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUmV0cmlldmFsIFR5cGUgb2YgQVYgY29udGVudC4gVXNlZCBpbiB0aGUgYE1lZGlhYFxuICAgICAqIG9iamVjdFxuICAgICAqIEBwcm9wZXJ0eSBTVFJFQU0gQ29udGVudCBpcyBiZWluZyBzdHJlYW1lZFxuICAgICAqIEBwcm9wZXJ0eSBET1dOTE9BRCBDb250ZW50IGlzIGRvd25sb2FkZWRcbiAgICAgKi9cbiAgICBSZXRyaWV2YWxUeXBlOiB7XG4gICAgICBTVFJFQU06ICdzdHJlYW0nLFxuICAgICAgRE9XTkxPQUQ6ICdkb3dubG9hZCdcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUmV0cmlldmFsIFR5cGUgb2YgQVYgY29udGVudC4gVXNlZCBhcyBhbiBhcmd1bWVudCB0byBgbWVkaWEuc2V0Rm9ybSgpYFxuICAgICAqIEBwcm9wZXJ0eSBMT05HIENvbnRlbnQgaXMgXCJsb25nXCIgKGFuIGVwaXNvZGUpXG4gICAgICogQHByb3BlcnR5IFNIT1JUIENvbnRlbnQgaXMgXCJzaG9ydFwiIChhIGNsaXApXG4gICAgICovXG4gICAgRm9ybToge1xuICAgICAgTE9ORzogJ2xvbmcnLFxuICAgICAgU0hPUlQ6ICdzaG9ydCdcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQVYgdHlwZSB0byBkaWZmZXJlbnRpYXRlIGJldHdlZW4gZXBpc29kZSBhbmQgY2xpcCxcbiAgICAgKiB0aGlzIGlzIHVzZWQgdG8gZGVjaWRlIHdoZXRoZXIgdGhlIGNvbnRlbnQgSUQgaXNcbiAgICAgKiBhIGNsaXAgb3IgZXBpc29kZVxuICAgICAqIEBwcm9wZXJ0eSBDTElQIENvbnRlbnQgaXMgYSBjbGlwXG4gICAgICogQHByb3BlcnR5IEVQSVNPREUgQ29wbnRlbnQgaXMgYW4gZXBpc29kZVxuICAgICAqL1xuICAgIFBJUHNUeXBlOiB7XG4gICAgICBDTElQOiAnY2xpcCcsXG4gICAgICBFUElTT0RFOiAnZXAnXG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFVzZWQgaW4gdGhlIGNvbnN0cnVjdGlvbiBvZiBhIE1lZGlhIG9iamVjdCwgdGhpcyB2YWx1ZVxuICAgICAqIGluZGVpY2F0ZXMgd2hldGhlciB0aGUgc3RyZWFtIGlzIFwibGl2ZVwiIG9yIFwib24tZGVtYW5kXCJcbiAgICAgKiBAcHJvcGVydHkgT05fREVNQU5EIENvbnRlbnQgaXMgT24gRGVtYW5kXG4gICAgICogQHByb3BlcnR5IExJVkUgQ29udGVudCBpcyBMaXZlXG4gICAgICovXG4gICAgTWVkaWFDb25zdW1wdGlvbk1vZGU6IHtcbiAgICAgIE9OX0RFTUFORDogJ29uZGVtYW5kJyxcbiAgICAgIExJVkU6ICdsaXZlJyxcbiAgICAgIERPV05MT0FEOiAnZG93bmxvYWQnXG4gICAgfSxcblxuICAgIEVjaG9DYWNoZU1vZGU6IHtcbiAgICAgIE9GRkxJTkU6ICdvZmZsaW5lJyxcbiAgICAgIEFMTDogJ2FsbCdcbiAgICB9LFxuXG4gICAgTWFuYWdlZExhYmVsczoge1xuICAgICAgRVZFTlRfTUFTVEVSX0JSQU5EOiAnZXZlbnRfbWFzdGVyX2JyYW5kJyxcbiAgICAgIEJCQ19TSVRFOiAnYmJjX3NpdGUnLFxuICAgICAgSVBMQVlFUl9TVEFURTogJ2lwbGF5ZXJfc3RhdGUnLFxuICAgICAgU1RPUkVfRURfVFlQRTogJ3N0b3JlX2VkX3R5cGUnLFxuICAgICAgSVBMQVlFUl9BVkFJTDogJ2lwbGF5ZXJfYXZhaWwnLFxuICAgICAgU1RPUkVfUkVGRVJSQUw6ICdzdG9yZV9yZWZlcnJhbCcsXG4gICAgICBCQkNfSEFTSEVEX0lEOiAnYmJjX2hpZCdcbiAgICB9LFxuXG4gICAgUmVwb3J0aW5nUHJvZmlsZXM6IHJlcG9ydGluZ1Byb2ZpbGVzLFxuXG4gICAgRXNzRXJyb3I6IHtcbiAgICAgIFNUQVRVU19DT0RFOiAnc3RhdHVzX2NvZGUnLFxuICAgICAgVElNRU9VVDogJ3RpbWVvdXQnLFxuICAgICAgSlNPTjogJ2pzb24nLFxuICAgICAgUlVOVElNRTogJ3J1bnRpbWVfZXJyb3InXG4gICAgfSxcblxuICAgIERlc3RpbmF0aW9uczogZGVzdGluYXRpb25zLFxuXG4gICAgUHJvZHVjZXJzOiBwcm9kdWNlcnMsXG5cbiAgICBFY2hvTGFiZWxLZXlzOiBBVElMYWJlbEtleXNcbiAgfTtcblxuICByZXR1cm4gZXhwb3J0cztcbn0pO1xuIiwiLyoqXG4gKiBBIGNsYXNzIHRvIGFsbG93IGZvciB2YXJpZWQgZW5yaW9ubWVudHMuXG4gKiBBbiBpbnN0YW5jZSBvZiB0aGlzIGNhbiBiZSBwYXNzZWQgaW50byBFY2hvQ2xpZW50IGNvbnN0cnVjdG9yLlxuICogRGVmYXVsdCB2YWx1ZXMgYXJlIGZvciBhIHN0YW5kYXJkIHdlYiBlbnZpcm9ubWVudC5cbiAqIEBleHBvcnRzIEVjaG8vRW52aXJvbm1lbnRcbiAqL1xuZGVmaW5lKGZ1bmN0aW9uKHJlcXVpcmUpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIHZhciBMYWJlbENsZWFuc2VyID0gcmVxdWlyZSgnLi91dGlsL2NsZWFuc2luZy9sYWJlbC1jbGVhbnNlcicpO1xuICB2YXIgQ29va2llcyA9IHJlcXVpcmUoJy4vdXRpbC9jb29raWVzJyk7XG4gIHZhciBOZXR3b3JraW5nID0gcmVxdWlyZSgnLi91dGlsL25ldHdvcmtpbmcnKTtcblxuICB2YXIgb3JiQ29va2llcztcbiAgdmFyIG9yYklkQ3RhO1xuXG4gIC8vIG11c3QgYmUgaW5pdGlhbGlzZWQgYXMgdW5kZWZpbmVkXG4gIHZhciBvcmJJZEN0YUlzQXZhaWxhYmxlO1xuICB2YXIgb3JiSWRDdGFJc0xvYWRpbmcgPSBmYWxzZTtcbiAgdmFyIG9yYklkQ3RhQ2FsbGJhY2tzID0gW107XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpc2UgYW4gRW52aXJvbm1lbnQgb2JqZWN0XG4gICAqIEFuIGluc3RhbmNlIG9mIHRoaXMgY2FuIGJlIHBhc3NlZCBpbnRvIEVjaG9DbGllbnQgY29uc3RydWN0b3JcbiAgICogRGVmYXVsdCB2YWx1ZXMgYXJlIGZvciBhIHN0YW5kYXJkIHdlYiBlbnZpcm9ubWVudC4gSWYgdGhlc2UgYXJlIGZpbmVcbiAgICogZm9yIHlvdXIgcHVycG9zZXMsIHRoZW4gdGhpcyBjbGFzcyBkb2VzIG5vdCBuZWVkIHRvIGJlIHVzZWQgYW5kIG5vdGhpbmdcbiAgICogbmVlZCBiZSBwYXNzZWQgaW50byBgbmV3IEVjaG9DbGllbnQoKWBcbiAgICogQGNvbnN0cnVjdG9yXG4gICAqL1xuICBmdW5jdGlvbiBFbnZpcm9ubWVudCgpIHtcbiAgICB2YXIgc2NyZWVuID0gd2luZG93LnNjcmVlbiB8fCB7fTtcbiAgICB2YXIgbmF2aWdhdG9yID0gd2luZG93Lm5hdmlnYXRvciB8fCB7fTtcbiAgICB2YXIgZG9jdW1lbnQgPSB3aW5kb3cuZG9jdW1lbnQgfHwge307XG5cbiAgICB0aGlzLl9wbGF0Zm9ybVJ1bnRpbWVFbnZpcm9ubWVudCA9ICdodG1sJztcbiAgICB0aGlzLl9wbGF0Zm9ybU9TVmVyc2lvbiA9ICc1JzsgLy9UT0RPXG5cbiAgICB0aGlzLl9zY3JlZW5SZXNvbHV0aW9uID0gKHNjcmVlbi53aWR0aCB8fCAnLScpICtcbiAgICAgICd4JyArIChzY3JlZW4uaGVpZ2h0IHx8ICctJyk7XG5cbiAgICB0aGlzLl9sYW5ndWFnZSA9IG5hdmlnYXRvci5sYW5ndWFnZSB8fCAnJztcbiAgICB0aGlzLl9wbGF0Zm9ybU5hbWUgPSBuYXZpZ2F0b3IucGxhdGZvcm0gfHwgJyc7XG5cbiAgICB0aGlzLl9jaGFyc2V0ID0gZG9jdW1lbnQuY2hhcmFjdGVyU2V0IHx8IGRvY3VtZW50LmRlZmF1bHRDaGFyc2V0IHx8ICcnO1xuICAgIHRoaXMuX3RpdGxlID0gZG9jdW1lbnQudGl0bGUgfHwgJyc7XG4gICAgdGhpcy5fdXJsID0gZG9jdW1lbnQuVVJMIHx8ICcnO1xuICAgIHRoaXMuX3JlZmVycmVyID0gZG9jdW1lbnQucmVmZXJyZXIgfHwgJyc7XG5cbiAgICB0aGlzLl9kZXZpY2VOYW1lID0gbnVsbDsgLy8gRG9udCBzZW5kIGlmIG5vdCBzZXRcblxuICAgIHRoaXMuX2h0dHBHZXQgPSBudWxsO1xuICAgIHRoaXMuX2V4ZWN1dGVDcm9zc0RvbWFpbkdldCA9IG51bGw7XG5cbiAgICB0aGlzLl9nZXRDb29raWUgPSBudWxsOyAvLyBzaW1pbGFybHlcbiAgICB0aGlzLl9zZXRDb29raWUgPSBudWxsO1xuXG4gICAgdGhpcy5fc2V0TG9jYWxTdG9yYWdlSXRlbSA9IG51bGw7XG4gICAgdGhpcy5fZ2V0TG9jYWxTdG9yYWdlSXRlbSA9IG51bGw7XG4gIH1cblxuICBFbnZpcm9ubWVudC5fZGVmYXVsdEh0dHBHZXQgPSBOZXR3b3JraW5nLmh0dHBHZXQ7XG4gIEVudmlyb25tZW50Ll9kZWZhdWx0R2V0Q29va2llID0gQ29va2llcy5nZXRDb29raWVWYWx1ZUJ5TmFtZTtcblxuICBFbnZpcm9ubWVudC5wcm90b3R5cGUuZ2V0UGxhdGZvcm1OYW1lID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX3BsYXRmb3JtTmFtZTtcbiAgfTtcblxuICBFbnZpcm9ubWVudC5wcm90b3R5cGUuZ2V0UGxhdGZvcm1SdW50aW1lRW52aXJvbm1lbnQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5fcGxhdGZvcm1SdW50aW1lRW52aXJvbm1lbnQ7XG4gIH07XG5cbiAgRW52aXJvbm1lbnQucHJvdG90eXBlLmdldFBsYXRmb3JtT1NWZXJzaW9uID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX3BsYXRmb3JtT1NWZXJzaW9uO1xuICB9O1xuXG4gIEVudmlyb25tZW50LnByb3RvdHlwZS5nZXREZXZpY2VOYW1lID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX2RldmljZU5hbWU7XG4gIH07XG5cbiAgRW52aXJvbm1lbnQucHJvdG90eXBlLmdldFNjcmVlblJlc29sdXRpb24gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5fc2NyZWVuUmVzb2x1dGlvbjtcbiAgfTtcblxuICBFbnZpcm9ubWVudC5wcm90b3R5cGUuZ2V0TGFuZ3VhZ2UgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5fbGFuZ3VhZ2U7XG4gIH07XG5cbiAgRW52aXJvbm1lbnQucHJvdG90eXBlLmdldEh0dHBHZXQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5faHR0cEdldDtcbiAgfTtcblxuICBFbnZpcm9ubWVudC5wcm90b3R5cGUuc2V0RXhlY3V0ZUNyb3NzRG9tYWluR2V0ID0gZnVuY3Rpb24oZXhlY3V0ZUNyb3NzRG9tYWluR2V0KSB7XG4gICAgdGhpcy5fZXhlY3V0ZUNyb3NzRG9tYWluR2V0ID0gZXhlY3V0ZUNyb3NzRG9tYWluR2V0O1xuICB9O1xuXG4gIEVudmlyb25tZW50LnByb3RvdHlwZS5nZXRFeGVjdXRlQ3Jvc3NEb21haW5HZXQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgZXhlY3V0ZUNyb3NzRG9tYWluR2V0O1xuICAgIGlmICh0aGlzLl9leGVjdXRlQ3Jvc3NEb21haW5HZXQpIHtcbiAgICAgIGV4ZWN1dGVDcm9zc0RvbWFpbkdldCA9IHRoaXMuX2V4ZWN1dGVDcm9zc0RvbWFpbkdldDtcbiAgICB9IGVsc2Uge1xuICAgICAgZXhlY3V0ZUNyb3NzRG9tYWluR2V0ID0gTmV0d29ya2luZy5leGVjdXRlQ3Jvc3NEb21haW5HZXQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIGV4ZWN1dGVDcm9zc0RvbWFpbkdldDtcbiAgfTtcblxuICBFbnZpcm9ubWVudC5wcm90b3R5cGUuZ2V0Q29va2llR2V0dGVyID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX2dldENvb2tpZTtcbiAgfTtcblxuICBFbnZpcm9ubWVudC5wcm90b3R5cGUuZ2V0Q29va2llU2V0dGVyID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX3NldENvb2tpZTtcbiAgfTtcblxuICBFbnZpcm9ubWVudC5wcm90b3R5cGUuZ2V0Q2hhclNldCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl9jaGFyc2V0O1xuICB9O1xuXG4gIEVudmlyb25tZW50LnByb3RvdHlwZS5nZXRUaXRsZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl90aXRsZTtcbiAgfTtcblxuICBFbnZpcm9ubWVudC5wcm90b3R5cGUuZ2V0VVJMID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX3VybDtcbiAgfTtcblxuICBFbnZpcm9ubWVudC5wcm90b3R5cGUuZ2V0UHJvdG9jb2wgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRVUkwoKS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoJ2h0dHA6JywgMCkgIT09IDAgPyAnaHR0cHM6JyA6ICdodHRwOic7XG4gIH07XG5cbiAgRW52aXJvbm1lbnQucHJvdG90eXBlLmdldFJlZmVycmVyID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX3JlZmVycmVyO1xuICB9O1xuXG4gIEVudmlyb25tZW50LnByb3RvdHlwZS5zZXRTZXRMb2NhbFN0b3JhZ2VJdGVtID0gZnVuY3Rpb24oc2V0TG9jYWxTdG9yYWdlSXRlbSkge1xuICAgIHRoaXMuX3NldExvY2FsU3RvcmFnZUl0ZW0gPSBzZXRMb2NhbFN0b3JhZ2VJdGVtO1xuICB9O1xuXG4gIEVudmlyb25tZW50LnByb3RvdHlwZS5nZXRTZXRMb2NhbFN0b3JhZ2VJdGVtID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX3NldExvY2FsU3RvcmFnZUl0ZW07XG4gIH07XG5cbiAgRW52aXJvbm1lbnQucHJvdG90eXBlLnNldEdldExvY2FsU3RvcmFnZUl0ZW0gPSBmdW5jdGlvbihnZXRMb2NhbFN0b3JhZ2VJdGVtKSB7XG4gICAgdGhpcy5fZ2V0TG9jYWxTdG9yYWdlSXRlbSA9IGdldExvY2FsU3RvcmFnZUl0ZW07XG4gIH07XG5cbiAgRW52aXJvbm1lbnQucHJvdG90eXBlLmdldEdldExvY2FsU3RvcmFnZUl0ZW0gPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2dldExvY2FsU3RvcmFnZUl0ZW07XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgXCJQbGF0Zm9ybSBOYW1lXCIuIElmIHRoaXMgbWV0aG9kIGlzIG5vdCBjYWxsZWQgdGhlXG4gICAqIGRlZmF1bHQgdmFsdWUgd2lsbCBiZSBgd2luZG93Lm5hdmlnYXRvci5wbGF0Zm9ybWBcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAgICogQHJldHVybnMge3RoaXN9IGB0aGlzYFxuICAgKi9cbiAgRW52aXJvbm1lbnQucHJvdG90eXBlLnNldFBsYXRmb3JtTmFtZSA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICB0aGlzLl9wbGF0Zm9ybU5hbWUgPSBuYW1lO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTZXQgdGhlIFwiUGxhdGZvcm0gUnVudGltZSBFbnZpcm9ubWVudFwiIGFuZCB0aGUgXCJQbGF0Zm9ybSBPUyBWZXJzaW9uXCIuXG4gICAqIElmIHRoaXMgbWV0aG9kIGlzIG5vdCBjYWxsZWQgdGhlIGRlZmF1bHRzIHdpbGwgYmUgYCdodG1sJ2AgYW5kIGAnNSdgXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBwbGF0Zm9ybVJ1bnRpbWVFbnZpcm9ubWVudFxuICAgKiBAcGFyYW0ge3N0cmluZ30gcGxhdGZvcm1PU1ZlcnNpb25cbiAgICogQHJldHVybnMge3RoaXN9IGB0aGlzYFxuICAgKi9cbiAgRW52aXJvbm1lbnQucHJvdG90eXBlLnNldFBsYXRmb3JtID1cbiAgICBmdW5jdGlvbihwbGF0Zm9ybVJ1bnRpbWVFbnZpcm9ubWVudCwgcGxhdGZvcm1PU1ZlcnNpb24pIHtcbiAgICB0aGlzLl9wbGF0Zm9ybVJ1bnRpbWVFbnZpcm9ubWVudCA9IHBsYXRmb3JtUnVudGltZUVudmlyb25tZW50O1xuICAgIHRoaXMuX3BsYXRmb3JtT1NWZXJzaW9uID0gcGxhdGZvcm1PU1ZlcnNpb247XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgXCJEZXZpY2UgTmFtZVwiLiBJZiB0aGlzIG1ldGhvZCBpcyBub3QgY2FsbGVkIHRoZVxuICAgKiBkZWZhdWx0IHZhbHVlIHdpbGwgbm90IGJlIHNldCAoYW5kIHBvdGVudGlhbGx5IHBvcGx1YXRlZCBzZXJ2ZXItc2lkZSlcbiAgICogQHBhcmFtIHtzdHJpbmd9IGRldmljZU5hbWVcbiAgICogQHJldHVybnMge3RoaXN9IGB0aGlzYFxuICAgKi9cbiAgRW52aXJvbm1lbnQucHJvdG90eXBlLnNldERldmljZU5hbWUgPSBmdW5jdGlvbihkZXZpY2VOYW1lKSB7XG4gICAgdGhpcy5fZGV2aWNlTmFtZSA9IGRldmljZU5hbWU7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgU2NyZWVuIFJlc291bHRpb24uIElmIHRoaXMgbWV0aG9kIGlzIG5vdCBjYWxsZWQgdGhlXG4gICAqIGRlZmF1bHQgd2lsbCBiZSBgd2luZG93LnNjcmVlbi5hdmFpbFdpZHRoICsgJ3gnICtcbiAgICogd2luZG93LnNjcmVlbi5hdmFpbEhlaWdodGBcbiAgICogQHBhcmFtIHtzdHJpbmd9IHNjcmVlblJlc29sdXRpb25cbiAgICogQGV4YW1wbGUgZW52LnNldFNjcmVlblJlc29sdXRpb24oJzIwMHgzMDAnKTtcbiAgICovXG4gIEVudmlyb25tZW50LnByb3RvdHlwZS5zZXRTY3JlZW5SZXNvbHV0aW9uID0gZnVuY3Rpb24oc2NyZWVuUmVzb2x1dGlvbikge1xuICAgIHRoaXMuX3NjcmVlblJlc29sdXRpb24gPSBzY3JlZW5SZXNvbHV0aW9uO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTZXQgdGhlIFwiZGV2aWNlIExhbmd1YWdlIChsb2NhbGUpXCIuIElmIHRoaXMgbWV0aG9kIGlzIG5vdCBjYWxsZWQgdGhlXG4gICAqIGRlZmF1bHQgdmFsdWUgd2lsbCBiZSBgd2luZG93Lm5hdmlnYXRvci5sYW5ndWFnZWAuIFRoaXMgc2hvdWxkIG5vdCBiZVxuICAgKiBjb25mdXNlZCB3aXRoIHRoZSBgc2V0Q29udGVudExhbmd1YWdlKClgIEVjaG9DbGllbnQgaW5zdGFuY2UgbWV0aG9kIHdoaWNoXG4gICAqIGFza3MgZm9yIHRoZSBsYW5ndWFnZSBiZWluZyBkaXNwbGF5ZWRcbiAgICogQHBhcmFtIHtzdHJpbmd9IGxhbmd1YWdlXG4gICAqIEByZXR1cm5zIHt0aGlzfSBgdGhpc2BcbiAgICovXG4gIEVudmlyb25tZW50LnByb3RvdHlwZS5zZXRMYW5ndWFnZSA9IGZ1bmN0aW9uKGxhbmd1YWdlKSB7XG4gICAgLy8gRUNITy0xMlxuICAgIHRoaXMuX2xhbmd1YWdlID0gTGFiZWxDbGVhbnNlci5jbGVhbkxhbmd1YWdlKGxhbmd1YWdlKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogU2V0IGEgZnVuY3Rpb24gdG8gdXNlIGZvciBodHRwR2V0IHJlcXVlc3QuIElmIHRoaXMgbWV0aG9kIGlzIG5vdCBjYWxsZWRcbiAgICogQUpBWCBvciBhbiBgSW1hZ2VgIG9iamVjdCB3aWxsIGJlIHVzZWRcbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gaHR0cEdldFxuICAgKiBAcmV0dXJucyB7dGhpc30gYHRoaXNgXG4gICAqIEBleGFtcGxlXG4gICAqIGVudi5zZXRIdHRwR2V0KGZ1bmN0aW9uKHVybCxoZWFkZXJzLG9uU3VjY2VzcyxvbkVycm9yKXtcbiAgICogICAgIHZhciBpbWcgPSBuZXcgSW1hZ2UoKTtcbiAgICogICAgIGltZy5zcmMgPSB1cmw7XG4gICAqICAgICBpZihvblN1Y2Nlc3Mpe1xuICAgKiAgICAgICAgIGltZy5vbmxvYWQgPSBvblN1Y2Nlc3M7XG4gICAqICAgICB9XG4gICAqICAgICBpZihvbkVycm9yKXtcbiAgICogICAgICAgICBpbWcub25lcnJvciA9IG9uRXJyb3I7XG4gICAqICAgICB9XG4gICAqIH0pO1xuICAgKi9cbiAgRW52aXJvbm1lbnQucHJvdG90eXBlLnNldEh0dHBHZXQgPSBmdW5jdGlvbihodHRwR2V0KSB7XG4gICAgdGhpcy5faHR0cEdldCA9IGh0dHBHZXQ7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldCBhIGZ1bmN0aW9uIHRvIHVzZSBmb3IgZ2V0dGluZyBjb29raWVzIGZyb20gdGhlIGVudmlyb25tZW50LlxuICAgKiBJZiB0aGlzIG1ldGhvZCBpcyBub3QgY2FsbGVkLCBjb29raWVzIHdpbGwgYmUgc2VhcmNoZWQgZm9yIGluXG4gICAqIGBkb2N1bWVudC5jb29raWVgXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IGdldENvb2tpZVxuICAgKiBAcmV0dXJucyB7dGhpc30gYHRoaXNgXG4gICAqIEBleGFtcGxlXG4gICAqIGVudi5zZXRDb29raWVHZXR0ZXIoZnVuY3Rpb24obmFtZSl7XG4gICAqICAgICAvLyBnZXQgYW5kIHJldHVybiB0aGUgXCJuYW1lXCIgY29va2llXG4gICAqIH0pO1xuICAgKi9cbiAgRW52aXJvbm1lbnQucHJvdG90eXBlLnNldENvb2tpZUdldHRlciA9IGZ1bmN0aW9uKGdldENvb2tpZSkge1xuICAgIHRoaXMuX2dldENvb2tpZSA9IGdldENvb2tpZTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogU2V0IGEgZnVuY3Rpb24gdG8gdXNlIGZvciBzZXR0aW5nIGNvb2tpZXMuXG4gICAqIElmIHRoaXMgbWV0aG9kIGlzIG5vdCBjYWxsZWQsIGNvb2tpZXMgd2lsbCBiZSBzZXQgb24gYGRvY3VtZW50LmNvb2tpZWBcbiAgICogU2VlIHRoZSBleGFtcGxlIGZvciBhbiBleGFtcGxlIHRoYXQgd2lsbCB3b3JrIG9uIHRoZSB3ZWIuIFRoZSBwYXNzZWRcbiAgICogbWV0aG9kIHNob3VsZCBhY2NlcHQgYWxsIHRoZSBwYXJhbWV0ZXJzIHdoaWNoIHRoZSBleG1hcGxlIG1ldGhvZCBkb2VzOlxuICAgKlxuICAgKiB8TmFtZXxUeXBlfERlc2NyaXB0aW9ufFxuICAgKiB8LS0tLXwtLS0tfC0tLS0tLS0tLS0tfFxuICAgKiB8YGtleWB8U3RyaW5nfFRoZSBuYW1lIG9mIHRoZSBjb29raWV8XG4gICAqIHxgdmFsdWVgfFN0cmluZ3xUaGUgY29va2llIHZhbHVlfFxuICAgKiB8YHBhdGhgfFN0cmluZ3xUaGUgcGF0aCB0byBzZXQgdGhlIGNvb2tpZSBvbnxcbiAgICogfGBtYXhBZ2VgfEludGVnZXJ8VGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdW50aWwgdGhlIGNvb2tpZSBleHBpcmVzfFxuICAgKlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBzZXRDb29raWVcbiAgICogQHJldHVybnMge3RoaXN9IGB0aGlzYFxuICAgKiBAZXhhbXBsZVxuICAgKiBlbnYuc2V0Q29va2llU2V0dGVyKGZ1bmN0aW9uKGtleSx2YWx1ZSxwYXRoLG1heEFnZSl7XG4gICAqICAgICB2YXIgdCA9IG5ldyBEYXRlKCk7XG4gICAqICAgICB0LnNldFRpbWUodC5nZXRUaW1lKCkgKyBtYXhBZ2UpO1xuICAgKlxuICAgKiAgICAgZG9jdW1lbnQuY29va2llID0ga2V5ICsgJz0nICsgdmFsdWUgKyAnOycgK1xuICAgKiAgICAgICAgICAgICAgICAgICAgICAgJyBleHBpcmVzPScgKyB0LnRvVVRDU3RyaW5nKCkgKyAnOycgK1xuICAgKiAgICAgICAgICAgICAgICAgICAgICAgJyBwYXRoPScgKyBwYXRoICsgJzsnO1xuICAgKiB9KTtcbiAgICovXG4gIEVudmlyb25tZW50LnByb3RvdHlwZS5zZXRDb29raWVTZXR0ZXIgPSBmdW5jdGlvbihzZXRDb29raWUpIHtcbiAgICB0aGlzLl9zZXRDb29raWUgPSBzZXRDb29raWU7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgXCJDaGFyYWN0ZXIgU2V0XCIuIElmIHRoaXMgbWV0aG9kIGlzIG5vdCBjYWxsZWQgdGhlXG4gICAqIGRlZmF1bHQgdmFsdWUgd2lsbCBiZSBgZG9jdW1lbnQuY2hhcmFjdGVyU2V0YCBvciwgZmFpbGluZyB0aGF0XG4gICAqIGBkb2N1bWVudC5kZWZhdWx0Q2hhcnNldGBcbiAgICogQHBhcmFtIHtzdHJpbmd9IGNoYXJTZXRcbiAgICogQHJldHVybnMge3RoaXN9IGB0aGlzYFxuICAgKi9cbiAgRW52aXJvbm1lbnQucHJvdG90eXBlLnNldENoYXJTZXQgPSBmdW5jdGlvbihjaGFyU2V0KSB7XG4gICAgdGhpcy5fY2hhcnNldCA9IGNoYXJTZXQ7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgcGFnZSB0aXRsZS4gSWYgdGhpcyBtZXRob2QgaXMgbm90IGNhbGxlZCB0aGVcbiAgICogZGVmYXVsdCB2YWx1ZSB3aWxsIGJlIGBkb2N1bWVudC50aXRsZWBcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRpdGxlXG4gICAqIEByZXR1cm5zIHt0aGlzfSBgdGhpc2BcbiAgICovXG4gIEVudmlyb25tZW50LnByb3RvdHlwZS5zZXRUaXRsZSA9IGZ1bmN0aW9uKHRpdGxlKSB7XG4gICAgdGhpcy5fdGl0bGUgPSB0aXRsZTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogU2V0IHRoZSBjdXJyZW50IFVSTC4gSWYgdGhpcyBtZXRob2QgaXMgbm90IGNhbGxlZCB0aGVcbiAgICogZGVmYXVsdCB2YWx1ZSB3aWxsIGJlIGBkb2N1bWVudC5VUkxgXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1cmxcbiAgICogQHJldHVybnMge3RoaXN9IGB0aGlzYFxuICAgKi9cbiAgRW52aXJvbm1lbnQucHJvdG90eXBlLnNldFVSTCA9IGZ1bmN0aW9uKHVybCkge1xuICAgIHRoaXMuX3VybCA9IHVybDtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogU2V0IHRoZSByZWZlcnJlciB1cmwuIElmIHRoaXMgbWV0aG9kIGlzIG5vdCBjYWxsZWQgdGhlXG4gICAqIGRlZmF1bHQgdmFsdWUgd2lsbCBiZSBgZG9jdW1lbnQucmVmZXJyZXJgXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByZWZcbiAgICogQHJldHVybnMge3RoaXN9IGB0aGlzYFxuICAgKi9cbiAgRW52aXJvbm1lbnQucHJvdG90eXBlLnNldFJlZmVycmVyID0gZnVuY3Rpb24ocmVmKSB7XG4gICAgdGhpcy5fcmVmZXJyZXIgPSByZWY7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgRW52aXJvbm1lbnQuc2V0T3JiQ29va2llcyA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgb3JiQ29va2llcyA9IHZhbHVlO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIEVudmlyb25tZW50LmdldE9yYkNvb2tpZXMgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gb3JiQ29va2llcztcbiAgfTtcblxuICBFbnZpcm9ubWVudC5nZXRPcmJDb29raWVzUG9saWN5ID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKG9yYkNvb2tpZXMgJiYgdHlwZW9mIG9yYkNvb2tpZXMucmVhZFBvbGljeSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcmV0dXJuIG9yYkNvb2tpZXMucmVhZFBvbGljeSgpO1xuICAgIH1cbiAgfTtcblxuICBFbnZpcm9ubWVudC5zZXRPcmJJZEN0YSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgb3JiSWRDdGEgPSB2YWx1ZTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBFbnZpcm9ubWVudC5nZXRPcmJJZEN0YSA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG5cbiAgICB2YXIgY2FsbGJhY2tJbmRleDtcblxuICAgIHZhciBzYWZlQ2FsbGJhY2sgPSBmdW5jdGlvbihwb3RlbnRpYWxDYWxsYmFjaywgb3JiSWRDdGEpIHtcbiAgICAgIGlmIChwb3RlbnRpYWxDYWxsYmFjayAmJiB0eXBlb2YgcG90ZW50aWFsQ2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcG90ZW50aWFsQ2FsbGJhY2sob3JiSWRDdGEpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBpZiAob3JiSWRDdGEgIT09IHVuZGVmaW5lZCkge1xuICAgICAgc2FmZUNhbGxiYWNrKGNhbGxiYWNrLCBvcmJJZEN0YSk7XG4gICAgICByZXR1cm47XG4gICAgfSBlbHNlIGlmIChvcmJJZEN0YUlzQXZhaWxhYmxlID09PSBmYWxzZSkge1xuICAgICAgc2FmZUNhbGxiYWNrKGNhbGxiYWNrKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBvcmJJZEN0YUNhbGxiYWNrcy5wdXNoKGNhbGxiYWNrKTtcblxuICAgIC8qKlxuICAgICAqIFdlIHVzZSB3aW5kb3cucmVxdWlyZSBoZXJlIHJhdGhlciB0aGFuIHRoZSBsb2NhbCByZXF1aXJlIChmcm9tICdlY2hvLmpzJylcbiAgICAgKiBhcyB3ZSB3YW50IHRvIGJlIGFibGUgdG8gY29udHJvbCByZXF1aXJlIGJlaGF2aW91ciBpbiBpbnRlZ3JhdGlvbiB0ZXN0cy5cbiAgICAgKi9cbiAgICB2YXIgcmVxdWlyZSA9IHdpbmRvdy5yZXF1aXJlO1xuICAgIGlmIChvcmJJZEN0YUlzQXZhaWxhYmxlID09PSB1bmRlZmluZWQgJiYgcmVxdWlyZSkge1xuICAgICAgb3JiSWRDdGFJc0F2YWlsYWJsZSA9IHR5cGVvZiByZXF1aXJlLmRlZmluZWQgPT09ICdmdW5jdGlvbicgJiZcbiAgICAgICAgcmVxdWlyZS5kZWZpbmVkKCdpZGN0YS9pZGN0YS0xJyk7XG5cbiAgICAgIC8vIHdlIGFyZSBsb29raW5nIGludG8gdGhlIGludGVyYWxzIG9mIHJlcXVpcmUgc28gYmVcbiAgICAgIC8vIGFzIGRlZmVuc2l2ZSBhcyBwb3NzaWJsZVxuICAgICAgaWYgKFxuICAgICAgICAhb3JiSWRDdGFJc0F2YWlsYWJsZSAmJlxuICAgICAgICByZXF1aXJlLnMgJiZcbiAgICAgICAgcmVxdWlyZS5zLmNvbnRleHRzICYmXG4gICAgICAgIHJlcXVpcmUucy5jb250ZXh0cy5fICYmXG4gICAgICAgIHJlcXVpcmUucy5jb250ZXh0cy5fLmNvbmZpZyAmJlxuICAgICAgICByZXF1aXJlLnMuY29udGV4dHMuXy5jb25maWcucGF0aHMgJiZcbiAgICAgICAgcmVxdWlyZS5zLmNvbnRleHRzLl8uY29uZmlnLnBhdGhzLmlkY3RhXG4gICAgICApIHtcbiAgICAgICAgb3JiSWRDdGFJc0F2YWlsYWJsZSA9IHRydWU7XG4gICAgICB9XG5cbiAgICB9IGVsc2Uge1xuICAgICAgb3JiSWRDdGFJc0F2YWlsYWJsZSA9IGZhbHNlO1xuICAgIH1cblxuICAgIC8vIGxvYWQgdGhlIGlkY3RhIGlzIGF2YWlsYWJsZSBhbmQgbm90IGFscmVhZHkgYmVpbmcgbG9hZGVkXG4gICAgaWYgKG9yYklkQ3RhSXNBdmFpbGFibGUgJiYgIW9yYklkQ3RhSXNMb2FkaW5nKSB7XG4gICAgICBvcmJJZEN0YUlzTG9hZGluZyA9IHRydWU7XG5cbiAgICAgIHdpbmRvdy5yZXF1aXJlKFsnaWRjdGEvaWRjdGEtMSddLCBmdW5jdGlvbihpZGN0YSkge1xuICAgICAgICBvcmJJZEN0YSA9IGlkY3RhO1xuICAgICAgICBmb3IgKGNhbGxiYWNrSW5kZXggPSAwOyBjYWxsYmFja0luZGV4IDwgb3JiSWRDdGFDYWxsYmFja3MubGVuZ3RoOyBvcmJJZEN0YUNhbGxiYWNrcysrKSB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgb3JiSWRDdGFDYWxsYmFja3NbY2FsbGJhY2tJbmRleF0gJiZcbiAgICAgICAgICAgIHR5cGVvZiBvcmJJZEN0YUNhbGxiYWNrc1tjYWxsYmFja0luZGV4XSA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICAgICkge1xuICAgICAgICAgICAgc2FmZUNhbGxiYWNrKG9yYklkQ3RhQ2FsbGJhY2tzW2NhbGxiYWNrSW5kZXhdLCBvcmJJZEN0YSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKG9yYklkQ3RhSXNBdmFpbGFibGUgPT09IGZhbHNlKSB7XG4gICAgICBzYWZlQ2FsbGJhY2soY2FsbGJhY2spO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gRW52aXJvbm1lbnQ7XG59KTtcbiIsImRlZmluZShbXG4gICcuL3BsYXloZWFkJyxcbiAgJy4vZGVsZWdhdGUvY29tc2NvcmUvbGFiZWwta2V5cycsXG4gICcuL3NjaGVkdWxlJyxcbiAgJy4vbWVkaWEnXG5dLCBmdW5jdGlvbihQbGF5aGVhZCwgQ1NLZXlzLCBTY2hlZHVsZSwgTWVkaWEpIHtcblxuICAndXNlIHN0cmljdCc7XG5cbiAgdmFyIE5PX0JST0FEQ0FTVCA9ICduby1icm9hZGNhc3QnO1xuICB2YXIgVVBEQVRFX0lOVEVSVkFMID0gMTAwMDtcbiAgdmFyIFRJTUVTVEFNUF9EUklGVF9UT0xFUkFOQ0UgPSAxNTAwO1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge09iamVjdH0gcGxheWVyRGVsZWdhdGVcbiAgICogQHBhcmFtIHtNZWRpYX0gbWVkaWEgdGhlIGN1cnJlbnQgbWVkaWEgaXRlbVxuICAgKiBAcGFyYW0ge0VjaG9DbGllbnR9IGVjaG9DbGllbnRcbiAgICogQHBhcmFtIHtPYmVjdH0gZW52aXJvbm1lbnRcbiAgICogQHBhcmFtIHtCb29sZWFufSBlc3NFbmFibGVkXG4gICAqIEBjb25zdHJ1Y3RvclxuICAgKi9cbiAgZnVuY3Rpb24gTGl2ZUJyb2tlcihcbiAgICBwbGF5ZXJEZWxlZ2F0ZSwgbWVkaWEsIGVjaG9DbGllbnQsIGVudmlyb25tZW50LCBlc3NFbmFibGVkXG4gICkge1xuXG4gICAgdGhpcy5fcGxheWVyRGVsZWdhdGUgPSBwbGF5ZXJEZWxlZ2F0ZTtcbiAgICB0aGlzLl9wbGF5aGVhZCA9IG5ldyBQbGF5aGVhZCgpO1xuICAgIHRoaXMuX2lzU3RhcnRlZCA9IGZhbHNlO1xuICAgIHRoaXMuX2ludGVydmFsID0gbnVsbDtcbiAgICB0aGlzLl9lY2hvQ2xpZW50ID0gZWNob0NsaWVudDtcbiAgICB0aGlzLl9icm9hZGNhc3QgPSBOT19CUk9BRENBU1Q7XG4gICAgdGhpcy5fcGxheWVyRGVsZWdhdGVUaW1lc3RhbXAgPSAwO1xuICAgIHRoaXMuX3ByZXZpb3VzUG9zaXRpb24gPSAwO1xuICAgIHRoaXMuX3BsYXlpbmdUaW1lID0gMDtcbiAgICB0aGlzLl9tZWRpYSA9IG1lZGlhO1xuICAgIHRoaXMuX2Vudmlyb25tZW50ID0gZW52aXJvbm1lbnQ7XG4gICAgdGhpcy5fZXNzRW5hYmxlZCA9IGVzc0VuYWJsZWQ7XG4gICAgdGhpcy5faGIzTm90U2VudFlldCA9IHRydWU7XG4gICAgdGhpcy5faGI1Tm90U2VudFlldCA9IHRydWU7XG5cbiAgICB0aGlzLl9pc1JlY2lldmluZ1BsYXllclRpbWVzdGFtcCA9IGZhbHNlO1xuICAgIHRoaXMuX3VwZGF0ZVRpbWUgPSAwO1xuXG4gICAgaWYgKHRoaXMuX2Vzc0VuYWJsZWQpIHtcbiAgICAgIHRoaXMuX3NjaGVkdWxlID0gbmV3IFNjaGVkdWxlKG1lZGlhLCBlbnZpcm9ubWVudCwgZWNob0NsaWVudCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFN0YXJ0IHVwIHRoZSBicm9rZXJcbiAgICovXG4gIExpdmVCcm9rZXIucHJvdG90eXBlLnN0YXJ0ID0gZnVuY3Rpb24oKSB7XG5cbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICBpZiAodGhpcy5faXNTdGFydGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5faW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHtcbiAgICAgIHNlbGYuX3VwZGF0ZSgpO1xuICAgIH0sIFVQREFURV9JTlRFUlZBTCk7XG5cbiAgICB0aGlzLl9pc1N0YXJ0ZWQgPSB0cnVlO1xuXG4gICAgaWYgKCF0aGlzLl9pc1JlY2lldmluZ1BsYXllclRpbWVzdGFtcCkge1xuICAgICAgdGhpcy5fcGxheWhlYWQuc3RhcnQoKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFN0b3AgdGhlIGJyb2tlclxuICAgKi9cbiAgTGl2ZUJyb2tlci5wcm90b3R5cGUuc3RvcCA9IGZ1bmN0aW9uKCkge1xuICAgIGNsZWFySW50ZXJ2YWwodGhpcy5faW50ZXJ2YWwpO1xuICAgIHRoaXMuX3BsYXloZWFkLnN0b3AoKTtcbiAgICB0aGlzLl9pc1N0YXJ0ZWQgPSBmYWxzZTtcbiAgfTtcblxuICAvKipcbiAgICogQ2hlY2sgdG8gc2VlIGlmIHRoZSBicm9hZGNhc3QgaGFzIGNoYW5nZWQgYmFzZWQgb24gdGhlIGN1cnJlbnQgcGxheWVyIHRpbWUuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBMaXZlQnJva2VyLnByb3RvdHlwZS5fdXBkYXRlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHBsYXllckRlbGVnYXRlVGltZXN0YW1wID0gcGFyc2VJbnQodGhpcy5fcGxheWVyRGVsZWdhdGUuZ2V0VGltZXN0YW1wKCksIDEwKTtcbiAgICB2YXIgcGxheWVyRGVsZWdhdGVUaW1lc3RhbXBIYXNDaGFuZ2VkID0gZmFsc2U7XG4gICAgdmFyIHBsYXllckRlbGVnYXRlVGltZXN0YW1wSXNWYWxpZCA9IGZhbHNlO1xuICAgIHZhciBoYXNSZWFsaWduZWRUaW1lc3RhbXBUb1BsYXllckRlbGVnYXRlID0gZmFsc2U7XG5cbiAgICB2YXIgdGltZXN0YW1wID0gdGhpcy5nZXRUaW1lc3RhbXAoKTtcbiAgICB2YXIgdGltZXN0YW1wRGVsdGE7XG4gICAgdmFyIG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgbm93ID0gbm93LmdldFRpbWUoKTtcbiAgICB2YXIgdXBkYXRlRGVsdGEgPSBub3cgLSB0aGlzLl91cGRhdGVUaW1lO1xuICAgIHRoaXMuX3VwZGF0ZVRpbWUgPSBub3c7XG5cbiAgICBpZiAoKHR5cGVvZiBwbGF5ZXJEZWxlZ2F0ZVRpbWVzdGFtcCA9PT0gJ251bWJlcicpICYmXG4gICAgICAgIHBsYXllckRlbGVnYXRlVGltZXN0YW1wID4gMFxuICAgICkge1xuICAgICAgcGxheWVyRGVsZWdhdGVUaW1lc3RhbXBJc1ZhbGlkID0gdHJ1ZTtcbiAgICAgIHRoaXMuX2lzUmVjaWV2aW5nUGxheWVyVGltZXN0YW1wID0gdHJ1ZTtcblxuICAgICAgaWYgKHRoaXMuX3BsYXllckRlbGVnYXRlVGltZXN0YW1wICE9PSBwbGF5ZXJEZWxlZ2F0ZVRpbWVzdGFtcCkge1xuICAgICAgICBwbGF5ZXJEZWxlZ2F0ZVRpbWVzdGFtcEhhc0NoYW5nZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLl9lY2hvQ2xpZW50LmFkZExhYmVsKENTS2V5cy5NRURJQV9USU1FU1RBTVAsIHBsYXllckRlbGVnYXRlVGltZXN0YW1wKTtcbiAgICAgIH1cblxuICAgICAgLy8gRGV0ZXJtaW5lIGlmIG91ciBpbnRlcm5hbCByZXByZXNlbnRhdGlvbiBvZiB0aW1lICh2aWEgdGhpcy5nZXRUaW1lc3RhbXAoKVxuICAgICAgLy8gb3IgdGhpcy5fcGxheWVyRGVsZWdhdGVUaW1lc3RhbXAgKyB0aGlzLl9wbGF5aGVhZC5nZXRQb3NpdGlvbigpKSBpcyBhbGlnbmVkXG4gICAgICAvLyB3aXRoIHRoZSB2YWx1ZSByZWNpZXZlZCBmcm9tIHRoZSBwbGF5ZXIgZGVsZWdhdGUuXG4gICAgICB0aW1lc3RhbXBEZWx0YSA9IHBsYXllckRlbGVnYXRlVGltZXN0YW1wIC0gdGltZXN0YW1wO1xuXG4gICAgICBpZiAoXG4gICAgICAgIHBsYXllckRlbGVnYXRlVGltZXN0YW1wSXNWYWxpZCAmJlxuICAgICAgICAoXG4gICAgICAgICAgdGhpcy5fcGxheWVyRGVsZWdhdGVUaW1lc3RhbXAgPT09IDAgfHxcbiAgICAgICAgICB0aW1lc3RhbXBEZWx0YSA8ICgwIC0gdXBkYXRlRGVsdGEgLSBUSU1FU1RBTVBfRFJJRlRfVE9MRVJBTkNFKSB8fFxuICAgICAgICAgIHRpbWVzdGFtcERlbHRhID4gKHVwZGF0ZURlbHRhICsgVElNRVNUQU1QX0RSSUZUX1RPTEVSQU5DRSlcbiAgICAgICAgKVxuICAgICAgKSB7XG4gICAgICAgIGhhc1JlYWxpZ25lZFRpbWVzdGFtcFRvUGxheWVyRGVsZWdhdGUgPSB0cnVlO1xuICAgICAgICB0aGlzLl9wbGF5ZXJEZWxlZ2F0ZVRpbWVzdGFtcCA9IHBsYXllckRlbGVnYXRlVGltZXN0YW1wO1xuICAgICAgICB0aGlzLl9wbGF5aW5nVGltZSArPSB0aGlzLl9wbGF5aGVhZC5nZXRQb3NpdGlvbigpO1xuICAgICAgICB0aGlzLl9yZXN0YXJ0UGxheWhlYWQoKTtcbiAgICAgICAgdGltZXN0YW1wID0gdGhpcy5nZXRUaW1lc3RhbXAoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIWhhc1JlYWxpZ25lZFRpbWVzdGFtcFRvUGxheWVyRGVsZWdhdGUpIHtcbiAgICAgIGlmIChcbiAgICAgICAgKHRoaXMuX3BsYXllckRlbGVnYXRlVGltZXN0YW1wICE9PSAwICYmICFwbGF5ZXJEZWxlZ2F0ZVRpbWVzdGFtcEhhc0NoYW5nZWQpIHx8XG4gICAgICAgICh0aGlzLl9pc1JlY2lldmluZ1BsYXllclRpbWVzdGFtcCAmJiAhcGxheWVyRGVsZWdhdGVUaW1lc3RhbXBJc1ZhbGlkKVxuICAgICAgKSB7XG4gICAgICAgIHRoaXMuX3BsYXloZWFkLnN0b3AoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX3BsYXloZWFkLnN0YXJ0KCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gTm93IHdlIGhhdmUgZGV0ZXJtaW5lZCB0aGUgY3VycmVudCB0aW1lc3RhbXAgd2UgbmVlZCB0byBjaGVjayB3aGVyZVxuICAgIC8vIHdlIGFyZSBpbiB0aGUgc2NoZWR1bGUgYW5kIHVwZGF0ZSB0aGUgbWVkaWEgaXRlbSBpZiBuZWNlc3NhcnkuXG4gICAgdmFyIGhhc1VwZGF0ZWRNZWRpYSA9IHRoaXMuX3VwZGF0ZVNjaGVkdWxlKHRpbWVzdGFtcCk7XG5cbiAgICAvLyBpZiB3ZSBoYXZlIGNyZWF0ZWQgYSBuZXcgbWVkaWEgaXRlbSB3ZSBuZWVkIHRvIHJlc2V0IHBsYXlpbmcgdGltZVxuICAgIC8vIHBsYXloZWFkIGFuZCBFY2hvIGhlYXJ0YmVhdCBmbGFncyBzbyB0aGUgaGVhcnRiZWF0cyBhcmUgc2VudCBhZ2FpblxuICAgIC8vIGZvciB0aGUgbmV3IG1lZGlhIGl0ZW1cbiAgICBpZiAoaGFzVXBkYXRlZE1lZGlhKSB7XG4gICAgICB0aGlzLl9wbGF5aW5nVGltZSA9IDA7XG4gICAgICB0aGlzLl9wbGF5ZXJEZWxlZ2F0ZVRpbWVzdGFtcCA9IHBsYXllckRlbGVnYXRlVGltZXN0YW1wO1xuICAgICAgdGhpcy5fcmVzdGFydFBsYXloZWFkKCk7XG4gICAgICB0aGlzLl9oYjNOb3RTZW50WWV0ID0gdHJ1ZTtcbiAgICAgIHRoaXMuX2hiNU5vdFNlbnRZZXQgPSB0cnVlO1xuICAgIH0gZWxzZSBpZiAocGxheWVyRGVsZWdhdGVUaW1lc3RhbXBIYXNDaGFuZ2VkKSB7XG4gICAgICB0aGlzLl9lY2hvQ2xpZW50LnJlbGVhc2VTdXBwcmVzc2VkUGxheSgpO1xuICAgIH1cblxuICAgIHRoaXMuX3VwZGF0ZUhlYXJ0YmVhdHMoKTtcblxuICAgIHRoaXMuX3ByZXZpb3VzUG9zaXRpb24gPSB0aGlzLmdldFBvc2l0aW9uKCk7XG5cbiAgfTtcblxuICAvKipcbiAgICogQ2hlY2sgdG8gc2VlIGlmIHRoZSBicm9hZGNhc3QgaGFzIGNoYW5nZWQgYmFzZWQgb24gdGhlXG4gICAqIHByb3ZpZGVkIHRpbWVzdGFtcC5cbiAgICpcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHRpbWVzdGFtcCAgVGhlIHRpbWVzdGFtcCB0byBjb21wYXJlIHdpdGggdGhlIHNjaGVkdWxlXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBMaXZlQnJva2VyLnByb3RvdHlwZS5fdXBkYXRlU2NoZWR1bGUgPSBmdW5jdGlvbih0aW1lc3RhbXApIHtcbiAgICB2YXIgYnJvYWRjYXN0O1xuICAgIHZhciBicm9hZGNhc3RUaW1lO1xuICAgIHZhciBjbGlwTGVuZ3RoO1xuICAgIHZhciBtZWRpYTtcbiAgICB2YXIgaGFzVXBkYXRlZE1lZGlhID0gZmFsc2U7XG5cbiAgICBpZiAodGhpcy5fZXNzRW5hYmxlZCAmJiB0aGlzLl9zY2hlZHVsZS5oYXNEYXRhKCkgJiYgdGltZXN0YW1wID4gMCkge1xuXG4gICAgICBicm9hZGNhc3QgPSB0aGlzLl9zY2hlZHVsZS5nZXRCcm9hZGNhc3QodGltZXN0YW1wKTtcblxuICAgICAgbWVkaWEgPSBuZXcgTWVkaWEoXG4gICAgICAgIHRoaXMuX21lZGlhLmdldEF2VHlwZSgpLFxuICAgICAgICB0aGlzLl9tZWRpYS5nZXRNZWRpYUNvbnN1bXB0aW9uTW9kZSgpXG4gICAgICApO1xuICAgICAgbWVkaWEuc2V0U2VydmljZUlkKHRoaXMuX3NjaGVkdWxlLnNlcnZpY2VJZCk7XG4gICAgICBtZWRpYS5zZXRUcmFuc3BvcnRNb2RlKHRoaXMuX21lZGlhLmdldFRyYW5zcG9ydE1vZGUoKSk7XG4gICAgICBtZWRpYS5zZXRNZWRpYVBsYXllck5hbWUodGhpcy5fbWVkaWEuZ2V0TWVkaWFQbGF5ZXJOYW1lKCkpO1xuICAgICAgbWVkaWEuc2V0TWVkaWFQbGF5ZXJWZXJzaW9uKHRoaXMuX21lZGlhLmdldE1lZGlhUGxheWVyVmVyc2lvbigpKTtcblxuICAgICAgaWYgKCFicm9hZGNhc3QgJiYgdGhpcy5fYnJvYWRjYXN0ICE9PSBOT19CUk9BRENBU1QpIHtcbiAgICAgICAgLy8gd2Ugd2VyZSBwcmV2aW91c2x5IGluIGEgYnJvYWRjYXN0IGFuZCBoYXZlIG5vdyBnb25lIGludG8gZGVhZCBzcGFjZVxuICAgICAgICB0aGlzLl9icm9hZGNhc3QgPSBOT19CUk9BRENBU1Q7XG4gICAgICAgIHRoaXMuX3VwZGF0ZU1lZGlhKG1lZGlhKTtcbiAgICAgICAgaGFzVXBkYXRlZE1lZGlhID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgIGJyb2FkY2FzdCAmJiAoXG4gICAgICAgICAgdGhpcy5fYnJvYWRjYXN0ID09PSBOT19CUk9BRENBU1QgfHxcbiAgICAgICAgICBicm9hZGNhc3QudmVyc2lvbi5pZCAhPT0gdGhpcy5fYnJvYWRjYXN0LnZlcnNpb24uaWRcbiAgICAgICAgKVxuICAgICAgKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBpZiB3ZSBkb24ndCBhbHJlYWR5IGhhdmUgYSBicm9hZGNhc3QsIG9yIGlmIHRoZSBjYWNoZWQgYnJvYWRjYXN0IGlzXG4gICAgICAgICAqIGRpZmZlcmVudCBpLmUuIGNyb3NzZWQgYm91bmRhcnkuXG4gICAgICAgICAqL1xuXG4gICAgICAgIHRoaXMuX2Jyb2FkY2FzdCA9IGJyb2FkY2FzdDtcbiAgICAgICAgYnJvYWRjYXN0VGltZSA9IGJyb2FkY2FzdC5wdWJsaXNoZWRfdGltZTtcbiAgICAgICAgY2xpcExlbmd0aCA9IGJyb2FkY2FzdFRpbWUuZW5kIC0gYnJvYWRjYXN0VGltZS5zdGFydDtcblxuICAgICAgICBtZWRpYS5zZXRFc3NFbnJpY2hlZCh0cnVlKTtcbiAgICAgICAgbWVkaWEuc2V0VmVyc2lvbklkKGJyb2FkY2FzdC52ZXJzaW9uLmlkKTtcbiAgICAgICAgbWVkaWEuc2V0TGVuZ3RoKGNsaXBMZW5ndGgpO1xuXG4gICAgICAgIGlmIChicm9hZGNhc3QuZXBpc29kZSAmJiBicm9hZGNhc3QuZXBpc29kZS5pZCkge1xuICAgICAgICAgIG1lZGlhLnNldEVwaXNvZGVJZChicm9hZGNhc3QuZXBpc29kZS5pZCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl91cGRhdGVNZWRpYShtZWRpYSk7XG4gICAgICAgIGhhc1VwZGF0ZWRNZWRpYSA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGhhc1VwZGF0ZWRNZWRpYTtcbiAgfTtcblxuICAvKipcbiAgICogU2VuZCBoZWFydGJlYXQgZXZlbnRzIGlmIG5lY2Vzc2FyeS5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICovXG4gIExpdmVCcm9rZXIucHJvdG90eXBlLl91cGRhdGVIZWFydGJlYXRzID0gZnVuY3Rpb24oKSB7XG5cbiAgICB2YXIgcGxheWluZ1RpbWU7XG4gICAgdmFyIHBvc2l0aW9uO1xuXG4gICAgaWYgKHRoaXMuX2Jyb2FkY2FzdCA9PT0gTk9fQlJPQURDQVNUIHx8ICghdGhpcy5faGIzTm90U2VudFlldCAmJiAhdGhpcy5faGI1Tm90U2VudFlldCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBwbGF5aW5nVGltZSA9IHRoaXMuX3BsYXlpbmdUaW1lICsgdGhpcy5fcGxheWhlYWQuZ2V0UG9zaXRpb24oKTtcbiAgICBwb3NpdGlvbiA9IHRoaXMuZ2V0UG9zaXRpb24oKTtcblxuICAgIC8vIHNlbmQgMyBzZWNvbmQgaGVhcnRiZWF0XG4gICAgaWYgKHBsYXlpbmdUaW1lID49IDMwMDAgJiYgdGhpcy5faGIzTm90U2VudFlldCkge1xuICAgICAgdGhpcy5fZWNob0NsaWVudC5hdlVzZXJBY3Rpb25FdmVudCgnZWNob19oYicsICdlY2hvX2hiXzMnLCBwb3NpdGlvbik7XG4gICAgICB0aGlzLl9oYjNOb3RTZW50WWV0ID0gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gc2VuZCA1IHNlY29uZCBoZWFydGJlYXRcbiAgICBpZiAocGxheWluZ1RpbWUgPj0gNTAwMCAmJiB0aGlzLl9oYjVOb3RTZW50WWV0KSB7XG4gICAgICB0aGlzLl9lY2hvQ2xpZW50LmF2VXNlckFjdGlvbkV2ZW50KCdlY2hvX2hiJywgJ2VjaG9faGJfNScsIHBvc2l0aW9uKTtcbiAgICAgIHRoaXMuX2hiNU5vdFNlbnRZZXQgPSBmYWxzZTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEJyb2FkY2FzdCB0aGUgbGl2ZSBtZWRpYSB1cGRhdGUuXG4gICAqXG4gICAqIEBwYXJhbSB7TWVkaWF9IG1lZGlhIGEgbmV3IG1lZGlhIGl0ZW1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIExpdmVCcm9rZXIucHJvdG90eXBlLl91cGRhdGVNZWRpYSA9IGZ1bmN0aW9uKG1lZGlhKSB7XG5cbiAgICB2YXIgcG9zaXRpb24gPSB0aGlzLmdldFBvc2l0aW9uKCk7XG5cbiAgICB0aGlzLl9lY2hvQ2xpZW50LmxpdmVNZWRpYVVwZGF0ZShcbiAgICAgIG1lZGlhLFxuICAgICAgcG9zaXRpb24sXG4gICAgICB0aGlzLl9wcmV2aW91c1Bvc2l0aW9uXG4gICAgKTtcblxuICAgIHRoaXMuX3ByZXZpb3VzUG9zaXRpb24gPSBwb3NpdGlvbjtcbiAgfTtcblxuICAvKipcbiAgICogQ29udmVuaWVuY2UgbWV0aG9kIGZvciByZXNldGluZyBhbmQgcGxheWluZyB0aGUgcGxheWhlYWQuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBMaXZlQnJva2VyLnByb3RvdHlwZS5fcmVzdGFydFBsYXloZWFkID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5fcGxheWhlYWQucmVzZXQoKTtcbiAgICB0aGlzLl9wbGF5aGVhZC5zdGFydCgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXByZXNlbnRzIHRoZSB0cnVlIHBvc2l0aW9uIGEgcGxheWVyIGlzIGF0IHdpdGhpbiBhIHBpZWNlIG9mIG1lZGlhLlxuICAgKlxuICAgKiBAcmV0dXJucyB7TnVtYmVyfVxuICAgKi9cbiAgTGl2ZUJyb2tlci5wcm90b3R5cGUuZ2V0UG9zaXRpb24gPSBmdW5jdGlvbigpIHtcblxuICAgIHZhciBwb3NpdGlvbjtcblxuICAgIGlmICh0aGlzLl9icm9hZGNhc3QgJiYgdGhpcy5fYnJvYWRjYXN0ICE9PSBOT19CUk9BRENBU1QpIHtcbiAgICAgIHBvc2l0aW9uID0gKFxuICAgICAgICB0aGlzLl9wbGF5ZXJEZWxlZ2F0ZVRpbWVzdGFtcCAtIHRoaXMuX2Jyb2FkY2FzdC5wdWJsaXNoZWRfdGltZS5zdGFydFxuICAgICAgKSArIHRoaXMuX3BsYXloZWFkLmdldFBvc2l0aW9uKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHBvc2l0aW9uID0gdGhpcy5fcGxheWhlYWQuZ2V0UG9zaXRpb24oKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcG9zaXRpb247XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlcHJlc2VudHMgdGhlIHRpbWVzdGFtcCBhIHBsYXllciBpcyBhdCB3aXRoaW4gYSBwaWVjZSBvZiBtZWRpYS5cbiAgICpcbiAgICogQHJldHVybnMge051bWJlcn1cbiAgICovXG4gIExpdmVCcm9rZXIucHJvdG90eXBlLmdldFRpbWVzdGFtcCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl9wbGF5ZXJEZWxlZ2F0ZVRpbWVzdGFtcCArIHRoaXMuX3BsYXloZWFkLmdldFBvc2l0aW9uKCk7XG4gIH07XG5cbiAgcmV0dXJuIExpdmVCcm9rZXI7XG5cbn0pO1xuIiwiLyoqXG4gKiBFeHBvcnRzIHRoZSBNZWRpYSBJZCBjbGFzc1xuICogQGV4cG9ydHMgRWNoby9NZWRpYVxuICogQGF1dGhvciBEYWkgV2lsbGlhbXMgPGRhaS53aWxsaWFtc0BiYmMuY28udWs+XG4gKi9cbmRlZmluZShmdW5jdGlvbihyZXF1aXJlKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICB2YXIgVXRpbHMgPSByZXF1aXJlKCcuL3V0aWwvbWV0aG9kcycpO1xuXG4gIC8qKlxuICAgKiBJbml0aWFsaXNlIGEgTWVkaWEgSWQgT2JqZWN0LlxuICAgKiBAbmFtZXNwYWNlIE1lZGlhSWRcbiAgICogQGNvbnN0cnVjdG9yXG4gICAqIEBwYXJhbSB7TWVkaWFJZFR5cGV9IF9pZFR5cGUgVGhlIE1lZGlhIHR5cGUgaWRlbnRpZmllclxuICAgKiBmb3IgYSBwaWVjZSBvZiBtZWRpYS4gJ0VudW1zLk1lZGlhSWRUeXBlJ1xuICAgKlxuICAgKiBAZGVzY3JpcHRpb24gVGhlIE1lZGlhSWQgb2JqZWN0IGlzIHVzZWQgd2l0aGluIHRoZSBNZWRpYSBvYmplY3RcbiAgICogc28gc2V0IHZhbHVlcyBmb3Igc3BlY2lmaWMgaWRlbnRpZmllcnMgd2l0aGluIHRoZSBNZWRpYSBvYmplY3QgaXRzZWxmLlxuICAgKiB0aGVzZSB0eXBlcyBjYW4gYmU6XG4gICAqXG4gICAqICAgVkVSU0lPTlxuICAgKiAgIENMSVBcbiAgICogICBFUElTT0RFXG4gICAqICAgU0VSVklDRVxuICAgKiAgIFZQSURcbiAgICogICBOT05QSVBTQ09OVEVOVElEXG4gICAqXG4gICAqL1xuICB2YXIgTWVkaWFJZCA9IGZ1bmN0aW9uKF9pZFR5cGUsIF9yZXF1aXJlc1ZhbGlkYXRpb24pIHtcbiAgICB0aGlzLmlkVHlwZSA9IF9pZFR5cGU7XG4gICAgdGhpcy52YWxpZFZhbHVlUmVnZXggPSAvXlthLXowLTlBLVpfLV0rJC87XG4gICAgdGhpcy52YWx1ZSA9IG51bGw7XG4gICAgdGhpcy5pc1NldCA9IGZhbHNlO1xuICAgIHRoaXMuaXNWYWxpZCA9IGZhbHNlO1xuICAgIHRoaXMucmVxdWlyZXNWYWxpZGF0aW9uID0gX3JlcXVpcmVzVmFsaWRhdGlvbjtcbiAgfTtcblxuICAvKipcbiAgICogQG1lbWJlck9mIE1lZGlhSWRcbiAgICogQGluc3RhbmNlXG4gICAqIEBtZXRob2QgZ2V0SWRUeXBlXG4gICAqXG4gICAqIEByZXR1cm5zIHtNZWRpYUlkVHlwZX0gVGhlIE1lZGlhSWQgdHlwZVxuICAgKi9cbiAgTWVkaWFJZC5wcm90b3R5cGUuZ2V0SWRUeXBlID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuaWRUeXBlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAbWVtYmVyT2YgTWVkaWFJZFxuICAgKiBAaW5zdGFuY2VcbiAgICogQG1ldGhvZCBzZXRWYWx1ZVxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gX3ZhbHVlIFRoZSB2YWx1ZSB0byBzZXQgZm9yIE1lZGlhSWRcbiAgICogQHJldHVybnMge01lZGlhSWRUeXBlfSBUaGUgTWVkaWFJZCB0eXBlXG4gICAqL1xuICBNZWRpYUlkLnByb3RvdHlwZS5zZXRWYWx1ZSA9IGZ1bmN0aW9uKF92YWx1ZSkge1xuICAgIHRoaXMuaXNTZXQgPSB0cnVlO1xuXG4gICAgaWYgKF92YWx1ZSA9PSBudWxsKSB7XG4gICAgICB0aGlzLmlzVmFsaWQgPSBmYWxzZTtcbiAgICB9IGVsc2UgaWYgKHRoaXMucmVxdWlyZXNWYWxpZGF0aW9uKSB7XG4gICAgICB0aGlzLmlzVmFsaWQgPSB0aGlzLl92YWxpZGF0ZVZhbHVlKF92YWx1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuaXNWYWxpZCA9IHRydWU7XG4gICAgfVxuXG4gICAgVXRpbHMuYXNzZXJ0KHRoaXMuaXNWYWxpZCwgJ01lZGlhSWQ6IFRoZSB2YWx1ZSBmb3IgJyArIHRoaXMuaWRUeXBlICsgJ0lkIGlzIGludmFsaWQnLCB0cnVlKTtcblxuICAgIHRoaXMudmFsdWUgPSBfdmFsdWU7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBtZW1iZXJPZiBNZWRpYUlkXG4gICAqIEBpbnN0YW5jZVxuICAgKiBAbWV0aG9kIGdldFZhbHVlXG4gICAqXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBNZWRpYUlkIHZhbHVlXG4gICAqL1xuICBNZWRpYUlkLnByb3RvdHlwZS5nZXRWYWx1ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnZhbHVlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAbWVtYmVyT2YgTWVkaWFJZFxuICAgKiBAaW5zdGFuY2VcbiAgICogQG1ldGhvZCBpc1ZhbHVlU2V0XG4gICAqXG4gICAqIEBkZXNjcmlwdGlvbiBDb25maXJtcyB3aGV0aGVyIGEgdmFsdWUgaGFzIGJlZW4gc2V0IGZvciB0aGUgdmFsdWVcbiAgICogaW52YWxpZCBvciB2YWxpZFxuICAgKiBAcmV0dXJucyB7Ym9vbH1cbiAgICovXG4gIE1lZGlhSWQucHJvdG90eXBlLmlzVmFsdWVTZXQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5pc1NldDtcbiAgfTtcblxuICAvKipcbiAgICogQG1lbWJlck9mIE1lZGlhSWRcbiAgICogQGluc3RhbmNlXG4gICAqIEBtZXRob2QgaXNWYWx1ZVZhbGlkXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvbiBDb25maXJtcyB3aGV0aGVyIHRoZSB2YWx1ZSBzZXQgaXMgdmFsaWQuIElmIG5vdCBzZXQgb3IgaW52YWxpZFxuICAgKiBpdCByZXR1cm5zIGZhbHNlXG4gICAqIEByZXR1cm5zIHtib29sfVxuICAgKi9cbiAgTWVkaWFJZC5wcm90b3R5cGUuaXNWYWx1ZVZhbGlkID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZDtcbiAgfTtcblxuICAvKipcbiAgICogQG1lbWJlck9mIE1lZGlhSWRcbiAgICogQHByaXZhdGVcbiAgICogQG1ldGhvZCBpc1ZhbHVlU2V0XG4gICAqXG4gICAqIEBkZXNjcmlwdGlvbiBQcml2YXRlIGhlbHBlciB0byBjaGVjayBpZiB0aGUgdmFsdWUgYmVpbmcgc2V0IGlzXG4gICAqIGEgdmFsaWQgdmFsdWVcbiAgICogQHJldHVybnMge2Jvb2x9XG4gICAqL1xuICBNZWRpYUlkLnByb3RvdHlwZS5fdmFsaWRhdGVWYWx1ZSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHJldHVybiB0aGlzLnZhbGlkVmFsdWVSZWdleC50ZXN0KHZhbHVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gTWVkaWFJZDtcbn0pO1xuIiwiLyoqXG4gKiBFeHBvcnRzIHRoZSBNZWRpYSBjbGFzcywgdXNlZCBmb3Igc2V0dGluZyBtZXRhLWRhdGEgYXNzb2NpYXRlZCB3aXRoXG4gKiBhIHBpZWNlIG9mIEFWIGNvbnRlbnRcbiAqIEBleHBvcnRzIEVjaG8vTWVkaWFcbiAqIEBhdXRob3IgRGFpIFdpbGxpYW1zIDxkYWkud2lsbGlhbXNAYmJjLmNvLnVrPlxuICovXG5kZWZpbmUoZnVuY3Rpb24ocmVxdWlyZSkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgdmFyIFByb2R1Y2VycyA9IHJlcXVpcmUoJy4vY29uZmlnL3Byb2R1Y2VycycpO1xuICB2YXIgTWVkaWFJZCA9IHJlcXVpcmUoJy4vbWVkaWEtaWQnKTtcbiAgdmFyIEVudW1zID0gcmVxdWlyZSgnLi9lbnVtZXJhdGlvbnMnKTtcbiAgdmFyIFV0aWxzID0gcmVxdWlyZSgnLi91dGlsL21ldGhvZHMnKTtcbiAgdmFyIExhYmVsS2V5cyA9IHJlcXVpcmUoJy4vZGVsZWdhdGUvYXRpL2xhYmVsLWtleXMnKTtcbiAgdmFyIENTTGFiZWxLZXlzID0gcmVxdWlyZSgnLi9kZWxlZ2F0ZS9jb21zY29yZS9sYWJlbC1rZXlzJyk7XG4gIHZhciBMYWJlbENsZWFuc2VyID0gcmVxdWlyZSgnLi91dGlsL2NsZWFuc2luZy9sYWJlbC1jbGVhbnNlcicpO1xuICB2YXIgREVCVUcgPSByZXF1aXJlKCcuL3V0aWwvZGVidWcnKTtcbiAgdmFyIENPTlNVTVBUSU9OX01PREUgPSBFbnVtcy5NZWRpYUNvbnN1bXB0aW9uTW9kZTtcblxuICAvKipcbiAgICogQG1lbWJlck9mIE1lZGlhXG4gICAqIEBwcml2YXRlXG4gICAqIEBtZXRob2QgX2lzVmFsaWRBdlR5cGVcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uIFByaXZhdGUgaGVscGVyIHRvIGRldGVybWluZSB2YWxpZCBhdiB0eXBlXG4gICAqXG4gICAqIEBwYXJhbSB7QXZUeXBlfSBfYXZUeXBlIFRoZSBBViB0eXBlIG9mIHRoZSBtZWRpYSxcbiAgICogb25lIG9mIGBFY2hvLkVudW1zLkF2VHlwZWAuXG4gICAqIEByZXR1cm5zIHtib29sfVxuICAgKi9cbiAgZnVuY3Rpb24gX2lzVmFsaWRBdlR5cGUoX2F2VHlwZSkge1xuICAgIHJldHVybiAoX2F2VHlwZSA9PT0gRW51bXMuQXZUeXBlLkFVRElPIHx8IF9hdlR5cGUgPT09IEVudW1zLkF2VHlwZS5WSURFTyk7XG4gIH1cblxuICAvKipcbiAgICogQG1lbWJlck9mIE1lZGlhXG4gICAqIEBwcml2YXRlXG4gICAqIEBtZXRob2QgX2lzVmFsaWRDb25zdW1wdGlvbk1vZGVcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uIFByaXZhdGUgaGVscGVyIHRvIGRldGVybWluZSB2YWxpZCBhdiB0eXBlXG4gICAqXG4gICAqIEBwYXJhbSB7TWVkaWFDb25zdW1wdGlvbk1vZGV9IF9jb25zdW1wdGlvbk1vZGUgV2hldGhlciB0aGUgbWVkaWEgaXNcbiAgICogb24tZGVtYW5kLCBkb3dubG9hZCBvciBsaXZlLlxuICAgKiBAcmV0dXJucyB7Ym9vbH1cbiAgICovXG4gIGZ1bmN0aW9uIF9pc1ZhbGlkQ29uc3VtcHRpb25Nb2RlKF9jb25zdW1wdGlvbk1vZGUpIHtcbiAgICByZXR1cm4gKFxuICAgICAgX2NvbnN1bXB0aW9uTW9kZSA9PT0gQ09OU1VNUFRJT05fTU9ERS5PTl9ERU1BTkQgfHxcbiAgICAgIF9jb25zdW1wdGlvbk1vZGUgPT09IENPTlNVTVBUSU9OX01PREUuRE9XTkxPQUQgfHxcbiAgICAgIF9jb25zdW1wdGlvbk1vZGUgPT09IENPTlNVTVBUSU9OX01PREUuTElWRVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogSW5pdGlhbGlzZSBhIE1lZGlhIG9iamVjdC5cbiAgICogQG5hbWVzcGFjZSBNZWRpYVxuICAgKiBAY29uc3RydWN0b3JcbiAgICogQHBhcmFtIHtBdlR5cGV9IF9hdlR5cGUgVGhlIEFWIHR5cGUgb2YgdGhlIG1lZGlhLFxuICAgKiBvbmUgb2YgYEVjaG8uRW51bXMuQXZUeXBlYC5cbiAgICogQHBhcmFtIHtNZWRpYUNvbnN1bXB0aW9uTW9kZX0gX2NvbnN1bXB0aW9uTW9kZSBXaGV0aGVyIHRoZSBtZWRpYSBpc1xuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbi1kZW1hbmQsIGRvd25sb2FkIG9yIGxpdmUuXG4gICAqXG4gICAqIFdoZW4gZGV0ZXJtaW5pbmcgaG93IHRvIHNldCB0aGlzIGZsYWcsIGNvbnNpZGVyIHRoZSBleHBlcmllbmNlXG4gICAqIGZyb20gdGhlIHVzZXIncyBwZXJzcGVjdGl2ZS4gRGlkIHRoZXkgbmVlZCB0byBwbGFuIHRoZWlyIHRpbWVcbiAgICogYXJvdW5kIHRoZSBCQkMgaW4gb3JkZXIgdG8gdmlldyB0aGlzIGNvbnRlbnQ/IGkuZS4gVGhleSBoYWQgdG9cbiAgICogYmUgaW4gZnJvbnQgb2YgYSBzY3JlZW4gLyByYWRpbyBhdCAzcG0gb24gYSBnaXZlbiBkYXkgaW4gb3JkZXJcbiAgICogdG8gd2F0Y2ggaXQuIElmIHNvLCB0aGUgY29udGVudCBpcyBsaXZlIChyZWdhcmRsZXNzIG9mIHdoZXRoZXJcbiAgICogdGhlICdzY3JlZW4nIGlzIGJpZy1zY3JlZW4sIGNvbnNvbGUsIGJyb3dzZXIgZXRjKS4gSWYgdGhleVxuICAgKiBkaWRuJ3QgbmVlZCB0byBiZSB0aGVyZSBhdCBhIHBhcnRpY3VsYXIgdGltZSwgcmF0aGVyIHRoZXkgc2F0XG4gICAqIGRvd24gd2hlbiB0aGV5IHdhbnRlZCBhbmQgYXNrZWQgdGhlIEJCQyB0byBzZXJ2ZSB0aGUgY29udGVudFxuICAgKiBhdCB0aGF0IHBvaW50IChhZ2FpbiwgcmVnYXJkbGVzcyBvZiBzY3JlZW4gdHlwZSkgaXQgaXNcbiAgICogb24tZGVtYW5kLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiB2YXIgbWVkaWEgPSBuZXcgTWVkaWEoRWNoby5FbnVtcy5BdlR5cGUuVklERU8sXG4gICAqICAgICAgICAgICAgICAgICAgICAgICBFY2hvLkVudW1zLk1lZGlhQ29uc3VtcHRpb25Nb2RlLk9OX0RFTUFORCk7XG4gICAqL1xuICB2YXIgTWVkaWEgPSBmdW5jdGlvbihfYXZUeXBlLCBfY29uc3VtcHRpb25Nb2RlKSB7XG4gICAgdGhpcy5hdlR5cGUgPSBfaXNWYWxpZEF2VHlwZShfYXZUeXBlKSA/IF9hdlR5cGUgOiBudWxsO1xuXG4gICAgdGhpcy5jb25zdW1wdGlvbk1vZGUgPSBfaXNWYWxpZENvbnN1bXB0aW9uTW9kZShfY29uc3VtcHRpb25Nb2RlKSA/XG4gICAgICBfY29uc3VtcHRpb25Nb2RlIDogbnVsbDtcblxuICAgIFV0aWxzLmFzc2VydCh0aGlzLmF2VHlwZSwgJ01lZGlhOiBJbnZhbGlkIGF2VHlwZTogJyArIHRoaXMuYXZUeXBlLCB0cnVlKTtcbiAgICBVdGlscy5hc3NlcnQoXG4gICAgICB0aGlzLmNvbnN1bXB0aW9uTW9kZSwgJ01lZGlhOiBJbnZhbGlkIGNvbnN1bXB0aW9uTW9kZTogJyArXG4gICAgICB0aGlzLmNvbnN1bXB0aW9uTW9kZSwgdHJ1ZVxuICAgICk7XG5cbiAgICAvL0NyZWF0ZSBhbGwgTWVkaWEgSWQgT2JqZWN0c1xuICAgIHRoaXMuc2VydmljZUlkT2JqZWN0ID0gbmV3IE1lZGlhSWQoRW51bXMuTWVkaWFJZFR5cGUuU0VSVklDRSwgdHJ1ZSk7XG4gICAgdGhpcy52ZXJzaW9uSWRPYmplY3QgPSBuZXcgTWVkaWFJZChFbnVtcy5NZWRpYUlkVHlwZS5WRVJTSU9OLCB0cnVlKTtcbiAgICB0aGlzLmNsaXBJZE9iamVjdCA9IG5ldyBNZWRpYUlkKEVudW1zLk1lZGlhSWRUeXBlLkNMSVAsIHRydWUpO1xuICAgIHRoaXMuZXBpc29kZUlkT2JqZWN0ID0gbmV3IE1lZGlhSWQoRW51bXMuTWVkaWFJZFR5cGUuRVBJU09ERSwgdHJ1ZSk7XG4gICAgdGhpcy52cElkT2JqZWN0ID0gbmV3IE1lZGlhSWQoRW51bXMuTWVkaWFJZFR5cGUuVlBJRCwgdHJ1ZSk7XG4gICAgdGhpcy5ub25QaXBzQ29udGVudElkT2JqZWN0ID0gbmV3IE1lZGlhSWQoRW51bXMuTWVkaWFJZFR5cGUuTk9OUElQU0NPTlRFTlQsIGZhbHNlKTtcbiAgICB0aGlzLnByb2R1Y2VyT2JqZWN0ID0gbmV3IE1lZGlhSWQoRW51bXMuTWVkaWFJZFR5cGUuUFJPRFVDRVIsIGZhbHNlKTtcbiAgICB0aGlzLmJyYW5kSWRPYmplY3QgPSBuZXcgTWVkaWFJZChFbnVtcy5NZWRpYUlkVHlwZS5CUkFORCwgZmFsc2UpO1xuICAgIHRoaXMuc2VyaWVzSWRPYmplY3QgPSBuZXcgTWVkaWFJZChFbnVtcy5NZWRpYUlkVHlwZS5TRVJJRVMsIGZhbHNlKTtcblxuICAgIHRoaXMubGVuZ3RoID0gMDtcblxuICAgIC8vIE9wdGlvbmFsIFZhbHVlc1xuICAgIHRoaXMuYnVmZmVyTGVuZ3RoID0gMDtcbiAgICB0aGlzLnN1cHBsaWVyID0gbnVsbDtcbiAgICB0aGlzLm1lZGlhU2V0ID0gbnVsbDtcbiAgICB0aGlzLnRyYW5zZmVyRm9ybWF0ID0gbnVsbDtcblxuICAgIC8vIGZsYWcgdG8gY2hlY2sgaWYgdGhpcyBtZWRpYSBvYmplY3QgaGFzIGJlZW4gZW5yaWNoZWQgYnkgRVNTLiBhIG51bGwgdmFsdWVcbiAgICAvLyBtZWFucyB0aGF0IHRoaXMgbWVkaWEgb2JqZWN0IGhhcyBub3QgZ29uZSB0aHJvdWdoIHRoZSBsaXZlIGJyb2tlciwgc28gaXRcbiAgICAvLyBpcyBhbHdheXMgc2FmZXIgdG8gYXNzZXJ0IGVxdWFsaXR5ICg9PT0pIHdoZW4geW91IHdhbnQgdG8gY2hlY2sgdGhhdCB0aGVcbiAgICAvLyBtZWRpYSBoYXMgZ29uZSB0aHJvdWdoIHRoZSBsaXZlIGJyb2tlciAqYW5kKiB3aGV0aGVyIGl0IGhhcyBiZWVuIGVucmljaGVkXG4gICAgdGhpcy5lc3NFbnJpY2hlZERhdGEgPSBmYWxzZTtcblxuICAgIC8vIHdoZXRoZXIgb3Igbm90IHRoZSBtZWRpYSBpcyBjdXJyZW50bHkgcGxheWluZ1xuICAgIHRoaXMuX2lzUGxheWluZyA9IGZhbHNlO1xuXG4gICAgLy8gd2hldGhlciBvciBub3QgdGhlIG1lZGlhIGlzIGN1cnJlbnRseSBidWZmZXJpbmcgKGZvciBBVEkpXG4gICAgdGhpcy5faXNCdWZmZXJpbmcgPSBmYWxzZTtcblxuICAgIHRoaXMuX2lzRW1iZWRkZWQgPSBmYWxzZTtcblxuICAgIC8vc2V0IHByb2R1Y2VyIHRvIGJlIGRlZmF1bHQgb2YgY3VycmVudCBwYWdlXG5cbiAgICB0aGlzLm5hbWUgPSAnJztcbiAgICB0aGlzLnR5cGUgPSBFbnVtcy5NZWRpYUNsaXBUeXBlLlVOREVGSU5FRDtcbiAgICB0aGlzLnBsYXlsaXN0ID0gJyc7XG5cbiAgICAvLyBNZWRpYSB0aGVtZSAyXG4gICAgdGhpcy5pbml0aWF0aW9uVHlwZSA9IEVudW1zLk1lZGlhSW5pdGlhdGlvblR5cGUuVU5ERUZJTkVEO1xuICAgIHRoaXMuYWRzRW5hYmxlZCA9IGZhbHNlO1xuXG4gICAgLy8gTWVkaWEgdGhlbWUgM1xuICAgIHRoaXMubWVkaWFQbGF5ZXJOYW1lID0gJyc7XG4gICAgdGhpcy5tZWRpYVBsYXllclZlcnNpb24gPSAnJztcbiAgICB0aGlzLnRyYW5zcG9ydE1vZGUgPSAnJztcbiAgfTtcblxuICAvKipcbiAgICogQ2hlY2sgdG8gc2VlIGlmIHRoaXMgbWVkaWEgb2JqZWN0IGhhcyBiZWVuIGVucmljaGVkIGJ5IEVTUy5cbiAgICpcbiAgICogQHJldHVybnMge0Jvb2xlYW59XG4gICAqL1xuICBNZWRpYS5wcm90b3R5cGUuaXNFc3NFbnJpY2hlZCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmVzc0VucmljaGVkRGF0YSA9PT0gdHJ1ZTtcbiAgfTtcblxuICAvKipcbiAgICogU2V0IHdoZXRoZXIgdGhpcyBtZWRpYSBvYmplY3QgaGFzIGJlZW4gZW5yaWNoZWQgYnkgRVNTLlxuICAgKlxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IGlzRW5yaWNoZWRcbiAgICovXG4gIE1lZGlhLnByb3RvdHlwZS5zZXRFc3NFbnJpY2hlZCA9IGZ1bmN0aW9uKGlzRW5yaWNoZWQpIHtcbiAgICB0aGlzLmVzc0VucmljaGVkRGF0YSA9IGlzRW5yaWNoZWQ7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBtZW1iZXJPZiBNZWRpYVxuICAgKiBAaW5zdGFuY2VcbiAgICogQG1ldGhvZCBnZXRBdlR5cGVcbiAgICpcbiAgICogQHJldHVybnMge0F2VHlwZX0gVGhlIGF2IHR5cGUgZm9yIHRoZSBNZWRpYSBPYmplY3RcbiAgICovXG4gIE1lZGlhLnByb3RvdHlwZS5nZXRBdlR5cGUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5hdlR5cGU7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBtZW1iZXJPZiBNZWRpYVxuICAgKiBAaW5zdGFuY2VcbiAgICogQG1ldGhvZCBnZXRNZWRpYUNvbnN1bXB0aW9uTW9kZVxuICAgKlxuICAgKiBAcmV0dXJucyB7TWVkaWFDb25zdW1wdGlvbk1vZGV9IFRoZSBjb25zdW1wdGlvbiBtb2RlIGZvciB0aGUgTWVkaWEgT2JqZWN0XG4gICAqL1xuICBNZWRpYS5wcm90b3R5cGUuZ2V0TWVkaWFDb25zdW1wdGlvbk1vZGUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5jb25zdW1wdGlvbk1vZGU7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBtZW1iZXJPZiBNZWRpYVxuICAgKiBAaW5zdGFuY2VcbiAgICogQG1ldGhvZCBnZXRDbG9uZVxuICAgKlxuICAgKiBAcmV0dXJucyB7TWVkaWF9IEEgbmV3IE1lZGlhIG9iamVjdCB3aGljaCBpcyBhbiBleGFjdCBjbG9uZSBvZlxuICAgKiBpdHNlbGZcbiAgICovXG4gIE1lZGlhLnByb3RvdHlwZS5nZXRDbG9uZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBjbG9uZWRNZWRpYSA9IG5ldyBNZWRpYSh0aGlzLmF2VHlwZSwgdGhpcy5jb25zdW1wdGlvbk1vZGUpO1xuXG4gICAgLy9DcmVhdGUgYWxsIE1lZGlhIElkIE9iamVjdHNcbiAgICBjbG9uZWRNZWRpYS5icmFuZElkT2JqZWN0ID0gdGhpcy5icmFuZElkT2JqZWN0O1xuICAgIGNsb25lZE1lZGlhLnNlcmllc0lkT2JqZWN0ID0gdGhpcy5zZXJpZXNJZE9iamVjdDtcbiAgICBjbG9uZWRNZWRpYS5zZXJ2aWNlSWRPYmplY3QgPSB0aGlzLnNlcnZpY2VJZE9iamVjdDtcbiAgICBjbG9uZWRNZWRpYS52ZXJzaW9uSWRPYmplY3QgPSB0aGlzLnZlcnNpb25JZE9iamVjdDtcbiAgICBjbG9uZWRNZWRpYS5jbGlwSWRPYmplY3QgPSB0aGlzLmNsaXBJZE9iamVjdDtcbiAgICBjbG9uZWRNZWRpYS5lcGlzb2RlSWRPYmplY3QgPSB0aGlzLmVwaXNvZGVJZE9iamVjdDtcbiAgICBjbG9uZWRNZWRpYS52cElkT2JqZWN0ID0gdGhpcy52cElkT2JqZWN0O1xuICAgIGNsb25lZE1lZGlhLm5hbWUgPSB0aGlzLm5hbWU7XG4gICAgY2xvbmVkTWVkaWEudHlwZSA9IHRoaXMudHlwZTtcbiAgICBjbG9uZWRNZWRpYS5wbGF5bGlzdCA9IHRoaXMucGxheWxpc3Q7XG4gICAgY2xvbmVkTWVkaWEuaW5pdGlhdGlvblR5cGUgPSB0aGlzLmluaXRpYXRpb25UeXBlO1xuICAgIGNsb25lZE1lZGlhLmFkc0VuYWJsZWQgPSB0aGlzLmFkc0VuYWJsZWQ7XG4gICAgY2xvbmVkTWVkaWEubWVkaWFQbGF5ZXJWZXJzaW9uID0gdGhpcy5tZWRpYVBsYXllclZlcnNpb247XG4gICAgY2xvbmVkTWVkaWEubWVkaWFQbGF5ZXJOYW1lID0gdGhpcy5tZWRpYVBsYXllck5hbWU7XG4gICAgY2xvbmVkTWVkaWEudHJhbnNwb3J0TW9kZSA9IHRoaXMudHJhbnNwb3J0TW9kZTtcbiAgICBjbG9uZWRNZWRpYS5ub25QaXBzQ29udGVudElkT2JqZWN0ID0gdGhpcy5ub25QaXBzQ29udGVudElkT2JqZWN0O1xuICAgIGNsb25lZE1lZGlhLnByb2R1Y2VyT2JqZWN0ID0gdGhpcy5wcm9kdWNlck9iamVjdDtcbiAgICBjbG9uZWRNZWRpYS5idWZmZXJMZW5ndGggPSB0aGlzLmJ1ZmZlckxlbmd0aDtcbiAgICBjbG9uZWRNZWRpYS5tZWRpYVNldCA9IHRoaXMubWVkaWFTZXQ7XG4gICAgY2xvbmVkTWVkaWEuc3VwcGxpZXIgPSB0aGlzLnN1cHBsaWVyO1xuICAgIGNsb25lZE1lZGlhLnRyYW5zZmVyRm9ybWF0ID0gdGhpcy50cmFuc2ZlckZvcm1hdDtcbiAgICBjbG9uZWRNZWRpYS5sZW5ndGggPSB0aGlzLmxlbmd0aDtcblxuICAgIGNsb25lZE1lZGlhLmVzc0VucmljaGVkRGF0YSA9IHRoaXMuZXNzRW5yaWNoZWREYXRhO1xuXG4gICAgcmV0dXJuIGNsb25lZE1lZGlhO1xuICB9O1xuXG4gIC8vICoqIE9iamVjdCBJRCBTZXR0ZXJzICoqIC8vXG5cbiAgTWVkaWEucHJvdG90eXBlLmlzRW1iZWRkZWQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5faXNFbWJlZGRlZDtcbiAgfTtcblxuICBNZWRpYS5wcm90b3R5cGUuc2V0SXNFbWJlZGRlZCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgdGhpcy5faXNFbWJlZGRlZCA9IHZhbHVlO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAbWVtYmVyT2YgTWVkaWFcbiAgICogQGluc3RhbmNlXG4gICAqIEBtZXRob2Qgc2V0VmVyc2lvbklkXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvbiBzZXRzIHRoZSB2YWx1ZSBvZiB0aGUgdmVyc2lvbiBpZCBmb3IgdGhlIHBpZWNlIG9mIG1lZGlhXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZSBUaGUgdmVyc2lvbiBpZCB2YWx1ZVxuICAgKiBAcmV0dXJucyB7dGhpc30gYHRoaXNgXG4gICAqL1xuICBNZWRpYS5wcm90b3R5cGUuc2V0VmVyc2lvbklkID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICB0aGlzLnZlcnNpb25JZE9iamVjdC5zZXRWYWx1ZSh2YWx1ZSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgTWVkaWEucHJvdG90eXBlLnNldEJyYW5kSWQgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHRoaXMuYnJhbmRJZE9iamVjdC5zZXRWYWx1ZShMYWJlbENsZWFuc2VyLmNsZWFuTGFiZWxWYWx1ZShMYWJlbEtleXMuTUVESUFfQlJBTkQsIHZhbHVlKSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgTWVkaWEucHJvdG90eXBlLnNldFNlcmllc0lkID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICB0aGlzLnNlcmllc0lkT2JqZWN0LnNldFZhbHVlKExhYmVsQ2xlYW5zZXIuY2xlYW5MYWJlbFZhbHVlKExhYmVsS2V5cy5NRURJQV9TRVJJRVMsIHZhbHVlKSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBtZW1iZXJPZiBNZWRpYVxuICAgKiBAaW5zdGFuY2VcbiAgICogQG1ldGhvZCBzZXRDbGlwSWRcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uIHNldHMgdGhlIHZhbHVlIG9mIHRoZSBjbGlwIGlkIGZvclxuICAgKiB0aGUgcGllY2Ugb2YgbWVkaWFcbiAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlIFRoZSBjbGlwIGlkIHZhbHVlXG4gICAqIEByZXR1cm5zIHt0aGlzfSBgdGhpc2BcbiAgICovXG4gIE1lZGlhLnByb3RvdHlwZS5zZXRDbGlwSWQgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHRoaXMuY2xpcElkT2JqZWN0LnNldFZhbHVlKHZhbHVlKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogQG1lbWJlck9mIE1lZGlhXG4gICAqIEBpbnN0YW5jZVxuICAgKiBAbWV0aG9kIHNldFNlcnZpY2VJZFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb24gc2V0cyB0aGUgdmFsdWUgb2YgdGhlIHNlcnZpY2UgaWQgZm9yXG4gICAqIHRoZSBwaWVjZSBvZiBtZWRpYVxuICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgVGhlIHNlcnZpY2UgaWQgdmFsdWVcbiAgICogQHJldHVybnMge3RoaXN9IGB0aGlzYFxuICAgKi9cbiAgTWVkaWEucHJvdG90eXBlLnNldFNlcnZpY2VJZCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgdGhpcy5zZXJ2aWNlSWRPYmplY3Quc2V0VmFsdWUodmFsdWUpO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAbWVtYmVyT2YgTWVkaWFcbiAgICogQGluc3RhbmNlXG4gICAqIEBtZXRob2Qgc2V0RXBpc29kZUlkXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvbiBzZXRzIHRoZSB2YWx1ZSBvZiB0aGUgZXBpc29kZSBpZCBmb3JcbiAgICogdGhlIHBpZWNlIG9mIG1lZGlhXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZSBUaGUgZXBpc29kZSBpZCB2YWx1ZVxuICAgKiBAcmV0dXJucyB7dGhpc30gYHRoaXNgXG4gICAqL1xuICBNZWRpYS5wcm90b3R5cGUuc2V0RXBpc29kZUlkID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICB0aGlzLmVwaXNvZGVJZE9iamVjdC5zZXRWYWx1ZSh2YWx1ZSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBtZW1iZXJPZiBNZWRpYVxuICAgKiBAaW5zdGFuY2VcbiAgICogQG1ldGhvZCBzZXRWcElkXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvbiBzZXRzIHRoZSB2YWx1ZSBvZiB0aGUgdnAgaWQgZm9yXG4gICAqIHRoZSBwaWVjZSBvZiBtZWRpYVxuICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgVGhlIGxlbmd0aCBvZiB0aGUgbWVkaWEgY29udGVudCAoaW4gbXMpXG4gICAqIEByZXR1cm5zIHt0aGlzfSBgdGhpc2BcbiAgICovXG4gIE1lZGlhLnByb3RvdHlwZS5zZXRWcElkID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICB0aGlzLnZwSWRPYmplY3Quc2V0VmFsdWUodmFsdWUpO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAbWVtYmVyT2YgTWVkaWFcbiAgICogQGluc3RhbmNlXG4gICAqIEBtZXRob2Qgc2V0Tm9uUGlwc0NvbnRlbnRJZFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb24gc2V0cyB0aGUgdmFsdWUgb2YgdGhlIG5vbiBwaXBzIGNvbnRlbnQgaWQgZm9yXG4gICAqIHRoZSBwaWVjZSBvZiBtZWRpYVxuICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAgICogQHJldHVybnMge3RoaXN9IGB0aGlzYFxuICAgKi9cbiAgTWVkaWEucHJvdG90eXBlLnNldE5vblBpcHNDb250ZW50SWQgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHRoaXMubm9uUGlwc0NvbnRlbnRJZE9iamVjdC5zZXRWYWx1ZShMYWJlbENsZWFuc2VyLmNsZWFuTGFiZWxWYWx1ZShDU0xhYmVsS2V5cy5NRURJQV9OT05fUElQU19DT05URU5UX0lELCB2YWx1ZSkpO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIE1lZGlhLnByb3RvdHlwZS5nZXRTdXBwbGllciA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5zdXBwbGllcjtcbiAgfTtcblxuICAvKipcbiAgICogSW5kaWNhdGUgdGhlIHN1cHBsaWVyIG9mIHRoZSBtZWRpYS5cbiAgICogQ2FsbGluZyB0aGlzIG1ldGhvZCBpcyBvcHRpb25hbCBidXQgcHJvZHVjdHMgYXJlIGFkdmlzZWQgdG8gZG8gc29cbiAgICogaWYgdGhlIGluZm9ybWF0aW9uIGlzIGF2YWlsYWJsZSB0byBpbXByb3ZlIGFuYWx5dGljcyBpbnNpZ2h0cy5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IHN1cHBsaWVyIFRoZSBzdXBwbGllciBvZiB0aGUgbWVkaWFcbiAgICovXG4gIE1lZGlhLnByb3RvdHlwZS5zZXRTdXBwbGllciA9IGZ1bmN0aW9uIChzdXBwbGllcikge1xuICAgIGlmIChzdXBwbGllciAhPT0gbnVsbCkge1xuICAgICAgdmFyIHMgPSBVdGlscy50cmltKHN1cHBsaWVyKTtcbiAgICAgIGlmIChzLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICB0aGlzLnN1cHBsaWVyID0gcztcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBNZWRpYS5wcm90b3R5cGUuZ2V0TWVkaWFTZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMubWVkaWFTZXQ7XG4gIH07XG5cbiAgLyoqXG4gICAqIEluZGljYXRlIHRoZSBtZWRpYXNldCBvZiB0aGUgbWVkaWEuXG4gICAqIENhbGxpbmcgdGhpcyBtZXRob2QgaXMgb3B0aW9uYWwgYnV0IHByb2R1Y3RzIGFyZSBhZHZpc2VkIHRvIGRvIHNvXG4gICAqIGlmIHRoZSBpbmZvcm1hdGlvbiBpcyBhdmFpbGFibGUgdG8gaW1wcm92ZSBhbmFseXRpY3MgaW5zaWdodHMuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZWRpYVNldCBUaGUgbWVkaWFzZXQgb2YgdGhlIG1lZGlhXG4gICAqL1xuICBNZWRpYS5wcm90b3R5cGUuc2V0TWVkaWFTZXQgPSBmdW5jdGlvbiAobWVkaWFTZXQpIHtcbiAgICBpZiAobWVkaWFTZXQgIT09IG51bGwpIHtcbiAgICAgIHZhciBzID0gVXRpbHMudHJpbShtZWRpYVNldCk7XG4gICAgICBpZiAocy5sZW5ndGggIT09IDApIHtcbiAgICAgICAgdGhpcy5tZWRpYVNldCA9IHM7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgTWVkaWEucHJvdG90eXBlLmdldFRyYW5zZmVyRm9ybWF0ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLnRyYW5zZmVyRm9ybWF0O1xuICB9O1xuXG4gIC8qKlxuICAgKiBJbmRpY2F0ZSB0aGUgdHJhbnNmZXIgZm9ybWF0IG9mIHRoZSBtZWRpYS5cbiAgICogQ2FsbGluZyB0aGlzIG1ldGhvZCBpcyBvcHRpb25hbCBidXQgcHJvZHVjdHMgYXJlIGFkdmlzZWQgdG8gZG8gc29cbiAgICogaWYgdGhlIGluZm9ybWF0aW9uIGlzIGF2YWlsYWJsZSB0byBpbXByb3ZlIGFuYWx5dGljcyBpbnNpZ2h0cy5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IHRyYW5zZmVyRm9ybWF0IFRoZSB0cmFuc2ZlciBmb3JtYXQgb2YgdGhlIG1lZGlhXG4gICAqL1xuICBNZWRpYS5wcm90b3R5cGUuc2V0VHJhbnNmZXJGb3JtYXQgPSBmdW5jdGlvbiAodHJhbnNmZXJGb3JtYXQpIHtcbiAgICBpZiAodHJhbnNmZXJGb3JtYXQgIT09IG51bGwpIHtcbiAgICAgIHZhciBzID0gVXRpbHMudHJpbSh0cmFuc2ZlckZvcm1hdCk7XG4gICAgICBpZiAocy5sZW5ndGggIT09IDApIHtcbiAgICAgICAgdGhpcy50cmFuc2ZlckZvcm1hdCA9IHM7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBtZW1iZXJPZiBNZWRpYVxuICAgKiBAaW5zdGFuY2VcbiAgICogQG1ldGhvZCBpc0Fkc0VuYWJsZWRcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uIENvbnZlbmllbmNlIGhlbHBlciBtZXRob2QgdG8gZGV0ZXJtaW5lIGlmIGFkcyBhcmUgZW5hYmxlZFxuICAgKlxuICAgKiBAcmV0dXJucyB7Ym9vbH1cbiAgICovXG4gIE1lZGlhLnByb3RvdHlwZS5pc0Fkc0VuYWJsZWQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5hZHNFbmFibGVkO1xuICB9O1xuXG4gIE1lZGlhLnByb3RvdHlwZS5zZXRBZHNFbmFibGVkID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICB0aGlzLmFkc0VuYWJsZWQgPSB2YWx1ZTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBNZWRpYS5wcm90b3R5cGUuZ2V0TmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5uYW1lO1xuICB9O1xuXG4gIE1lZGlhLnByb3RvdHlwZS5zZXROYW1lID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICB0aGlzLm5hbWUgPSB2YWx1ZTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBNZWRpYS5wcm90b3R5cGUuZ2V0VHlwZSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy50eXBlO1xuICB9O1xuXG4gIE1lZGlhLnByb3RvdHlwZS5zZXRUeXBlID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICB0aGlzLnR5cGUgPSB2YWx1ZTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBNZWRpYS5wcm90b3R5cGUuZ2V0UGxheWxpc3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMucGxheWxpc3Q7XG4gIH07XG5cbiAgTWVkaWEucHJvdG90eXBlLnNldFBsYXlsaXN0ID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICB0aGlzLnBsYXlsaXN0ID0gdmFsdWU7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgTWVkaWEucHJvdG90eXBlLmdldEluaXRpYXRpb25UeXBlID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLmluaXRpYXRpb25UeXBlO1xuICB9O1xuXG4gIE1lZGlhLnByb3RvdHlwZS5zZXRJbml0aWF0aW9uVHlwZSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgdGhpcy5pbml0aWF0aW9uVHlwZSA9IHZhbHVlO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIE1lZGlhLnByb3RvdHlwZS5nZXRNZWRpYVBsYXllck5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMubWVkaWFQbGF5ZXJOYW1lO1xuICB9O1xuXG4gIE1lZGlhLnByb3RvdHlwZS5zZXRNZWRpYVBsYXllck5hbWUgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHRoaXMubWVkaWFQbGF5ZXJOYW1lID0gdmFsdWU7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgTWVkaWEucHJvdG90eXBlLmdldE1lZGlhUGxheWVyVmVyc2lvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5tZWRpYVBsYXllclZlcnNpb247XG4gIH07XG5cbiAgTWVkaWEucHJvdG90eXBlLnNldE1lZGlhUGxheWVyVmVyc2lvbiA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgdGhpcy5tZWRpYVBsYXllclZlcnNpb24gPSB2YWx1ZTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBNZWRpYS5wcm90b3R5cGUuZ2V0VHJhbnNwb3J0TW9kZSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy50cmFuc3BvcnRNb2RlO1xuICB9O1xuXG4gIE1lZGlhLnByb3RvdHlwZS5zZXRUcmFuc3BvcnRNb2RlID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICB0aGlzLnRyYW5zcG9ydE1vZGUgPSB2YWx1ZTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogQG1lbWJlck9mIE1lZGlhXG4gICAqIEBpbnN0YW5jZVxuICAgKiBAbWV0aG9kIGdldExlbmd0aFxuICAgKlxuICAgKiBAcmV0dXJucyB7TnVtYmVyfSBUaGUgbWVkaWEgbGVuZ3RoIHZhbHVlXG4gICAqL1xuICBNZWRpYS5wcm90b3R5cGUuZ2V0TGVuZ3RoID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubGVuZ3RoO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAbWVtYmVyT2YgTWVkaWFcbiAgICogQGluc3RhbmNlXG4gICAqIEBtZXRob2Qgc2V0TGVuZ3RoXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvbiBTZXQgdGhlIGxlbmd0aCBvZiB0aGUgbWVkaWEuIFRoaXMgYXR0cmlidXRlIGNhbiBhbHNvIGJlIHNldCBvblxuICAgKiB0aGUgRWNob0NsaWVudCBpbnN0YW5jZSBhZnRlciBjYWxsaW5nIGBzZXRNZWRpYSgpYCB3aXRoIHRoZVxuICAgKmBzZXRNZWRpYUxlbmd0aCgpYCBtZXRob2QuXG4gICAqXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBfbGVuZ3RoIFRoZSBsZW5ndGggb2YgdGhlIG1lZGlhIGNvbnRlbnQgKGluIG1zKVxuICAgKiBAcmV0dXJucyB7TWVkaWF9IGB0aGlzYFxuICAgKi9cbiAgTWVkaWEucHJvdG90eXBlLnNldExlbmd0aCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG5cbiAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCAmJiB2YWx1ZSAhPT0gbnVsbCkge1xuICAgICAgdmFsdWUgPSBNYXRoLmZsb29yKHZhbHVlKTtcbiAgICB9XG5cbiAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCB8fCBpc05hTih2YWx1ZSkgfHwgIWlzRmluaXRlKHZhbHVlKSB8fCB2YWx1ZSA8IDApIHtcbiAgICAgIERFQlVHLndhcm4oJ01lZGlhOiBsZW5ndGggbXVzdCBiZSBhbiBpbnRlZ2VyIG9mIDAgb3IgZ3JlYXRlci4gRWNobyB3aWxsIHJlcG9ydCBhcyAwLicpO1xuICAgICAgdmFsdWUgPSAwO1xuICAgIH1cblxuICAgIHRoaXMubGVuZ3RoID0gdmFsdWU7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogQG1lbWJlck9mIE1lZGlhXG4gICAqIEBpbnN0YW5jZVxuICAgKiBAbWV0aG9kIGdldFByb2R1Y2VyXG4gICAqXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBtZWRpYSBwcm9kdWNlclxuICAgKi9cbiAgTWVkaWEucHJvdG90eXBlLmdldFByb2R1Y2VyID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMucHJvZHVjZXJPYmplY3QuZ2V0VmFsdWUoKTtcbiAgfTtcblxuICAvKipcbiAgICogQG1lbWJlck9mIE1lZGlhXG4gICAqIEBpbnN0YW5jZVxuICAgKiBAbWV0aG9kIHByb2R1Y2VyXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvbiBzZXRzIHRoZSB2YWx1ZSBvZiB0aGUgUHJvZHVjZXIgZm9yIHRoZSBwaWVjZSBvZiBtZWRpYVxuICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvZHVjZXJDb2RlXG4gICAqIEByZXR1cm5zIHt0aGlzfSBgdGhpc2BcbiAgICovXG4gIE1lZGlhLnByb3RvdHlwZS5zZXRQcm9kdWNlciA9IGZ1bmN0aW9uKHByb2R1Y2VyQ29kZSkge1xuICAgIHZhciBwcm9kdWNlcklkO1xuXG4gICAgaWYgKHByb2R1Y2VyQ29kZSkge1xuICAgICAgcHJvZHVjZXJJZCA9IFByb2R1Y2Vycy5nZXRJZChwcm9kdWNlckNvZGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBUaGUgcHJvZHVjZXIgSUQgc2hvdWxkIGJlIHNldCB0byAwIHNvIHRoYXQgaXQgaXMgcmVtb3ZlZCBieSBBVElcbiAgICAgIHByb2R1Y2VySWQgPSAnMCc7XG4gICAgfVxuXG4gICAgaWYgKHByb2R1Y2VySWQpIHtcbiAgICAgIHRoaXMucHJvZHVjZXJPYmplY3Quc2V0VmFsdWUocHJvZHVjZXJJZCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBtZW1iZXJPZiBNZWRpYVxuICAgKiBAaW5zdGFuY2VcbiAgICogQG1ldGhvZCBzZXRQcm9kdWNlckJ5SWRcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uIHNldHMgdGhlIHZhbHVlIG9mIHRoZSBQcm9kdWNlciBmb3IgdGhlIHBpZWNlIG9mIG1lZGlhXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBwcm9kdWNlcklkXG4gICAqIEByZXR1cm5zIHt0aGlzfSBgdGhpc2BcbiAgICovXG4gIE1lZGlhLnByb3RvdHlwZS5zZXRQcm9kdWNlckJ5SWQgPSBmdW5jdGlvbihwcm9kdWNlcklkKSB7XG4gICAgaWYgKHByb2R1Y2VySWQpIHtcbiAgICAgIHRoaXMucHJvZHVjZXJPYmplY3Quc2V0VmFsdWUocHJvZHVjZXJJZCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBtZW1iZXJPZiBNZWRpYVxuICAgKiBAaW5zdGFuY2VcbiAgICogQG1ldGhvZCBnZXRWZXJzaW9uSWRPYmplY3RcbiAgICpcbiAgICogQHJldHVybnMge01lZGlhSWR9IFRoZSBWZXJzaW9uSWQgb2JqZWN0XG4gICAqL1xuICBNZWRpYS5wcm90b3R5cGUuZ2V0VmVyc2lvbklkT2JqZWN0ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudmVyc2lvbklkT2JqZWN0O1xuICB9O1xuXG4gIC8qKlxuICAgKiBAbWVtYmVyT2YgTWVkaWFcbiAgICogQGluc3RhbmNlXG4gICAqIEBtZXRob2QgZ2V0Q2xpcElkT2JqZWN0XG4gICAqXG4gICAqIEByZXR1cm5zIHtNZWRpYUlkfSBUaGUgQ2xpcElkIG9iamVjdFxuICAgKi9cbiAgTWVkaWEucHJvdG90eXBlLmdldENsaXBJZE9iamVjdCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmNsaXBJZE9iamVjdDtcbiAgfTtcblxuICAvKipcbiAgICogQG1lbWJlck9mIE1lZGlhXG4gICAqIEBpbnN0YW5jZVxuICAgKiBAbWV0aG9kIGdldFNlcnZpY2VJZE9iamVjdFxuICAgKlxuICAgKiBAcmV0dXJucyB7TWVkaWFJZH0gVGhlIFNlcnZpY2VJZCBvYmplY3RcbiAgICovXG4gIE1lZGlhLnByb3RvdHlwZS5nZXRTZXJ2aWNlSWRPYmplY3QgPSBmdW5jdGlvbigpIHtcblxuICAgIHJldHVybiB0aGlzLnNlcnZpY2VJZE9iamVjdDtcblxuICB9O1xuXG4gIC8qKlxuICAgKiBAbWVtYmVyT2YgTWVkaWFcbiAgICogQGluc3RhbmNlXG4gICAqIEBtZXRob2QgZ2V0RXBpc29kZUlkT2JqZWN0XG4gICAqXG4gICAqIEByZXR1cm5zIHtNZWRpYUlkfSBUaGUgRXBpc29kZUlkIG9iamVjdFxuICAgKi9cbiAgTWVkaWEucHJvdG90eXBlLmdldEVwaXNvZGVJZE9iamVjdCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmVwaXNvZGVJZE9iamVjdDtcbiAgfTtcblxuICAvKipcbiAgICogQG1lbWJlck9mIE1lZGlhXG4gICAqIEBpbnN0YW5jZVxuICAgKiBAbWV0aG9kIGdldFZwSWRPYmplY3RcbiAgICpcbiAgICogQHJldHVybnMge01lZGlhSWR9IFRoZSBWcElkIG9iamVjdFxuICAgKi9cbiAgTWVkaWEucHJvdG90eXBlLmdldFZwSWRPYmplY3QgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy52cElkT2JqZWN0O1xuICB9O1xuXG4gIC8qKlxuICAgKiBAbWVtYmVyT2YgTWVkaWFcbiAgICogQGluc3RhbmNlXG4gICAqIEBtZXRob2QgZ2V0Tm9uUGlwc0NvbnRlbnRJZE9iamVjdFxuICAgKlxuICAgKiBAcmV0dXJucyB7TWVkaWFJZH0gVGhlIE5vblBpcHNDb250ZW50SWQgb2JqZWN0XG4gICAqL1xuICBNZWRpYS5wcm90b3R5cGUuZ2V0Tm9uUGlwc0NvbnRlbnRJZE9iamVjdCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm5vblBpcHNDb250ZW50SWRPYmplY3Q7XG4gIH07XG5cbiAgTWVkaWEucHJvdG90eXBlLmdldEJyYW5kSWRPYmplY3QgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5icmFuZElkT2JqZWN0O1xuICB9O1xuXG4gIE1lZGlhLnByb3RvdHlwZS5nZXRCcmFuZElkID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuYnJhbmRJZE9iamVjdC5nZXRWYWx1ZSgpO1xuICB9O1xuXG4gIE1lZGlhLnByb3RvdHlwZS5nZXRTZXJpZXNJZE9iamVjdCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnNlcmllc0lkT2JqZWN0O1xuICB9O1xuXG4gIE1lZGlhLnByb3RvdHlwZS5nZXRTZXJpZXNJZCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnNlcmllc0lkT2JqZWN0LmdldFZhbHVlKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBtZW1iZXJPZiBNZWRpYVxuICAgKiBAaW5zdGFuY2VcbiAgICogQG1ldGhvZCBnZXRWZXJzaW9uSWRcbiAgICpcbiAgICogQHJldHVybnMge3N0cmluZ30gVGhlIFZlcnNpb25JZCB2YWx1ZVxuICAgKi9cbiAgTWVkaWEucHJvdG90eXBlLmdldFZlcnNpb25JZCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnZlcnNpb25JZE9iamVjdC5nZXRWYWx1ZSgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAbWVtYmVyT2YgTWVkaWFcbiAgICogQGluc3RhbmNlXG4gICAqIEBtZXRob2QgZ2V0Q2xpcElkXG4gICAqXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBDbGlwSWQgdmFsdWVcbiAgICovXG4gIE1lZGlhLnByb3RvdHlwZS5nZXRDbGlwSWQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5jbGlwSWRPYmplY3QuZ2V0VmFsdWUoKTtcbiAgfTtcblxuICAvKipcbiAgICogQG1lbWJlck9mIE1lZGlhXG4gICAqIEBpbnN0YW5jZVxuICAgKiBAbWV0aG9kIGdldFNlcnZpY2VJZFxuICAgKlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgU2VydmljZUlkIHZhbHVlXG4gICAqL1xuICBNZWRpYS5wcm90b3R5cGUuZ2V0U2VydmljZUlkID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuc2VydmljZUlkT2JqZWN0LmdldFZhbHVlKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBtZW1iZXJPZiBNZWRpYVxuICAgKiBAaW5zdGFuY2VcbiAgICogQG1ldGhvZCBnZXRFcGlzb2RlSWRcbiAgICpcbiAgICogQHJldHVybnMge3N0cmluZ30gVGhlIEVwaXNvZGVJZCB2YWx1ZVxuICAgKi9cbiAgTWVkaWEucHJvdG90eXBlLmdldEVwaXNvZGVJZCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmVwaXNvZGVJZE9iamVjdC5nZXRWYWx1ZSgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAbWVtYmVyT2YgTWVkaWFcbiAgICogQGluc3RhbmNlXG4gICAqIEBtZXRob2QgZ2V0VnBJZFxuICAgKlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgZ2V0VnBJZCB2YWx1ZVxuICAgKi9cbiAgTWVkaWEucHJvdG90eXBlLmdldFZwSWQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy52cElkT2JqZWN0LmdldFZhbHVlKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBtZW1iZXJPZiBNZWRpYVxuICAgKiBAaW5zdGFuY2VcbiAgICogQG1ldGhvZCBnZXROb25QaXBzQ29udGVudElkXG4gICAqXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBnZXROb25QaXBzQ29udGVudElkIHZhbHVlXG4gICAqL1xuICBNZWRpYS5wcm90b3R5cGUuZ2V0Tm9uUGlwc0NvbnRlbnRJZCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm5vblBpcHNDb250ZW50SWRPYmplY3QuZ2V0VmFsdWUoKTtcbiAgfTtcblxuICAvKipcbiAgICogQG1lbWJlck9mIE1lZGlhXG4gICAqIEBpbnN0YW5jZVxuICAgKiBAbWV0aG9kIGdldFJldHJpZXZhbFR5cGVcbiAgICpcbiAgICogQHJldHVybnMge0VjaG9SZXRyaWV2YWxUeXBlfSBUaGUgcmV0cmlldmFsIHR5cGUgKERvd25sb2FkIG9yIFN0cmVhbSlcbiAgICogb3IgbnVsbCBpZiBjb25zdW1wdGlvbiBtb2RlIGlzIGludmFsaWRcbiAgICovXG4gIE1lZGlhLnByb3RvdHlwZS5nZXRSZXRyaWV2YWxUeXBlID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMuY29uc3VtcHRpb25Nb2RlID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHJldHJpZXZhbFR5cGUgPSAodGhpcy5jb25zdW1wdGlvbk1vZGUgPT09IENPTlNVTVBUSU9OX01PREUuRE9XTkxPQUQpID9cbiAgICAgICAgRW51bXMuUmV0cmlldmFsVHlwZS5ET1dOTE9BRCA6IEVudW1zLlJldHJpZXZhbFR5cGUuU1RSRUFNO1xuXG4gICAgICByZXR1cm4gcmV0cmlldmFsVHlwZTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEBtZW1iZXJPZiBNZWRpYVxuICAgKiBAaW5zdGFuY2VcbiAgICogQG1ldGhvZCBpc09uRGVtYW5kXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvbiBDb252ZW5pZW5jZSBoZWxwZXIgbWV0aG9kIHRvIGRldGVybWluZVxuICAgKiBpZiBtZWRpYSBpcyBvbkRlbWFuZFxuICAgKlxuICAgKiBAcmV0dXJucyB7Ym9vbH1cbiAgICovXG4gIE1lZGlhLnByb3RvdHlwZS5pc09uRGVtYW5kID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuY29uc3VtcHRpb25Nb2RlID09PSBDT05TVU1QVElPTl9NT0RFLk9OX0RFTUFORDtcbiAgfTtcblxuICAvKipcbiAgICogQG1lbWJlck9mIE1lZGlhXG4gICAqIEBpbnN0YW5jZVxuICAgKiBAbWV0aG9kIGlzRG93bmxvYWRcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uIENvbnZlbmllbmNlIGhlbHBlciBtZXRob2QgdG8gZGV0ZXJtaW5lXG4gICAqIGlmIG1lZGlhIGlzIGRvd25sb2FkZWRcbiAgICpcbiAgICogQHJldHVybnMge2Jvb2x9XG4gICAqL1xuICBNZWRpYS5wcm90b3R5cGUuaXNEb3dubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmNvbnN1bXB0aW9uTW9kZSA9PT0gQ09OU1VNUFRJT05fTU9ERS5ET1dOTE9BRDtcbiAgfTtcblxuICAvKipcbiAgICogQG1lbWJlck9mIE1lZGlhXG4gICAqIEBpbnN0YW5jZVxuICAgKiBAbWV0aG9kIGlzTGl2ZVxuICAgKlxuICAgKiBAZGVzY3JpcHRpb24gQ29udmVuaWVuY2UgaGVscGVyIG1ldGhvZCB0byBkZXRlcm1pbmVcbiAgICogaWYgbWVkaWEgaXMgTGl2ZVxuICAgKlxuICAgKiBAcmV0dXJucyB7Ym9vbH1cbiAgICovXG4gIE1lZGlhLnByb3RvdHlwZS5pc0xpdmUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5jb25zdW1wdGlvbk1vZGUgPT09IENPTlNVTVBUSU9OX01PREUuTElWRTtcbiAgfTtcblxuICAvKipcbiAgICogQG1lbWJlck9mIE1lZGlhXG4gICAqIEBpbnN0YW5jZVxuICAgKiBAbWV0aG9kIGlzVmlkZW9cbiAgICpcbiAgICogQGRlc2NyaXB0aW9uIENvbnZlbmllbmNlIGhlbHBlciBtZXRob2QgdG8gZGV0ZXJtaW5lXG4gICAqIGlmIG1lZGlhIGlzIGEgdmlkZW9cbiAgICpcbiAgICogQHJldHVybnMge2Jvb2x9XG4gICAqL1xuICBNZWRpYS5wcm90b3R5cGUuaXNWaWRlbyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmF2VHlwZSA9PT0gRW51bXMuQXZUeXBlLlZJREVPO1xuICB9O1xuXG4gIE1lZGlhLnByb3RvdHlwZS5nZXRQbGF5ZXJJZCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAnMSc7XG4gIH07XG5cbiAgTWVkaWEucHJvdG90eXBlLnNldFBsYXlpbmcgPSBmdW5jdGlvbihpc1BsYXlpbmcpIHtcbiAgICB0aGlzLl9pc1BsYXlpbmcgPSBCb29sZWFuKGlzUGxheWluZyk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBNZWRpYS5wcm90b3R5cGUuZ2V0UGxheWluZyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl9pc1BsYXlpbmc7XG4gIH07XG5cbiAgTWVkaWEucHJvdG90eXBlLnNldEJ1ZmZlcmluZyA9IGZ1bmN0aW9uKGlzQnVmZmVyaW5nKSB7XG4gICAgdGhpcy5faXNCdWZmZXJpbmcgPSBCb29sZWFuKGlzQnVmZmVyaW5nKTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIE1lZGlhLnByb3RvdHlwZS5nZXRCdWZmZXJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5faXNCdWZmZXJpbmc7XG4gIH07XG5cbiAgcmV0dXJuIE1lZGlhO1xufSk7XG4iLCIvKiBNZXRhIGluZm9ybWF0aW9uIGFib3V0IGVjaG8gKi9cbmRlZmluZSh7XG4gIE5BTUU6ICdlY2hvX2pzJyxcbiAgVkVSU0lPTjogJzEyLjMuMCdcbn0pO1xuIiwiZGVmaW5lKFtcbiAgJy4vcGxheWhlYWQnXG5dLCBmdW5jdGlvbihQbGF5aGVhZCkge1xuXG4gICd1c2Ugc3RyaWN0JztcblxuICB2YXIgVVBEQVRFX0lOVEVSVkFMID0gMTAwMDtcbiAgdmFyIFBPU0lUSU9OX0RSSUZUX1RPTEVSQU5DRSA9IDE1MDA7XG4gIHZhciBDTE9DS19KVU1QX1RPTEVSQU5DRSA9IDE1MDA7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBwbGF5ZXJEZWxlZ2F0ZVxuICAgKiBAY29uc3RydWN0b3JcbiAgICovXG4gIGZ1bmN0aW9uIE9uRGVtYW5kQnJva2VyKHBsYXllckRlbGVnYXRlLCBtZWRpYSwgZWNob0NsaWVudCkge1xuICAgIHRoaXMuX3BsYXllckRlbGVnYXRlID0gcGxheWVyRGVsZWdhdGU7XG4gICAgdGhpcy5fbWVkaWEgPSBtZWRpYTtcbiAgICB0aGlzLl9lY2hvQ2xpZW50ID0gZWNob0NsaWVudDtcbiAgICB0aGlzLl9wbGF5aGVhZCA9IG5ldyBQbGF5aGVhZCgpO1xuICAgIHRoaXMuX2lzU3RhcnRlZCA9IGZhbHNlO1xuICAgIHRoaXMuX2ludGVydmFsID0gbnVsbDtcbiAgICB0aGlzLl9wbGF5ZXJEZWxlZ2F0ZVBvc2l0aW9uID0gMDtcbiAgICB0aGlzLl9wbGF5aW5nVGltZSA9IDA7XG4gICAgdGhpcy5fY3VycmVudEludGVydmFsTWF4UG9zaXRpb24gPSAwO1xuICAgIHRoaXMuX2hiM05vdFNlbnRZZXQgPSB0cnVlO1xuICAgIHRoaXMuX2hiNU5vdFNlbnRZZXQgPSB0cnVlO1xuICAgIHRoaXMuX3ByZXZpb3VzUGxheWluZ1RpbWUgPSAwO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgcGxheWhlYWQuXG4gICAqL1xuICBPbkRlbWFuZEJyb2tlci5wcm90b3R5cGUuc2V0UGxheWhlYWQgPSBmdW5jdGlvbihwbGF5aGVhZCkge1xuICAgIHRoaXMuX3BsYXloZWFkID0gcGxheWhlYWQ7XG4gIH07XG5cbiAgLyoqXG4gICAqIFN0YXJ0IHVwIHRoZSBicm9rZXJcbiAgICovXG4gIE9uRGVtYW5kQnJva2VyLnByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uKCkge1xuXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgaWYgKHRoaXMuX2lzU3RhcnRlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX2ludGVydmFsID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7XG4gICAgICBzZWxmLl91cGRhdGUoKTtcbiAgICB9LCBVUERBVEVfSU5URVJWQUwpO1xuXG4gICAgdGhpcy5faXNTdGFydGVkID0gdHJ1ZTtcbiAgICB0aGlzLl9wbGF5aGVhZC5zdGFydCgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTdG9wIHRoZSBicm9rZXJcbiAgICovXG4gIE9uRGVtYW5kQnJva2VyLnByb3RvdHlwZS5zdG9wID0gZnVuY3Rpb24oKSB7XG4gICAgY2xlYXJJbnRlcnZhbCh0aGlzLl9pbnRlcnZhbCk7XG4gICAgdGhpcy5fcGxheWhlYWQuc3RvcCgpO1xuXG4gICAgdGhpcy5faXNTdGFydGVkID0gZmFsc2U7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgY3VycmVudCBwb3NpdGlvbiBpbiBtcy5cbiAgICpcbiAgICogU2hvdWxkIGJlIGNhbGxlZCBpbnNpZGUgYW4gRWNob0NsaWVudCBhdiBFdmVudCB0aGF0XG4gICAqIGFjY2VwdHMgYSBwb3NpdGlvbiBlZyBhdlBsYXksIGF2UGF1c2UsIGF2U2VlayBldGMuXG4gICAqXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBwb3NpdGlvblxuICAgKi9cbiAgT25EZW1hbmRCcm9rZXIucHJvdG90eXBlLnNldFBvc2l0aW9uID0gZnVuY3Rpb24ocG9zaXRpb24pIHtcbiAgICBpZiAoXG4gICAgICAodHlwZW9mIHBvc2l0aW9uID09PSAnbnVtYmVyJykgJiZcbiAgICAgIHBvc2l0aW9uID49IDAgJiZcbiAgICAgICF0aGlzLmFyZVBvc2l0aW9uc1dpdGhpblRvbGVyYW5jZSh0aGlzLmdldFBvc2l0aW9uKCksIHBvc2l0aW9uKVxuICAgICkge1xuICAgICAgdGhpcy5fcGxheWVyRGVsZWdhdGVQb3NpdGlvbiA9IHBvc2l0aW9uO1xuICAgICAgdGhpcy5fcGxheWluZ1RpbWUgKz0gdGhpcy5fcGxheWhlYWQuZ2V0UG9zaXRpb24oKTtcbiAgICAgIHRoaXMuX3Jlc3RhcnRQbGF5aGVhZCgpO1xuICAgICAgdGhpcy5fY3VycmVudEludGVydmFsTWF4UG9zaXRpb24gPSBwb3NpdGlvbjtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgbWF4aW11bSBwb3NpdGlvbiBzYW1wbGVkIGZyb20gdGhlIHBsYXllciBkZWxlZ2F0ZSBpblxuICAgKiB0aGUgY3VycmVudCBpbnRlcnZhbC5cbiAgICpcbiAgICogQHJldHVybiB7TnVtYmVyfVxuICAgKi9cbiAgT25EZW1hbmRCcm9rZXIucHJvdG90eXBlLmdldEN1cnJlbnRJbnRlcnZhbE1heFBvc2l0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX2N1cnJlbnRJbnRlcnZhbE1heFBvc2l0aW9uO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDaGVjayB0byBzZWUgaWYgdGhlIGJyb2FkY2FzdCBoYXMgY2hhbmdlZCBiYXNlZCBvbiB0aGUgY3VycmVudCBwbGF5ZXIgdGltZS5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICovXG4gIE9uRGVtYW5kQnJva2VyLnByb3RvdHlwZS5fdXBkYXRlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHBsYXllckRlbGVnYXRlUG9zaXRpb24gPSBwYXJzZUludCh0aGlzLl9wbGF5ZXJEZWxlZ2F0ZS5nZXRQb3NpdGlvbigpLCAxMCk7XG4gICAgdmFyIHBvc2l0aW9uID0gdGhpcy5nZXRQb3NpdGlvbigpO1xuICAgIHZhciBwbGF5aW5nVGltZSA9IHRoaXMuX3BsYXlpbmdUaW1lICsgdGhpcy5fcGxheWhlYWQuZ2V0UG9zaXRpb24oKTtcbiAgICB2YXIgcGxheWluZ1RpbWVEaWZmID0gTWF0aC5hYnMocGxheWluZ1RpbWUgLSAodGhpcy5fcHJldmlvdXNQbGF5aW5nVGltZSB8fCBwbGF5aW5nVGltZSkpO1xuICAgIHRoaXMuX3ByZXZpb3VzUGxheWluZ1RpbWUgPSBwbGF5aW5nVGltZTtcblxuICAgIGlmICgodHlwZW9mIHBsYXllckRlbGVnYXRlUG9zaXRpb24gPT09ICdudW1iZXInKSAmJlxuICAgICAgICBwbGF5ZXJEZWxlZ2F0ZVBvc2l0aW9uICE9PSB0aGlzLl9wbGF5ZXJEZWxlZ2F0ZVBvc2l0aW9uICYmXG4gICAgICAgIHBsYXllckRlbGVnYXRlUG9zaXRpb24gPiAwXG4gICAgKSB7XG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMuX3BsYXllckRlbGVnYXRlUG9zaXRpb24gPT09IDAgfHxcbiAgICAgICAgIXRoaXMuYXJlUG9zaXRpb25zV2l0aGluVG9sZXJhbmNlKFxuICAgICAgICAgIHBsYXllckRlbGVnYXRlUG9zaXRpb24sIHBvc2l0aW9uXG4gICAgICAgIClcbiAgICAgICkge1xuICAgICAgICB0aGlzLl9wbGF5ZXJEZWxlZ2F0ZVBvc2l0aW9uID0gcGxheWVyRGVsZWdhdGVQb3NpdGlvbjtcbiAgICAgICAgcG9zaXRpb24gPSB0aGlzLl9wbGF5ZXJEZWxlZ2F0ZVBvc2l0aW9uO1xuICAgICAgICB0aGlzLl9yZXN0YXJ0UGxheWhlYWQoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAocG9zaXRpb24gPiB0aGlzLl9jdXJyZW50SW50ZXJ2YWxNYXhQb3NpdGlvbikge1xuICAgICAgdGhpcy5fY3VycmVudEludGVydmFsTWF4UG9zaXRpb24gPSBwb3NpdGlvbjtcbiAgICB9XG5cbiAgICAvLyBzZW5kIDMgc2Vjb25kIGhlYXJ0YmVhdFxuICAgIGlmIChwbGF5aW5nVGltZSA+PSAzMDAwICYmIHRoaXMuX2hiM05vdFNlbnRZZXQgJiYgcGxheWluZ1RpbWVEaWZmIDwgQ0xPQ0tfSlVNUF9UT0xFUkFOQ0UpIHtcbiAgICAgIHRoaXMuX2VjaG9DbGllbnQuYXZVc2VyQWN0aW9uRXZlbnQoJ2VjaG9faGInLCAnZWNob19oYl8zJywgcG9zaXRpb24pO1xuICAgICAgdGhpcy5faGIzTm90U2VudFlldCA9IGZhbHNlO1xuICAgIH1cblxuICAgIC8vIHNlbmQgNSBzZWNvbmQgaGVhcnRiZWF0XG4gICAgaWYgKHBsYXlpbmdUaW1lID49IDUwMDAgJiYgdGhpcy5faGI1Tm90U2VudFlldCAmJiBwbGF5aW5nVGltZURpZmYgPCBDTE9DS19KVU1QX1RPTEVSQU5DRSkge1xuICAgICAgdGhpcy5fZWNob0NsaWVudC5hdlVzZXJBY3Rpb25FdmVudCgnZWNob19oYicsICdlY2hvX2hiXzUnLCBwb3NpdGlvbik7XG4gICAgICB0aGlzLl9oYjVOb3RTZW50WWV0ID0gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX21lZGlhLmxlbmd0aCA+IDAgJiYgcG9zaXRpb24gPj0gdGhpcy5fbWVkaWEubGVuZ3RoKSB7XG4gICAgICB0aGlzLl9lY2hvQ2xpZW50LmF2UGF1c2VFdmVudCh0aGlzLl9tZWRpYS5sZW5ndGgsIHtcbiAgICAgICAgZWNob19wYXVzZV9hdF9tZWRpYV9sZW5ndGg6IDFcbiAgICAgIH0pO1xuICAgIH1cblxuICB9O1xuXG4gIC8qKlxuICAgKiBDb252ZW5pZW5jZSBtZXRob2QgZm9yIHJlc2V0aW5nIGFuZCBwbGF5aW5nIHRoZSBwbGF5aGVhZC5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICovXG4gIE9uRGVtYW5kQnJva2VyLnByb3RvdHlwZS5fcmVzdGFydFBsYXloZWFkID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5fcGxheWhlYWQucmVzZXQoKTtcbiAgICB0aGlzLl9wbGF5aGVhZC5zdGFydCgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXByZXNlbnRzIHRoZSB0cnVlIHBvc2l0aW9uIGEgcGxheWVyIGlzIGF0IHdpdGhpbiBhIHBpZWNlIG9mIG1lZGlhLlxuICAgKlxuICAgKiBAcmV0dXJucyB7TnVtYmVyfVxuICAgKi9cbiAgT25EZW1hbmRCcm9rZXIucHJvdG90eXBlLmdldFBvc2l0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHBsYXloZWFkUG9zaXRpb24gPSB0aGlzLl9wbGF5aGVhZC5nZXRQb3NpdGlvbigpO1xuICAgIHZhciBwb3NpdGlvbiA9ICB0aGlzLl9wbGF5ZXJEZWxlZ2F0ZVBvc2l0aW9uICsgcGxheWhlYWRQb3NpdGlvbjtcbiAgICByZXR1cm4gcG9zaXRpb247XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlcHJlc2VudHMgdGhlIHRpbWVzdGFtcCBhIHBsYXllciBpcyBhdCB3aXRoaW4gYSBwaWVjZSBvZiBtZWRpYS5cbiAgICpcbiAgICogQHJldHVybnMge051bWJlcn1cbiAgICovXG4gIE9uRGVtYW5kQnJva2VyLnByb3RvdHlwZS5nZXRUaW1lc3RhbXAgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gMDtcbiAgfTtcblxuICAvKipcbiAgICogQXJlIHR3byBwb3NpdGlvbnMgd2l0aGluIGFsbG93YWJsZSB0b2xlcmFuY2VcbiAgICpcbiAgICogQHByaXZhdGVcbiAgICovXG4gIE9uRGVtYW5kQnJva2VyLnByb3RvdHlwZS5hcmVQb3NpdGlvbnNXaXRoaW5Ub2xlcmFuY2UgPSBmdW5jdGlvbihwb3NpdGlvbjEsIHBvc2l0aW9uMikge1xuICAgIHZhciBwb3NpdGlvbkRlbHRhID0gcG9zaXRpb24xIC0gcG9zaXRpb24yO1xuICAgIHJldHVybiBwb3NpdGlvbkRlbHRhID49IC1QT1NJVElPTl9EUklGVF9UT0xFUkFOQ0UgJiZcbiAgICAgIHBvc2l0aW9uRGVsdGEgPD0gUE9TSVRJT05fRFJJRlRfVE9MRVJBTkNFO1xuICB9O1xuXG4gIHJldHVybiBPbkRlbWFuZEJyb2tlcjtcblxufSk7XG4iLCJkZWZpbmUoZnVuY3Rpb24oKSB7XG5cbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGZ1bmN0aW9uIFBsYXloZWFkKCkge1xuICAgIHRoaXMucmVzZXQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdGFydFxuICAgKi9cbiAgUGxheWhlYWQucHJvdG90eXBlLnN0YXJ0ID0gZnVuY3Rpb24oKSB7XG5cbiAgICBpZiAodGhpcy5faXNQbGF5aW5nID09PSB0cnVlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5faXNQbGF5aW5nID0gdHJ1ZTtcbiAgICB0aGlzLl9zdGFydFRpbWUgPSB0aGlzLl9nZXRDdXJyZW50VGltZSgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTdG9wIGFuZCByZXNldCB0aGUgdGltZXIuXG4gICAqL1xuICBQbGF5aGVhZC5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbigpIHtcblxuICAgIHRoaXMuX2lzUGxheWluZyA9IGZhbHNlO1xuICAgIHRoaXMuX3Bvc2l0aW9uID0gMDtcbiAgICB0aGlzLl9zdGFydFRpbWUgPSAwO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTaW11bGF0ZSBhIHBhdXNlIGluIHRpbWUuXG4gICAqL1xuICBQbGF5aGVhZC5wcm90b3R5cGUuc3RvcCA9IGZ1bmN0aW9uKCkge1xuXG4gICAgaWYgKCF0aGlzLl9pc1BsYXlpbmcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9pc1BsYXlpbmcgPSBmYWxzZTtcbiAgICB0aGlzLl9wb3NpdGlvbiArPSB0aGlzLl9nZXRDdXJyZW50VGltZSgpIC0gdGhpcy5fc3RhcnRUaW1lO1xuICAgIHRoaXMuX3N0YXJ0VGltZSA9IDA7XG4gIH07XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtOdW1iZXJ9IHRoZSBjdXJyZW50IHBvc2l0aW9uXG4gICAqL1xuICBQbGF5aGVhZC5wcm90b3R5cGUuZ2V0UG9zaXRpb24gPSBmdW5jdGlvbigpIHtcblxuICAgIHZhciBwb3NpdGlvbiA9IHRoaXMuX3Bvc2l0aW9uO1xuXG4gICAgaWYgKHRoaXMuX2lzUGxheWluZyA9PT0gdHJ1ZSkge1xuICAgICAgcG9zaXRpb24gKz0gdGhpcy5fZ2V0Q3VycmVudFRpbWUoKSAtIHRoaXMuX3N0YXJ0VGltZTtcbiAgICB9XG5cbiAgICByZXR1cm4gcG9zaXRpb247XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgY3VycmVudCB1bml4IGVwb2NoIHRpbWUuXG4gICAqXG4gICAqIEByZXR1cm5zIHtOdW1iZXJ9IHRoZSB0aW1lIGluIG1pbGxpc2Vjb25kc1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgUGxheWhlYWQucHJvdG90eXBlLl9nZXRDdXJyZW50VGltZSA9IGZ1bmN0aW9uKCkge1xuXG4gICAgLy8gRGF0ZS5ub3cgbm90IGF2YWlsYWJsZSBpbiBJRSA8PSA4XG4gICAgaWYgKCFEYXRlLm5vdykge1xuICAgICAgRGF0ZS5ub3cgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIChuZXcgRGF0ZSgpKS5nZXRUaW1lKCk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiBEYXRlLm5vdygpO1xuICB9O1xuXG4gIHJldHVybiBQbGF5aGVhZDtcbn0pO1xuIiwiZGVmaW5lKFsnLi91dGlsL21ldGhvZHMnLCAnLi91dGlsL2RlYnVnJywgJy4vZW51bWVyYXRpb25zJ10sIGZ1bmN0aW9uKFV0aWxzLCBEZWJ1ZywgRW51bXMpIHtcblxuICAndXNlIHN0cmljdCc7XG5cbiAgLyoqXG4gICAqIFBlcmZvcm0gYSBsb29rdXAgZm9yIHRoZSBUViBzY2hlZHVsZSBmb3IgYSBzcGVjaWZpYyBzZXJ2aWNlLlxuICAgKlxuICAgKiBAcGFyYW0ge01lZGlhfSBtZWRpYVxuICAgKiBAcGFyYW0ge0Vudmlyb25tZW50fSBlbnZpcm9ubWVudFxuICAgKiBAY29uc3RydWN0b3JcbiAgICovXG4gIGZ1bmN0aW9uIFNjaGVkdWxlKG1lZGlhLCBlbnZpcm9ubWVudCwgZWNob0NsaWVudCkge1xuXG4gICAgdGhpcy5fc2NoZWR1bGUgPSBbXTtcbiAgICB0aGlzLnNlcnZpY2VJZCA9IG51bGw7XG4gICAgdGhpcy5fbWVkaWEgPSBtZWRpYTtcbiAgICB0aGlzLl9lbnZpcm9ubWVudCA9IGVudmlyb25tZW50O1xuICAgIHRoaXMuX2VjaG9DbGllbnQgPSBlY2hvQ2xpZW50O1xuXG4gICAgdGhpcy5fZmV0Y2hEYXRhKCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBicm9hZGNhc3QgZm9yIHRoZSBnaXZlbiB0aW1lc3RhbXAuXG4gICAqXG4gICAqIEBwYXJhbSB7TnVtYmVyfSB0aW1lc3RhbXBcbiAgICovXG4gIFNjaGVkdWxlLnByb3RvdHlwZS5nZXRCcm9hZGNhc3QgPSBmdW5jdGlvbih0aW1lc3RhbXApIHtcblxuICAgIHZhciBpO1xuICAgIHZhciBpdGVtO1xuXG4gICAgZm9yIChpID0gMDsgaSA8IHRoaXMuX3NjaGVkdWxlLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpdGVtID0gdGhpcy5fc2NoZWR1bGVbaV0ucHVibGlzaGVkX3RpbWU7XG4gICAgICBpZiAoKHRpbWVzdGFtcCA8IGl0ZW0uZW5kKSAmJiAodGltZXN0YW1wID49IGl0ZW0uc3RhcnQpKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zY2hlZHVsZVtpXTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLy8gc3RhdGljIHByb3BlcnR5IHRvIHNldCB0aGUgRVNTIGhvc3QgZ2xvYmFsbHkuXG4gIFNjaGVkdWxlLmVzc0hvc3QgPSAnZXNzLmFwaS5iYmNpLmNvLnVrJztcblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIFNjaGVkdWxlLnByb3RvdHlwZS5fZmV0Y2hEYXRhID0gZnVuY3Rpb24oKSB7XG5cbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIGV4ZWN1dGVDcm9zc0RvbWFpbkdldDtcbiAgICB2YXIgcHJvdG9jb2w7XG4gICAgZXhlY3V0ZUNyb3NzRG9tYWluR2V0ID0gdGhpcy5fZW52aXJvbm1lbnQuZ2V0RXhlY3V0ZUNyb3NzRG9tYWluR2V0KCk7XG4gICAgcHJvdG9jb2wgPSB0aGlzLl9lbnZpcm9ubWVudC5nZXRQcm90b2NvbCgpO1xuXG4gICAgdmFyIHVybCA9IHByb3RvY29sICsgU2NoZWR1bGUuZXNzSG9zdC5yZXBsYWNlKC9eKFxcLyspPy8sICcvLycpICsgJy9zY2hlZHVsZXMnO1xuXG4gICAgaWYgKCF0aGlzLl9tZWRpYSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9tZWRpYS5nZXRTZXJ2aWNlSWQoKSkge1xuICAgICAgdXJsICs9ICc/c2VydmljZUlkPScgKyBlbmNvZGVVUklDb21wb25lbnQodGhpcy5fbWVkaWEuZ2V0U2VydmljZUlkKCkpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5fbWVkaWEuZ2V0VmVyc2lvbklkKCkpIHtcbiAgICAgIHVybCArPSAnP3ZlcnNpb25JZD0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHRoaXMuX21lZGlhLmdldFZlcnNpb25JZCgpKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuX21lZGlhLmdldFZwSWQoKSkge1xuICAgICAgdXJsICs9ICc/dnBpZD0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHRoaXMuX21lZGlhLmdldFZwSWQoKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIERlYnVnLmluZm8oXG4gICAgICAgICdVbmFibGUgdG8gZGV0ZXJtaW5lIHNlcnZpY2VJZCwgdmVyc2lvbklkIG9yIFZwSWQgZm9yIHNjaGVkdWxlJ1xuICAgICAgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBleGVjdXRlQ3Jvc3NEb21haW5HZXQodXJsLCB7XG4gICAgICBvblN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgc2VsZi5fZGF0YVN1Y2Nlc3NIYW5kbGVyKGRhdGEpO1xuICAgICAgfSxcbiAgICAgIG9uRXJyb3I6IGZ1bmN0aW9uKGVycm9yLCBzdGF0dXMpIHtcbiAgICAgICAgdmFyIGVycm9yVHlwZSA9ICdlcnJvcic7XG4gICAgICAgIGlmIChlcnJvciA9PT0gJ2pzb24nKSB7XG4gICAgICAgICAgZXJyb3JUeXBlID0gJ2pzb24nO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBlcnJvciA9PT0gJ29iamVjdCcgJiYgZXJyb3IudHlwZSA9PT0gJ3RpbWVvdXQnKSB7XG4gICAgICAgICAgZXJyb3JUeXBlID0gJ3RpbWVvdXQnO1xuICAgICAgICB9XG5cbiAgICAgICAgc2VsZi5fZGF0YUVycm9ySGFuZGxlcihlcnJvclR5cGUsIHN0YXR1cyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEluZGljYXRlcyB3aGVuIHRoZSBmZXRjaGluZyBvZiBkYXRhIGhhcyBjb21wbGV0ZWQuXG4gICAqXG4gICAqIEByZXR1cm5zIHtCb29sZWFufVxuICAgKi9cbiAgU2NoZWR1bGUucHJvdG90eXBlLmhhc0RhdGEgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5fc2NoZWR1bGUubGVuZ3RoID4gMDtcbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtPYmplY3R9IGRhdGEgSnNvbiBkYXRhIHN0cmluZyBmcm9tIEVTUy5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIFNjaGVkdWxlLnByb3RvdHlwZS5fZGF0YVN1Y2Nlc3NIYW5kbGVyID0gZnVuY3Rpb24oZGF0YSkge1xuXG4gICAgdmFyIGk7XG4gICAgdmFyIGl0ZW1zID0gW107XG4gICAgdmFyIGl0ZW07XG4gICAgdmFyIHN0YXJ0O1xuICAgIHZhciBlbmQ7XG5cbiAgICBEZWJ1Zy5pbmZvKCdDcm9zcy1kb21haW4gc2NoZWR1bGUgcmVxdWVzdCBzdWNjZXNzLicpO1xuXG4gICAgaWYgKGRhdGEpIHtcblxuICAgICAgdGhpcy5fZWNob0NsaWVudC5zZXRFc3NTdWNjZXNzKHRydWUpO1xuXG4gICAgICB0aGlzLnNlcnZpY2VJZCA9IGRhdGEuc2VydmljZS5pZDtcblxuICAgICAgZGF0YS5pdGVtcyA9IGRhdGEuaXRlbXMgfHwgW107XG5cbiAgICAgIGZvciAoaSA9IDA7IGkgPCBkYXRhLml0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHN0YXJ0ID0gZGF0YS5pdGVtc1tpXS5wdWJsaXNoZWRfdGltZS5zdGFydDtcbiAgICAgICAgZW5kID0gZGF0YS5pdGVtc1tpXS5wdWJsaXNoZWRfdGltZS5lbmQ7XG5cbiAgICAgICAgaXRlbSA9IGRhdGEuaXRlbXNbaV07XG4gICAgICAgIGl0ZW0ucHVibGlzaGVkX3RpbWUuc3RhcnQgPSAobmV3IERhdGUoc3RhcnQpKS5nZXRUaW1lKCk7XG4gICAgICAgIGl0ZW0ucHVibGlzaGVkX3RpbWUuZW5kID0gKG5ldyBEYXRlKGVuZCkpLmdldFRpbWUoKTtcbiAgICAgICAgaXRlbXMucHVzaChpdGVtKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5fc2NoZWR1bGUgPSBpdGVtcztcblxuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIFNjaGVkdWxlLnByb3RvdHlwZS5fZGF0YUVycm9ySGFuZGxlciA9IGZ1bmN0aW9uKGVycm9yVHlwZSwgY29kZSkge1xuICAgIHRoaXMuX3NjaGVkdWxlID0gW107XG4gICAgRGVidWcuZXJyb3IoJ1RoZXJlIHdhcyBhIHByb2JsZW0gcmVxdWVzdGluZyB0aGUgc2NoZWR1bGUgZnJvbSBFU1M6ICcgKyBlcnJvclR5cGUpO1xuXG4gICAgdGhpcy5fZWNob0NsaWVudC5zZXRFc3NTdWNjZXNzKGZhbHNlKTtcblxuICAgIGlmIChlcnJvclR5cGUgPT09ICdqc29uJykge1xuICAgICAgdGhpcy5fZWNob0NsaWVudC5zZXRFc3NFcnJvcihFbnVtcy5Fc3NFcnJvci5KU09OLCBjb2RlKTtcbiAgICB9IGVsc2UgaWYgKGVycm9yVHlwZSA9PT0gJ3RpbWVvdXQnKSB7XG4gICAgICB0aGlzLl9lY2hvQ2xpZW50LnNldEVzc0Vycm9yKEVudW1zLkVzc0Vycm9yLlRJTUVPVVQsIGNvZGUpO1xuICAgIH0gZWxzZSBpZiAoZXJyb3JUeXBlID09PSAnZXJyb3InICYmIGNvZGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5fZWNob0NsaWVudC5zZXRFc3NFcnJvcihFbnVtcy5Fc3NFcnJvci5TVEFUVVNfQ09ERSwgY29kZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2VjaG9DbGllbnQuc2V0RXNzRXJyb3IoRW51bXMuRXNzRXJyb3IuUlVOVElNRSwgJzAnKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIFNjaGVkdWxlO1xufSk7XG4iLCJkZWZpbmUoZnVuY3Rpb24ocmVxdWlyZSkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgdmFyIFV0aWwgPSByZXF1aXJlKCcuLi9tZXRob2RzJyk7XG4gIHZhciBERUJVRyA9IHJlcXVpcmUoJy4uL2RlYnVnJyk7XG4gIHZhciBFbnVtcyA9IHJlcXVpcmUoJy4uLy4uL2VudW1lcmF0aW9ucycpO1xuICB2YXIgTGFiZWxSdWxlcyA9IHJlcXVpcmUoJy4vbGFiZWwtcnVsZXMnKTtcblxuICB2YXIgc3RyaWN0TGFiZWxzID0gW1xuICAgICdwbGF5ZXJfbmFtZScsICduc19zdF93cycsICdiYmNfc2l0ZScsICdhcHBfdHlwZScsICdhcHBfbmFtZScsXG4gICAgJ2JiY19zdG9yZV9wZicsICdiYmNfc3RvcmVfZWQnLCAnYmJjX3N0b3JlX2ZyJywgJ2JiY19zdG9yZV9zcmMnXG4gIF07XG5cbiAgdmFyIHNlbnNpdGl2ZVBhcmFtcyA9IFsndG9rZW4nLCAnZ3VhcmRpYW5Ub2tlbicsICdub25jZScsICdkYXRlT2ZCaXJ0aERheScsICdkYXRlT2ZCaXJ0aE1vbnRoJywgJ2RhdGVPZkJpcnRoWWVhcicsICdkYXRlT2ZCaXJ0aCcsICdwZXJtaXNzaW9uVG9rZW4nXTtcblxuICB2YXIgbGFiZWxSdWxlTWFwID0ge1xuICAgIG5hbWU6IExhYmVsUnVsZXMuQ09VTlRFUk5BTUVcbiAgfTtcblxuICBsYWJlbFJ1bGVNYXBbRW51bXMuTWFuYWdlZExhYmVscy5FVkVOVF9NQVNURVJfQlJBTkRdID1cbiAgICBMYWJlbFJ1bGVzLkVWRU5UX01BU1RFUl9CUkFORDtcblxuICAvLyBJbml0aWFsaXNlIHJ1bGUgbWFwIGZvciBsYXRlciB1c2VcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHJpY3RMYWJlbHMubGVuZ3RoOyBpKyspIHtcbiAgICBsYWJlbFJ1bGVNYXBbc3RyaWN0TGFiZWxzW2ldXSA9IExhYmVsUnVsZXMuU1RSSUNUO1xuICB9XG5cbiAgZnVuY3Rpb24gX2xvb2t1cFJ1bGUoa2V5KSB7XG4gICAgaWYgKGxhYmVsUnVsZU1hcC5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICByZXR1cm4gbGFiZWxSdWxlTWFwW2tleV07XG4gICAgfVxuXG4gICAgcmV0dXJuIExhYmVsUnVsZXMuQ1VTVE9NO1xuICB9XG5cbiAgLyoqXG4gICAqIENsZWFucyB0aGUgbGFiZWwgdXNpbmcgYmFzZSAoZXZlbnQgbWIvbGFiZWwga2V5KSBydWxlc1xuICAgKiBAcGFyYW0ge3N0cmluZ30gaXRlbSAtIFRoZSBsYWJlbCBrZXkvdmFsdWUgdG8gY2xlYW5cbiAgICogQHJldHVybnMge3N0cmluZ30gYSBjbGVhbmVkIGxhYmVsIGtleS92YWx1ZVxuICAgKi9cbiAgZnVuY3Rpb24gX2NsZWFuQmFzZShpdGVtKSB7XG4gICAgcmV0dXJuIGl0ZW0gJiYgaXRlbVxuICAgICAgLnRvTG93ZXJDYXNlKClcbiAgICAgIC5yZXBsYWNlKC9bXmEtejAtOV0rL2csICdfJykgLy8gQ2FyZXQgbWF0Y2hlcyBvcHBvc2l0ZVxuICAgICAgLnJlcGxhY2UoLyheXyspfChfKyQpL2csICcnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhbnMgdGhlIGtleSB1c2VkIGZvciBhIHBhcnRpY3VsYXIgbGFiZWxcbiAgICogQHBhcmFtIHtzdHJpbmd9IGxhYmVsS2V5IC0gVGhlIGxhYmVsIGtleSB0byBjbGVhblxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBhIGNsZWFuZWQgbGFiZWwgdmFsdWVcbiAgICovXG4gIGZ1bmN0aW9uIGNsZWFuTGFiZWxLZXkobGFiZWxLZXkpIHtcbiAgICB2YXIgbmV3a2V5ID0gX2NsZWFuQmFzZShsYWJlbEtleSk7XG5cbiAgICBVdGlsLmFzc2VydChsYWJlbEtleSA9PT0gbmV3a2V5LFxuICAgICAgJ0xhYmVsIGtleSBjYW4gb25seSBjb250YWluOiBbYS16MC05X10sIGFuZCBubyBjb25zZWN1dGl2ZSBcIl9cInMgb3IgJyArXG4gICAgICAnXCJfXCIgYXQgdGhlIGJlZ2luaW5nIG9yIGVuZCwgZ290IFwiJyArIGxhYmVsS2V5ICtcbiAgICAgICdcIi4gVGhpcyB3aWxsIGJlIHNlbnQgYXMgXCInICsgbmV3a2V5ICsgJ1wiJywgdHJ1ZSk7XG5cbiAgICByZXR1cm4gbmV3a2V5O1xuICB9XG5cbiAgLyoqXG4gICAqIENsZWFucyB0aGUgbGFiZWwgdXNpbmcgZXZlbnQgbWFzdGVyIGJyYW5kIHJ1bGVzXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBsYWJlbFZhbHVlIC0gVGhlIGxhYmVsIHZhbHVlIHRvIGNsZWFuXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IGEgY2xlYW5lZCBsYWJlbCB2YWx1ZVxuICAgKi9cbiAgZnVuY3Rpb24gX2NsZWFuRXZlbnRNYXN0ZXJCcmFuZChsYWJlbFZhbHVlKSB7XG4gICAgcmV0dXJuIF9jbGVhbkJhc2UobGFiZWxWYWx1ZSk7XG4gIH1cblxuICAvKipcbiAgICogQ2xlYW5zIHRoZSBsYWJlbCB1c2luZyBzdHJpY3QgcnVsZXNcbiAgICogQHBhcmFtIHtzdHJpbmd9IGxhYmVsVmFsdWUgICAtIFRoZSBsYWJlbCB2YWx1ZSB0byBjbGVhblxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBhIGNsZWFuZWQgbGFiZWwgdmFsdWVcbiAgICovXG4gIGZ1bmN0aW9uIF9jbGVhblN0cmljdChsYWJlbFZhbHVlKSB7XG4gICAgcmV0dXJuIGxhYmVsVmFsdWUgJiYgbGFiZWxWYWx1ZVxuICAgICAgLnRvTG93ZXJDYXNlKClcbiAgICAgIC5yZXBsYWNlKC8oXlxccyspfChcXHMrJCkvZywgJycpXG4gICAgICAucmVwbGFjZSgvW15hLXowLTldKy9nLCAnLScpIC8vIENhcmV0IG1hdGNoZXMgb3Bwb3NpdGVcbiAgICAgIC5yZXBsYWNlKC8oXi0rKXwoLSskKS9nLCAnJyk7XG4gIH1cblxuICAvKipcbiAgICogQ2xlYW5zIHRoZSBsYWJlbCB1c2luZyBjdXN0b20gcnVsZXNcbiAgICogQHBhcmFtIHtzdHJpbmd9IGxhYmVsVmFsdWUgICAtIFRoZSBsYWJlbCB2YWx1ZSB0byBjbGVhblxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBhIGNsZWFuZWQgbGFiZWwgdmFsdWVcbiAgICovXG4gIGZ1bmN0aW9uIF9jbGVhbkN1c3RvbShsYWJlbFZhbHVlKSB7XG4gICAgcmV0dXJuIGxhYmVsVmFsdWUgJiYgbGFiZWxWYWx1ZVxuICAgICAgLnJlcGxhY2UoLyheXFxzKyl8KFxccyskKS9nLCAnJylcbiAgICAgIC5yZXBsYWNlKC9cXHwvZywgJyEnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhbnMgdGhlIGxhYmVsIHVzaW5nIGNvdW50ZXJuYW1lIHJ1bGVzXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIC0gVGhlIGNvdW50ZXJuYW1lIHRvIGNsZWFuXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IGEgY2xlYW5lZCBsYWJlbCB2YWx1ZVxuICAgKi9cbiAgZnVuY3Rpb24gY2xlYW5Db3VudGVyTmFtZShuYW1lKSB7XG4gICAgdmFyIGNvdW50ZXJuYW1lID0gbmFtZSAmJiBuYW1lXG4gICAgICAudG9Mb3dlckNhc2UoKVxuICAgICAgLnJlcGxhY2UoL1teYS16MC05XFwuXSsvZywgJ18nKSAvLyBDYXJldCBtYXRjaGVzIG9wcG9zaXRlXG4gICAgICAucmVwbGFjZSgvXFwuKy9nLCAnLicpXG4gICAgICAucmVwbGFjZSgvKF5fKyl8KF8rJCkvZywgJycpIHx8ICduby5uYW1lLnBhZ2UnO1xuXG4gICAgaWYgKG5hbWUgIT09IGNvdW50ZXJuYW1lKSB7XG4gICAgICBpZiAoXG4gICAgICAgIG5hbWUgPT09IG51bGwgfHxcbiAgICAgICAgdHlwZW9mIG5hbWUgIT09ICdzdHJpbmcnIHx8XG4gICAgICAgIG5hbWUucmVwbGFjZSgvICovLCAnJykubGVuZ3RoID09PSAwXG4gICAgICApIHtcbiAgICAgICAgREVCVUcuZXJyb3IoJ0NvdW50ZXJuYW1lIG11c3QgYmUgYSBub24tZW1wdHkgc3RyaW5nJyk7XG4gICAgICB9XG5cbiAgICAgIC8vIElmIHRoZXJlIGFyZSBkYXNoZXMsIHByaW50IHdhcm5pbmcgYXMgaXQgaXMgYWN0dWFseSBPS1xuICAgICAgaWYgKG5hbWUgJiYgbmFtZS5zZWFyY2goLy0vKSAhPT0gLTEpIHtcbiAgICAgICAgREVCVUcud2FybignU3VibWl0dGVkIGNvdW50ZXJuYW1lIChcIicgKyBuYW1lICsgJ1wiKSBjb250YWlucyBhdCBsZWFzdCAnICtcbiAgICAgICAgICAnb25lIFwiLVwiLiBEYXNoZXMgYXJlIG5vdCBwZXJtaXR0ZWQgYnV0LCBmb3IgbGVnYWN5IHJlYXNvbnMsIFwiLVwiICcgK1xuICAgICAgICAgICdhbmQgXCJfXCIgYXJlIGVxdWl2YWxlbnQgaW4gREF4LiBFY2hvIGNvbnZlcnRzIGRhc2hlcyB0byAnICtcbiAgICAgICAgICAndW5kZXJzY29yZXMsIHNvIHRoZSBjb3VudGVybmFtZSB3aWxsIGJlIHNlbnQgYXMgXCInICtcbiAgICAgICAgICBjb3VudGVybmFtZSArICdcIicpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgREVCVUcud2FybignY291bnRlcm5hbWUgbWF5IG9ubHkgY29udGFpbjogW2EtejAtOS5fXSwgZ290IFwiJyArXG4gICAgICAgICAgbmFtZSArICdcIi4gVGhpcyB3aWxsIGJlIGNsZWFuZWQgdXAgYW5kIHNlbnQgYXMgXCInICtcbiAgICAgICAgICBjb3VudGVybmFtZSArICdcIicpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIGNvdW50ZXJuYW1lcyBtdXN0IGVuZCBpbiAucGFnZSwgc2lsZW50bHkgYWRkIHRoaXNcbiAgICBpZiAoY291bnRlcm5hbWUuc2VhcmNoKC9cXC5wYWdlJC8pID09PSAtMSkge1xuICAgICAgY291bnRlcm5hbWUgKz0gJy5wYWdlJztcbiAgICB9XG5cbiAgICByZXR1cm4gY291bnRlcm5hbWU7XG4gIH1cblxuICAvKipcbiAgICogSGVscGVyIG1ldGhvZCB0byBkZXRlcm1pbmUgcnVsZXMgYW5kXG4gICAqIGNsZWFuIGxhYmVsIHZhbHVlcyBiYXNlZCBvbiBzZXQgcnVsZXNcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGxhYmVsS2V5ICAgLSBUaGUgbGFiZWwga2V5IHRvIGhlbHAgbG9vayB1cCBydWxlc1xuICAgKiBAcGFyYW0ge3N0cmluZ30gbGFiZWxWYWx1ZSAtIFRoZSBsYWJlbCB2YWx1ZSB5b3UgbmVlZCB0byBjbGVhblxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBhIGNsZWFuZWQgbGFiZWwgdmFsdWVcbiAgICovXG4gIGZ1bmN0aW9uIGNsZWFuTGFiZWxWYWx1ZShsYWJlbEtleSwgbGFiZWxWYWx1ZSkge1xuICAgIHZhciBkZWJ1Z0luZm8gPSAnJztcbiAgICB2YXIgbmV3VmFsdWUgPSBsYWJlbFZhbHVlO1xuICAgIHZhciBjbGVhblR5cGUgPSBfbG9va3VwUnVsZShsYWJlbEtleSk7XG5cbiAgICAvLyBDb3VudGVybmFtZSBhcHBlbmRzIHBhZ2VcbiAgICBpZiAoY2xlYW5UeXBlID09PSBMYWJlbFJ1bGVzLkNPVU5URVJOQU1FKSB7XG4gICAgICBsYWJlbFZhbHVlID0gY2xlYW5Db3VudGVyTmFtZShsYWJlbFZhbHVlKTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGxhYmVsVmFsdWUgPT09ICdudW1iZXInIHx8IHR5cGVvZiBsYWJlbFZhbHVlID09PSAnYm9vbGVhbicpIHtcbiAgICAgIHJldHVybiBsYWJlbFZhbHVlLnRvU3RyaW5nKCk7XG4gICAgfVxuXG4gICAgLy8gQmxvY2sgbm9uLXN0cmluZ3MgdGhhdCBkb24ndCBjby1lcmNlIHRvIGVtcHR5XG4gICAgaWYgKHR5cGVvZiBsYWJlbFZhbHVlICE9PSAnc3RyaW5nJykge1xuICAgICAgREVCVUcuZXJyb3IoJ0xhYmVsIG11c3QgaGF2ZSBudW1iZXIsIGJvb2xlYW4gb3Igc3RyaW5nIHZhbHVlJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgc3dpdGNoIChjbGVhblR5cGUpIHtcbiAgICAgIGNhc2UgTGFiZWxSdWxlcy5FVkVOVF9NQVNURVJfQlJBTkQ6XG4gICAgICAgIGRlYnVnSW5mbyA9ICAnTGFiZWwgdmFsdWUgY2FuIG9ubHkgY29udGFpbiBbMC05YS16XSwgYW5kICcgK1xuICAgICAgICAgICdubyBjb25zZWN1dGl2ZSBcIl9cInMgYW5kIG5vIFwiX1wicyBvciB3aGl0ZXNwYWNlIGF0IHRoZSBzdGFydCBvciBlbmQuJztcbiAgICAgICAgbmV3VmFsdWUgPSBfY2xlYW5FdmVudE1hc3RlckJyYW5kKGxhYmVsVmFsdWUpO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBMYWJlbFJ1bGVzLlNUUklDVDpcbiAgICAgICAgZGVidWdJbmZvID0gJ1N0cmljdCBMYWJlbCB2YWx1ZXMgY2FuIG9ubHkgY29udGFpbiBbIDAtOWEtei1dLCBhbmQgbm8gJyArXG4gICAgICAgICAgJ2NvbnNlY3V0aXZlIFwiLVwicyBhbmQgbm8gXCItXCJzIG9yIHdoaXRlc3BhY2UgYXQgdGhlIHN0YXJ0IG9yIGVuZC4nO1xuICAgICAgICBuZXdWYWx1ZSA9IF9jbGVhblN0cmljdChsYWJlbFZhbHVlKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgTGFiZWxSdWxlcy5OT19DTEVBTlNJTkc6XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBkZWJ1Z0luZm8gPSAnQ3VzdG9tIExhYmVsIHZhbHVlIGNhbm5vdCBjb250YWluIHdoaXRlc3BhY2UgJyArXG4gICAgICAgICAgJ2F0IHN0YXJ0IG9yIGVuZCBvciBwaXBlcyAofCkuJztcbiAgICAgICAgbmV3VmFsdWUgPSBfY2xlYW5DdXN0b20obGFiZWxWYWx1ZSk7XG4gICAgfVxuXG4gICAgZGVidWdJbmZvICs9ICdHb3QgXCInICsgbGFiZWxWYWx1ZSArICdcIiwgd2lsbCBiZSAnICsgJ3JlcGxhY2VkIHdpdGggXCInICsgbmV3VmFsdWUgKyAnXCInO1xuICAgIFV0aWwuYXNzZXJ0KGxhYmVsVmFsdWUgPT09IG5ld1ZhbHVlLCBkZWJ1Z0luZm8sIHRydWUpO1xuXG4gICAgcmV0dXJuIG5ld1ZhbHVlO1xuICB9XG5cbiAgZnVuY3Rpb24gY2xlYW5MYW5ndWFnZSh2YWx1ZSkgeyAvLyBTYW1lIGFzIG1hbmFnZWQgbGFiZWwgZXhjZXB0IGFsbG93cyBDQVBTXG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgfHwgdHlwZW9mIHZhbHVlID09PSAnYm9vbGVhbicpIHtcbiAgICAgIHJldHVybiB2YWx1ZS50b1N0cmluZygpO1xuICAgIH1cblxuICAgIHZhciBuZXdWYWwgPSB2YWx1ZSAmJiB2YWx1ZVxuICAgICAgLnJlcGxhY2UoLyheXFxzKil8KFxccyokKS9nLCAnJylcbiAgICAgIC5yZXBsYWNlKC9bXjAtOWEtekEtWi5fXSsvZywgJy0nKVxuICAgICAgLnJlcGxhY2UoLyheLSl8KC0kKS9nLCAnJykgfHwgJyc7XG5cbiAgICBVdGlsLmFzc2VydChcbiAgICAgIHZhbHVlID09PSBuZXdWYWwsXG4gICAgICAnTGFuZ3VhZ2UgbGFiZWwgdmFsdWUgY2FuIG9ubHkgY29udGFpbiBbMC05YS16QS1aLl8tXSwgYW5kIG5vICcgK1xuICAgICAgJ2NvbnNlY3V0aXZlIFwiLVwicyBhbmQgbm8gLSBhdCB0aGUgc3RhcnQgb3IgZW5kLiBHb3QgXCInICsgdmFsdWUgK1xuICAgICAgJ1wiLCB3aWxsIGJlIHJlcGxhY2VkIHdpdGggXCInICsgbmV3VmFsICsgJ1wiJywgdHJ1ZVxuICAgICk7XG5cbiAgICByZXR1cm4gbmV3VmFsO1xuICB9XG5cbiAgLyoqXG4gICAqIENsZWFucyB0aGUgc3RyaW5nIG9mIGFueSB1bmF1dGhvcml6ZWQgY2hhcmFjdGVycyBieSByZW1vdmluZyBsZWFkaW5nIGFuZCB0cmFpbGluZyB3aGl0ZXNwYWNlIGNoYXJhY3RlcnMsXG4gICAqIHJlbW92aW5nIHNxdWFyZSBicmFja2V0cyBhbmQgcmVwbGFjaW5nIG9uZSBvciBtb3JlIGNvbnNlY3V0aXZlIHdoaXRlc3BhY2UgY2hhcmFjdGVycyB3aXRoIGEgc2luZ2xlXG4gICAqIHVuZGVyc2NvcmUgY2hhcmFjdGVyLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAgICogQHJldHVybnMge3N0cmluZ30gYSBjbGVhbmVkIGxhYmVsIHZhbHVlXG4gICAqL1xuICBmdW5jdGlvbiBjbGVhbkN1c3RvbVZhcmlhYmxlKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlICYmIHZhbHVlXG5cbiAgICAgIC8vIFN0cmlwIGxlYWRpbmcgYW5kIHRyYWlsaW5nIHdoaXRlc3BhY2VcbiAgICAgIC50cmltKClcblxuICAgICAgLy8gU3RyaXAgc3F1YXJlIGJyYWNrZXRzXG4gICAgICAucmVwbGFjZSgvXFxbfFxcXS9nLCAnJylcblxuICAgICAgLy8gUmVwbGFjZSAmIHdpdGggJFxuICAgICAgLnJlcGxhY2UoLyYvZywgJyQnKVxuXG4gICAgICAvLyBSZXBsYWNlIGNvbnNlY3V0aXZlIHdoaXRlc3BhY2UgY2hhcmFjdGVycyB3aXRoIGEgc2luZ2xlIHNwYWNlXG4gICAgICAucmVwbGFjZSgvXFxzezEsfS9nLCAnICcpO1xuICB9XG5cbiAgZnVuY3Rpb24gY2xlYW5MYWJlbHMobGFiZWxzKSB7XG4gICAgdmFyIG5ld0xhYmVscyA9IHt9O1xuICAgIHZhciBuZXdLZXk7XG5cbiAgICBmb3IgKHZhciBrZXkgaW4gbGFiZWxzKSB7XG4gICAgICBuZXdLZXkgPSBjbGVhbkxhYmVsS2V5KGtleSk7XG4gICAgICBuZXdMYWJlbHNbbmV3S2V5XSA9IGNsZWFuTGFiZWxWYWx1ZShuZXdLZXksIGxhYmVsc1trZXldKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3TGFiZWxzO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgcG90ZW50aWFsbHkgc2Vuc3RpdmUgaW5mb3JtYXRpb24gZnJvbSBVUkwgcGFyYW1ldGVycyBpbiBhIGN1c3RvbSB2YXJpYWJsZS5cbiAgICogTXVzdCBiZSBjYWxsZWQgYmVmb3JlIGNsZWFuQ3VzdG9tVmFyaWFibGUuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBhIHN0cmluZyB3aXRoIGFueSBzZW5zaXRpdmUgdXJsIHBhcmFtcyBvYmZ1c2NhdGVkXG4gICAqL1xuICBmdW5jdGlvbiByZW1vdmVTZW5zaXRpdmVJbmZvKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCBzZW5zaXRpdmVQYXJhbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHJlZ2V4ID0gbmV3IFJlZ0V4cChzZW5zaXRpdmVQYXJhbXNbaV0gKyAnPVteXFwmXSonLCAnZycpO1xuICAgICAgICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UocmVnZXgsIHNlbnNpdGl2ZVBhcmFtc1tpXSArICc9WFhYWCcpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgY2xlYW5Db3VudGVyTmFtZTogY2xlYW5Db3VudGVyTmFtZSxcbiAgICBjbGVhbkxhYmVsS2V5OiBjbGVhbkxhYmVsS2V5LFxuICAgIGNsZWFuTGFiZWxWYWx1ZTogY2xlYW5MYWJlbFZhbHVlLFxuICAgIGNsZWFuTGFuZ3VhZ2U6IGNsZWFuTGFuZ3VhZ2UsXG4gICAgY2xlYW5MYWJlbHM6IGNsZWFuTGFiZWxzLFxuICAgIGNsZWFuQ3VzdG9tVmFyaWFibGU6IGNsZWFuQ3VzdG9tVmFyaWFibGUsXG4gICAgcmVtb3ZlU2Vuc2l0aXZlSW5mbzogcmVtb3ZlU2Vuc2l0aXZlSW5mb1xuICB9O1xufSk7XG4iLCJkZWZpbmUoe1xuICBTVFJJQ1Q6ICdzdHJpY3QnLFxuICBDT1VOVEVSTkFNRTogJ2NvdW50ZXJuYW1lJyxcbiAgRVZFTlRfTUFTVEVSX0JSQU5EOiAnZXZlbnRfbWFzdGVyX2JyYW5kJyxcbiAgTk9fQ0xFQU5TSU5HOiAnbm9fY2xlYW5zaW5nJyxcbiAgQ1VTVE9NOiAnY3VzdG9tJ1xufSk7XG4iLCJkZWZpbmUoZnVuY3Rpb24ocmVxdWlyZSkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgdmFyIEVudW1zID0gcmVxdWlyZSgnLi4vLi4vZW51bWVyYXRpb25zJyk7XG4gIHZhciBVdGlscyA9IHJlcXVpcmUoJy4uLy4uL3V0aWwvbWV0aG9kcycpO1xuXG4gIGZ1bmN0aW9uIGlzVmFsaWRNYW5hZ2VkTGFiZWwobGFiZWwsIHZhbHVlKSB7XG4gICAgLy8gdmFsaWRhdGUgc3RvcmUgbGFiZWxzXG4gICAgc3dpdGNoIChsYWJlbCkge1xuICAgICAgY2FzZSBFbnVtcy5NYW5hZ2VkTGFiZWxzLklQTEFZRVJfU1RBVEU6XG4gICAgICAgIGlmICh2YWx1ZSAhPT0gJ3B1cmNoYXNlZCcgJiYgdmFsdWUgIT09ICdmcmVlJykge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIEVudW1zLk1hbmFnZWRMYWJlbHMuU1RPUkVfRURfVFlQRTpcbiAgICAgICAgaWYgKHZhbHVlICE9PSAnYXJjaGl2ZScgJiYgdmFsdWUgIT09ICdzdGFuZGFyZCcpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBFbnVtcy5NYW5hZ2VkTGFiZWxzLklQTEFZRVJfQVZBSUw6XG4gICAgICAgIGlmICh2YWx1ZSAhPT0gJ2F2YWlsJyAmJiB2YWx1ZSAhPT0gJ3VuYXZhaWwnICYmIHZhbHVlICE9PSAnc29vbicpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBFbnVtcy5NYW5hZ2VkTGFiZWxzLlNUT1JFX1JFRkVSUkFMOlxuICAgICAgICBpZiAodmFsdWUgIT09ICdpcGxheWVyJyAmJiB2YWx1ZSAhPT0gJ3N0b3JlJykge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIEVudW1zLk1hbmFnZWRMYWJlbHMuQkJDX0hBU0hFRF9JRDpcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycgfHwgVXRpbHMudHJpbSh2YWx1ZSkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGlzVmFsaWRNYW5hZ2VkTGFiZWw6IGlzVmFsaWRNYW5hZ2VkTGFiZWxcbiAgfTtcbn0pO1xuIiwiZGVmaW5lKGZ1bmN0aW9uKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgLyoqXG4gICAqIENvb2tpZXNNb2R1bGUgaXMgYSBoZWxwZXIgbW9kdWxlIHRvIG9idGFpbiBjb29raWUgdmFsdWVzIGZyb20gdGhlXG4gICAqIHN0b3JlZCBjb29raWUgc3RyaW5nIG9uIHRoZSB3aW5kb3cuZG9jdW1lbnRcbiAgICpcbiAgICogQHR5cGUge3tnZXRDb29raWVWYWx1ZUJ5TmFtZTogZ2V0Q29va2llVmFsdWVCeU5hbWV9fVxuICAgKi9cbiAgdmFyIENvb2tpZXNNb2R1bGUgPSB7XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBmdW5jdGlvbiBnZXRDb29raWVWYWx1ZUJ5TmFtZVxuICAgICAqIEBkZXNjcmlwdGlvbiAtIGhlbHBlciBmdW5jdGlvbiB0byBnZXQgdGhlIGNvb2tpZVxuICAgICAqIHZhbHVlIGZyb20gdGhlIEJyb3dzZXIncyBjb29raWVzXG4gICAgICpcbiAgICAgKiBuYW1lIC0gbmFtZSBvZiBjb29raWUgeW91IHJlcXVpcmUgdGhlIHZhbHVlIG9mZlxuICAgICAqIF93aW5kb3cgLSBCcm93c2VyIFdpbmRvdyAob3B0aW9uYWwgcGFyYW1ldGVyKVxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IC0gVGhlIGNvb2tpZSB2YWx1ZSByZXF1ZXN0ZWQgb3JcbiAgICAgKiBudWxsIGlmIGRvZXMgbm90IGV4aXN0XG4gICAgICovXG4gICAgZ2V0Q29va2llVmFsdWVCeU5hbWU6IGZ1bmN0aW9uKG5hbWUsIF93aW5kb3cpIHtcbiAgICAgIHZhciB3aW4gPSBfd2luZG93IHx8IHdpbmRvdztcbiAgICAgIHZhciBjb29raWVOYW1lID0gbmFtZSArICc9JztcbiAgICAgIHZhciBkb2N1bWVudCA9IHdpbi5kb2N1bWVudDtcbiAgICAgIHZhciBjb29raWVzQXJyYXkgPSB7fTtcblxuICAgICAgaWYgKHR5cGVvZiBkb2N1bWVudCA9PT0gJ3VuZGVmaW5lZCcgfHwgdHlwZW9mIGRvY3VtZW50LmNvb2tpZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb29raWVzQXJyYXkgPSBkb2N1bWVudC5jb29raWUuc3BsaXQoJzsnKTtcbiAgICAgIH1cblxuICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGNvb2tpZXNBcnJheS5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgY29va2llID0gY29va2llc0FycmF5W2ldO1xuXG4gICAgICAgIGlmIChjb29raWUuY2hhckF0KDApID09PSAnICcpIHtcbiAgICAgICAgICBjb29raWUgPSBjb29raWUuc3Vic3RyaW5nKDEsIGNvb2tpZS5sZW5ndGgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNvb2tpZS5pbmRleE9mKGNvb2tpZU5hbWUpID09PSAwKSB7XG4gICAgICAgICAgcmV0dXJuIGNvb2tpZS5zdWJzdHJpbmcoY29va2llTmFtZS5sZW5ndGgsIGNvb2tpZS5sZW5ndGgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gQ29va2llc01vZHVsZTtcbn0pO1xuIiwiLyoqXG4gKiBTaW1wbHkgd3JhcHMgYW5kICdjb25zb2xlLngnIG1ldGhvZCBpbnRvIGEgbW9kdWxlXG4gKiB0aGlzIHdheSBhbnkgJ2NvbnNvbGUnIGZ1bmN0aW9uYWxpdHkgY2FuIGJlIHVzZWQgd2l0aG91dFxuICogd29ycnlpbmcgYWJvdXQgY2FzZXMgd2hlcmUgdGhlICdjb25zb2xlJyBvYmplY3QgaXMgdW5kZWZpbmVkXG4gKi9cblxuLyoqXG4gKiBNb2R1bGUgdXNlZCB0byBwcmludCBkZWJ1Zy9lcnJvciBzdGF0ZW1lbnRzIHRvIHRoZSBjb25zb2xlLlxuICogRXhwb3J0cyBhIG1ldGhvZCBcImVuYWJsZVwiXG4gKiBAZXhwb3J0cyBFY2hvL0RlYnVnXG4gKiBAZXhhbXBsZVxuICogRWNoby5EZWJ1Zy5lbmFibGUoKTtcbiAqL1xuZGVmaW5lKGZ1bmN0aW9uKHJlcXVpcmUpIHsgLy8ganNoaW50IGlnbm9yZTpsaW5lXG4gICd1c2Ugc3RyaWN0JztcbiAgdmFyIEVOQUJMRUQgPSBmYWxzZTsgLy8gSXMgREVCVUcgZW5hYmxlZD9cblxuICAvKipcbiAgICogUmV0dXJucyBhIGZ1bmN0aW9uIGNhbGxpbmcgdGhlIGNvbnNvbGVcbiAgICogbWV0aG9kIHNlbnQgYXMgYSBhcmd1bWVudC4gUGFzc2VzIGFueSBhcmd1bWVudHNcbiAgICogZnJvbSB0aGUgZmluYWwgY2FsbGluZyBtZXRob2Qgb250byB0aGUgY29uc29sZS5cbiAgICovXG4gIGZ1bmN0aW9uIGNhbGxDb25zb2xlKG1ldGhvZCwgbWVzc2FnZSkge1xuICAgIGlmICh0eXBlb2YgY29uc29sZSA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIGNvbnNvbGVbbWV0aG9kXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgY29uc29sZVttZXRob2RdKG1lc3NhZ2UpO1xuICAgIH1cblxuICB9XG5cbiAgLyoqXG4gICAqIEVuYWJsZSBkZWJ1ZyBtb2RlLiBDYWxsaW5nIHRoaXMgbWV0aG9kIHdpbGwgcmVzdWx0IGluIGVycm9yc1xuICAgKiBlbmNvdW50ZXJlZCBieSBFY2hvIChkdWUgdG8gYmFkIGNvbmZpZy91c2UpIHRvIGJlIHByaW50ZWRcbiAgICogdG8gdGhlIGNvbnNvbGUuIFRoZSBkZWZhdWx0IGJlaGF2aW91ciBpcyB0byBzaWxlbnRseSBmYWlsLlxuICAgKi9cbiAgZnVuY3Rpb24gZW5hYmxlKCkge1xuICAgIEVOQUJMRUQgPSB0cnVlO1xuICB9XG5cbiAgZnVuY3Rpb24gZGlzYWJsZSgpIHtcbiAgICBFTkFCTEVEID0gZmFsc2U7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRTdGF0ZSgpIHtcbiAgICByZXR1cm4gRU5BQkxFRDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGluZm8obWVzc2FnZSkge1xuICAgIGlmIChFTkFCTEVEKSB7XG4gICAgICBjYWxsQ29uc29sZSgnbG9nJywgbWVzc2FnZSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZXJyb3IobWVzc2FnZSkge1xuICAgIGlmIChFTkFCTEVEKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0VDSE9fREVCVUc6ICcgKyBtZXNzYWdlKTtcbiAgICB9XG4gIH1cblxuICAvLyBNYXAgd2FybiB0byBpbmZvIHRvIGtlZXAgYmFja3dhcmQgY29tcGF0aWJpbGl0eVxuICByZXR1cm4ge1xuICAgIGVuYWJsZTogZW5hYmxlLFxuICAgIGRpc2FibGU6IGRpc2FibGUsXG4gICAgZ2V0U3RhdGU6IGdldFN0YXRlLFxuICAgIGluZm86IGluZm8sXG4gICAgd2FybjogaW5mbyxcbiAgICBlcnJvcjogZXJyb3JcbiAgfTtcbn0pO1xuIiwiZGVmaW5lKGZ1bmN0aW9uKHJlcXVpcmUpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIHZhciBwYWNrYWdlSnNvbiA9IHJlcXVpcmUoJy4uLy4uLy4uL3BhY2thZ2UuanNvbicpO1xuXG4gIHZhciBMSUJSQVJZX1ZFUlNJT04gPSBwYWNrYWdlSnNvbi52ZXJzaW9uO1xuICB2YXIgTElSQkFSWV9OQU1FID0gJ2VjaG9fanMnO1xuXG4gIHZhciBsaWJyYXJ5SW5mbyA9IHtcblxuICAgIGdldExpYnJhcnlOYW1lOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBMSVJCQVJZX05BTUU7XG4gICAgfSxcblxuICAgIGdldExpYnJhcnlWZXJzaW9uOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBMSUJSQVJZX1ZFUlNJT047XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBsaWJyYXJ5SW5mbztcbn0pO1xuIiwiZGVmaW5lKGZ1bmN0aW9uKHJlcXVpcmUpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIHZhciBERUJVRyA9IHJlcXVpcmUoJy4vZGVidWcnKTtcblxuICAvLyBKdXN0IGNvcHkgYW4gb2JqZWN0XG4gIGZ1bmN0aW9uIGNsb25lKG9iaikge1xuICAgIHZhciByZXQgPSB7fTtcblxuICAgIGZvciAodmFyIHAgaW4gb2JqKSB7XG4gICAgICB0cnkge1xuICAgICAgICBpZiAob2JqW3BdLmNvbnN0cnVjdG9yID09PSBPYmplY3QpIHtcbiAgICAgICAgICByZXRbcF0gPSBjbG9uZShvYmpbcF0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldFtwXSA9IG9ialtwXTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZXRbcF0gPSBvYmpbcF07XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHJldDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNvbWJpbmVPYmplY3RzKG9iajEsIG9iajIsIG5vY2xvbmUpIHtcbiAgICB2YXIgYmFzZSA9IG5vY2xvbmUgPyBvYmoxIDogY2xvbmUob2JqMSk7XG4gICAgZm9yICh2YXIgcCBpbiBvYmoyKSB7XG4gICAgICB0cnkge1xuICAgICAgICBpZiAob2JqMltwXS5jb25zdHJ1Y3RvciA9PT0gT2JqZWN0KSB7XG4gICAgICAgICAgYmFzZVtwXSA9IGNvbWJpbmVPYmplY3RzKGJhc2VbcF0sIG9iajJbcF0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGJhc2VbcF0gPSBvYmoyW3BdO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGJhc2VbcF0gPSBvYmoyW3BdO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBiYXNlO1xuICB9XG5cbiAgZnVuY3Rpb24gY29udGFpbnNWYWx1ZShvYmosIHZhbCkge1xuICAgIGZvciAodmFyIHByb3AgaW4gb2JqKSB7XG4gICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KHByb3ApICYmIG9ialtwcm9wXSA9PT0gdmFsKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGV4dGVuZChvYmosIGZyZXNoKSB7XG4gICAgLy8gSWYgZnJlc2gsIGNsb25lIGl0IGRvbnQgYWx0ZXIgaXRcbiAgICB2YXIgbyA9IChmcmVzaCA/IGNsb25lKG9iaikgOiBvYmopIHx8IHt9O1xuICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuXG4gICAgZm9yICh2YXIgaSA9IDIsIHQgPSBhcmdzLmxlbmd0aDsgaSA8IHQ7IGkrKykge1xuICAgICAgaWYgKHR5cGVvZiBhcmdzW2ldID09PSAnb2JqZWN0Jykge1xuICAgICAgICBjb21iaW5lT2JqZWN0cyhvLCBhcmdzW2ldLCB0cnVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG9bYXJnc1tpXV0gPSBhcmdzWysraV07XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG87XG4gIH1cblxuICBmdW5jdGlvbiBhZGRLVihvYmosIGEsIGIpIHtcbiAgICBpZiAoYikge1xuICAgICAgcmV0dXJuIGV4dGVuZChvYmosIHRydWUsIGEsIGIpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZXh0ZW5kKG9iaiwgdHJ1ZSwgYSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrcyBhIGNvbmRpdGlvbiBhbmQgREVCVUdzIGFuIGVycm9yXG4gICAqIGlmIGl0IGZhaWxzLiByZXR1cm5zIHRoZSByZXN1bHRcbiAgICovXG4gIGZ1bmN0aW9uIGFzc2VydCh0ZXN0LCBtZXNzYWdlLCB3YXJuKSB7XG4gICAgaWYgKCF0ZXN0KSB7XG4gICAgICBpZiAod2Fybikge1xuICAgICAgICBERUJVRy53YXJuKCdBc3NlcnRpb25GYWlsZWQ6ICcgKyBtZXNzYWdlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIERFQlVHLmVycm9yKCdBc3NlcnRpb25GYWlsZWQ6ICcgKyBtZXNzYWdlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGVzdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVja3MgdGhhdCBhbiBvYmplY3QgY29udGFpbnMgYSB2YWx1ZSBhbmQgREVCVUdzXG4gICAqIGFuIGVycm9yIGlmIG5vdC4gUmV0dXJucyB0aGUgcmVzdWx0XG4gICAqL1xuICBmdW5jdGlvbiBhc3NlcnRDb250YWluc1ZhbHVlKG9iamVjdCwgdmFsdWUsIG1lc3NhZ2UpIHtcbiAgICByZXR1cm4gYXNzZXJ0KGNvbnRhaW5zVmFsdWUob2JqZWN0LCB2YWx1ZSksIG1lc3NhZ2UpO1xuICB9XG5cbiAgLyoqXG4gICAqIFVzZSBuYXRpdmUgdHJpbSgpIGlmIHN1cHBvcnRlZCwgZWxzZSB1c2UgcmVnZXhwXG4gICAqIFN0cmluZy50cmltKCkgd2FzIGFkZGVkIGluIEVDTUFTY3JpcHQgNS4xIGFuZCBpcyBub3QgYXZhaWxhYmxlIGluIG9sZGVyIGJyb3dzZXJzIChlLmcuIElFOClcbiAgICovXG5cbiAgZnVuY3Rpb24gdHJpbSh2YWx1ZSkge1xuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICBpZiAoU3RyaW5nLnByb3RvdHlwZS50cmltKSB7XG4gICAgICAgIHZhbHVlID0gdmFsdWUudHJpbSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLCAnJyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGNsb25lOiBjbG9uZSxcbiAgICBjb21iaW5lT2JqZWN0czogY29tYmluZU9iamVjdHMsXG4gICAgYWRkS1Y6IGFkZEtWLFxuICAgIGNvbnRhaW5zVmFsdWU6IGNvbnRhaW5zVmFsdWUsXG4gICAgZXh0ZW5kOiBleHRlbmQsXG4gICAgYXNzZXJ0OiBhc3NlcnQsXG4gICAgYXNzZXJ0Q29udGFpbnNWYWx1ZTogYXNzZXJ0Q29udGFpbnNWYWx1ZSxcbiAgICB0cmltOiB0cmltXG4gIH07XG59KTtcbiIsImRlZmluZShmdW5jdGlvbigpIHtcblxuICAndXNlIHN0cmljdCc7XG5cbiAgdmFyIHhoclRpbWVvdXQgPSAxMDAwMDtcblxuICAvKipcbiAgICogUGVyZm9ybSBhIGh0dHAgZ2V0XG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB1cmxcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gb25TdWNjZXNzXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IG9uRXJyb3JcbiAgICovXG4gIGZ1bmN0aW9uIGh0dHBHZXQodXJsLCBvblN1Y2Nlc3MsIG9uRXJyb3IpIHtcbiAgICB2YXIgaW1nID0gbmV3IEltYWdlKCk7XG4gICAgaW1nLm9ubG9hZCA9IG9uU3VjY2VzcztcbiAgICBpbWcub25lcnJvciA9IG9uRXJyb3I7XG4gICAgaW1nLnNyYyA9IHVybDtcbiAgfVxuXG4gIC8qKlxuICAgKiBQZXJmb3JtIGEgY3Jvc3MgZG9tYWluIGh0dHAgZ2V0IChDT1JTIG9ubHkpLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gdXJsXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBjYWxsYmFja3MgT2JqZWN0IGNvbnRhaW5pbmcgY2FsbGJhY2tzXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYWxsYmFja3Mub25TdWNjZXNzXSBXaWxsIGJlIGNhbGxlZCB3aXRoIHRoZVxuICAgKiBkZWNvZGVkIEpTT04gb2JqZWN0IGlmIHRoZSBjYWxsIGlzIHN1Y2Nlc3NmdWwuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYWxsYmFja3Mub25FcnJvcl0gV2lsbCBiZSBjYWxsZWQgd2l0aCBlcnJvciB0ZXh0LFxuICAgKiBhbmQgSFRUUCBzdGF0dXMgZm9yIENPUlMgcmVxdWVzdHMsIGlmIHRoZSBjYWxscyBmYWlscy5cbiAgICovXG4gIGZ1bmN0aW9uIGV4ZWN1dGVDcm9zc0RvbWFpbkdldCh1cmwsIGNhbGxiYWNrcykge1xuICAgIHZhciB4aHI7XG4gICAgdmFyIGlzQWJvcnQ7XG4gICAgdmFyIGRldmljZVN1cHBvcnRzQ3Jvc3NEb21haW5HZXRBbmRKc29uUGFyc2U7XG4gICAgaXNBYm9ydCA9IGZhbHNlO1xuICAgIGRldmljZVN1cHBvcnRzQ3Jvc3NEb21haW5HZXRBbmRKc29uUGFyc2UgPSBmYWxzZTtcblxuICAgIHZhciBhYm9ydCA9IGZ1bmN0aW9uKCkge1xuICAgICAgaXNBYm9ydCA9IHRydWU7XG4gICAgICB4aHIub25sb2FkID0geGhyLm9uZXJyb3IgID0geGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IG51bGw7XG4gICAgICB4aHIuYWJvcnQoKTtcbiAgICB9O1xuXG4gICAgdmFyIG9uRXJyb3IgPSBmdW5jdGlvbihlcnJvciwgc3RhdHVzKSB7XG4gICAgICBpZiAoY2FsbGJhY2tzLm9uRXJyb3IpIHtcbiAgICAgICAgY2FsbGJhY2tzLm9uRXJyb3IoZXJyb3IsIHN0YXR1cyk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHZhciBoYW5kbGVGaXJlZm94QWNjZXNzRXhjZXB0aW9uID0gZnVuY3Rpb24oZmlyZWZveEFjY2Vzc0V4Y2VwdGlvbikge1xuICAgICAgaWYgKCFpc0Fib3J0KSB7XG4gICAgICAgIG9uRXJyb3IoZmlyZWZveEFjY2Vzc0V4Y2VwdGlvbik7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHZhciBoYW5kbGVSZXNwb25zZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHJlc3BvbnNlRGF0YTtcbiAgICAgIGlmIChjYWxsYmFja3Mub25TdWNjZXNzKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgcmVzcG9uc2VEYXRhID0gd2luZG93LkpTT04ucGFyc2UoeGhyLnJlc3BvbnNlVGV4dCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgb25FcnJvcignanNvbicpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHR5cGVvZiByZXNwb25zZURhdGEgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrcy5vblN1Y2Nlc3MocmVzcG9uc2VEYXRhKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICBpZiAoXG4gICAgICB3aW5kb3cuSlNPTiAmJiB3aW5kb3cuSlNPTi5wYXJzZSAmJlxuICAgICAgdHlwZW9mIHdpbmRvdy5YTUxIdHRwUmVxdWVzdCAhPT0gJ3VuZGVmaW5lZCdcbiAgICApIHtcbiAgICAgIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgaWYgKCd3aXRoQ3JlZGVudGlhbHMnIGluIHhocikge1xuICAgICAgICBkZXZpY2VTdXBwb3J0c0Nyb3NzRG9tYWluR2V0QW5kSnNvblBhcnNlID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIWRldmljZVN1cHBvcnRzQ3Jvc3NEb21haW5HZXRBbmRKc29uUGFyc2UpIHtcbiAgICAgIG9uRXJyb3IoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgeGhyLm9wZW4oJ0dFVCcsIHVybCwgdHJ1ZSk7XG4gICAgICB4aHIub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAoXG4gICAgICAgICAgICB0eXBlb2YgeGhyLnN0YXR1cyA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgICAgIHhoci5zdGF0dXMgPCA0MDBcbiAgICAgICAgICApICYmIHhoci5yZXNwb25zZVRleHQgIT09IG51bGxcbiAgICAgICAgKSB7XG4gICAgICAgICAgaGFuZGxlUmVzcG9uc2UoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBvbkVycm9yKHhoci5yZXNwb25zZVRleHQsIHhoci5zdGF0dXMpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICB4aHIub25lcnJvciA9IGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgIG9uRXJyb3IoZXJyb3IpO1xuICAgICAgfTtcblxuICAgICAgeGhyLnRpbWVvdXQgPSB4aHJUaW1lb3V0O1xuICAgICAgeGhyLm9udGltZW91dCA9IGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgIG9uRXJyb3IoZXJyb3IpO1xuICAgICAgfTtcblxuICAgIH0gY2F0Y2ggKGZpcmVmb3hBY2Nlc3NFeGNlcHRpb24pIHtcbiAgICAgIGhhbmRsZUZpcmVmb3hBY2Nlc3NFeGNlcHRpb24oZmlyZWZveEFjY2Vzc0V4Y2VwdGlvbik7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIHhoci5zZW5kKG51bGwpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBhYm9ydCgpO1xuICAgICAgb25FcnJvcihlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBodHRwR2V0OiBodHRwR2V0LFxuICAgIGV4ZWN1dGVDcm9zc0RvbWFpbkdldDogZXhlY3V0ZUNyb3NzRG9tYWluR2V0XG4gIH07XG5cbn0pO1xuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDVkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7QUNsRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7Ozs7Ozs7O0FDdElBOzs7Ozs7Ozs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTs7Ozs7OztBQ3pnQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7OztBQzlwQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7O0FDdkxBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0EsV0FLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7QUNoVUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7O0FDbkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9HQUFBOzs7Ozs7OztBQ1RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTs7Ozs7Ozs7QUM5Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTs7Ozs7Ozs7QUNoM0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTs7Ozs7Ozs7QUN4VUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7Ozs7Ozs7O0FDL09BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTs7Ozs7Ozs7QUN0SEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7Ozs7Ozs7O0FDOUpBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7Ozs7Ozs7O0FDOTNCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7Ozs7Ozs7O0FDbkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTs7Ozs7Ozs7QUM5TEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7OztBQzNEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7Ozs7Ozs7O0FDNUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBOzs7Ozs7OztBQ3RGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7Ozs7Ozs7O0FDcERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTs7Ozs7Ozs7QUNsRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTs7Ozs7Ozs7QUMvTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBOzs7Ozs7OztBQzNrQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7OztBQy9GQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7O0FDZEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7QUNQQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7Ozs7Ozs7O0FDNUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTs7Ozs7Ozs7QUM1V0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTs7Ozs7Ozs7QUN4UUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7Ozs7Ozs7O0FDN1pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBOzs7Ozs7OztBQzdUQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTs7Ozs7Ozs7QUNoSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7Ozs7Ozs7O0FDbHpCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7OztBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBOzs7Ozs7OztBQy9MQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBOzs7Ozs7OztBQzlFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7Ozs7Ozs7O0FDN0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7Ozs7Ozs7O0FDcFJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7OztBQ05BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7Ozs7Ozs7O0FDbkRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7Ozs7Ozs7O0FDbkRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTs7Ozs7Ozs7QUNuRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7Ozs7Ozs7O0FDcEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7Ozs7Ozs7O0FDOUhBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBOzs7Ozs7Ozs7Ozs7OztBIiwic291cmNlUm9vdCI6IiJ9